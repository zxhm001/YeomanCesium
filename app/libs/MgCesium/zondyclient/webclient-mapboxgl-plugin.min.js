(function(t){var e={};function r(n){if(e[n]){return e[n].exports}var i=e[n]={i:n,l:false,exports:{}};t[n].call(i.exports,i,i.exports,r);i.l=true;return i.exports}r.m=t;r.c=e;r.d=function(t,e,n){if(!r.o(t,e)){Object.defineProperty(t,e,{enumerable:true,get:n})}};r.r=function(t){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(t,"__esModule",{value:true})};r.t=function(t,e){if(e&1)t=r(t);if(e&8)return t;if(e&4&&typeof t==="object"&&t&&t.__esModule)return t;var n=Object.create(null);r.r(n);Object.defineProperty(n,"default",{enumerable:true,value:t});if(e&2&&typeof t!="string")for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n};r.n=function(t){var e=t&&t.__esModule?function e(){return t["default"]}:function e(){return t};r.d(e,"a",e);return e};r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)};r.p="";return r(r.s=313)})([function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});var n=window.Zondy=window.Zondy||{};n.Event=n.Event||{};n.Object=n.Object||{};n.Object.ContourAnalyse=n.Object.ContourAnalyse||{};n.Object.Theme=n.Object.Theme||{};n.Theme=n.Theme||{};n.Service=n.Service||{};n.Socket=n.Socket||{};n.Enum=n.Enum||{};n.Enum.Net=n.Enum.Net||{};n.Enum.Theme=n.Enum.Theme||{};n.Enum.Map=n.Enum.Map||{};n.Catalog=n.Catalog||{};n.Util=n.Util||{};n.CRS=n.CRS||{};n.Map=n.Map||{};n.xsd=n.xsd||{};n.XLink=n.XLink||{};n.extent=n.extent||{};n.xml=n.xml||{};n.array=n.array||{};n.string=n.string||{};n.LevelRenderer=n.LevelRenderer||{};n.LevelRenderer.Tool=n.LevelRenderer.Tool||{};n.LevelRenderer.Animation=n.LevelRenderer.Animation||{};n.Feature=n.Feature||{};n.Feature.ShapeParameters=n.Feature.ShapeParameters||{};n.Geometry=n.Geometry||{};n.Client=n.Client||{};n.Source=n.Source||{};n.GeomInteraction=n.GeomInteraction||{};n.Format=n.Format||{};n.Control=n.Control||{};n.OGC=n.OGC||{};n.DataStore=n.DataStore||{};n.DataStore.ElasticSearch=n.DataStore.ElasticSearch||{};n.DataStore.PostGIS=n.DataStore.PostGIS||{};n.DataStore.Hbase=n.DataStore.Hbase||{};n.DataStore.MongoDB=n.DataStore.MongoDB||{};n.CloudDisk=n.CloudDisk||{};n.CloudDisk.GisCore=n.CloudDisk.GisCore||{};n.CloudDisk.Model=n.CloudDisk.Model||{};n.IGServerX=n.IGServerX||{};n.IGServerX.Vector=n.IGServerX.Vector||{};n.Plot=n.Plot||{};e.Zondy=n},function(t,e,r){"use strict";e.__esModule=true;e.default=function(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}},function(t,e,r){t.exports={default:r(378),__esModule:true}},function(t,e,r){"use strict";e.__esModule=true;var n=r(63);var i=o(n);function o(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e){if(!t){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e&&((typeof e==="undefined"?"undefined":(0,i.default)(e))==="object"||typeof e==="function")?e:t}},function(t,e,r){"use strict";e.__esModule=true;var n=r(380);var i=l(n);var o=r(384);var s=l(o);var a=r(63);var u=l(a);function l(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof e==="undefined"?"undefined":(0,u.default)(e)))}t.prototype=(0,s.default)(e&&e.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}});if(e)i.default?(0,i.default)(t,e):t.__proto__=e}},function(t,e,r){"use strict";e.__esModule=true;e.default=function(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}},function(t,e,r){"use strict";e.__esModule=true;var n=r(497);var i=o(n);function o(t){return t&&t.__esModule?t:{default:t}}e.default=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;(0,i.default)(t,n.key,n)}}return function(e,r,n){if(r)t(e.prototype,r);if(n)t(e,n);return e}}()},function(t,e,r){"use strict";r.r(e);var n={};r.r(n);r.d(n,"TileInfo",function(){return k});r.d(n,"TileResolution",function(){return O});var i={};r.r(i);r.d(i,"MarkStyle",function(){return G});r.d(i,"LineStyle",function(){return B});r.d(i,"LineMarkerStyle",function(){return U});r.d(i,"FillStyle",function(){return q});r.d(i,"FontStyle",function(){return z});r.d(i,"FontWeight",function(){return V});r.d(i,"FontDecoration",function(){return W});r.d(i,"HorizontalAlignment",function(){return H});r.d(i,"VerticalAlignment",function(){return X});r.d(i,"Cap",function(){return Z});r.d(i,"Join",function(){return Y});r.d(i,"LineMarkerPlacement",function(){return J});r.d(i,"Anchor",function(){return Q});r.d(i,"Align",function(){return K});r.d(i,"TextPlacement",function(){return $});r.d(i,"Symbol",function(){return et});r.d(i,"Symbol3D",function(){return rt});r.d(i,"Symbol3DLayer",function(){return nt});r.d(i,"Font",function(){return it});r.d(i,"MarkerSymbol",function(){return ot});r.d(i,"LineSymbol",function(){return st});r.d(i,"FillSymbol",function(){return lt});r.d(i,"TextSymbol",function(){return ct});r.d(i,"PictureMarkerSymbol",function(){return ht});r.d(i,"SimpleMarkerSymbol",function(){return ft});r.d(i,"SimpleLineSymbol",function(){return ut});r.d(i,"SimpleFillSymbol",function(){return pt});r.d(i,"PictureFillSymbol",function(){return dt});r.d(i,"LineSymbolMarker",function(){return yt});r.d(i,"PointSymbol3D",function(){return vt});r.d(i,"LineSymbol3D",function(){return gt});r.d(i,"PolygonSymbol3D",function(){return mt});r.d(i,"LabelSymbol3D",function(){return _t});r.d(i,"IconSymbol3DLayer",function(){return bt});r.d(i,"ObjectSymbol3DLayer",function(){return xt});r.d(i,"LineSymbol3DLayer",function(){return St});r.d(i,"PathSymbol3DLayer",function(){return wt});r.d(i,"FillSymbol3DLayer",function(){return Ct});r.d(i,"ExtrudeSymbol3DLayer",function(){return It});r.d(i,"TextSymbol3DLayer",function(){return Et});var o={};r.r(o);r.d(o,"AnyLine",function(){return Xe});r.d(o,"Arc",function(){return Ze});r.d(o,"Zondy",function(){return qt});r.d(o,"CAttStruct",function(){return Ye});r.d(o,"CAttDataRow",function(){return Je});r.d(o,"CDisplayStyle",function(){return Pr});r.d(o,"CDisplayStyleExtend",function(){return Mr});r.d(o,"CDynNoteInfo",function(){return Sr});r.d(o,"CGDBInfo",function(){return Lr});r.d(o,"Circle",function(){return Or});r.d(o,"CLineInfo",function(){return wr});r.d(o,"CPointInfo",function(){return Cr});r.d(o,"CRegionInfo",function(){return Ir});r.d(o,"DynNoteLableType",function(){return xr});r.d(o,"DynShowStyle",function(){return Er});r.d(o,"XClsType",function(){return Qe});r.d(o,"VectClsType",function(){return Ke});r.d(o,"FeatureType",function(){return $e});r.d(o,"FontShape",function(){return tr});r.d(o,"LabelLinType",function(){return er});r.d(o,"LabelRegType",function(){return rr});r.d(o,"LabelPntType",function(){return nr});r.d(o,"RepeatType",function(){return ir});r.d(o,"LabelSpreadType",function(){return or});r.d(o,"LineConstrain",function(){return sr});r.d(o,"EightDirType",function(){return ar});r.d(o,"ISShowArc",function(){return ur});r.d(o,"NetAnalyType",function(){return lr});r.d(o,"NetElemType",function(){return cr});r.d(o,"CLinAdjustType",function(){return hr});r.d(o,"CLinHeadType",function(){return fr});r.d(o,"CLinJointType",function(){return pr});r.d(o,"CLinStyleMakeType",function(){return dr});r.d(o,"CItemType",function(){return yr});r.d(o,"MapType",function(){return vr});r.d(o,"LayerStatusType",function(){return gr});r.d(o,"Feature",function(){return Br});r.d(o,"FeatureGeometry",function(){return jr});r.d(o,"FeatureGraphicBase",function(){return Rr});r.d(o,"FeatureSet",function(){return Ur});r.d(o,"GLine",function(){return Dr});r.d(o,"GPoint",function(){return Fr});r.d(o,"GRegion",function(){return kr});r.d(o,"LabelLinInfo",function(){return _r});r.d(o,"LabelRegInfo",function(){return br});r.d(o,"LablePntInfo",function(){return mr});r.d(o,"MultiPolygon",function(){return zr});r.d(o,"Point2D",function(){return Tr});r.d(o,"Polygon",function(){return qr});r.d(o,"PolyLine",function(){return Vr});r.d(o,"Rectangle",function(){return Ar});r.d(o,"Tangram",function(){return Nr});r.d(o,"VectCls",function(){return Wr});r.d(o,"WebGraphicsInfo",function(){return Gr});r.d(o,"extend",function(){return zt});r.d(o,"isArray",function(){return Vt});r.d(o,"extendDeep",function(){return Wt});r.d(o,"copy",function(){return Ht});r.d(o,"copyExcluce",function(){return Xt});r.d(o,"reset",function(){return Zt});r.d(o,"getElement",function(){return Yt});r.d(o,"isElement",function(){return Jt});r.d(o,"removeItem",function(){return Qt});r.d(o,"indexOf",function(){return Kt});r.d(o,"modifyDOMElement",function(){return $t});r.d(o,"applyDefaults",function(){return te});r.d(o,"getParameterString",function(){return ee});r.d(o,"getWFParameterString",function(){return re});r.d(o,"urlAppend",function(){return ne});r.d(o,"getParameters",function(){return ie});r.d(o,"IS_GECKO",function(){return oe});r.d(o,"Browser",function(){return se});r.d(o,"getBrowser",function(){return ae});r.d(o,"isSupportCanvas",function(){return ue});r.d(o,"supportCanvas",function(){return le});r.d(o,"isInTheSameDomain",function(){return ce});r.d(o,"toJSON",function(){return he});r.d(o,"transformResult",function(){return fe});r.d(o,"copyAttributes",function(){return pe});r.d(o,"copyAttributesWithClip",function(){return de});r.d(o,"cloneObject",function(){return ye});r.d(o,"newGuid",function(){return ve});r.d(o,"bind",function(){return ge});r.d(o,"bindAsEventListener",function(){return me});r.d(o,"getTopAnalysisResult",function(){return _e});r.d(o,"ChineseToUtf8",function(){return be});r.d(o,"DeepMerge",function(){return Ee});r.d(o,"merge",function(){return Me});r.d(o,"mixin",function(){return Le});r.d(o,"createCanvasContext2D",function(){return Ne});r.d(o,"formatQuery",function(){return Te});r.d(o,"formatEdits",function(){return Oe});r.d(o,"returnPoint",function(){return Ae});r.d(o,"formatPoints",function(){return Re});r.d(o,"notNULL",function(){return Fe});var s={};r.r(s);r.d(s,"Align",function(){return Bt});r.d(s,"Anchor",function(){return Gt});r.d(s,"Cap",function(){return Dt});r.d(s,"Join",function(){return kt});r.d(s,"TextPlacement",function(){return Ut});r.d(s,"Symbol",function(){return De});r.d(s,"Shadow",function(){return ke});r.d(s,"VectorStyle",function(){return je});r.d(s,"PointStyle",function(){return Ge});r.d(s,"MarkerStyle",function(){return qe});r.d(s,"ModelStyle",function(){return ze});r.d(s,"LineStyle",function(){return Hr});r.d(s,"FillStyle",function(){return Xr});r.d(s,"ExtrudeStyle",function(){return Zr});r.d(s,"TextStyle",function(){return Jr});r.d(s,"FontStyle",function(){return Yr});r.d(s,"TrackStyle",function(){return He});var a={};r.r(a);r.d(a,"Renderer",function(){return Qr});r.d(a,"UniqueValueInfo",function(){return Kr});r.d(a,"ClassBreakInfo",function(){return $r});r.d(a,"VisualVariable",function(){return tn});r.d(a,"SimpleRenderer",function(){return en});r.d(a,"UniqueValueRenderer",function(){return rn});r.d(a,"ClassBreaksRenderer",function(){return nn});r.d(a,"ColorVariable",function(){return on});r.d(a,"OpacityVariable",function(){return sn});r.d(a,"SizeVariable",function(){return an});r.d(a,"RotationVariable",function(){return un});var u={};r.r(u);r.d(u,"decodeGeoHash",function(){return mn});r.d(u,"decodeGeoHashToPolygon",function(){return bn});r.d(u,"encodeGeoHash",function(){return _n});var l={};r.r(l);r.d(l,"EPSG",function(){return xn});r.d(l,"ProjectTool",function(){return Sc});var c={};r.r(c);r.d(c,"ContourNoteParam",function(){return Dc});r.d(c,"ContourParam",function(){return Bc});r.d(c,"ContourZValue",function(){return Gc});r.d(c,"ContourRegionInfo",function(){return jc});r.d(c,"MeshingParam",function(){return Uc});r.d(c,"NetAnalyse",function(){return qc});r.d(c,"NetAnalysisExtent",function(){return Vc});r.d(c,"SlopLineParam",function(){return kc});var h={};r.r(h);r.d(h,"G3DLayerType",function(){return Wc});r.d(h,"M3DTileDataInfo",function(){return Hc});r.d(h,"G3DMapDoc",function(){return Zc});r.d(h,"G3DService",function(){return Xc});var f={};r.r(f);r.d(f,"ColorInfo",function(){return Jc});r.d(f,"GDBInfo",function(){return Qc});r.d(f,"MapDoc",function(){return Kc});r.d(f,"CatalogService",function(){return Yc});r.d(f,"TileLayer",function(){return $c});r.d(f,"VectorLayer",function(){return th});r.d(f,"SystomInfo",function(){return eh});var p={};r.r(p);r.d(p,"EditDocFeature",function(){return nh});r.d(p,"EditLayerFeature",function(){return ih});r.d(p,"EditServiceBase",function(){return rh});r.d(p,"MultiGeoQuery",function(){return hh});r.d(p,"MultiGeoQueryParameter",function(){return ch});r.d(p,"ObjClsQuery",function(){return ph});r.d(p,"ObjClsQueryParameter",function(){return fh});r.d(p,"QueryByLayerParameter",function(){return dh});r.d(p,"QueryDocFeature",function(){return yh});r.d(p,"QueryFeatureRule",function(){return sh});r.d(p,"QueryFeatureStruct",function(){return oh});r.d(p,"QueryLayerFeature",function(){return vh});r.d(p,"QueryParameter",function(){return uh});r.d(p,"QueryParameterBase",function(){return ah});r.d(p,"QueryServiceBase",function(){return lh});r.d(p,"QueryUnifyParameter",function(){return bh});r.d(p,"FeatureService",function(){return wh});r.d(p,"SQLParameter",function(){return Ch});r.d(p,"GeometryParameter",function(){return af});r.d(p,"RectangleParameter",function(){return uf});r.d(p,"ObjectIdsParameter",function(){return lf});r.d(p,"BaseParameter",function(){return Sh});r.d(p,"VPoint",function(){return nf});r.d(p,"VPolygon",function(){return sf});r.d(p,"VPolyline",function(){return of});r.d(p,"VFeature",function(){return cf});var d={};r.r(d);r.d(d,"AnalysisBase",function(){return hf});r.d(d,"ClassBufferBase",function(){return ff});r.d(d,"ClassBufferByMultiplyRing",function(){return pf});r.d(d,"ClassBufferBySingleRing",function(){return df});r.d(d,"ClipBase",function(){return yf});r.d(d,"ClipByCircle",function(){return vf});r.d(d,"ClipByLayer",function(){return gf});r.d(d,"ClipByPolygon",function(){return mf});r.d(d,"ContourAnalyse",function(){return _f});r.d(d,"FeatureBuffBase",function(){return bf});r.d(d,"FeatureBuffByMultiplyRing",function(){return xf});r.d(d,"FeatureBuffBySingleRing",function(){return Sf});r.d(d,"NetAnalysis",function(){return wf});r.d(d,"OverlayBase",function(){return Cf});r.d(d,"OverlayByLayer",function(){return If});r.d(d,"OverlayByPolygon",function(){return Ef});r.d(d,"ProjectBase",function(){return Pf});r.d(d,"ProjectByLayer",function(){return Mf});r.d(d,"ProjectBySRID",function(){return Lf});r.d(d,"FunctionWareService",function(){return Nf});var y={};r.r(y);r.d(y,"CalArea",function(){return Ff});r.d(y,"CalPolyLineLength",function(){return Df});r.d(y,"CalServiceBase",function(){return Rf});r.d(y,"CProjectBySRSID",function(){return Af});r.d(y,"CProjectParam",function(){return Of});r.d(y,"GeometryAnalysisBase",function(){return Tf});r.d(y,"ProjectDots",function(){return kf});r.d(y,"ProjectRang",function(){return jf});r.d(y,"Smooth",function(){return Gf});r.d(y,"TopAnalysis",function(){return Bf});r.d(y,"CoordinateElpTrans",function(){return Uf});var v={};r.r(v);r.d(v,"GetDocImageService",function(){return zf});r.d(v,"GetLayerImageService",function(){return Vf});r.d(v,"GetMapImageService",function(){return Wf});r.d(v,"GetMapInfoService",function(){return Hf});r.d(v,"GetTileImageService",function(){return Xf});r.d(v,"MapServiceBase",function(){return qf});var g={};r.r(g);r.d(g,"CAllOtherDataItemInfoSource",function(){return Zf});r.d(g,"CAnnInfo",function(){return Yf});r.d(g,"CChartLabelFormat",function(){return Jf});r.d(g,"CChartTheme",function(){return op});r.d(g,"CChartThemeInfo",function(){return np});r.d(g,"CChartThemeRepresentInfo",function(){return ip});r.d(g,"CChartType",function(){return Kf});r.d(g,"CDotDensityTheme",function(){return sp});r.d(g,"CFourColorTheme",function(){return ap});r.d(g,"CGraduatedSymbolTheme",function(){return up});r.d(g,"CLinInfo",function(){return tp});r.d(g,"CMultiClassTheme",function(){return cp});r.d(g,"CPntInfo",function(){return $f});r.d(g,"CRandomTheme",function(){return hp});r.d(g,"CRangeTheme",function(){return pp});r.d(g,"CRangeThemeInfo",function(){return fp});r.d(g,"CRegInfo",function(){return ep});r.d(g,"CSimpleTheme",function(){return dp});r.d(g,"CTheme",function(){return Qf});r.d(g,"CThemeInfo",function(){return rp});r.d(g,"CUniqueTheme",function(){return vp});r.d(g,"CUniqueThemeInfo",function(){return yp});r.d(g,"ExpInfo",function(){return lp});r.d(g,"FolderInfo",function(){return mp});r.d(g,"FolderInfoAttribute",function(){return gp});r.d(g,"ItemValue",function(){return _p});r.d(g,"ThemeOper",function(){return xp});r.d(g,"ThemesInfo",function(){return bp});var m=r(36);var _=r.n(m);const b={IGSRestMap2D:"IGSRestMap2D",IGSRestMap3D:"IGSRestMap3D",IGSRestTile:"IGSRestTile",ArcGISRestMapServer:"ArcGISRestMapServer",ArcGISRestFeatureServer:"ArcGISRestFeatureServer",IGSRestMap3DCache:"IGSRestMap3DCache",IGSRestMap3DModel:"IGSRestMap3DModel",IGSRestMap3DTerrain:"IGSRestMap3DTerrain",WMS:"WMS",WFS:"WFS",WMTS:"WMTS",WCS:"WCS",ArcGISRestVectorTileServer:"ArcGISRestVectorTileServer"};const x=[{type:"IGSRestMap2D",id:1,title:"IGServer二维地图服务",description:"IGServer自定义二维文档REST，包括地图服务、要素服务、目录服务",url:{GetCapabilities:"http://{ip}:{port}/igs/rest/mrcs/docs/{serverName}/0/layers?f=json",GetMap:"http://{ip}:{port}/igs/rest/mrms/docs/{serverName}?bbox={bbox}&w={w}&h={h}&f={f}",GetFeatureInfo:""},baseUrl:{GetCapabilities:"http://{ip}:{port}/igs/rest/mrcs/docs/{serverName}/0/layers?f=json",GetMap:"http://{ip}:{port}/igs/rest/mrms/docs/{serverName}?bbox={bbox}",GetFeatureInfo:""}},{type:"IGSRestMap3D",id:2,title:"IGServer三维地图服务",description:"IGServer自定义三维文档REST",url:{GetCapabilities:"http://{ip}:{port}/igs/rest/g3d/{serverName}/GetDocInfo",GetMap:"http://{ip}:{port}/igs/rest/mrms/tile/{serverName}/{level}/{row}/{col}",GetFeatureInfo:"",GetCovering:"http://{ip}:{port}/igs/rest/g3d/{serverName}/GetCovering?sceneIndex={sceneIndex}&layerIndex={layerIndex}&level={level}&row={row}&col={col}&xDensity={xDensity}&yDensity={yDensity}",GetLabels:"http://{ip}:{port}/igs/rest/g3d/{serverName}/GetLabels?sceneIndex={sceneIndex}&layerIndex={layerIndex}&level={level}&row={row}&col={col}&xDensity={xDensity}&yDensity={yDensity}",GetModels:"http://{ip}:{port}/igs/rest/g3d/{serverName}/GetModels?sceneIndex={sceneIndex}&layerIndex={layerIndex}&level={level}&row={row}&col={col}&xDensity={xDensity}&yDensity={yDensity}",GetTerrain:"http://{ip}:{port}/igs/rest/g3d/{serverName}/GetTerrain?sceneIndex={sceneIndex}&layerIndex={layerIndex}&level={level}&row={row}&col={col}&xDensity={xDensity}&yDensity={yDensity}"},baseUrl:{GetCapabilities:"",GetMap:"",GetFeatureInfo:"",GetCovering:"http://{ip}:{port}/igs/rest/g3d/{serverName}/GetCovering?sceneIndex={sceneIndex}&layerIndex={layerIndex}&level={level}&row={row}&col={col}&xDensity={xDensity}&yDensity={yDensity}",GetLabels:"http://{ip}:{port}/igs/rest/g3d/{serverName}/GetLabels?sceneIndex={sceneIndex}&layerIndex={layerIndex}&level={level}&row={row}&col={col}&xDensity={xDensity}&yDensity={yDensity}",GetModels:"http://{ip}:{port}/igs/rest/g3d/{serverName}/GetModels?sceneIndex={sceneIndex}&layerIndex={layerIndex}&level={level}&row={row}&col={col}&xDensity={xDensity}&yDensity={yDensity}",GetTerrain:"http://{ip}:{port}/igs/rest/g3d/{serverName}/GetTerrain?sceneIndex={sceneIndex}&layerIndex={layerIndex}&level={level}&row={row}&col={col}&xDensity={xDensity}&yDensity={yDensity}"}},{type:"IGSRestTile",id:3,title:"IGServer瓦片服务",description:"IGServer自定义瓦片REST",url:{GetCapabilities:"http://{ip}:{port}/igs/rest/mrcs/tiles/{serverName}?f=json&v=2.0",GetMap:"http://{ip}:{port}/igs/rest/mrms/tile/{serverName}/{level}/{row}/{col}",GetFeatureInfo:""},baseUrl:{GetCapabilities:"http://{ip}:{port}/igs/rest/mrcs/tiles/{serverName}?f=json&v=2.0",GetMap:"http://{ip}:{port}/igs/rest/mrms/tile/{serverName}",GetFeatureInfo:""}},{type:"ArcGISRestMapServer",id:4,title:"ArcGIS Rest地图服务",description:"ArcGIS Rest地图服务协议",url:{GetCapabilities:"",GetMap:"",GetFeatureInfo:""},baseUrl:{GetCapabilities:"",GetMap:"",GetFeatureInfo:""}},{type:"ArcGISRestFeatureServer",id:5,title:"ArcGIS Rest要素服务",description:"ArcGIS Rest要素服务协议",url:{GetCapabilities:"",GetMap:"",GetFeatureInfo:""},baseUrl:{GetCapabilities:"",GetMap:"",GetFeatureInfo:""}},{type:"IGSRestMap3DCache",id:6,title:"IGServer三维缓存服务",description:"IGServer三维缓存服务",url:{GetCapabilities:"",GetMap:"",GetFeatureInfo:""},baseUrl:{GetCapabilities:"",GetMap:"",GetFeatureInfo:""}},{type:"IGSRestMap3DModel",id:7,title:"IGServer三维模型服务",description:"IGServer三维模型服务",url:{GetCapabilities:"",GetMap:"",GetFeatureInfo:""},baseUrl:{GetCapabilities:"",GetMap:"",GetFeatureInfo:""}},{type:"IGSRestMap3DTerrain",id:8,title:"IGServer三维地形服务",description:"IGServer三维地形服务",url:{GetCapabilities:"",GetMap:"",GetFeatureInfo:""},baseUrl:{GetCapabilities:"",GetMap:"",GetFeatureInfo:""}},{type:"WMS",id:17,title:"OGC-WMS",description:"OGC-WMS服务",url:{GetCapabilities:"http://{ip}:{port}/igs/rest/ogc/doc/{serverName}/WMSServer",GetMap:"http://{ip}:{port}/igs/rest/ogc/doc/{serverName}/WMSServer",GetFeatureInfo:""},baseUrl:{GetCapabilities:"http://{ip}:{port}/igs/rest/ogc/doc/{serverName}/WMSServer",GetMap:"http://{ip}:{port}/igs/rest/ogc/{serverName}/WMSServer",GetFeatureInfo:""}},{type:"WFS",id:18,title:"OGC WFS",description:"OGC WFS服务",url:{GetCapabilities:"",GetMap:"",GetFeatureInfo:""},baseUrl:{GetCapabilities:"",GetMap:"",GetFeatureInfo:""}},{type:"WMTS",id:19,title:"OGC WMTS",description:"OGC WMTS服务",url:{GetCapabilities:"http://{ip}:{port}/igs/rest/ogc/{serverName}/WMTSServer/1.0.0/WMTSCapabilities.xml",GetMap:"http://{ip}:{port}/igs/rest/ogc/{serverName}/WMTSServer?service=WMTS&request=GetTile&version=1.0.0&style=default&format=image/png&layer={serverName}&tilematrix={tilematrix}&tilerow={tilerow}&tilecol={tilecol}",GetFeatureInfo:""},baseUrl:{GetCapabilities:"http://{ip}:{port}/igs/rest/ogc/{serverName}/WMTSServer/1.0.0/WMTSCapabilities.xml",GetMap:"http://{ip}:{port}/igs/rest/ogc/{serverName}/WMTSServerr",GetFeatureInfo:""}},{type:"WCS",id:20,title:"OGC WCS",description:"OGC WCS服务",url:{GetCapabilities:"",GetMap:"",GetFeatureInfo:""},baseUrl:{GetCapabilities:"",GetMap:"",GetFeatureInfo:""}},{type:"ArcGISRestVectorTileServer",id:32,title:"ArcGIS Rest矢量瓦片服务",description:"ArcGIS Rest矢量瓦片服务",url:{GetCapabilities:"",GetMap:"",GetFeatureInfo:""},baseUrl:{GetCapabilities:"",GetMap:"",GetFeatureInfo:""}}];var S=x;const w={DynamicTile:"DynamicTile",IGSMap2D:"IGSMap2D",IGSTile:"IGSTile",WMS:"WMS",WMTS:"WMTS"};const C=[{type:"DynamicTile",id:2,title:"动态裁图",description:"动态裁图为IGSMap2D的额外特性，为服务的功能",url:{GetCapabilities:"",GetMap:"http://{ip}:{port}/igs/rest/mrms/tile/{serverName}/{level}/{row}/{col}",GetFeatureInfo:""},baseUrl:{GetCapabilities:"",GetMap:"http://{ip}:{port}/igs/rest/mrms/tile/{serverName}",GetFeatureInfo:""}},{type:"IGSMap2D",id:3,title:"二维文档服务",description:"IGServer自定义的二维文档REST服务",url:{GetCapabilities:"",GetMap:"http://{ip}:{port}/igs/rest/mrms/docs/{serverName}?bbox={bbox}&w={w}&h={h}&f={f}",GetFeatureInfo:""},baseUrl:{GetCapabilities:"",GetMap:"http://{ip}:{port}/igs/rest/mrms/docs/{serverName}?bbox={bbox}",GetFeatureInfo:""}},{type:"IGSTile",id:5,title:"瓦片服务",description:"IGServer自定义的瓦片REST服务",url:{GetCapabilities:"http://{ip}:{port}/igs/rest/mrcs/tiles/{serverName}?f=json&v=2.0",GetMap:"http://{ip}:{port}/igs/rest/mrms/tile/{serverName}/{level}/{row}/{col}",GetFeatureInfo:""},baseUrl:{GetCapabilities:"http://{ip}:{port}/igs/rest/mrcs/tiles/{serverName}?f=json&v=2.0",GetMap:"http://{ip}:{port}/igs/rest/mrms/tile/{serverName}",GetFeatureInfo:""}},{type:"WMS",id:8,title:"WMS",description:"OGC-WMS服务",url:{GetCapabilities:"http://{ip}:{port}/igs/rest/ogc/doc/{serverName}/WMSServer",GetMap:"http://{ip}:{port}/igs/rest/ogc/doc/{serverName}/WMSServer",GetFeatureInfo:""},baseUrl:{GetCapabilities:"http://{ip}:{port}/igs/rest/ogc/doc/{serverName}/WMSServer",GetMap:"http://{ip}:{port}/igs/rest/ogc/{serverName}/WMSServer",GetFeatureInfo:""}},{type:"WMTS",id:10,title:"WMTS",description:"OGC-WMTS服务",url:{GetCapabilities:"http://{ip}:{port}/igs/rest/ogc/{serverName}/WMTSServer/1.0.0/WMTSCapabilities.xml",GetMap:"http://{ip}:{port}/igs/rest/ogc/{serverName}/WMTSServer?service=WMTS&request=GetTile&version=1.0.0&style=default&format=image/png&layer={serverName}&tilematrix={tilematrix}&tilerow={tilerow}&tilecol={tilecol}",GetFeatureInfo:""},baseUrl:{GetCapabilities:"http://{ip}:{port}/igs/rest/ogc/{serverName}/WMTSServer/1.0.0/WMTSCapabilities.xml",GetMap:"http://{ip}:{port}/igs/rest/ogc/{serverName}/WMTSServerr",GetFeatureInfo:""}}];var I=C;const E=[{type:"mapboxgl",rule:"{z}/{y}/{x}"},{type:"cesium",rule:"{z}/{y}/{x}"}];class P{get(t,e,r,n,i="baseUrl",o="GetMap",s="mapboxgl"){let a=undefined;if(typeof t==="number"){a=S.find(e=>{return e.id===t})}else if(typeof t==="string"){a=S.find(e=>{return e.id==t||e.title==t||e.type==t})}if(!a)return undefined;let u=a[i][o];u=u.replace("{ip}",e);u=u.replace("{port}",r);while(u.indexOf("{serverName}")>=0){u=u.replace("{serverName}",n)}let l;switch(s){case"mapboxgl":l=E.filter(t=>t.type==="mapboxgl");u=u.replace("{level}/{row}/{col}",l[0].rule);u=u.replace("tilematrix={tilematrix}&tilerow={tilerow}&tilecol={tilecol}","tilematrix={z}&tilerow={y}&tilecol={x}");u=u.replace("w={w}&h={h}&f={f}","w=512&h=512&f=png");case"cesium":l=E.filter(t=>t.type==="cesium");u=u.replace("{level}/{row}/{col}",l[0].rule)}return u}GetCapabilities(t,e,r,n,i="baseUrl"){return this.get(t,e,r,n,i,"GetCapabilities")}GetMap(t,e,r,n,i="baseUrl",o="mapboxgl"){return this.get(t,e,r,n,i,"GetMap",o)}GetFeatureInfo(t,e,r,n,i="baseUrl"){return this.get(t,e,r,n,i,"GetFeatureInfo")}}var M=P;const L=[{type:"mapboxgl",rule:"{z}/{y}/{x}"},{type:"cesium",rule:"{z}/{y}/{x}"}];class N{get(t,e,r,n,i="baseUrl",o="GetMap",s="mapboxgl"){let a=undefined;if(typeof t==="number"){a=I.find(e=>{return e.id===t})}else if(typeof t==="string"){a=I.find(e=>{return e.title==t})}if(!a)return undefined;let u=a[i][o];u=u.replace("{ip}",e);u=u.replace("{port}",r);while(u.indexOf("{serverName}")>=0){u=u.replace("{serverName}",n)}let l;switch(s){case"mapboxgl":l=L.filter(t=>t.type==="mapboxgl");u=u.replace("{level}/{row}/{col}",l[0].rule);u=u.replace("tilematrix={tilematrix}&tilerow={tilerow}&tilecol={tilecol}","tilematrix={z}&tilerow={y}&tilecol={x}");u=u.replace("w={w}&h={h}&f={f}","w=512&h=512&f=png");case"cesium":l=L.filter(t=>t.type==="cesium");u=u.replace("{level}/{row}/{col}",l[0].rule)}return u}GetCapabilities(t,e,r,n,i="baseUrl"){return this.get(t,e,r,n,i,"GetCapabilities")}GetMap(t,e,r,n,i="baseUrl",o="mapboxgl"){return this.get(t,e,r,n,i,"GetMap",o)}GetFeatureInfo(t,e,r,n,i="baseUrl"){return this.get(t,e,r,n,i,"GetFeatureInfo")}}var T=N;class O{constructor(){this.levelResolutionToTileSizes={}}static get EQUATOR_PERIMTER(){return 6378137}getLevelResolutionByTileSize(t){if(!this.levelResolutionToTileSizes[t]){const e=[];for(let r=0;r<=24;r++){const n=O.EQUATOR_PERIMTER;const i=360/(t*2**r);e.push({level:r,resolution:i})}this.levelResolutionToTileSizes[t]=e}return this.levelResolutionToTileSizes[t]}getLevelResolutionCesium(){return this.getLevelResolutionByTileSize(512)}getNearLevel(t,e){const r=JSON.parse(JSON.stringify(e));const n=r.sort(function(e,r){return Math.abs(e.resolution-t)-Math.abs(r.resolution-t)})[0].level;return n}getZoomOffsetByResolution({resolution:t,levelResolutions:e,levelValue:r}){const n=this.getNearLevel(t,e);const i=r-n;return i}getZoomOffsetByTileInfo(t,e=false,r=256){let n=[];const i=t.lods[0];if(!e){r=r||256;if(t.size&&t.size.length>0){r=t.size[0]}n=this.getLevelResolutionByTileSize(r)}else{n=this.getLevelResolutionCesium()}let o=this.getZoomOffsetByResolution({resolution:i.resolution,levelResolutions:n,levelValue:i.level});return o}}var A=O;class R{constructor(){this.levelScales={}}static ZERO_SCALE(t){let e=295829355.45*2;switch(t){case"EPSG:3857":case"3857":e=295829355.45*2;break;case"EPSG:4326":case"4326":case"EPSG:4490":case"4490":case"EPSG:4610":case"4610":e=295829355.45;break}return e}getLevelScale(t,e){if(!this.levelScales[t]){const r=[];for(let t=0;t<=24;t++){const n=R.ZERO_SCALE(e);const i=n/2**t;r.push({level:t,resolution:i})}this.levelScales[t]=r}return this.levelScales[t]}getLevelScaleCesium(t){return this.getLevelScale(512,t)}getNearLevel(t,e){const r=JSON.parse(JSON.stringify(e));const n=r.sort(function(e,r){return Math.abs(e.resolution-t)-Math.abs(r.resolution-t)})[0].level;return n}getZoomOffsetByScale({resolution:t,levelResolutions:e,levelValue:r}){const n=this.getNearLevel(t,e);const i=r-n;return i}getZoomOffsetByTileInfo(t,e=false,r=256,n="EPSG:3857"){let i=[];const o=t.lods[0];if(!e){r=r||256;if(t.size&&t.size.length>0){r=t.size[0]}i=this.getLevelScale(r,n)}else{i=this.getLevelScaleCesium(n)}let s=this.getZoomOffsetByScale({resolution:o.resolution,levelResolutions:i,levelValue:o.level});return s}}var F=R;const D=[b.WMS,b.WMTS,b.WFS,b.WCS,w.WMTS,w.WMS];class k{constructor(t){let e=t||{};const{ip:r,port:n,serverName:i}=e;this.ip=r;this.port=n;this.serverName=i}async getZoomOffset(t,e,r,n,i){i=i||{};let{mapmode:o="mapboxgl",tileschame:s="EPSG:3587",tilesize:a=256}=i;let u=0;e=e||this.ip;r=r||this.port;n=n||this.serverName;let l=false;let c=false;let h=true;x.forEach(e=>{if(e.type===t){c=true;if(D.indexOf(t)>=0){h=false}}});C.forEach(e=>{if(e.type===t){l=true;if(D.indexOf(t)>=0){h=false}}});if(l){this.parse=new N}else if(c){this.parse=new P}if(this.parse){let i=this.parse.GetCapabilities(t,e,r,n);if(h){try{let t=await fetch(i);let e=await t.json();let r=new O;const{TileInfo2:n}=e;const{tileInfo:o}=n;u=r.getZoomOffsetByTileInfo(o)}catch(t){}}else{let t=await fetch(i);let e=await t.text();let r=_.a.getTraversalObj(e,{});let n=_.a.convertToJson(r,{});let l=n.Capabilities.Contents.TileMatrixSet;let c=l[l.length-1];let h=c["ows:Identifier"];let f=c.TileMatrix;let p=f&&f.length>0?f[0]:f;let d=p["ows:Identifier"];let y=new RegExp(/EPSG:[0-9]*/);let v=y.exec(d);s=v&&v.length>0?v[0]:s;let g=d.split(`${h}:`);let m=g&&g.length>1?parseInt(g[1]):0;let b=p.ScaleDenominator;let x={lods:[{resolution:b,level:m}]};let S=new R;let w=o=="cesium";u=S.getZoomOffsetByTileInfo(x,w,a,s)}}return u}}var j=k;const G={circle:"circle",cross:"cross",diamond:"diamond",square:"square",triangle:"triangle",x:"x"};const B={dash:"dash","dash-dot":"dash-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot","long-dash-dot-dot":"long-dash-dot-dot",none:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"};const U={arrow:"arrow",circle:"circle",square:"square",diamond:"diamond",cross:"cross",x:"x"};const q={"backward-diagonal":"backward-diagonal",cross:"cross","diagonal-cross":"diagonal-cross","forward-diagonal":"forward-diagonal",horizontal:"horizontal",none:"none",solid:"solid",vertical:"vertical"};const z={normal:"normal",italic:"italic",oblique:"oblique"};const V={normal:"normal",bold:"bold",bolder:"bolder",lighter:"lighter"};const W={underline:"underline","line-through":"line-through",none:"none"};const H={left:"left",center:"center",right:"right"};const X={baseline:"baseline",top:"top",middle:"middle",bottom:"bottom"};const Z={butt:"butt",round:"round",square:"square",none:"none"};const Y={bevel:"bevel",round:"round",miter:"miter"};const J={begin:"begin",end:"end","begin-end":"begin-end"};const Q={center:"center",left:"left",right:"right",top:"top",bottom:"bottom","top-left":"top-left","top-right":"top-right","bottom-left":"bottom-left","bottom-right":"bottom-right",origin:"origin",relative:"relative"};const K={left:"left",center:"center",right:"right"};const $={point:"point",line:"line"};var tt=window.mapgis=window.mapgis||{};tt.style=tt.style||{};tt.symbols=tt.symbols||{};tt.renderer=tt.renderer||{};class et{constructor(t){var e=t?t:{};const{opacity:r=1,color:n="#FFFFFF"}=e;this.type=undefined;this.opacity=r;this.color=n}fromJSON(t){t=t||{};const{type:e="unkown",opacity:r=1,color:n="#FFFFFF"}=t;this.type=e;this.color=n;this.opacity=r}toJSON(){return{type:this.type,color:this.color,opacity:this.opacity}}}tt.symbols.Symbol=et;class rt extends et{constructor(t){super(t);var e=t?t:{};const{styleOrigin:r={name:"mapgis-style",styleName:"styleName"}}=e;const{symbolLayers:n}=e;this.type=undefined;this.styleOrigin=r;this.symbolLayers=n}fromJSON(t){t=t||{};const{type:e="unkown",opacity:r=1,color:n="#FFFFFF"}=t;this.type=e;this.color=n;this.opacity=r}toJSON(){return{type:this.type,color:this.color,opacity:this.opacity}}}tt.symbols.Symbol=et;class nt{constructor(t){var t=t?t:{};this.type=undefined}fromJSON(t){t=t||{};const{type:e="unkown"}=t;this.type=e}toJSON(){return{type:this.type}}}tt.symbols.Symbol3DLayer=nt;class it{constructor(t){var e=t?t:{};const{decoration:r=W.none,family:n="宋体"}=e;const{size:i=9,style:o=z.normal,weight:s=V.normal}=e;this.decoration=r;this.family=n;this.size=i;this.style=o;this.weight=s}clone(){return cloneDeep(this)}fromJSON(t){t=t||{};const{decoration:e=W.none,family:r="宋体"}=t;const{size:n=9,style:i=z.normal,weight:o=V.normal}=t;this.decoration=e;this.family=r;this.size=n;this.style=i;this.weight=o}toJSON(){return{decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight}}}tt.symbols.Font=it;class ot extends et{constructor(t){super(t);var e=t?t:{};const{angle:r=0,xoffset:n=0,yoffset:i=0}=e;this.type="simple-marker";this.angle=r;this.xoffset=n;this.yoffset=i}fromJSON(t){t=t||{};const{type:e="simple-marker",opacity:r=1,color:n="#FFFFFF"}=t;const{angle:i=0,xoffset:o=0,yoffset:s=0}=t;this.color=n;this.opacity=r;this.type=e;this.angle=i;this.xoffset=o;this.yoffset=s}toJSON(){return{type:this.type,color:this.color,opacity:this.opacity,angle:this.angle,xoffset:this.xoffset,yoffset:this.yoffset}}}tt.symbols.MarkerSymbol=ot;class st extends et{constructor(t){super(t);var e=t?t:{};const{color:r="rgb(0,0,0)",width:n=.75}=e;this.type="simple-line";this.color=r;this.width=n}fromJSON(t){t=t||{};const{opacity:e=1}=t;const{type:r="simple-line",color:n="rgb(0,0,0)",width:i=.75}=t;this.opacity=e;this.type=r;this.color=n;this.width=i}toJSON(){return{type:this.type,color:this.color,width:this.width}}}tt.symbols.LineSymbol=st;var at=r(10);class ut extends st{constructor(t){super(t);var e=t?t:{};const{cap:r=Z.round,color:n="rgb(0, 0, 0)",join:i=Y.bevel}=e;const{marker:o=undefined,miterLimit:s=2,style:a=B.solid}=e;const{width:u=.75}=e;this.type="simple-line";this.cap=r;this.color=n;this.join=i;this.marker=o;this.miterLimit=s;this.style=a;this.width=u}clone(){return Object(at["cloneDeep"])(this)}fromJSON(t){t=t||{};const{type:e="simple-line"}=t;const{cap:r=Z.round,color:n="rgb(0, 0, 0)",join:i=Y.bevel}=t;const{marker:o=undefined,miterLimit:s=2,style:a=B.solid}=t;const{width:u=.75}=t;this.opacity=opacity;this.angle=angle;this.xoffset=xoffset;this.yoffset=yoffset;this.type=e;this.color=n;this.outline=outline;this.path=path;this.size=size;this.style=a}toJSON(){return{type:this.type,color:this.color,opacity:this.opacity,angle:this.angle,xoffset:this.xoffset,yoffset:this.yoffset}}}tt.symbols.SimpleLineSymbol=ut;class lt extends et{constructor(t){super(t);var e=t?t:{};const{color:r="rgb(0,0,0)",outline:n=undefined}=e;this.type="simple-fill";this.outline=n?new ut(n):undefined}fromJSON(t){t=t||{};const{opacity:e=1}=t;const{type:r="simple-fill"}=t;const{outline:n=undefined}=t;this.opacity=e;this.type=r;this.outline=n}toJSON(){return{type:this.type,outline:this.outline}}}tt.symbols.FillSymbol=lt;class ct extends et{constructor(t){super(t);var e=t?t:{};const{angle:r=0,backgroundColor:n,borderLineColor:i,borderLineSize:o}=e;const{color:s="rgb(0,0,0)",font:a,haloColor:u,haloSize:l}=e;const{horizontalAlignment:c=H.center,verticalAlignment:h=X.baseline}=e;const{kerning:f=true,lineHeight:p=1,lineWidth:d=192,rotated:y=false}=e;const{text:v,xoffset:g=0,yoffset:m=0}=e;this.type="text";this.angle=r;this.backgroundColor=n;this.borderLineColor=i;this.borderLineSize=o;this.color=s;this.font=a?new it(a):undefined;this.haloColor=u;this.haloSize=l;this.horizontalAlignment=c;this.kerning=f;this.lineHeight=p;this.lineWidth=d;this.rotated=y;this.text=v;this.verticalAlignment=h;this.xoffset=g;this.yoffset=m}fromJSON(t){t=t||{};const{opacity:e=1}=t;const{type:r="text"}=t;const{angle:n=0,backgroundColor:i,borderLineColor:o,borderLineSize:s}=t;const{color:a="rgb(0,0,0)",font:u,haloColor:l,haloSize:c}=t;const{horizontalAlignment:h=H.center,verticalAlignment:f=X.baseline}=t;const{kerning:p=true,lineHeight:d=1,lineWidth:y=192,rotated:v=false}=t;const{text:g,xoffset:m=0,yoffset:_=0}=t;this.opacity=e;this.type=r;this.angle=n;this.backgroundColor=i;this.borderLineColor=o;this.borderLineSize=s;this.color=a;this.font=u;this.haloColor=l;this.haloSize=c;this.horizontalAlignment=h;this.kerning=p;this.lineHeight=d;this.lineWidth=y;this.rotated=v;this.text=g;this.verticalAlignment=f;this.xoffset=m;this.yoffset=_}toJSON(){return{type:this.type,type:this.type,angle:this.angle,backgroundColor:this.backgroundColor,borderLineColor:this.borderLineColor,borderLineSize:this.borderLineSize,color:this.color,font:this.font,haloColor:this.haloColor,haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,xoffset:this.xoffset,yoffset:this.yoffset}}}tt.symbols.TextSymbol=ct;class ht extends ot{constructor(t){super(t);var e=t?t:{};const{angle:r=0,height:n=12,url:i=undefined,width:o=12}=e;const{xoffset:s=0,yoffset:a=0}=e;this.type="picture-marker";this.angle=r;this.height=n;this.url=i;this.width=o;this.xoffset=s;this.yoffset=a}clone(){return Object(at["cloneDeep"])(this)}fromJSON(t){t=t||{};const{type:e="picture-marker"}=t;const{opacity:r=1}=t;const{angle:n=0,height:i=12,url:o=undefined,width:s=12}=options;const{xoffset:a=0,yoffset:u=0}=options;this.opacity=r;this.angle=n;this.xoffset=a;this.yoffset=u;this.type=e;this.height=i;this.width=s;this.url=o}toJSON(){return{type:this.type,angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset}}}tt.symbols.PictureMarkerSymbol=ht;class ft extends ot{constructor(t){super(t);var e=t?t:{};const{angle:r=0,color:n="rgba(255, 255, 255, 0.25)",outline:i=undefined}=e;const{path:o=undefined,size:s=12,style:a=G.circle}=e;const{xoffset:u=0,yoffset:l=0}=e;this.type="simple-marker";this.angle=r;this.color=n;this.outline=i?new ut(i):undefined;this.path=o;this.size=s;this.style=a;this.xoffset=u;this.yoffset=l}clone(){return Object(at["cloneDeep"])(this)}fromJSON(t){t=t||{};const{type:e="simple-marker"}=t;const{opacity:r=1}=t;const{angle:n=0,color:i="rgba(255, 255, 255, 0.25)",outline:o=0}=t;const{path:s=undefined,size:a=12,style:u=G.circle}=t;const{xoffset:l=0,yoffset:c=0}=t;this.opacity=r;this.angle=n;this.xoffset=l;this.yoffset=c;this.type=e;this.color=i;this.outline=o;this.path=s;this.size=a;this.style=u}toJSON(){return{type:this.type,color:this.color,opacity:this.opacity,angle:this.angle,xoffset:this.xoffset,yoffset:this.yoffset}}}tt.symbols.SimpleMarkerSymbol=ft;class pt extends lt{constructor(t){super(t);var e=t?t:{};const{color:r="rgba(0, 0, 0, 0.25)",outline:n=undefined,style:i=q.solid}=e;this.type="simple-fill";this.color=r;this.outline=this.outline;this.style=i}clone(){return Object(at["cloneDeep"])(this)}fromJSON(t){t=t||{};const{type:e="simple-marker"}=t;const{opacity:r=1}=t;const{color:n="rgba(0, 0, 0, 0.25)",outline:i=undefined,style:o=q.solid}=options;this.opacity=r;this.outline=i;this.type=e;this.color=n;this.style=o}toJSON(){return{type:this.type,color:this.color,outline:this.outline,style:this.style}}}tt.symbols.SimpleFillSymbol=pt;class dt extends lt{constructor(t){super(t);var e=t?t:{};const{outline:r=undefined,height:n=12,width:i=12}=e;const{xoffset:o=0,xscale:s=1,yoffset:a=0,yscale:u=1}=e;this.type="picture-fill";this.height=n;this.outline=r;this.url=url;this.width=i;this.xoffset=o;this.xscale=s;this.yoffset=a;this.yscale=u}clone(){return Object(at["cloneDeep"])(this)}fromJSON(t){t=t||{};const{type:e="picture-fill"}=t;const{opacity:r=1}=t;const{outline:n=undefined,height:i=12,width:o=12}=t;const{xoffset:s=0,xscale:a=1,yoffset:u=0,yscale:l=1}=t;this.opacity=r;this.outline=n;this.type=e;this.height=i;this.url=url;this.width=o;this.xoffset=s;this.xscale=a;this.yoffset=u;this.yscale=l}toJSON(){return{type:this.type,height:this.height,outline:this.outline,url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale}}}tt.symbols.PictureFillSymbol=dt;class yt{constructor(t){var e=t?t:{};const{color:r="rgb(0,0,0)",placement:n=J.begin_end,style:i=U.arrow}=e;this.type="line-marker";this.color=r;this.placement=n;this.style=i}}tt.symbols.LineSymbolMarker=yt;class vt extends rt{constructor(t){super(t);var e=t?t:{};const{callout:r=undefined}=e;const{styleOrigin:n={name:"mapgis-style",styleName:"styleName"}}=e;const{symbolLayers:i,verticalOffset:o}=e;this.type="point-3d";this.callout=r;this.styleOrigin=n;this.symbolLayers=i;this.verticalOffset=o}clone(){return Object(at["cloneDeep"])(this)}fromJSON(t){t=t||{};const{type:e="point-3d"}=t;const{callout:r=undefined}=t;const{styleOrigin:n={name:"mapgis-style",styleName:"styleName"}}=t;const{symbolLayers:i,verticalOffset:o}=t;this.type=e;this.callout=r;this.styleOrigin=n;this.symbolLayers=i;this.verticalOffset=o}toJSON(){return{type:this.type,callout:this.callout,styleOrigin:this.styleOrigin,symbolLayers:this.symbolLayers,verticalOffset:this.verticalOffset}}}tt.symbols.PointSymbol3D=vt;class gt extends rt{constructor(t){super(t);var e=t?t:{};const{styleOrigin:r={name:"mapgis-style",styleName:"styleName"}}=e;const{symbolLayers:n}=e;this.type="line-3d";this.styleOrigin=r;this.symbolLayers=n}clone(){return Object(at["cloneDeep"])(this)}fromJSON(t){t=t||{};const{type:e="line-3d"}=t;const{styleOrigin:r={name:"mapgis-style",styleName:"styleName"}}=t;const{symbolLayers:n}=t;this.type=e;this.styleOrigin=r;this.symbolLayers=n}toJSON(){return{type:this.type,styleOrigin:this.styleOrigin,symbolLayers:this.symbolLayers}}}tt.symbols.LineSymbol3D=gt;class mt extends rt{constructor(t){super(t);var e=t?t:{};const{styleOrigin:r={name:"mapgis-style",styleName:"styleName"}}=e;const{symbolLayers:n}=e;this.type="polygon-3d";this.styleOrigin=r;this.symbolLayers=n}clone(){return Object(at["cloneDeep"])(this)}fromJSON(t){t=t||{};const{type:e="polygon-3d"}=t;const{styleOrigin:r={name:"mapgis-style",styleName:"styleName"}}=t;const{symbolLayers:n}=t;this.type=e;this.styleOrigin=r;this.symbolLayers=n}toJSON(){return{type:this.type,styleOrigin:this.styleOrigin,symbolLayers:this.symbolLayers}}}tt.symbols.PolygonSymbol3D=mt;class _t extends rt{constructor(t){super(t);var e=t?t:{};const{callout:r=undefined}=e;const{styleOrigin:n={name:"mapgis-style",styleName:"styleName"}}=e;const{symbolLayers:i,verticalOffset:o}=e;this.type="label-3d";this.callout=r;this.styleOrigin=n;this.symbolLayers=i;this.verticalOffset=o}clone(){return Object(at["cloneDeep"])(this)}fromJSON(t){t=t||{};const{type:e="label-3d"}=t;const{callout:r=undefined}=options;const{styleOrigin:n={name:"mapgis-style",styleName:"styleName"}}=options;const{symbolLayers:i,verticalOffset:o}=options;this.type=e;this.callout=r;this.styleOrigin=n;this.symbolLayers=i;this.verticalOffset=o}toJSON(){return{type:this.type,callout:this.callout,styleOrigin:this.styleOrigin,symbolLayers:this.symbolLayers,verticalOffset:this.verticalOffset}}}tt.symbols.LabelSymbol3D=_t;class bt extends nt{constructor(t){super(t);var t=t?t:{};const{anchor:e=Q.center,anchorPosition:r={x:0,y:0}}=t;const{material:n=undefined,outline:i=undefined,resource:o={primitive:"circle"}}=t;const{size:s=12}=t;this.type="icon";this.anchor=Q.center;this.anchorPosition=r;this.material=n;this.outline=i;this.resource=o;this.size=s}clone(){return Object(at["cloneDeep"])(this)}fromJSON(t){t=t||{};const{type:e="icon"}=t;const{anchor:r=Q.center,anchorPosition:n={x:0,y:0}}=t;const{material:i=undefined,outline:o=undefined,resource:s={primitive:"circle"}}=t;const{size:a=12}=t;this.type=undefined;this.anchor=Q.center;this.anchorPosition=n;this.material=i;this.outline=o;this.resource=s;this.size=a}toJSON(){return{type:this.type,anchor:this.anchor,anchorPosition:this.anchorPosition,material:this.material,outline:this.outline,resource:this.resource,size:this.size}}}tt.symbols.IconSymbol3DLayer=bt;class xt extends nt{constructor(t){super(t);var t=t?t:{};const{anchor:e=Q.origin,anchorPosition:r={x:0,y:0,z:0}}=t;const{castShadows:n=true}=t;const{material:i={color:"rgb(255,255,255)"}}=t;const{resource:o={primitive:"sphere"}}=t;const{heading:s,roll:a,tilt:u}=t;const{depth:l=10,height:c=10,width:h=10}=t;this.type="object";this.anchor=e;this.anchorPosition=r;this.castShadows=n;this.height=c;this.width=h;this.depth=l;this.material=i;this.resource=o;this.heading=s;this.roll=a;this.tilt=u}clone(){return Object(at["cloneDeep"])(this)}fromJSON(t){t=t||{};const{type:e="object"}=t;const{anchor:r=Q.origin,anchorPosition:n={x:0,y:0,z:0}}=t;const{castShadows:i=true}=t;const{material:o={color:"rgb(255,255,255)"}}=t;const{resource:s={primitive:"sphere"}}=t;const{heading:a,roll:u,tilt:l}=t;const{depth:c=10,height:h=10,width:f=10}=t;this.type=e;this.anchor=r;this.anchorPosition=n;this.castShadows=i;this.height=h;this.width=f;this.depth=c;this.material=o;this.resource=s;this.heading=a;this.roll=u;this.tilt=l}toJSON(){return{type:this.type,anchor:this.anchor,anchorPosition:this.anchorPosition,castShadows:this.castShadows,height:this.height,width:this.width,depth:this.depth,material:this.material,resource:this.resource,heading:this.heading,roll:this.roll,tilt:this.tilt}}}tt.symbols.ObjectSymbol3DLayer=xt;class St extends nt{constructor(t){super(t);var t=t?t:{};const{cap:e=Z.butt,join:r=Y.miter}=t;const{marker:n=undefined,material:i=undefined,pattern:o=undefined}=t;const{size:s=1}=t;this.type="line";this.cap=e;this.join=r;this.marker=n;this.material=i;this.pattern=o;this.size=s}clone(){return Object(at["cloneDeep"])(this)}fromJSON(t){t=t||{};const{type:e="line"}=t;const{cap:r=Z.butt,join:n=Y.miter}=option;const{marker:i=undefined,material:o=undefined,pattern:s=undefined}=option;const{size:a=1}=option;this.type=e;this.cap=r;this.join=n;this.marker=i;this.material=o;this.pattern=s;this.size=a}toJSON(){return{type:this.type,cap:this.cap,join:this.join,marker:this.marker,material:this.material,pattern:this.pattern,size:this.size}}}tt.symbols.LineSymbol3DLayer=St;class wt extends nt{constructor(t){super(t);var t=t?t:{};const{anchor:e=Q.center,castShadows:r=true}=t;const{cap:n=Z.butt,join:i=Y.miter}=t;const{height:o,width:s}=t;const{material:a,profile:u,profileRotation:l}=t;this.type="path";this.anchor=e;this.cap=n;this.castShadows=r;this.height=o;this.join=i;this.material=a;this.profile=u;this.profileRotation=l;this.width=s}clone(){return Object(at["cloneDeep"])(this)}fromJSON(t){t=t||{};const{type:e="path"}=t;const{anchor:r=Q.center,castShadows:n=true}=t;const{cap:i=Z.butt,join:o=Y.miter}=t;const{height:s,width:a}=t;const{material:u,profile:l,profileRotation:c}=t;this.type=e;this.anchor=r;this.cap=i;this.castShadows=n;this.height=s;this.join=o;this.material=u;this.profile=l;this.profileRotation=c;this.width=a}toJSON(){return{type:this.type,anchor:this.anchor,cap:this.cap,castShadows:this.castShadows,height:this.height,join:this.join,material:this.material,profile:this.profile,profileRotation:this.profileRotation,width:this.width}}}tt.symbols.PathSymbol3DLayer=wt;class Ct extends nt{constructor(t){super(t);var t=t?t:{};const{castShadows:e=undefined,edges:r=undefined}=t;const{material:n=undefined,outline:i=undefined,pattern:o=undefined}=t;this.type="fill";this.castShadows=e;this.edges=r;this.material=n;this.outline=i;this.pattern=o}clone(){return Object(at["cloneDeep"])(this)}fromJSON(t){t=t||{};const{type:e="fill"}=t;const{castShadows:r=undefined,edges:n=undefined}=t;const{material:i=undefined,outline:o=undefined,pattern:s=undefined}=t;this.type=e;this.castShadows=r;this.edges=n;this.material=i;this.outline=o;this.pattern=s}toJSON(){return{type:this.type,castShadows:this.castShadows,edges:this.edges,material:this.material,outline:this.outline,pattern:this.pattern}}}tt.symbols.FillSymbol3DLayer=Ct;class It extends nt{constructor(t){super(t);var t=t?t:{};const{castShadows:e=true,edges:r=undefined,sizeField:n=undefined}=t;const{material:i={color:"rgb(255,255,255)"}}=t;const{size:o=1,sizeRatio:s=1}=t;this.type="extrude";this.castShadows=e;this.edges=r;this.material=i;this.size=o;this.sizeField=n;this.sizeRatio=s}clone(){return Object(at["cloneDeep"])(this)}fromJSON(t){t=t||{};const{type:e="extrude"}=t;const{castShadows:r=true,edges:n=undefined,sizeField:i=undefined}=t;const{material:o={color:"rgb(255,255,255)"}}=t;const{size:s=1,sizeRatio:a=1}=t;this.type=e;this.castShadows=r;this.edges=n;this.material=o;this.size=s;this.sizeField=i;this.sizeRatio=a}toJSON(){return{type:this.type,castShadows:this.castShadows,edges:this.edges,material:this.material,size:this.size,sizeField:this.sizeField,sizeRatio:this.sizeRatio}}}tt.symbols.ExtrudeSymbol3DLayer=It;class Et extends nt{constructor(t){super(t);var t=t?t:{};const{background:e=undefined,font:r,halo:n={color:"rgb(0,0,0)",size:0}}=t;const{horizontalAlignment:i=H.center,verticalAlignment:o=X.baseline}=t;const{lineHeight:s=1,material:a={color:"rgb(255,255,255)"},size:u=9}=t;const{text:l}=t;this.type="text";this.background=e;this.font=r;this.halo=n;this.horizontalAlignment=i;this.lineHeight=s;this.material=a;this.size=u;this.text=l;this.verticalAlignment=o}clone(){return Object(at["cloneDeep"])(this)}fromJSON(t){t=t||{};const{type:e="text"}=t;const{background:r=undefined,font:n,halo:i={color:"rgb(0,0,0)",size:0}}=t;const{horizontalAlignment:o=H.center,verticalAlignment:s=X.baseline}=t;const{lineHeight:a=1,material:u={color:"rgb(255,255,255)"},size:l=9}=t;const{text:c}=option;this.type=undefined;this.background=r;this.font=n;this.halo=i;this.horizontalAlignment=o;this.lineHeight=a;this.material=u;this.size=l;this.text=c;this.verticalAlignment=s}toJSON(){return{type:this.type,background:this.background,font:this.font,halo:this.halo,horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:this.material,size:this.size,text:this.text,verticalAlignment:this.verticalAlignment}}}tt.symbols.TextSymbol3DLayer=Et;const Pt={circle:"circle",cross:"cross",diamond:"diamond",square:"square",triangle:"triangle",x:"x"};const Mt={dash:"dash","dash-dot":"dash-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot","long-dash-dot-dot":"long-dash-dot-dot",none:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"};const Lt={arrow:"arrow",circle:"circle",square:"square",diamond:"diamond",cross:"cross",x:"x"};const Nt={"backward-diagonal":"backward-diagonal",cross:"cross","diagonal-cross":"diagonal-cross","forward-diagonal":"forward-diagonal",horizontal:"horizontal",none:"none",solid:"solid",vertical:"vertical"};const Tt={normal:"normal",italic:"italic",oblique:"oblique"};const Ot={normal:"normal",bold:"bold",bolder:"bolder",lighter:"lighter"};const At={underline:"underline","line-through":"line-through",none:"none"};const Rt={left:"left",center:"center",right:"right"};const Ft={baseline:"baseline",top:"top",middle:"middle",bottom:"bottom"};const Dt={butt:"butt",round:"round",square:"square",none:"none"};const kt={bevel:"bevel",round:"round",miter:"miter"};const jt={begin:"begin",end:"end","begin-end":"begin-end"};const Gt={center:"center",left:"left",right:"right",top:"top",bottom:"bottom","top-left":"top-left","top-right":"top-right","bottom-left":"bottom-left","bottom-right":"bottom-right",origin:"origin",relative:"relative"};const Bt={left:"left",center:"center",right:"right"};const Ut={point:"point",line:"line"};var qt=window.Zondy=window.Zondy||{};qt.Event=qt.Event||{};qt.Object=qt.Object||{};qt.Object.ContourAnalyse=qt.Object.ContourAnalyse||{};qt.Object.Theme=qt.Object.Theme||{};qt.Theme=qt.Theme||{};qt.Service=qt.Service||{};qt.Socket=qt.Socket||{};qt.Enum=qt.Enum||{};qt.Enum.Net=qt.Enum.Net||{};qt.Enum.Theme=qt.Enum.Theme||{};qt.Enum.Map=qt.Enum.Map||{};qt.Catalog=qt.Catalog||{};qt.Util=qt.Util||{};qt.CRS=qt.CRS||{};qt.Map=qt.Map||{};qt.xsd=qt.xsd||{};qt.XLink=qt.XLink||{};qt.extent=qt.extent||{};qt.xml=qt.xml||{};qt.array=qt.array||{};qt.string=qt.string||{};qt.LevelRenderer=qt.LevelRenderer||{};qt.LevelRenderer.Tool=qt.LevelRenderer.Tool||{};qt.LevelRenderer.Animation=qt.LevelRenderer.Animation||{};qt.Feature=qt.Feature||{};qt.Feature.ShapeParameters=qt.Feature.ShapeParameters||{};qt.Geometry=qt.Geometry||{};qt.Client=qt.Client||{};qt.Source=qt.Source||{};qt.GeomInteraction=qt.GeomInteraction||{};qt.Format=qt.Format||{};qt.Control=qt.Control||{};qt.OGC=qt.OGC||{};qt.DataStore=qt.DataStore||{};qt.DataStore.ElasticSearch=qt.DataStore.ElasticSearch||{};qt.DataStore.PostGIS=qt.DataStore.PostGIS||{};qt.DataStore.Hbase=qt.DataStore.Hbase||{};qt.DataStore.MongoDB=qt.DataStore.MongoDB||{};qt.CloudDisk=qt.CloudDisk||{};qt.CloudDisk.GisCore=qt.CloudDisk.GisCore||{};qt.CloudDisk.Model=qt.CloudDisk.Model||{};qt.IGServerX=qt.IGServerX||{};qt.IGServerX.Vector=qt.IGServerX.Vector||{};qt.Plot=qt.Plot||{};var zt=function(t,e){t=t||{};if(e){for(var r in e){var n=e[r];if(n!==undefined){t[r]=n}}var i=typeof window.Event==="function"&&e instanceof window.Event;if(!i&&e.hasOwnProperty&&e.hasOwnProperty("toString")){t.toString=e.toString}}return t};var Vt=function(t){return Object.prototype.toString.call(t)==="[object Array]"};var Wt=function(t,e){var r,n=Object.prototype.toString,i="[object Array]";t=t||{};for(r in e){if(e.hasOwnProperty(r)){if(typeof e[r]==="object"){if(n.call(t[r])==="[object Null]"||n.call(t[r])==="[object Undefined]"){t[r]=n.call(e[r])===i?[]:{}}Wt(t[r],e[r])}else{t[r]=e[r]}if(e[r]===""||e[r]===null){t[r]=e[r]}}}return t};var Ht=function(t,e){t=t||{};var r;if(e){for(var n in t){r=e[n];if(typeof r!=="undefined"){t[n]=r}}}};var Xt=function(t,e,r){t=t||{};var n;if(e){for(var i in e){n=e[i];if(typeof n!=="undefined"&&typeof n!=="function"){if(r.indexOf(i)<0){t[i]=n}}}}};var Zt=function(t){t=t||{};for(var e in t){if(t.hasOwnProperty(e)){if(typeof t[e]==="object"&&t[e]instanceof Array){for(var r in t[e]){if(t[e][r].destroy){t[e][r].destroy()}}t[e].length=0}else if(typeof t[e]==="object"&&t[e]instanceof Object){if(t[e].destroy){t[e].destroy()}}t[e]=null}}};var Yt=function(){var t=[];for(var e=0,r=arguments.length;e<r;e++){var n=arguments[e];if(typeof n==="string"){n=document.getElementById(n)}if(arguments.length===1){return n}t.push(n)}return t};var Jt=function(t){return!!(t&&t.nodeType===1)};var Qt=function(t,e){for(var r=t.length-1;r>=0;r--){if(t[r]===e){t.splice(r,1)}}return t};var Kt=function(t,e){if(t==null){return-1}else{if(typeof t.indexOf==="function"){return t.indexOf(e)}else{for(var r=0,n=t.length;r<n;r++){if(t[r]===e){return r}}return-1}}};var $t=function(t,e,r,n,i,o,s,a){if(e){t.id=e}if(r){t.style.left=r.x+"px";t.style.top=r.y+"px"}if(n){t.style.width=n.w+"px";t.style.height=n.h+"px"}if(i){t.style.position=i}if(o){t.style.border=o}if(s){t.style.overflow=s}if(parseFloat(a)>=0&&parseFloat(a)<1){t.style.filter="alpha(opacity="+a*100+")";t.style.opacity=a}else if(parseFloat(a)===1){t.style.filter="";t.style.opacity=""}};var te=function(t,e){t=t||{};var r=typeof window.Event==="function"&&e instanceof window.Event;for(var n in e){if(t[n]===undefined||!r&&e.hasOwnProperty&&e.hasOwnProperty(n)&&!t.hasOwnProperty(n)){t[n]=e[n]}}if(!r&&e&&e.hasOwnProperty&&e.hasOwnProperty("toString")&&!t.hasOwnProperty("toString")){t.toString=e.toString}return t};var ee=function(t){var e=[];for(var r in t){var n=t[r];if(n!=null&&typeof n!=="function"){var i;if(typeof n==="object"&&n.constructor===Array){var o=[];var s;for(var a=0,u=n.length;a<u;a++){s=n[a];o.push(encodeURIComponent(s===null||s===undefined?"":s))}i=o.join(",")}else{i=encodeURIComponent(n)}e.push(encodeURIComponent(r)+"="+i)}}return e.join("&")};var re=function(t){var e=[];for(var r in t){var n=t[r];if(n!=null&&typeof n!=="function"){var i;if(typeof n==="object"&&n.constructor===Array){var o=[];var s;for(var a=0,u=n.length;a<u;a++){s=n[a];o.push(encodeURIComponent(s===null||s===undefined?"":s))}i=o.join(",")}else{i=encodeURIComponent(n)}e.push(encodeURIComponent(r)+":"+i)}}return e.join(";")};var ne=function(t,e){var r=t;if(e){var n=(t+" ").split(/[?&]/);r+=n.pop()===" "?e:n.length?"&"+e:"?"+e}return r};var ie=function(t){t=t===null||t===undefined?window.location.href:t;var e="";if(t.indexOf("?")>-1){var r=t.indexOf("?")+1;t.indexOf("#")>-1;var n=t.indexOf("#")>-1?t.indexOf("#"):t.length;e=t.substring(r,n)}var i={};var o=e.split(/[&;]/);for(var s=0,a=o.length;s<a;++s){var u=o[s].split("=");if(u[0]){var l=u[0];try{l=decodeURIComponent(l)}catch(t){l=unescape(l)}var c=(u[1]||"").replace(/\+/g," ");try{c=decodeURIComponent(c)}catch(t){c=unescape(c)}c=c.split(",");if(c.length==1){c=c[0]}i[l]=c}}return i};var oe=function(){var t=navigator.userAgent.toLowerCase();return t.indexOf("webkit")===-1&&t.indexOf("gecko")!==-1}();var se=function(){var t="",e="",r="pc",n;var i=navigator.userAgent.toLowerCase();if(i.indexOf("msie")>-1||i.indexOf("trident")>-1&&i.indexOf("rv")>-1){t="msie";n=i.match(/msie ([\d.]+)/)||i.match(/rv:([\d.]+)/)}else if(i.indexOf("chrome")>-1){t="chrome";n=i.match(/chrome\/([\d.]+)/)}else if(i.indexOf("firefox")>-1){t="firefox";n=i.match(/firefox\/([\d.]+)/)}else if(i.indexOf("opera")>-1){t="opera";n=i.match(/version\/([\d.]+)/)}else if(i.indexOf("safari")>-1){t="safari";n=i.match(/version\/([\d.]+)/)}e=n?n[1]:"";if(i.indexOf("ipad")>-1||i.indexOf("ipod")>-1||i.indexOf("iphone")>-1){r="apple"}else if(i.indexOf("android")>-1){n=i.match(/version\/([\d.]+)/);e=n?n[1]:"";r="android"}return{name:t,version:e,device:r}}();var ae=function(){return se};var ue=function(){var t=true,e=ae();if(document.createElement("canvas").getContext){if(e.name==="firefox"&&parseFloat(e.version)<5){t=false}if(e.name==="safari"&&parseFloat(e.version)<4){t=false}if(e.name==="opera"&&parseFloat(e.version)<10){t=false}if(e.name==="msie"&&parseFloat(e.version)<9){t=false}}else{t=false}return t}();var le=function(){return ue};var ce=function(t){if(!t){return true}var e=t.indexOf("//");var r=document.location.toString();var n=r.indexOf("//");if(e===-1){return true}else{var i;var o=i=t.substring(0,e);var s=r.substring(n+2);n=s.indexOf("/");var a=s.indexOf(":");var u=s.substring(0,n);var l=document.location.protocol;if(a!==-1){}else{u+=":"+(l.toLowerCase()==="http:"?80:443)}if(l.toLowerCase()!==o.toLowerCase()){return false}o=t.substring(e+2);var c=o.indexOf(":");e=o.indexOf("/");var h=o.substring(0,e);var f;if(c!==-1){f=o.substring(0,c)}else{f=o.substring(0,e);h+=":"+(i.toLowerCase()==="http:"?80:443)}var p=document.domain;if(f===p&&h===u){return true}}return false};var he=function(t){var e=t;if(e==null){return null}switch(e.constructor){case String:e='"'+e.replace(/(["\\])/g,"\\$1")+'"';e=e.replace(/\n/g,"\\n");e=e.replace(/\r/g,"\\r");e=e.replace("<","&lt;");e=e.replace(">","&gt;");e=e.replace(/%/g,"%25");e=e.replace(/&/g,"%26");return e;case Array:var r=[];for(var n=0,i=e.length;n<i;n++){r.push(he(e[n]))}return"["+r.join(",")+"]";case Number:return isFinite(e)?String(e):null;case Boolean:return String(e);case Date:var o="{"+"'__type':\"System.DateTime\","+"'Year':"+e.getFullYear()+","+"'Month':"+(e.getMonth()+1)+","+"'Day':"+e.getDate()+","+"'Hour':"+e.getHours()+","+"'Minute':"+e.getMinutes()+","+"'Second':"+e.getSeconds()+","+"'Millisecond':"+e.getMilliseconds()+","+"'TimezoneOffset':"+e.getTimezoneOffset()+"}";return o;default:if(typeof e==="object"){if(e.length){var r=[];for(var n=0,i=e.length;n<i;n++){r.push(he(e[n]))}return"["+r.join(",")+"]"}var s=[];for(var a in e){if(typeof e[a]!=="function"&&a!=="CLASS_NAME"){s.push("'"+a+"':"+he(e[a]))}}if(s.length>0){return"{"+s.join(",")+"}"}else{return"{}"}}return e.toString()}};var fe=function(t){if(t.responseText&&typeof t.responseText==="string"){t=JSON.parse(t.responseText)}return t};var pe=function(t,e){t=t||{};if(e){for(var r in e){var n=e[r];if(n!==undefined&&r!=="CLASS_NAME"&&typeof n!=="function"){t[r]=n}}}return t};var de=function(t,e,r){t=t||{};if(e){for(var n in e){var i=false;if(r&&r.length){for(var o=0,s=r.length;o<s;o++){if(n===r[o]){i=true;break}}}if(i===true){continue}var a=e[n];if(a!==undefined&&n!=="CLASS_NAME"&&typeof a!=="function"){t[n]=a}}}return t};var ye=function(t){if(null===t||"object"!==typeof t){return t}if(t instanceof Date){var e=new Date;e.setTime(t.getTime());return e}if(t instanceof Array){var e=t.slice(0);return e}if(t instanceof Object){var e={};for(var r in t){if(t.hasOwnProperty(r)){e[r]=ye(t[r])}}return e}throw new Error("Unable to copy obj! Its type isn't supported.")};var ve=function(){var t="";for(var e=1;e<=32;e++){var r=Math.floor(Math.random()*16).toString(16);t+=r;if(e==8||e==12||e==16||e==20)t+="-"}return t};var ge=function(t,e){var r=Array.prototype.slice.apply(arguments,[2]);return function(){var n=r.concat(Array.prototype.slice.apply(arguments,[0]));return t.apply(e,n)}};var me=function(t,e){return function(r){return t.call(e,r||window.event)}};var _e=function(t){var e=t.value;switch(e){case 0:return"Intersect";case 1:return"Disjoin";case 2:return"Include";case 3:return"Adjacent";default:return"Unknown"}};var be=function(t){return t.replace(/([\u4E00-\u9FA5]|[\uFE30-\uFFA0])/g,function(t){return xe(t)})};var xe=function(t){var e=escape(t);var r=e.split("%");var n="";if(r[0]!=""){n=r[0]}for(var i=1;i<r.length;i++){if(r[i].substring(0,1)=="u"){n+=we(Se(r[i].substring(1,5)))}else n+="%"+r[i]}return n};var Se=function(t){var e="";var r;var n="0123456789ABCDEF";var i="";for(var o=0;o<t.length;o++){e=t.charAt(o);r=n.indexOf(e);i+=Ie(r)}return i};var we=function(t){var e="";var r="";var n="";if(t.length==16){r="1110"+t.substring(0,4);r+="10"+t.substring(4,10);r+="10"+t.substring(10,16);var i="0123456789ABCDEF";for(var o=0;o<3;o++){e+="%";n=r.substring(o*8,(o+1)*8);e+=i.charAt(Ce(n.substring(0,4)));e+=i.charAt(Ce(n.substring(4,8)))}return e}return""};var Ce=function(t){var e=0;if(t.length==4){for(var r=0;r<4;r++){e+=t.charAt(r)*Math.pow(2,3-r)}return e}return-1};var Ie=function(t){var e="";var r=0;for(var n=0;n<4;n++){r=Math.pow(2,3-n);if(t>=r){e+="1";t=t-r}else e+="0"}return e};var Ee=function(t,e){if(Object.prototype.toString.call(t)==="[object Object]"&&Object.prototype.toString.call(e)==="[object Object]"){for(var r in e){if(!t[r]){t[r]=e[r]}else{t[r]=Ee(t[r],e[r])}}}else if(Object.prototype.toString.call(t)==="[object Array]"&&Object.prototype.toString.call(e)==="[object Array]"){t=t.concat(e)}else{t=e}return t};var Pe=function(t,e,r,n){var i={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1};if(e.hasOwnProperty(r)){if(typeof t[r]=="object"&&!i[Object.prototype.toString.call(t[r])]){Me(t[r],e[r],n)}else if(n||!(r in t)){t[r]=e[r]}}};var Me=function(t,e,r){for(var n in e){Pe(t,e,n,r)}return t};var Le=function(...t){class e{constructor(e){for(var r=0;r<t.length;r++){i(this,new t[r](e))}}}for(var r=0;r<t.length;r++){var n=t[r];i(e,n);i(e.prototype,n.prototype);i(e.prototype,new n)}return e;function i(t,e){var r=Object.getOwnPropertyNames(e);if(Object.getOwnPropertySymbols){r=r.concat(Object.getOwnPropertySymbols(e))}for(var n=0;n<r.length;n++){var i=r[n];if(i!=="constructor"&&i!=="prototype"&&i!=="name"&&i!=="length"){let r=Object.getOwnPropertyDescriptor(e,i);if(window["ActiveXObject"]){Object.defineProperty(t,i,r||{})}else{Object.defineProperty(t,i,r)}}}}};var Ne=function(t,e){var r=document.createElement("CANVAS");if(t){r.width=t}if(e){r.height=e}return r.getContext("2d")};var Te=function(t,e,r,n){Object.keys(t).forEach(function(i){let o=t[i],s=i;if(Fe(o)&&typeof o!=="function"){if(r&&r.indexOf(i)>-1){let r={};if(i==="geometry"){if(o.type==="polygon"){r["rings"]=t[i]["rings"]}if(o.type==="multipoint"){r["points"]=t[i]["points"]}if(o.type==="point"){if(t[i]["x"]&&t[i]["y"]){r["y"]=t[i]["y"];r["x"]=t[i]["x"]}}if(o.type==="polyline"){r["paths"]=t[i]["paths"]}if(o.type==="circle"){o.type="polygon";r["rings"]=t[i]["rings"]}r["spatialReference"]=t[i]["spatialReference"];o=r;e+="&geometryType=esriGeometry"+t[i]["type"].charAt(0).toUpperCase()+t[i]["type"].slice(1);o=encodeURI(JSON.stringify(o))}else{o=JSON.stringify(o)}}if(n&&n.hasOwnProperty(i)){s=n[i]}e+="&"+s+"="+o}});return e};var Oe=function(t,e,r){Object.keys(e).forEach(function(n){if(r&&r.indexOf(n)>-1){let r=n;r=n.substring(0,r.length-"Features".length)+"s";t+=r+"="+encodeURIComponent(e[n]instanceof Object?JSON.stringify(e[n]):e[n])+"&"}else{t+=n+"="+e[n]+"&"}});return t};var Ae=function(t,e,r){return new t({longitude:r[0],latitude:r[1],z:r[2],spatialReference:ye(e.spatialReference)})};var Re=function(t){for(let e=0;e<t.length;e++){if(t[e]instanceof Array){Re(t[e])}else{if(t[e]instanceof Object){t[e]=t[e].toArray()}}}return t};var Fe=function(t){return t!==""&&t!==null&&t!==undefined};qt.Util.extend=zt;qt.Util.isArray=Vt;qt.Util.extendDeep=Wt;qt.Util.copy=Ht;qt.Util.copyExcluce=Xt;qt.Util.reset=Zt;qt.Util.getElement=Yt;qt.Util.isElement=Jt;qt.Util.removeItem=Qt;qt.Util.indexOf=Kt;qt.Util.modifyDOMElement=$t;qt.Util.applyDefaults=te;qt.Util.getParameterString=ee;qt.Util.getWFParameterString=re;qt.Util.urlAppend=ne;qt.Util.getParameters=ie;qt.IS_GECKO=oe;qt.Browser=se;qt.Util.getBrowser=ae;qt.Util.isSupportCanvas=ue;qt.Util.supportCanvas=le;qt.Util.isInTheSameDomain=ce;qt.Util.toJSON=he;qt.Util.transformResult=fe;qt.Util.copyAttributes=pe;qt.Util.copyAttributesWithClip=de;qt.Util.cloneObject=ye;qt.Util.newGuid=ve;qt.Util.bind=ge;qt.Util.bindAsEventListener=me;qt.Util.getTopAnalysisResult=_e;qt.Util.ChineseToUtf8=be;qt.Util.DeepMerge=Ee;qt.Util.merge=Me;qt.Util.mixin=Le;qt.Util.createCanvasContext2D=Ne;qt.Util.formatQuery=Te;qt.Util.formatEdits=Oe;qt.Util.returnPoint=Ae;qt.Util.returnPoint=Re;qt.Util.returnPoint=Fe;class De{constructor(t){var e=t?t:{};const{pattern:r=undefined,opacity:n=1,allowOverlap:i=false}=e;const{color:o="#FFFFFF",size:s=1,rotate:a=0}=e;const{xoffset:u=0,yoffset:l=0}=e;this.allowOverlap=i;this.pattern=r;this.opacity=n;this.color=o;this.size=s;this.rotate=a;this.xoffset=u;this.yoffset=l;this.anchor=Gt.center;zt(this,e)}}tt.style.SymbolStyle=De;class ke{constructor(t){var e=t?t:{};const{blur:r=0,color:n="#000000",offsetX:i=0,offsetY:o=0}=e;this.blur=r;this.color=n;this.offsetX=i;this.offsetY=o;zt(this,e)}}tt.style.Shadow=ke;class je{constructor(t){var e=t?t:{};const{opacity:r=1,color:n="#FFFFFF"}=e;this.type=undefined;this.opacity=r;this.color=n;zt(this,e)}}tt.style.VectorStyle=je;class Ge extends je{constructor(t){super();var e=t?t:{};const{radius:r=5,opacity:n=1,outlineColor:i="#FFFFFF",outlineWidth:o=0,anchor:s=Gt.center,outlineOpacity:a=1,show:u=true}=e;this.type="point";this.radius=r;this.opacity=n;this.outlineColor=i;this.outlineWidth=o;this.outlineOpacity=a;this.anchor=s;this.show=u;zt(this,e)}toMapboxStyle(t){t=t||{};const{highlight:e=false}=t;const{color:r,opacity:n,radius:i,outlineColor:o,outlineWidth:s}=this;let a={filter:["==","$type","Point"],paint:{"circle-radius":i,"circle-color":r,"circle-opacity":n,"circle-stroke-width":s,"circle-stroke-color":o}};if(e){a.paint["circle-color"]=["case",["boolean",["feature-state","hover"],false],r,"rgba(0, 0, 0, 0)"];a.paint["circle-stroke-width"]=["case",["boolean",["feature-state","hover"],false],s,0]}return a}toCesiumStyle(t){let{color:e="#FFFFFF",opacity:r=1,radius:n,outlineColor:i="#000000",outlineWidth:o=1,outlineOpacity:s=1,show:a=true}=this;return{show:a,pixelSize:n,color:t.Color.fromCssColorString(e).withAlpha(r),outlineWidth:o,outlineColor:t.Color.fromCssColorString(i).withAlpha(s)}}}tt.style.PointStyle=Ge;class Be{constructor(t){var e=t?t:{};const{pattern:r=undefined,opacity:n=1,allowOverlap:i=false}=e;const{color:o="#FFFFFF",size:s=1,rotate:a=0}=e;const{xoffset:u=0,yoffset:l=0}=e;this.allowOverlap=i;this.pattern=r;this.opacity=n;this.color=o;this.size=s;this.rotate=a;this.xoffset=u;this.yoffset=l;this.anchor=Gt.center;zt(this,e)}}tt.style.GraphicStyle=Be;const Ue="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACYAAAAuCAYAAABEbmvDAAAAAXNSR0IB2cksfwAAAAlwSFlzAAASdAAAEnQB3mYfeAAABjNJREFUeJztWF1MFFcUnsSY8NjEmJj0xRfTJk19sEkfffGpsWn9Q5HFYX9nd9lZVkgb2/ovC11cRRRYQLYIrAK2WrUNVK3SqtFapU1t0xrTRK1UrEbEv/fT75thXWphf2DAh/YmX2Zn5t5zv3vOd86du4ryf5um9uTJkwWPHj3SHj58uHl4eLg5Cd7z+ePHj99++vTpnGkhw4k46YMHD768OXBb4ke/kffrD0tReL8s/iBuXEtqDsru7pNy5ervMjQ01E+iXMSUkSIhTvTpyQuyqLxZZi6pFmVprSjL6kRZ1STKymZcgZUxPNstyrvbZb6vXiIdPXL33j0hQUs9SGMM0ZnLv8jCtY2iLNlhEihoFcXWIUpRAtdRMO7x3NaGfi0G+bnqTsO79LQl3qMRGosdOiV5y6pNz3BCTl7cOYKuMTDyjv2K2kVZDYLvRKW4KiGDd/4S6m9SniKp8rrPjLAYxlV4ovhAipC9e3zwvaMrRbDgEyPEb5bsket/DEycHMMXSfQiFAidDUbtMO7oNCdzdo/gYBqM9GF/jlPpPXg7v04WlsUM3eUcVgr1SN9FmbEkIkrhKE/9g1QOMDx3wFycCnJLd4nj44ShuaxJcRXUwVw7PQVNqdCIYz8m6DLh7s4dybEuksMi18SRRBH54ttLwmzP2ltMcWVFDUjtA6mEadCFcLi6JoFOE1wkvVYQk/neWqPWZSwj7MDYzy5EBhahJNhhwAVD7k4LQUnQa9AtamFHz9nMXmOH/b1nRVmOLFQx0NFuGiI8ndYgScyOaBTWy1vrmjJrjZlYHMGgAlRuJwa68NsDQ95O60B7bsqjzYhKXn6lkaFpw0nmbwRBytaQIqYxlFYDxDyIhh1JsDwifd//NHZdI1uCQpxlQ4lQkY1ObDkaiSVMclbCzUi0mcRWRiV+7PTYOhshJvfv35eZS7eh5kD4rlZzsDdhPbhgFyJiR41cFZWart60xAyP5eVvxQBs1k6sRiOxDuuhIYweLNyxFx6rlr1HT6XPTGpsfgCFVcWnjKvFHOwluXaLAZseZL2bn0qVcvx8f/q9k1mp10IDRTsxEKvRMNgPI/52CwF7GmWChTtj8tKacOaspDt7zl3CKsIYiATQEE4fjPihB59FMGxhwR54a02NrKhoyVzHyBoJMDjXWQWdoWxo8JqfXgO5kn2TB+0QGmUCHReE5XDfhez2S4ZzW/sR1DKUDW9jilyg1Rr4Wsxo2GvlVV81K8FgVp/cFOHNgT9lVnEFsgZe88KID+QCIKe3ThwcT3gRQi/OBYWV0nD4hHEWyEhqtNc+iuPL1YaQerEL+GHMj5UG4hMHx/uxQB9LUY28pm/P/WORXrs9eEde1irhdpyESppMcjqM6/EJgIvaa9rRUIpWb5VDfedz89ZorzV8fhyZg5CW1ANYqQ5ypZgkFM8e7K9TClwcQuiMyqINddlr6/lGF3Pw6yEkgQd1LQCjOowHMUmoJXsER5HSamVm4Sa5eOXX7L9cx2p09bEz38kMdQu0hpDqSXLN2YP9Oc63BztKWEINB3L71h+rJfdPdTtC4oDecPQyJglhslIg1Dw+jPfsBwkEkUDaDplXUinU7qTOlclGl9+4NSBz3FsM40oQetMxUajRnDgtGs3+vhqZYdsoX124PDHBj9eYCG29p5EIm+C1XfACJgvFzInLmv4Ng3TM7BeABBwV4q9rz+7gkUtLJsLirUh1e9ic7Bk5oKwxheQzvtcRencEIaywLoTPN4b02vUbMtu9GYmAU1QpJg2RHMK6NpYC7/mc7/1RyVPXy7kff7Y2hM83hrT7a5yi1A3GpEoptqwykFjbkALv+dzH77qNUnuoZ/JZmKk9y9Id3IhReAOob6E9JpnyEVK853NXhSyvajAK6ZT+cZds1MnA7UGZF8AnuIa9VMeJvRSaC+02r7zHc75nNk+qkObaqJezP1yRvOIPkaXYGUpBJrjLvOKez/l+SnU1Vkv+dxY9eAwnqvUIHU7uwah5xT2f8/20/Tk8ulE31NuyKujKhfrmrTSuqyIxo15Ni67Ga9TbLejtFR0lRF0nC8rDcufu3ampV7k2eqb/t2syz/WeXL1+M/1p50W0oeHh/hfN4b/d/gYnm2n24iputAAAAABJRU5ErkJggg==";class qe extends De{constructor(t){super();var e=t?t:{};const{symbol:r,size:n=1,show:i=true}=e;this.type="marker";this.show=i;this.size=n;this.symbol=r||new Be({symbol:Ue})}toMapboxStyle(t){t=t||{};const{highlight:e=false}=t;const{symbol:r}=this;const{allowOverlap:n,color:i,pattern:o,opacity:s}=r;const{size:a,rotate:u,xoffset:l,yoffset:c}=r;let h={paint:{"icon-color":i,"icon-opacity":s},layout:{"icon-allow-overlap":n,"icon-offset":[l,c],"icon-size":a,"icon-rotate":u}};if(o){h.layout["icon-image"]=o}if(e){}return h}toCesiumStyle(t,e,r){const{field:n="",scale:i=1,backgroundColor:o="#FFFFFF",backgroundOpacity:s=0,color:a="#FFFFFF",opacity:u=1,outlineColor:l="#FFFFFF",outlineOpacity:c=1,outlineWidth:h=0,xOffset:f=0,yOffset:p=0,text:d,show:y=true}=t;const{url:v="",rotation:g=0,imageScale:m=1,width:_,height:b}=t;let x;if(n&&e.properties&&e.properties[n]){x=e.properties[n]}if(d){x=d}let S={show:y,image:v,rotation:g,scale:m,pixelOffset:new r.Cartesian2(f,p)};if(_){S.width=_}if(b){S.height=b}return{label:{show:y,text:x,scale:i,showBackground:true,fillColor:r.Color.fromCssColorString(a).withAlpha(u),outlineColor:r.Color.fromCssColorString(l).withAlpha(c),outlineWidth:h,backgroundColor:r.Color.fromCssColorString(o).withAlpha(s),pixelOffset:new r.Cartesian2(f,p*-1)},billboard:S}}}tt.symbols.MarkerStyle=qe;class ze extends je{constructor(t){super();let e=t?t:{};const{scale:r=1,url:n,show:i=true}=e;this.type="model";this.url=n;this.scale=r;this.show=i;zt(this,e)}toMapboxStyle(){}toCesiumStyle(t){let{url:e,scale:r,show:n=true}=this;return{uri:e,show:n,scale:r}}}tt.style.ModelStyle=ze;function Ve(t){let e=t.length,r=new Array(e),n;for(let i=0;i<e;i++){n=t.charCodeAt(i);if(48<=n&&n<58){n-=48}else{n=(n&223)-65+10}r[i]=n}return r.reduce(function(t,e){t=16*t+e;return t},0)}function We(t,e){let r;if(typeof t==="string"){if((t.length===7||t.length===4)&&t.indexOf("#")===0){let n=t.split("#")[0].substr(0,2);n=Ve(n);let i=t.split("#")[0].substr(2,2);i=Ve(i);let o=t.split("#")[0].substr(4,2);o=Ve(o);let s=Math.floor(e/1*255);r=[n,i,o,s]}else if(t.indexOf("rgba")===0){let e=t.split("rgba(")[1];e=e.split(")")[0];let n=Number(e.split(",")[0]);let i=Number(e.split(",")[1]);let o=Number(e.split(",")[2]);let s=Math.floor(Number(e.split(",")[3])/1*255);r=[n,i,o,s]}else if(t.indexOf("rgb")===0){let n=t.split("rgb(")[1];n=n.split(")")[0];let i=Number(n.split(",")[0]);let o=Number(n.split(",")[1]);let s=Number(n.split(",")[2]);let a=Math.floor(e/1*255);r=[i,o,s,a]}}else if(t instanceof Array&&t.length===4){r=t}return r}class He extends je{constructor(t){super();let e=t?t:{};const{show:r,width:n,color:i,opacity:o,outlineColor:s,outlineOpacity:a,outlineWidth:u}=e;this.type="track";this.show=r;this.width=n;this.color=i;this.opacity=o;this.outlineColor=s;this.outlineWidth=u;this.outlineOpacity=a;zt(this,e)}toMapboxStyle(){}toCesiumStyle(t){const{show:e=true,width:r=8,color:n=[255,0,255],opacity:i=1,outlineColor:o=[0,255,255],outlineWidth:s=5,outlineOpacity:a=1}=this;let u,l;u=We(n,i);l=We(o,a);if(!u){u=[255,0,255,255]}if(!l){l=[0,255,255,255]}return{show:e,material:{polylineOutline:{color:{rgba:u},outlineColor:{rgba:l},outlineWidth:s}},width:r,leadTime:0,trailTime:1e3,resolution:5}}}tt.style.TrackStyle=He;var Xe=function(t,e){var r=e!==undefined?e:{};zt(this,r);this.Arcs=t!==undefined&&t!==null?t:null};qt.Object.AnyLine=Xe;var Ze=function(t,e){this.ArcID=0;var r=e!==undefined?e:{};zt(this,r);this.Dots=t!==undefined&&t!==null?t:null};qt.Object.Arc=Ze;var Ye=function(t){var e=t!==undefined?t:{};zt(this,e);this.FldNumber=e.FldNumber!==undefined?e.FldNumber:0;this.FldName=e.FldName!==undefined?e.FldName:null;this.FldType=e.FldType!==undefined?e.FldType:null};qt.Object.CAttStruct=Ye;var Je=function(t,e,r){var n=r!==undefined?r:{};zt(this,n);this.FID=e!==undefined?e:0;this.Values=t!==undefined?t:null};qt.Object.CAttDataRow=Je;var Qe={SFCls:"SFeatureCls",OCls:"ObjectCls",ACls:"AnnotationCls",GnetCls:"GNetCls",RDS:"RasterDataset",SFClsInfo:"sfcls_new"};qt.Enum.XClsType=Qe;var Ke={Unknown:0,SFCls:"SFeatureCls",AnnoCls:"AnnotationCls"};qt.Enum.VectClsType=Ke;var $e={Unknown:0,Pnt:1,Lin:2,Reg:3};qt.Enum.FeatureType=$e;var tr={Positive:0,LeftOblique:1,RightOblique:2,LeftTowering:3,RightTowering:4};qt.Enum.FontShape=tr;var er={Curved:0,Forward:1,Horizontal:2,Tangent:3};qt.Enum.LabelLinType=er;var rr={Curved:0,Forward:1,Horizontal:2,Boundray:3,Outside:4};qt.Enum.LabelRegType=rr;var nr={PntAnyDir:0,PntEightDir:1,PntOnFea:2};qt.Enum.LabelPntType=nr;var ir={Auto:0,NoRep:1,OnStep:2};qt.Enum.RepeatType=ir;var or={AutoSpread:0,Centralization:1,Decentralization:2};qt.Enum.LabelSpreadType=or;var sr={Left:0,Right:1,Above:2,Below:3,Both:4,NoRes:5};qt.Enum.LineConstrain=sr;var ar={East:0,North:1,NorthEast:2,NorthWest:3,South:4,SouthEast:5,SouthWest:6,West:7,NoDir:8};qt.Enum.EightDirType=ar;var ur={Reg:0,Arc:1,All:2};qt.Enum.ISShowArc=ur;var lr={UserMode:"UserMode",SysModeCommwayPrefer:"SysModeCommwayPrefer",SysModeHighWayPrefer:"SysModeHighWayPrefer",SysModeMinCost:"SysModeMinCost",SysModeMinDis:"SysModeMinDis",SysModeMinDis:"SysModeMinDis",SysModeSysRecommend:"SysModeSysRecommend"};qt.Enum.Net.NetAnalyType=lr;var cr={Node:1,Edge:2,CNode:3,Chain:4,Center:5,Source:13,Sink:13};qt.Enum.Net.NetElemType=cr;var hr={Adjust:0,NoAdjust:1};qt.Enum.Theme.CLinAdjustType=hr;var fr={Round:0,Square:1,Butt:2};qt.Enum.Theme.CLinHeadType=fr;var pr={Round:0,Square:1,Butt:2};qt.Enum.Theme.CLinJointType=pr;var dr={Byrule:0,Bypoint:1};qt.Enum.Theme.CLinStyleMakeType=dr;var yr={Unknown:0,UniqueTheme:1,RangeTheme:2};qt.Enum.Theme.CItemType=yr;var vr={Doc:"mapType",Tile:"tileType"};qt.Enum.Map.MapType=vr;var gr={Show:"show",Hide:"hide",Include:"include",Exclude:"exclude"};qt.Enum.Map.LayerStatusType=gr;var mr=function(t){var e=t!==undefined?t:{};zt(this,e);this.Ang=e.Ang!==undefined&&e.Ang!==null?e.Ang:null;this.ClientOutLabel=e.ClientOutLabel!==undefined&&e.ClientOutLabel!==null?e.ClientOutLabel:false;this.Distance=e.Distance!==undefined&&e.Distance!==null?e.Distance:0;this.EightDirLableType=e.EightDirLableType!==undefined&&e.EightDirLableType!==null?e.EightDirLableType:null;this.PntType=e.PntType!==undefined&&e.PntType!==null?e.PntType:0};qt.Object.LablePntInfo=mr;var _r=function(t){var e=t!==undefined?t:{};zt(this,e);this.ClientOutLabel=e.ClientOutLabel!==undefined&&e.ClientOutLabel!==null?e.ClientOutLabel:false;this.DistFromLine=e.DistFromLine!==undefined&&e.DistFromLine!==null?e.DistFromLine:0;this.FromLineConstrain=e.FromLineConstrain!==undefined&&e.FromLineConstrain!==null?e.FromLineConstrain:0;this.Interval=e.Interval!==undefined&&e.Interval!==null?e.Interval:0;this.LinType=e.LinType!==undefined&&e.LinType!==null?e.LinType:0;this.Repeat=e.Repeat!==undefined&&e.Repeat!==null?e.Repeat:0;this.SpreadType=e.SpreadType!==undefined&&e.SpreadType!==null?e.SpreadType:null};qt.Object.LabelLinInfo=_r;var br=function(t){var e=t!==undefined?t:{};zt(this,e);this.ClientOutLabel=e.ClientOutLabel!==undefined&&e.ClientOutLabel!==null?e.ClientOutLabel:false;this.LabelMiniRegion=e.LabelMiniRegion!==undefined&&e.LabelMiniRegion!==null?e.LabelMiniRegion:0;this.MayPlaceOutside=e.MayPlaceOutside!==undefined&&e.MayPlaceOutside!==null?e.MayPlaceOutside:0;this.MiniRegionArea=e.MiniRegionArea!==undefined&&e.MiniRegionArea!==null?e.MiniRegionArea:0;this.Offset=e.Offset!==undefined&&e.Offset!==null?e.Offset:0;this.RegType=e.RegType!==undefined&&e.RegType!==null?e.RegType:0};qt.Object.LabelRegInfo=br;var xr=function(t){var e=t!==undefined?t:{};zt(this,e);this.PntInfo=e.PntInfo!==undefined&&e.PntInfo!==null?e.PntInfo:null;this.LinInfo=e.LinInfo!==undefined&&e.LinInfo!==null?e.LinInfo:null;this.RegInfo=e.RegInfo!==undefined&&e.RegInfo!==null?e.RegInfo:null};qt.Object.DynNoteLableType=xr;var Sr=function(t){var e=t!==undefined?t:{};zt(this,e);this.Angle=e.Angle!==undefined?e.Angle:0;this.Backclr=e.Backclr!==undefined?e.Backclr:0;this.Backexp=e.Backexp!==undefined?e.Backexp:0;this.Bold=e.Bold!==undefined?e.Bold:0;this.FieldName=e.FieldName!==undefined?e.FieldName:null;this.FontAngle=e.FontAngle!==undefined?e.FontAngle:0;this.FontColor=e.FontColor!==undefined?e.FontColor:0;this.FontSize=e.FontSize!==undefined?e.FontSize:0;this.FontStyle=e.FontStyle!==undefined?e.FontStyle:0;this.Ifnt=e.Ifnt!==undefined?e.Ifnt:0;this.Ifnx=e.Ifnx!==undefined?e.Ifnx:tr.Positive;this.IsFilled=e.IsFilled!==undefined?e.IsFilled:false;this.IsHzpl=e.IsHzpl!==undefined?e.IsHzpl:false;this.IsOvprnt=e.IsOvprnt!==undefined?e.IsOvprnt:false;this.LabelLevel=e.LabelLevel!==undefined?e.LabelLevel:0;this.LableType=e.LableType!==undefined?e.LableType:null;this.Offsetx=e.Offsetx!==undefined?e.Offsetx:0;this.Offsety=e.Offsety!==undefined?e.Offsety:0;this.Space=e.Space!==undefined?e.Space:0;this.StrikeThrough=e.StrikeThrough!==undefined?e.StrikeThrough:0;this.UnderLine=e.UnderLine!==undefined?e.UnderLine:0};qt.Object.CDynNoteInfo=Sr;var wr=function(t){var e=t!==undefined?t:{};zt(this,e);this.Color=e.Color!==undefined&&e.Color!==null?e.Color:1;this.LinStyleID=e.LinStyleID!==undefined&&e.LinStyleID!==null?e.LinStyleID:1;this.LinStyleID2=e.LinStyleID2!==undefined&&e.LinStyleID2!==null?e.LinStyleID2:0;this.LinWidth=e.LinWidth!==undefined&&e.LinWidth!==null?e.LinWidth:1;this.Xscale=e.Xscale!==undefined&&e.Xscale!==null?e.Xscale:1;this.Yscale=e.Yscale!==undefined&&e.Yscale!==null?e.Yscale:1};qt.Object.CLineInfo=wr;var Cr=function(t){var e=t!==undefined?t:{};zt(this,e);this.Angle=e.Angle!==undefined&&e.Angle!==null?e.Angle:1;this.Color=e.Color!==undefined&&e.Color!==null?e.Color:1;this.SymHeight=e.SymHeight!==undefined&&e.SymHeight!==null?e.SymHeight:1;this.SymID=e.SymID!==undefined&&e.SymID!==null?e.SymID:1;this.SymWidth=e.SymWidth!==undefined&&e.SymWidth!==null?e.SymWidth:1};qt.Object.CPointInfo=Cr;var Ir=function(t){var e=t!==undefined?t:{};zt(this,e);this.EndColor=e.EndColor!==undefined&&e.EndColor!==null?e.EndColor:1;this.FillColor=e.FillColor!==undefined&&e.FillColor!==null?e.FillColor:1;this.FillMode=e.FillMode!==undefined&&e.FillMode!==null?e.FillMode:0;this.OutPenWidth=e.OutPenWidth!==undefined&&e.OutPenWidth!==null?e.OutPenWidth:1;this.PatAngle=e.PatAngle!==undefined&&e.PatAngle!==null?e.PatAngle:1;this.PatColor=e.PatColor!==undefined&&e.PatColor!==null?e.PatColor:1;this.PatHeight=e.PatHeight!==undefined&&e.PatHeight!==null?e.PatHeight:1;this.PatID=e.PatID!==undefined&&e.PatID!==null?e.PatID:1;this.PatWidth=e.PatWidth!==undefined&&e.PatWidth!==null?e.PatWidth:1};qt.Object.CRegionInfo=Ir;var Er=function(t){var e=t!==undefined?t:{};zt(this,e);this.Alpha=e.Alpha!==undefined?e.Alpha:0;this.BugSpare=e.BugSpare!==undefined?e.BugSpare:false;this.CustomRender=e.CustomRender!==undefined?e.CustomRender:false;this.CustomRenderPath=e.CustomRenderPath!==undefined?e.CustomRenderPath:null;this.DirectionLineClr=e.DirectionLineClr!==undefined?e.DirectionLineClr:0;this.DynNoteFlag=e.DynNoteFlag!==undefined?e.DynNoteFlag:false;this.DynNoteInfo=e.DynNoteInfo!==undefined?e.DynNoteInfo:null;this.IsShowArc=e.IsShowArc!==undefined?e.IsShowArc:0;this.ISShowLineDirection=e.ISShowLineDirection!==undefined?e.ISShowLineDirection:false;this.LineInfo=e.LineInfo!==undefined?e.LineInfo:null;this.MaxScale=e.MaxScale!==undefined?e.MaxScale:0;this.MinScale=e.MinScale!==undefined?e.MinScale:0;this.ShowCoordPnt=e.ShowCoordPnt!==undefined?e.ShowCoordPnt:false;this.SpareLineInfo=e.SpareLineInfo!==undefined?e.SpareLineInfo:null;this.SparePointInfo=e.SparePointInfo!==undefined?e.SparePointInfo:null;this.SpareRegInfo=e.SpareRegInfo!==undefined?e.SpareRegInfo:null;this.SymbleScale=e.SymbleScale!==undefined?e.SymbleScale:0};qt.Object.DynShowStyle=Er;var Pr=function(t){var e=t!==undefined?t:{};zt(this,e);this.AnnSizeFixed=e.AnnSizeFixed!==undefined?e.AnnSizeFixed:false;this.DriverQuality=e.DriverQuality!==undefined?e.DriverQuality:0;this.DynProjFlag=e.DynProjFlag!==undefined?e.DynProjFlag:false;this.FollowScale=e.FollowScale!==undefined?e.FollowScale:false;this.LinPenWidFixed=e.LinPenWidFixed!==undefined?e.LinPenWidFixed:false;this.LinSizeFixed=e.LinSizeFixed!==undefined?e.LinSizeFixed:false;this.PntPenWidFixed=e.PntPenWidFixed!==undefined?e.PntPenWidFixed:false;this.PntSizeFixed=e.PntSizeFixed!==undefined?e.PntSizeFixed:false;this.RegPenWidFixed=e.RegPenWidFixed!==undefined?e.RegPenWidFixed:false;this.RegSizeFixed=e.RegSizeFixed!==undefined?e.RegSizeFixed:false;this.ShowCoordPnt=e.ShowCoordPnt!==undefined?e.ShowCoordPnt:false;this.ShowElemRect=e.ShowElemRect!==undefined?e.ShowElemRect:false;this.ShowStyle=e.ShowStyle!==undefined?e.ShowStyle:null;this.LayerStyles=e.LayerStyles!==undefined?e.LayerStyles:null;this.SymbleShow=e.SymbleShow!==undefined?e.SymbleShow:false};qt.Object.CDisplayStyle=Pr;var Mr=function(t){var e=t!==undefined?t:{};zt(this,e);this.Index=e.Index!==undefined?e.Index:0;this.SymbleShow=e.SymbleShow!==undefined?e.SymbleShow:false;this.LinPenWidFixed=e.LinPenWidFixed!==undefined?e.LinPenWidFixed:false;this.LinSizeFixed=e.LinSizeFixed!==undefined?e.LinSizeFixed:false;this.PntPenWidFixed=e.PntPenWidFixed!==undefined?e.PntPenWidFixed:false;this.PntSizeFixed=e.PntSizeFixed!==undefined?e.PntSizeFixed:false;this.RegPenWidFixed=e.RegPenWidFixed!==undefined?e.RegPenWidFixed:false;this.RegSizeFixed=e.RegSizeFixed!==undefined?e.RegSizeFixed:false;this.AnnSizeFixed=e.AnnSizeFixed!==undefined?e.AnnSizeFixed:false;this.FollowScale=e.FollowScale!==undefined?e.FollowScale:false;this.ShowCoordPnt=e.ShowCoordPnt!==undefined?e.ShowCoordPnt:false;this.ShowElemRect=e.ShowElemRect!==undefined?e.ShowElemRect:false;this.DriverQuality=e.DriverQuality!==undefined?e.DriverQuality:0;this.DynProjFlag=e.DynProjFlag!==undefined?e.DynProjFlag:false};qt.Object.CDisplayStyleExtend=Mr;var Lr=function(t){var e=t?t:{};this.GDBSvrName=e.ServerName!==undefined?e.ServerName:null;this.GDBName=e.GDBName!==undefined?e.GDBName:null;this.User=e.User!==undefined?e.User:null;this.Password=e.Password!==undefined?e.Password:null};qt.Object.CGDBInfo=Lr;class Nr{constructor(t){var e=t?t:{};zt(this,e)}setByOL(t){return null}toString(){return""}getGeometryType(){return}Trim(t,e){var r;r=t.replace(/(^\s+)|(\s+$)/g,"");if(e.toLowerCase()==="g"){r=r.replace(/\s/g,"")}return r}}qt.Object.Tangram=Nr;class Tr extends Nr{constructor(t,e,r){var n=r?r:{};super(n);this.x=t!==undefined?t:null;this.y=e!==undefined?e:null;this.nearDis=n.nearDis!==undefined?parseFloat(n.nearDis):null;this.CLASS_NAME="Zondy.Object.Point2D"}getGeometryType(){return"point"}setByOL(t){if(t!==undefined){var e=t.getCoordinates();this.x=e[0];this.y=e[1]}}toString(){if(this.x===null||this.y===null)return"";var t=this.x+","+this.y;if(this.nearDis!==undefined){t+=";"+this.nearDis}return t}}Zondy.Object.Point2D=Tr;class Or extends Nr{constructor(t,e,r){var n=r?r:{};super(n);this.point=t!==undefined&&t!==null?t:null;this.radious=e!==undefined&&e!==null?e:null}setByOL(t){if(t!==undefined&&t!==null){var e=t.getCenter();var r=t.getRadius();this.point=new qt.Object.Point2D(e[0],e[1]);this.radious=r}}toString(){if(this.point===null||this.point.length===0||this.radious===null){return""}return this.point.x+","+this.point.y+","+this.radious}getGeometryType(){return"Circle"}}qt.Object.Circle=Or;class Ar extends Nr{constructor(t,e,r,n,i){var o=i?i:{};super(o);this.xmin=t;this.xmax=r;this.ymin=e;this.ymax=n}setByOL(t){if(t===undefined||t===null){return}this.xmin=t[0];this.ymin=t[1];this.xmax=t[2];this.ymax=t[3]}toString(){return""+this.xmin+","+this.ymin+","+this.xmax+","+this.ymax}getGeometryType(){return"rect"}convertToBound(){var t=[this.xmin,this.ymin,this.xmax,this.ymax];return t}intersectsBounds(t,e){if(typeof e==="boolean"){e={inclusive:e}}e=e||{};if(e.inclusive===null){e.inclusive=true}var r=this;var n=false;var i=r.xmin===t.xmax||r.xmax===t.xmin||r.ymax===t.ymin||r.ymin===t.ymax;if(e.inclusive||!i){var o=t.ymin>=r.ymin&&t.ymin<=r.ymax||r.ymin>=t.ymin&&r.ymin<=t.ymax;var s=t.ymax>=r.ymin&&t.ymax<=r.ymax||r.ymax>t.ymin&&r.ymax<t.ymax;var a=t.xmin>=r.xmin&&t.xmin<=r.xmax||r.xmin>=t.xmin&&r.xmin<=t.xmax;var u=t.xmax>=r.xmin&&t.xmax<=r.xmax||r.xmax>=t.xmin&&r.xmax<=t.xmax;n=(o||s)&&(a||u)}return n}}Zondy.Object.Rectangle=Ar;class Rr{constructor(t){var e=t!==undefined?t:{};zt(this,e);this.GID=e.GID!==undefined&&e.GID!==null?e.GID:0}setGID(t){if(t!==undefined&&t!==null){this.GID=t}}}qt.Object.FeatureGraphicBase=Rr;class Fr extends Rr{constructor(t,e,r){var n=r?r:{};super(n);if(t!==undefined&&t!==null&&(e!==undefined&&e!==null)){this.Dot=new Tr(t,e)}}setDot(t){this.Dot=t!==undefined&&t!==null?t:null}}qt.Object.GPoint=Fr;class Dr extends Rr{constructor(t,e){var r=e?e:{};super(r);this.Line=t!==undefined&&t!==null?t:null}setLine(t){this.Line=t!==undefined&&t!==null?t:null}}qt.Object.GLine=Dr;class kr extends Rr{constructor(t,e){var r=e?e:{};super(r);this.Rings=t!==undefined&&t!==null&&Array.isArray(t)?t:null}setRings(t){this.Rings=t!==undefined&&t!==null?t:null}}qt.Object.GRegion=kr;var jr=function(t){var e=t!==undefined?t:{};zt(this,e);this.PntGeom=e.PntGeom!==undefined&&e.PntGeom!==null?e.PntGeom:null;this.LinGeom=e.LinGeom!==undefined&&e.LinGeom!==null?e.LinGeom:null;this.RegGeom=e.RegGeom!==undefined&&e.RegGeom!==null?e.RegGeom:null};jr.prototype.setPntGeom=function(t){this.PntGeom=t!==undefined&&t!==null&&Array.isArray(t)?t:null};jr.prototype.setLine=function(t){this.LinGeom=t!==undefined&&t!==null&&Array.isArray(t)?t:null};jr.prototype.setRegGeom=function(t){this.RegGeom=t!==undefined&&t!==null&&Array.isArray(t)?t:null};qt.Object.FeatureGeometry=jr;var Gr=function(t){var e=t!==undefined?t:{};zt(this,e);this.InfoType=e.InfoType!==undefined&&e.InfoType!==null?e.InfoType:0;this.PntInfo=e.PntInfo!==undefined&&e.PntInfo!==null?e.PntInfo:null;this.LinInfo=e.LinInfo!==undefined&&e.LinInfo!==null?e.LinInfo:null;this.RegInfo=e.RegInfo!==undefined&&e.RegInfo!==null?e.RegInfo:null};qt.Object.WebGraphicsInfo=Gr;var Br=function(t){var e=t!==undefined?t:{};zt(this,e);this.AttValue=e.AttValue!==undefined&&e.AttValue!==null?e.AttValue:null;this.FID=e.FID!==undefined&&e.FID!==null?e.FID:0;this.bound=e.bound!==undefined&&e.bound!==null?e.bound:null;this.fGeom=e.fGeom!==undefined&&e.fGeom!==null?e.fGeom:null;this.ftype=e.ftype!==undefined&&e.ftype!==null?e.ftype:0;this.GraphicInfo=e.GraphicInfo!==undefined&&e.GraphicInfo!==null?e.GraphicInfo:null};Br.prototype.getAttValue=function(t){if(this.AttValue===null){return null}var e=this.AttValue.length;if(typeof t==="number"){if(t>=e){return null}return this.AttValue[t]}};Br.prototype.getGraphicInfo=function(){if(this.GraphicInfo===null){return null}else{return new Gr(this.GraphicInfo)}};Br.prototype.getAttValueArray=function(){return this.AttValue};Br.prototype.getRectBound=function(){var t=this.bound;if(t!==null){return new Ar(t)}else{return t}};Br.prototype.getGeometry=function(){return this.fGeom};Br.prototype.getFID=function(){return this.FID};Br.prototype.setAttValues=function(t){this.AttValue=t};Br.prototype.setBound=function(t){var e=null;if(typeof t==="string"){e=new Ar(t)}if(t instanceof String){e=new Ar(t)}if(t instanceof Ar){e=t}if(t instanceof ol.extent){e=new Ar;e.setByOL(t)}this.bound=e};Br.prototype.setFID=function(t){this.FID=t};Br.prototype.setFType=function(t){this.ftype=t};Br.prototype.destroy=function(){this.AttValue=null;this.FID=null;this.bound=null;this.fGeom=null;this.ftype=null;this.GraphicInfo=null};qt.Object.Feature=Br;var Ur=function(t){var e=t!==undefined?t:{};zt(this,e);this.TotalCount=e.TotalCount!==undefined&&e.TotalCount!==null?e.TotalCount:0;this.AttStruct=e.AttStruct!==undefined&&e.AttStruct!==null?e.AttStruct:null;this.SFEleArray=e.SFEleArray!==undefined&&e.SFEleArray!==null?e.SFEleArray:new Array};Ur.prototype.clear=function(){this.AttStruct=null;this.SFEleArray=new Array};Ur.prototype.addFeature=function(t){if(t instanceof Array){this.SFEleArray.concat(t)}else{this.SFEleArray.push(t)}};Ur.prototype.getFeaturesLength=function(){if(this.SFEleArray instanceof Array){return this.SFEleArray.length}else{return 0}};Ur.prototype.getFeatureByIndex=function(t){if(t>=this.getFeaturesLength()){return null}else{var e=this.SFEleArray[t];if(e instanceof Br){return e}else{return new Br(this.SFEleArray[t])}}};Ur.prototype.getAttType=function(t){var e;if(this.AttStruct==null){return null}if(typeof t=="number"){e=t}else{e=this.getAttIndexByAttName(t)}if(e==null){return null}else{return this.AttStruct.FldType[e]}};Ur.prototype.getAttIndexByAttName=function(t){if(this.AttStruct==null){return null}if(this.AttStruct.FldName==null){return null}var e=this.AttStruct.FldName.length;for(var r=0;r<e;r++){if(this.AttStruct.FldName[r]==t){return r}}return null};Ur.prototype.getAttNameByIndex=function(t){if(this.AttStruct==null){return null}if(this.AttStruct.FldName==null){return null}if(this.AttStruct.FldName.length<=t){return null}return this.AttStruct.FldName[t]};qt.Object.FeatureSet=Ur;class qr extends Nr{constructor(t,e){var r=e?e:{};super(r);this.pointArr=t!==undefined&&t!==null&&Array.isArray(t)?t:new Array}setByOL(t){if(t!==undefined&&t!==null){var e=t.getLinearRing(0);var r=e.getCoordinates();var n=r.length;for(var i=0;i<n;i++){this.pointArr[i]=new Tr(r[i][0],r[i][1])}}}toString(){if(this.pointArr===null||this.pointArr.length===0){return""}var t="";for(var e=0;e<this.pointArr.length;e++){t+=this.pointArr[e].x+","+this.pointArr[e].y+","}return t.substring(0,t.length-1)}getGeometryType(){return"polygon"}}Zondy.Object.Polygon=qr;class zr extends Nr{constructor(t,e){var r=e?e:{};super(r);this.polygonArr=t!==undefined&&t!==null&&Array.isArray(t)?t:new Array}setByOL(t){if(t!==undefined&&t!==null){this.polygonArr=[];var e=t.getLinearRingCount();var r=t.getLinearRings();for(var n=0;n<e;n++){var i=r[n].getCoordinates();var o=i.length;var s=[];for(var a=0;a<o;a++){s[a]=new Tr(i[a][0],i[a][1])}this.polygonArr[n]=new qr(s)}}}toString(){if(this.polygonArr===undefined||this.polygonArr===null||this.polygonArr.length===0)return"";var t="";for(var e=0;e<this.polygonArr.length;e++){t+=this.polygonArr[e].toString()+";"}return t.substring(0,t.length-1)}getGeometryType(){return"multiPolygon"}}Zondy.Object.MultiPolygon=zr;class Vr extends Nr{constructor(t,e){var r=e?e:{};super(r);this.nearDis=r.nearDis!==undefined&&r.nearDis!==null?parseFloat(r.nearDis):null;this.pointArr=t!==undefined&&t!==null&&Array.isArray(t)?t:new Array}setByOL(t){if(t!==undefined&&t!==null){var e=t.getCoordinates();var r=e.length;for(var n=0;n<r;n++){this.pointArr[n]=new Tr(e[n][0],e[n][1])}}}toString(){if(this.pointArr===null||this.pointArr.length===0)return"";var t=this.pointArr[0].x+","+this.pointArr[0].y;for(var e=1;e<this.pointArr.length;e++){t+=","+this.pointArr[e].x+","+this.pointArr[e].y}if(this.nearDis!==undefined&&this.nearDis!==null){t+=";"+this.nearDis}return this.Trim(t,"g")}getGeometryType(){return"line"}}Zondy.Object.PolyLine=Vr;var Wr=function(t){var e=t!==undefined?t:{};zt(this,e);this.clsType=e.clsType!==undefined?e.clsType:Ke.SFCls;this.clsName=e.clsName!==undefined?e.clsName:null;this.geoType=e.geoType!==undefined?e.geoType:1;this.srefName=e.srefName!==undefined?encodeURI(e.srefName):"";this.dsName=e.dsName!==undefined?encodeURI(e.dsName):"";this.attStruct=e.attStruct!==undefined?e.attStruct:null};qt.Object.VectCls=Wr;class Hr extends je{constructor(t){super();var e=t?t:{};const{width:r=1,dashArray:n,cap:i=Dt.butt,join:o=kt.miter,shadow:s,symbol:a}=e;this.type="line";this.width=r;this.dashArray=n;this.cap=i;this.join=o;this.shadowStyle=s||new ke;this.symbolStyle=a||new Be;zt(this,e)}toMapboxStyle(t){t=t||{};const{highlight:e=false}=t;let{color:r,opacity:n,width:i,cap:o,join:s,blur:a,dashArray:u,shadowStyle:l,symbolStyle:c}=this;if(l){a=l.blur;i=i+a}let h={filter:["==","$type","LineString"],layout:{"line-cap":o,"line-join":s},paint:{"line-width":i,"line-color":r,"line-opacity":n,"line-blur":a}};if(c&&c.symbol){h.paint["line-pattern"]=c.symbol}if(u){h.paint["line-dasharray"]=u}if(e){h.paint["line-width"]=["case",["boolean",["feature-state","hover"],false],i,0]}return h}toCesiumStyle(t){let e;let{dashArray:r,shadowStyle:n,color:i,opacity:o,width:s}=this;if(r){e=new t.PolylineDashMaterialProperty({color:t.Color.fromCssColorString(i)})}else if(n&&n.blur>0){s=s+n.blur;e=new t.PolylineGlowMaterialProperty({glowPower:.2,taperPower:.5,color:t.Color.fromCssColorString(n.color)})}else{e=new t.ColorMaterialProperty(t.Color.fromCssColorString(i).withAlpha(o))}return{material:e,width:s}}}tt.style.LineStyle=Hr;class Xr extends je{constructor(t){super();var e=t?t:{};const{outlineWidth:r=1,outlineColor:n="#FFFFFF",outlineDashArray:i="line",offsetX:o=0,offsetY:s=0,shadow:a,symbol:u,outlineSymbolStyle:l}=e;this.type="fill";this.outlineWidth=r;this.outlineColor=n;this.outlineDashArray=i;this.offsetX=o;this.offsetY=s;this.shadowStyle=a||new ke;this.symbolStyle=u||new Be;this.outlineSymbolStyle=l||new Be;zt(this,e)}toMapboxStyle(t){t=t||{};const{highlight:e=false}=t;let{color:r,opacity:n,outlineColor:i,symbolStyle:o,offsetX:s,offsetY:a}=this;let u={filter:["==","$type","Polygon"],paint:{"fill-antialias":true,"fill-color":r,"fill-opacity":n,"fill-outline-color":i}};if(o&&o.symbol){u.paint["fill-pattern"]=o.symbol}if(s||a){u.paint["fill-translate"]=[s,a]}if(e){u.paint["fill-color"]=["case",["boolean",["feature-state","hover"],false],r,"rgba(0,0,0,0)"];u.paint["fill-outline-color"]=["case",["boolean",["feature-state","hover"],false],i,"rgba(0,0,0,0)"]}return u}toCesiumStyle(t){let{color:e,opacity:r,outlineColor:n}=this;let i=new t.ColorMaterialProperty(t.Color.fromCssColorString(e).withAlpha(r));let o=new t.Color.fromCssColorString(n);return{material:i,outlineColor:o}}}tt.style.FillStyle=Xr;class Zr extends De{constructor(t){super();var e=t?t:{};const{color:r="#FFFFFF",opacity:n=1,symbol:i}=e;const{castShadows:o=true,edges:s,size:a=1,material:u}=e;this.type="extrude";this.color=r;this.opacity=n;this.symbolStyle=i||new Be;this.castShadows=o;this.edges=s;this.material=u||r;this.size=a;zt(this,e)}toMapboxStyle(t){t=t||{};const{highlight:e=false}=t;let{material:r,size:n,opacity:i,symbolStyle:o}=this;const{pattern:s,xoffset:a,yoffset:u}=o;let l={filter:["==","$type","Polygon"],paint:{"fill-extrusion-base":0,"fill-extrusion-color":r,"fill-extrusion-height":n,"fill-extrusion-opacity":i,"fill-extrusion-translate":[a,u],"fill-extrusion-translate-anchor":"map","fill-extrusion-vertical-gradient":true}};if(o&&s){l.paint["fill-extrusion-pattern"]=s}if(e){l.paint["fill-extrusion-color"]=["case",["boolean",["feature-state","hover"],false],r,"rgba(0,0,0,0)"];l.paint["fill-extrusion-base"]=["case",["boolean",["feature-state","hover"],false],100,0]}return l}}tt.symbols.ExtrudeStyle=Zr;class Yr{constructor(t){var e=t?t:{};const{family:r="黑体",size:n=12,style:i="normal",weight:o="normal"}=e;this.family=r;this.size=n;this.style=i;this.weight=o;zt(this,e)}}tt.style.FontStyle=Yr;class Jr extends je{constructor(t){super();var e=t?t:{};const{angle:r=0,allowOverlap:n=false}=e;const{backgroundColor:i,borderLineColor:o,borderLineSize:s}=e;const{color:a="#000000",font:u}=e;const{haloColor:l="#000000",haloSize:c=0,horizontalAlignment:h=Rt.center}=e;const{kerning:f=true,lineHeight:p=1,lineWidth:d=192}=e;const{rotated:y=false,text:v="",type:g="text",verticalAlignment:m=Ft.baseline}=e;const{xoffset:_=0,yoffset:b=0}=e;this.allowOverlap=n;this.angle=r;this.backgroundColor=i;this.borderLineColor=o;this.borderLineSize=s;this.color=a;this.font=u||new Yr;this.haloColor=l;this.haloSize=c;this.horizontalAlignment=h;this.kerning=f;this.lineHeight=p;this.lineWidth=d;this.rotated=y;this.text=v;this.type="text";this.verticalAlignment=m;this.xoffset=_;this.yoffset=b;zt(this,e)}toMapboxStyle(t){t=t||{};const{highlight:e=false}=t;const{angle:r,allowOverlap:n,color:i,font:o}=this;const{family:s,size:a,style:u,weight:l}=o;const{backgroundColor:c,borderLineColor:h,borderLineSize:f}=this;const{haloColor:p,haloSize:d,horizontalAlignment:y}=this;const{kerning:v,lineHeight:g,lineWidth:m}=this;const{rotated:_,text:b,type:x,verticalAlignment:S}=this;const{xoffset:w,yoffset:C}=this;let I={paint:{"text-color":i,"text-halo-color":p,"text-halo-width":d},layout:{"text-rotate":r,"text-font":[s,s],"text-line-height":g,"text-max-width":m,"text-field":b,"text-offset":[w,C],"text-size":a,"text-allow-overlap":n}};if(e){let t=a*1.5;I.paint["text-color"]=["case",["boolean",["feature-state","hover"],false],i,"rgba(0, 0, 0, 0)"]}return I}toCesiumStyle(t){let{color:e="#FFFFFF",opacity:r=1,radius:n,outlineColor:i="#000000",outlineWidth:o=1,outlineOpacity:s=1,show:a=true}=this;return{show:a,pixelSize:n,color:t.Color.fromCssColorString(e).withAlpha(r),outlineWidth:o,outlineColor:t.Color.fromCssColorString(i).withAlpha(s)}}}tt.style.TextStyle=Jr;class Qr{constructor(t){var e=t?t:{};const{type:r,authoringInfo:n}=e;this.type=r;this.authoringInfo=n}fromJSON(t){t=t||{};const{type:e,authoringInfo:r}=t;this.type=e;this.authoringInfo=r}toJSON(){return{type:this.type,authoringInfo:this.authoringInfo}}}tt.renderer.Renderer=Qr;class Kr{constructor(t){var e=t?t:{};const{value:r,symbol:n,label:i}=e;this.value=r;this.symbol=n;this.label=i}clone(){return Object(at["cloneDeep"])(this)}fromJSON(t){t=t||{};const{value:e,symbol:r,label:n}=t;this.value=e;this.symbol=r;this.label=n}toJSON(){return{value:this.value,symbol:this.symbol,label:this.label}}}tt.renderer.UniqueValueInfo=Kr;class $r{constructor(t){var e=t?t:{};const{minValue:r,maxValue:n,symbol:i,label:o}=e;this.minValue=r;this.maxValue=n;this.symbol=i;this.label=o}clone(){return Object(at["cloneDeep"])(this)}fromJSON(t){t=t||{};const{minValue:e,maxValue:r,symbol:n,label:i}=t;this.minValue=e;this.maxValue=r;this.symbol=n;this.label=i}toJSON(){return{minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol,label:this.label}}}tt.renderer.ClassBreakInfo=$r;class tn{constructor(t){var e=t?t:{};const{type:r,field:n,legendOptions:i,valueExpression:o,valueExpressionTitle:s}=e;this.type=r;this.field=n;this.legendOptions=i;this.valueExpression=o;this.valueExpressionTitle=s}fromJSON(t){t=t||{};const{type:e,field:r,legendOptions:n,valueExpression:i,valueExpressionTitle:o}=t;this.type=e;this.field=r;this.legendOptions=n;this.valueExpression=i;this.valueExpressionTitle=o}toJSON(){return{type:this.type,field:this.field,legendOptions:this.legendOptions,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle}}}tt.renderer.VisualVariable=tn;class en extends Qr{constructor(t){super(t);var e=t?t:{};const{type:r="simple"}=e;this.type=r;const{symbol:n,label:i,visualVariables:o}=e;this.symbol=n;this.label=i;this.visualVariables=o}clone(){return Object(at["cloneDeep"])(this)}fromJSON(t){t=t||{};const{type:e="simple"}=t;this.type=e;const{symbol:r,label:n,visualVariables:i}=t;this.symbol=r;this.label=n;this.visualVariables=i}toJSON(){return{type:this.type,symbol:this.symbol,label:this.label,visualVariables:this.visualVariables}}}tt.renderer.SimpleRenderer=en;class rn extends Qr{constructor(t){super(t);var e=t?t:{};const{type:r="unique-value"}=e;this.type=r;const{field:n,field2:i,field3:o,defaultSymbol:s,defaultLabel:a,uniqueValueInfos:u,visualVariables:l,backgroundFillSymbol:c,fieldDelimiter:h,legendOptions:f,valueExpression:p,valueExpressionTitle:d}=e;this.field=n;this.field2=i;this.field3=o;this.defaultSymbol=s;this.defaultLabel=a;this.uniqueValueInfos=u;this.visualVariables=l;this.backgroundFillSymbol=c;this.fieldDelimiter=h;this.legendOptions=f;this.valueExpression=p;this.valueExpressionTitle=d}clone(){return Object(at["cloneDeep"])(this)}fromJSON(t){t=t||{};const{type:e="unique-value"}=t;this.type=e;const{field:r,field2:n,field3:i,defaultSymbol:o,defaultLabel:s,uniqueValueInfos:a,visualVariables:u,backgroundFillSymbol:l,fieldDelimiter:c,legendOptions:h,valueExpression:f,valueExpressionTitle:p}=t;this.field=r;this.field2=n;this.field3=i;this.defaultSymbol=o;this.defaultLabel=s;this.uniqueValueInfos=a;this.visualVariables=u;this.backgroundFillSymbol=l;this.fieldDelimiter=c;this.legendOptions=h;this.valueExpression=f;this.valueExpressionTitle=p}toJSON(){return{type:this.type,field:this.field,field2:this.field2,field3:this.field3,defaultSymbol:this.defaultSymbol,defaultLabel:this.defaultLabel,uniqueValueInfos:this.uniqueValueInfos,visualVariables:this.visualVariables,backgroundFillSymbol:this.backgroundFillSymbol,fieldDelimiter:this.fieldDelimiter,legendOptions:this.legendOptions,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle}}addUniqueValueInfo(t){t=t||{};this.uniqueValueInfos.push(t)}getUniqueValueInfo(t){t=t||{};const{value:e,symbol:r,label:n}=t;for(let t=0;t<this.uniqueValueInfos.length;t++){let r=this.uniqueValueInfos[t];if(r.value==e){return r}}}removeUniqueValueInfo(t){t=t||{};const{value:e,symbol:r,label:n}=t;for(let t=0;t<this.uniqueValueInfos.length;t++){let r=this.uniqueValueInfos[t];if(r.value==e){this.uniqueValueInfos.splice(t,1)}}}}tt.renderer.UniqueValueRenderer=rn;class nn extends Qr{constructor(t){super(t);var e=t?t:{};const{type:r="class-breaks"}=e;this.type=r;const{field:n,defaultSymbol:i,defaultLabel:o,classBreakInfos:s,visualVariables:a,backgroundFillSymbol:u,legendOptions:l,normalizationType:c,normalizationField:h,normalizationTotal:f,valueExpression:p,valueExpressionTitle:d}=e;this.field=n;this.defaultSymbol=i;this.defaultLabel=o;this.classBreakInfos=s;this.visualVariables=a;this.backgroundFillSymbol=u;this.legendOptions=l;this.normalizationType=c;this.normalizationField=h;this.normalizationTotal=f;this.valueExpression=p;this.valueExpressionTitle=d}clone(){return Object(at["cloneDeep"])(this)}fromJSON(t){t=t||{};const{type:e="class-breaks"}=t;this.type=e;const{field:r,defaultSymbol:n,defaultLabel:i,classBreakInfos:o,visualVariables:s,backgroundFillSymbol:a,legendOptions:u,normalizationType:l,normalizationField:c,normalizationTotal:h,valueExpression:f,valueExpressionTitle:p}=t;this.field=r;this.defaultSymbol=n;this.defaultLabel=i;this.classBreakInfos=o;this.visualVariables=s;this.backgroundFillSymbol=a;this.legendOptions=u;this.normalizationType=l;this.normalizationField=c;this.normalizationTotal=h;this.valueExpression=f;this.valueExpressionTitle=p}toJSON(){return{type:this.type,field:this.field,defaultSymbol:this.defaultSymbol,defaultLabel:this.defaultLabel,classBreakInfos:this.classBreakInfos,visualVariables:this.visualVariables,backgroundFillSymbol:this.backgroundFillSymbol,legendOptions:this.legendOptions,normalizationType:this.normalizationType,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle}}addClassBreakInfo(t){t=t||{};this.classBreakInfos.push(t)}getClassBreakInfo(t){t=t||{};const{minValue:e,maxValue:r,symbol:n,label:i}=t;for(let t=0;t<this.classBreakInfos.length;t++){let n=this.classBreakInfos[t];if(n.minValue==e&&n.maxValue==r){return n}}}removeClassBreakInfo(t){t=t||{};const{minValue:e,maxValue:r,symbol:n,label:i}=t;for(let t=0;t<this.classBreakInfos.length;t++){let n=this.classBreakInfos[t];if(n.minValue==e&&n.maxValue==r){this.classBreakInfos.splice(t,1)}}}}tt.renderer.ClassBreaksRenderer=nn;class on extends tn{constructor(t){super(t);var e=t?t:{};const{type:r="color"}=e;this.type=r;const{field:n,valueExpression:i,valueExpressionTitle:o,normalizationType:s,normalizationField:a,normalizationTotal:u,stops:l}=e;this.field=n;this.valueExpression=i;this.valueExpressionTitle=o;this.normalizationType=s;this.normalizationField=a;this.normalizationTotal=u;this.stops=l}clone(){return Object(at["cloneDeep"])(this)}fromJSON(t){t=t||{};const{type:e="color"}=t;this.type=e;const{field:r,valueExpression:n,valueExpressionTitle:i,normalizationType:o,normalizationField:s,normalizationTotal:a,stops:u}=t;this.field=r;this.valueExpression=n;this.valueExpressionTitle=i;this.normalizationType=o;this.normalizationField=s;this.normalizationTotal=a;this.stops=u}toJSON(){return{type:this.type,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,normalizationType:this.normalizationType,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,stops:this.stops}}}tt.renderer.ColorVariable=on;class sn extends tn{constructor(t){super(t);var e=t?t:{};const{type:r="opacity"}=e;this.type=r;const{field:n,valueExpression:i,valueExpressionTitle:o,normalizationType:s,normalizationField:a,normalizationTotal:u,stops:l}=e;this.field=n;this.valueExpression=i;this.valueExpressionTitle=o;this.normalizationType=s;this.normalizationField=a;this.normalizationTotal=u;this.stops=l}clone(){return Object(at["cloneDeep"])(this)}fromJSON(t){t=t||{};const{type:e="opacity"}=t;this.type=e;const{field:r,valueExpression:n,valueExpressionTitle:i,normalizationType:o,normalizationField:s,normalizationTotal:a,stops:u}=t;this.field=r;this.valueExpression=n;this.valueExpressionTitle=i;this.normalizationType=o;this.normalizationField=s;this.normalizationTotal=a;this.stops=u}toJSON(){return{type:this.type,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,normalizationType:this.normalizationType,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,stops:this.stops}}}tt.renderer.OpacityVariable=sn;class an extends tn{constructor(t){super(t);var e=t?t:{};const{type:r="size"}=e;this.type=r;const{axis:n,legendOptions:i,maxDataValue:o,maxSize:s,minDataValue:a,minSize:u,normalizationField:l,stops:c,target:h,useSymbolValue:f,valueRepresentation:p,valueUnit:d}=e;this.axis=n;this.legendOptions=i;this.maxDataValue=o;this.maxSize=s;this.minDataValue=a;this.minSize=u;this.normalizationField=l;this.stops=c;this.target=h;this.useSymbolValue=f;this.valueRepresentation=p;this.valueUnit=d}clone(){return Object(at["cloneDeep"])(this)}fromJSON(t){t=t||{};const{type:e="size"}=t;this.type=e;const{axis:r,legendOptions:n,maxDataValue:i,maxSize:o,minDataValue:s,minSize:a,normalizationField:u,stops:l,target:c,useSymbolValue:h,valueRepresentation:f,valueUnit:p}=t;this.axis=r;this.legendOptions=n;this.maxDataValue=i;this.maxSize=o;this.minDataValue=s;this.minSize=a;this.normalizationField=u;this.stops=l;this.target=c;this.useSymbolValue=h;this.valueRepresentation=f;this.valueUnit=p}toJSON(){return{type:this.type,axis:this.axis,legendOptions:this.legendOptions,maxDataValue:this.maxDataValue,maxSize:this.maxSize,minDataValue:this.minDataValue,minSize:this.minSize,normalizationField:this.normalizationField,stops:this.stops,target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit}}}tt.renderer.SizeVariable=an;class un extends tn{constructor(t){super(t);var e=t?t:{};const{type:r="rotation"}=e;this.type=r;const{axis:n,rotationType:i}=e;this.axis=n;this.rotationType=i}clone(){return Object(at["cloneDeep"])(this)}fromJSON(t){t=t||{};const{type:e="rotation"}=t;this.type=e;const{axis:r,rotationType:n}=options;this.axis=r;this.rotationType=n}toJSON(){return{type:this.type,axis:this.axis,rotationType:this.rotationType}}}tt.renderer.RotationVariable=un;let ln=[16,8,4,2,1];let cn="0123456789bcdefghjkmnpqrstuvwxyz";let hn={right:{even:"bc01fg45238967deuvhjyznpkmstqrwx"},left:{even:"238967debc01fg45kmstqrwxuvhjyznp"},top:{even:"p0r21436x8zb9dcf5h7kjnmqesgutwvy"},bottom:{even:"14365h7k9dcfesgujnmqp0r2twvyx8zb"}};let fn={right:{even:"bcfguvyz"},left:{even:"0145hjnp"},top:{even:"prxz"},bottom:{even:"028b"}};hn.bottom.odd=hn.left.even;hn.top.odd=hn.right.even;hn.left.odd=hn.bottom.even;hn.right.odd=hn.top.even;fn.bottom.odd=fn.left.even;fn.top.odd=fn.right.even;fn.left.odd=fn.bottom.even;fn.right.odd=fn.top.even;var pn;var dn;var yn;function vn(t,e,r){if(e&r)t[0]=(t[0]+t[1])/2;else t[1]=(t[0]+t[1])/2}function gn(t,e){t=t.toLowerCase();var r=t.charAt(t.length-1);var n=t.length%2?"odd":"even";var i=t.substring(0,t.length-1);if(fn[e][n].indexOf(r)!=-1)i=gn(i,e);return i+cn[hn[e][n].indexOf(r)]}function mn(t){var e=1;var r=[];var n=[];r[0]=-90;r[1]=90;n[0]=-180;n[1]=180;pn=90;dn=180;for(let i=0;i<t.length;i++){let o=t[i];let s=cn.indexOf(o);for(let t=0;t<5;t++){let i=ln[t];if(e){dn/=2;vn(n,s,i)}else{pn/=2;vn(r,s,i)}e=!e}}r[2]=(r[0]+r[1])/2;n[2]=(n[0]+n[1])/2;return{latitude:r,longitude:n}}function _n(t,e){var r=1;var n=0;var i=[];var o=[];var s=0;var a=0;var u=12;yn="";i[0]=-90;i[1]=90;o[0]=-180;o[1]=180;while(yn.length<u){if(r){let t=(o[0]+o[1])/2;if(e>t){a|=ln[s];o[0]=t}else o[1]=t}else{let e=(i[0]+i[1])/2;if(t>e){a|=ln[s];i[0]=e}else i[1]=e}r=!r;if(s<4)s++;else{yn+=cn[a];s=0;a=0}}return yn}function bn(t){var e=1;var r=[];var n=[];r[0]=-90;r[1]=90;n[0]=-180;n[1]=180;pn=90;dn=180;for(let i=0;i<t.length;i++){let o=t[i];let s=cn.indexOf(o);for(let t=0;t<5;t++){let i=ln[t];if(e){dn/=2;vn(n,s,i)}else{pn/=2;vn(r,s,i)}e=!e}}r[2]=(r[0]+r[1])/2;n[2]=(n[0]+n[1])/2;var i=[n[0],r[1]];var o=[n[1],r[1]];var s=[n[1],r[0]];var a=[n[0],r[0]];return[[i,o,s,a,i]]}const xn={WGS84:[{id:4326,name:"WGS1984_度",type:0,strProject:"+proj=longlat +datum=WGS84 +no_defs"}],"Web墨卡托":[{id:3857,name:"Web墨卡托_WGS1984",type:1,strProject:"+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs"}],"经纬度西安80":[{id:4610,name:"地理坐标系(西安)_度",type:0,strProject:"+proj=longlat +a=6378140 +b=6356755.288157528 +units=degrees +no_defs"}],"经纬度北京54":[{id:4214,name:"地理坐标系(北京)_度",type:0,strProject:"+proj=longlat +ellps=krass +towgs84=15.8,-154.4,-82.3,0,0,0,0 +no_defs"}],"经纬度中国2000":[{id:4490,name:"中国2000国家大地坐标系_度",type:0,strProject:"+proj=longlat +ellps=GRS80 +units=degrees +no_defs"}],"高斯西安80":[{id:2348,name:"高斯大地坐标系_西安80_23带6_北",type:1,strProject:"+proj=tmerc +lat_0=0 +lon_0=135 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2347,name:"高斯大地坐标系_西安80_22带6_北",type:1,strProject:"+proj=tmerc +lat_0=0 +lon_0=129 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2346,name:"高斯大地坐标系_西安80_21带6_北",type:1,strProject:"+proj=tmerc +lat_0=0 +lon_0=123 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2345,name:"高斯大地坐标系_西安80_20带6_北",type:1,strProject:"+proj=tmerc +lat_0=0 +lon_0=117 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2344,name:"高斯大地坐标系_西安80_19带6_北",type:1,strProject:"+proj=tmerc +lat_0=0 +lon_0=111 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2343,name:"高斯大地坐标系_西安80_18带6_北",type:1,strProject:"+proj=tmerc +lat_0=0 +lon_0=105 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2342,name:"高斯大地坐标系_西安80_17带6_北",type:1,strProject:"+proj=tmerc +lat_0=0 +lon_0=99 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2341,name:"高斯大地坐标系_西安80_16带6_北",type:1,strProject:"+proj=tmerc +lat_0=0 +lon_0=93 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2340,name:"高斯大地坐标系_西安80_15带6_北",type:1,strProject:"+proj=tmerc +lat_0=0 +lon_0=87 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2339,name:"高斯大地坐标系_西安80_14带6_北",type:1,strProject:"+proj=tmerc +lat_0=0 +lon_0=75 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2338,name:"高斯大地坐标系_西安80_13带6_北",type:1,strProject:"+proj=tmerc +lat_0=0 +lon_0=75 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2390,name:"高斯大地坐标系_西安80_45带3_北",type:1,strProject:"+proj=tmerc +lat_0=0 +lon_0=135 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2389,name:"高斯大地坐标系_西安80_44带3_北",type:1,strProject:"+proj=tmerc +lat_0=0 +lon_0=132 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2388,name:"高斯大地坐标系_西安80_43带3_北",type:1,strProject:"+proj=tmerc +lat_0=0 +lon_0=129 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2387,name:"高斯大地坐标系_西安80_42带3_北",type:1,strProject:"+proj=tmerc +lat_0=0 +lon_0=126 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2386,name:"高斯大地坐标系_西安80_41带3_北",type:1,strProject:"+proj=tmerc +lat_0=0 +lon_0=123 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2385,name:"高斯大地坐标系_西安80_40带3_北",type:1,strProject:"+proj=tmerc +lat_0=0 +lon_0=120 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2384,name:"高斯大地坐标系_西安80_39带3_北",type:1,strProject:"+proj=tmerc +lat_0=0 +lon_0=117 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2383,name:"高斯大地坐标系_西安80_38带3_北",type:1,strProject:"+proj=tmerc +lat_0=0 +lon_0=114 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2382,name:"高斯大地坐标系_西安80_37带3_北",type:1,strProject:"+proj=tmerc +lat_0=0 +lon_0=111 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2381,name:"高斯大地坐标系_西安80_36带3_北",type:1,strProject:"+proj=tmerc +lat_0=0 +lon_0=108 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2380,name:"高斯大地坐标系_西安80_35带3_北",type:1,strProject:"+proj=tmerc +lat_0=0 +lon_0=105 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2379,name:"高斯大地坐标系_西安80_34带3_北",type:1,strProject:"+proj=tmerc +lat_0=0 +lon_0=102 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2378,name:"高斯大地坐标系_西安80_33带3_北",type:1,strProject:"+proj=tmerc +lat_0=0 +lon_0=99 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2377,name:"高斯大地坐标系_西安80_32带3_北",type:1,strProject:"+proj=tmerc +lat_0=0 +lon_0=96 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2376,name:"高斯大地坐标系_西安80_31带3_北",type:1,strProject:"+proj=tmerc +lat_0=0 +lon_0=93 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2375,name:"高斯大地坐标系_西安80_30带3_北",type:1,strProject:"+proj=tmerc +lat_0=0 +lon_0=90 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2374,name:"高斯大地坐标系_西安80_29带3_北",type:1,strProject:"+proj=tmerc +lat_0=0 +lon_0=87 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2373,name:"高斯大地坐标系_西安80_28带3_北",type:1,strProject:"+proj=tmerc +lat_0=0 +lon_0=84 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2372,name:"高斯大地坐标系_西安80_27带3_北",type:1,strProject:"+proj=tmerc +lat_0=0 +lon_0=81 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2371,name:"高斯大地坐标系_西安80_26带3_北",type:1,strProject:"+proj=tmerc +lat_0=0 +lon_0=78 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2370,name:"高斯大地坐标系_西安80_25带3_北",type:1,strProject:"+proj=tmerc +lat_0=0 +lon_0=75 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2327,name:"高斯大地坐标系_西安80_13带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=75 +k=1 +x_0=13500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2328,name:"高斯大地坐标系_西安80_14带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=81 +k=1 +x_0=14500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2329,name:"高斯大地坐标系_西安80_15带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=87 +k=1 +x_0=15500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2330,name:"高斯大地坐标系_西安80_16带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=93 +k=1 +x_0=16500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2331,name:"高斯大地坐标系_西安80_17带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=99 +k=1 +x_0=17500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2332,name:"高斯大地坐标系_西安80_18带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=105 +k=1 +x_0=18500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2333,name:"高斯大地坐标系_西安80_19带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=111 +k=1 +x_0=19500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2334,name:"高斯大地坐标系_西安80_20带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=117 +k=1 +x_0=20500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2335,name:"高斯大地坐标系_西安80_21带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=123 +k=1 +x_0=21500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2336,name:"高斯大地坐标系_西安80_22带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=129 +k=1 +x_0=22500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2337,name:"高斯大地坐标系_西安80_23带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=135 +k=1 +x_0=23500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2403,name:"高斯大地坐标系_西安80_27带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=81 +k=1 +x_0=27500000 +y_0=0 +ellps=krass +towgs84=15.8,-154.4,-82.3,0,0,0,0 +units=m +no_defs"},{id:2404,name:"高斯大地坐标系_西安80_28带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=84 +k=1 +x_0=28500000 +y_0=0 +ellps=krass +towgs84=15.8,-154.4,-82.3,0,0,0,0 +units=m +no_defs"},{id:2405,name:"高斯大地坐标系_西安80_29带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=87 +k=1 +x_0=29500000 +y_0=0 +ellps=krass +towgs84=15.8,-154.4,-82.3,0,0,0,0 +units=m +no_defs"},{id:2406,name:"高斯大地坐标系_西安80_30带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=90 +k=1 +x_0=30500000 +y_0=0 +ellps=krass +towgs84=15.8,-154.4,-82.3,0,0,0,0 +units=m +no_defs"},{id:2407,name:"高斯大地坐标系_西安80_31带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=93 +k=1 +x_0=31500000 +y_0=0 +ellps=krass +towgs84=15.8,-154.4,-82.3,0,0,0,0 +units=m +no_defs"},{id:2408,name:"高斯大地坐标系_西安80_32带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=96 +k=1 +x_0=32500000 +y_0=0 +ellps=krass +towgs84=15.8,-154.4,-82.3,0,0,0,0 +units=m +no_defs"},{id:2409,name:"高斯大地坐标系_西安80_33带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=99 +k=1 +x_0=33500000 +y_0=0 +ellps=krass +towgs84=15.8,-154.4,-82.3,0,0,0,0 +units=m +no_defs"},{id:2410,name:"高斯大地坐标系_西安80_34带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=102 +k=1 +x_0=34500000 +y_0=0 +ellps=krass +towgs84=15.8,-154.4,-82.3,0,0,0,0 +units=m +no_defs"},{id:2411,name:"高斯大地坐标系_西安80_35带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=105 +k=1 +x_0=35500000 +y_0=0 +ellps=krass +towgs84=15.8,-154.4,-82.3,0,0,0,0 +units=m +no_defs"},{id:2412,name:"高斯大地坐标系_西安80_36带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=108 +k=1 +x_0=36500000 +y_0=0 +ellps=krass +towgs84=15.8,-154.4,-82.3,0,0,0,0 +units=m +no_defs"},{id:2413,name:"高斯大地坐标系_西安80_37带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=111 +k=1 +x_0=37500000 +y_0=0 +ellps=krass +towgs84=15.8,-154.4,-82.3,0,0,0,0 +units=m +no_defs"},{id:2414,name:"高斯大地坐标系_西安80_38带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=114 +k=1 +x_0=38500000 +y_0=0 +ellps=krass +towgs84=15.8,-154.4,-82.3,0,0,0,0 +units=m +no_defs"},{id:2415,name:"高斯大地坐标系_西安80_39带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=117 +k=1 +x_0=39500000 +y_0=0 +ellps=krass +towgs84=15.8,-154.4,-82.3,0,0,0,0 +units=m +no_defs"},{id:2416,name:"高斯大地坐标系_西安80_40带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=120 +k=1 +x_0=40500000 +y_0=0 +ellps=krass +towgs84=15.8,-154.4,-82.3,0,0,0,0 +units=m +no_defs"},{id:2417,name:"高斯大地坐标系_西安80_41带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=123 +k=1 +x_0=41500000 +y_0=0 +ellps=krass +towgs84=15.8,-154.4,-82.3,0,0,0,0 +units=m +no_defs"},{id:2418,name:"高斯大地坐标系_西安80_42带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=126 +k=1 +x_0=42500000 +y_0=0 +ellps=krass +towgs84=15.8,-154.4,-82.3,0,0,0,0 +units=m +no_defs"},{id:2419,name:"高斯大地坐标系_西安80_43带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=129 +k=1 +x_0=43500000 +y_0=0 +ellps=krass +towgs84=15.8,-154.4,-82.3,0,0,0,0 +units=m +no_defs"},{id:2420,name:"高斯大地坐标系_西安80_44带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=132 +k=1 +x_0=44500000 +y_0=0 +ellps=krass +towgs84=15.8,-154.4,-82.3,0,0,0,0 +units=m +no_defs"},{id:2421,name:"高斯大地坐标系_西安80_45带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=135 +k=1 +x_0=45500000 +y_0=0 +ellps=krass +towgs84=15.8,-154.4,-82.3,0,0,0,0 +units=m +no_defs"},{id:2349,name:"高斯大地坐标系_西安80_25带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=75 +k=1 +x_0=25500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2350,name:"高斯大地坐标系_西安80_26带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=78 +k=1 +x_0=26500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2351,name:"高斯大地坐标系_西安80_27带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=81 +k=1 +x_0=27500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2352,name:"高斯大地坐标系_西安80_28带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=84 +k=1 +x_0=28500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2353,name:"高斯大地坐标系_西安80_29带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=87 +k=1 +x_0=29500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2354,name:"高斯大地坐标系_西安80_30带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=90 +k=1 +x_0=30500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2355,name:"高斯大地坐标系_西安80_31带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=93 +k=1 +x_0=31500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2356,name:"高斯大地坐标系_西安80_32带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=96 +k=1 +x_0=32500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2357,name:"高斯大地坐标系_西安80_33带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=99 +k=1 +x_0=33500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2358,name:"高斯大地坐标系_西安80_34带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=102 +k=1 +x_0=34500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2359,name:"高斯大地坐标系_西安80_35带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=105 +k=1 +x_0=35500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2360,name:"高斯大地坐标系_西安80_36带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=108 +k=1 +x_0=36500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2361,name:"高斯大地坐标系_西安80_37带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=111 +k=1 +x_0=37500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2362,name:"高斯大地坐标系_西安80_38带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=114 +k=1 +x_0=38500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2363,name:"高斯大地坐标系_西安80_39带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=117 +k=1 +x_0=39500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2364,name:"高斯大地坐标系_西安80_40带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=120 +k=1 +x_0=40500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2365,name:"高斯大地坐标系_西安80_41带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=123 +k=1 +x_0=41500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2366,name:"高斯大地坐标系_西安80_42带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=126 +k=1 +x_0=42500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2367,name:"高斯大地坐标系_西安80_43带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=129 +k=1 +x_0=43500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2368,name:"高斯大地坐标系_西安80_44带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=132 +k=1 +x_0=44500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2369,name:"高斯大地坐标系_西安80_45带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=135 +k=1 +x_0=45500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"}],"高斯北京54":[{id:21413,name:"高斯大地坐标系_北京54_13带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=75 +k=1 +x_0=13500000 +y_0=0 +ellps=krass +towgs84=15.8,-154.4,-82.3,0,0,0,0 +units=m +no_defs"},{id:21414,name:"高斯大地坐标系_北京54_14带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=81 +k=1 +x_0=14500000 +y_0=0 +ellps=krass +towgs84=15.8,-154.4,-82.3,0,0,0,0 +units=m +no_defs"},{id:21415,name:"高斯大地坐标系_北京54_15带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=87 +k=1 +x_0=15500000 +y_0=0 +ellps=krass +towgs84=15.8,-154.4,-82.3,0,0,0,0 +units=m +no_defs"},{id:21416,name:"高斯大地坐标系_北京54_16带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=93 +k=1 +x_0=16500000 +y_0=0 +ellps=krass +towgs84=15.8,-154.4,-82.3,0,0,0,0 +units=m +no_defs"},{id:21417,name:"高斯大地坐标系_北京54_17带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=99 +k=1 +x_0=17500000 +y_0=0 +ellps=krass +towgs84=15.8,-154.4,-82.3,0,0,0,0 +units=m +no_defs"},{id:21418,name:"高斯大地坐标系_北京54_18带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=105 +k=1 +x_0=18500000 +y_0=0 +ellps=krass +towgs84=15.8,-154.4,-82.3,0,0,0,0 +units=m +no_defs"},{id:21419,name:"高斯大地坐标系_北京54_19带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=111 +k=1 +x_0=19500000 +y_0=0 +ellps=krass +towgs84=15.8,-154.4,-82.3,0,0,0,0 +units=m +no_defs"},{id:21420,name:"高斯大地坐标系_北京54_20带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=117 +k=1 +x_0=20500000 +y_0=0 +ellps=krass +towgs84=15.8,-154.4,-82.3,0,0,0,0 +units=m +no_defs"},{id:21421,name:"高斯大地坐标系_北京54_21带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=123 +k=1 +x_0=21500000 +y_0=0 +ellps=krass +towgs84=15.8,-154.4,-82.3,0,0,0,0 +units=m +no_defs"},{id:21422,name:"高斯大地坐标系_北京54_22带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=129 +k=1 +x_0=22500000 +y_0=0 +ellps=krass +towgs84=15.8,-154.4,-82.3,0,0,0,0 +units=m +no_defs"},{id:21423,name:"高斯大地坐标系_北京54_23带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=135 +k=1 +x_0=23500000 +y_0=0 +ellps=krass +towgs84=15.8,-154.4,-82.3,0,0,0,0 +units=m +no_defs"},{id:2431,name:"高斯大地坐标系_北京54_34带3_北",type:1,strProject:"+proj=tmerc +lat_0=0 +lon_0=102 +k=1 +x_0=500000 +y_0=0 +ellps=krass +towgs84=15.8,-154.4,-82.3,0,0,0,0 +units=m +no_defs"},{id:2401,name:"高斯大地坐标系_北京54_25带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=75 +k=1 +x_0=25500000 +y_0=0 +ellps=krass +towgs84=15.8,-154.4,-82.3,0,0,0,0 +units=m +no_defs"},{id:2402,name:"高斯大地坐标系_北京54_26带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=78 +k=1 +x_0=26500000 +y_0=0 +ellps=krass +towgs84=15.8,-154.4,-82.3,0,0,0,0 +units=m +no_defs"},{id:32646,name:"Beijing 1954 / 3-degree Gauss-Kruger CM 102E",type:1,strProject:"+proj=utm +zone=46 +datum=WGS84 +units=m +no_defs"}],"高斯中国2000":[{id:4502,name:"高斯大地坐标系_中国2000_13带6_北",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=75 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"},{id:4503,name:"高斯大地坐标系_中国2000_14带6_北",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=81 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"},{id:4504,name:"高斯大地坐标系_中国2000_15带6_北",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=87 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"},{id:4505,name:"高斯大地坐标系_中国2000_16带6_北",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=93 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"},{id:4506,name:"高斯大地坐标系_中国2000_17带6_北",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=99 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"},{id:4507,name:"高斯大地坐标系_中国2000_18带6_北",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=105 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"},{id:4508,name:"高斯大地坐标系_中国2000_19带6_北",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=111 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"},{id:4509,name:"高斯大地坐标系_中国2000_20带6_北",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=117 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"},{id:4510,name:"高斯大地坐标系_中国2000_21带6_北",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=123 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"},{id:4511,name:"高斯大地坐标系_中国2000_22带6_北",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=129 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"},{id:4512,name:"高斯大地坐标系_中国2000_23带6_北",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=135 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"},{id:4513,name:"高斯大地坐标系_中国2000_25带6_北",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=75 +k=1 +x_0=25500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"},{id:4514,name:"高斯大地坐标系_中国2000_26带6_北",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=78 +k=1 +x_0=26500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"},{id:4515,name:"高斯大地坐标系_中国2000_27带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=81 +k=1 +x_0=27500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"},{id:4516,name:"高斯大地坐标系_中国2000_28带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=84 +k=1 +x_0=28500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"},{id:4517,name:"高斯大地坐标系_中国2000_29带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=87 +k=1 +x_0=29500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"},{id:4518,name:"高斯大地坐标系_中国2000_30带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=90 +k=1 +x_0=30500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"},{id:4519,name:"高斯大地坐标系_中国2000_31带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=93 +k=1 +x_0=31500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"},{id:4520,name:"高斯大地坐标系_中国2000_32带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=96 +k=1 +x_0=32500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"},{id:4521,name:"高斯大地坐标系_中国2000_33带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=99 +k=1 +x_0=33500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"},{id:4522,name:"高斯大地坐标系_中国2000_34带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=102 +k=1 +x_0=34500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"},{id:4523,name:"高斯大地坐标系_中国2000_35带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=105 +k=1 +x_0=35500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"},{id:4524,name:"高斯大地坐标系_中国2000_36带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=108 +k=1 +x_0=36500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"},{id:4525,name:"高斯大地坐标系_中国2000_37带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=111 +k=1 +x_0=37500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"},{id:4526,name:"高斯大地坐标系_中国2000_38带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=114 +k=1 +x_0=38500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"},{id:4527,name:"高斯大地坐标系_中国2000_39带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=117 +k=1 +x_0=39500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"},{id:4528,name:"高斯大地坐标系_中国2000_40带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=120 +k=1 +x_0=40500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"},{id:4529,name:"高斯大地坐标系_中国2000_41带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=123 +k=1 +x_0=41500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"},{id:4530,name:"高斯大地坐标系_中国2000_42带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=126 +k=1 +x_0=42500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"},{id:4531,name:"高斯大地坐标系_中国2000_43带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=129 +k=1 +x_0=43500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"},{id:4532,name:"高斯大地坐标系_中国2000_44带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=132 +k=1 +x_0=44500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"},{id:4533,name:"高斯大地坐标系_中国2000_45带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=135 +k=1 +x_0=45500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"},{id:4546,name:"高斯大地坐标系_中国2000_37带3_北",type:1,strProject:"+proj=tmerc +lat_0=0 +lon_0=111 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"},{id:4547,name:"高斯大地坐标系_中国2000_38带3_北",type:1,strProject:"+proj=tmerc +lat_0=0 +lon_0=114 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"},{id:4545,name:"高斯大地坐标系_中国2000_36带3_北",type:1,strProject:"+proj=tmerc +lat_0=0 +lon_0=108 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"}]};function Sn(t){if(typeof t==="string"){const e=t.toUpperCase();let r;if(e.indexOf("EPSG:")>=0){r=e.split("EPSG:")}else if(e.indexOf("EPSG_")>=0){r=e.split("EPSG_")}else if(e.indexOf("EPSG")>=0){r=e.split("EPSG")}else{return parseInt(t,10)}if(r.length>=2){return parseInt(r[1],10)}else{return 4326}}else{return t}}var wn=xn;var Cn=function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees");t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees");t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");t.WGS84=t["EPSG:4326"];t["EPSG:3785"]=t["EPSG:3857"];t.GOOGLE=t["EPSG:3857"];t["EPSG:900913"]=t["EPSG:3857"];t["EPSG:102113"]=t["EPSG:3857"]};var In=1;var En=2;var Pn=3;var Mn=4;var Ln=5;var Nn=6378137;var Tn=6356752.314;var On=.0066943799901413165;var An=484813681109536e-20;var Rn=Math.PI/2;var Fn=.16666666666666666;var Dn=.04722222222222222;var kn=.022156084656084655;var jn=1e-10;var Gn=.017453292519943295;var Bn=57.29577951308232;var Un=Math.PI/4;var qn=Math.PI*2;var zn=3.14159265359;var Vn={};Vn.greenwich=0;Vn.lisbon=-9.131906111111;Vn.paris=2.337229166667;Vn.bogota=-74.080916666667;Vn.madrid=-3.687938888889;Vn.rome=12.452333333333;Vn.bern=7.439583333333;Vn.jakarta=106.807719444444;Vn.ferro=-17.666666666667;Vn.brussels=4.367975;Vn.stockholm=18.058277777778;Vn.athens=23.7163375;Vn.oslo=10.722916666667;var Wn={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}};var Hn=/[\s_\-\/\(\)]/g;function Xn(t,e){if(t[e]){return t[e]}var r=Object.keys(t);var n=e.toLowerCase().replace(Hn,"");var i=-1;var o,s;while(++i<r.length){o=r[i];s=o.toLowerCase().replace(Hn,"");if(s===n){return t[o]}}}var Zn=function(t){var e={};var r=t.split("+").map(function(t){return t.trim()}).filter(function(t){return t}).reduce(function(t,e){var r=e.split("=");r.push(true);t[r[0].toLowerCase()]=r[1];return t},{});var n,i,o;var s={proj:"projName",datum:"datumCode",rf:function(t){e.rf=parseFloat(t)},lat_0:function(t){e.lat0=t*Gn},lat_1:function(t){e.lat1=t*Gn},lat_2:function(t){e.lat2=t*Gn},lat_ts:function(t){e.lat_ts=t*Gn},lon_0:function(t){e.long0=t*Gn},lon_1:function(t){e.long1=t*Gn},lon_2:function(t){e.long2=t*Gn},alpha:function(t){e.alpha=parseFloat(t)*Gn},gamma:function(t){e.rectified_grid_angle=parseFloat(t)},lonc:function(t){e.longc=t*Gn},x_0:function(t){e.x0=parseFloat(t)},y_0:function(t){e.y0=parseFloat(t)},k_0:function(t){e.k0=parseFloat(t)},k:function(t){e.k0=parseFloat(t)},a:function(t){e.a=parseFloat(t)},b:function(t){e.b=parseFloat(t)},r_a:function(){e.R_A=true},zone:function(t){e.zone=parseInt(t,10)},south:function(){e.utmSouth=true},towgs84:function(t){e.datum_params=t.split(",").map(function(t){return parseFloat(t)})},to_meter:function(t){e.to_meter=parseFloat(t)},units:function(t){e.units=t;var r=Xn(Wn,t);if(r){e.to_meter=r.to_meter}},from_greenwich:function(t){e.from_greenwich=t*Gn},pm:function(t){var r=Xn(Vn,t);e.from_greenwich=(r?r:parseFloat(t))*Gn},nadgrids:function(t){if(t==="@null"){e.datumCode="none"}else{e.nadgrids=t}},axis:function(t){var r="ewnsud";if(t.length===3&&r.indexOf(t.substr(0,1))!==-1&&r.indexOf(t.substr(1,1))!==-1&&r.indexOf(t.substr(2,1))!==-1){e.axis=t}},approx:function(){e.approx=true}};for(n in r){i=r[n];if(n in s){o=s[n];if(typeof o==="function"){o(i)}else{e[o]=i}}else{e[n]=i}}if(typeof e.datumCode==="string"&&e.datumCode!=="WGS84"){e.datumCode=e.datumCode.toLowerCase()}return e};var Yn=ui;var Jn=1;var Qn=2;var Kn=3;var $n=4;var ti=5;var ei=-1;var ri=/\s/;var ni=/[A-Za-z]/;var ii=/[A-Za-z84_]/;var oi=/[,\]]/;var si=/[\d\.E\-\+]/;function ai(t){if(typeof t!=="string"){throw new Error("not a string")}this.text=t.trim();this.level=0;this.place=0;this.root=null;this.stack=[];this.currentObject=null;this.state=Jn}ai.prototype.readCharicter=function(){var t=this.text[this.place++];if(this.state!==$n){while(ri.test(t)){if(this.place>=this.text.length){return}t=this.text[this.place++]}}switch(this.state){case Jn:return this.neutral(t);case Qn:return this.keyword(t);case $n:return this.quoted(t);case ti:return this.afterquote(t);case Kn:return this.number(t);case ei:return}};ai.prototype.afterquote=function(t){if(t==='"'){this.word+='"';this.state=$n;return}if(oi.test(t)){this.word=this.word.trim();this.afterItem(t);return}throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)};ai.prototype.afterItem=function(t){if(t===","){if(this.word!==null){this.currentObject.push(this.word)}this.word=null;this.state=Jn;return}if(t==="]"){this.level--;if(this.word!==null){this.currentObject.push(this.word);this.word=null}this.state=Jn;this.currentObject=this.stack.pop();if(!this.currentObject){this.state=ei}return}};ai.prototype.number=function(t){if(si.test(t)){this.word+=t;return}if(oi.test(t)){this.word=parseFloat(this.word);this.afterItem(t);return}throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)};ai.prototype.quoted=function(t){if(t==='"'){this.state=ti;return}this.word+=t;return};ai.prototype.keyword=function(t){if(ii.test(t)){this.word+=t;return}if(t==="["){var e=[];e.push(this.word);this.level++;if(this.root===null){this.root=e}else{this.currentObject.push(e)}this.stack.push(this.currentObject);this.currentObject=e;this.state=Jn;return}if(oi.test(t)){this.afterItem(t);return}throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place)};ai.prototype.neutral=function(t){if(ni.test(t)){this.word=t;this.state=Qn;return}if(t==='"'){this.word="";this.state=$n;return}if(si.test(t)){this.word=t;this.state=Kn;return}if(oi.test(t)){this.afterItem(t);return}throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place)};ai.prototype.output=function(){while(this.place<this.text.length){this.readCharicter()}if(this.state===ei){return this.root}throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function ui(t){var e=new ai(t);return e.output()}function li(t,e,r){if(Array.isArray(e)){r.unshift(e);e=null}var n=e?{}:t;var i=r.reduce(function(t,e){ci(e,t);return t},n);if(e){t[e]=i}}function ci(t,e){if(!Array.isArray(t)){e[t]=true;return}var r=t.shift();if(r==="PARAMETER"){r=t.shift()}if(t.length===1){if(Array.isArray(t[0])){e[r]={};ci(t[0],e[r]);return}e[r]=t[0];return}if(!t.length){e[r]=true;return}if(r==="TOWGS84"){e[r]=t;return}if(r==="AXIS"){if(!(r in e)){e[r]=[]}e[r].push(t);return}if(!Array.isArray(r)){e[r]={}}var n;switch(r){case"UNIT":case"PRIMEM":case"VERT_DATUM":e[r]={name:t[0].toLowerCase(),convert:t[1]};if(t.length===3){ci(t[2],e[r])}return;case"SPHEROID":case"ELLIPSOID":e[r]={name:t[0],a:t[1],rf:t[2]};if(t.length===4){ci(t[3],e[r])}return;case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":t[0]=["name",t[0]];li(e,r,t);return;default:n=-1;while(++n<t.length){if(!Array.isArray(t[n])){return ci(t,e[r])}}return li(e,r,t)}}var hi=.017453292519943295;function fi(t,e){var r=e[0];var n=e[1];if(!(r in t)&&n in t){t[r]=t[n];if(e.length===3){t[r]=e[2](t[r])}}}function pi(t){return t*hi}function di(t){if(t.type==="GEOGCS"){t.projName="longlat"}else if(t.type==="LOCAL_CS"){t.projName="identity";t.local=true}else{if(typeof t.PROJECTION==="object"){t.projName=Object.keys(t.PROJECTION)[0]}else{t.projName=t.PROJECTION}}if(t.AXIS){var e="";for(var r=0,n=t.AXIS.length;r<n;++r){var i=[t.AXIS[r][0].toLowerCase(),t.AXIS[r][1].toLowerCase()];if(i[0].indexOf("north")!==-1||(i[0]==="y"||i[0]==="lat")&&i[1]==="north"){e+="n"}else if(i[0].indexOf("south")!==-1||(i[0]==="y"||i[0]==="lat")&&i[1]==="south"){e+="s"}else if(i[0].indexOf("east")!==-1||(i[0]==="x"||i[0]==="lon")&&i[1]==="east"){e+="e"}else if(i[0].indexOf("west")!==-1||(i[0]==="x"||i[0]==="lon")&&i[1]==="west"){e+="w"}}if(e.length===2){e+="u"}if(e.length===3){t.axis=e}}if(t.UNIT){t.units=t.UNIT.name.toLowerCase();if(t.units==="metre"){t.units="meter"}if(t.UNIT.convert){if(t.type==="GEOGCS"){if(t.DATUM&&t.DATUM.SPHEROID){t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a}}else{t.to_meter=t.UNIT.convert}}}var o=t.GEOGCS;if(t.type==="GEOGCS"){o=t}if(o){if(o.DATUM){t.datumCode=o.DATUM.name.toLowerCase()}else{t.datumCode=o.name.toLowerCase()}if(t.datumCode.slice(0,2)==="d_"){t.datumCode=t.datumCode.slice(2)}if(t.datumCode==="new_zealand_geodetic_datum_1949"||t.datumCode==="new_zealand_1949"){t.datumCode="nzgd49"}if(t.datumCode==="wgs_1984"||t.datumCode==="world_geodetic_system_1984"){if(t.PROJECTION==="Mercator_Auxiliary_Sphere"){t.sphere=true}t.datumCode="wgs84"}if(t.datumCode.slice(-6)==="_ferro"){t.datumCode=t.datumCode.slice(0,-6)}if(t.datumCode.slice(-8)==="_jakarta"){t.datumCode=t.datumCode.slice(0,-8)}if(~t.datumCode.indexOf("belge")){t.datumCode="rnb72"}if(o.DATUM&&o.DATUM.SPHEROID){t.ellps=o.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk");if(t.ellps.toLowerCase().slice(0,13)==="international"){t.ellps="intl"}t.a=o.DATUM.SPHEROID.a;t.rf=parseFloat(o.DATUM.SPHEROID.rf,10)}if(o.DATUM&&o.DATUM.TOWGS84){t.datum_params=o.DATUM.TOWGS84}if(~t.datumCode.indexOf("osgb_1936")){t.datumCode="osgb36"}if(~t.datumCode.indexOf("osni_1952")){t.datumCode="osni52"}if(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965")){t.datumCode="ire65"}if(t.datumCode==="ch1903+"){t.datumCode="ch1903"}if(~t.datumCode.indexOf("israel")){t.datumCode="isr93"}}if(t.b&&!isFinite(t.b)){t.b=t.a}function s(e){var r=t.to_meter||1;return e*r}var a=function(e){return fi(t,e)};var u=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",pi],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",pi],["x0","false_easting",s],["y0","false_northing",s],["long0","central_meridian",pi],["lat0","latitude_of_origin",pi],["lat0","standard_parallel_1",pi],["lat1","standard_parallel_1",pi],["lat2","standard_parallel_2",pi],["azimuth","Azimuth"],["alpha","azimuth",pi],["srsCode","name"]];u.forEach(a);if(!t.long0&&t.longc&&(t.projName==="Albers_Conic_Equal_Area"||t.projName==="Lambert_Azimuthal_Equal_Area")){t.long0=t.longc}if(!t.lat_ts&&t.lat1&&(t.projName==="Stereographic_South_Pole"||t.projName==="Polar Stereographic (variant B)")){t.lat0=pi(t.lat1>0?90:-90);t.lat_ts=t.lat1}}var yi=function(t){var e=Yn(t);var r=e.shift();var n=e.shift();e.unshift(["name",n]);e.unshift(["type",r]);var i={};ci(e,i);di(i);return i};function vi(t){var e=this;if(arguments.length===2){var r=arguments[1];if(typeof r==="string"){if(r.charAt(0)==="+"){vi[t]=Zn(arguments[1])}else{vi[t]=yi(arguments[1])}}else{vi[t]=r}}else if(arguments.length===1){if(Array.isArray(t)){return t.map(function(t){if(Array.isArray(t)){vi.apply(e,t)}else{vi(t)}})}else if(typeof t==="string"){if(t in vi){return vi[t]}}else if("EPSG"in t){vi["EPSG:"+t.EPSG]=t}else if("ESRI"in t){vi["ESRI:"+t.ESRI]=t}else if("IAU2000"in t){vi["IAU2000:"+t.IAU2000]=t}else{console.log(t)}return}}Cn(vi);var gi=vi;function mi(t){return typeof t==="string"}function _i(t){return t in gi}var bi=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function xi(t){return bi.some(function(e){return t.indexOf(e)>-1})}var Si=["3857","900913","3785","102113"];function wi(t){var e=Xn(t,"authority");if(!e){return}var r=Xn(e,"epsg");return r&&Si.indexOf(r)>-1}function Ci(t){var e=Xn(t,"extension");if(!e){return}return Xn(e,"proj4")}function Ii(t){return t[0]==="+"}function Ei(t){if(mi(t)){if(_i(t)){return gi[t]}if(xi(t)){var e=yi(t);if(wi(e)){return gi["EPSG:3857"]}var r=Ci(e);if(r){return Zn(r)}return e}if(Ii(t)){return Zn(t)}}else{return t}}var Pi=Ei;var Mi=function(t,e){t=t||{};var r,n;if(!e){return t}for(n in e){r=e[n];if(r!==undefined){t[n]=r}}return t};var Li=function(t,e,r){var n=t*e;return r/Math.sqrt(1-n*n)};var Ni=function(t){return t<0?-1:1};var Ti=function(t){return Math.abs(t)<=zn?t:t-Ni(t)*qn};var Oi=function(t,e,r){var n=t*r;var i=.5*t;n=Math.pow((1-n)/(1+n),i);return Math.tan(.5*(Rn-e))/n};var Ai=function(t,e){var r=.5*t;var n,i;var o=Rn-2*Math.atan(e);for(var s=0;s<=15;s++){n=t*Math.sin(o);i=Rn-2*Math.atan(e*Math.pow((1-n)/(1+n),r))-o;o+=i;if(Math.abs(i)<=1e-10){return o}}return-9999};function Ri(){var t=this.b/this.a;this.es=1-t*t;if(!("x0"in this)){this.x0=0}if(!("y0"in this)){this.y0=0}this.e=Math.sqrt(this.es);if(this.lat_ts){if(this.sphere){this.k0=Math.cos(this.lat_ts)}else{this.k0=Li(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))}}else{if(!this.k0){if(this.k){this.k0=this.k}else{this.k0=1}}}}function Fi(t){var e=t.x;var r=t.y;if(r*Bn>90&&r*Bn<-90&&e*Bn>180&&e*Bn<-180){return null}var n,i;if(Math.abs(Math.abs(r)-Rn)<=jn){return null}else{if(this.sphere){n=this.x0+this.a*this.k0*Ti(e-this.long0);i=this.y0+this.a*this.k0*Math.log(Math.tan(Un+.5*r))}else{var o=Math.sin(r);var s=Oi(this.e,r,o);n=this.x0+this.a*this.k0*Ti(e-this.long0);i=this.y0-this.a*this.k0*Math.log(s)}t.x=n;t.y=i;return t}}function Di(t){var e=t.x-this.x0;var r=t.y-this.y0;var n,i;if(this.sphere){i=Rn-2*Math.atan(Math.exp(-r/(this.a*this.k0)))}else{var o=Math.exp(-r/(this.a*this.k0));i=Ai(this.e,o);if(i===-9999){return null}}n=Ti(this.long0+e/(this.a*this.k0));t.x=n;t.y=i;return t}var ki=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"];var ji={init:Ri,forward:Fi,inverse:Di,names:ki};function Gi(){}function Bi(t){return t}var Ui=["longlat","identity"];var qi={init:Gi,forward:Bi,inverse:Bi,names:Ui};var zi=[ji,qi];var Vi={};var Wi=[];function Hi(t,e){var r=Wi.length;if(!t.names){console.log(e);return true}Wi[r]=t;t.names.forEach(function(t){Vi[t.toLowerCase()]=r});return this}function Xi(t){if(!t){return false}var e=t.toLowerCase();if(typeof Vi[e]!=="undefined"&&Wi[Vi[e]]){return Wi[Vi[e]]}}function Zi(){zi.forEach(Hi)}var Yi={start:Zi,add:Hi,get:Xi};var Ji={};Ji.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};Ji.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};Ji.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};Ji.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};Ji.airy={a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"};Ji.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};Ji.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};Ji.mod_airy={a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"};Ji.andrae={a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};Ji.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};Ji.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};Ji.bessel={a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"};Ji.bess_nam={a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};Ji.clrk66={a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"};Ji.clrk80={a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."};Ji.clrk58={a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"};Ji.CPM={a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};Ji.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};Ji.engelis={a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"};Ji.evrst30={a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"};Ji.evrst48={a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"};Ji.evrst56={a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"};Ji.evrst69={a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"};Ji.evrstSS={a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};Ji.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};Ji.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};Ji.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};Ji.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};Ji.hough={a:6378270,rf:297,ellipseName:"Hough"};Ji.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};Ji.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};Ji.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};Ji.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};Ji.new_intl={a:6378157.5,b:6356772.2,ellipseName:"New International 1967"};Ji.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};Ji.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};Ji.SEasia={a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"};Ji.walbeck={a:6376896,b:6355834.8467,ellipseName:"Walbeck"};Ji.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};Ji.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};Ji.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var Qi=Ji.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};Ji.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function Ki(t,e,r,n){var i=t*t;var o=e*e;var s=(i-o)/i;var a=0;if(n){t*=1-s*(Fn+s*(Dn+s*kn));i=t*t;s=0}else{a=Math.sqrt(s)}var u=(i-o)/o;return{es:s,e:a,ep2:u}}function $i(t,e,r,n,i){if(!t){var o=Xn(Ji,n);if(!o){o=Qi}t=o.a;e=o.b;r=o.rf}if(r&&!e){e=(1-1/r)*t}if(r===0||Math.abs(t-e)<jn){i=true;e=t}return{a:t,b:e,rf:r,sphere:i}}var to={};to.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"};to.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"};to.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"};to.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"};to.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"};to.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"};to.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"};to.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"};to.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"};to.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"};to.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"};to.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"};to.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"};to.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"};to.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"};to.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"};to.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};function eo(t,e,r,n,i,o,s){var a={};if(t===undefined||t==="none"){a.datum_type=Ln}else{a.datum_type=Mn}if(e){a.datum_params=e.map(parseFloat);if(a.datum_params[0]!==0||a.datum_params[1]!==0||a.datum_params[2]!==0){a.datum_type=In}if(a.datum_params.length>3){if(a.datum_params[3]!==0||a.datum_params[4]!==0||a.datum_params[5]!==0||a.datum_params[6]!==0){a.datum_type=En;a.datum_params[3]*=An;a.datum_params[4]*=An;a.datum_params[5]*=An;a.datum_params[6]=a.datum_params[6]/1e6+1}}}if(s){a.datum_type=Pn;a.grids=s}a.a=r;a.b=n;a.es=i;a.ep2=o;return a}var ro=eo;var no={};function io(t,e){var r=new DataView(e);var n=uo(r);var i=lo(r,n);if(i.nSubgrids>1){console.log("Only single NTv2 subgrids are currently supported, subsequent sub grids are ignored")}var o=ho(r,i,n);var s={header:i,subgrids:o};no[t]=s;return s}function oo(t){if(t===undefined){return null}var e=t.split(",");return e.map(so)}function so(t){if(t.length===0){return null}var e=t[0]==="@";if(e){t=t.slice(1)}if(t==="null"){return{name:"null",mandatory:!e,grid:null,isNull:true}}return{name:t,mandatory:!e,grid:no[t]||null,isNull:false}}function ao(t){return t/3600*Math.PI/180}function uo(t){var e=t.getInt32(8,false);if(e===11){return false}e=t.getInt32(8,true);if(e!==11){console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian")}return true}function lo(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:co(t,56,56+8).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}function co(t,e,r){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,r)))}function ho(t,e,r){var n=176;var i=[];for(var o=0;o<e.nSubgrids;o++){var s=po(t,n,r);var a=yo(t,n,s,r);var u=Math.round(1+(s.upperLongitude-s.lowerLongitude)/s.longitudeInterval);var l=Math.round(1+(s.upperLatitude-s.lowerLatitude)/s.latitudeInterval);i.push({ll:[ao(s.lowerLongitude),ao(s.lowerLatitude)],del:[ao(s.longitudeInterval),ao(s.latitudeInterval)],lim:[u,l],count:s.gridNodeCount,cvs:fo(a)})}return i}function fo(t){return t.map(function(t){return[ao(t.longitudeShift),ao(t.latitudeShift)]})}function po(t,e,r){return{name:co(t,e+8,e+16).trim(),parent:co(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,r),upperLatitude:t.getFloat64(e+88,r),lowerLongitude:t.getFloat64(e+104,r),upperLongitude:t.getFloat64(e+120,r),latitudeInterval:t.getFloat64(e+136,r),longitudeInterval:t.getFloat64(e+152,r),gridNodeCount:t.getInt32(e+168,r)}}function yo(t,e,r,n){var i=e+176;var o=16;var s=[];for(var a=0;a<r.gridNodeCount;a++){var u={latitudeShift:t.getFloat32(i+a*o,n),longitudeShift:t.getFloat32(i+a*o+4,n),latitudeAccuracy:t.getFloat32(i+a*o+8,n),longitudeAccuracy:t.getFloat32(i+a*o+12,n)};s.push(u)}return s}function vo(t,e){if(!(this instanceof vo)){return new vo(t)}e=e||function(t){if(t){throw t}};var r=Pi(t);if(typeof r!=="object"){e(t);return}var n=vo.projections.get(r.projName);if(!n){e(t);return}if(r.datumCode&&r.datumCode!=="none"){var i=Xn(to,r.datumCode);if(i){r.datum_params=r.datum_params||(i.towgs84?i.towgs84.split(","):null);r.ellps=i.ellipse;r.datumName=i.datumName?i.datumName:r.datumCode}}r.k0=r.k0||1;r.axis=r.axis||"enu";r.ellps=r.ellps||"wgs84";r.lat1=r.lat1||r.lat0;var o=$i(r.a,r.b,r.rf,r.ellps,r.sphere);var s=Ki(o.a,o.b,o.rf,r.R_A);var a=oo(r.nadgrids);var u=r.datum||ro(r.datumCode,r.datum_params,o.a,o.b,s.es,s.ep2,a);Mi(this,r);Mi(this,n);this.a=o.a;this.b=o.b;this.rf=o.rf;this.sphere=o.sphere;this.es=s.es;this.e=s.e;this.ep2=s.ep2;this.datum=u;this.init();e(null,this)}vo.projections=Yi;vo.projections.start();var go=vo;function mo(t,e){if(t.datum_type!==e.datum_type){return false}else if(t.a!==e.a||Math.abs(t.es-e.es)>5e-11){return false}else if(t.datum_type===In){return t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]}else if(t.datum_type===En){return t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6]}else{return true}}function _o(t,e,r){var n=t.x;var i=t.y;var o=t.z?t.z:0;var s;var a;var u;var l;if(i<-Rn&&i>-1.001*Rn){i=-Rn}else if(i>Rn&&i<1.001*Rn){i=Rn}else if(i<-Rn){return{x:-Infinity,y:-Infinity,z:t.z}}else if(i>Rn){return{x:Infinity,y:Infinity,z:t.z}}if(n>Math.PI){n-=2*Math.PI}a=Math.sin(i);l=Math.cos(i);u=a*a;s=r/Math.sqrt(1-e*u);return{x:(s+o)*l*Math.cos(n),y:(s+o)*l*Math.sin(n),z:(s*(1-e)+o)*a}}function bo(t,e,r,n){var i=1e-12;var o=i*i;var s=30;var a;var u;var l;var c;var h;var f;var p;var d;var y;var v;var g;var m;var _;var b=t.x;var x=t.y;var S=t.z?t.z:0;var w;var C;var I;a=Math.sqrt(b*b+x*x);u=Math.sqrt(b*b+x*x+S*S);if(a/r<i){w=0;if(u/r<i){C=Rn;I=-n;return{x:t.x,y:t.y,z:t.z}}}else{w=Math.atan2(x,b)}l=S/u;c=a/u;h=1/Math.sqrt(1-e*(2-e)*c*c);d=c*(1-e)*h;y=l*h;_=0;do{_++;p=r/Math.sqrt(1-e*y*y);I=a*d+S*y-p*(1-e*y*y);f=e*p/(p+I);h=1/Math.sqrt(1-f*(2-f)*c*c);v=c*(1-f)*h;g=l*h;m=g*d-v*y;d=v;y=g}while(m*m>o&&_<s);C=Math.atan(g/Math.abs(v));return{x:w,y:C,z:I}}function xo(t,e,r){if(e===In){return{x:t.x+r[0],y:t.y+r[1],z:t.z+r[2]}}else if(e===En){var n=r[0];var i=r[1];var o=r[2];var s=r[3];var a=r[4];var u=r[5];var l=r[6];return{x:l*(t.x-u*t.y+a*t.z)+n,y:l*(u*t.x+t.y-s*t.z)+i,z:l*(-a*t.x+s*t.y+t.z)+o}}}function So(t,e,r){if(e===In){return{x:t.x-r[0],y:t.y-r[1],z:t.z-r[2]}}else if(e===En){var n=r[0];var i=r[1];var o=r[2];var s=r[3];var a=r[4];var u=r[5];var l=r[6];var c=(t.x-n)/l;var h=(t.y-i)/l;var f=(t.z-o)/l;return{x:c+u*h-a*f,y:-u*c+h+s*f,z:a*c-s*h+f}}}function wo(t){return t===In||t===En}var Co=function(t,e,r){if(mo(t,e)){return r}if(t.datum_type===Ln||e.datum_type===Ln){return r}var n=t.a;var i=t.es;if(t.datum_type===Pn){var o=Io(t,false,r);if(o!==0){return undefined}n=Nn;i=On}var s=e.a;var a=e.b;var u=e.es;if(e.datum_type===Pn){s=Nn;a=Tn;u=On}if(i===u&&n===s&&!wo(t.datum_type)&&!wo(e.datum_type)){return r}r=_o(r,i,n);if(wo(t.datum_type)){r=xo(r,t.datum_type,t.datum_params)}if(wo(e.datum_type)){r=So(r,e.datum_type,e.datum_params)}r=bo(r,u,s,a);if(e.datum_type===Pn){var l=Io(e,true,r);if(l!==0){return undefined}}return r};function Io(t,e,r){if(t.grids===null||t.grids.length===0){console.log("Grid shift grids not found");return-1}var n={x:-r.x,y:r.y};var i={x:Number.NaN,y:Number.NaN};var o=false;var s=[];for(var a=0;a<t.grids.length;a++){var u=t.grids[a];s.push(u.name);if(u.isNull){i=n;break}o=u.mandatory;if(u.grid===null){if(u.mandatory){console.log("Unable to find mandatory grid '"+u.name+"'");return-1}continue}var l=u.grid.subgrids[0];var c=(Math.abs(l.del[1])+Math.abs(l.del[0]))/1e4;var h=l.ll[0]-c;var f=l.ll[1]-c;var p=l.ll[0]+(l.lim[0]-1)*l.del[0]+c;var d=l.ll[1]+(l.lim[1]-1)*l.del[1]+c;if(f>n.y||h>n.x||d<n.y||p<n.x){continue}i=Eo(n,e,l);if(!isNaN(i.x)){break}}if(isNaN(i.x)){console.log("Failed to find a grid shift table for location '"+-n.x*Bn+" "+n.y*Bn+" tried: '"+s+"'");return-1}r.x=-i.x;r.y=i.y;return 0}function Eo(t,e,r){var n={x:Number.NaN,y:Number.NaN};if(isNaN(t.x)){return n}var i={x:t.x,y:t.y};i.x-=r.ll[0];i.y-=r.ll[1];i.x=Ti(i.x-Math.PI)+Math.PI;var o=Po(i,r);if(e){if(isNaN(o.x)){return n}o.x=i.x-o.x;o.y=i.y-o.y;var s=9,a=1e-12;var u,l;do{l=Po(o,r);if(isNaN(l.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}u={x:i.x-(l.x+o.x),y:i.y-(l.y+o.y)};o.x+=u.x;o.y+=u.y}while(s--&&Math.abs(u.x)>a&&Math.abs(u.y)>a);if(s<0){console.log("Inverse grid shift iterator failed to converge.");return n}n.x=Ti(o.x+r.ll[0]);n.y=o.y+r.ll[1]}else{if(!isNaN(o.x)){n.x=t.x+o.x;n.y=t.y+o.y}}return n}function Po(t,e){var r={x:t.x/e.del[0],y:t.y/e.del[1]};var n={x:Math.floor(r.x),y:Math.floor(r.y)};var i={x:r.x-1*n.x,y:r.y-1*n.y};var o={x:Number.NaN,y:Number.NaN};var s;if(n.x<0||n.x>=e.lim[0]){return o}if(n.y<0||n.y>=e.lim[1]){return o}s=n.y*e.lim[0]+n.x;var a={x:e.cvs[s][0],y:e.cvs[s][1]};s++;var u={x:e.cvs[s][0],y:e.cvs[s][1]};s+=e.lim[0];var l={x:e.cvs[s][0],y:e.cvs[s][1]};s--;var c={x:e.cvs[s][0],y:e.cvs[s][1]};var h=i.x*i.y,f=i.x*(1-i.y),p=(1-i.x)*(1-i.y),d=(1-i.x)*i.y;o.x=p*a.x+f*u.x+d*c.x+h*l.x;o.y=p*a.y+f*u.y+d*c.y+h*l.y;return o}var Mo=function(t,e,r){var n=r.x,i=r.y,o=r.z||0;var s,a,u;var l={};for(u=0;u<3;u++){if(e&&u===2&&r.z===undefined){continue}if(u===0){s=n;if("ew".indexOf(t.axis[u])!==-1){a="x"}else{a="y"}}else if(u===1){s=i;if("ns".indexOf(t.axis[u])!==-1){a="y"}else{a="x"}}else{s=o;a="z"}switch(t.axis[u]){case"e":l[a]=s;break;case"w":l[a]=-s;break;case"n":l[a]=s;break;case"s":l[a]=-s;break;case"u":if(r[a]!==undefined){l.z=s}break;case"d":if(r[a]!==undefined){l.z=-s}break;default:return null}}return l};var Lo=function(t){var e={x:t[0],y:t[1]};if(t.length>2){e.z=t[2]}if(t.length>3){e.m=t[3]}return e};var No=function(t){To(t.x);To(t.y)};function To(t){if(typeof Number.isFinite==="function"){if(Number.isFinite(t)){return}throw new TypeError("coordinates must be finite numbers")}if(typeof t!=="number"||t!==t||!isFinite(t)){throw new TypeError("coordinates must be finite numbers")}}function Oo(t,e){return(t.datum.datum_type===In||t.datum.datum_type===En)&&e.datumCode!=="WGS84"||(e.datum.datum_type===In||e.datum.datum_type===En)&&t.datumCode!=="WGS84"}function Ao(t,e,r,n){var i;if(Array.isArray(r)){r=Lo(r)}No(r);if(t.datum&&e.datum&&Oo(t,e)){i=new go("WGS84");r=Ao(t,i,r,n);t=i}if(n&&t.axis!=="enu"){r=Mo(t,false,r)}if(t.projName==="longlat"){r={x:r.x*Gn,y:r.y*Gn,z:r.z||0}}else{if(t.to_meter){r={x:r.x*t.to_meter,y:r.y*t.to_meter,z:r.z||0}}r=t.inverse(r);if(!r){return}}if(t.from_greenwich){r.x+=t.from_greenwich}r=Co(t.datum,e.datum,r);if(!r){return}if(e.from_greenwich){r={x:r.x-e.from_greenwich,y:r.y,z:r.z||0}}if(e.projName==="longlat"){r={x:r.x*Bn,y:r.y*Bn,z:r.z||0}}else{r=e.forward(r);if(e.to_meter){r={x:r.x/e.to_meter,y:r.y/e.to_meter,z:r.z||0}}}if(n&&e.axis!=="enu"){return Mo(e,true,r)}return r}var Ro=go("WGS84");function Fo(t,e,r,n){var i,o,s;if(Array.isArray(r)){i=Ao(t,e,r,n)||{x:NaN,y:NaN};if(r.length>2){if(typeof t.name!=="undefined"&&t.name==="geocent"||typeof e.name!=="undefined"&&e.name==="geocent"){if(typeof i.z==="number"){return[i.x,i.y,i.z].concat(r.splice(3))}else{return[i.x,i.y,r[2]].concat(r.splice(3))}}else{return[i.x,i.y].concat(r.splice(2))}}else{return[i.x,i.y]}}else{o=Ao(t,e,r,n);s=Object.keys(r);if(s.length===2){return o}s.forEach(function(n){if(typeof t.name!=="undefined"&&t.name==="geocent"||typeof e.name!=="undefined"&&e.name==="geocent"){if(n==="x"||n==="y"||n==="z"){return}}else{if(n==="x"||n==="y"){return}}o[n]=r[n]});return o}}function Do(t){if(t instanceof go){return t}if(t.oProj){return t.oProj}return go(t)}function ko(t,e,r){t=Do(t);var n=false;var i;if(typeof e==="undefined"){e=t;t=Ro;n=true}else if(typeof e.x!=="undefined"||Array.isArray(e)){r=e;e=t;t=Ro;n=true}e=Do(e);if(r){return Fo(t,e,r)}else{i={forward:function(r,n){return Fo(t,e,r,n)},inverse:function(r,n){return Fo(e,t,r,n)}};if(n){i.oProj=e}return i}}var jo=ko;var Go=6;var Bo="AJSAJS";var Uo="AFAFAF";var qo=65;var zo=73;var Vo=79;var Wo=86;var Ho=90;var Xo={forward:Zo,inverse:Yo,toPoint:Jo};function Zo(t,e){e=e||5;return rs($o({lat:t[1],lon:t[0]}),e)}function Yo(t){var e=ts(ss(t.toUpperCase()));if(e.lat&&e.lon){return[e.lon,e.lat,e.lon,e.lat]}return[e.left,e.bottom,e.right,e.top]}function Jo(t){var e=ts(ss(t.toUpperCase()));if(e.lat&&e.lon){return[e.lon,e.lat]}return[(e.left+e.right)/2,(e.top+e.bottom)/2]}function Qo(t){return t*(Math.PI/180)}function Ko(t){return 180*(t/Math.PI)}function $o(t){var e=t.lat;var r=t.lon;var n=6378137;var i=.00669438;var o=.9996;var s;var a;var u,l,c,h,f;var p=Qo(e);var d=Qo(r);var y;var v;v=Math.floor((r+180)/6)+1;if(r===180){v=60}if(e>=56&&e<64&&r>=3&&r<12){v=32}if(e>=72&&e<84){if(r>=0&&r<9){v=31}else if(r>=9&&r<21){v=33}else if(r>=21&&r<33){v=35}else if(r>=33&&r<42){v=37}}s=(v-1)*6-180+3;y=Qo(s);a=i/(1-i);u=n/Math.sqrt(1-i*Math.sin(p)*Math.sin(p));l=Math.tan(p)*Math.tan(p);c=a*Math.cos(p)*Math.cos(p);h=Math.cos(p)*(d-y);f=n*((1-i/4-3*i*i/64-5*i*i*i/256)*p-(3*i/8+3*i*i/32+45*i*i*i/1024)*Math.sin(2*p)+(15*i*i/256+45*i*i*i/1024)*Math.sin(4*p)-35*i*i*i/3072*Math.sin(6*p));var g=o*u*(h+(1-l+c)*h*h*h/6+(5-18*l+l*l+72*c-58*a)*h*h*h*h*h/120)+5e5;var m=o*(f+u*Math.tan(p)*(h*h/2+(5-l+9*c+4*c*c)*h*h*h*h/24+(61-58*l+l*l+600*c-330*a)*h*h*h*h*h*h/720));if(e<0){m+=1e7}return{northing:Math.round(m),easting:Math.round(g),zoneNumber:v,zoneLetter:es(e)}}function ts(t){var e=t.northing;var r=t.easting;var n=t.zoneLetter;var i=t.zoneNumber;if(i<0||i>60){return null}var o=.9996;var s=6378137;var a=.00669438;var u;var l=(1-Math.sqrt(1-a))/(1+Math.sqrt(1-a));var c,h,f,p,d,y;var v;var g,m;var _=r-5e5;var b=e;if(n<"N"){b-=1e7}v=(i-1)*6-180+3;u=a/(1-a);y=b/o;g=y/(s*(1-a/4-3*a*a/64-5*a*a*a/256));m=g+(3*l/2-27*l*l*l/32)*Math.sin(2*g)+(21*l*l/16-55*l*l*l*l/32)*Math.sin(4*g)+151*l*l*l/96*Math.sin(6*g);c=s/Math.sqrt(1-a*Math.sin(m)*Math.sin(m));h=Math.tan(m)*Math.tan(m);f=u*Math.cos(m)*Math.cos(m);p=s*(1-a)/Math.pow(1-a*Math.sin(m)*Math.sin(m),1.5);d=_/(c*o);var x=m-c*Math.tan(m)/p*(d*d/2-(5+3*h+10*f-4*f*f-9*u)*d*d*d*d/24+(61+90*h+298*f+45*h*h-252*u-3*f*f)*d*d*d*d*d*d/720);x=Ko(x);var S=(d-(1+2*h+f)*d*d*d/6+(5-2*f+28*h-3*f*f+8*u+24*h*h)*d*d*d*d*d/120)/Math.cos(m);S=v+Ko(S);var w;if(t.accuracy){var C=ts({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});w={top:C.lat,right:C.lon,bottom:x,left:S}}else{w={lat:x,lon:S}}return w}function es(t){var e="Z";if(84>=t&&t>=72){e="X"}else if(72>t&&t>=64){e="W"}else if(64>t&&t>=56){e="V"}else if(56>t&&t>=48){e="U"}else if(48>t&&t>=40){e="T"}else if(40>t&&t>=32){e="S"}else if(32>t&&t>=24){e="R"}else if(24>t&&t>=16){e="Q"}else if(16>t&&t>=8){e="P"}else if(8>t&&t>=0){e="N"}else if(0>t&&t>=-8){e="M"}else if(-8>t&&t>=-16){e="L"}else if(-16>t&&t>=-24){e="K"}else if(-24>t&&t>=-32){e="J"}else if(-32>t&&t>=-40){e="H"}else if(-40>t&&t>=-48){e="G"}else if(-48>t&&t>=-56){e="F"}else if(-56>t&&t>=-64){e="E"}else if(-64>t&&t>=-72){e="D"}else if(-72>t&&t>=-80){e="C"}return e}function rs(t,e){var r="00000"+t.easting,n="00000"+t.northing;return t.zoneNumber+t.zoneLetter+ns(t.easting,t.northing,t.zoneNumber)+r.substr(r.length-5,e)+n.substr(n.length-5,e)}function ns(t,e,r){var n=is(r);var i=Math.floor(t/1e5);var o=Math.floor(e/1e5)%20;return os(i,o,n)}function is(t){var e=t%Go;if(e===0){e=Go}return e}function os(t,e,r){var n=r-1;var i=Bo.charCodeAt(n);var o=Uo.charCodeAt(n);var s=i+t-1;var a=o+e;var u=false;if(s>Ho){s=s-Ho+qo-1;u=true}if(s===zo||i<zo&&s>zo||(s>zo||i<zo)&&u){s++}if(s===Vo||i<Vo&&s>Vo||(s>Vo||i<Vo)&&u){s++;if(s===zo){s++}}if(s>Ho){s=s-Ho+qo-1}if(a>Wo){a=a-Wo+qo-1;u=true}else{u=false}if(a===zo||o<zo&&a>zo||(a>zo||o<zo)&&u){a++}if(a===Vo||o<Vo&&a>Vo||(a>Vo||o<Vo)&&u){a++;if(a===zo){a++}}if(a>Wo){a=a-Wo+qo-1}var l=String.fromCharCode(s)+String.fromCharCode(a);return l}function ss(t){if(t&&t.length===0){throw"MGRSPoint coverting from nothing"}var e=t.length;var r=null;var n="";var i;var o=0;while(!/[A-Z]/.test(i=t.charAt(o))){if(o>=2){throw"MGRSPoint bad conversion from: "+t}n+=i;o++}var s=parseInt(n,10);if(o===0||o+3>e){throw"MGRSPoint bad conversion from: "+t}var a=t.charAt(o++);if(a<="A"||a==="B"||a==="Y"||a>="Z"||a==="I"||a==="O"){throw"MGRSPoint zone letter "+a+" not handled: "+t}r=t.substring(o,o+=2);var u=is(s);var l=as(r.charAt(0),u);var c=us(r.charAt(1),u);while(c<ls(a)){c+=2e6}var h=e-o;if(h%2!==0){throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t}var f=h/2;var p=0;var d=0;var y,v,g,m,_;if(f>0){y=1e5/Math.pow(10,f);v=t.substring(o,o+f);p=parseFloat(v)*y;g=t.substring(o+f);d=parseFloat(g)*y}m=p+l;_=d+c;return{easting:m,northing:_,zoneLetter:a,zoneNumber:s,accuracy:y}}function as(t,e){var r=Bo.charCodeAt(e-1);var n=1e5;var i=false;while(r!==t.charCodeAt(0)){r++;if(r===zo){r++}if(r===Vo){r++}if(r>Ho){if(i){throw"Bad character: "+t}r=qo;i=true}n+=1e5}return n}function us(t,e){if(t>"V"){throw"MGRSPoint given invalid Northing "+t}var r=Uo.charCodeAt(e-1);var n=0;var i=false;while(r!==t.charCodeAt(0)){r++;if(r===zo){r++}if(r===Vo){r++}if(r>Wo){if(i){throw"Bad character: "+t}r=qo;i=true}n+=1e5}return n}function ls(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0){return e}else{throw"Invalid zone letter: "+t}}function cs(t,e,r){if(!(this instanceof cs)){return new cs(t,e,r)}if(Array.isArray(t)){this.x=t[0];this.y=t[1];this.z=t[2]||0}else if(typeof t==="object"){this.x=t.x;this.y=t.y;this.z=t.z||0}else if(typeof t==="string"&&typeof e==="undefined"){var n=t.split(",");this.x=parseFloat(n[0],10);this.y=parseFloat(n[1],10);this.z=parseFloat(n[2],10)||0}else{this.x=t;this.y=e;this.z=r||0}console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}cs.fromMGRS=function(t){return new cs(Jo(t))};cs.prototype.toMGRS=function(t){return Zo([this.x,this.y],t)};var hs=cs;var fs=1;var ps=.25;var ds=.046875;var ys=.01953125;var vs=.01068115234375;var gs=.75;var ms=.46875;var _s=.013020833333333334;var bs=.007120768229166667;var xs=.3645833333333333;var Ss=.005696614583333333;var ws=.3076171875;var Cs=function(t){var e=[];e[0]=fs-t*(ps+t*(ds+t*(ys+t*vs)));e[1]=t*(gs-t*(ds+t*(ys+t*vs)));var r=t*t;e[2]=r*(ms-t*(_s+t*bs));r*=t;e[3]=r*(xs-t*Ss);e[4]=r*t*ws;return e};var Is=function(t,e,r,n){r*=e;e*=e;return n[0]*t-r*(n[1]+e*(n[2]+e*(n[3]+e*n[4])))};var Es=20;var Ps=function(t,e,r){var n=1/(1-e);var i=t;for(var o=Es;o;--o){var s=Math.sin(i);var a=1-e*s*s;a=(Is(i,s,Math.cos(i),r)-t)*(a*Math.sqrt(a))*n;i-=a;if(Math.abs(a)<jn){return i}}return i};function Ms(){this.x0=this.x0!==undefined?this.x0:0;this.y0=this.y0!==undefined?this.y0:0;this.long0=this.long0!==undefined?this.long0:0;this.lat0=this.lat0!==undefined?this.lat0:0;if(this.es){this.en=Cs(this.es);this.ml0=Is(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en)}}function Ls(t){var e=t.x;var r=t.y;var n=Ti(e-this.long0);var i;var o,s;var a=Math.sin(r);var u=Math.cos(r);if(!this.es){var l=u*Math.sin(n);if(Math.abs(Math.abs(l)-1)<jn){return 93}else{o=.5*this.a*this.k0*Math.log((1+l)/(1-l))+this.x0;s=u*Math.cos(n)/Math.sqrt(1-Math.pow(l,2));l=Math.abs(s);if(l>=1){if(l-1>jn){return 93}else{s=0}}else{s=Math.acos(s)}if(r<0){s=-s}s=this.a*this.k0*(s-this.lat0)+this.y0}}else{var c=u*n;var h=Math.pow(c,2);var f=this.ep2*Math.pow(u,2);var p=Math.pow(f,2);var d=Math.abs(u)>jn?Math.tan(r):0;var y=Math.pow(d,2);var v=Math.pow(y,2);i=1-this.es*Math.pow(a,2);c=c/Math.sqrt(i);var g=Is(r,a,u,this.en);o=this.a*(this.k0*c*(1+h/6*(1-y+f+h/20*(5-18*y+v+14*f-58*y*f+h/42*(61+179*v-v*y-479*y)))))+this.x0;s=this.a*(this.k0*(g-this.ml0+a*n*c/2*(1+h/12*(5-y+9*f+4*p+h/30*(61+v-58*y+270*f-330*y*f+h/56*(1385+543*v-v*y-3111*y))))))+this.y0}t.x=o;t.y=s;return t}function Ns(t){var e,r;var n,i;var o=(t.x-this.x0)*(1/this.a);var s=(t.y-this.y0)*(1/this.a);if(!this.es){var a=Math.exp(o/this.k0);var u=.5*(a-1/a);var l=this.lat0+s/this.k0;var c=Math.cos(l);e=Math.sqrt((1-Math.pow(c,2))/(1+Math.pow(u,2)));n=Math.asin(e);if(s<0){n=-n}if(u===0&&c===0){i=0}else{i=Ti(Math.atan2(u,c)+this.long0)}}else{e=this.ml0+s/this.k0;r=Ps(e,this.es,this.en);if(Math.abs(r)<Rn){var h=Math.sin(r);var f=Math.cos(r);var p=Math.abs(f)>jn?Math.tan(r):0;var d=this.ep2*Math.pow(f,2);var y=Math.pow(d,2);var v=Math.pow(p,2);var g=Math.pow(v,2);e=1-this.es*Math.pow(h,2);var m=o*Math.sqrt(e)/this.k0;var _=Math.pow(m,2);e=e*p;n=r-e*_/(1-this.es)*.5*(1-_/12*(5+3*v-9*d*v+d-4*y-_/30*(61+90*v-252*d*v+45*g+46*d-_/56*(1385+3633*v+4095*g+1574*g*v))));i=Ti(this.long0+m*(1-_/6*(1+2*v+d-_/20*(5+28*v+24*g+8*d*v+6*d-_/42*(61+662*v+1320*g+720*g*v))))/f)}else{n=Rn*Ni(s);i=0}}t.x=i;t.y=n;return t}var Ts=["Fast_Transverse_Mercator","Fast Transverse Mercator"];var Os={init:Ms,forward:Ls,inverse:Ns,names:Ts};var As=function(t){var e=Math.exp(t);e=(e-1/e)/2;return e};var Rs=function(t,e){t=Math.abs(t);e=Math.abs(e);var r=Math.max(t,e);var n=Math.min(t,e)/(r?r:1);return r*Math.sqrt(1+Math.pow(n,2))};var Fs=function(t){var e=1+t;var r=e-1;return r===0?t:t*Math.log(e)/r};var Ds=function(t){var e=Math.abs(t);e=Fs(e*(1+e/(Rs(1,e)+1)));return t<0?-e:e};var ks=function(t,e){var r=2*Math.cos(2*e);var n=t.length-1;var i=t[n];var o=0;var s;while(--n>=0){s=-o+r*i+t[n];o=i;i=s}return e+s*Math.sin(2*e)};var js=function(t,e){var r=2*Math.cos(e);var n=t.length-1;var i=t[n];var o=0;var s;while(--n>=0){s=-o+r*i+t[n];o=i;i=s}return Math.sin(e)*s};var Gs=function(t){var e=Math.exp(t);e=(e+1/e)/2;return e};var Bs=function(t,e,r){var n=Math.sin(e);var i=Math.cos(e);var o=As(r);var s=Gs(r);var a=2*i*s;var u=-2*n*o;var l=t.length-1;var c=t[l];var h=0;var f=0;var p=0;var d;var y;while(--l>=0){d=f;y=h;f=c;h=p;c=-d+a*f-u*h+t[l];p=-y+u*f+a*h}a=n*s;u=i*o;return[a*c-u*p,a*p+u*c]};function Us(){if(!this.approx&&(isNaN(this.es)||this.es<=0)){throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.')}if(this.approx){Os.init.apply(this);this.forward=Os.forward;this.inverse=Os.inverse}this.x0=this.x0!==undefined?this.x0:0;this.y0=this.y0!==undefined?this.y0:0;this.long0=this.long0!==undefined?this.long0:0;this.lat0=this.lat0!==undefined?this.lat0:0;this.cgb=[];this.cbg=[];this.utg=[];this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es));var e=t/(2-t);var r=e;this.cgb[0]=e*(2+e*(-2/3+e*(-2+e*(116/45+e*(26/45+e*(-2854/675))))));this.cbg[0]=e*(-2+e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725))))));r=r*e;this.cgb[1]=r*(7/3+e*(-8/5+e*(-227/45+e*(2704/315+e*(2323/945)))));this.cbg[1]=r*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945)))));r=r*e;this.cgb[2]=r*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835))));this.cbg[2]=r*(-26/15+e*(34/21+e*(8/5+e*(-12686/2835))));r=r*e;this.cgb[3]=r*(4279/630+e*(-332/35+e*(-399572/14175)));this.cbg[3]=r*(1237/630+e*(-12/5+e*(-24832/14175)));r=r*e;this.cgb[4]=r*(4174/315+e*(-144838/6237));this.cbg[4]=r*(-734/315+e*(109598/31185));r=r*e;this.cgb[5]=r*(601676/22275);this.cbg[5]=r*(444337/155925);r=Math.pow(e,2);this.Qn=this.k0/(1+e)*(1+r*(1/4+r*(1/64+r/256)));this.utg[0]=e*(-.5+e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800))))));this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800))))));this.utg[1]=r*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720)))));this.gtu[1]=r*(13/48+e*(-3/5+e*(557/1440+e*(281/630+e*(-1983433/1935360)))));r=r*e;this.utg[2]=r*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720))));this.gtu[2]=r*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440))));r=r*e;this.utg[3]=r*(-4397/161280+e*(11/504+e*(830251/7257600)));this.gtu[3]=r*(49561/161280+e*(-179/168+e*(6601661/7257600)));r=r*e;this.utg[4]=r*(-4583/161280+e*(108847/3991680));this.gtu[4]=r*(34729/80640+e*(-3418889/1995840));r=r*e;this.utg[5]=r*(-20648693/638668800);this.gtu[5]=r*(212378941/319334400);var n=ks(this.cbg,this.lat0);this.Zb=-this.Qn*(n+js(this.gtu,2*n))}function qs(t){var e=Ti(t.x-this.long0);var r=t.y;r=ks(this.cbg,r);var n=Math.sin(r);var i=Math.cos(r);var o=Math.sin(e);var s=Math.cos(e);r=Math.atan2(n,s*i);e=Math.atan2(o*i,Rs(n,i*s));e=Ds(Math.tan(e));var a=Bs(this.gtu,2*r,2*e);r=r+a[0];e=e+a[1];var u;var l;if(Math.abs(e)<=2.623395162778){u=this.a*(this.Qn*e)+this.x0;l=this.a*(this.Qn*r+this.Zb)+this.y0}else{u=Infinity;l=Infinity}t.x=u;t.y=l;return t}function zs(t){var e=(t.x-this.x0)*(1/this.a);var r=(t.y-this.y0)*(1/this.a);r=(r-this.Zb)/this.Qn;e=e/this.Qn;var n;var i;if(Math.abs(e)<=2.623395162778){var o=Bs(this.utg,2*r,2*e);r=r+o[0];e=e+o[1];e=Math.atan(As(e));var s=Math.sin(r);var a=Math.cos(r);var u=Math.sin(e);var l=Math.cos(e);r=Math.atan2(s*l,Rs(u,l*a));e=Math.atan2(u,l*a);n=Ti(e+this.long0);i=ks(this.cgb,r)}else{n=Infinity;i=Infinity}t.x=n;t.y=i;return t}var Vs=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"];var Ws={init:Us,forward:qs,inverse:zs,names:Vs};var Hs=function(t,e){if(t===undefined){t=Math.floor((Ti(e)+Math.PI)*30/Math.PI)+1;if(t<0){return 0}else if(t>60){return 60}}return t};var Xs="etmerc";function Zs(){var t=Hs(this.zone,this.long0);if(t===undefined){throw new Error("unknown utm zone")}this.lat0=0;this.long0=(6*Math.abs(t)-183)*Gn;this.x0=5e5;this.y0=this.utmSouth?1e7:0;this.k0=.9996;Ws.init.apply(this);this.forward=Ws.forward;this.inverse=Ws.inverse}var Ys=["Universal Transverse Mercator System","utm"];var Js={init:Zs,names:Ys,dependsOn:Xs};var Qs=function(t,e){return Math.pow((1-t)/(1+t),e)};var Ks=20;function $s(){var t=Math.sin(this.lat0);var e=Math.cos(this.lat0);e*=e;this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t);this.C=Math.sqrt(1+this.es*e*e/(1-this.es));this.phic0=Math.asin(t/this.C);this.ratexp=.5*this.C*this.e;this.K=Math.tan(.5*this.phic0+Un)/(Math.pow(Math.tan(.5*this.lat0+Un),this.C)*Qs(this.e*t,this.ratexp))}function ta(t){var e=t.x;var r=t.y;t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*r+Un),this.C)*Qs(this.e*Math.sin(r),this.ratexp))-Rn;t.x=this.C*e;return t}function ea(t){var e=1e-14;var r=t.x/this.C;var n=t.y;var i=Math.pow(Math.tan(.5*n+Un)/this.K,1/this.C);for(var o=Ks;o>0;--o){n=2*Math.atan(i*Qs(this.e*Math.sin(t.y),-.5*this.e))-Rn;if(Math.abs(n-t.y)<e){break}t.y=n}if(!o){return null}t.x=r;t.y=n;return t}var ra=["gauss"];var na={init:$s,forward:ta,inverse:ea,names:ra};function ia(){na.init.apply(this);if(!this.rc){return}this.sinc0=Math.sin(this.phic0);this.cosc0=Math.cos(this.phic0);this.R2=2*this.rc;if(!this.title){this.title="Oblique Stereographic Alternative"}}function oa(t){var e,r,n,i;t.x=Ti(t.x-this.long0);na.forward.apply(this,[t]);e=Math.sin(t.y);r=Math.cos(t.y);n=Math.cos(t.x);i=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*r*n);t.x=i*r*Math.sin(t.x);t.y=i*(this.cosc0*e-this.sinc0*r*n);t.x=this.a*t.x+this.x0;t.y=this.a*t.y+this.y0;return t}function sa(t){var e,r,n,i,o;t.x=(t.x-this.x0)/this.a;t.y=(t.y-this.y0)/this.a;t.x/=this.k0;t.y/=this.k0;if(o=Math.sqrt(t.x*t.x+t.y*t.y)){var s=2*Math.atan2(o,this.R2);e=Math.sin(s);r=Math.cos(s);i=Math.asin(r*this.sinc0+t.y*e*this.cosc0/o);n=Math.atan2(t.x*e,o*this.cosc0*r-t.y*this.sinc0*e)}else{i=this.phic0;n=0}t.x=n;t.y=i;na.inverse.apply(this,[t]);t.x=Ti(t.x+this.long0);return t}var aa=["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];var ua={init:ia,forward:oa,inverse:sa,names:aa};function la(t,e,r){e*=r;return Math.tan(.5*(Rn+t))*Math.pow((1-e)/(1+e),.5*r)}function ca(){this.coslat0=Math.cos(this.lat0);this.sinlat0=Math.sin(this.lat0);if(this.sphere){if(this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=jn){this.k0=.5*(1+Ni(this.lat0)*Math.sin(this.lat_ts))}}else{if(Math.abs(this.coslat0)<=jn){if(this.lat0>0){this.con=1}else{this.con=-1}}this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e));if(this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=jn){this.k0=.5*this.cons*Li(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Oi(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))}this.ms1=Li(this.e,this.sinlat0,this.coslat0);this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-Rn;this.cosX0=Math.cos(this.X0);this.sinX0=Math.sin(this.X0)}}function ha(t){var e=t.x;var r=t.y;var n=Math.sin(r);var i=Math.cos(r);var o,s,a,u,l,c;var h=Ti(e-this.long0);if(Math.abs(Math.abs(e-this.long0)-Math.PI)<=jn&&Math.abs(r+this.lat0)<=jn){t.x=NaN;t.y=NaN;return t}if(this.sphere){o=2*this.k0/(1+this.sinlat0*n+this.coslat0*i*Math.cos(h));t.x=this.a*o*i*Math.sin(h)+this.x0;t.y=this.a*o*(this.coslat0*n-this.sinlat0*i*Math.cos(h))+this.y0;return t}else{s=2*Math.atan(this.ssfn_(r,n,this.e))-Rn;u=Math.cos(s);a=Math.sin(s);if(Math.abs(this.coslat0)<=jn){l=Oi(this.e,r*this.con,this.con*n);c=2*this.a*this.k0*l/this.cons;t.x=this.x0+c*Math.sin(e-this.long0);t.y=this.y0-this.con*c*Math.cos(e-this.long0);return t}else if(Math.abs(this.sinlat0)<jn){o=2*this.a*this.k0/(1+u*Math.cos(h));t.y=o*a}else{o=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*a+this.cosX0*u*Math.cos(h)));t.y=o*(this.cosX0*a-this.sinX0*u*Math.cos(h))+this.y0}t.x=o*u*Math.sin(h)+this.x0}return t}function fa(t){t.x-=this.x0;t.y-=this.y0;var e,r,n,i,o;var s=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var a=2*Math.atan(s/(2*this.a*this.k0));e=this.long0;r=this.lat0;if(s<=jn){t.x=e;t.y=r;return t}r=Math.asin(Math.cos(a)*this.sinlat0+t.y*Math.sin(a)*this.coslat0/s);if(Math.abs(this.coslat0)<jn){if(this.lat0>0){e=Ti(this.long0+Math.atan2(t.x,-1*t.y))}else{e=Ti(this.long0+Math.atan2(t.x,t.y))}}else{e=Ti(this.long0+Math.atan2(t.x*Math.sin(a),s*this.coslat0*Math.cos(a)-t.y*this.sinlat0*Math.sin(a)))}t.x=e;t.y=r;return t}else{if(Math.abs(this.coslat0)<=jn){if(s<=jn){r=this.lat0;e=this.long0;t.x=e;t.y=r;return t}t.x*=this.con;t.y*=this.con;n=s*this.cons/(2*this.a*this.k0);r=this.con*Ai(this.e,n);e=this.con*Ti(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else{i=2*Math.atan(s*this.cosX0/(2*this.a*this.k0*this.ms1));e=this.long0;if(s<=jn){o=this.X0}else{o=Math.asin(Math.cos(i)*this.sinX0+t.y*Math.sin(i)*this.cosX0/s);e=Ti(this.long0+Math.atan2(t.x*Math.sin(i),s*this.cosX0*Math.cos(i)-t.y*this.sinX0*Math.sin(i)))}r=-1*Ai(this.e,Math.tan(.5*(Rn+o)))}}t.x=e;t.y=r;return t}var pa=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"];var da={init:ca,forward:ha,inverse:fa,names:pa,ssfn_:la};function ya(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t);var r=this.a;var n=this.rf;var i=1/n;var o=2*i-Math.pow(i,2);var s=this.e=Math.sqrt(o);this.R=this.k0*r*Math.sqrt(1-o)/(1-o*Math.pow(e,2));this.alpha=Math.sqrt(1+o/(1-o)*Math.pow(Math.cos(t),4));this.b0=Math.asin(e/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2));var u=Math.log(Math.tan(Math.PI/4+t/2));var l=Math.log((1+s*e)/(1-s*e));this.K=a-this.alpha*u+this.alpha*s/2*l}function va(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2));var r=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y)));var n=-this.alpha*(e+r)+this.K;var i=2*(Math.atan(Math.exp(n))-Math.PI/4);var o=this.alpha*(t.x-this.lambda0);var s=Math.atan(Math.sin(o)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(o)));var a=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(o));t.y=this.R/2*Math.log((1+Math.sin(a))/(1-Math.sin(a)))+this.y0;t.x=this.R*s+this.x0;return t}function ga(t){var e=t.x-this.x0;var r=t.y-this.y0;var n=e/this.R;var i=2*(Math.atan(Math.exp(r/this.R))-Math.PI/4);var o=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(n));var s=Math.atan(Math.sin(n)/(Math.cos(this.b0)*Math.cos(n)-Math.sin(this.b0)*Math.tan(i)));var a=this.lambda0+s/this.alpha;var u=0;var l=o;var c=-1e3;var h=0;while(Math.abs(l-c)>1e-7){if(++h>20){return}u=1/this.alpha*(Math.log(Math.tan(Math.PI/4+o/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(l))/2));c=l;l=2*Math.atan(Math.exp(u))-Math.PI/2}t.x=a;t.y=l;return t}var ma=["somerc"];var _a={init:ya,forward:va,inverse:ga,names:ma};var ba=1e-7;function xa(t){var e=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"];var r=typeof t.PROJECTION==="object"?Object.keys(t.PROJECTION)[0]:t.PROJECTION;return"no_uoff"in t||"no_off"in t||e.indexOf(r)!==-1}function Sa(){var t,e,r,n,i,o,s,a,u,l,c=0,h,f=0,p=0,d=0,y=0,v=0,g=0,m;this.no_off=xa(this);this.no_rot="no_rot"in this;var _=false;if("alpha"in this){_=true}var b=false;if("rectified_grid_angle"in this){b=true}if(_){g=this.alpha}if(b){c=this.rectified_grid_angle*Gn}if(_||b){f=this.longc}else{p=this.long1;y=this.lat1;d=this.long2;v=this.lat2;if(Math.abs(y-v)<=ba||(t=Math.abs(y))<=ba||Math.abs(t-Rn)<=ba||Math.abs(Math.abs(this.lat0)-Rn)<=ba||Math.abs(Math.abs(v)-Rn)<=ba){throw new Error}}var x=1-this.es;e=Math.sqrt(x);if(Math.abs(this.lat0)>jn){a=Math.sin(this.lat0);r=Math.cos(this.lat0);t=1-this.es*a*a;this.B=r*r;this.B=Math.sqrt(1+this.es*this.B*this.B/x);this.A=this.B*this.k0*e/t;n=this.B*e/(r*Math.sqrt(t));i=n*n-1;if(i<=0){i=0}else{i=Math.sqrt(i);if(this.lat0<0){i=-i}}this.E=i+=n;this.E*=Math.pow(Oi(this.e,this.lat0,a),this.B)}else{this.B=1/e;this.A=this.k0;this.E=n=i=1}if(_||b){if(_){h=Math.asin(Math.sin(g)/n);if(!b){c=g}}else{h=c;g=Math.asin(n*Math.sin(h))}this.lam0=f-Math.asin(.5*(i-1/i)*Math.tan(h))/this.B}else{o=Math.pow(Oi(this.e,y,Math.sin(y)),this.B);s=Math.pow(Oi(this.e,v,Math.sin(v)),this.B);i=this.E/o;u=(s-o)/(s+o);l=this.E*this.E;l=(l-s*o)/(l+s*o);t=p-d;if(t<-Math.pi){d-=qn}else if(t>Math.pi){d+=qn}this.lam0=Ti(.5*(p+d)-Math.atan(l*Math.tan(.5*this.B*(p-d))/u)/this.B);h=Math.atan(2*Math.sin(this.B*Ti(p-this.lam0))/(i-1/i));c=g=Math.asin(n*Math.sin(h))}this.singam=Math.sin(h);this.cosgam=Math.cos(h);this.sinrot=Math.sin(c);this.cosrot=Math.cos(c);this.rB=1/this.B;this.ArB=this.A*this.rB;this.BrA=1/this.ArB;m=this.A*this.B;if(this.no_off){this.u_0=0}else{this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(n*n-1)/Math.cos(g)));if(this.lat0<0){this.u_0=-this.u_0}}i=.5*h;this.v_pole_n=this.ArB*Math.log(Math.tan(Un-i));this.v_pole_s=this.ArB*Math.log(Math.tan(Un+i))}function wa(t){var e={};var r,n,i,o,s,a,u,l;t.x=t.x-this.lam0;if(Math.abs(Math.abs(t.y)-Rn)>jn){s=this.E/Math.pow(Oi(this.e,t.y,Math.sin(t.y)),this.B);a=1/s;r=.5*(s-a);n=.5*(s+a);o=Math.sin(this.B*t.x);i=(r*this.singam-o*this.cosgam)/n;if(Math.abs(Math.abs(i)-1)<jn){throw new Error}l=.5*this.ArB*Math.log((1-i)/(1+i));a=Math.cos(this.B*t.x);if(Math.abs(a)<ba){u=this.A*t.x}else{u=this.ArB*Math.atan2(r*this.cosgam+o*this.singam,a)}}else{l=t.y>0?this.v_pole_n:this.v_pole_s;u=this.ArB*t.y}if(this.no_rot){e.x=u;e.y=l}else{u-=this.u_0;e.x=l*this.cosrot+u*this.sinrot;e.y=u*this.cosrot-l*this.sinrot}e.x=this.a*e.x+this.x0;e.y=this.a*e.y+this.y0;return e}function Ca(t){var e,r,n,i,o,s,a;var u={};t.x=(t.x-this.x0)*(1/this.a);t.y=(t.y-this.y0)*(1/this.a);if(this.no_rot){r=t.y;e=t.x}else{r=t.x*this.cosrot-t.y*this.sinrot;e=t.y*this.cosrot+t.x*this.sinrot+this.u_0}n=Math.exp(-this.BrA*r);i=.5*(n-1/n);o=.5*(n+1/n);s=Math.sin(this.BrA*e);a=(s*this.cosgam+i*this.singam)/o;if(Math.abs(Math.abs(a)-1)<jn){u.x=0;u.y=a<0?-Rn:Rn}else{u.y=this.E/Math.sqrt((1+a)/(1-a));u.y=Ai(this.e,Math.pow(u.y,1/this.B));if(u.y===Infinity){throw new Error}u.x=-this.rB*Math.atan2(i*this.cosgam-s*this.singam,Math.cos(this.BrA*e))}u.x+=this.lam0;return u}var Ia=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];var Ea={init:Sa,forward:wa,inverse:Ca,names:Ia};function Pa(){if(!this.lat2){this.lat2=this.lat1}if(!this.k0){this.k0=1}this.x0=this.x0||0;this.y0=this.y0||0;if(Math.abs(this.lat1+this.lat2)<jn){return}var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1);var r=Math.cos(this.lat1);var n=Li(this.e,e,r);var i=Oi(this.e,this.lat1,e);var o=Math.sin(this.lat2);var s=Math.cos(this.lat2);var a=Li(this.e,o,s);var u=Oi(this.e,this.lat2,o);var l=Oi(this.e,this.lat0,Math.sin(this.lat0));if(Math.abs(this.lat1-this.lat2)>jn){this.ns=Math.log(n/a)/Math.log(i/u)}else{this.ns=e}if(isNaN(this.ns)){this.ns=e}this.f0=n/(this.ns*Math.pow(i,this.ns));this.rh=this.a*this.f0*Math.pow(l,this.ns);if(!this.title){this.title="Lambert Conformal Conic"}}function Ma(t){var e=t.x;var r=t.y;if(Math.abs(2*Math.abs(r)-Math.PI)<=jn){r=Ni(r)*(Rn-2*jn)}var n=Math.abs(Math.abs(r)-Rn);var i,o;if(n>jn){i=Oi(this.e,r,Math.sin(r));o=this.a*this.f0*Math.pow(i,this.ns)}else{n=r*this.ns;if(n<=0){return null}o=0}var s=this.ns*Ti(e-this.long0);t.x=this.k0*(o*Math.sin(s))+this.x0;t.y=this.k0*(this.rh-o*Math.cos(s))+this.y0;return t}function La(t){var e,r,n;var i,o;var s=(t.x-this.x0)/this.k0;var a=this.rh-(t.y-this.y0)/this.k0;if(this.ns>0){e=Math.sqrt(s*s+a*a);r=1}else{e=-Math.sqrt(s*s+a*a);r=-1}var u=0;if(e!==0){u=Math.atan2(r*s,r*a)}if(e!==0||this.ns>0){r=1/this.ns;n=Math.pow(e/(this.a*this.f0),r);i=Ai(this.e,n);if(i===-9999){return null}}else{i=-Rn}o=Ti(u/this.ns+this.long0);t.x=o;t.y=i;return t}var Na=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];var Ta={init:Pa,forward:Ma,inverse:La,names:Na};function Oa(){this.a=6377397.155;this.es=.006674372230614;this.e=Math.sqrt(this.es);if(!this.lat0){this.lat0=.863937979737193}if(!this.long0){this.long0=.7417649320975901-.308341501185665}if(!this.k0){this.k0=.9999}this.s45=.785398163397448;this.s90=2*this.s45;this.fi0=this.lat0;this.e2=this.es;this.e=Math.sqrt(this.e2);this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2));this.uq=1.04216856380474;this.u0=Math.asin(Math.sin(this.fi0)/this.alfa);this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2);this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g;this.k1=this.k0;this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2));this.s0=1.37008346281555;this.n=Math.sin(this.s0);this.ro0=this.k1*this.n0/Math.tan(this.s0);this.ad=this.s90-this.uq}function Aa(t){var e,r,n,i,o,s,a;var u=t.x;var l=t.y;var c=Ti(u-this.long0);e=Math.pow((1+this.e*Math.sin(l))/(1-this.e*Math.sin(l)),this.alfa*this.e/2);r=2*(Math.atan(this.k*Math.pow(Math.tan(l/2+this.s45),this.alfa)/e)-this.s45);n=-c*this.alfa;i=Math.asin(Math.cos(this.ad)*Math.sin(r)+Math.sin(this.ad)*Math.cos(r)*Math.cos(n));o=Math.asin(Math.cos(r)*Math.sin(n)/Math.cos(i));s=this.n*o;a=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(i/2+this.s45),this.n);t.y=a*Math.cos(s)/1;t.x=a*Math.sin(s)/1;if(!this.czech){t.y*=-1;t.x*=-1}return t}function Ra(t){var e,r,n,i,o,s,a;var u;var l=t.x;t.x=t.y;t.y=l;if(!this.czech){t.y*=-1;t.x*=-1}s=Math.sqrt(t.x*t.x+t.y*t.y);o=Math.atan2(t.y,t.x);i=o/Math.sin(this.s0);n=2*(Math.atan(Math.pow(this.ro0/s,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45);e=Math.asin(Math.cos(this.ad)*Math.sin(n)-Math.sin(this.ad)*Math.cos(n)*Math.cos(i));r=Math.asin(Math.cos(n)*Math.sin(i)/Math.cos(e));t.x=this.long0-r/this.alfa;a=e;u=0;var c=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45);if(Math.abs(a-t.y)<1e-10){u=1}a=t.y;c+=1}while(u===0&&c<15);if(c>=15){return null}return t}var Fa=["Krovak","krovak"];var Da={init:Oa,forward:Aa,inverse:Ra,names:Fa};var ka=function(t,e,r,n,i){return t*i-e*Math.sin(2*i)+r*Math.sin(4*i)-n*Math.sin(6*i)};var ja=function(t){return 1-.25*t*(1+t/16*(3+1.25*t))};var Ga=function(t){return.375*t*(1+.25*t*(1+.46875*t))};var Ba=function(t){return.05859375*t*t*(1+.75*t)};var Ua=function(t){return t*t*t*(35/3072)};var qa=function(t,e,r){var n=e*r;return t/Math.sqrt(1-n*n)};var za=function(t){return Math.abs(t)<Rn?t:t-Ni(t)*Math.PI};var Va=function(t,e,r,n,i){var o;var s;o=t/e;for(var a=0;a<15;a++){s=(t-(e*o-r*Math.sin(2*o)+n*Math.sin(4*o)-i*Math.sin(6*o)))/(e-2*r*Math.cos(2*o)+4*n*Math.cos(4*o)-6*i*Math.cos(6*o));o+=s;if(Math.abs(s)<=1e-10){return o}}return NaN};function Wa(){if(!this.sphere){this.e0=ja(this.es);this.e1=Ga(this.es);this.e2=Ba(this.es);this.e3=Ua(this.es);this.ml0=this.a*ka(this.e0,this.e1,this.e2,this.e3,this.lat0)}}function Ha(t){var e,r;var n=t.x;var i=t.y;n=Ti(n-this.long0);if(this.sphere){e=this.a*Math.asin(Math.cos(i)*Math.sin(n));r=this.a*(Math.atan2(Math.tan(i),Math.cos(n))-this.lat0)}else{var o=Math.sin(i);var s=Math.cos(i);var a=qa(this.a,this.e,o);var u=Math.tan(i)*Math.tan(i);var l=n*Math.cos(i);var c=l*l;var h=this.es*s*s/(1-this.es);var f=this.a*ka(this.e0,this.e1,this.e2,this.e3,i);e=a*l*(1-c*u*(1/6-(8-u+8*h)*c/120));r=f-this.ml0+a*o/s*c*(.5+(5-u+6*h)*c/24)}t.x=e+this.x0;t.y=r+this.y0;return t}function Xa(t){t.x-=this.x0;t.y-=this.y0;var e=t.x/this.a;var r=t.y/this.a;var n,i;if(this.sphere){var o=r+this.lat0;n=Math.asin(Math.sin(o)*Math.cos(e));i=Math.atan2(Math.tan(e),Math.cos(o))}else{var s=this.ml0/this.a+r;var a=Va(s,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(a)-Rn)<=jn){t.x=this.long0;t.y=Rn;if(r<0){t.y*=-1}return t}var u=qa(this.a,this.e,Math.sin(a));var l=u*u*u/this.a/this.a*(1-this.es);var c=Math.pow(Math.tan(a),2);var h=e*this.a/u;var f=h*h;n=a-u*Math.tan(a)/l*h*h*(.5-(1+3*c)*h*h/24);i=h*(1-f*(c/3+(1+3*c)*c*f/15))/Math.cos(a)}t.x=Ti(i+this.long0);t.y=za(n);return t}var Za=["Cassini","Cassini_Soldner","cass"];var Ya={init:Wa,forward:Ha,inverse:Xa,names:Za};var Ja=function(t,e){var r;if(t>1e-7){r=t*e;return(1-t*t)*(e/(1-r*r)-.5/t*Math.log((1-r)/(1+r)))}else{return 2*e}};var Qa=1;var Ka=2;var $a=3;var tu=4;function eu(){var t=Math.abs(this.lat0);if(Math.abs(t-Rn)<jn){this.mode=this.lat0<0?this.S_POLE:this.N_POLE}else if(Math.abs(t)<jn){this.mode=this.EQUIT}else{this.mode=this.OBLIQ}if(this.es>0){var e;this.qp=Ja(this.e,1);this.mmf=.5/(1-this.es);this.apa=cu(this.es);switch(this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp);this.dd=1/this.rq;this.xmf=1;this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp);e=Math.sin(this.lat0);this.sinb1=Ja(this.e,e)/this.qp;this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1);this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1);this.ymf=(this.xmf=this.rq)/this.dd;this.xmf*=this.dd;break}}else{if(this.mode===this.OBLIQ){this.sinph0=Math.sin(this.lat0);this.cosph0=Math.cos(this.lat0)}}}function ru(t){var e,r,n,i,o,s,a,u,l,c;var h=t.x;var f=t.y;h=Ti(h-this.long0);if(this.sphere){o=Math.sin(f);c=Math.cos(f);n=Math.cos(h);if(this.mode===this.OBLIQ||this.mode===this.EQUIT){r=this.mode===this.EQUIT?1+c*n:1+this.sinph0*o+this.cosph0*c*n;if(r<=jn){return null}r=Math.sqrt(2/r);e=r*c*Math.sin(h);r*=this.mode===this.EQUIT?o:this.cosph0*o-this.sinph0*c*n}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE){n=-n}if(Math.abs(f+this.lat0)<jn){return null}r=Un-f*.5;r=2*(this.mode===this.S_POLE?Math.cos(r):Math.sin(r));e=r*Math.sin(h);r*=n}}else{a=0;u=0;l=0;n=Math.cos(h);i=Math.sin(h);o=Math.sin(f);s=Ja(this.e,o);if(this.mode===this.OBLIQ||this.mode===this.EQUIT){a=s/this.qp;u=Math.sqrt(1-a*a)}switch(this.mode){case this.OBLIQ:l=1+this.sinb1*a+this.cosb1*u*n;break;case this.EQUIT:l=1+u*n;break;case this.N_POLE:l=Rn+f;s=this.qp-s;break;case this.S_POLE:l=f-Rn;s=this.qp+s;break}if(Math.abs(l)<jn){return null}switch(this.mode){case this.OBLIQ:case this.EQUIT:l=Math.sqrt(2/l);if(this.mode===this.OBLIQ){r=this.ymf*l*(this.cosb1*a-this.sinb1*u*n)}else{r=(l=Math.sqrt(2/(1+u*n)))*a*this.ymf}e=this.xmf*l*u*i;break;case this.N_POLE:case this.S_POLE:if(s>=0){e=(l=Math.sqrt(s))*i;r=n*(this.mode===this.S_POLE?l:-l)}else{e=r=0}break}}t.x=this.a*e+this.x0;t.y=this.a*r+this.y0;return t}function nu(t){t.x-=this.x0;t.y-=this.y0;var e=t.x/this.a;var r=t.y/this.a;var n,i,o,s,a,u,l;if(this.sphere){var c=0,h,f=0;h=Math.sqrt(e*e+r*r);i=h*.5;if(i>1){return null}i=2*Math.asin(i);if(this.mode===this.OBLIQ||this.mode===this.EQUIT){f=Math.sin(i);c=Math.cos(i)}switch(this.mode){case this.EQUIT:i=Math.abs(h)<=jn?0:Math.asin(r*f/h);e*=f;r=c*h;break;case this.OBLIQ:i=Math.abs(h)<=jn?this.lat0:Math.asin(c*this.sinph0+r*f*this.cosph0/h);e*=f*this.cosph0;r=(c-Math.sin(i)*this.sinph0)*h;break;case this.N_POLE:r=-r;i=Rn-i;break;case this.S_POLE:i-=Rn;break}n=r===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(e,r)}else{l=0;if(this.mode===this.OBLIQ||this.mode===this.EQUIT){e/=this.dd;r*=this.dd;u=Math.sqrt(e*e+r*r);if(u<jn){t.x=this.long0;t.y=this.lat0;return t}s=2*Math.asin(.5*u/this.rq);o=Math.cos(s);e*=s=Math.sin(s);if(this.mode===this.OBLIQ){l=o*this.sinb1+r*s*this.cosb1/u;a=this.qp*l;r=u*this.cosb1*o-r*this.sinb1*s}else{l=r*s/u;a=this.qp*l;r=u*o}}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE){r=-r}a=e*e+r*r;if(!a){t.x=this.long0;t.y=this.lat0;return t}l=1-a/this.qp;if(this.mode===this.S_POLE){l=-l}}n=Math.atan2(e,r);i=hu(Math.asin(l),this.apa)}t.x=Ti(this.long0+n);t.y=i;return t}var iu=.3333333333333333;var ou=.17222222222222222;var su=.10257936507936508;var au=.06388888888888888;var uu=.0664021164021164;var lu=.016415012942191543;function cu(t){var e;var r=[];r[0]=t*iu;e=t*t;r[0]+=e*ou;r[1]=e*au;e*=t;r[0]+=e*su;r[1]+=e*uu;r[2]=e*lu;return r}function hu(t,e){var r=t+t;return t+e[0]*Math.sin(r)+e[1]*Math.sin(r+r)+e[2]*Math.sin(r+r+r)}var fu=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];var pu={init:eu,forward:ru,inverse:nu,names:fu,S_POLE:Qa,N_POLE:Ka,EQUIT:$a,OBLIQ:tu};var du=function(t){if(Math.abs(t)>1){t=t>1?1:-1}return Math.asin(t)};function yu(){if(Math.abs(this.lat1+this.lat2)<jn){return}this.temp=this.b/this.a;this.es=1-Math.pow(this.temp,2);this.e3=Math.sqrt(this.es);this.sin_po=Math.sin(this.lat1);this.cos_po=Math.cos(this.lat1);this.t1=this.sin_po;this.con=this.sin_po;this.ms1=Li(this.e3,this.sin_po,this.cos_po);this.qs1=Ja(this.e3,this.sin_po,this.cos_po);this.sin_po=Math.sin(this.lat2);this.cos_po=Math.cos(this.lat2);this.t2=this.sin_po;this.ms2=Li(this.e3,this.sin_po,this.cos_po);this.qs2=Ja(this.e3,this.sin_po,this.cos_po);this.sin_po=Math.sin(this.lat0);this.cos_po=Math.cos(this.lat0);this.t3=this.sin_po;this.qs0=Ja(this.e3,this.sin_po,this.cos_po);if(Math.abs(this.lat1-this.lat2)>jn){this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1)}else{this.ns0=this.con}this.c=this.ms1*this.ms1+this.ns0*this.qs1;this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0}function vu(t){var e=t.x;var r=t.y;this.sin_phi=Math.sin(r);this.cos_phi=Math.cos(r);var n=Ja(this.e3,this.sin_phi,this.cos_phi);var i=this.a*Math.sqrt(this.c-this.ns0*n)/this.ns0;var o=this.ns0*Ti(e-this.long0);var s=i*Math.sin(o)+this.x0;var a=this.rh-i*Math.cos(o)+this.y0;t.x=s;t.y=a;return t}function gu(t){var e,r,n,i,o,s;t.x-=this.x0;t.y=this.rh-t.y+this.y0;if(this.ns0>=0){e=Math.sqrt(t.x*t.x+t.y*t.y);n=1}else{e=-Math.sqrt(t.x*t.x+t.y*t.y);n=-1}i=0;if(e!==0){i=Math.atan2(n*t.x,n*t.y)}n=e*this.ns0/this.a;if(this.sphere){s=Math.asin((this.c-n*n)/(2*this.ns0))}else{r=(this.c-n*n)/this.ns0;s=this.phi1z(this.e3,r)}o=Ti(i/this.ns0+this.long0);t.x=o;t.y=s;return t}function mu(t,e){var r,n,i,o,s;var a=du(.5*e);if(t<jn){return a}var u=t*t;for(var l=1;l<=25;l++){r=Math.sin(a);n=Math.cos(a);i=t*r;o=1-i*i;s=.5*o*o/n*(e/(1-u)-r/o+.5/t*Math.log((1-i)/(1+i)));a=a+s;if(Math.abs(s)<=1e-7){return a}}return null}var _u=["Albers_Conic_Equal_Area","Albers","aea"];var bu={init:yu,forward:vu,inverse:gu,names:_u,phi1z:mu};function xu(){this.sin_p14=Math.sin(this.lat0);this.cos_p14=Math.cos(this.lat0);this.infinity_dist=1e3*this.a;this.rc=1}function Su(t){var e,r;var n;var i;var o;var s;var a,u;var l=t.x;var c=t.y;n=Ti(l-this.long0);e=Math.sin(c);r=Math.cos(c);i=Math.cos(n);s=this.sin_p14*e+this.cos_p14*r*i;o=1;if(s>0||Math.abs(s)<=jn){a=this.x0+this.a*o*r*Math.sin(n)/s;u=this.y0+this.a*o*(this.cos_p14*e-this.sin_p14*r*i)/s}else{a=this.x0+this.infinity_dist*r*Math.sin(n);u=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*r*i)}t.x=a;t.y=u;return t}function wu(t){var e;var r,n;var i;var o,s;t.x=(t.x-this.x0)/this.a;t.y=(t.y-this.y0)/this.a;t.x/=this.k0;t.y/=this.k0;if(e=Math.sqrt(t.x*t.x+t.y*t.y)){i=Math.atan2(e,this.rc);r=Math.sin(i);n=Math.cos(i);s=du(n*this.sin_p14+t.y*r*this.cos_p14/e);o=Math.atan2(t.x*r,e*this.cos_p14*n-t.y*this.sin_p14*r);o=Ti(this.long0+o)}else{s=this.phic0;o=0}t.x=o;t.y=s;return t}var Cu=["gnom"];var Iu={init:xu,forward:Su,inverse:wu,names:Cu};var Eu=function(t,e){var r=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-r)<1e-6){if(e<0){return-1*Rn}else{return Rn}}var n=Math.asin(.5*e);var i;var o;var s;var a;for(var u=0;u<30;u++){o=Math.sin(n);s=Math.cos(n);a=t*o;i=Math.pow(1-a*a,2)/(2*s)*(e/(1-t*t)-o/(1-a*a)+.5/t*Math.log((1-a)/(1+a)));n+=i;if(Math.abs(i)<=1e-10){return n}}return NaN};function Pu(){if(!this.sphere){this.k0=Li(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))}}function Mu(t){var e=t.x;var r=t.y;var n,i;var o=Ti(e-this.long0);if(this.sphere){n=this.x0+this.a*o*Math.cos(this.lat_ts);i=this.y0+this.a*Math.sin(r)/Math.cos(this.lat_ts)}else{var s=Ja(this.e,Math.sin(r));n=this.x0+this.a*this.k0*o;i=this.y0+this.a*s*.5/this.k0}t.x=n;t.y=i;return t}function Lu(t){t.x-=this.x0;t.y-=this.y0;var e,r;if(this.sphere){e=Ti(this.long0+t.x/this.a/Math.cos(this.lat_ts));r=Math.asin(t.y/this.a*Math.cos(this.lat_ts))}else{r=Eu(this.e,2*t.y*this.k0/this.a);e=Ti(this.long0+t.x/(this.a*this.k0))}t.x=e;t.y=r;return t}var Nu=["cea"];var Tu={init:Pu,forward:Mu,inverse:Lu,names:Nu};function Ou(){this.x0=this.x0||0;this.y0=this.y0||0;this.lat0=this.lat0||0;this.long0=this.long0||0;this.lat_ts=this.lat_ts||0;this.title=this.title||"Equidistant Cylindrical (Plate Carre)";this.rc=Math.cos(this.lat_ts)}function Au(t){var e=t.x;var r=t.y;var n=Ti(e-this.long0);var i=za(r-this.lat0);t.x=this.x0+this.a*n*this.rc;t.y=this.y0+this.a*i;return t}function Ru(t){var e=t.x;var r=t.y;t.x=Ti(this.long0+(e-this.x0)/(this.a*this.rc));t.y=za(this.lat0+(r-this.y0)/this.a);return t}var Fu=["Equirectangular","Equidistant_Cylindrical","eqc"];var Du={init:Ou,forward:Au,inverse:Ru,names:Fu};var ku=20;function ju(){this.temp=this.b/this.a;this.es=1-Math.pow(this.temp,2);this.e=Math.sqrt(this.es);this.e0=ja(this.es);this.e1=Ga(this.es);this.e2=Ba(this.es);this.e3=Ua(this.es);this.ml0=this.a*ka(this.e0,this.e1,this.e2,this.e3,this.lat0)}function Gu(t){var e=t.x;var r=t.y;var n,i,o;var s=Ti(e-this.long0);o=s*Math.sin(r);if(this.sphere){if(Math.abs(r)<=jn){n=this.a*s;i=-1*this.a*this.lat0}else{n=this.a*Math.sin(o)/Math.tan(r);i=this.a*(za(r-this.lat0)+(1-Math.cos(o))/Math.tan(r))}}else{if(Math.abs(r)<=jn){n=this.a*s;i=-1*this.ml0}else{var a=qa(this.a,this.e,Math.sin(r))/Math.tan(r);n=a*Math.sin(o);i=this.a*ka(this.e0,this.e1,this.e2,this.e3,r)-this.ml0+a*(1-Math.cos(o))}}t.x=n+this.x0;t.y=i+this.y0;return t}function Bu(t){var e,r,n,i,o;var s,a;var u,l;n=t.x-this.x0;i=t.y-this.y0;if(this.sphere){if(Math.abs(i+this.a*this.lat0)<=jn){e=Ti(n/this.a+this.long0);r=0}else{s=this.lat0+i/this.a;a=n*n/this.a/this.a+s*s;u=s;var c;for(o=ku;o;--o){c=Math.tan(u);l=-1*(s*(u*c+1)-u-.5*(u*u+a)*c)/((u-s)/c-1);u+=l;if(Math.abs(l)<=jn){r=u;break}}e=Ti(this.long0+Math.asin(n*Math.tan(u)/this.a)/Math.sin(r))}}else{if(Math.abs(i+this.ml0)<=jn){r=0;e=Ti(this.long0+n/this.a)}else{s=(this.ml0+i)/this.a;a=n*n/this.a/this.a+s*s;u=s;var h,f,p,d;var y;for(o=ku;o;--o){y=this.e*Math.sin(u);h=Math.sqrt(1-y*y)*Math.tan(u);f=this.a*ka(this.e0,this.e1,this.e2,this.e3,u);p=this.e0-2*this.e1*Math.cos(2*u)+4*this.e2*Math.cos(4*u)-6*this.e3*Math.cos(6*u);d=f/this.a;l=(s*(h*d+1)-d-.5*h*(d*d+a))/(this.es*Math.sin(2*u)*(d*d+a-2*s*d)/(4*h)+(s-d)*(h*p-2/Math.sin(2*u))-p);u-=l;if(Math.abs(l)<=jn){r=u;break}}h=Math.sqrt(1-this.es*Math.pow(Math.sin(r),2))*Math.tan(r);e=Ti(this.long0+Math.asin(n*h/this.a)/Math.sin(r))}}t.x=e;t.y=r;return t}var Uu=["Polyconic","poly"];var qu={init:ju,forward:Gu,inverse:Bu,names:Uu};var zu=1;function Vu(){this.A=[];this.A[1]=.6399175073;this.A[2]=-.1358797613;this.A[3]=.063294409;this.A[4]=-.02526853;this.A[5]=.0117879;this.A[6]=-.0055161;this.A[7]=.0026906;this.A[8]=-.001333;this.A[9]=67e-5;this.A[10]=-34e-5;this.B_re=[];this.B_im=[];this.B_re[1]=.7557853228;this.B_im[1]=0;this.B_re[2]=.249204646;this.B_im[2]=.003371507;this.B_re[3]=-.001541739;this.B_im[3]=.04105856;this.B_re[4]=-.10162907;this.B_im[4]=.01727609;this.B_re[5]=-.26623489;this.B_im[5]=-.36249218;this.B_re[6]=-.6870983;this.B_im[6]=-1.1651967;this.C_re=[];this.C_im=[];this.C_re[1]=1.3231270439;this.C_im[1]=0;this.C_re[2]=-.577245789;this.C_im[2]=-.007809598;this.C_re[3]=.508307513;this.C_im[3]=-.112208952;this.C_re[4]=-.15094762;this.C_im[4]=.18200602;this.C_re[5]=1.01418179;this.C_im[5]=1.64497696;this.C_re[6]=1.9660549;this.C_im[6]=2.5127645;this.D=[];this.D[1]=1.5627014243;this.D[2]=.5185406398;this.D[3]=-.03333098;this.D[4]=-.1052906;this.D[5]=-.0368594;this.D[6]=.007317;this.D[7]=.0122;this.D[8]=.00394;this.D[9]=-.0013}function Wu(t){var e;var r=t.x;var n=t.y;var i=n-this.lat0;var o=r-this.long0;var s=i/An*1e-5;var a=o;var u=1;var l=0;for(e=1;e<=10;e++){u=u*s;l=l+this.A[e]*u}var c=l;var h=a;var f=1;var p=0;var d;var y;var v=0;var g=0;for(e=1;e<=6;e++){d=f*c-p*h;y=p*c+f*h;f=d;p=y;v=v+this.B_re[e]*f-this.B_im[e]*p;g=g+this.B_im[e]*f+this.B_re[e]*p}t.x=g*this.a+this.x0;t.y=v*this.a+this.y0;return t}function Hu(t){var e;var r=t.x;var n=t.y;var i=r-this.x0;var o=n-this.y0;var s=o/this.a;var a=i/this.a;var u=1;var l=0;var c;var h;var f=0;var p=0;for(e=1;e<=6;e++){c=u*s-l*a;h=l*s+u*a;u=c;l=h;f=f+this.C_re[e]*u-this.C_im[e]*l;p=p+this.C_im[e]*u+this.C_re[e]*l}for(var d=0;d<this.iterations;d++){var y=f;var v=p;var g;var m;var _=s;var b=a;for(e=2;e<=6;e++){g=y*f-v*p;m=v*f+y*p;y=g;v=m;_=_+(e-1)*(this.B_re[e]*y-this.B_im[e]*v);b=b+(e-1)*(this.B_im[e]*y+this.B_re[e]*v)}y=1;v=0;var x=this.B_re[1];var S=this.B_im[1];for(e=2;e<=6;e++){g=y*f-v*p;m=v*f+y*p;y=g;v=m;x=x+e*(this.B_re[e]*y-this.B_im[e]*v);S=S+e*(this.B_im[e]*y+this.B_re[e]*v)}var w=x*x+S*S;f=(_*x+b*S)/w;p=(b*x-_*S)/w}var C=f;var I=p;var E=1;var P=0;for(e=1;e<=9;e++){E=E*C;P=P+this.D[e]*E}var M=this.lat0+P*An*1e5;var L=this.long0+I;t.x=L;t.y=M;return t}var Xu=["New_Zealand_Map_Grid","nzmg"];var Zu={init:Vu,forward:Wu,inverse:Hu,names:Xu};function Yu(){}function Ju(t){var e=t.x;var r=t.y;var n=Ti(e-this.long0);var i=this.x0+this.a*n;var o=this.y0+this.a*Math.log(Math.tan(Math.PI/4+r/2.5))*1.25;t.x=i;t.y=o;return t}function Qu(t){t.x-=this.x0;t.y-=this.y0;var e=Ti(this.long0+t.x/this.a);var r=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);t.x=e;t.y=r;return t}var Ku=["Miller_Cylindrical","mill"];var $u={init:Yu,forward:Ju,inverse:Qu,names:Ku};var tl=20;function el(){if(!this.sphere){this.en=Cs(this.es)}else{this.n=1;this.m=0;this.es=0;this.C_y=Math.sqrt((this.m+1)/this.n);this.C_x=this.C_y/(this.m+1)}}function rl(t){var e,r;var n=t.x;var i=t.y;n=Ti(n-this.long0);if(this.sphere){if(!this.m){i=this.n!==1?Math.asin(this.n*Math.sin(i)):i}else{var o=this.n*Math.sin(i);for(var s=tl;s;--s){var a=(this.m*i+Math.sin(i)-o)/(this.m+Math.cos(i));i-=a;if(Math.abs(a)<jn){break}}}e=this.a*this.C_x*n*(this.m+Math.cos(i));r=this.a*this.C_y*i}else{var u=Math.sin(i);var l=Math.cos(i);r=this.a*Is(i,u,l,this.en);e=this.a*n*l/Math.sqrt(1-this.es*u*u)}t.x=e;t.y=r;return t}function nl(t){var e,r,n,i;t.x-=this.x0;n=t.x/this.a;t.y-=this.y0;e=t.y/this.a;if(this.sphere){e/=this.C_y;n=n/(this.C_x*(this.m+Math.cos(e)));if(this.m){e=du((this.m*e+Math.sin(e))/this.n)}else if(this.n!==1){e=du(Math.sin(e)/this.n)}n=Ti(n+this.long0);e=za(e)}else{e=Ps(t.y/this.a,this.es,this.en);i=Math.abs(e);if(i<Rn){i=Math.sin(e);r=this.long0+t.x*Math.sqrt(1-this.es*i*i)/(this.a*Math.cos(e));n=Ti(r)}else if(i-jn<Rn){n=this.long0}}t.x=n;t.y=e;return t}var il=["Sinusoidal","sinu"];var sl={init:el,forward:rl,inverse:nl,names:il};function al(){}function ul(t){var e=t.x;var r=t.y;var n=Ti(e-this.long0);var i=r;var o=Math.PI*Math.sin(r);while(true){var s=-(i+Math.sin(i)-o)/(1+Math.cos(i));i+=s;if(Math.abs(s)<jn){break}}i/=2;if(Math.PI/2-Math.abs(r)<jn){n=0}var a=.900316316158*this.a*n*Math.cos(i)+this.x0;var u=1.4142135623731*this.a*Math.sin(i)+this.y0;t.x=a;t.y=u;return t}function ll(t){var e;var r;t.x-=this.x0;t.y-=this.y0;r=t.y/(1.4142135623731*this.a);if(Math.abs(r)>.999999999999){r=.999999999999}e=Math.asin(r);var n=Ti(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));if(n<-Math.PI){n=-Math.PI}if(n>Math.PI){n=Math.PI}r=(2*e+Math.sin(2*e))/Math.PI;if(Math.abs(r)>1){r=1}var i=Math.asin(r);t.x=n;t.y=i;return t}var cl=["Mollweide","moll"];var hl={init:al,forward:ul,inverse:ll,names:cl};function fl(){if(Math.abs(this.lat1+this.lat2)<jn){return}this.lat2=this.lat2||this.lat1;this.temp=this.b/this.a;this.es=1-Math.pow(this.temp,2);this.e=Math.sqrt(this.es);this.e0=ja(this.es);this.e1=Ga(this.es);this.e2=Ba(this.es);this.e3=Ua(this.es);this.sinphi=Math.sin(this.lat1);this.cosphi=Math.cos(this.lat1);this.ms1=Li(this.e,this.sinphi,this.cosphi);this.ml1=ka(this.e0,this.e1,this.e2,this.e3,this.lat1);if(Math.abs(this.lat1-this.lat2)<jn){this.ns=this.sinphi}else{this.sinphi=Math.sin(this.lat2);this.cosphi=Math.cos(this.lat2);this.ms2=Li(this.e,this.sinphi,this.cosphi);this.ml2=ka(this.e0,this.e1,this.e2,this.e3,this.lat2);this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)}this.g=this.ml1+this.ms1/this.ns;this.ml0=ka(this.e0,this.e1,this.e2,this.e3,this.lat0);this.rh=this.a*(this.g-this.ml0)}function pl(t){var e=t.x;var r=t.y;var n;if(this.sphere){n=this.a*(this.g-r)}else{var i=ka(this.e0,this.e1,this.e2,this.e3,r);n=this.a*(this.g-i)}var o=this.ns*Ti(e-this.long0);var s=this.x0+n*Math.sin(o);var a=this.y0+this.rh-n*Math.cos(o);t.x=s;t.y=a;return t}function dl(t){t.x-=this.x0;t.y=this.rh-t.y+this.y0;var e,r,n,i;if(this.ns>=0){r=Math.sqrt(t.x*t.x+t.y*t.y);e=1}else{r=-Math.sqrt(t.x*t.x+t.y*t.y);e=-1}var o=0;if(r!==0){o=Math.atan2(e*t.x,e*t.y)}if(this.sphere){i=Ti(this.long0+o/this.ns);n=za(this.g-r/this.a);t.x=i;t.y=n;return t}else{var s=this.g-r/this.a;n=Va(s,this.e0,this.e1,this.e2,this.e3);i=Ti(this.long0+o/this.ns);t.x=i;t.y=n;return t}}var yl=["Equidistant_Conic","eqdc"];var vl={init:fl,forward:pl,inverse:dl,names:yl};function gl(){this.R=this.a}function ml(t){var e=t.x;var r=t.y;var n=Ti(e-this.long0);var i,o;if(Math.abs(r)<=jn){i=this.x0+this.R*n;o=this.y0}var s=du(2*Math.abs(r/Math.PI));if(Math.abs(n)<=jn||Math.abs(Math.abs(r)-Rn)<=jn){i=this.x0;if(r>=0){o=this.y0+Math.PI*this.R*Math.tan(.5*s)}else{o=this.y0+Math.PI*this.R*-Math.tan(.5*s)}}var a=.5*Math.abs(Math.PI/n-n/Math.PI);var u=a*a;var l=Math.sin(s);var c=Math.cos(s);var h=c/(l+c-1);var f=h*h;var p=h*(2/l-1);var d=p*p;var y=Math.PI*this.R*(a*(h-d)+Math.sqrt(u*(h-d)*(h-d)-(d+u)*(f-d)))/(d+u);if(n<0){y=-y}i=this.x0+y;var v=u+h;y=Math.PI*this.R*(p*v-a*Math.sqrt((d+u)*(u+1)-v*v))/(d+u);if(r>=0){o=this.y0+y}else{o=this.y0-y}t.x=i;t.y=o;return t}function _l(t){var e,r;var n,i,o,s,a,u;var l;var c;var h;var f;var p;t.x-=this.x0;t.y-=this.y0;h=Math.PI*this.R;n=t.x/h;i=t.y/h;o=n*n+i*i;s=-Math.abs(i)*(1+o);a=s-2*i*i+n*n;u=-2*s+1+2*i*i+o*o;p=i*i/u+(2*a*a*a/u/u/u-9*s*a/u/u)/27;l=(s-a*a/3/u)/u;c=2*Math.sqrt(-l/3);h=3*p/l/c;if(Math.abs(h)>1){if(h>=0){h=1}else{h=-1}}f=Math.acos(h)/3;if(t.y>=0){r=(-c*Math.cos(f+Math.PI/3)-a/3/u)*Math.PI}else{r=-(-c*Math.cos(f+Math.PI/3)-a/3/u)*Math.PI}if(Math.abs(n)<jn){e=this.long0}else{e=Ti(this.long0+Math.PI*(o-1+Math.sqrt(1+2*(n*n-i*i)+o*o))/2/n)}t.x=e;t.y=r;return t}var bl=["Van_der_Grinten_I","VanDerGrinten","vandg"];var xl={init:gl,forward:ml,inverse:_l,names:bl};function Sl(){this.sin_p12=Math.sin(this.lat0);this.cos_p12=Math.cos(this.lat0)}function wl(t){var e=t.x;var r=t.y;var n=Math.sin(t.y);var i=Math.cos(t.y);var o=Ti(e-this.long0);var s,a,u,l,c,h,f,p,d,y,v,g,m,_,b,x,S,w,C,I,E,P,M;if(this.sphere){if(Math.abs(this.sin_p12-1)<=jn){t.x=this.x0+this.a*(Rn-r)*Math.sin(o);t.y=this.y0-this.a*(Rn-r)*Math.cos(o);return t}else if(Math.abs(this.sin_p12+1)<=jn){t.x=this.x0+this.a*(Rn+r)*Math.sin(o);t.y=this.y0+this.a*(Rn+r)*Math.cos(o);return t}else{w=this.sin_p12*n+this.cos_p12*i*Math.cos(o);x=Math.acos(w);S=x?x/Math.sin(x):1;t.x=this.x0+this.a*S*i*Math.sin(o);t.y=this.y0+this.a*S*(this.cos_p12*n-this.sin_p12*i*Math.cos(o));return t}}else{s=ja(this.es);a=Ga(this.es);u=Ba(this.es);l=Ua(this.es);if(Math.abs(this.sin_p12-1)<=jn){c=this.a*ka(s,a,u,l,Rn);h=this.a*ka(s,a,u,l,r);t.x=this.x0+(c-h)*Math.sin(o);t.y=this.y0-(c-h)*Math.cos(o);return t}else if(Math.abs(this.sin_p12+1)<=jn){c=this.a*ka(s,a,u,l,Rn);h=this.a*ka(s,a,u,l,r);t.x=this.x0+(c+h)*Math.sin(o);t.y=this.y0+(c+h)*Math.cos(o);return t}else{f=n/i;p=qa(this.a,this.e,this.sin_p12);d=qa(this.a,this.e,n);y=Math.atan((1-this.es)*f+this.es*p*this.sin_p12/(d*i));v=Math.atan2(Math.sin(o),this.cos_p12*Math.tan(y)-this.sin_p12*Math.cos(o));if(v===0){C=Math.asin(this.cos_p12*Math.sin(y)-this.sin_p12*Math.cos(y))}else if(Math.abs(Math.abs(v)-Math.PI)<=jn){C=-Math.asin(this.cos_p12*Math.sin(y)-this.sin_p12*Math.cos(y))}else{C=Math.asin(Math.sin(o)*Math.cos(y)/Math.sin(v))}g=this.e*this.sin_p12/Math.sqrt(1-this.es);m=this.e*this.cos_p12*Math.cos(v)/Math.sqrt(1-this.es);_=g*m;b=m*m;I=C*C;E=I*C;P=E*C;M=P*C;x=p*C*(1-I*b*(1-b)/6+E/8*_*(1-2*b)+P/120*(b*(4-7*b)-3*g*g*(1-7*b))-M/48*_);t.x=this.x0+x*Math.sin(v);t.y=this.y0+x*Math.cos(v);return t}}}function Cl(t){t.x-=this.x0;t.y-=this.y0;var e,r,n,i,o,s,a,u,l,c,h,f,p,d,y,v,g,m,_,b,x,S,w,C;if(this.sphere){e=Math.sqrt(t.x*t.x+t.y*t.y);if(e>2*Rn*this.a){return}r=e/this.a;n=Math.sin(r);i=Math.cos(r);o=this.long0;if(Math.abs(e)<=jn){s=this.lat0}else{s=du(i*this.sin_p12+t.y*n*this.cos_p12/e);a=Math.abs(this.lat0)-Rn;if(Math.abs(a)<=jn){if(this.lat0>=0){o=Ti(this.long0+Math.atan2(t.x,-t.y))}else{o=Ti(this.long0-Math.atan2(-t.x,t.y))}}else{o=Ti(this.long0+Math.atan2(t.x*n,e*this.cos_p12*i-t.y*this.sin_p12*n))}}t.x=o;t.y=s;return t}else{u=ja(this.es);l=Ga(this.es);c=Ba(this.es);h=Ua(this.es);if(Math.abs(this.sin_p12-1)<=jn){f=this.a*ka(u,l,c,h,Rn);e=Math.sqrt(t.x*t.x+t.y*t.y);p=f-e;s=Va(p/this.a,u,l,c,h);o=Ti(this.long0+Math.atan2(t.x,-1*t.y));t.x=o;t.y=s;return t}else if(Math.abs(this.sin_p12+1)<=jn){f=this.a*ka(u,l,c,h,Rn);e=Math.sqrt(t.x*t.x+t.y*t.y);p=e-f;s=Va(p/this.a,u,l,c,h);o=Ti(this.long0+Math.atan2(t.x,t.y));t.x=o;t.y=s;return t}else{e=Math.sqrt(t.x*t.x+t.y*t.y);v=Math.atan2(t.x,t.y);d=qa(this.a,this.e,this.sin_p12);g=Math.cos(v);m=this.e*this.cos_p12*g;_=-m*m/(1-this.es);b=3*this.es*(1-_)*this.sin_p12*this.cos_p12*g/(1-this.es);x=e/d;S=x-_*(1+_)*Math.pow(x,3)/6-b*(1+3*_)*Math.pow(x,4)/24;w=1-_*S*S/2-x*S*S*S/6;y=Math.asin(this.sin_p12*Math.cos(S)+this.cos_p12*Math.sin(S)*g);o=Ti(this.long0+Math.asin(Math.sin(v)*Math.sin(S)/Math.cos(y)));C=Math.sin(y);s=Math.atan2((C-this.es*w*this.sin_p12)*Math.tan(y),C*(1-this.es));t.x=o;t.y=s;return t}}}var Il=["Azimuthal_Equidistant","aeqd"];var El={init:Sl,forward:wl,inverse:Cl,names:Il};function Pl(){this.sin_p14=Math.sin(this.lat0);this.cos_p14=Math.cos(this.lat0)}function Ml(t){var e,r;var n;var i;var o;var s,a,u;var l=t.x;var c=t.y;n=Ti(l-this.long0);e=Math.sin(c);r=Math.cos(c);i=Math.cos(n);s=this.sin_p14*e+this.cos_p14*r*i;o=1;if(s>0||Math.abs(s)<=jn){a=this.a*o*r*Math.sin(n);u=this.y0+this.a*o*(this.cos_p14*e-this.sin_p14*r*i)}t.x=a;t.y=u;return t}function Ll(t){var e;var r;var n,i;var o;var s,a;t.x-=this.x0;t.y-=this.y0;e=Math.sqrt(t.x*t.x+t.y*t.y);r=du(e/this.a);n=Math.sin(r);i=Math.cos(r);s=this.long0;if(Math.abs(e)<=jn){a=this.lat0;t.x=s;t.y=a;return t}a=du(i*this.sin_p14+t.y*n*this.cos_p14/e);o=Math.abs(this.lat0)-Rn;if(Math.abs(o)<=jn){if(this.lat0>=0){s=Ti(this.long0+Math.atan2(t.x,-t.y))}else{s=Ti(this.long0-Math.atan2(-t.x,t.y))}t.x=s;t.y=a;return t}s=Ti(this.long0+Math.atan2(t.x*n,e*this.cos_p14*i-t.y*this.sin_p14*n));t.x=s;t.y=a;return t}var Nl=["ortho"];var Tl={init:Pl,forward:Ml,inverse:Ll,names:Nl};var Ol={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6};var Al={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function Rl(){this.x0=this.x0||0;this.y0=this.y0||0;this.lat0=this.lat0||0;this.long0=this.long0||0;this.lat_ts=this.lat_ts||0;this.title=this.title||"Quadrilateralized Spherical Cube";if(this.lat0>=Rn-Un/2){this.face=Ol.TOP}else if(this.lat0<=-(Rn-Un/2)){this.face=Ol.BOTTOM}else if(Math.abs(this.long0)<=Un){this.face=Ol.FRONT}else if(Math.abs(this.long0)<=Rn+Un){this.face=this.long0>0?Ol.RIGHT:Ol.LEFT}else{this.face=Ol.BACK}if(this.es!==0){this.one_minus_f=1-(this.a-this.b)/this.a;this.one_minus_f_squared=this.one_minus_f*this.one_minus_f}}function Fl(t){var e={x:0,y:0};var r,n;var i,o;var s,a;var u={value:0};t.x-=this.long0;if(this.es!==0){r=Math.atan(this.one_minus_f_squared*Math.tan(t.y))}else{r=t.y}n=t.x;if(this.face===Ol.TOP){o=Rn-r;if(n>=Un&&n<=Rn+Un){u.value=Al.AREA_0;i=n-Rn}else if(n>Rn+Un||n<=-(Rn+Un)){u.value=Al.AREA_1;i=n>0?n-zn:n+zn}else if(n>-(Rn+Un)&&n<=-Un){u.value=Al.AREA_2;i=n+Rn}else{u.value=Al.AREA_3;i=n}}else if(this.face===Ol.BOTTOM){o=Rn+r;if(n>=Un&&n<=Rn+Un){u.value=Al.AREA_0;i=-n+Rn}else if(n<Un&&n>=-Un){u.value=Al.AREA_1;i=-n}else if(n<-Un&&n>=-(Rn+Un)){u.value=Al.AREA_2;i=-n-Rn}else{u.value=Al.AREA_3;i=n>0?-n+zn:-n-zn}}else{var l,c,h;var f,p;var d,y;if(this.face===Ol.RIGHT){n=jl(n,+Rn)}else if(this.face===Ol.BACK){n=jl(n,+zn)}else if(this.face===Ol.LEFT){n=jl(n,-Rn)}f=Math.sin(r);p=Math.cos(r);d=Math.sin(n);y=Math.cos(n);l=p*y;c=p*d;h=f;if(this.face===Ol.FRONT){o=Math.acos(l);i=kl(o,h,c,u)}else if(this.face===Ol.RIGHT){o=Math.acos(c);i=kl(o,h,-l,u)}else if(this.face===Ol.BACK){o=Math.acos(-l);i=kl(o,h,-c,u)}else if(this.face===Ol.LEFT){o=Math.acos(-c);i=kl(o,h,l,u)}else{o=i=0;u.value=Al.AREA_0}}a=Math.atan(12/zn*(i+Math.acos(Math.sin(i)*Math.cos(Un))-Rn));s=Math.sqrt((1-Math.cos(o))/(Math.cos(a)*Math.cos(a))/(1-Math.cos(Math.atan(1/Math.cos(i)))));if(u.value===Al.AREA_1){a+=Rn}else if(u.value===Al.AREA_2){a+=zn}else if(u.value===Al.AREA_3){a+=1.5*zn}e.x=s*Math.cos(a);e.y=s*Math.sin(a);e.x=e.x*this.a+this.x0;e.y=e.y*this.a+this.y0;t.x=e.x;t.y=e.y;return t}function Dl(t){var e={lam:0,phi:0};var r,n,i,o;var s,a,u,l;var c;var h={value:0};t.x=(t.x-this.x0)/this.a;t.y=(t.y-this.y0)/this.a;n=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y));r=Math.atan2(t.y,t.x);if(t.x>=0&&t.x>=Math.abs(t.y)){h.value=Al.AREA_0}else if(t.y>=0&&t.y>=Math.abs(t.x)){h.value=Al.AREA_1;r-=Rn}else if(t.x<0&&-t.x>=Math.abs(t.y)){h.value=Al.AREA_2;r=r<0?r+zn:r-zn}else{h.value=Al.AREA_3;r+=Rn}c=zn/12*Math.tan(r);s=Math.sin(c)/(Math.cos(c)-1/Math.sqrt(2));a=Math.atan(s);i=Math.cos(r);o=Math.tan(n);u=1-i*i*o*o*(1-Math.cos(Math.atan(1/Math.cos(a))));if(u<-1){u=-1}else if(u>+1){u=+1}if(this.face===Ol.TOP){l=Math.acos(u);e.phi=Rn-l;if(h.value===Al.AREA_0){e.lam=a+Rn}else if(h.value===Al.AREA_1){e.lam=a<0?a+zn:a-zn}else if(h.value===Al.AREA_2){e.lam=a-Rn}else{e.lam=a}}else if(this.face===Ol.BOTTOM){l=Math.acos(u);e.phi=l-Rn;if(h.value===Al.AREA_0){e.lam=-a+Rn}else if(h.value===Al.AREA_1){e.lam=-a}else if(h.value===Al.AREA_2){e.lam=-a-Rn}else{e.lam=a<0?-a-zn:-a+zn}}else{var f,p,d;f=u;c=f*f;if(c>=1){d=0}else{d=Math.sqrt(1-c)*Math.sin(a)}c+=d*d;if(c>=1){p=0}else{p=Math.sqrt(1-c)}if(h.value===Al.AREA_1){c=p;p=-d;d=c}else if(h.value===Al.AREA_2){p=-p;d=-d}else if(h.value===Al.AREA_3){c=p;p=d;d=-c}if(this.face===Ol.RIGHT){c=f;f=-p;p=c}else if(this.face===Ol.BACK){f=-f;p=-p}else if(this.face===Ol.LEFT){c=f;f=p;p=-c}e.phi=Math.acos(-d)-Rn;e.lam=Math.atan2(p,f);if(this.face===Ol.RIGHT){e.lam=jl(e.lam,-Rn)}else if(this.face===Ol.BACK){e.lam=jl(e.lam,-zn)}else if(this.face===Ol.LEFT){e.lam=jl(e.lam,+Rn)}}if(this.es!==0){var y;var v,g;y=e.phi<0?1:0;v=Math.tan(e.phi);g=this.b/Math.sqrt(v*v+this.one_minus_f_squared);e.phi=Math.atan(Math.sqrt(this.a*this.a-g*g)/(this.one_minus_f*g));if(y){e.phi=-e.phi}}e.lam+=this.long0;t.x=e.lam;t.y=e.phi;return t}function kl(t,e,r,n){var i;if(t<jn){n.value=Al.AREA_0;i=0}else{i=Math.atan2(e,r);if(Math.abs(i)<=Un){n.value=Al.AREA_0}else if(i>Un&&i<=Rn+Un){n.value=Al.AREA_1;i-=Rn}else if(i>Rn+Un||i<=-(Rn+Un)){n.value=Al.AREA_2;i=i>=0?i-zn:i+zn}else{n.value=Al.AREA_3;i+=Rn}}return i}function jl(t,e){var r=t+e;if(r<-zn){r+=qn}else if(r>+zn){r-=qn}return r}var Gl=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];var Bl={init:Rl,forward:Fl,inverse:Dl,names:Gl};var Ul=[[1,2.2199e-17,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]];var ql=[[-5.20417e-18,.0124,1.21431e-18,-8.45284e-11],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]];var zl=.8487;var Vl=1.3523;var Wl=Bn/5;var Hl=1/Wl;var Xl=18;var Zl=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))};var Yl=function(t,e){return t[1]+e*(2*t[2]+e*3*t[3])};function Jl(t,e,r,n){var i=e;for(;n;--n){var o=t(i);i-=o;if(Math.abs(o)<r){break}}return i}function Ql(){this.x0=this.x0||0;this.y0=this.y0||0;this.long0=this.long0||0;this.es=0;this.title=this.title||"Robinson"}function Kl(t){var e=Ti(t.x-this.long0);var r=Math.abs(t.y);var n=Math.floor(r*Wl);if(n<0){n=0}else if(n>=Xl){n=Xl-1}r=Bn*(r-Hl*n);var i={x:Zl(Ul[n],r)*e,y:Zl(ql[n],r)};if(t.y<0){i.y=-i.y}i.x=i.x*this.a*zl+this.x0;i.y=i.y*this.a*Vl+this.y0;return i}function $l(t){var e={x:(t.x-this.x0)/(this.a*zl),y:Math.abs(t.y-this.y0)/(this.a*Vl)};if(e.y>=1){e.x/=Ul[Xl][0];e.y=t.y<0?-Rn:Rn}else{var r=Math.floor(e.y*Xl);if(r<0){r=0}else if(r>=Xl){r=Xl-1}for(;;){if(ql[r][0]>e.y){--r}else if(ql[r+1][0]<=e.y){++r}else{break}}var n=ql[r];var i=5*(e.y-n[0])/(ql[r+1][0]-n[0]);i=Jl(function(t){return(Zl(n,t)-e.y)/Yl(n,t)},i,jn,100);e.x/=Zl(Ul[r],i);e.y=(5*r+i)*Gn;if(t.y<0){e.y=-e.y}}e.x=Ti(e.x+this.long0);return e}var tc=["Robinson","robin"];var ec={init:Ql,forward:Kl,inverse:$l,names:tc};function rc(){this.name="geocent"}function nc(t){var e=_o(t,this.es,this.a);return e}function ic(t){var e=bo(t,this.es,this.a,this.b);return e}var oc=["Geocentric","geocentric","geocent","Geocent"];var sc={init:rc,forward:nc,inverse:ic,names:oc};var ac={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3};var uc={h:{def:1e5,num:true},azi:{def:0,num:true,degrees:true},tilt:{def:0,num:true,degrees:true},long0:{def:0,num:true},lat0:{def:0,num:true}};function lc(){Object.keys(uc).forEach(function(t){if(typeof this[t]==="undefined"){this[t]=uc[t].def}else if(uc[t].num&&isNaN(this[t])){throw new Error("Invalid parameter value, must be numeric "+t+" = "+this[t])}else if(uc[t].num){this[t]=parseFloat(this[t])}if(uc[t].degrees){this[t]=this[t]*Gn}}.bind(this));if(Math.abs(Math.abs(this.lat0)-Rn)<jn){this.mode=this.lat0<0?ac.S_POLE:ac.N_POLE}else if(Math.abs(this.lat0)<jn){this.mode=ac.EQUIT}else{this.mode=ac.OBLIQ;this.sinph0=Math.sin(this.lat0);this.cosph0=Math.cos(this.lat0)}this.pn1=this.h/this.a;if(this.pn1<=0||this.pn1>1e10){throw new Error("Invalid height")}this.p=1+this.pn1;this.rp=1/this.p;this.h1=1/this.pn1;this.pfact=(this.p+1)*this.h1;this.es=0;var t=this.tilt;var e=this.azi;this.cg=Math.cos(e);this.sg=Math.sin(e);this.cw=Math.cos(t);this.sw=Math.sin(t)}function cc(t){t.x-=this.long0;var e=Math.sin(t.y);var r=Math.cos(t.y);var n=Math.cos(t.x);var i,o;switch(this.mode){case ac.OBLIQ:o=this.sinph0*e+this.cosph0*r*n;break;case ac.EQUIT:o=r*n;break;case ac.S_POLE:o=-e;break;case ac.N_POLE:o=e;break}o=this.pn1/(this.p-o);i=o*r*Math.sin(t.x);switch(this.mode){case ac.OBLIQ:o*=this.cosph0*e-this.sinph0*r*n;break;case ac.EQUIT:o*=e;break;case ac.N_POLE:o*=-(r*n);break;case ac.S_POLE:o*=r*n;break}var s,a;s=o*this.cg+i*this.sg;a=1/(s*this.sw*this.h1+this.cw);i=(i*this.cg-o*this.sg)*this.cw*a;o=s*a;t.x=i*this.a;t.y=o*this.a;return t}function hc(t){t.x/=this.a;t.y/=this.a;var e={x:t.x,y:t.y};var r,n,i;i=1/(this.pn1-t.y*this.sw);r=this.pn1*t.x*i;n=this.pn1*t.y*this.cw*i;t.x=r*this.cg+n*this.sg;t.y=n*this.cg-r*this.sg;var o=Rs(t.x,t.y);if(Math.abs(o)<jn){e.x=0;e.y=t.y}else{var s,a;a=1-o*o*this.pfact;a=(this.p-Math.sqrt(a))/(this.pn1/o+o/this.pn1);s=Math.sqrt(1-a*a);switch(this.mode){case ac.OBLIQ:e.y=Math.asin(s*this.sinph0+t.y*a*this.cosph0/o);t.y=(s-this.sinph0*Math.sin(e.y))*o;t.x*=a*this.cosph0;break;case ac.EQUIT:e.y=Math.asin(t.y*a/o);t.y=s*o;t.x*=a;break;case ac.N_POLE:e.y=Math.asin(s);t.y=-t.y;break;case ac.S_POLE:e.y=-Math.asin(s);break}e.x=Math.atan2(t.x,t.y)}t.x=e.x+this.long0;t.y=e.y;return t}var fc=["Tilted_Perspective","tpers"];var pc={init:lc,forward:cc,inverse:hc,names:fc};function dc(){this.flip_axis=this.sweep==="x"?1:0;this.h=Number(this.h);this.radius_g_1=this.h/this.a;if(this.radius_g_1<=0||this.radius_g_1>1e10){throw new Error}this.radius_g=1+this.radius_g_1;this.C=this.radius_g*this.radius_g-1;if(this.es!==0){var t=1-this.es;var e=1/t;this.radius_p=Math.sqrt(t);this.radius_p2=t;this.radius_p_inv2=e;this.shape="ellipse"}else{this.radius_p=1;this.radius_p2=1;this.radius_p_inv2=1;this.shape="sphere"}if(!this.title){this.title="Geostationary Satellite View"}}function yc(t){var e=t.x;var r=t.y;var n,i,o,s;e=e-this.long0;if(this.shape==="ellipse"){r=Math.atan(this.radius_p2*Math.tan(r));var a=this.radius_p/Rs(this.radius_p*Math.cos(r),Math.sin(r));i=a*Math.cos(e)*Math.cos(r);o=a*Math.sin(e)*Math.cos(r);s=a*Math.sin(r);if((this.radius_g-i)*i-o*o-s*s*this.radius_p_inv2<0){t.x=Number.NaN;t.y=Number.NaN;return t}n=this.radius_g-i;if(this.flip_axis){t.x=this.radius_g_1*Math.atan(o/Rs(s,n));t.y=this.radius_g_1*Math.atan(s/n)}else{t.x=this.radius_g_1*Math.atan(o/n);t.y=this.radius_g_1*Math.atan(s/Rs(o,n))}}else if(this.shape==="sphere"){n=Math.cos(r);i=Math.cos(e)*n;o=Math.sin(e)*n;s=Math.sin(r);n=this.radius_g-i;if(this.flip_axis){t.x=this.radius_g_1*Math.atan(o/Rs(s,n));t.y=this.radius_g_1*Math.atan(s/n)}else{t.x=this.radius_g_1*Math.atan(o/n);t.y=this.radius_g_1*Math.atan(s/Rs(o,n))}}t.x=t.x*this.a;t.y=t.y*this.a;return t}function vc(t){var e=-1;var r=0;var n=0;var i,o,s,a;t.x=t.x/this.a;t.y=t.y/this.a;if(this.shape==="ellipse"){if(this.flip_axis){n=Math.tan(t.y/this.radius_g_1);r=Math.tan(t.x/this.radius_g_1)*Rs(1,n)}else{r=Math.tan(t.x/this.radius_g_1);n=Math.tan(t.y/this.radius_g_1)*Rs(1,r)}var u=n/this.radius_p;i=r*r+u*u+e*e;o=2*this.radius_g*e;s=o*o-4*i*this.C;if(s<0){t.x=Number.NaN;t.y=Number.NaN;return t}a=(-o-Math.sqrt(s))/(2*i);e=this.radius_g+a*e;r*=a;n*=a;t.x=Math.atan2(r,e);t.y=Math.atan(n*Math.cos(t.x)/e);t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if(this.shape==="sphere"){if(this.flip_axis){n=Math.tan(t.y/this.radius_g_1);r=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+n*n)}else{r=Math.tan(t.x/this.radius_g_1);n=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+r*r)}i=r*r+n*n+e*e;o=2*this.radius_g*e;s=o*o-4*i*this.C;if(s<0){t.x=Number.NaN;t.y=Number.NaN;return t}a=(-o-Math.sqrt(s))/(2*i);e=this.radius_g+a*e;r*=a;n*=a;t.x=Math.atan2(r,e);t.y=Math.atan(n*Math.cos(t.x)/e)}t.x=t.x+this.long0;return t}var gc=["Geostationary Satellite View","Geostationary_Satellite","geos"];var mc={init:dc,forward:yc,inverse:vc,names:gc};var _c=function(t){t.Proj.projections.add(Os);t.Proj.projections.add(Ws);t.Proj.projections.add(Js);t.Proj.projections.add(ua);t.Proj.projections.add(da);t.Proj.projections.add(_a);t.Proj.projections.add(Ea);t.Proj.projections.add(Ta);t.Proj.projections.add(Da);t.Proj.projections.add(Ya);t.Proj.projections.add(pu);t.Proj.projections.add(bu);t.Proj.projections.add(Iu);t.Proj.projections.add(Tu);t.Proj.projections.add(Du);t.Proj.projections.add(qu);t.Proj.projections.add(Zu);t.Proj.projections.add($u);t.Proj.projections.add(sl);t.Proj.projections.add(hl);t.Proj.projections.add(vl);t.Proj.projections.add(xl);t.Proj.projections.add(El);t.Proj.projections.add(Tl);t.Proj.projections.add(Bl);t.Proj.projections.add(ec);t.Proj.projections.add(sc);t.Proj.projections.add(pc);t.Proj.projections.add(mc)};jo.defaultDatum="WGS84";jo.Proj=go;jo.WGS84=new jo.Proj("WGS84");jo.Point=hs;jo.toPoint=Lo;jo.defs=gi;jo.nadgrid=io;jo.transform=Ao;jo.mgrs=Xo;jo.version="__VERSION__";_c(jo);var bc=jo;const xc=bc;class Sc{static getProj4sCascader(){const t=Object.keys(xn).map(t=>{const e={value:t,label:t,children:[]};e.children=xn[t].map(t=>{return{value:t.id,label:t.name}});return e});return t}static getProj4sDetail(t){let e="";const r=Object.keys(xn);for(const n of r){const r=xn[n];for(const n of r){if(n.id===t){e=n.strProject;break}}if(e!==""){break}}return e}static proj4TransformByEpsg(t,e,r){let n=Sn(t);let i=Sn(e);let o=Sc.getProj4sDetail(n);let s=Sc.getProj4sDetail(i);let a=xc(o,s);let u=a.forward(r);return u}static proj4Transform(t,e,r){let n=xc(t,e);let i=n.forward(r);return i}}var wc=Sc;var Cc=function(t,e,r,n){this.listeners={};this.object=t;this.eventTypes=[];this.extensions={};this.extensionCount={};zt(this,n);if(r!=null){for(var i=0,o=r.length;i<o;i++){this.addEventType(r[i])}}};Cc.prototype.destroy=function(){for(var t in this.extensions){if(typeof this.extensions[t]!=="boolean"){this.extensions[t].destroy()}}this.extensions=null;this.listeners=null;this.object=null;this.eventTypes=null};Cc.prototype.addEventType=function(t){if(!this.listeners[t]){this.eventTypes.push(t);this.listeners[t]=[]}};Cc.prototype.on=function(t){for(var e in t){if(e!=="scope"&&t.hasOwnProperty(e)){this.register(e,t.scope,t[e])}}};Cc.prototype.register=function(t,e,r,n){if(t in Cc&&!this.extensions[t]){this.extensions[t]=new Cc[t](this)}if(r!=null&&Kt(this.eventTypes,t)!==-1){if(e==null){e=this.object}var i=this.listeners[t];if(!i){i=[];this.listeners[t]=i;this.extensionCount[t]=0}var o={obj:e,func:r};if(n){i.splice(this.extensionCount[t],0,o);if(typeof n==="object"&&n.extension){this.extensionCount[t]++}}else{i.push(o)}}};Cc.prototype.registerPriority=function(t,e,r){this.register(t,e,r,true)};Cc.prototype.un=function(t){for(var e in t){if(e!=="scope"&&t.hasOwnProperty(e)){this.unregister(e,t.scope,t[e])}}};Cc.prototype.unregister=function(t,e,r){if(e==null){e=this.object}var n=this.listeners[t];if(n!=null){for(var i=0,o=n.length;i<o;i++){if(n[i].obj===e&&n[i].func===r){n.splice(i,1);break}}}};Cc.prototype.remove=function(t){if(this.listeners[t]!=null){this.listeners[t]=[]}};Cc.prototype.triggerEvent=function(t,e){var r=this.listeners[t];if(!r||r.length==0){return undefined}if(e==null){e={}}e.object=this.object;if(!e.type){e.type=t}r=r.slice();var n;for(var i=0,o=r.length;i<o;i++){var s=r[i];n=s.func.apply(s.obj,[e.result]);if(n!=undefined&&n==false){break}}return n};var Ic=function(t){this.data=null;this.keepData=false;this.indent="    ";this.space=" ";this.newline="\n";this.level=0;this.pretty=false;this.nativeJSON=function(){return!!(window.JSON&&typeof JSON.parse==="function"&&typeof JSON.stringify==="function")}();zt(this,t);this.options=t;this.serialize={object:function(t){if(t==null){return"null"}if(t.constructor===Date){return this.serialize.date.apply(this,[t])}if(t.constructor===Array){return this.serialize.array.apply(this,[t])}var e=["{"];this.level+=1;var r,n,i;var o=false;for(r in t){if(t.hasOwnProperty(r)){n=this.write.apply(this,[r,this.pretty]);i=this.write.apply(this,[t[r],this.pretty]);if(n!=null&&i!=null){if(o){e.push(",")}e.push(this.writeNewline(),this.writeIndent(),n,":",this.writeSpace(),i);o=true}}}this.level-=1;e.push(this.writeNewline(),this.writeIndent(),"}");return e.join("")},array:function(t){var e;var r=["["];this.level+=1;for(var n=0,i=t.length;n<i;++n){e=this.write.apply(this,[t[n],this.pretty]);if(e!=null){if(n>0){r.push(",")}r.push(this.writeNewline(),this.writeIndent(),e)}}this.level-=1;r.push(this.writeNewline(),this.writeIndent(),"]");return r.join("")},string:function(t){var e={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};if(/["\\\x00-\x1f]/.test(t)){return'"'+t.replace(/([\x00-\x1f\\"])/g,function(t,r){var n=e[r];if(n){return n}n=r.charCodeAt();return"\\u00"+Math.floor(n/16).toString(16)+(n%16).toString(16)})+'"'}return'"'+t+'"'},number:function(t){return isFinite(t)?String(t):"null"},boolean:function(t){return String(t)},date:function(t){function e(t){return t<10?"0"+t:t}return'"'+t.getFullYear()+"-"+e(t.getMonth()+1)+"-"+e(t.getDate())+"T"+e(t.getHours())+":"+e(t.getMinutes())+":"+e(t.getSeconds())+'"'}}};Ic.prototype.read=function(t,e){var r;if(this.nativeJSON){try{r=JSON.parse(t,e)}catch(t){}}if(this.keepData){this.data=r}return r};Ic.prototype.write=function(t,e){this.pretty=!!e;var r=null;var n=typeof t;if(this.serialize[n]){try{r=!this.pretty&&this.nativeJSON?JSON.stringify(t):this.serialize[n].apply(this,[t])}catch(t){Console.error("Trouble serializing: "+t)}}return r};Ic.prototype.writeIndent=function(){var t=[];if(this.pretty){for(var e=0;e<this.level;++e){t.push(this.indent)}}return t.join("")};Ic.prototype.writeNewline=function(){return this.pretty?this.newline:""};Ic.prototype.writeSpace=function(){return this.pretty?this.space:""};Zondy.Service.JSONFormat=Ic;var Ec=r(523);var Pc=r(524);var Mc=window.fetch;var Lc=Zondy.CORS=Zondy.CORS||window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest;var Nc=Zondy.RequestTimeout=Zondy.RequestTimeout||45e3;var Tc=Zondy.FetchRequest={commit:function(t,e,r,n){t=t?t.toUpperCase():t;switch(t){case"GET":return this._get(e,r,n);case"POST":return this._post(e,r,n);case"PUT":return this._put(e,r,n);case"DELETE":return this._delete(e,r,n);default:return this._get(e,r,n)}},_get:function(t,e,r){r=r||{};var n="GET";t=this._processUrl(t,r);t=Zondy.Util.urlAppend(t,this._getParameterString(e||{}));if(!this.urlIsLong(t)){return this._fetch(t,e,r,n)}return this._postSimulatie(n,t.substring(0,t.indexOf("?")-1),e,r)},_delete:function(t,e,r){r=r||{};var n="DELETE";t=this._processUrl(t,r);t=Zondy.Util.urlAppend(t,this._getParameterString(e||{}));if(!this.urlIsLong(t)&&Lc){return this._fetch(t,e,r,n)}return this._postSimulatie(n,t.substring(0,t.indexOf("?")-1),e,r)},_post:function(t,e,r){r=r||{};return this._fetch(this._processUrl(t,r),e,r,"POST")},_put:function(t,e,r){r=r||{};return this._fetch(this._processUrl(t,r),e,r,"PUT")},urlIsLong:function(t){var e=0,r=null;for(var n=0,i=t.length;n<i;n++){r=t.charCodeAt(n);if(r<127){e++}else if(128<=r&&r<=2047){e+=2}else if(2048<=r&&r<=65535){e+=3}}return e<2e3?false:true},_postSimulatie:function(t,e,r,n){var i=e.indexOf("?")>-1?"&":"?";e+=i+"_method="+t;if(typeof r!=="string"){r=JSON.stringify(r)}return this._post(e,r,n)},_processUrl:function(t,e){if(this._isMVTRequest(t)){return t}if(e&&e.proxy){if(typeof e.proxy==="function"){t=e.proxy(t)}else{t=decodeURIComponent(t);t=e.proxy+encodeURIComponent(t)}}return t},_fetch:function(t,e,r,n){r=r||{};r.headers=r.headers||{};if(!r.headers["Content-Type"]){r.headers["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8"}if(r.timeout){return this._timeout(r.timeout,Mc(t,{method:n,headers:r.headers,body:n==="PUT"||n==="POST"?e:undefined,credentials:r.withCredentials?"include":"omit",mode:"cors",timeout:Nc}).then(function(t){return t}))}return Mc(t,{method:n,body:n==="PUT"||n==="POST"?e:undefined,headers:r.headers,credentials:r.withCredentials?"include":"omit",mode:"cors",timeout:Nc}).then(function(t){return t}).catch(function(t){return t})},_timeout:function(t,e){return new Promise(function(r,n){setTimeout(function(){n(new Error("timeout"))},t);e.then(r,n)})},_getParameterString:function(t){var e=[];for(var r in t){var n=t[r];if(n!=null&&typeof n!=="function"){var i;if(typeof n==="object"&&n.constructor===Array){var o=[];var s;for(var a=0,u=n.length;a<u;a++){s=n[a];o.push(encodeURIComponent(s===null||s===undefined?"":s))}i="["+o.join(",")+"]"}else{i=encodeURIComponent(n)}e.push(encodeURIComponent(r)+"="+i)}}return e.join("&")},_isMVTRequest:function(t){return t.indexOf(".mvt")>-1||t.indexOf(".pbf")>-1}};Zondy.Service.FetchRequest=Tc;Zondy.Service.CORS=Lc;Zondy.Service.RequestTimeout=Nc;class Oc{constructor(t,e){var r=this;this.EVENT_TYPES=["processCompleted","processFailed"];this.events=null;this.eventListeners=null;this.url=null;this.urls=null;this.index=null;this.length=null;this.options=null;this.totalTimes=null;this.POLLING_TIMES=3;this._processSuccess=null;this._processFailed=null;this.isInTheSameDomain=null;if(Vt(t)){r.urls=t;r.length=t.length;r.totalTimes=r.length;if(r.length===1){r.url=t[0]}else{r.index=parseInt(Math.random()*r.length);r.url=t[r.index]}}else{r.totalTimes=1;r.url=t}e=e||{};if(e){zt(this,e)}r.isInTheSameDomain=ce(r.url);r.events=new Cc(r,null,r.EVENT_TYPES,true);if(r.eventListeners instanceof Object){r.events.on(r.eventListeners)}}destroy(){var t=this;if(Vt(t.urls)){t.urls=null;t.index=null;t.length=null;t.totalTimes=null}t.url=null;t.options=null;t._processSuccess=null;t._processFailed=null;t.isInTheSameDomain=null;t.EVENT_TYPES=null;if(t.events){t.events.destroy();t.events=null}if(t.eventListeners){t.eventListeners=null}}request(t){var e=this;t.url=t.url||e.url;t.isInTheSameDomain=e.isInTheSameDomain;e.calculatePollingTimes();e._processSuccess=t.success;e._processFailed=t.failure;t.scope=e;t.success=e.getUrlCompleted;t.failure=e.getUrlFailed;e.options=t;e._commit(e.options)}getUrlCompleted(t){var e=this;e._processSuccess(t)}getUrlFailed(t){var e=this;if(e.totalTimes>0){e.totalTimes--;e.ajaxPolling()}else{e._processFailed(t)}}ajaxPolling(){var t=this,e=t.options.url,r=/^http:\/\/([a-z]{9}|(\d+\.){3}\d+):\d{0,4}/;t.index=parseInt(Math.random()*t.length);t.url=t.urls[t.index];e=e.replace(r,r.exec(t.url)[0]);t.options.url=e;t.options.isInTheSameDomain=ce(e);t._commit(t.options)}calculatePollingTimes(){var t=this;if(t.times){if(t.totalTimes>t.POLLING_TIMES){if(t.times>t.POLLING_TIMES){t.totalTimes=t.POLLING_TIMES}else{t.totalTimes=t.times}}else{if(t.times<t.totalTimes){t.totalTimes=t.times}}}else{if(t.totalTimes>t.POLLING_TIMES){t.totalTimes=t.POLLING_TIMES}}t.totalTimes--}serviceProcessCompleted(t){t=fe(t);this.events.triggerEvent("processCompleted",{result:t})}serviceProcessFailed(t){t=fe(t);var e=t;this.events.triggerEvent("processFailed",{result:e})}_commit(t){if(t.method==="POST"||t.method==="PUT"){if(t.params){t.url=ne(t.url,ee(t.params||{}))}t.params=t.data}Tc.commit(t.method,t.url,t.params,{headers:t.headers,withCredentials:t.withCredentials,timeout:t.async?0:null,proxy:t.proxy}).then(function(e){let r;if(e.text){r=(()=>e.text())}else{r=(()=>e.json())}if(e.status==200){return new Promise(n=>{r().then(function(e){if(!e)return;var r=null;if(typeof e==="string"&&(e.toLowerCase()==="true"||e.toLowerCase()==="false")){r={};if(e.toLowerCase()==="true"){r.succeed=true}else{r.succeed=false;r.error=true}}else if(typeof e==="string"){r=(new Ic).read(e)}if(!r&&isNaN(r)||r.error){if(r&&r.error){r={error:r.error}}else{r={error:true}}}if(r.error){var n=t.scope?ge(t.failure,t.scope):t.failure;n(r)}else{if(!isNaN(r)){r={value:r}}if(typeof r==="string"){r={value:r}}if(Object.prototype.toString.call(r)!=="[object Array]"){r.succeed=r.succeed===undefined?true:r.succeed}else{r={value:r,succeed:true}}var i=t.scope?ge(t.success,t.scope):t.success;i(r)}});n(e.status)},t=>{console.log("【服务】【基础服务】【抽象类Fetch返回异常】",t)})}else{return new Promise(n=>{r().then(function(e){if(!e)return;var r=null;if(typeof e==="string"&&(e.toLowerCase()==="true"||e.toLowerCase()==="false")){r={};r.succeed=false}else if(typeof e==="string"){r=(new Ic).read(e)}if(!r&&isNaN(r)||!r.success){r={succeed:false}}var n=t.scope?ge(t.failure,t.scope):t.failure;n(r)});n(e.status)},t=>{console.log("【服务】【基础服务】【抽象类Fetch返回异常】",t)})}}).catch(function(e){let r={error:true,value:{}};var n=t.scope?ge(t.failure,t.scope):t.failure;n(r)}).then(function(t,e){})}}qt.Service.CommonServiceBase=Oc;class Ac extends Oc{constructor(t,e){e=e||{};super(t,e);this.CLASS_NAME="Zondy.IgsServiceBase"}destroy(){super.destroy();var t=this;if(t.events){t.events.un(t.eventListeners);t.events.listeners=null;t.events.destroy();t.events=null;t.eventListeners=null}}processAsync(t){var e=this;e.request({method:t&&t.method?t.method:"GET",scope:e,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed,data:t&&t.data?t.data:null,headers:t&&t.headers?t.headers:null})}serviceProcessCompleted(t){var e=this;t=fe(t);if(t.succeed){e.events&&e.events.triggerEvent("processCompleted",{result:t})}else{e.events&&e.events.triggerEvent("processFailed",{result:t})}}}Zondy.Service.IgsServiceBase=Ac;const Rc={Events:Cc,CommonServiceBase:Oc,CORS:Lc,RequestTimeout:Nc,FetchRequest:Tc,IgsServiceBase:Ac,JSONFormat:Ic};var Fc=Rc;var Dc=function(t){var e=t!=undefined?t:{};this.IsClipLine=e.IsClipLine!=undefined?e.IsClipLine:true;this.isXYScaleOut=e.isXYScaleOut!=undefined?e.isXYScaleOut:false;this.NoteDirection=e.NoteDirection!=undefined?e.NoteDirection:1;this.LineWidth=e.LineWidth!=undefined?e.LineWidth:.05;this.MaxAngle=e.MaxAngle!=undefined?e.MaxAngle:90;this.MinDist=e.MinDist!=undefined?e.MinDist:10;this.IsAbs=e.IsAbs!=undefined?e.IsAbs:false;this.IsComma=e.IsComma!=undefined?e.IsComma:false;this.DigitNum=e.DigitNum!=undefined?e.DigitNum:0;this.FormatNo=e.FormatNo!=undefined?e.FormatNo:0;this.LogFlag=e.LogFlag!=undefined?e.LogFlag:0;this.Prefix=e.Prefix!=undefined?e.Prefix:"";this.Suffix=e.Suffix!=undefined?e.Suffix:"";this.ColorNo=e.ColorNo!=undefined?e.ColorNo:0;this.FixSize=e.FixSize!=undefined?e.FixSize:.01;this.FontNo=e.FontNo!=undefined?e.FontNo:0};qt.Object.ContourAnalyse.ContourNoteParam=Dc;var kc=function(t){var e=t!==undefined?t:{};this.XScale=e.XScale!==undefined?e.XScale:2;this.YScale=e.YScale!==undefined?e.YScale:10;this.LineType=e.LineType!==undefined?e.LineType:0;this.SubLineType=e.SubLineType!==undefined?e.SubLineType:0};qt.Object.ContourAnalyse.SlopLineParam=kc;var jc=function(t){var e=t!=undefined?t:{};this.PatID=e.PatID!=undefined?e.PatID:0;this.FillMode=e.FillMode!=undefined?e.FillMode:0;this.FillColor=e.FillColor!=undefined?e.FillColor:1;this.PatHeight=e.PatHeight!=undefined?e.PatHeight:1;this.PatWidth=e.PatWidth!=undefined?e.PatWidth:1;this.PatAngle=e.PatAngle!=undefined?e.PatAngle:1;this.PatColor=e.PatColor!=undefined?e.PatColor:1;this.OutPenWidth=e.OutPenWidth!=undefined?e.OutPenWidth:1;this.OverMethod=e.OverMethod!=undefined?e.OverMethod:0};qt.Object.ContourAnalyse.ContourRegionInfo=jc;var Gc=function(t){var e=t!=undefined?t:{};this.ZValue=e.ZValue!=undefined?e.ZValue:1;this.LineInfo=e.LineInfo!=undefined?e.LineInfo:null;this.RegInfo=e.RegInfo!=undefined?e.RegInfo:null;this.IsOutputNote=e.IsOutputNote!=undefined?e.IsOutputNote:false};qt.Object.ContourAnalyse.ContourZValue=Gc;var Bc=function(t){var e=t!=undefined?t:{};this.IsSmoothLine=e.IsSmoothLine!==undefined?e.IsSmoothLine:false;this.SmoothGrade=e.SmoothGrade!==undefined?e.SmoothGrade:1;this.IsMakeReg=e.IsMakeReg!==undefined?e.IsMakeReg:false;this.IsMakeNote=e.IsMakeNote!==undefined?e.IsMakeNote:false;this.IsMakeSLin=e.IsMakeSLin!==undefined?e.IsMakeSLin:false;this.MapWay=e.MapWay!==undefined?e.MapWay:1;this.FrameWidth=e.FrameWidth!==undefined?e.FrameWidth:1;this.FrameHeight=e.FrameHeight!==undefined?e.FrameHeight:1;this.IsDrawColorScl=e.IsDrawColorScl!==undefined?e.IsDrawColorScl:false;this.IsSaveEdge=e.IsSaveEdge!==undefined?e.IsSaveEdge:false;this.NoteParam=e.NoteParam!==undefined?e.NoteParam:new qt.Object.ContourAnalyse.ContourNoteParam;this.SlopLineParam=e.SlopLineParam!==undefined?e.SlopLineParam:new qt.Object.ContourAnalyse.SlopLineParam;this.ZValues=e.ZValues!==undefined?e.ZValues:new qt.Object.ContourAnalyse.ContourZValue};qt.Object.ContourAnalyse.ContourParam=Bc;var Uc=function(t){var e=t!==undefined?t:{};this.SfClsURL=e.SfClsURL!==undefined?e.SfClsURL:null;this.FieldName=e.FieldName!==undefined?e.FieldName:null;this.XCellNum=e.XCellNum!==undefined?e.XCellNum:200;this.Bound=e.Bound!==undefined?e.Bound:null;this.CalN=e.CalN!==undefined?e.CalN:null;this.CalM=e.CalM!==undefined?e.CalM:null;this.bIsCalInValidCtrlPnt=e.bIsCalInValidCtrlPnt!==undefined?e.bIsCalInValidCtrlPnt:false;this.nYCtrlNum=e.nYCtrlNum!==undefined?e.nYCtrlNum:null;this.nXCtrlNum=e.nXCtrlNum!==undefined?e.nXCtrlNum:null;this.nLayerNum=e.nLayerNum!==undefined?e.nLayerNum:null};qt.Object.ContourAnalyse.MeshingParam=Uc;var qc=function(t){var e=t!==undefined?t:{};zt(this,e);this.netCls=e.netCls!==undefined?e.netCls:null;this.flagPosStr=e.flagPosStr!==undefined?e.flagPosStr:null;this.barrierPosStr=e.barrierPosStr!==undefined?e.barrierPosStr:null;this.weight=e.weight!==undefined?e.weight:null;this.mode=e.mode!==undefined?e.mode:null;this.isTour=e.isTour!==undefined?e.isTour:false;this.isTravel=e.isTravel!==undefined?e.isTravel:false;this.usedTWgt=e.usedTWgt!==undefined?e.usedTWgt:false;this.turnWgt=e.turnWgt!==undefined?e.turnWgt:null;this.roadName=e.roadName!==undefined?e.roadName:"name"};qt.Object.NetAnalyse=qc;class zc{constructor(t){zt(this,t);this.baseUrl=t&&t.baseUrl?t.baseUrl:null;this.ip=t&&t.ip?t.ip:"localhost";this.port=t&&t.port?t.port:"6163";this.partUrl=t&&t.partUrl?t.partUrl:null;this.networkProtocol=t&&t.networkProtocol?t.networkProtocol:location.protocol.split(":")[0]||"http";this.domain=t&&t.domain?t.domain:""}getFullUrl(){var t=this;var e=null;if(qt.Util.isArray(t.ip)){for(var r=0;r<t.ip.length;r++){e=new Array;var n=null;if(Vt(t.port)){n=t.port[r]!==undefined?t.port[r]:"6163"}else{n=t.port!==undefined?t.port:"6163"}var i=null;if(Vt(t.partUrl)){i=t.partUrl[r]!==undefined?t.partUrl[r]:null}else{i=t.partUrl!==undefined?t.partUrl:null}if(t.domain===""){t.domainStr=t.networkProtocol+"://"+t.ip[r]+":"+n}else{t.domainStr=t.domain}e.push(encodeURI((t.domainStr+"/"+t.baseUrl+"/"+i).trim()))}}else{if(t.domain===""){t.domainStr=t.networkProtocol+"://"+t.ip+":"+t.port}else{t.domainStr=t.domain}e=encodeURI((t.domainStr+"/"+t.baseUrl+"/"+t.partUrl).trim())}return e}}qt.Service.ServiceBase=zc;class Vc extends zc{constructor(t){var e=t||{};super(e);this.netClsUrl=e.netClsUrl!==undefined?e.netClsUrl:null;this.flagPosStr=e.flagPosStr!==undefined?e.flagPosStr:null;this.analyTp=e.analyTp!==undefined?e.analyTp:"UserMode";this.weight=e.weight!==undefined?e.weight:",Weight1,Weight1";this.outFormat=e.outFormat!==undefined?e.outFormat:"JSON";this.elementType=e.elementType!==undefined?e.elementType:2;this.nearDis=e.nearDis!==undefined?e.nearDis:.001;this.barrierPosStr=e.barrierPosStr!==undefined?e.barrierPosStr:null;this.roadName=e.roadName!==undefined?e.roadName:"name";this.baseUrl="igs/rest/netAnaly"}getNetInfo(t,e,r,n){if(t==null||t==undefined){t="weight"}this.partUrl="netClsInfo?netCls="+this.netClsUrl+"&type="+t;var i=this;var o=i.getFullUrl();var s=new Ac(o,{eventListeners:{scope:i,processCompleted:e,processFailed:r}});s.processAsync()}addNetFlag(t,e,r,n,i){var o=null;var s={};if(n!=null&&n.toUpperCase()=="POST"){s.dotVal=t;this.partUrl="netClsFlag?netCls="+this.netClsUrl+"&type="+this.elementType+"&nearDis="+this.nearDis}else{this.partUrl="netClsFlag?netCls="+this.netClsUrl+"&type="+this.elementType+"&value="+t+"&nearDis="+this.nearDis}var a=this;var u=a.getFullUrl();var l=new Ac(u,{eventListeners:{scope:a,processCompleted:e,processFailed:r}});if(n!=null&&n.toUpperCase()=="POST"){l.processAsync({method:"POST",data:JSON.stringify(s),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}else{l.processAsync()}}netAnalyse(t,e,r,n){this.partUrl="netAnalyse";var i=this;var o=i.getFullUrl();var s=new Ac(o,{eventListeners:{scope:i,processCompleted:e,processFailed:r}});s.processAsync({method:"POST",data:JSON.stringify(t),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}comNetAnalyse(t,e,r,n){this.partUrl="comNetAnalyse";var i=this;var o=i.getFullUrl();var s=new Ac(o,{eventListeners:{scope:i,processCompleted:e,processFailed:r}});s.processAsync({method:"POST",data:JSON.stringify(t),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}pluNetAnalyse(t,e,r,n){this.partUrl="pluNetAnalyse";var i=this;var o=i.getFullUrl();var s=new Ac(o,{eventListeners:{scope:i,processCompleted:e,processFailed:r}});s.processAsync({method:"POST",data:JSON.stringify(t),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}qt.Service.NetAnalysisExtent=Vc;const Wc={g3dNone:0,g3dVectorLayer:1,g3dModelLayer:2,g3dTerrainLayer:3,g3dLabelLayer:4,g3dCloudLayer:5,g3dPanoramaLayer:6,type2DMapRefLayer:7,g3dServerLayer:8,g3dGroupLayer:9,g3dCacheLayer:10,g3dPointCloudLayer:11,g3dGridModelLayer:12};const Hc={UnKnow:"UnKnow",Vector:"Vector",TiltPhotography:"TiltPhotography",Model:"Model",BIM:"BIM",PointCloud:"PointCloud",PipeLine:"PipeLine",GeoModel:"GeoModel",GeoGrid:"GeoGrid",GeoDrill:"GeoDrill",GeoSection:"GeoSection"};class Xc extends zc{constructor(t){var e=t||{};e.baseUrl="igs/rest/g3d";super(e)}}qt.Catalog.G3DService=Xc;class Zc extends Xc{constructor(t){var e=t||{};super(e);this.docName=e.docName||null;this.gdbp=e.gdbp||null;this.proj=e.proj||null;this.f=e.f||"json";this.guid=e.guid!==undefined?e.guid:ve();this.encryptPassword=e.encryptPassword||null;this.layerindex=e.layerindex||0;this.geometryType=e.geometryType||null;this.geometry=e.geometry||null;this.where=e.where||null;this.structs=e.structs||{IncludeAttribute:true,IncludeGeometry:false,IncludeWebGraphic:false};this.page=e.page||0;this.pageCount=e.pageCount||20;this.objectIds=e.objectIds||null;this.orderField=e.orderField||null;this.rtnLabel=e.rtnLabel===undefined?false:e.rtnLabel;this.isAsc=e.isAsc===undefined?false:e.isAsc;this.format=e.format||"json";this.systemLib=e.systemLib||null;this.layerRenderIndex=e.layerRenderIndex||0;this.extendedKeys=t.extendedPropKeys||null}GetDocList(t,e){var r=this;r.partUrl="GetDocList";var n=r.getFullUrl();var i=new Ac(n,{eventListeners:{scope:r,processCompleted:t,processFailed:e}});i.processAsync()}GetDocInfo(t,e){var r=this;r.partUrl=r.docName+"/GetDocInfo?&f=json";if(r.extendedKeys){r.partUrl+="&extendedKeys="+r.extendedKeys}var n=r.getFullUrl();var i=new Ac(n,{eventListeners:{scope:r,processCompleted:t,processFailed:e}});i.processAsync()}GetLayerInfo(t,e){var r=this;var n="layerinfo?gdbp="+this.gdbp;if(r.proj){n+="&proj="+r.proj}if(r.f){n+="&f="+r.f}if(r.guid){n+="&guid="+r.guid}if(r.encryptPassword){n+="&encryptPassword="+r.encryptPassword}r.partUrl=n;var i=r.getFullUrl();var o=new Ac(i,{eventListeners:{scope:r,processCompleted:t,processFailed:e}});o.processAsync()}GetFeature(t,e){var r=this;var n="getFeature?";if(r.gdbp&&r.gdbp!==""){n+="gdbp="+r.gdbp}else if(r.docName){n+="docName="+r.docName+"&layerindex="+r.layerindex}if(r.geometryType){n+="&geometryType="+r.geometryType}if(r.geometry){n+="&geometry="+r.geometry}if(r.where){n+="&where="+r.where}if(r.structs){n+="&structs="+JSON.stringify(r.structs)}if(r.page){n+="&page="+r.page}if(r.pageCount){n+="&pageCount="+r.pageCount}if(r.objectIds){n+="&objectIds="+r.objectIds}if(r.orderField){n+="&orderField="+r.orderField}if(r.rtnLabel){n+="&rtnLabel="+r.rtnLabel}if(r.isAsc){n+="&isAsc="+r.isAsc}if(r.guid){n+="&guid="+r.guid}if(r.format){n+="&format="+r.format}if(r.f){n+="&f="+r.f}r.partUrl=n;var i=r.getFullUrl();var o=new Ac(i,{eventListeners:{scope:r,processCompleted:t,processFailed:e}});o.processAsync()}SetSystemLibraryByDoc(t,e){var r=this;var n=r.docName+"/setSystemLibrary?systemLib="+r.systemLib+"&layerRenderIndex="+r.layerRenderIndex;if(r.f){n+="&f="+r.f}if(r.guid){n+="&guid="+r.guid}r.partUrl=n;var i=r.getFullUrl();var o=new Ac(i,{eventListeners:{scope:r,processCompleted:t,processFailed:e}});o.processAsync()}}qt.Catalog.G3DMapDoc=Zc;class Yc extends zc{constructor(t){var e=t||{};e.baseUrl="igs/rest/mrcs";super(e)}}qt.Catalog.CatalogService=Yc;class Jc extends Yc{constructor(t){var e=t||{};super(e);this.SystemLibID=e.SystemLibID!==undefined?e.SystemLibID:0;this.ColorNO=e.ColorNO!==undefined?e.ColorNO:6;this.Red=e.Red!==undefined?e.Red:0;this.Green=e.Green!==undefined?e.Green:0;this.Blue=e.Blue!==undefined?e.Blue:0;this.addNew=e.addNew!==undefined?e.addNew:false}getColorNO(t,e,r){var n=this;if(t!==null&&t!==undefined){if(t.SystemLibID!==undefined){n.SystemLibID=t.SystemLibID}if(t.Red!==undefined){n.Red=t.Red}if(t.Green!==undefined){n.Green=t.Green}if(t.Blue!==undefined){n.Blue=t.Blue}if(t.addNew!==undefined){n.addNew=t.addNew}}n.partUrl="ColorLib/getColorNO?f=json&libID="+n.SystemLibID+"&r="+n.Red+"&g="+n.Green+"&b="+n.Blue+"&addNew="+n.addNew;var i=n.getFullUrl();var o=new Ac(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}getColorRGB(t,e,r){var n=this;if(t!==null&&t!==undefined){if(t.SystemLibID!==undefined){n.SystemLibID=t.SystemLibID}if(t.ColorNO!==undefined){n.ColorNO=t.ColorNO}}n.partUrl="ColorLib/getColorRGB?f=json&libID="+n.SystemLibID+"&colorNO="+n.ColorNO;var i=n.getFullUrl();var o=new Ac(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}}Zondy.Catalog.ColorInfo=Jc;class Qc extends Yc{constructor(t){var e=t||{};super(e);this.serverName=e.serverName!==undefined?e.serverName:null;this.gdbName=e.gdbName!==undefined?e.gdbName:null;this.dsName=e.dsName!==undefined?e.dsName:null;this.rcsName=e.rcsName!==undefined?e.rcsName:null;this.User=e.User!==undefined?e.User:null;this.Password=e.Password!==undefined?e.Password:null;this.containAll=e.containAll!==undefined?e.containAll:true}getServerList(t,e){var r=this;r.partUrl="datasource?f=json";var n=r.getFullUrl();var i=new Ac(n,{eventListeners:{scope:r,processCompleted:t,processFailed:e}});i.processAsync()}getGDBList(t,e){var r=this;if(r.serverName.toLowerCase()==="mapgislocal"){r.partUrl="datasource/"+r.serverName+"?f=json"}else{r.partUrl="datasource/"+r.serverName+"?user="+r.User+"&psw="+r.Password+"&f=json"}var n=r.getFullUrl();var i=new Ac(n,{eventListeners:{scope:r,processCompleted:t,processFailed:e}});i.processAsync()}getDsList(t,e){var r=this;if(r.serverName.toLowerCase()==="mapgislocal"){r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/ds?containAll="+r.containAll+"&f=json"}else{r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/ds?user="+r.User+"&psw="+r.Password+"&containAll="+r.containAll+"&f=json"}var n=r.getFullUrl();var i=new Ac(n,{eventListeners:{scope:r,processCompleted:t,processFailed:e}});i.processAsync()}getRcsList(t,e){var r=this;if(r.serverName.toLowerCase()==="mapgislocal"){r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/rcs?f=json"}else{r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/rcs?user="+r.User+"&psw="+r.Password+"&containAll="+r.containAll+"&f=json"}var n=r.getFullUrl();var i=new Ac(n,{eventListeners:{scope:r,processCompleted:t,processFailed:e}});i.processAsync()}getProjectList(t,e){var r=this;r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"?f=json";var n=r.getFullUrl();var i=new Ac(n,{eventListeners:{scope:r,processCompleted:t,processFailed:e}});i.processAsync()}getProjectInfo(t,e,r){var n=this;n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/"+t+"?f=json";var i=n.getFullUrl();var o=new Ac(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}AttachGDB(t,e,r){var n=this;if(n.serverName===null||n.gdbName===null||t===null){return}n.partUrl="gdb/attach/"+n.gdbName+"?gdbSvrName="+n.serverName+"&path="+t+"&f=json";if(n.User!==null&&n.Password!==null){n.partUrl+="&gdbUserName="+n.User+"&gdbPwd="+n.Password}var i=n.getFullUrl();var o=new Ac(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}DetachGDB(t,e){var r=this;if(r.serverName===null||r.gdbName===null){return}r.partUrl="gdb/detach/"+r.gdbName+"?gdbSvrName="+r.serverName;if(r.User!==null&&r.Password!==null){r.partUrl+="&gdbUserName="+r.User+"&gdbPwd="+r.Password}var n=r.getFullUrl();var i=new Ac(n,{eventListeners:{scope:r,processCompleted:t,processFailed:e}});i.processAsync()}CreateGDB(t,e,r){var n=this;if(n.serverName===null||n.gdbName===null){return}if(n.serverName.toLowerCase()==="mapgislocal"&&t===null){return}n.partUrl="gdb/creat/"+n.gdbName+"?gdbSvrName="+n.serverName+"&path="+t+"&f=json";if(n.User!==null&&n.Password!==null){n.partUrl+="&gdbUserName="+n.User+"&gdbPwd="+n.Password}var i=n.getFullUrl();var o=new Ac(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}DeleteGDB(t,e){var r=this;if(r.serverName===null||r.gdbName===null){return}r.partUrl="gdb/delete/"+r.gdbName+"?gdbSvrName="+r.serverName;if(r.User!==null&&r.Password!==null){r.partUrl+="&gdbUserName="+r.User+"&gdbPwd="+r.Password}var n=r.getFullUrl();var i=new Ac(n,{eventListeners:{scope:r,processCompleted:t,processFailed:e}});i.processAsync()}}Zondy.Catalog.GDBInfo=Qc;class Kc extends Yc{constructor(t){var e=t||{};super(e);this.docName=e.docName!==undefined?e.docName:null;this.mapIndex=e.mapIndex!==undefined?e.mapIndex:0;this.layerID=e.layerID!==undefined?e.layerID:0;this.version=e.version!==undefined?e.version:2;this.include=e.include!==undefined?e.include:"{includeDetails:true,includeSubs:false}";this.returnFullStyle=e.returnFullStyle!==undefined?e.returnFullStyle:false;this.guid=e.guid!==undefined?e.guid:ve()}getMapDocList(t,e){var r=this;r.partUrl="docs?v="+this.version+"&f=json";var n=r.getFullUrl();var i=new Ac(n,{eventListeners:{scope:r,processCompleted:t,processFailed:e}});i.processAsync()}getMapDocInfo(t,e,r,n,i){var o=this;if(typeof i==="boolean"){o.returnFullStyle=i}if(typeof e==="boolean"||typeof r==="boolean"){var s={includeDetails:typeof e==="boolean"?e:true,includeSubs:typeof r==="boolean"?r:false};o.include=he(s)}o.partUrl="docs/"+o.docName+"?include="+o.include+"&returnFullStyle="+o.returnFullStyle+"&guid="+o.guid+"&f=json";var a=o.getFullUrl();var u=new Ac(a,{eventListeners:{scope:o,processCompleted:t,processFailed:n}});u.processAsync()}getMapInfo(t,e,r){var n=this;if(typeof e==="boolean"){n.returnFullStyle=e}n.partUrl="docs/"+n.docName+"/"+n.mapIndex+"?returnFullStyle="+n.returnFullStyle+"&guid="+n.guid+"&f=json";var i=n.getFullUrl();var o=new Ac(i,{eventListeners:{scope:n,processCompleted:t,processFailed:r}});o.processAsync()}getMapDocTree(t,e){var r=this;r.partUrl="docs/"+r.docName+"?tree=true&guid="+r.guid+"&f=json";var n=r.getFullUrl();var i=new Ac(n,{eventListeners:{scope:r,processCompleted:t,processFailed:e}});i.processAsync()}getLayerInfo(t,e){var r=this;r.partUrl="docs/"+r.docName+"/"+r.mapIndex+"/"+r.layerID+"?returnFullStyle="+r.returnFullStyle+"&guid="+r.guid+"&f=json";var n=r.getFullUrl();var i=new Ac(n,{eventListeners:{scope:r,processCompleted:t,processFailed:e}});i.processAsync()}getLayersInfo(t,e){var r=this;r.partUrl="docs/"+r.docName+"/"+r.mapIndex+"/layers?f=json";var n=r.getFullUrl();var i=new Ac(n,{eventListeners:{scope:r,processCompleted:t,processFailed:e}});i.processAsync()}deleteLayer(t,e){var r=this;r.partUrl="docs/"+r.docName+"/"+r.mapIndex+"/layers/delete?layerIDs="+r.layerID+"&guid="+r.guid+"&f=json";var n=r.getFullUrl();var i=new Ac(n,{eventListeners:{scope:r,processCompleted:t,processFailed:e}});i.processAsync()}addLayer(t,e,r){var n=this;n.partUrl="docs/"+n.docName+"/"+n.mapIndex+"/layers/add?guid="+n.guid+"&f=json";var i=n.getFullUrl();var o=new Ac(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync({method:"POST",data:JSON.stringify(t),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}changeIndex(t,e,r){var n=this;n.partUrl="docs/"+n.docName+"/"+n.mapIndex+"/layers/index?guid="+n.guid+"&f=json";var i=n.getFullUrl();var o=new Ac(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync({method:"POST",data:JSON.stringify(t),header:{"Content-Type":"text/plain;charset=UTF-8"}})}getLegendInfo(t,e,r,n){var i=this;i.partUrl="legendInfo/"+i.docName+"?f=json&layerIndexes="+t+"&fields="+e;var o=i.getFullUrl();var s=new Ac(o,{eventListeners:{scope:i,processCompleted:r,processFailed:n}});s.processAsync()}}qt.Catalog.MapDoc=Kc;class $c extends Yc{constructor(t){var e=t||{};super(e);this.tileName=e.tileName!==undefined?e.tileName:null;this.version=e.version!==undefined?e.version:"2.0"}getTileList(t,e){var r=this;r.partUrl="tiles?f=json";if(this.version){if(r.version==="2.0"){r.partUrl+="&v=2"}else{r.partUrl+="&v="+r.version}}var n=r.getFullUrl();var i=new Ac(n,{eventListeners:{scope:r,processCompleted:t,processFailed:e}});i.processAsync()}getTileInfo(t,e){var r=this;r.partUrl="tiles/"+r.tileName+"?f=json";if(r.version){r.partUrl+="&v="+r.version}var n=r.getFullUrl();var i=new Ac(n,{eventListeners:{scope:r,processCompleted:t,processFailed:e}});i.processAsync()}}Zondy.Catalog.TileLayer=$c;class th extends Qc{constructor(t){var e=t||{};super(e)}getSfclsList(t,e){var r=this;if(r.serverName.toLowerCase().indexOf("mapgislocal")>=0)r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/sfcls?containAll="+r.containAll+"&f=json";else r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/sfcls?user="+r.User+"&psw="+r.Password+"&containAll="+this.containAll+"&f=json";var n=r.getFullUrl();var i=new Ac(n,{eventListeners:{scope:r,processCompleted:t,processFailed:e}});i.processAsync()}getAclsList(t,e){var r=this;if(r.serverName.toLowerCase().indexOf("mapgislocal")>=0)r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/acls?containAll="+r.containAll+"&f=json";else r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/acls?user="+r.User+"&psw="+r.Password+"&containAll="+r.containAll+"&f=json";var n=r.getFullUrl();var i=new Ac(n,{eventListeners:{scope:r,processCompleted:t,processFailed:e}});i.processAsync()}getOclsList(t,e){var r=this;if(r.serverName.toLowerCase().indexOf("mapgislocal")>=0)r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/ocls?containAll="+r.containAll+"&f=json";else r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/ocls?user="+r.User+"&psw="+r.Password+"&containAll="+r.containAll+"&f=json";var n=r.getFullUrl();var i=new Ac(n,{eventListeners:{scope:r,processCompleted:t,processFailed:e}});i.processAsync()}getNclsList(t,e){var r=this;if(r.serverName.toLowerCase().indexOf("mapgislocal")>=0)r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/ncls?containAll="+r.containAll+"&f=json";else r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/ncls?user="+r.User+"&psw="+r.Password+"&containAll="+r.containAll+"&f=json";var n=r.getFullUrl();var i=new Ac(n,{eventListeners:{scope:r,processCompleted:t,processFailed:e}});i.processAsync()}getRdsList(t,e){var r=this;if(r.serverName.toLowerCase().indexOf("mapgislocal")>=0)r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/rds?containAll="+r.containAll+"&f=json";else r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/rds?user="+r.User+"&psw="+r.Password+"&containAll="+r.containAll+"&f=json";var n=r.getFullUrl();var i=new Ac(n,{eventListeners:{scope:r,processCompleted:t,processFailed:e}});i.processAsync()}getDsSfclsList(t,e){var r=this;if(r.serverName.toLowerCase().indexOf("mapgislocal")>=0||r.serverName.toLowerCase()==="mapgislocalplus")r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/"+r.dsName+"/sfcls?f=json";else r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/"+r.dsName+"/sfcls?user="+r.User+"&psw="+r.Password+"&f=json";var n=r.getFullUrl();var i=new Ac(n,{eventListeners:{scope:r,processCompleted:t,processFailed:e}});i.processAsync()}getDsAclsList(t,e){var r=this;if(r.serverName.toLowerCase().indexOf("mapgislocal")>=0)r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/"+r.dsName+"/acls?f=json";else r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/"+r.dsName+"/acls?user="+r.User+"&psw="+r.Password+"&f=json";var n=r.getFullUrl();var i=new Ac(n,{eventListeners:{scope:r,processCompleted:t,processFailed:e}});i.processAsync()}getDsOclsList(t,e){var r=this;if(r.serverName.toLowerCase().indexOf("mapgislocal")>=0)r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/"+r.dsName+"/ocls?f=json";else r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/"+r.dsName+"/ocls?user="+r.User+"&psw="+r.Password+"&f=json";var n=r.getFullUrl();var i=new Ac(n,{eventListeners:{scope:r,processCompleted:t,processFailed:e}});i.processAsync()}getDsNclsList(t,e){var r=this;if(r.serverName.toLowerCase().indexOf("mapgislocal")>=0)r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/"+r.dsName+"/ncls?f=json";else r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/"+r.dsName+"/ncls?user="+r.User+"&psw="+r.Password+"&f=json";var n=r.getFullUrl();var i=new Ac(n,{eventListeners:{scope:r,processCompleted:t,processFailed:e}});i.processAsync()}getRdsListInRcs(t,e){var r=this;if(r.serverName.toLowerCase().indexOf("mapgislocal")>=0)r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/"+r.rcsName+"/rds?f=json";else r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/"+r.rcsName+"/rds?user="+r.User+"&psw="+r.Password+"&f=json";var n=r.getFullUrl();var i=new Ac(n,{eventListeners:{scope:r,processCompleted:t,processFailed:e}});i.processAsync()}getLayerList(t,e,r){var n=this;if(n.serverName.toLowerCase().indexOf("mapgislocal")>=0)n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/"+t+"?containAll="+n.containAll+"&f=json";else n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/"+t+"?user="+n.User+"&psw="+n.Password+"&containAll="+n.containAll+"&f=json";var i=n.getFullUrl();var o=new Ac(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}getLayerListInDS(t,e,r){var n=this;if(n.serverName.toLowerCase().indexOf("mapgislocal")>=0)n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/"+n.dsName+"/"+t+"?f=json";else n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/"+n.dsName+"/"+t+"?user="+n.User+"&psw="+n.Password+"&f=json";var i=n.getFullUrl();var o=new Ac(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}getLayerInfo(t,e,r,n){var i=this;i.partUrl="layerinfo?gdbpUrl="+t+"&f=json";if(n){i.partUrl+="&encryptPassword="+n}if(this.proj){i.partUrl+="&proj="+this.proj}var o=i.getFullUrl();var s=new Ac(o,{eventListeners:{scope:i,processCompleted:e,processFailed:r}});s.processAsync()}CreateVectCls(t,e,r){var n=this;t=t!==null?t:null;if(t===null||n.serverName===null||n.gdbName===null){return}if(n.User!==null&&n.Password!==null){n.partUrl="datasource/"+n.User+":"+n.Password+"@"}else{n.partUrl="datasource/"}if(t.clsName===null){t.clsName=ve()}n.partUrl+=n.serverName+"/"+n.gdbName+"/"+t.clsType+"/"+t.clsName+"/create?"+"geoType="+t.geoType+"&srefName="+t.srefName+"&dsName="+t.dsName+"&f=json";if(t.attStruct===null){t.attStruct=new Ye}var i=n.getFullUrl();var o=new Ac(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync({method:"POST",data:JSON.stringify(t.attStruct),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}deleteXCls(t,e,r,n){var i=this;if(i.serverName===null||i.gdbName===null||t===null||e===null){return}i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/"+t+"/"+e+"/delete?f=json";var o=i.getFullUrl();var s=new Ac(o,{eventListeners:{scope:i,processCompleted:r,processFailed:n}});s.processAsync()}}Zondy.Catalog.VectorLayer=th;class eh extends Yc{constructor(t){var e=t||{};super(e);this.f=e.f||"json";this.page=e.page||0;this.pageCount=e.pageCount||20;this.systemLib=e.systemLib||null;this.type=e.type||null}GetSystemLibrary(t,e){var r=this;r.partUrl="systemlibraries?f="+r.f;var n=r.getFullUrl();var i=new Ac(n,{eventListeners:{scope:r,processCompleted:t,processFailed:e}});i.processAsync()}GetSymbol(t,e){var r=this;var n="symbols?&systemLib="+r.systemLib+"&type="+r.type;if(r.f){n+="&f="+r.f}if(r.page){n+="&page="+r.page}if(r.size){n+="&size="+r.pageCount}r.partUrl=n;var i=r.getFullUrl();var o=new Ac(i,{eventListeners:{scope:r,processCompleted:t,processFailed:e}});o.processAsync()}}Zondy.Catalog.SystomInfo=eh;class rh extends zc{constructor(t){var e=t||{};super(e);this.guid=e.guid!==undefined?e.guid:ve();this.baseUrl="igs/rest/mrfs";this.f=e.f!==undefined?e.f:"json"}}qt.Service.EditServiceBase=rh;class nh extends rh{constructor(t,e,r){var n=r?r:{};super(n);this.docName=t!==undefined?t:null;this.mapIndex=0;this.layerIndex=e!==undefined?e:0}add(t,e,r){var n=this;if(t===undefined){return}n.partUrl="docs/"+n.docName+"/"+n.mapIndex+"/"+n.layerIndex+"/addFeatures?f="+n.f+"&guid="+n.guid;var i=n.getFullUrl();var o=new Ac(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync({method:"POST",data:JSON.stringify(t),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}update(t,e,r){var n=this;if(t===undefined){return}n.partUrl="docs/"+n.docName+"/"+n.mapIndex+"/"+n.layerIndex+"/updateFeatures?f="+n.f+"&guid="+n.guid;var i=n.getFullUrl();var o=new Ac(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync({method:"POST",data:JSON.stringify(t),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}deletes(t,e,r){var n=this;if(t===undefined){return}n.partUrl="docs/"+n.docName+"/"+n.mapIndex+"/"+n.layerIndex+"/deleteFeatures?f="+n.f+"&objectIds="+t+"&guid="+n.guid;var i=n.getFullUrl();var o=new Ac(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}}qt.Service.EditDocFeature=nh;class ih extends rh{constructor(t,e){var r=e?e:{};super(r);this.gdbp=t!==undefined?t:null}add(t,e,r){var n=this;if(t===undefined){return}n.partUrl="layer/addFeatures?f="+n.f+"&gdbp="+n.gdbp+"&guid="+n.guid;var i=n.getFullUrl();var o=new Ac(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync({method:"POST",data:JSON.stringify(t),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}update(t,e,r){var n=this;if(t===undefined){return}n.partUrl="layer/updateFeatures?f="+n.f+"&gdbp="+n.gdbp+"&guid="+n.guid;var i=n.getFullUrl();var o=new Ac(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync({method:"POST",data:JSON.stringify(t),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}deletes(t,e,r){var n=this;if(t===undefined){return}n.partUrl="layer/deleteFeatures?f="+n.f+"&objectIds="+t+"&gdbp="+n.gdbp+"&guid="+n.guid;var i=n.getFullUrl();var o=new Ac(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}}qt.Service.EditLayerFeature=ih;var oh=function(t){var e=t?t:{};zt(this,e);this.IncludeAttribute=e.IncludeAttribute!==undefined&&typeof e.IncludeAttribute==="boolean"?e.IncludeAttribute:true;this.IncludeGeometry=e.IncludeGeometry!==undefined&&typeof e.IncludeGeometry==="boolean"?e.IncludeGeometry:false;this.IncludeWebGraphic=e.IncludeWebGraphic!==undefined&&typeof e.IncludeWebGraphic==="boolean"?e.IncludeWebGraphic:false};oh.prototype.toJSON=function(){return he(this)};qt.Service.QueryFeatureStruct=oh;var sh=function(t){var e=t?t:{};zt(this,e);this.CompareRectOnly=e.CompareRectOnly!==undefined&&typeof e.CompareRectOnly==="boolean"?e.CompareRectOnly:false;this.EnableDisplayCondition=e.EnableDisplayCondition!==undefined&&typeof e.EnableDisplayCondition==="boolean"?e.EnableDisplayCondition:false;this.MustInside=e.MustInside!==undefined&&typeof e.MustInside==="boolean"?e.MustInside:false;this.Intersect=e.Intersect!==undefined&&typeof e.Intersect==="boolean"?e.Intersect:false};sh.prototype.toJSON=function(){return he(this)};qt.Service.QueryFeatureRule=sh;class ah{constructor(t){var e=t?t:{};zt(this,e);this.geometry=e.geometry!==undefined?e.geometry:null;this.where=e.where!==undefined?e.where:null;this.rule=e.rule!==undefined?e.rule:new sh;this.objectIds=e.objectIds!==undefined?e.objectIds:null;this.pageIndex=e.pageIndex!==undefined?e.pageIndex:0;this.recordNumber=e.recordNumber!==undefined?e.recordNumber:20;this.resultFormat=e.resultFormat!==undefined?e.resultFormat:"json";this.struct=e.struct!==undefined?e.struct:new oh;this.orderField=e.orderField!==undefined?e.orderField:null;this.rtnLabel=e.rtnLabel!==undefined?e.rtnLabel:false;this.fields=e.fields||"";this.coordPrecision=e.coordPrecision||e.coordPrecision===0?e.coordPrecision:2;this.isAsc=e.isAsc!==undefined?e.isAsc:false;this.cursorType=e.cursorType!==undefined?e.cursorType:"forward";this.proj=e.proj||null;this.guid=e.guid||"__readonly_user__"}}qt.Service.QueryParameterBase=ah;class uh extends ah{constructor(t){var e=t?t:{};super(e)}getParameterURL(){var t="page="+this.pageIndex.toString();t+="&pageCount="+this.recordNumber.toString();t+="&f="+this.resultFormat;if(this.geometry){t+="&geometry="+this.geometry.toString();t+="&geometryType="+this.geometry.getGeometryType()}if(this.struct){t+="&structs="+he(this.struct)}if(this.where){t+="&where="+this.where}if(this.rule){t+="&rule="+he(this.rule)}if(this.objectIds){t+="&objectIds="+this.objectIds}if(this.orderField){t+="&orderField="+this.orderField}if(this.rtnLabel!==undefined){t+="&rtnLabel="+this.rtnLabel}if(this.fields){t+="&fields="+this.fields}if(this.coordPrecision!==undefined){t+="&coordPrecision="+this.coordPrecision}if(this.isAsc){t+="&isAsc="+this.isAsc}if(this.proj){t+="&srsIds="+this.proj}if(this.guid){t+="&guid="+this.guid}t+="&cursorType="+this.cursorType;return t}getParameterObject(){var t={};t.f=this.resultFormat;if(this.struct!==null){t.structs=this.struct.toJSON()}if(this.objectIds!==null){t.objectIds=this.objectIds;return t}t.page=this.pageIndex.toString();t.pageCount=this.recordNumber.toString();if(this.geometry!==null){t.geometry=this.geometry.toString();t.geometryType=this.geometry.getGeometryType()}if(this.where!==null){t.where=this.where}if(this.rule!==null){t.rule=this.rule.toJSON()}if(this.orderField!==null){t.orderField=this.orderField}if(this.isAsc!==null){t.isAsc=this.isAsc}t.cursorType=this.cursorType;return t}}qt.Service.QueryParameter=uh;class lh extends zc{constructor(t){var e=t||{};e.baseUrl="igs/rest/mrfs";super(e);this.resultCallBack=e.resultCallBack!==undefined?e.resultCallBack:null;this.queryParam=e.queryParam!==undefined?e.queryParam:null;this.requestType=e.requestType!==undefined?e.requestType:"GET"}processResult(t){var e=new Ur;Xt(e,t,"succeed");this.resultCallBack(e)}processGeoJsonResult(t){var e={};Xt(e,t,"succeed");this.resultCallBack(e)}restQuery(t,e,r,n,i,o){var s=this;s.resultCallBack=r;var a=new Ac(t,{eventListeners:{scope:s,processCompleted:o!=="geojson"?s.processResult:s.processGeoJsonResult,processFailed:i}});if(n==="GET"){a.processAsync()}else{a.processAsync({method:"POST",data:JSON.stringify(e),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}query(t,e,r){if(this.queryParam===null){return}var n="";if(this.queryParam instanceof uh){n=this.getFullUrl()}else{return}var i="";var o=null;if(!r){if(!this.requestType){i="GET"}else{i=this.requestType}}else{i=r}if(i.toUpperCase()==="GET"){n+=encodeURI("?"+this.queryParam.getParameterURL())}else{o=this.queryParam.getParameterObject()}this.restQuery(n,o,t,i,e,this.queryParam.resultFormat.toLowerCase())}}qt.Service.QueryServiceBase=lh;var ch=function(t){var e=t!==undefined?t:{};zt(this,e);this.geometry=e.geometry!==undefined?e.geometry:null;this.geometryType=e.geometryType!==undefined?e.geometryType:null;this.resultFormat=e.resultFormat!==undefined?e.resultFormat:"json";this.nearDis=e.nearDis!==undefined?e.nearDis:1e-4};ch.prototype.getParameterURL=function(){var t="";t+="?f="+this.resultFormat;t+="&geometryType="+this.geometryType;t+="&nearDis="+this.nearDis;return t};qt.Service.MultiGeoQueryParameter=ch;class hh extends lh{constructor(t,e,r,n){var i=n?n:{};super(i);this.queryParam=t;this.mapName=e;this.mapIndex=0;this.layerIndex=r;this.baseUrl="igs/rest/extend/MultiGeo";this.partUrl="docs/"+this.mapName+"/"+this.mapIndex.toString()+"/"+this.layerIndex+"/Geoquery";this.partUrl+=t.getParameterURL()}query(t,e){if(this.queryParam===null||!(this.queryParam instanceof ch)){return}var r=null;if(this.queryParam.geometryType==="point"){r={pointArr:this.queryParam.geometry}}else if(this.queryParam.geometryType==="line"){r={lineArr:this.queryParam.geometry}}else if(this.queryParam.geometryType==="polygon"){r={PolygonObjs:this.queryParam.geometry}}var n=this;var i=n.getFullUrl();var o=new Ac(i,{eventListeners:{scope:n,processCompleted:t,processFailed:e}});o.processAsync({method:"POST",data:JSON.stringify(r),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}qt.Service.MultiGeoQuery=hh;var fh=function(t){var e=t!==undefined?t:{};zt(this,e);this.objectIds=e.objectIds!==undefined?e.objectIds:null;this.where=e.where!==undefined?e.where:null;this.resultFormat=e.resultFormat!==undefined?e.resultFormat:"json"};fh.prototype.getParameterURL=function(){var t="";t+="&f="+this.resultFormat;if(this.objectIds!==null){t+="&objectIds="+this.objectIds}else{if(this.where!==null){t+="&where="+this.where}}return t};qt.Service.ObjClsQueryParameter=fh;class ph extends lh{constructor(t,e,r){var n=r?r:{};super(n);this.queryParam=t;this.gdbp=e;this.baseUrl="igs/rest/extend/dxlcz";this.partUrl="objlayer/query?gdbp="+e;this.partUrl+=t.getParameterURL()}query(t,e){if(this.queryParam===null||!(this.queryParam instanceof fh)){return}var r=this;var n=r.getFullUrl();var i=new Ac(n,{eventListeners:{scope:r,processCompleted:t,processFailed:e}});i.processAsync()}}qt.Service.ObjClsQuery=ph;class dh extends uh{constructor(t,e){var r=e?e:{};super(r);this.gdbp=t!==undefined?t:null}getParameterURL(){var t=super.getParameterURL();return t+"&gdbp="+this.gdbp}getParameterObject(){var t=super.getParameterObject(this);t.gdbp=this.gdbp;return t}}qt.Service.QueryByLayerParameter=dh;class yh extends lh{constructor(t,e,r,n){var i=n?n:{};super(i);this.queryParam=t;this.docName=e;this.layerIndex=r==undefined?-1:r;this.mapIndex=0;this.partUrl="docs/"+this.docName+"/"+this.mapIndex.toString()+"/"+this.layerIndex.toString()+"/query"}}qt.Service.QueryDocFeature=yh;class vh extends lh{constructor(t,e){var r=e?e:{};super(r);this.queryParam=t;this.partUrl="layer/query"}}qt.Service.QueryLayerFeature=vh;function gh(...t){class e{constructor(){for(let e of t){e&&mh(this,new e)}}}for(let r of t){r&&mh(e,r);r&&mh(e.prototype,r.prototype)}return e}function mh(t,e){for(let r of Reflect.ownKeys(e)){if(r!=="constructor"&&r!=="prototype"&&r!=="name"){let n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n)}}}var _h=gh;class bh extends(gh(dh,uh,yh)){constructor(){super()}}var xh=bh;class Sh{static formatParam(t){let e=["IncludeAttribute","IncludeGeometry","IncludeWebGraphic","isAsc","compareRectOnly","enableDisplayCondition"];for(let r=0;r<e.length;r++){if(typeof t[e[r]]==="string"){t[e[r]]=t[e[r]]==="true"}}return t}constructor(){this.layers=[];this.pageIndex=0;this.pagination=100;this.resultFormat="json";this.IncludeAttribute=true;this.IncludeGeometry=true;this.IncludeWebGraphic=false;this.orderBy=undefined;this.isAsc=undefined;this.proj=undefined;this.fields=undefined;this.coordPrecision=undefined;this.cursorType="backward"}}Sh.prototype.formatParameter=function(t,e){let r,n=this;n._crs=e;if(t==="typename"){r={layers:t,pagination:"maxfeatures",rectangle:"bbox",where:"filter",geometry:"filter",objectIds:"featureId"};if(this.where&&this.geometry){delete r.geometry}Object.keys(r).forEach(function(t){if(n.hasOwnProperty(t)&&n[t]){if(n[t]instanceof Array){r[r[t]]=n[t].join(",")}else{if(t==="where"||t==="geometry"){r[r[t]]=initFilter(n[t],n.geometry,n)}else{r[r[t]]=n[t]}}}delete r[t]});return r}else{r={layers:t,pageIndex:"Page",pagination:"pageCount",resultFormat:"f",includeAttribute:"IncludeAttribute",includeGeometry:"IncludeGeometry",includeWebGraphic:"IncludeWebGraphic",orderBy:"orderField"};Object.keys(r).forEach(function(t){if(n.hasOwnProperty(t)){n[r[t]]=n[t];delete n[t]}});return this}};qt.Service.BaseParameter=Sh;class wh{static get(t,e,r,n){let i=new XMLHttpRequest;i.open("GET",t,true);i.onreadystatechange=function(){if(i.readyState==4&&i.status==200||i.status==304){e.call(this,i.responseText,n)}else if(i.readyState===4&&i.status!==200&&i.status!==304){r.call(this,i.responseText,n)}};i.send()}constructor(t){this.url=t.url;let e=this.url.split("http://");this._ip=e[1].split(":")[0];let r=e[1].split(":")[1].split("/");this._port=r[0];if(this.url.indexOf("igs/rest/mrfs/docs")>-1){this._mapId=r[r.length-1]}}}wh.prototype.query=function(t,e,r){t=Sh.formatParam(t);let n=Object.assign({},t);let i,o,s,a,u,l,c;u=n.layers;if(typeof u==="string"){u=u.split(",")}l=["layers","pagination","orderBy","spatialRelationType","EnableDisplayCondition","MustInside","CompareRectOnly","Intersect","IncludeGeometry","IncludeAttribute","IncludeWebGraphic"];Object.keys(n).forEach(function(t){switch(t){case"pagination":n["recordNumber"]=n.pagination;break;case"orderBy":n["orderField"]=n.orderBy;break;case"spatialRelationType":n["MustInside"]=n.spatialRelationType==="MustInside";n["Intersect"]=n.spatialRelationType==="Intersect";break;case"objectIds":n.objectIds=n.objectIds.join(",")}});if(n.hasOwnProperty("geometry")&&n.geometry||n.hasOwnProperty("rectangle")&&n.rectangle.length>0){i=new sh({EnableDisplayCondition:n.enableDisplayCondition,MustInside:n.MustInside,CompareRectOnly:n.compareRectOnly,Intersect:n.Intersect});if(!n.hasOwnProperty("geometry")&&n.rectangle.length>0){a=new Ar(n.rectangle[0],n.rectangle[1],n.rectangle[2],n.rectangle[3]);delete n.rectangle}else if(n.geometry.type==="Point"){a=new Tr(n.geometry.coordinates[0],n.geometry.coordinates[1],{nearDis:"0.001"});delete n.geometry}else if(n.geometry.type==="LineString"||n.geometry.type==="Polygon"){let t=[];for(let e=0;e<n.geometry.coordinates.length;e++){t.push(new Tr(n.geometry.coordinates[e][0],n.geometry.coordinates[e][1]))}switch(n.geometry.type){case"LineString":a=new Vr(t);break;case"Polygon":a=new qr(t);break}delete n.geometry}else if(n.geometry.type==="MultiPolygon"){let t=[];for(let e=0;e<n.geometry.coordinates.length;e++){let r=[],i=n.geometry.coordinates[e];for(let t=0;t<i.length;t++){r.push(new Tr(i[t][0],i[t][1]))}t.push(new qr(r))}a=new zr(t);delete n.geometry}}s=new oh({IncludeGeometry:n.IncludeGeometry,IncludeAttribute:n.IncludeAttribute,IncludeWebGraphic:n.IncludeWebGraphic});let h=new RegExp("^[0-9]+$");if(u.length<=0){throw new Error("请填写您要查询的图层")}else if(h.test(u[0])){o=new uh;c=new yh(o,this._mapId,u.join(","),{ip:this._ip,port:this._port})}else if(typeof u[0]==="string"&&u[0].indexOf("gdbp")>-1){o=new dh(u);c=new vh(o,{ip:this._ip,port:this._port})}else{throw new Error("请填写正确的图层Id或gdbp地址")}if(a){o.geometry=a;o.rule=i}o.struct=s;let f=Object.assign({},n);for(let t=0;t<l.length;t++){if(f.hasOwnProperty(l[t])){delete f[l[t]]}}zt(o,f);c.query(function(t){if(e){e(t)}},function(t){if(r){r(t)}})};wh.prototype.add=function(t,e,r,n){let i=this,o;this.getFieldAtt(e,function(s){let a=i.getFeatureSet(s,t);o=i.getFeatureService(e);o.add(a,r,n)})};wh.prototype.update=function(t,e,r,n){let i=this,o;this.getFieldAtt(e,function(s){let a=i.getFeatureSet(s,t);o=i.getFeatureService(e);o.update(a,r,n)})};wh.prototype.delete=function(t,e,r,n){t=t.join(",");let i=this.getFeatureService(e);i.deletes(t,r,n)};wh.prototype.getFeatureSet=function(t,e){let r=[];let n=t.FieldAtt.FldType;for(let t=0;t<n.length;t++){r.push(n[t].substr(3,n[t].length).toLowerCase())}t.FieldAtt.FldType=r;let i=new Ur({AttStruct:new Ye(t.FieldAtt)});for(let r=0;r<e.length;r++){let n=e[r].hasOwnProperty("geometry")&&e[r].geometry,o,s,a;let u=[];for(let n=0;n<t.FieldAtt.FldName.length;n++){if(e[r].attributes.hasOwnProperty(t.FieldAtt.FldName[n])){u.push(e[r].attributes[t.FieldAtt.FldName[n]])}else{u.push(null)}}let l=new Br({AttValue:u}),c;if(n){let t=e[r].geometryType,n,i,u,h,f,p,d,y;o=e[r].geometry;switch(t){case"Point":s=[];for(let t=0;t<o.length;t++){f=new Fr(o[t].coordinates[0],o[t].coordinates[1]);s.push(f)}n=new jr({PntGeom:s});c=1;if(e[r].style){u=new Cr(e[r].style);i=new Gr({InfoType:1,PntInfo:u})}break;case"LineString":s=[];for(let t=0;t<o.length;t++){p=[];for(let e=0;e<o[t].coordinates.length;e++){p.push(new Tr(o[t].coordinates[e].x,o[t].coordinates[e].y))}d=new Arc(p);h=new Xe([d]);a=new Dr(h);s.push(a)}n=new jr({LinGeom:s});c=2;if(e[r].style){u=new wr(e[r].style);i=new Gr({InfoType:2,LinInfo:u})}break;case"Polygon":s=[];for(let t=0;t<o.length;t++){h=[];let e=[];for(let r=0;r<o[t].exterior.length;r++){e.push(new Tr(o[t].exterior[r].x,o[t].exterior[r].y))}h.push(new Xe([new Arc(e)]));for(let e=0;e<o[t].interior.length;e++){let r=[];for(let n=0;n<o[t].interior[e].length;n++){r.push(new Tr(o[t].interior[e][n].x,o[t].interior[e][n].y))}h.push(new Xe([new Arc(r)]))}y=new kr(h);s.push(y)}n=new jr({RegGeom:s});c=3;if(e[r].style){u=new Ir(e[r].style);i=new Gr({InfoType:3,RegInfo:u})}break}l.fGeom=n;l.GraphicInfo=i;l.ftype=c}if(e[r].FID){l.setFID(e[r].FID)}i.addFeature(l)}return i};wh.prototype.getFeatureService=function(t){let e;if(t.indexOf("gdbp")>=0){e=new ih(t)}else{e=new nh(this._mapId,t,{ip:this._ip,port:this._port})}return e};wh.prototype.getFieldAtt=function(t,e){let r=this;if(t.indexOf("gdbp")>=0){this.getGDBPInfo(t,e)}else{this.getLayerInfo(t,function(t){r.getGDBPInfo(t,e)})}};wh.prototype.getGDBPInfo=function(t,e){wh.get("http://"+this._ip+":"+this._port+"/igs/rest/mrcs/layerinfo?gdbpUrl="+t,function(t){t=JSON.parse(t);e(t)})};wh.prototype.getLayerInfo=function(t,e){wh.get("http://"+this._ip+":"+this._port+"/igs/rest/mrcs/docs/"+this._mapId+"/0/"+t+"?f=json",function(t){t=JSON.parse(t);let r=t.URL;e(r)})};qt.Service.FeatureService=wh;class Ch extends Sh{constructor(t){super();this.where=undefined;zt(this,t)}}qt.Service.SQLParameter=Ch;class Ih{constructor(){this.coordinates=[]}}var Eh=6371008.8;var Ph={centimeters:Eh*100,centimetres:Eh*100,degrees:Eh/111325,feet:Eh*3.28084,inches:Eh*39.37,kilometers:Eh/1e3,kilometres:Eh/1e3,meters:Eh,metres:Eh,miles:Eh/1609.344,millimeters:Eh*1e3,millimetres:Eh*1e3,nauticalmiles:Eh/1852,radians:1,yards:Eh*1.0936};var Mh={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/Eh,yards:1.0936133};var Lh={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:3.86e-7,millimeters:1e6,millimetres:1e6,yards:1.195990046};function Nh(t,e,r){if(r===void 0){r={}}var n={type:"Feature"};if(r.id===0||r.id){n.id=r.id}if(r.bbox){n.bbox=r.bbox}n.properties=e||{};n.geometry=t;return n}function Th(t,e,r){if(r===void 0){r={}}switch(t){case"Point":return Oh(e).geometry;case"LineString":return Dh(e).geometry;case"Polygon":return Rh(e).geometry;case"MultiPoint":return Bh(e).geometry;case"MultiLineString":return Gh(e).geometry;case"MultiPolygon":return Uh(e).geometry;default:throw new Error(t+" is invalid")}}function Oh(t,e,r){if(r===void 0){r={}}if(!t){throw new Error("coordinates is required")}if(!Array.isArray(t)){throw new Error("coordinates must be an Array")}if(t.length<2){throw new Error("coordinates must be at least 2 numbers long")}if(!Kh(t[0])||!Kh(t[1])){throw new Error("coordinates must contain numbers")}var n={type:"Point",coordinates:t};return Nh(n,e,r)}function Ah(t,e,r){if(r===void 0){r={}}return jh(t.map(function(t){return Oh(t,e)}),r)}function Rh(t,e,r){if(r===void 0){r={}}for(var n=0,i=t;n<i.length;n++){var o=i[n];if(o.length<4){throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.")}for(var s=0;s<o[o.length-1].length;s++){if(o[o.length-1][s]!==o[0][s]){throw new Error("First and last Position are not equivalent.")}}}var a={type:"Polygon",coordinates:t};return Nh(a,e,r)}function Fh(t,e,r){if(r===void 0){r={}}return jh(t.map(function(t){return Rh(t,e)}),r)}function Dh(t,e,r){if(r===void 0){r={}}if(t.length<2){throw new Error("coordinates must be an array of two or more positions")}var n={type:"LineString",coordinates:t};return Nh(n,e,r)}function kh(t,e,r){if(r===void 0){r={}}return jh(t.map(function(t){return Dh(t,e)}),r)}function jh(t,e){if(e===void 0){e={}}var r={type:"FeatureCollection"};if(e.id){r.id=e.id}if(e.bbox){r.bbox=e.bbox}r.features=t;return r}function Gh(t,e,r){if(r===void 0){r={}}var n={type:"MultiLineString",coordinates:t};return Nh(n,e,r)}function Bh(t,e,r){if(r===void 0){r={}}var n={type:"MultiPoint",coordinates:t};return Nh(n,e,r)}function Uh(t,e,r){if(r===void 0){r={}}var n={type:"MultiPolygon",coordinates:t};return Nh(n,e,r)}function qh(t,e,r){if(r===void 0){r={}}var n={type:"GeometryCollection",geometries:t};return Nh(n,e,r)}function zh(t,e){if(e===void 0){e=0}if(e&&!(e>=0)){throw new Error("precision must be a positive number")}var r=Math.pow(10,e||0);return Math.round(t*r)/r}function Vh(t,e){if(e===void 0){e="kilometers"}var r=Ph[e];if(!r){throw new Error(e+" units is invalid")}return t*r}function Wh(t,e){if(e===void 0){e="kilometers"}var r=Ph[e];if(!r){throw new Error(e+" units is invalid")}return t/r}function Hh(t,e){return Zh(Wh(t,e))}function Xh(t){var e=t%360;if(e<0){e+=360}return e}function Zh(t){var e=t%(2*Math.PI);return e*180/Math.PI}function Yh(t){var e=t%360;return e*Math.PI/180}function Jh(t,e,r){if(e===void 0){e="kilometers"}if(r===void 0){r="kilometers"}if(!(t>=0)){throw new Error("length must be a positive number")}return Vh(Wh(t,e),r)}function Qh(t,e,r){if(e===void 0){e="meters"}if(r===void 0){r="kilometers"}if(!(t>=0)){throw new Error("area must be a positive number")}var n=Lh[e];if(!n){throw new Error("invalid original units")}var i=Lh[r];if(!i){throw new Error("invalid final units")}return t/n*i}function Kh(t){return!isNaN(t)&&t!==null&&!Array.isArray(t)}function $h(t){return!!t&&t.constructor===Object}function tf(t){if(!t){throw new Error("bbox is required")}if(!Array.isArray(t)){throw new Error("bbox must be an Array")}if(t.length!==4&&t.length!==6){throw new Error("bbox must be an Array of 4 or 6 numbers")}t.forEach(function(t){if(!Kh(t)){throw new Error("bbox must only contain numbers")}})}function ef(t){if(!t){throw new Error("id is required")}if(["string","number"].indexOf(typeof t)===-1){throw new Error("id must be a number or a string")}}var rf=r(18);class nf extends Ih{static getPointsCoordinates(t){let e=[];for(let r=0;r<t.length;r++){for(let n=0;n<t[r].geometry.length;n++){e.push(t[r].geometry[n].coordinates)}}return e}static getPointsCenter(t){let e=[],r;for(let r=0;r<t.length;r++){e.push(Oh(t[r]))}r=rf["center"](rf["featureCollection"](e));return r}constructor(t){super();this.type="Point";zt(this,t)}}Zondy.Service.VPoint=nf;class of extends Ih{static getPolylinesCoordinates(t){let e=[];for(let r=0;r<t.length;r++){for(let n=0;n<t[r].geometry.length;n++){let i=[],o=t[r].geometry[n].coordinates;for(let t=0;t<o.length;t++){i.push([o[t].x,o[t].y])}e.push(i)}}return e}static getPolylinesCenter(t){let e=[];for(let r=0;r<t.length;r++){e.push(Dh(t[r]))}return rf["center"](rf["featureCollection"](e))}constructor(t){super();this.type="LineString";zt(this,t)}}class sf extends Ih{static getPolygonsCoordinates(t){let e=[];for(let r=0;r<t.length;r++){for(let n=0;n<t[r].geometry.length;n++){let i=[];let o=t[r].geometry[n].exterior,s=[];let a=t[r].geometry[n].interior,u=[];for(let t=0;t<o.length;t++){s.push([o[t].x,o[t].y])}for(let t=0;t<a.length;t++){let e=[];for(let r=0;r<a[t].length;r++){e.push([a[t][r].x,a[t][r].y])}u.push(e)}i.push(s);i=i.concat(u);e.push(i)}}return e}static getPolygonsCenter(t){let e=[];for(let r=0;r<t.length;r++){e.push(Rh(t[r]))}return rf["center"](rf["featureCollection"](e))}constructor(t){super();this.type="Polygon";this.exterior=[];this.interior=[];zt(this,t);if(this.exterior.length>0){this.coordinates.push(this.exterior)}if(this.interior.length>0){for(let t=0;t<this.interior.length;t++){this.coordinates.push(this.interior[t])}}}}Zondy.Service.VPolygon=sf;class af extends Sh{constructor(t){super();this.geometry=undefined;this.where=undefined;this.compareRectOnly=false;this.enableDisplayCondition=false;this.spatialRelationType="Intersect";zt(this,t)}}af.prototype.fromGeoJSON=function(t){if(t){let e=this;switch(t.geometry.type){case"Point":e.geometry=new nf({coordinates:t.geometry.coordinates});break;case"LineString":e.geometry=new of({coordinates:t.geometry.coordinates});break;case"Polygon":e.geometry=new sf({coordinates:t.geometry.coordinates[0]});break}}};qt.Service.GeometryParameter=af;class uf extends Sh{constructor(t){super();this.where=undefined;this.rectangle=[];this.compareRectOnly=false;this.enableDisplayCondition=false;this.spatialRelationType="Intersects";zt(this,t)}}qt.Service.RectangleParameter=uf;class lf extends Sh{constructor(t){super();this.objectIds=[];zt(this,t)}}qt.Service.ObjectIdsParameter=lf;class cf{static fromQueryResult(t){if(!t.hasOwnProperty("SFEleArray")||!t.hasOwnProperty("AttStruct")||t.hasOwnProperty("SFEleArray")&&!t.SFEleArray||t.hasOwnProperty("AttStruct")&&!t.AttStruct){return[]}let e=t.SFEleArray;let r=t.AttStruct;let n=[],i;for(let t=0;t<e.length;t++){let o={},s=[],a;for(let n=0;n<e[t].AttValue.length;n++){if(e[t].AttValue[n]!==""){o[r.FldName[n]]=e[t].AttValue[n]}}if(e[t].fGeom){switch(e[t].ftype){case 1:let r=e[t].fGeom.PntGeom;for(let t=0;t<r.length;t++){let e=new nf({coordinates:[r[t].Dot.x,r[t].Dot.y]});s.push(e);a="Point"}break;case 2:let n=e[t].fGeom.LinGeom;for(let t=0;t<n.length;t++){let e=new of({coordinates:n[t].Line.Arcs[0].Dots});s.push(e);a="LineString"}break;case 3:let i=e[t].fGeom.RegGeom;for(let t=0;t<i.length;t++){let e=new sf;e.exterior=i[t].Rings[0].Arcs[0].Dots;for(let r=1;r<i[t].Rings.length;r++){e.interior.push(i[t].Rings[r].Arcs[0].Dots)}s.push(e);a="Polygon"}break}}let u;if(e[t].GraphicInfo){let r=e[t].GraphicInfo;switch(r.InfoType){case 1:u=r.PntInfo;break;case 2:u=r.LinInfo;break;case 3:u=r.RegInfo;break}}i=new cf({attributes:o,FID:e[t].FID,geometry:s,geometryType:a,style:u});n.push(i)}return n}static fromGeoJSON(t){let e,r=[];if(!t.hasOwnProperty("type")){throw new Error("请输入正确的geoJSON")}if(t.type==="Feature"){e=new cf({geometry:cf.geometry,attributes:t.properties});return e}else if(t.type==="FeatureCollection"){let n=t.features,i,o,s;for(let t=0;t<n.length;t++){i=[];s=n[t].geometry.coordinates;switch(n[t].geometry.type){case"Point":i.push(n[t].geometry);break;case"LineString":o=[];for(let t=0;t<s.length;t++){o.push({x:Number(s[t][0]),y:Number(s[t][1])})}n[t].geometry.coordinates=o;i.push(n[t].geometry);break;case"Polygon":let e=new sf;for(let t=0;t<s[0].length;t++){e.exterior.push({x:Number(s[0][t][0]),y:Number(s[0][t][1])})}for(let t=1;t<s.length;t++){let r=[];for(let e=0;e<s[t].length;e++){r.push({x:Number(s[t][e][0]),y:Number(s[t][e][1])})}e.exterior.push(r)}i.push(e);break}e=new cf({geometry:i,attributes:n[t].properties,geometryType:n[t].geometry.type});r.push(e)}return r}else{throw new Error("不支持的geoJSON类型")}}static toAntTableData(t){let e=[];let r=cf.fromQueryResult(t);for(let t=0;t<r.length;t++){e.push(Object.assign(r[t].attributes,{key:r[t].FID?r[t].FID:t}))}return e}static resultToGeojson(t){let e=cf.fromQueryResult(t);let r=[];e=JSON.parse(JSON.stringify(e).replace(/attributes/g,"properties").replace(/geometryType/g,"type"));let n;for(let t=0;t<e.length;t++){n=cf.polygonToGeojson(e[t]);r=r.concat(n)}let i={type:"FeatureCollection",features:r};return i}static polygonToGeojson(t){let e,r=[];let n=t.geometry;let i=t.properties;for(let t=0;t<n.length;t++){e={};if(n[t].type==="Polygon"){n[t].coordinates=[n[t].coordinates.concat(n[t].exterior,n[t].interior)]}e.geometry=n[t];e.properties=i;e.type="Feature";r.push(e)}return r}static featureToGeojson(t){let e={type:"FeatureCollection",features:[]};let r=[];const{geometryType:n}=t;if(n=="Polygon"){r=this.polyToGeojson(t)}else if(n=="LineString"){r=this.lineToGeojson(t)}else if(n=="Point"){r=this.pointToGeojson(t)}e.features=r;return e}static polyToGeojson(t){let e,r=[];let n=t.geometry;let i=t.properties;for(let t=0;t<n.length;t++){e={};if(n[t].type==="Polygon"){let e=n[t].exterior.map(t=>[t.x,t.y]);let r=n[t].interior.map(t=>[t.x,t.y]);n[t].coordinates=[n[t].coordinates.concat(e,r)]}e.geometry=n[t];e.properties=i;e.type="Feature";delete e.geometry.exterior;delete e.geometry.interior;r.push(e)}return r}static lineToGeojson(t){let e,r=[];let n=t.geometry;let i=t.properties;for(let t=0;t<n.length;t++){e={};if(n[t].type==="LineString"){let e=n[t].coordinates.map(t=>[t.x,t.y]);n[t].coordinates=e}e.geometry=n[t];e.properties=i;e.type="Feature";r.push(e)}return r}static pointToGeojson(t){let e,r=[];let n=t.geometry;let i=t.properties;for(let t=0;t<n.length;t++){e={};if(n[t].type==="Point"){n[t].coordinates=n[t].coordinates}e.geometry=n[t];e.properties=i;e.type="Feature";r.push(e)}return r}constructor(t){this.geometry=undefined;this.geometryType=undefined;this.attributes=undefined;this.style=undefined;this.FID=undefined;zt(this,t)}}qt.Service.VFeature=cf;class hf extends zc{constructor(t){var e=t||{};e.baseUrl="igs/rest/mrfws";super(e);this.flowID=e.flowID!==undefined?e.flowID:null}execute(t,e,r){var n={};Xt(n,this,["port","ip","baseUrl","partUrl","flowID"]);if(!e){e="get"}if(e.toLowerCase()==="get"){this.partUrl="execute/"+this.flowID+"?isAsy=false&f=json";if(n!==null){var i=re(n);if(i!==null||i!==""){this.partUrl+="&paraValues="+i}}}if(e.toLowerCase()==="post"){this.partUrl="execute/"+this.flowID+"?isAsy=false&f=json";var o=new Array;if(n!==null){for(var s in n){if(n[s]!==null){var a={};a.Key=s;a.Value=n[s].toString();o.push(a)}}}n=o}var u=this.getFullUrl();var l=this;var c=new Ac(u,{eventListeners:{scope:l,processCompleted:t,processFailed:r}});if(e.toLowerCase()==="post"){c.processAsync({method:"POST",data:JSON.stringify(n),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}else{c.processAsync()}}}qt.Service.AnalysisBase=hf;class ff extends hf{constructor(t){var e=t||{};super(e);this.srcInfo=e.srcInfo!==undefined?e.srcInfo:null;this.desInfo=e.desInfo!==undefined?e.desInfo:null;this.idstr=e.idstr!==undefined?e.idstr:"";this.angleType=e.angleType!==undefined?e.angleType:0;this.isDissolve=e.isDissolve!==undefined?e.isDissolve:true;this.isDynPrj=e.isDynPrj!==undefined?e.isDynPrj:false}}qt.Service.ClassBufferBase=ff;class pf extends ff{constructor(t){var e=t||{};super(e);this.flowID="600232";this.radiusStr=e.radiusStr!==undefined?e.radiusStr:"2,4,8,10"}}qt.Service.ClassBufferByMultiplyRing=pf;class df extends ff{constructor(t){var e=t||{};super(e);this.leftRad=e.leftRad!==undefined?e.leftRad:.001;this.rightRad=e.rightRad!==undefined?e.rightRad:.001;this.isByAtt=e.isByAtt!==undefined?e.isByAtt:true;this.fldName=e.fldName!==undefined?e.fldName:null;this.dynPrjRad=e.dynPrjRad!==undefined?e.dynPrjRad:0;this.flowID="600231"}}qt.Service.ClassBufferBySingleRing=df;class yf extends hf{constructor(t){var e=t||{};super(e);this.desInfo=e.desInfo!==undefined?e.desInfo:null;this.attOptType=e.attOptType!==undefined?e.attOptType:1;this.infoOptType=e.infoOptType!==undefined?e.infoOptType:1;this.overType=e.overType!==undefined?e.overType:3;this.tolerance=e.tolerance!==undefined?e.tolerance:1e-4;this.isCleanNode=e.isCleanNode!==undefined?e.isCleanNode:false;this.isLabelPnt=e.isLabelPnt!==undefined?e.isLabelPnt:false;this.isValidReg=e.isValidReg!==undefined?e.isValidReg:false}}qt.Service.ClipBase=yf;class vf extends yf{constructor(t){var e=t||{};super(e);this.srcInfo=e.srcInfo!==undefined?e.srcInfo:null;this.center=e.center!==undefined?e.center:null;this.radius=e.radius!==undefined?e.radius:null;this.step=e.step!==undefined?e.step:.001;this.flowID="600229"}}qt.Service.ClipByCircle=vf;class gf extends yf{constructor(t){var e=t||{};super(e);this.srcInfo1=e.srcInfo1!==undefined?e.srcInfo1:null;this.srcInfo2=e.srcInfo2!==undefined?e.srcInfo2:null;this.flowID="600230"}}qt.Service.ClipByLayer=gf;class mf extends yf{constructor(t){var e=t||{};super(e);this.srcInfo=e.srcInfo!==undefined?e.srcInfo:null;this.strPos=e.strPos!==undefined?e.strPos:null;this.flowID="600228"}}qt.Service.ClipByPolygon=mf;class _f extends hf{constructor(t){var e=t||{};super(e);this.flowID="600320";this.linSfclsURL=e.linSfclsURL!==undefined?e.linSfclsURL:null;this.regSfclsURL=e.regSfclsURL!==undefined?e.regSfclsURL:null;this.annoClsURL=e.annoClsURL!==undefined?e.annoClsURL:null;this.meshingParam=e.meshingParam!==undefined?e.meshingParam:null;this.contourParam=e.contourParam!==undefined?e.contourParam:null}}qt.Service.ContourAnalyse=_f;class bf extends hf{constructor(t){var e=t||{};super(e);this.sfGeometryXML=e.sfGeometryXML!==undefined?e.sfGeometryXML:null;this.attStrctXML=e.attStrctXML!==undefined?e.attStrctXML:null;this.attRowsXML=e.attRowsXML!==undefined?e.attRowsXML:null;this.traceRadius=e.traceRadius!==undefined?e.traceRadius:1e-4;this.resultName=e.resultName!==undefined?e.resultName:null;this.inFormat=e.inFormat!==undefined?e.inFormat:"json"}}qt.Service.FeatureBuffBase=bf;class xf extends bf{constructor(t){var e=t||{};super(e);this.radiusStr=e.radiusStr!==undefined?e.radiusStr:"0.003,0.002,0.001";this.flowID="600239"}}qt.Service.FeatureBuffByMultiplyRing=xf;class Sf extends bf{constructor(t){var e=t||{};super(e);this.leftRad=e.leftRad!==undefined?e.leftRad:.001;this.rightRad=e.rightRad!==undefined?e.rightRad:.001;this.flowID="600238"}}qt.Service.FeatureBuffBySingleRing=Sf;class wf extends hf{constructor(t){var e=t||{};super(e);this.netClsUrl=e.netClsUrl!==undefined?e.netClsUrl:null;this.flagPosStr=e.flagPosStr!==undefined?e.flagPosStr:null;this.barrierPosStr=e.barrierPosStr!==undefined?e.barrierPosStr:null;this.analyType=e.analyType!==undefined?e.analyType:lr.UserMode;this.weight=e.weight!==undefined?e.weight:",Weight1,Weight1";this.elementType=e.elementType!==undefined?e.elementType:cr.Edge;this.nearDis=e.nearDis!==undefined?e.nearDis:.001;this.outFormat=e.outFormat!==undefined?e.outFormat:"json";this.flowID="600233"}}qt.Service.NetAnalysis=wf;class Cf extends hf{constructor(t){var e=t||{};super(e);this.srcInfo1=e.srcInfo1!==undefined?e.srcInfo1:null;this.desInfo=e.desInfo!==undefined?e.desInfo:null;this.attOptType=e.attOptType!==undefined?e.attOptType:1;this.infoOptType=e.infoOptType!==undefined?e.infoOptType:1;this.overType=e.overType!==undefined?e.overType:3;this.isCleanNode=e.isCleanNode!==undefined?e.isCleanNode:false;this.isLabelPnt=e.isLabelPnt!==undefined?e.isLabelPnt:false;this.isValidReg=e.isValidReg!==undefined?e.isValidReg:false;this.isReCalculate=e.isReCalculate!==undefined?e.isReCalculate:true;this.radius=e.radius!==undefined?e.radius:.001}}qt.Service.OverlayBase=Cf;class If extends Cf{constructor(t){var e=t||{};super(e);this.srcInfo2=e.srcInfo2!==undefined?e.srcInfo2:null;this.flowID="600227"}}qt.Service.OverlayByLayer=If;class Ef extends Cf{constructor(t){var e=t||{};super(e);this.strGRegionXML=e.strGRegionXML!==undefined?e.strGRegionXML:null;this.inFormat=e.inFormat!==undefined?e.inFormat:"json";this.flowID="600237"}}qt.Service.OverlayByPolygon=Ef;class Pf extends hf{constructor(t){var e=t||{};super(e);this.clsName=e.clsName!==undefined?e.clsName:null;this.desClsName=e.desClsName!==undefined?e.desClsName:null;this.resultName=e.resultName!==undefined?e.resultName:null}}qt.Service.ProjectBase=Pf;class Mf extends Pf{constructor(t,e){var r=e||{};zt(r,t);super(r);this.flowID="600235"}}qt.Service.ProjectByLayer=Mf;class Lf extends Pf{constructor(t,e){var r=e||{};zt(r,t);super(r);this.flowID="600234";this.srID=r.srID!==undefined?r.srID:32}}qt.Service.ProjectBySRID=Lf;class Nf extends hf{constructor(t){var e=t||{};super(e);this.guid=e.guid?e.guid:ve();this.f=e.f!==undefined?e.f:"json"}executeWorkFlow(t,e,r,n,i,o){if(!r){r=false}var s={};if(o!==null&&o.toUpperCase()==="POST"){s.paraValues=e;this.partUrl="execute/"+t+"?f="+this.f+"&isAsy="+r+"&guid="+this.guid}else{this.partUrl="execute/"+t+"?paraValues="+e+"&f="+this.f+"&isAsy="+r+"&guid="+this.guid}var a=this;var u=a.getFullUrl();var l=new Ac(u,{eventListeners:{scope:a,processCompleted:n,processFailed:i}});if(o!==null&&o.toUpperCase()==="POST"){l.processAsync({method:"POST",data:JSON.stringify(s)})}else{l.processAsync()}}getInstanceMessage(t,e,r){this.partUrl="instanceLogs/"+t+"?f="+this.f+"&guid="+this.guid;var n=this;var i=n.getFullUrl();var o=new Ac(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}getInstanceOutPutValue(t,e,r,n){this.partUrl="outputvalues/"+t+"?name="+e+"&f="+this.f+"&guid="+this.guid;var i=this;var o=i.getFullUrl();var s=new Ac(o,{eventListeners:{scope:i,processCompleted:r,processFailed:n}});s.processAsync()}getInstanceResult(t,e,r){this.partUrl="results/"+t+"?f="+this.f+"&guid="+this.guid;var n=this;var i=n.getFullUrl();var o=new Ac(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}getInstanceStatus(t,e,r){this.partUrl="status/"+t+"?f="+this.f+"&guid="+this.guid;var n=this;var i=n.getFullUrl();var o=new Ac(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}getWorkFlowGroups(t,e){this.partUrl="groups/?f="+this.f+"&guid="+this.guid;var r=this;var n=r.getFullUrl();var i=new Ac(n,{eventListeners:{scope:r,processCompleted:t,processFailed:e}});i.processAsync()}getWorkFlowInfoByID(t,e,r){this.partUrl="workflows/"+t+"?f="+this.f+"&guid="+this.guid;var n=this;var i=n.getFullUrl();var o=new Ac(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}getWorkFlowInfos(t,e){this.partUrl="workflows?f="+this.f+"&guid="+this.guid;var r=this;var n=r.getFullUrl();var i=new Ac(n,{eventListeners:{scope:r,processCompleted:t,processFailed:e}});i.processAsync()}getWorkFlowInfosByGroup(t,e,r){this.partUrl="workflowsbygroup/"+t+"?f="+this.f+"&guid="+this.guid;var n=this;var i=n.getFullUrl();var o=new Ac(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}getFolder1(t,e){this.partUrl="folderInfos?f="+this.f+"&guid="+this.guid;var r=this;var n=r.getFullUrl();var i=new Ac(n,{eventListeners:{scope:r,processCompleted:t,processFailed:e}});i.processAsync()}getFolder2(t,e){this.partUrl="folderInfos/workflow?f="+this.f+"&guid="+this.guid;var r=this;var n=r.getFullUrl();var i=new Ac(n,{eventListeners:{scope:r,processCompleted:t,processFailed:e}});i.processAsync()}getFolder3(t,e,r){this.partUrl="folderInfos/workflow/"+t+"?f="+this.f+"&guid="+this.guid;var n=this;var i=n.getFullUrl();var o=new Ac(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}}qt.Service.FunctionWareService=Nf;class Tf extends zc{constructor(t){var e=t||{};e.baseUrl="igs/rest/mrgs";super(e)}}qt.Service.GeometryAnalysisBase=Tf;var Of=function(t){var e=t?t:{};zt(this,e);this.ProjAngleUnit=e.ProjAngleUnit!==undefined?e.ProjAngleUnit:0;this.ProjLat=e.ProjLat!==undefined?e.ProjLat:0;this.ProjLat1=e.ProjLat1!==undefined?e.ProjLat1:0;this.ProjLat2=e.ProjLat2!==undefined?e.ProjLat2:0;this.ProjLon=e.ProjLon!==undefined?e.ProjLon:0;this.ProjRate=e.ProjRate!==undefined?e.ProjRate:0;this.ProjType=e.ProjType!==undefined?e.ProjType:0;this.ProjTypeID=e.ProjTypeID!==undefined?e.ProjTypeID:0;this.ProjUnit=e.ProjUnit!==undefined?e.ProjUnit:0;this.ProjZoneNO=e.ProjZoneNO!==undefined?e.ProjZoneNO:0;this.ProjZoneType=e.ProjZoneType!==undefined?e.ProjZoneType:0;this.SphereID=e.SphereID!==undefined?e.SphereID:0};qt.Service.CProjectParam=Of;var Af=function(t,e){this.DesSrsID=t;this.GdbInfo=e};qt.Service.CProjectBySRSID=Af;class Rf extends Tf{constructor(t){var e=t?t:{};super(e);this.dots=e.dots!==undefined?e.dots:null;this.projectInfo=e.projectInfo!==undefined?e.projectInfo:null;this.projectInfoBySRSID=e.projectInfoBySRSID!==undefined?e.projectInfoBySRSID:null}execute(t,e,r){if(t instanceof Of){this.projectInfo=t}if(t instanceof Af){this.projectInfoBySrsID=t}var n={};n.Dots=this.dots;n.ProjectInfo=this.projectInfo;n.ProjectInfoBySrsID=this.projectInfoBySrsID;var i=this;var o=i.getFullUrl();var s=new Ac(o,{eventListeners:{scope:i,processCompleted:e,processFailed:r}});s.processAsync({method:"POST",data:JSON.stringify(n),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}qt.Service.CalServiceBase=Rf;class Ff extends Rf{constructor(t,e){var r=e?e:{};zt(r,{dots:t});super(r);this.partUrl="geomservice/calArea?f=json"}}qt.Service.CalArea=Ff;class Df extends Rf{constructor(t,e){var r=e?e:{};zt(r,{dots:t});super(r);this.partUrl="geomservice/calLength?f=json"}}qt.Service.CalPolyLineLength=Df;class kf extends Tf{constructor(t,e,r,n){var i=n?n:{};super(i);this.InputDots=t;this.SrcProjParam=e;this.DesProjParm=r}execute(t,e){this.partUrl="geomservice/projectdots?f=json";var r={};r["InputDots"]=this.InputDots;r["SrcProjParam"]=this.SrcProjParam;r["DesProjParm"]=this.DesProjParm;var n=this.getFullUrl();var i=this;var o=new Ac(n,{eventListeners:{scope:i,processCompleted:t,processFailed:e}});o.processAsync({method:"POST",data:JSON.stringify(r),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}qt.Service.ProjectDots=kf;class jf extends Tf{constructor(t){var e=t?t:{};super(e);this.gdbsvrName=e.gdbsvrName!==undefined?e.gdbsvrName:"MapGISLocal";this.gdbName=e.gdbName!==undefined?e.gdbName:null;this.srefID=e.srefID!==undefined?e.srefID:0;this.srefName=e.srefName!==undefined?e.srefName:null;this.desfID=e.desfID!==undefined?e.desfID:0;this.desfName=e.desfName!==undefined?e.desfName:null;this.userName=e.userName!==undefined?e.userName:null;this.password=e.password!==undefined?e.password:null}execute(t,e,r){var n="";if(t){n=t.xmin+"$"+t.ymin+"$"+t.xmax+"$"+t.ymax}this.partUrl=`geomservice/${this.gdbsvrName}/${this.gdbName}`;if(this.desfName&&this.srefName){this.partUrl+=`?f=json&rang=${n}`;this.partUrl+=`&srefName=${this.srefName}&desfName=${this.desfName}`}else if(this.desfID&&this.srefID){this.partUrl+=`/${this.srefID}/${this.desfID}`;this.partUrl+=`?f=json&rang=${n}`}if(this.userName&&this.password){this.partUrl+=`&userName=${this.userName}&password=${this.password}`}var i=this.getFullUrl();var o=this;var s=new Ac(i,{eventListeners:{scope:o,processCompleted:e,processFailed:r}});s.processAsync()}}qt.Service.ProjectRang=jf;class Gf extends Tf{constructor(t){var e=t?t:{};super(e);this.type=e.type!==undefined?e.type:0;this.step=e.step!==undefined?e.step:1}setType(t){this.type=t}setStep(t){this.step=t}execute(t,e,r){if(this.type==2){if(t.length<4){alert("当前选中的为三次Beizer样条，最少需四个点");return}}else{if(t.length<3){alert("当前选中的类型最少需三个点");return}}this.partUrl="geomservice/smooth?f=json&type="+this.type+"&step="+this.step;var n=this.getFullUrl();var i=this;var o=new Ac(n,{eventListeners:{scope:i,processCompleted:e,processFailed:r}});o.processAsync({method:"POST",data:JSON.stringify(t),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}qt.Service.Smooth=Gf;class Bf extends Tf{constructor(t){var e=t?t:{};super(e);this.pnt=e.pnt!==undefined?e.pnt:null;this.line=e.line!==undefined?e.line:null;this.reg=e.reg!==undefined?e.reg:null;this.nearDis=e.nearDis!==undefined?e.nearDis:.01;this.relativeObj=e.relativeObj!==undefined?e.relativeObj:null;this.p_onSuccess=e.p_onSuccess!==undefined?e.p_onSuccess:null}setPnt(t){this.pnt=t}setLine(t){this.line=t}setReg(t){this.reg=t}setRelativeObj(t){this.relativeObj=t}onGetRltSuccess(t){var e=_e(t);this.p_onSuccess(e)}execute(t,e){var r=this;r.p_onSuccess=t;var n={};n.NearDis=this.nearDis;n.Pnt=this.pnt;n.Line=this.line;n.Reg=this.reg;n.RelativeObj=this.relativeObj;r.partUrl="geomservice/topanalysis?f=json";var i=r.getFullUrl();var r=this;var o=new Ac(i,{eventListeners:{scope:r,processCompleted:r.onGetRltSuccess,processFailed:e}});o.processAsync({method:"POST",data:JSON.stringify(n),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}qt.Service.TopAnalysis=Bf;class Uf extends Tf{constructor(t){var e=t?t:{};super(e);this.points=e.points!==undefined?e.points:"";this.dx=e.dx!==undefined?e.dx:"";this.dy=e.dy!==undefined?e.dy:"";this.dz=e.dz!==undefined?e.dz:"";this.m=e.m!==undefined?e.m:"";this.wx=e.wx!==undefined?e.wx:"";this.wy=e.wy!==undefined?e.wy:"";this.wz=e.wz!==undefined?e.wz:"";this.srcsrsname=e.srcsrsname!==undefined?e.srcsrsname:"";this.dessrsname=e.dessrsname!==undefined?e.dessrsname:""}coordinateTrans(t,e,r){var n={};if(r!==null&&r.toUpperCase()==="POST"){n.paraValues="";this.partUrl="geomservice/transcoordinate?points="+this.points+"&dx="+this.dx+"&dy="+this.dy+"&dz="+this.dz+"&m="+this.m+"&wx="+this.wx+"&wy="+this.wy+"&wz="+this.wz+"&srcsrsname="+this.srcsrsname+"&dessrsname="+this.dessrsname}else{n=this;this.partUrl="geomservice/transcoordinate"}var i=this.getFullUrl();var o=this;var s=new Ac(i,{eventListeners:{scope:o,processCompleted:t,processFailed:e}});if(r!==null&&r.toUpperCase()==="POST"){s.processAsync({method:"POST",data:JSON.stringify(n)})}else{s.processAsync()}}}qt.Service.CoordinateTransform=Uf;class qf extends zc{constructor(t){var e=t||{};e.baseUrl="igs/rest/mrms";super(e)}}qt.Service.MapServiceBase=qf;class zf extends qf{constructor(t){var e=t||{};super(e);this.docName=e.docName!==undefined?e.docName:null;this.cache=e.cache!==undefined?e.cache:false;if(this.cache){this.level=e.level!==undefined?e.level:0;this.row=e.row!==undefined?e.row:0;this.col=e.col!==undefined?e.col:0;this.update=e.update!==undefined?e.update:false}else{this.layers=e.layers!==undefined?e.layers:null;this.style=e.style!==undefined?e.style:null;this.picType=e.picType!==undefined?e.picType:"gif";this.bbox=e.bbox!==undefined?e.bbox:null;this.filters=e.filters!==undefined?e.filters:null;this.picWidth=e.picWidth!==undefined?e.picWidth:512;this.picHeight=e.picHeight!==undefined?e.picHeight:512;this.proj=e.proj!==undefined?e.proj:null;this.guid=e.guid!==undefined?e.guid:ve()}}GetMapImage(){if(this.docName){if(this.cache===true){this.partUrl="docs/"+this.docName+"?"+"cache="+this.cache.toString()+"&level="+this.level+"&row="+this.row+"&col="+this.col+"&update="+this.update.toString()}else{this.partUrl="docs/"+this.docName+"?";if(this.bbox!==null){this.partUrl+="bbox="+this.bbox}if(this.picWidth!==null){this.partUrl+="&w="+this.picWidth}if(this.picHeight!==null){this.partUrl+="&h="+this.picHeight}if(this.layers!==null){this.partUrl+="&layers="+this.layers}if(this.filters!==null){this.partUrl+="&filters="+encodeURI(this.filters)}if(this.style!==null){this.partUrl+="&style="+JSON.stringify(this.style)}if(this.proj!==null){this.partUrl+="&proj="+JSON.stringify(this.proj)}if(this.picType!==null){this.partUrl+="&f="+this.picType}if(this.guid!==null){this.partUrl+="&guid="+this.guid}}var t=this.getFullUrl();return t}return null}}qt.Service.GetDocImageService=zf;class Vf extends qf{constructor(t){var e=t||{};super(e);this.gdbps=e.gdbps!==undefined?e.gdbps:null;this.picType=e.picType!==undefined?e.picType:"gif";this.style=e.style!==undefined?e.style:null;this.bbox=e.bbox!==undefined?e.bbox:null;this.filters=e.filters!==undefined?e.filters:null;this.picWidth=e.picWidth!==undefined?e.picWidth:512;this.picHeight=e.picHeight!==undefined?e.picHeight:512}GetLayerImage(){if(this.gdbps!==null&&this.picWidth!==null&&this.picHeight!==null){this.partUrl="layers?"+"f="+this.picType;this.partUrl+="&gdbps=";this.gdbps.split(",");var t=this.gdbps.split(",");for(var e=0;e<t.length;e++){this.partUrl+=t[e];if(e<t.length-1){this.partUrl+=","}}if(this.style!==null){this.partUrl+="&style="+JSON.stringify(this.style)}if(this.filters!==null){this.partUrl+="&filters="+this.filters}if(this.bbox!==null){this.partUrl+="&bbox="+this.bbox}this.partUrl+="&w="+this.picWidth;this.partUrl+="&h="+this.picHeight;var r=this.getFullUrl();return r}return null}}qt.Service.GetLayerImageService=Vf;class Wf extends qf{constructor(t){var e=t||{};super(e);this.mapName=e.mapName!==undefined?e.mapName:null;this.mapType=e.mapType!==undefined?e.mapType:vr.Doc;if(this.mapType===vr.Tile){this.level=e.level!==undefined?e.level:0;this.row=e.row!==undefined?e.row:0;this.col=e.col!==undefined?e.col:0}else{this.picType=e.picType!==undefined?e.picType:"gif";this.picWidth=e.picWidth!==undefined?e.picWidth:512;this.picHeight=e.picHeight!==undefined?e.picHeight:512;this.xmin=e.xmin!==undefined?e.xmin:null;this.xmax=e.xmax!==undefined?e.xmax:null;this.ymin=e.ymin!==undefined?e.ymin:null;this.ymax=e.ymax!==undefined?e.ymax:null}}GetImage(){if(this.mapName){if(this.mapType===vr.Tile){this.partUrl="tile/"+this.mapName+"?"+"lvl="+this.level+"&row="+this.row+"&col="+this.col}else{this.partUrl="map/"+this.mapName+"?"+"width="+this.picWidth+"&height="+this.picHeight+"&f="+this.picType;if(this.xmin!==null&&this.xmax!==null&&this.ymin!==null&&this.ymax!==null){this.partUrl+="&xmin="+this.xmin+"&ymin="+this.ymin+"&xmax="+this.xmax+"&ymax="+this.ymax}}var t=this.getFullUrl();return t}return null}}qt.Service.GetMapImageService=Wf;class Hf extends qf{constructor(t){var e=t||{};super(e);this.mapName=e.mapName!==undefined?e.mapName:null;this.guid=e.guid!==undefined?e.guid:ve();this.token=e.token;this.type=e.type}GetMapInfo(t,e){var r=this;if(r.mapName){r.partUrl="info/"+this.mapName;var n=[];if(r.guid){n.push("guid="+r.guid)}if(this.token){n.push("token="+r.token)}if(this.type){n.push("type="+r.type)}if(n.length>0){r.partUrl+="?"+n.join("&")}var i=r.getFullUrl();var o=new Ac(i,{eventListeners:{scope:r,processCompleted:t,processFailed:e}});o.processAsync()}}}qt.Service.GetMapInfoService=Hf;class Xf extends qf{constructor(t){var e=t||{};super(e);this.hdfName=e.hdfName!==undefined?e.hdfName:null;this.level=e.level!==undefined?e.level:0;this.row=e.row!==undefined?e.row:0;this.col=e.col!==undefined?e.col:0}GetTileImage(){if(this.hdfName!==undefined){this.partUrl="tile/"+this.hdfName+"/"+this.level+"/"+this.row+"/"+this.col;var t=this.getFullUrl();return t}return null}}qt.Service.GetTileImageService=Xf;var Zf={DefaultThemeInfo:1,DataItemIntrinsicInfo:2};qt.Object.Theme.CAllOtherDataItemInfoSource=Zf;var Yf=function(t){var e=t!==undefined?t:{};zt(this,e);this.LibID=e.LibID!==undefined?e.LibID:0;this.Ovprnt=e.Ovprnt!==undefined?e.Ovprnt:false;this.Angle=e.Ovprnt!==undefined?e.Ovprnt:0;this.BackClr=e.BackClr!==undefined?e.BackClr:0;this.BackExp=e.BackExp!==undefined?e.BackExp:0;this.Chnt=e.Chnt!==undefined?e.Chnt:0;this.Color=e.Color!==undefined?e.Color:0;this.FontAngle=e.FontAngle!==undefined?e.FontAngle:0;this.Height=e.Height!==undefined?e.Height:0;this.Ifnt=e.Ifnt!==undefined?e.Ifnt:0;this.Ifnx=e.Ifnx!==undefined?e.Ifnx:0;this.IsFilled=e.IsFilled!==undefined?e.IsFilled:false;this.IsHzpl=e.IsHzpl!==undefined?e.IsHzpl:true;this.OffsetX=e.OffsetX!==undefined?e.OffsetX:0;this.OffsetY=e.OffsetY!==undefined?e.OffsetY:0;this.Space=e.Space!==undefined?e.Space:0;this.Width=e.Width!==undefined?e.Width:0};qt.Object.Theme.CAnnInfo=Yf;var Jf={Unknown:0,Value:1,Percent:2};qt.Object.Theme.CChartLabelFormat=Jf;class Qf{constructor(t){var e=t!==undefined?t:{};zt(this,e);this.Name=e&&e.Name?e.Name:null;this.IsBaseTheme=e&&e.IsBaseTheme?e.IsBaseTheme:true;this.Visible=e&&e.Visible?e.Visible:true}}qt.Object.Theme.CTheme=Qf;var Kf={Unknown:0,Bar:1,Bar3D:2,Pie:3,Pie3D:4,Line:5,Line3D:6,Point:7};qt.Object.Theme.CChartType=Kf;var $f=function(t){var e=t!==undefined?t:{};zt(this,e);this.LibID=e.LibID!==undefined?e.LibID:0;this.Ovprnt=e.Ovprnt!==undefined?e.Ovprnt:false;this.Angle=e.Angle!==undefined?e.Angle:0;this.BackClr=e.BackClr!==undefined?e.BackClr:0;this.BackExp=e.BackExp!==undefined?e.BackExp:0;this.FillFlg=e.FillFlg!==undefined?e.FillFlg:0;this.Height=e.Height!==undefined?e.Height:0;this.Width=e.Width!==undefined?e.Width:0;this.OutClr=e.OutClr!==undefined?e.OutClr:[0,0,0];this.SymID=e.SymID!==undefined?e.SymID:0;this.OutPenW=e.OutPenW!==undefined?e.OutPenW:[.05,.05,.05]};qt.Object.Theme.CPntInfo=$f;var tp=function(t){var e=t!==undefined?t:{};zt(this,e);this.LibID=e.LibID!==undefined?e.LibID:0;this.Ovprnt=e.Ovprnt!==undefined?e.Ovprnt:false;this.AdjustFlg=e.AdjustFlg!==undefined?e.AdjustFlg:hr.Adjust;this.HeadType=e.HeadType!==undefined?e.HeadType:fr.Round;this.JointType=e.JointType!==undefined?e.JointType:pr.Round;this.LinStyID=e.LinStyID!==undefined?e.LinStyID:0;this.MakeMethod=e.MakeMethod!==undefined?e.MakeMethod:dr.Byrule;this.OutClr=e.OutClr!==undefined?e.OutClr:[46,4,3];this.XScale=e.XScale!==undefined?e.XScale:10;this.YScale=e.YScale!==undefined?e.YScale:10;this.OutPenW=e.OutPenW!==undefined?e.OutPenW:[.05,.05,.05]};qt.Object.Theme.CLinInfo=tp;var ep=function(t){var e=t!==undefined?t:{};zt(this,e);this.LibID=e.LibID!==undefined?e.LibID:0;this.Ovprnt=e.Ovprnt!==undefined?e.Ovprnt:false;this.Angle=e.Angle!==undefined?e.Angle:0;this.EndClr=e.EndClr!==undefined?e.EndClr:0;this.FillClr=e.FillClr!==undefined?e.FillClr:46;this.FillMode=e.FillMode!==undefined?e.FillMode:0;this.FullPatFlg=e.FullPatFlg!==undefined?e.FullPatFlg:true;this.PatClr=e.PatClr!==undefined?e.PatClr:3;this.PatHeight=e.PatHeight!==undefined?e.PatHeight:5;this.PatID=e.PatID!==undefined?e.PatID:0;this.PatWidth=e.PatWidth!==undefined?e.PatWidth:5;this.OutPenW=e.OutPenW!==undefined?e.OutPenW:1};qt.Object.Theme.CRegInfo=ep;class rp{constructor(t){var e=t!==undefined?t:{};zt(this,e);this.Caption=e.Caption!==undefined?e.Caption:null;this.IsVisible=e.IsVisible!==undefined?e.IsVisible:true;this.MaxScale=e.MaxScale!==undefined?parseFloat(e.MaxScale):0;this.MinScale=e.MinScale!==undefined?parseFloat(e.MinScale):0;this.RegInfo=e.RegInfo!==undefined?e.RegInfo:null;this.LinInfo=e.LinInfo!==undefined?e.LinInfo:null;this.PntInfo=e.PntInfo!==undefined?e.PntInfo:null}}qt.Object.Theme.CThemeInfo=rp;class np extends rp{constructor(t,e){var r=e?e:{};super(r);this.Expression=t!==undefined?t:""}}qt.Object.Theme.CChartThemeInfo=np;var ip=function(t){var e=t!==undefined?t:{};zt(this,e);this.AnnInfoLabel=e.AnnInfoLabel!==undefined?e.AnnInfoLabel:new Yf;this.DigitLabel=e.DigitLabel!==undefined?e.DigitLabel:0;this.FormatLabel=e.FormatLabel!==undefined?e.FormatLabel:Jf.Unknown;this.IsDrawLabel=e.IsDrawLabel!==undefined?e.IsDrawLabel:true;this.LineColor=e.LineColor!==undefined?e.LineColor:-1;this.MaxLength=e.MaxLength!==undefined?e.MaxLength:30;this.MinRadius=e.MinRadius!==undefined?e.MinRadius:10;this.PieSizeFixFlag=e.PieSizeFixFlag!==undefined?e.PieSizeFixFlag:0;this.PieTiltedAngle=e.PieTiltedAngle!==undefined?e.PieTiltedAngle:30;this.PlotRadius=e.PlotRadius!==undefined?e.PlotRadius:1;this.ThickPersent=e.ThickPersent!==undefined?e.ThickPersent:10;this.Width=e.Width!==undefined?e.Width:3};qt.Object.Theme.CChartThemeRepresentInfo=ip;class op extends Qf{constructor(t){var e=t?t:{};super(e);this.ChartType=e.ChartType!==undefined?e.ChartType:Kf.Bar;this.ChartThemeInfoArr=e.ChartThemeInfoArr!==undefined?e.ChartThemeInfoArr:null;this.RepresentInfo=e.RepresentInfo!==undefined?e.RepresentInfo:null;this.Type="CChartTheme"}}qt.Object.Theme.CChartTheme=op;class sp extends Qf{constructor(t){var e=t?t:{};super(e);this.Expression=e.Expression!==undefined?e.Expression:"";this.Info=e.Info!==undefined?e.Info:null;this.Value=e.Value!==undefined?e.Value:null;this.Type="CDotDensityTheme"}}qt.Object.Theme.CDotDensityTheme=sp;class ap extends Qf{constructor(t){var e=t?t:{};super(e);this.ClrInfo=e.ClrInfo!==undefined?e.ClrInfo:[25,57,89,121];this.Type="CFourColorTheme"}}qt.Object.Theme.CFourColorTheme=ap;class up extends Qf{constructor(t){var e=t?t:{};super(e);this.BaseValue=e.BaseValue!==undefined?e.BaseValue:141e-6;this.DispMinus=e.DispMinus!==undefined?e.DispMinus:false;this.DispZero=e.DispZero!==undefined?e.DispZero:false;this.Expression=e.Expression!==undefined?e.Expression:null;this.MinusPntInfo=e.MinusPntInfo!==undefined?e.MinusPntInfo:null;this.PlusPntInfo=e.PlusPntInfo!==undefined?e.PlusPntInfo:null;this.ZeroPntInfo=e.ZeroPntInfo!==undefined?e.ZeroPntInfo:null;this.Type="CGraduatedSymbolTheme"}}qt.Object.Theme.CGraduatedSymbolTheme=up;var lp=function(t,e,r){var n=r!==undefined?r:{};zt(this,n);this.Expression=t!==undefined?t:"";this.ItemValueArr=e!==undefined?e:null};qt.Object.Theme.ExpInfo=lp;class cp extends Qf{constructor(t){var e=t?t:{};super(e);this.DefaultInfo=e.DefaultInfo!==undefined?e.DefaultInfo:null;this.ExpInfoArr=e.ExpInfoArr!==undefined?e.ExpInfoArr:null;this.MultiClassThemeInfoArr=e.MultiClassThemeInfoArr!==undefined?e.MultiClassThemeInfoArr:null;this.GeoInfoType=e.GeoInfoType!==undefined?e.GeoInfoType:null;this.Type="CMultiClassTheme"}}qt.Object.Theme.CMultiClassTheme=cp;class hp extends Qf{constructor(t){var e=t?t:{};super(e);this.Type="CRandomTheme"}}qt.Object.Theme.CRandomTheme=hp;class fp extends rp{constructor(t,e,r){var n=r?r:{};super(n);this.StartValue=t!==undefined?t:"";this.EndValue=e!==undefined?e:""}}qt.Object.Theme.CRangeThemeInfo=fp;class pp extends Qf{constructor(t){var e=t?t:{};super(e);this.AllOtherDataItemInfoSource=e.AllOtherDataItemInfoSource!==undefined?e.AllOtherDataItemInfoSource:Zf.DefaultThemeInfo;this.Expression=e.Expression!==undefined?e.Expression:"";this.DefaultInfo=e.DefaultInfo!==undefined?e.DefaultInfo:null;this.RangeThemeInfoArr=e.RangeThemeInfoArr!==undefined?e.RangeThemeInfoArr:null;this.GeoInfoType=e.GeoInfoType!==undefined?e.GeoInfoType:null;this.Type="CRangeTheme"}}qt.Object.Theme.CRangeTheme=pp;class dp extends Qf{constructor(t){var e=t?t:{};super(e);this.ThemeInfo=e.ThemeInfo!==undefined?e.ThemeInfo:new rp;this.Type="CSimpleTheme"}}qt.Object.Theme.CSimpleTheme=dp;class yp extends rp{constructor(t,e){var r=e?e:{};super(r);this.Value=t!==undefined?t:""}}qt.Object.Theme.CUniqueThemeInfo=yp;class vp extends Qf{constructor(t){var e=t?t:{};super(e);this.DefaultInfo=e.DefaultInfo!==undefined?e.DefaultInfo:null;this.Expression=e.Expression!==undefined?e.Expression:"";this.UniqueThemeInfoArr=e.UniqueThemeInfoArr!==undefined?e.UniqueThemeInfoArr:null;this.GeoInfoType=e.GeoInfoType!==undefined?e.GeoInfoType:null;this.Type="CUniqueTheme"}}qt.Object.Theme.CUniqueTheme=vp;var gp=function(t,e){this.name=t!==undefined?t:null;this.Value=e!==undefined?e:null};qt.Object.Theme.FolderInfoAttribute=gp;var mp=function(t,e){this.name=t!==undefined?t:null;this.attribute=e!==undefined?e:null};qt.Object.Theme.FolderInfo=mp;var _p=function(t,e,r,n){var i=n!==undefined?n:{};zt(this,i);this.StartValue=t!==undefined?t:"";this.EndValue=e!==undefined?e:"";this.ClassItemType=r!==undefined?r:yr.RangeTheme};qt.Object.Theme.ItemValue=_p;var bp=function(t,e){this.LayerName=t!==undefined?t:null;this.ThemeArr=e!==undefined?e:null};qt.Object.Theme.ThemesInfo=bp;class xp extends zc{constructor(t,e){var e=e||{};e.baseUrl="igs/rest/theme";super(e);if(t!==null){this.guid=t}else{this.guid=ve()}this.p_onSuccess=e.p_onSuccess!==undefined?e.p_onSuccess:null}onGetThemesInfoSuccess(t){var e=new mp;Wt(e,t.result||t);if(e!==null&&e.attribute!==null&&e.attribute.length>0){var r=[];var n=null;for(var i=0;i<e.attribute.length;i++){r[i]=new bp;if(e.attribute[i]!==null){r[i].LayerName=e.attribute[i].name;n=JSON.parse(e.attribute[i].value);if(n!==null&&n.length>0){r[i].ThemeArr=[];for(var o=0;o<n.length;o++){switch(n[o].name){case"CMultiClassTheme":r[i].ThemeArr[o]=new cp;break;case"CSimpleTheme":r[i].ThemeArr[o]=new dp;break;case"CChartTheme":r[i].ThemeArr[o]=new op;break;case"CGraduatedSymbolTheme":r[i].ThemeArr[o]=new up;break;case"CDotDensityTheme":r[i].ThemeArr[o]=new sp;break;case"CRandomTheme":r[i].ThemeArr[o]=new hp;break;case"CFourColorTheme":r[i].ThemeArr[o]=new ap;break;case"CUniqueTheme":r[i].ThemeArr[o]=new vp;break;case"CRangeTheme":r[i].ThemeArr[o]=new pp;break}Wt(r[i].ThemeArr[o],JSON.parse(n[o].value))}}}}if(this.p_onSuccess!==null&&typeof this.p_onSuccess==="function"){this.p_onSuccess(r)}}}getThemesInfo(t,e,r,n){var i=this;i.p_onSuccess=r;var o=Math.random();i.partUrl=t+"/get?idxArr="+e+"&r="+o+"&guid="+i.guid;var s=i.getFullUrl();var a=new Ac(s,{eventListeners:{scope:i,processCompleted:i.onGetThemesInfoSuccess,processFailed:n}});a.processAsync()}removeThemesInfo(t,e,r,n){var i=this;var o=Math.random();i.partUrl=t+"/remove?idxArr="+e+"&r="+o+"&guid="+i.guid;var s=i.getFullUrl();var a=new Ac(s,{eventListeners:{scope:i,processCompleted:r,processFailed:n}});a.processAsync()}updateThemesInfo(t,e,r,n,i){var o=this;var s=Math.random();o.partUrl=t+"/update?idxArr="+e+"&guid="+this.guid;var a=o.getFullUrl();var u=new mp;if(r!==null&&r.length>0){u.name="ThemeInfo";u.attribute=[];for(var l=0;l<r.length;l++){u.attribute[l]=new gp;u.attribute[l].name=r[l].LayerName;if(r[l].ThemeArr!==null&&r[l].ThemeArr.length>0){var c=[];for(var h=0;h<r[l].ThemeArr.length;h++){if(r[l].ThemeArr[h]!==null)c[h]=new gp(r[l].ThemeArr[h].Type,JSON.stringify(r[l].ThemeArr[h]))}u.attribute[l].value=JSON.stringify(c)}}}var f=new Ac(a,{eventListeners:{scope:o,processCompleted:n,processFailed:i}});f.processAsync({method:"POST",data:JSON.stringify(u),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}addThemesInfo(t,e,r,n,i){var o=this;var s=Math.random();o.partUrl=t+"/add?idxArr="+e+"&guid="+this.guid;var a=o.getFullUrl();var u=new mp;if(r!==null&&r.length>0){u.name="ThemeInfo";u.attribute=[];for(var l=0;l<r.length;l++){u.attribute[l]=new gp;u.attribute[l].name=r[l].LayerName;if(r[l].ThemeArr!==null&&r[l].ThemeArr.length>0){var c=[];for(var h=0;h<r[l].ThemeArr.length;h++){if(r[l].ThemeArr[h]!==null)c[h]=new gp(r[l].ThemeArr[h].Type,JSON.stringify(r[l].ThemeArr[h]))}u.attribute[l].value=JSON.stringify(c)}}}var f=new Ac(a,{eventListeners:{scope:o,processCompleted:n,processFailed:i}});f.processAsync({method:"POST",data:JSON.stringify(u),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}qt.Service.ThemeOper=xp;var Sp={Extend:c,G3D:h,MRCS:f,MRFS:p,MRFWS:d,MRGS:y,MRMS:v,Info:g};const wp="http://www.w3.org/1999/xlink";var Cp=function(t){return t.getAttributeNS(wp,"href")};qt.XLink.readHref=Cp;var Ip=function(t,e,r){let n,i;const o=r||Ep;let s=0;let a=t.length;let u=false;while(s<a){n=s+(a-s>>1);i=+o(t[n],e);if(i<0){s=n+1}else{a=n;u=!i}}return u?s:~s};var Ep=function(t,e){return t>e?1:t<e?-1:0};var Pp=function(t,e){return t.indexOf(e)>=0};var Mp=function(t,e,r){const n=t.length;if(t[0]<=e){return 0}else if(e<=t[n-1]){return n-1}else{let i;if(r>0){for(i=1;i<n;++i){if(t[i]<e){return i-1}}}else if(r<0){for(i=1;i<n;++i){if(t[i]<=e){return i}}}else{for(i=1;i<n;++i){if(t[i]==e){return i}else if(t[i]<e){if(t[i-1]-e<e-t[i]){return i-1}else{return i}}}}return n-1}};var Lp=function(t,e,r){while(e<r){const n=t[e];t[e]=t[r];t[r]=n;++e;--r}};var Np=function(t,e){const r=Array.isArray(e)?e:[e];const n=r.length;for(let e=0;e<n;e++){t[t.length]=r[e]}};var Tp=function(t,e){const r=t.indexOf(e);const n=r>-1;if(n){t.splice(r,1)}return n};var Op=function(t,e){const r=t.length>>>0;let n;for(let i=0;i<r;i++){n=t[i];if(e(n,i,t)){return n}}return null};var Ap=function(t,e){const r=t.length;if(r!==e.length){return false}for(let n=0;n<r;n++){if(t[n]!==e[n]){return false}}return true};var Rp=function(t,e){const r=t.length;const n=Array(t.length);let i;for(i=0;i<r;i++){n[i]={index:i,value:t[i]}}n.sort(function(t,r){return e(t.value,r.value)||t.index-r.index});for(i=0;i<t.length;i++){t[i]=n[i].value}};var Fp=function(t,e){let r;const n=!t.every(function(n,i){r=i;return!e(n,i,t)});return n?r:-1};var Dp=function(t,e,r){const n=e||Ep;return t.every(function(e,i){if(i===0){return true}const o=n(t[i-1],e);return!(o>0||r&&o===0)})};qt.array.binarySearch=Ip;qt.array.numberSafeCompareFunction=Ep;qt.array.includes=Pp;qt.array.linearFindNearest=Mp;qt.array.reverseSubArray=Lp;qt.array.extend=Np;qt.array.remove=Tp;qt.array.find=Op;qt.array.equals=Ap;qt.array.stableSort=Rp;qt.array.findIndex=Fp;qt.array.isSorted=Dp;const kp=document.implementation.createDocument("","",null);const jp="http://www.w3.org/2001/XMLSchema-instance";var Gp=function(t,e){return kp.createElementNS(t,e)};var Bp=function(t,e){return Up(t,e,[]).join("")};var Up=function(t,e,r){if(t.nodeType==Node.CDATA_SECTION_NODE||t.nodeType==Node.TEXT_NODE){if(e){r.push(String(t.nodeValue).replace(/(\r\n|\r|\n)/g,""))}else{r.push(t.nodeValue)}}else{let n;for(n=t.firstChild;n;n=n.nextSibling){Up(n,e,r)}}return r};var qp=function(t){return t instanceof Document};var zp=function(t){return t instanceof Node};var Vp=function(t,e,r){return t.getAttributeNS(e,r)||""};var Wp=function(t){return(new DOMParser).parseFromString(t,"application/xml")};var Hp=function(t,e){return function(r,n){const i=t.call(e!==undefined?e:this,r,n);if(i!==undefined){const t=n[n.length-1];Np(t,i)}}};var Xp=function(t,e){return function(r,n){const i=t.call(e!==undefined?e:this,r,n);if(i!==undefined){const t=n[n.length-1];t.push(i)}}};var Zp=function(t,e){return function(r,n){const i=t.call(e!==undefined?e:this,r,n);if(i!==undefined){n[n.length-1]=i}}};var Yp=function(t,e,r){return function(n,i){const o=t.call(r!==undefined?r:this,n,i);if(o!==undefined){const t=i[i.length-1];const r=e!==undefined?e:n.localName;let s;if(r in t){s=t[r]}else{s=t[r]=[]}s.push(o)}}};var Jp=function(t,e,r){return function(n,i){const o=t.call(r!==undefined?r:this,n,i);if(o!==undefined){const t=i[i.length-1];const r=e!==undefined?e:n.localName;t[r]=o}}};var Qp=function(t,e){return function(r,n,i){t.call(e!==undefined?e:this,r,n,i);const o=i[i.length-1];const s=o.node;s.appendChild(r)}};var Kp=function(t,e){let r,n;return function(e,i,o){if(r===undefined){r={};const i={};i[e.localName]=t;r[e.namespaceURI]=i;n=$p(e.localName)}od(r,n,i,o)}};var $p=function(t,e){const r=t;return function(t,n,i){const o=n[n.length-1];const s=o.node;let a=r;if(a===undefined){a=i}const u=e!==undefined?e:s.namespaceURI;return Gp(u,a)}};const td=$p();var ed=function(t,e){const r=e.length;const n=new Array(r);for(let i=0;i<r;++i){n[i]=t[e[i]]}return n};var rd=function(t,e,r){const n=r!==undefined?r:{};let i,o;for(i=0,o=t.length;i<o;++i){n[t[i]]=e}return n};var nd=function(t,e,r,n){let i;for(i=e.firstElementChild;i;i=i.nextElementSibling){const e=t[i.namespaceURI];if(e!==undefined){const t=e[i.localName];if(t!==undefined){t.call(n,i,r)}}}};var id=function(t,e,r,n,i){n.push(t);nd(e,r,n,i);return n.pop()};var od=function(t,e,r,n,i,o){const s=(i!==undefined?i:r).length;let a,u;for(let l=0;l<s;++l){a=r[l];if(a!==undefined){u=e.call(o!==undefined?o:this,a,n,i!==undefined?i[l]:undefined);if(u!==undefined){t[u.namespaceURI][u.localName].call(o,u,a,n)}}}};var sd=function(t,e,r,n,i,o,s){i.push(t);od(e,r,n,i,o,s);return i.pop()};qt.xml.DOCUMENT=kp;qt.xml.XML_SCHEMA_INSTANCE_URI=jp;qt.xml.createElementNS=Gp;qt.xml.getAllTextContent=Bp;qt.xml.getAllTextContent_=Up;qt.xml.isDocument=qp;qt.xml.isNode=zp;qt.xml.getAttributeNS=Vp;qt.xml.parse=Wp;qt.xml.makeArrayExtender=Hp;qt.xml.makeArrayPusher=Xp;qt.xml.makeReplacer=Zp;qt.xml.makeObjectPropertyPusher=Yp;qt.xml.makeObjectPropertySetter=Jp;qt.xml.makeChildAppender=Qp;qt.xml.makeArraySerializer=Kp;qt.xml.makeSimpleNodeFactory=$p;qt.xml.OBJECT_PROPERTY_NODE_FACTORY=td;qt.xml.makeSequence=ed;qt.xml.makeStructureNS=rd;qt.xml.parseNode=nd;qt.xml.pushParseAndPop=id;qt.xml.serialize=od;qt.xml.applyTransform=sd;class ad{read(t){if(qp(t)){return this.readFromDocument(t)}else if(zp(t)){return this.readFromNode(t)}else if(typeof t==="string"){const e=Wp(t);return this.readFromDocument(e)}else{return null}}readFromDocument(t){}readFromNode(t){}}var ud=ad;qt.Format.XML=ad;var ld=function(t,e,r){const n=r!==undefined?t.toFixed(r):""+t;let i=n.indexOf(".");i=i===-1?n.length:i;return i>e?n:new Array(1+e-i).join("0")+n};var cd=function(t,e){const r=(""+t).split(".");const n=(""+e).split(".");for(let t=0;t<Math.max(r.length,n.length);t++){const e=parseInt(r[t]||"0",10);const i=parseInt(n[t]||"0",10);if(e>i){return 1}if(i>e){return-1}}return 0};qt.string.padNumber=ld;qt.string.compareVersions=cd;var hd=function(t){const e=Bp(t,false);return fd(e)};var fd=function(t){const e=/^\s*(true|1)|(false|0)\s*$/.exec(t);if(e){return e[1]!==undefined||false}else{return undefined}};var pd=function(t){const e=Bp(t,false);const r=Date.parse(e);return isNaN(r)?undefined:r/1e3};var dd=function(t){const e=Bp(t,false);return yd(e)};var yd=function(t){const e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(t);if(e){return parseFloat(e[1])}else{return undefined}};var vd=function(t){const e=Bp(t,false);return gd(e)};var gd=function(t){const e=/^\s*(\d+)\s*$/.exec(t);if(e){return parseInt(e[1],10)}else{return undefined}};var md=function(t){return Bp(t,false).trim()};var _d=function(t,e){Cd(t,e?"1":"0")};var bd=function(t,e){t.appendChild(kp.createCDATASection(e))};var xd=function(t,e){const r=new Date(e*1e3);const n=r.getUTCFullYear()+"-"+ld(r.getUTCMonth()+1,2)+"-"+ld(r.getUTCDate(),2)+"T"+ld(r.getUTCHours(),2)+":"+ld(r.getUTCMinutes(),2)+":"+ld(r.getUTCSeconds(),2)+"Z";t.appendChild(kp.createTextNode(n))};var Sd=function(t,e){const r=e.toPrecision();t.appendChild(kp.createTextNode(r))};var wd=function(t,e){const r=e.toString();t.appendChild(kp.createTextNode(r))};var Cd=function(t,e){t.appendChild(kp.createTextNode(e))};qt.xsd.readBoolean=hd;qt.xsd.readBooleanString=fd;qt.xsd.readDateTime=pd;qt.xsd.readDecimal=dd;qt.xsd.readDecimalString=yd;qt.xsd.readNonNegativeInteger=vd;qt.xsd.readNonNegativeIntegerString=gd;qt.xsd.readString=md;qt.xsd.writeBooleanTextNode=_d;qt.xsd.writeCDATASection=bd;qt.xsd.writeDateTimeTextNode=xd;qt.xsd.writeDecimalTextNode=Sd;qt.xsd.writeNonNegativeIntegerTextNode=wd;qt.xsd.writeStringTextNode=Cd;const Id=[null,"http://www.opengis.net/wms"];const Ed=rd(Id,{Service:Jp(Zd),Capability:Jp(Xd)});const Pd=rd(Id,{Request:Jp(ny),Exception:Jp(Kd),Layer:Jp($d)});class Md extends ud{constructor(){super();this.version=undefined}readFromDocument(t){for(let e=t.firstChild;e;e=e.nextSibling){if(e.nodeType==Node.ELEMENT_NODE){return this.readFromNode(e)}}return null}readFromNode(t){this.version=t.getAttribute("version").trim();const e=id({version:this.version},Ed,t,[]);return e?e:null}}const Ld=rd(Id,{Name:Jp(md),Title:Jp(md),Abstract:Jp(md),KeywordList:Jp(hy),OnlineResource:Jp(Cp),ContactInformation:Jp(Yd),Fees:Jp(md),AccessConstraints:Jp(md),LayerLimit:Jp(vd),MaxWidth:Jp(vd),MaxHeight:Jp(vd)});const Nd=rd(Id,{ContactPersonPrimary:Jp(Jd),ContactPosition:Jp(md),ContactAddress:Jp(Qd),ContactVoiceTelephone:Jp(md),ContactFacsimileTelephone:Jp(md),ContactElectronicMailAddress:Jp(md)});const Td=rd(Id,{ContactPerson:Jp(md),ContactOrganization:Jp(md)});const Od=rd(Id,{AddressType:Jp(md),Address:Jp(md),City:Jp(md),StateOrProvince:Jp(md),PostCode:Jp(md),Country:Jp(md)});const Ad=rd(Id,{Format:Xp(md)});const Rd=rd(Id,{Name:Jp(md),Title:Jp(md),Abstract:Jp(md),KeywordList:Jp(hy),SRS:Yp(md),EX_GeographicBoundingBox:Jp(Hd),BoundingBox:Yp(Wd),Dimension:Yp(ey),Attribution:Jp(Vd),AuthorityURL:Yp(uy),Identifier:Yp(md),MetadataURL:Yp(ly),DataURL:Yp(ry),FeatureListURL:Yp(ry),Style:Yp(cy),MinScaleDenominator:Jp(dd),MaxScaleDenominator:Jp(dd),Layer:Yp(ty)});const Fd=rd(Id,{Title:Jp(md),OnlineResource:Jp(Cp),LogoURL:Jp(ay)});const Dd=rd(Id,{westBoundLongitude:Jp(dd),eastBoundLongitude:Jp(dd),southBoundLatitude:Jp(dd),northBoundLatitude:Jp(dd)});const kd=rd(Id,{GetCapabilities:Jp(sy),GetMap:Jp(sy),GetFeatureInfo:Jp(sy)});const jd=rd(Id,{Format:Yp(md),DCPType:Yp(iy)});const Gd=rd(Id,{HTTP:Jp(oy)});const Bd=rd(Id,{Get:Jp(ry),Post:Jp(ry)});const Ud=rd(Id,{Name:Jp(md),Title:Jp(md),Abstract:Jp(md),LegendURL:Yp(ay),StyleSheetURL:Jp(ry),StyleURL:Jp(ry)});const qd=rd(Id,{Format:Jp(md),OnlineResource:Jp(Cp)});const zd=rd(Id,{Keyword:Xp(md)});function Vd(t,e){return id({},Fd,t,e)}function Wd(t,e){const r=[yd(t.getAttribute("minx")),yd(t.getAttribute("miny")),yd(t.getAttribute("maxx")),yd(t.getAttribute("maxy"))];const n=[yd(t.getAttribute("resx")),yd(t.getAttribute("resy"))];return{srs:t.getAttribute("SRS"),extent:r,res:n}}function Hd(t,e){const r=id({},Dd,t,e);if(!r){return undefined}const n=r["westBoundLongitude"];const i=r["southBoundLatitude"];const o=r["eastBoundLongitude"];const s=r["northBoundLatitude"];if(n===undefined||i===undefined||o===undefined||s===undefined){return undefined}return[n,i,o,s]}function Xd(t,e){return id({},Pd,t,e)}function Zd(t,e){return id({},Ld,t,e)}function Yd(t,e){return id({},Nd,t,e)}function Jd(t,e){return id({},Td,t,e)}function Qd(t,e){return id({},Od,t,e)}function Kd(t,e){return id([],Ad,t,e)}function $d(t,e){return id({},Rd,t,e)}function ty(t,e){const r=e[e.length-1];const n=id({},Rd,t,e);if(!n){return undefined}let i=fd(t.getAttribute("queryable"));if(i===undefined){i=r["queryable"]}n["queryable"]=i!==undefined?i:false;let o=gd(t.getAttribute("cascaded"));if(o===undefined){o=r["cascaded"]}n["cascaded"]=o;let s=fd(t.getAttribute("opaque"));if(s===undefined){s=r["opaque"]}n["opaque"]=s!==undefined?s:false;let a=fd(t.getAttribute("noSubsets"));if(a===undefined){a=r["noSubsets"]}n["noSubsets"]=a!==undefined?a:false;let u=yd(t.getAttribute("fixedWidth"));if(!u){u=r["fixedWidth"]}n["fixedWidth"]=u;let l=yd(t.getAttribute("fixedHeight"));if(!l){l=r["fixedHeight"]}n["fixedHeight"]=l;const c=["Style","SRS","AuthorityURL"];c.forEach(function(t){if(t in r){const e=n[t]||[];n[t]=e.concat(r[t])}});const h=["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"];h.forEach(function(t){if(!(t in n)){const e=r[t];n[t]=e}});return n}function ey(t,e){const r={name:t.getAttribute("name"),units:t.getAttribute("units"),unitSymbol:t.getAttribute("unitSymbol"),default:t.getAttribute("default"),multipleValues:fd(t.getAttribute("multipleValues")),nearestValue:fd(t.getAttribute("nearestValue")),current:fd(t.getAttribute("current")),values:md(t)};return r}function ry(t,e){return id({},qd,t,e)}function ny(t,e){return id({},kd,t,e)}function iy(t,e){return id({},Gd,t,e)}function oy(t,e){return id({},Bd,t,e)}function sy(t,e){return id({},jd,t,e)}function ay(t,e){const r=ry(t,e);if(r){const e=[gd(t.getAttribute("width")),gd(t.getAttribute("height"))];r["size"]=e;return r}return undefined}function uy(t,e){const r=ry(t,e);if(r){r["name"]=t.getAttribute("name");return r}return undefined}function ly(t,e){const r=ry(t,e);if(r){r["type"]=t.getAttribute("type");return r}return undefined}function cy(t,e){return id({},Ud,t,e)}function hy(t,e){return id([],zd,t,e)}qt.Format.WMSCapabilities=Md;var fy={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"};qt.Enum.Corner=fy;var py={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};qt.Enum.Relationship=py;var dy=function(t){const e=wy();for(let r=0,n=t.length;r<n;++r){Oy(e,t[r])}return e};var yy=function(t,e,r){const n=Math.min.apply(null,t);const i=Math.min.apply(null,e);const o=Math.max.apply(null,t);const s=Math.max.apply(null,e);return Cy(n,i,o,s,r)};var vy=function(t,e,r){if(r){r[0]=t[0]-e;r[1]=t[1]-e;r[2]=t[2]+e;r[3]=t[3]+e;return r}else{return[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}};var gy=function(t,e){if(e){e[0]=t[0];e[1]=t[1];e[2]=t[2];e[3]=t[3];return e}else{return t.slice()}};var my=function(t,e,r){let n,i;if(e<t[0]){n=t[0]-e}else if(t[2]<e){n=e-t[2]}else{n=0}if(r<t[1]){i=t[1]-r}else if(t[3]<r){i=r-t[3]}else{i=0}return n*n+i*i};var _y=function(t,e){return xy(t,e[0],e[1])};var by=function(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]};var xy=function(t,e,r){return t[0]<=e&&e<=t[2]&&t[1]<=r&&r<=t[3]};var Sy=function(t,e){const r=t[0];const n=t[1];const i=t[2];const o=t[3];const s=e[0];const a=e[1];let u=py.UNKNOWN;if(s<r){u=u|py.LEFT}else if(s>i){u=u|py.RIGHT}if(a<n){u=u|py.BELOW}else if(a>o){u=u|py.ABOVE}if(u===py.UNKNOWN){u=py.INTERSECTING}return u};var wy=function(){return[Infinity,Infinity,-Infinity,-Infinity]};var Cy=function(t,e,r,n,i){if(i){i[0]=t;i[1]=e;i[2]=r;i[3]=n;return i}else{return[t,e,r,n]}};var Iy=function(t){return Cy(Infinity,Infinity,-Infinity,-Infinity,t)};var Ey=function(t,e){const r=t[0];const n=t[1];return Cy(r,n,r,n,e)};var Py=function(t,e){const r=Iy(e);return Ay(r,t)};var My=function(t,e,r,n,i){const o=Iy(i);return Ry(o,t,e,r,n)};var Ly=function(t,e){const r=Iy(e);return Fy(r,t)};var Ny=function(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]};var Ty=function(t,e){if(e[0]<t[0]){t[0]=e[0]}if(e[2]>t[2]){t[2]=e[2]}if(e[1]<t[1]){t[1]=e[1]}if(e[3]>t[3]){t[3]=e[3]}return t};var Oy=function(t,e){if(e[0]<t[0]){t[0]=e[0]}if(e[0]>t[2]){t[2]=e[0]}if(e[1]<t[1]){t[1]=e[1]}if(e[1]>t[3]){t[3]=e[1]}};var Ay=function(t,e){for(let r=0,n=e.length;r<n;++r){Oy(t,e[r])}return t};var Ry=function(t,e,r,n,i){for(;r<n;r+=i){Dy(t,e[r],e[r+1])}return t};var Fy=function(t,e){for(let r=0,n=e.length;r<n;++r){Ay(t,e[r])}return t};var Dy=function(t,e,r){t[0]=Math.min(t[0],e);t[1]=Math.min(t[1],r);t[2]=Math.max(t[2],e);t[3]=Math.max(t[3],r)};var ky=function(t,e,r){let n;n=e.call(r,Gy(t));if(n){return n}n=e.call(r,By(t));if(n){return n}n=e.call(r,Qy(t));if(n){return n}n=e.call(r,Jy(t));if(n){return n}return false};var jy=function(t){let e=0;if(!tv(t)){e=Ky(t)*Wy(t)}return e};var Gy=function(t){return[t[0],t[1]]};var By=function(t){return[t[2],t[1]]};var Uy=function(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]};var qy=function(t,e){let r;if(e===fy.BOTTOM_LEFT){r=Gy(t)}else if(e===fy.BOTTOM_RIGHT){r=By(t)}else if(e===fy.TOP_LEFT){r=Jy(t)}else if(e===fy.TOP_RIGHT){r=Qy(t)}else{}return r};var zy=function(t,e){const r=Math.min(t[0],e[0]);const n=Math.min(t[1],e[1]);const i=Math.max(t[2],e[2]);const o=Math.max(t[3],e[3]);return(i-r)*(o-n)};var Vy=function(t,e,r,n,i){const o=e*n[0]/2;const s=e*n[1]/2;const a=Math.cos(r);const u=Math.sin(r);const l=o*a;const c=o*u;const h=s*a;const f=s*u;const p=t[0];const d=t[1];const y=p-l+f;const v=p-l-f;const g=p+l-f;const m=p+l+f;const _=d-c-h;const b=d-c+h;const x=d+c+h;const S=d+c-h;return Cy(Math.min(y,v,g,m),Math.min(_,b,x,S),Math.max(y,v,g,m),Math.max(_,b,x,S),i)};var Wy=function(t){return t[3]-t[1]};var Hy=function(t,e){const r=Xy(t,e);return jy(r)};var Xy=function(t,e,r){const n=r?r:wy();if($y(t,e)){if(t[0]>e[0]){n[0]=t[0]}else{n[0]=e[0]}if(t[1]>e[1]){n[1]=t[1]}else{n[1]=e[1]}if(t[2]<e[2]){n[2]=t[2]}else{n[2]=e[2]}if(t[3]<e[3]){n[3]=t[3]}else{n[3]=e[3]}}else{Iy(n)}return n};var Zy=function(t){return Ky(t)+Wy(t)};var Yy=function(t){return[t[2]-t[0],t[3]-t[1]]};var Jy=function(t){return[t[0],t[3]]};var Qy=function(t){return[t[2],t[3]]};var Ky=function(t){return t[2]-t[0]};var $y=function(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]};var tv=function(t){return t[2]<t[0]||t[3]<t[1]};var ev=function(t,e){if(e){e[0]=t[0];e[1]=t[1];e[2]=t[2];e[3]=t[3];return e}else{return t}};var rv=function(t,e){const r=(t[2]-t[0])/2*(e-1);const n=(t[3]-t[1])/2*(e-1);t[0]-=r;t[2]+=r;t[1]-=n;t[3]+=n};var nv=function(t,e,r){let n=false;const i=Sy(t,e);const o=Sy(t,r);if(i===py.INTERSECTING||o===py.INTERSECTING){n=true}else{const s=t[0];const a=t[1];const u=t[2];const l=t[3];const c=e[0];const h=e[1];const f=r[0];const p=r[1];const d=(p-h)/(f-c);let y,v;if(!!(o&py.ABOVE)&&!(i&py.ABOVE)){y=f-(p-l)/d;n=y>=s&&y<=u}if(!n&&!!(o&py.RIGHT)&&!(i&py.RIGHT)){v=p-(f-u)*d;n=v>=a&&v<=l}if(!n&&!!(o&py.BELOW)&&!(i&py.BELOW)){y=f-(p-a)/d;n=y>=s&&y<=u}if(!n&&!!(o&py.LEFT)&&!(i&py.LEFT)){v=p-(f-s)*d;n=v>=a&&v<=l}}return n};var iv=function(t,e,r){const n=[t[0],t[1],t[0],t[3],t[2],t[1],t[2],t[3]];e(n,n,2);const i=[n[0],n[2],n[4],n[6]];const o=[n[1],n[3],n[5],n[7]];return yy(i,o,r)};qt.extent.boundingExtent=dy;qt.extent.buffer=vy;qt.extent.clone=gy;qt.extent.closestSquaredDistanceXY=my;qt.extent.containsCoordinate=_y;qt.extent.containsExtent=by;qt.extent.containsXY=xy;qt.extent.coordinateRelationship=Sy;qt.extent.createEmpty=wy;qt.extent.createOrUpdate=Cy;qt.extent.createOrUpdateEmpty=Iy;qt.extent.createOrUpdateFromCoordinate=Ey;qt.extent.createOrUpdateFromCoordinates=Py;qt.extent.createOrUpdateFromFlatCoordinates=My;qt.extent.createOrUpdateFromRings=Ly;qt.extent.equals=Ny;qt.extent.extend=Ty;qt.extent.extendCoordinate=Oy;qt.extent.extendCoordinates=Ay;qt.extent.extendFlatCoordinates=Ry;qt.extent.extendRings=Fy;qt.extent.extendXY=Dy;qt.extent.forEachCorner=ky;qt.extent.getArea=jy;qt.extent.getBottomLeft=Gy;qt.extent.getBottomRight=By;qt.extent.getCenter=Uy;qt.extent.getCorner=qy;qt.extent.getEnlargedArea=zy;qt.extent.getForViewAndSize=Vy;qt.extent.getHeight=Wy;qt.extent.getIntersectionArea=Hy;qt.extent.getIntersection=Xy;qt.extent.getMargin=Zy;qt.extent.getSize=Yy;qt.extent.getTopLeft=Jy;qt.extent.getTopRight=Qy;qt.extent.getWidth=Ky;qt.extent.intersects=$y;qt.extent.isEmpty=tv;qt.extent.returnOrUpdate=ev;qt.extent.scaleFromCenter=rv;qt.extent.intersectsSegment=nv;qt.extent.applyTransform=iv;const ov=[null,"http://www.opengis.net/ows/1.1"];const sv=rd(ov,{ServiceIdentification:Jp(Tv),ServiceProvider:Jp(Av),OperationsMetadata:Jp(Lv)});class av extends ud{constructor(){super()}readFromDocument(t){for(let e=t.firstChild;e;e=e.nextSibling){if(e.nodeType==Node.ELEMENT_NODE){return this.readFromNode(e)}}return null}readFromNode(t){const e=id({},sv,t,[]);return e?e:null}}const uv=rd(ov,{DeliveryPoint:Jp(md),City:Jp(md),AdministrativeArea:Jp(md),PostalCode:Jp(md),Country:Jp(md),ElectronicMailAddress:Jp(md)});const lv=rd(ov,{Value:Yp(Rv)});const cv=rd(ov,{AllowedValues:Jp(Sv)});const hv=rd(ov,{Phone:Jp(Nv),Address:Jp(xv)});const fv=rd(ov,{HTTP:Jp(Pv)});const pv=rd(ov,{Get:Yp(Ev),Post:undefined});const dv=rd(ov,{DCP:Jp(Iv)});const yv=rd(ov,{Operation:Mv});const vv=rd(ov,{Voice:Jp(md),Facsimile:Jp(md)});const gv=rd(ov,{Constraint:Yp(wv)});const mv=rd(ov,{IndividualName:Jp(md),PositionName:Jp(md),ContactInfo:Jp(Cv)});const _v=rd(ov,{Abstract:Jp(md),AccessConstraints:Jp(md),Fees:Jp(md),Title:Jp(md),ServiceTypeVersion:Jp(md),ServiceType:Jp(md)});const bv=rd(ov,{ProviderName:Jp(md),ProviderSite:Jp(Cp),ServiceContact:Jp(Ov)});function xv(t,e){return id({},uv,t,e)}function Sv(t,e){return id({},lv,t,e)}function wv(t,e){const r=t.getAttribute("name");if(!r){return undefined}return id({name:r},cv,t,e)}function Cv(t,e){return id({},hv,t,e)}function Iv(t,e){return id({},fv,t,e)}function Ev(t,e){const r=Cp(t);if(!r){return undefined}return id({href:r},gv,t,e)}function Pv(t,e){return id({},pv,t,e)}function Mv(t,e){const r=t.getAttribute("name");const n=id({},dv,t,e);if(!n){return undefined}const i=e[e.length-1];i[r]=n}function Lv(t,e){return id({},yv,t,e)}function Nv(t,e){return id({},vv,t,e)}function Tv(t,e){return id({},_v,t,e)}function Ov(t,e){return id({},mv,t,e)}function Av(t,e){return id({},bv,t,e)}function Rv(t,e){return md(t)}var Fv=av;qt.Format.OWS=av;const Dv=[null,"http://www.opengis.net/wmts/1.0"];const kv=[null,"http://www.opengis.net/ows/1.1"];const jv=rd(Dv,{Contents:Jp(Jv)});class Gv extends ud{constructor(){super();this.owsParser_=new Fv}readFromDocument(t){for(let e=t.firstChild;e;e=e.nextSibling){if(e.nodeType==Node.ELEMENT_NODE){return this.readFromNode(e)}}return null}readFromNode(t){const e=t.getAttribute("version").trim();let r=this.owsParser_.readFromNode(t);if(!r){return null}r["version"]=e;r=id(r,jv,t,[]);return r?r:null}}const Bv=rd(Dv,{Layer:Yp(Qv),TileMatrixSet:Yp(Kv)});const Uv=rd(Dv,{Style:Yp($v),Format:Yp(md),TileMatrixSetLink:Yp(tg),Dimension:Yp(eg),ResourceURL:Yp(rg)},rd(kv,{Title:Jp(md),Abstract:Jp(md),BoundingBox:Jp(ng),WGS84BoundingBox:Jp(ng),Identifier:Jp(md)}));const qv=rd(Dv,{LegendURL:Yp(ig)},rd(kv,{Title:Jp(md),Identifier:Jp(md)}));const zv=rd(Dv,{TileMatrixSet:Jp(md),TileMatrixSetLimits:Jp(ag)});const Vv=rd(Dv,{TileMatrixLimits:Xp(ug)});const Wv=rd(Dv,{TileMatrix:Jp(md),MinTileRow:Jp(vd),MaxTileRow:Jp(vd),MinTileCol:Jp(vd),MaxTileCol:Jp(vd)});const Hv=rd(Dv,{Default:Jp(md),Value:Yp(md)},rd(kv,{Identifier:Jp(md)}));const Xv=rd(kv,{LowerCorner:Xp(og),UpperCorner:Xp(og)});const Zv=rd(Dv,{WellKnownScaleSet:Jp(md),TileMatrix:Yp(sg)},rd(kv,{SupportedCRS:Jp(md),Identifier:Jp(md)}));const Yv=rd(Dv,{TopLeftCorner:Jp(og),ScaleDenominator:Jp(dd),TileWidth:Jp(vd),TileHeight:Jp(vd),MatrixWidth:Jp(vd),MatrixHeight:Jp(vd)},rd(kv,{Identifier:Jp(md)}));function Jv(t,e){return id({},Bv,t,e)}function Qv(t,e){return id({},Uv,t,e)}function Kv(t,e){return id({},Zv,t,e)}function $v(t,e){const r=id({},qv,t,e);if(!r){return undefined}const n=t.getAttribute("isDefault")==="true";r["isDefault"]=n;return r}function tg(t,e){return id({},zv,t,e)}function eg(t,e){return id({},Hv,t,e)}function rg(t,e){const r=t.getAttribute("format");const n=t.getAttribute("template");const i=t.getAttribute("resourceType");const o={};if(r){o["format"]=r}if(n){o["template"]=n}if(i){o["resourceType"]=i}return o}function ng(t,e){const r=id([],Xv,t,e);if(r.length!=2){return undefined}return dy(r)}function ig(t,e){const r={};r["format"]=t.getAttribute("format");r["href"]=Cp(t);return r}function og(t,e){const r=md(t).split(/\s+/);if(!r||r.length!=2){return undefined}const n=+r[0];const i=+r[1];if(isNaN(n)||isNaN(i)){return undefined}return[n,i]}function sg(t,e){return id({},Yv,t,e)}function ag(t,e){return id([],Vv,t,e)}function ug(t,e){return id({},Wv,t,e)}qt.Format.WMTSCapabilities=Gv;var lg=r(35);var cg=r.n(lg);class hg extends zc{constructor(t){var e=t||{};super(e);e.baseUrl="igs/rest/ogc";this.ip=e.ip||"localhost";this.port=e.port||"6163";this.baseUrl=e.baseUrl;this.version=e.version||"1.0.0";this.serverName=e.serverName;this.name=e.name;this.style=e.style||"default";this.tileMatrixset=e.tileMatrixset;this.tileMatrix=e.tileMatrix;this.tileRow=e.tileRow;this.tileCol=e.tileCol;this.format=e.format||"image/png";this.infoFormat=e.infoFormat||"text/html";this.I=e.I;this.J=e.J}getWMTSInfo(t,e){var r=this;let n="";if(r.serverName&&r.serverName!==""){n+=r.serverName+"/"}n+="WMTSServer/1.0.0/WMTSCapabilities.xml";r.partUrl=n;var i=r.getFullUrl();cg()({method:"get",url:i}).then(t).catch(e)}getFeatureInfo(t,e){var r=this;r.partUrl="WMTSServer?service=WMTS&request=GetFeatureInfo&version="+r.version+"&layer="+r.serverName+":"+r.name+"&style="+r.style+"&TileMatrixSet="+r.tileMatrixSet+"&TileMatrix="+r.tileMatrix+"&TileRow="+r.tileRow+"&TileCol="+r.tileCol+"&format="+r.format+"&InfoFormat="+r.infoFormat+"&I="+r.I+"&J="+r.J;var n=r.getFullUrl();cg()({method:"get",url:n}).then(t).catch(e)}}qt.OGC.OGCWMTSInfo=hg;class fg extends zc{constructor(t){var e=t||{};super(e);e.baseUrl="igs/rest/ogc";this.ip=e.ip||"localhost";this.port=e.port||"6163";this.baseUrl=e.baseUrl;this.serverType=e.serverType;this.serverName=e.serverName;this.version=e.version||"1.1.1";this.layersName=e.layersName;this.style=e.style||"default";this.srs=e.srs;this.bbox=e.bbox;this.width=e.width||"1024";this.height=e.height||"768";this.format=e.format||"image/png";this.infoFormat=e.infoFormat||"text/html";this.I=e.I;this.J=e.J}getWMSInfo(t,e){var r=this;r.partUrl=r.serverType+"/"+r.serverName+"/WMSServer?service=WMS&REQUEST=GetCapabilities&version="+r.version;var n=r.getFullUrl();cg()({method:"get",url:n}).then(t).catch(e)}getFeatureInfo(t,e){var r=this;r.partUrl=r.serverType+"/"+r.serverName+"/WMSServer?layers="+r.layersName+"&version="+r.version+"&service=WMS&request=GetFeatureInfo&styles="+r.style+"&format="+r.format+"&bbox="+r.bbox+"&width="+r.width+"&height="+r.height+"&query_Layers="+r.layersName+"&info_Format="+r.infoFormat;if(r.version==="1.1.1"){r.partUrl+="&srs="+r.srs+"&&X="+r.I+"&Y="+r.J}else if(r.version==="1.3.0"){r.partUrl+="&crs="+r.srs+"&&I="+r.I+"&J="+r.J}var n=r.getFullUrl();cg()({method:"get",url:n}).then(t).catch(e)}}qt.OGC.OGCWMSInfo=fg;let pg=window.MapGIS=window.MapGIS||{};pg.OGC=pg.OGC||{};class dg extends zc{constructor(t){var e=t||{};e.baseUrl="igs/rest/ogc";super(e)}get(t,e,r){var n=this;var i=new IgsServiceBase(t,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});i.processAsync()}post(t,e,r,n){var i=this;var o=new IgsServiceBase(t,{eventListeners:{scope:i,processCompleted:r,processFailed:n}});o.processAsync({method:"POST",data:JSON.stringify(e),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}pg.OGC.OGCService=dg;var yg=r(29);var vg=r.n(yg);class gg extends dg{constructor(t){var e=t||{};super(e);this.url=e.url}isBaseUrl(){let t=false;const e="WMSServer";const r=this.url.length;const n=this.url.indexOf(e)+e.length;let i=this.url;if(n===r){i=`${this.url}?request=GetCapabilities&service=WMS`;t=true}else if(n===r-1){i=`${this.url}request=GetCapabilities&service=WMS`;t=true}return t}async makeFullUrl(){if(this.isBaseUrl()){let t=await this.getCapabilities();let{height:e,width:r,crs:n,format:i,version:o,styles:s}=this;let a=t.WMT_MS_Capabilities.Capability.Layer.Layer.map(t=>t.Name).toString();let u={service:"WMS",request:"GetMap",layers:a,styles:s||"",format:i||"image/png",transparent:true,version:o||"1.1.1",height:e||256,width:r||256,srs:n||"EPSG:4326"};let l=`${this.url}?${vg.a.stringify(u)}`;return l}}async getCapabilities(){const t="WMSServer";const e=this.url.length;const r=this.url.indexOf(t)+t.length;let n=this.url;if(r===e){n=`${this.url}?request=GetCapabilities&service=WMS`}else if(r===e-1){n=`${this.url}request=GetCapabilities&service=WMS`}let i=await cg.a.get(n);let o=i.data;let s=_.a.getTraversalObj(o,{});let a=_.a.convertToJson(s,{});return a}}pg.OGC.WMS=gg;class mg extends dg{constructor(t){var e=t||{};super(e);this.url=e.url;this.featureTypes=[];this.layers=[]}isBaseUrl(){let t=false;const e="WFSServer";const r=this.url.length;const n=this.url.indexOf(e)+e.length;let i;if(n===r){i=`${this.url}?request=GetCapabilities&service=WFS`;t=true}else if(n===r-1){i=`${this.url}request=GetCapabilities&service=WFS`;t=true}return t}setVersion(t){this.version=t;return this}setCrs(t){this.srsname=t;return this}setName(t){this.typename=t;return this}setOutputFormat(t){this.outputFormat=t}async getCapabilities(){const t="WFSServer";const e=this.url.length;const r=this.url.indexOf(t)+t.length;let n=this.url;if(r===e){n=`${this.url}?request=GetCapabilities&service=WFS`}else if(r===e-1){n=`${this.url}request=GetCapabilities&service=WFS`}let i=await cg.a.get(n);let o=i.data;let s=_.a.getTraversalObj(o,{});let a=_.a.convertToJson(s,{});let u=a["wfs:WFS_Capabilities"]["ows:ServiceIdentification"]["ows:ServiceTypeVersion"];if(u==="1.1.0"){this.featureTypes=a["wfs:WFS_Capabilities"]["FeatureTypeList"]["FeatureType"];let t;let e="";this.featureTypes.forEach((r,n)=>{if(n==0){t=r["DefaultSRS"];e=`${r["Name"]}`}});this.layers=this.featureTypes.map(t=>t["Name"]);this.setName(e).setCrs(t).setVersion(u).setOutputFormat("text/xml; subtype=gml/3.2")}else if(u==="2.0.0"){let t=a["wfs:WFS_Capabilities"]["wfs:FeatureTypeList"]["wfs:FeatureType"];let e=t["wfs:DefaultCRS"];let r=t["wfs:Name"];this.setName(r).setCrs(e).setVersion(u)}return a}async getFeature(){const t="WFSServer";const e=this.url.length;const r=this.url.indexOf(t)+t.length;let n=this.url;let{maxFeatures:i=100,version:o="1.1.0",typename:s="",outputFormat:a,srsname:u="EPSG:4326",bbox:l}=this;let c={service:"WFS",request:"GetFeature",version:o,typename:s,outputFormat:a,srsname:u,maxFeatures:i};if(o==="1.1.0"){if(l){c=Object.assign(c,{bbox:`${l},${u}`})}else{c=c}}else if(o==="2.0.0"){c=Object.assign(c,{Envelope:`${l},${u}`})}if(r===e){n=`${this.url}?${vg.a.stringify(c)}`}else if(r===e-1){n=`${this.url}${vg.a.stringify(c)}`}let h=await cg.a.get(n);let f=h.data;let p=_.a.getTraversalObj(f,{});let d=_.a.convertToJson(p,{});let y={geojson:undefined,xml:d};let v;switch(o){case"1.1.0":v=convert;break;case"2.0.0":break}return y}}pg.OGC.WFS=mg;let _g={SpaceTime:"spacetime_db",Addredd:"address_db"};let bg={SpaceTime:"时空库",Addredd:"地址库"};let xg={Point:0,Polygon:1};Zondy.Enum.EsCatlogType=_g;Zondy.Enum.EsCatlogName=bg;Zondy.Enum.EsGeoHashType=xg;class Sg extends zc{constructor(t){super(t);this.fixParams(t)}fixParams(t){this.params=t;delete this.params.url;delete this.params.ip;delete this.params.port;delete this.params.domain;delete this.params.baseUrl;delete this.params.networkProtocol;delete this.params.partUrl}getBaseUrl(){let t="";const{baseUrl:e,ip:r,port:n,domain:i,networkProtocol:o}=this;if(e){t=e}else if(i){t=i}else if(o&&r&&n){t=`${o}://${r}:${n}`}return t}getFullUrl(t,e){let r=this.getBaseUrl();let n=r+t+"?"+vg.a.stringify(e);return n}get(t,e,r){var n=this;var i=new Ac(t,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});i.processAsync()}post(t,e,r,n){var i=this;var o=new Ac(t,{eventListeners:{scope:i,processCompleted:r,processFailed:n}});o.processAsync({method:"POST",data:JSON.stringify(e),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}var wg=Sg;class Cg extends Sg{constructor(t){let e=t||{};super(e);this.serviceUrl="/datastore/rest/catalog/es/services/";this.indexName=e.indexName!==undefined?e.indexName:null;this.classify=e.classify!==undefined?e.classify:null;this.keyWords=e.keyWords!==undefined?e.keyWords:null;this.pageSize=e.pageSize!==undefined?e.pageSize:100;this.pageNo=e.pageNo!==undefined?e.pageNo:1}query(t,e){let{serviceUrl:r,params:n}=this;let i=this.getFullUrl(r,n);this.get(i,t,e)}}qt.DataStore.ElasticSearch.EsCatlogService=Cg;class Ig extends Sg{constructor(t){super(t);this.serviceUrl="/addressservice/es/location/geocode/";this.indexName=t.indexName!==undefined?t.indexName:null;this.province=t.province!==undefined?t.province:null;this.city=t.city!==undefined?t.city:null;this.keyWord=t.keyWord!==undefined?t.keyWord:"";this.bbox=t.bbox!==undefined?t.bbox:null;this.geometry=t.geometry!==undefined?t.geometry:null;this.filter=t.filter!==undefined?t.filter:null;this.pageSize=t.pageSize!==undefined?t.pageSize:100;this.pageNo=t.pageNo!==undefined?t.pageNo:1;this.fixOption()}fixOption(){this.option={province:this.province,city:this.city,keyWord:this.keyWord,bbox:this.bbox,geometry:this.geometry,filter:this.filter,pageSize:this.pageSize,pageNo:this.pageNo}}query(t,e){let{serviceUrl:r,option:n,indexName:i}=this;r=r+i;let o=this.getFullUrl(r,n);this.get(o,t,e)}}qt.DataStore.ElasticSearch.ESGeoCode=Ig;class Eg extends Sg{constructor(t){super(t);this.serviceUrl="/addressservice/es/location/geodecode/";this.indexName=t.indexName!==undefined?t.indexName:null;this.province=t.province!==undefined?t.province:null;this.city=t.city!==undefined?t.city:null;this.bbox=t.bbox!==undefined?t.bbox:null;this.geometry=t.geometry!==undefined?t.geometry:null;this.filter=t.filter!==undefined?t.filter:null;this.lon=t.lon!==undefined?t.lon:null;this.lat=t.lat!==undefined?t.lat:null;this.dis=t.dis!==undefined?t.dis:.1;this.pageSize=t.pageSize!==undefined?t.pageSize:100;this.pageNo=t.pageNo!==undefined?t.pageNo:1;this.fixOption()}fixOption(){this.option={province:this.province,city:this.city,bbox:this.bbox,geometry:this.geometry,filter:this.filter,lon:this.lon,lat:this.lat,dis:this.dis,pageSize:this.pageSize,pageNo:this.pageNo}}query(t,e){let{serviceUrl:r,option:n,indexName:i}=this;r=r+i;let o=this.getFullUrl(r,n);this.get(o,t,e)}}qt.DataStore.ElasticSearch.ESGeoDecode=Eg;class Pg extends Sg{constructor(t){super(t);this.serviceUrl="/datastore/rest/dataset/es/query/";this.libName=t.libName!==undefined?t.libName:null;this.tableName=t.tableName!==undefined?t.tableName:null;if(t.geometry!==undefined||t.extent!==undefined){this.geoFormat=t.geoFormat!==undefined?t.geoFormat:"wkt";if(t.geometry!==undefined){this.geometry=t.geometry!==undefined?t.geometry:null}else if(t.extent!==undefined){let e=t.extent;this.geometry="polygon"+"("+"("+e.xmin+" "+e.ymax+","+e.xmin+" "+e.ymin+","+e.xmax+" "+e.ymin+","+e.xmax+" "+e.ymax+","+e.xmin+" "+e.ymax+")"+")"}}if(t.filter!==undefined){this.filter={};if(t.filter.spatialCondition!==undefined){this.filter.spatialCondition=t.filter.spatialCondition}else if(t.filter.extent!==undefined){let e=t.filter.extent;this.filter.spatialCondition="polygon"+":"+e.ymax+","+e.xmin+";"+e.yamx+","+e.xmax+";"+e.ymin+","+e.xmax+";"+e.ymin+","+e.xmin}if(t.filter.timeCondition!==undefined&&t.filter.timeCondition.field!==undefined&&t.filter.timeCondition.timeRange!==undefined){this.filter.timeCondition={};this.filter.timeCondition.field=t.filter.timeCondition.field;this.filter.timeCondition.timeRange=t.filter.timeCondition.timeRange.join(",")}if(t.filter.otherProperty!==undefined&&t.filter.otherProperty!==""){this.filter.otherProperty=t.filter.otherProperty}if(t.filter.fieldTag!==undefined){this.filter.fieldTag=t.filter.fieldTag}this.filter="["+JSON.stringify(this.filter)+"]"}this.fields=t.fields!==undefined?t.fields:null;if(t.statisticFields!==undefined&&t.statisticFields.length>0){let e=[];for(let r=0;r<t.statisticFields.length;r++){let n={field:t.statisticFields[r].field,statisticTypes:[t.statisticFields[r].statisticTypes]};e.push(n)}this.statisticFields=JSON.stringify(e)}this.sref=t.sref!==undefined?t.sref:null;this.includeProperites=t.includeProperites!==undefined?t.includeProperites:false;this.pageSize=t.pageSize!==undefined?t.pageSize:10;this.pageNo=t.pageNo!==undefined?t.pageNo:1;this.fixOption()}fixOption(){this.option={geoFormat:this.geoFormat,geometry:this.geometry,filter:this.filter,fields:this.fields,statisticFields:this.statisticFields,sref:this.sref,includeProperites:this.includeProperites,pageSize:this.pageSize,pageNo:this.pageNo}}query(t,e){let{serviceUrl:r,option:n,libName:i,tableName:o}=this;r=r+i+"/"+o;let s=this.getFullUrl(r,n);this.get(s,t,e)}}qt.DataStore.ElasticSearch.ESQueryStats=Pg;class Mg extends Sg{constructor(t){let e=t||{};super(e);this.serviceUrl="/datastore/rest/dataset/es/schema/";this.indexName=e.indexName!==undefined?e.indexName:null;this.tableNames=e.tableNames!==undefined?e.tableNames:null}query(t,e){let{serviceUrl:r,params:n,indexName:i}=this;r=r+i;let o=this.getFullUrl(r,n);this.get(o,t,e)}}qt.DataStore.ElasticSearch.EsTableService=Mg;class Lg extends Sg{constructor(t){let e=t||{};super(e);this.options=t;this.serviceUrl="/es/stQueryByAgg";this.indexName=e.indexName!==undefined?e.indexName:null;this.typeName=e.typeName!==undefined?e.typeName:null;this.aggfield=e.aggfield!==undefined?e.aggfield:null;this.spatialCondition=e.spatialCondition!==undefined?e.spatialCondition:null;this.timefield=e.timefield!==undefined?e.timefield:null;this.timeCondition=e.timeCondition!==undefined?e.timeCondition:null;this.aggGeoFormat=e.aggGeoFormat!==undefined?e.aggGeoFormat:null;this.percision=e.percision!==undefined?e.percision:8}query(t,e){let{serviceUrl:r,options:n}=this;let i=this.getFullUrl(r,n);this.get(i,t,e)}}qt.DataStore.ElasticSearch.EsSpaceTimeQueryByAgg=Lg;const Ng={EsCatlogType:_g,EsCatlogName:bg,EsGeoHashType:xg,EsCatlogService:Cg,ESGeoCode:Ig,ESGeoDecode:Eg,ESQueryStats:Pg,EsTableService:Mg,EsSpaceTimeQueryByAgg:Lg};var Tg=Ng;class Og extends Sg{constructor(t){super(t);this.serviceUrl="/datastore/rest/catalog/pg/services/";this.path=t.path;this.classify=t.classify;this.keyWords=t.keyWords;this.fixOption(t)}fixOption(t){this.option={classify:t.classify,keyWords:t.keyWords,pageSize:t.pageSize,pageNo:t.pageNo}}query(t,e){let{serviceUrl:r,path:n,option:i}=this;r+=n;let o=this.getFullUrl(r,i);this.get(o,t,e)}}var Ag=Og;qt.DataStore.PostGIS.PostgisCatlogService=Og;class Rg extends Sg{constructor(t){super(t);this.serviceUrl="/datastore/rest/dataset/pg/executequery/";this.path=t.path;this.queryBody=t.queryBody;this.fixOption(t)}fixOption(t){this.option={queryBody:t.queryBody}}query(t,e){let{serviceUrl:r,path:n,option:i}=this;r+=n;let o=this.getFullUrl(r,i);this.get(o,t,e)}}var Fg=Rg;qt.DataStore.PostGIS.PostgisCustomQueryService=Rg;class Dg extends Sg{constructor(t){super(t);this.serviceUrl="/datastore/rest/dataset/pg/query/";this.path=t.path;this.geometry=t.geometry;this.geoFormat=t.geoFormat;this.sref=t.sref;this.filter=t.filter;this.fields=t.fields;this.segments=t.segments;this.statisticFields=t.statisticFields;this.includeProperites=t.includeProperites;this.includeGeometry=t.includeGeometry;this.fixOption(t)}fixOption(t){this.option={geometry:t.geometry,geoFormat:t.geoFormat,sref:t.sref,filter:t.filter,fields:t.fields,segments:t.segments,statisticFields:t.statisticFields,includeProperites:t.includeProperites,propertyNames:t.propertyNames,includeGeometry:t.includeGeometry,pageSize:t.pageSize,pageNo:t.pageNo}}query(t,e){let{serviceUrl:r,path:n,option:i,geometry:o,geoFormat:s}=this;r+=n;let a=this.getFullUrl(r,i);this.get(a,t,e)}queryByWkt(t){}queryByGeojson(t){}queryByCircle(t){}queryByRect(t){}}var kg=Dg;qt.DataStore.PostGIS.PostgisQueryService=Dg;class jg extends Sg{constructor(t){super(t);this.serviceUrl="/datastore/rest/dataset/pg/schema/";this.path=t.path;this.tableNames=t.tableNames;this.fixOption(t)}fixOption(t){this.option={tableNames:t.tableNames}}query(t,e){let{serviceUrl:r,path:n,option:i}=this;r+=n;let o=this.getFullUrl(r,i);this.get(o,t,e)}}var Gg=jg;qt.DataStore.PostGIS.PostgisTableService=jg;class Bg extends Sg{constructor(t){super(t);this.serviceUrl="/datastore/rest/dataset/pg/vectortile/";this.path=t.path;this.version=t.version;this.tileMatrix=t.tileMatrix;this.tileRow=t.tileRow;this.tileCol=t.tileCol;this.fixOption(t)}fixOption(t){this.option={version:t.version,tileMatrix:t.tileMatrix,tileRow:t.tileRow,tileCol:t.tileCol}}getWmtsUrl(){let{serviceUrl:t,path:e,option:r}=this;t+=e;let n=this.getFullUrl(t,r);n=decodeURI(n);return n}query(t,e){let{serviceUrl:r,path:n,option:i}=this;r+=n;let o=this.getFullUrl(r,i);this.get(o,t,e)}}var Ug=Bg;qt.DataStore.PostGIS.PostgisVectorTileService=Bg;const qg={PostgisCatlogService:Og,PostgisCustomQueryService:Rg,PostgisQueryService:Dg,PostgisTableService:jg,PostgisVectorTileService:Bg};var zg=qg;class Vg extends zc{constructor(t){super(t);const{headers:e}=t;this.fixParams(t);this.headers=e?e:undefined}setHeaders(t){this.headers=t}fixParams(t){this.params=t;delete this.params.url;delete this.params.ip;delete this.params.port;delete this.params.domain;delete this.params.baseUrl;delete this.params.networkProtocol;delete this.params.partUrl}getBaseUrl(){let t="";const{baseUrl:e,ip:r,port:n,domain:i,networkProtocol:o}=this;if(e){t=e}else if(i){t=i}else if(o&&r&&n){t=`${o}://${r}:${n}`}return t}getFullUrl(t,e){let r=this.getBaseUrl();let n=r+t+"?"+vg.a.stringify(e);return n}get(t,e,r){let n=this;let i=new Ac(t,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});i.processAsync({method:"GET",headers:this.headers||{"Content-Type":"text/plain;charset=UTF-8"}})}post(t,e,r,n){let i=this;let o=new Ac(t,{eventListeners:{scope:i,processCompleted:r,processFailed:n}});o.processAsync({method:"POST",data:JSON.stringify(e),headers:this.headers||{"Content-Type":"text/plain;charset=UTF-8"}})}}var Wg=Vg;const Hg="login";class Xg extends Vg{constructor(t){super(t);this.serviceUrl="/clouddisk/rest/users/"}login(t,e,r){let{serviceUrl:n}=this;let i=this.getBaseUrl();let o=`${i}${n}${Hg}`;this.post(o,t,e,r)}}var Zg=Xg;qt.CloudDisk.UserService=Xg;const Yg="schema";const Jg="featureclass/metadata";const Qg="raster/metadata";const Kg="featureclass/statistics";class $g extends Vg{constructor(t){super(t);this.serviceUrl="/giscore/dataconvert/rest/geodataset/"}schema(t,e,r){let{serviceUrl:n}=this;n+=Yg;let i=this.getFullUrl(n,t);this.get(i,e,r)}featuremetadata(t,e,r){let{serviceUrl:n}=this;n+=Jg;let i=this.getFullUrl(n,t);this.get(i,e,r)}rastermetadata(t,e,r){let{serviceUrl:n}=this;n+=Qg;let i=this.getFullUrl(n,t);this.get(i,e,r)}statistics(t,e,r){let{serviceUrl:n}=this;n+=Kg;let i=this.getFullUrl(n,t);this.get(i,e,r)}query(t,e,r){let{serviceUrl:n}=this;n+=Kg;let i=this.getFullUrl(n,t);this.get(i,e,r)}}var tm=$g;qt.CloudDisk.GisCore.GeoDatasetService=$g;const em="";const rm="/catalog";const nm="/catalog/{type}?";const im="/execute/{type}/{modelID}?";const om="/node";const sm="/node/{id}?";const am="/node/root";const um="/nodes";const lm="/nodes/{nodeId}?";class cm extends Vg{constructor(t){super(t);this.serviceUrl="/clouddisk/rest/CalculateModel"}add(t,e,r){let{serviceUrl:n}=this;let i=this.getBaseUrl();let o=`${i}${n}${em}?nodeId=${t.nodeId}`;delete t.nodeId;this.post(o,t,e,r)}catalog(t,e,r){let{serviceUrl:n}=this;n+=rm;let i=this.getFullUrl(n,t);this.get(i,e,r)}catalogtype(t,e,r){const{type:n}=t;let{serviceUrl:i}=this;let o=this.getBaseUrl();let s=`${o}${i}${nm}`;s=s.replace("{type}",n);delete t.type;s=s+vg.a.stringify(t);this.get(s,e,r)}execute(t,e,r){const{serviceUrl:n}=this;const{type:i,modelID:o}=t;let s=this.getBaseUrl();let a=`${s}${n}${im}`;a=a.replace("{type}",i);a=a.replace("{modelID}",o);this.post(a,undefined,e,r)}node(t,e,r){const{serviceUrl:n}=this;let i=this.getBaseUrl();let o=`${i}${n}${om}`;this.post(o,t,e,r)}nodeid(t,e,r){const{id:n}=t;let{serviceUrl:i}=this;let o=`${baseurl}${i}${sm}`;o=o.replace("{id}",n);this.get(o,e,r)}noderoot(t,e,r){t={};let{serviceUrl:n}=this;n+=am;let i=this.getFullUrl(n,t);this.get(i,e,r)}nodes(t,e,r){t={};let{serviceUrl:n}=this;n+=um;let i=this.getFullUrl(n,t);this.get(i,e,r)}nodesid(t,e,r){const{nodeId:n}=t;let{serviceUrl:i}=this;let o=`${baseurl}${i}${lm}`;o=o.replace("{nodeId}",n);delete t.nodeId;o=o+vg.a.stringify(t);this.get(o,e,r)}}var hm=cm;qt.CloudDisk.Model.CalculateModelService=cm;const fm={UserService:Xg,GeoDatasetService:$g,CalculateModelService:cm};var pm=fm;var dm={displayFieldName:null,geometryType:null,hasM:false,hasZ:false,queryGeometry:null,spatialReference:null,transform:null};class ym{getPromise(t){let e=this;return new Promise(function(r,n){e.get(t,function(e){e=JSON.parse(e);if(t.indexOf("FeatureServer")>-1&&t.indexOf("query")>-1){e=zt(e,dm)}r(e)},function(t){n(JSON.parse(t))})})}getPromiseP(t,e){let r=this;return new Promise(function(n,i){r.post(t,e,function(t){n(JSON.parse(t))},function(t){i(JSON.parse(t))})})}get(t,e,r,n){n=n!==false;var i=new XMLHttpRequest;i.open("GET",t,n);i.onreadystatechange=function(){if(i.readyState==4&&i.status==200||i.status==304){e.call(this,i.responseText)}else if(i.readyState===4&&i.status!==200&&i.status!==304){r.call(this,i.responseText)}};i.send()}post(t,e,r,n){var i=new XMLHttpRequest;i.open("POST",t,true);i.setRequestHeader("Content-Type","application/x-www-form-urlencoded");i.onreadystatechange=function(){if(i.readyState===4&&(i.status===200||i.status===304)){r.call(this,i.responseText)}else if(i.readyState===4&&i.status!==200&&i.status!==304){n.call(this,i.responseText)}};i.send(e)}}qt.Service.ArcGisServiceBase=ym;class vm{clone(){return ye(this)}static fromJSON(t){let e=new this;if(t instanceof Object){for(let r in t){if(e.hasOwnProperty(r)){e[r]=t[r]}}}return e}toJSON(){let t=this;let e={};for(let r in t){if(typeof t[r]!=="function"&&r!=="CLASS_NAME"){if(t[r])e[r]=t[r]}}e["spatialRel"]="esriSpatialRelIntersects";return e}}qt.Service.ArcGisBaseParam=vm;class gm extends vm{constructor(t){super();this.aggregateIds=null;this.cacheHint=null;this.datumTransformation=null;this.distance=null;this.gdbVersion=null;this.geometry=null;this.geometryPrecision=null;this.groupByFieldsForStatistics=null;this.having=null;this.historicMoment=null;this.maxAllowableOffset=null;this.maxRecordCountFactor=1;this.multipatchOption=null;this.num=null;this.objectIds=null;this.orderByFields=null;this.outFields=null;this.outSpatialReference=null;this.outStatistics=null;this.parameterValues=null;this.pixelSize=null;this.quantizationParameters=null;this.rangeValues=null;this.relationParameter=null;this.returnCentroid=false;this.returnDistinctValues=false;this.returnExceededLimitFeatures=true;this.returnGeometry=false;this.returnM=null;this.returnQueryGeometry=true;this.returnZ=null;this.spatialRelationship="intersects";this.sqlFormat=null;this.start=null;this.text=null;this.timeExtent=null;this.units=null;this.where=null;zt(this,t)}}qt.Service.ArcGisQuery=gm;class mm{constructor(t){this.id=null;this.uid=null;this.indexes={items:[]};this.load=null;this.attributionVisible=true;this.listMode="show";this.hasAttributionData=false;this.createQueryVersion=1;this.blendMode="normal";this.capabilities=null;this.copyright=null;this.loadError=null;this.loadStatus="not-loaded";this.loaded=false;this.loadWarnings=[];this.customParameters=null;this.definitionExpression=null;this.displayField=null;this.dynamicDataSource=null;this.editFieldsInfo=null;this.editingEnabled=true;this.editingInfo=null;this.effect=null;this.elevationInfo=null;this.featureReduction=null;this.fields=null;this.fieldsIndex={dateFields:[],fields:[],uid:""};this.formTemplate=null;this.gdbVersion=null;this.geometryType=null;this.hasM=null;this.hasZ=null;this.historicMoment=null;this.isTable=false;this.labelingInfo=null;this.labelsVisible=true;this.layerId=null;this.legendEnabled=true;this.maxScale=0;this.minScale=0;this.opacity=1;this.operationalLayerType="ArcGisFeatureLayer";this.objectIdField=null;this.outFields=null;this.parent=null;this.path=null;this.parsedUrl=null;this.popupEnabled=true;this.popupTemplate=null;this.portalItem=null;this.refreshInterval=0;this.relationships=null;this.renderer=null;this.returnM=null;this.returnZ=null;this.resourceReferences={paths:[],portalItem:null};this.screenSizePerspectiveEnabled=true;this.serviceDefinitionExpression=null;this.source=null;this.scaleRangeId="0,0";this.sourceJSON=null;this.spatialReference={imageCoordinateSystem:null,isGeographic:true,isWGS84:true,isWebMercator:false,isWrappable:true,latestVcsWkid:null,latestWkid:null,vcsWkid:null,wkid:4326,wkt:"GEOGCS['GCS_WGS_1984',DATUM['D_WGS_1984',SPHEROID['WGS_1984',6378137.0,298.257223563]],PRIMEM['Greenwich',0.0],UNIT['Degree',0.0174532925199433]]"};this.templates=null;this.sublayerTitleMode="item-title";this.timeExtent=null;this.timeInfo=null;this.timeOffset=null;this.title="";this.trackIdField=null;this.type="feature";this.typeIdField=null;this.types=null;this.url=null;this.useViewTime=true;this.version=null;this.userIsAdmin=false;this.visible=true;zt(this,t);this._queryService=this.url&&this.url.indexOf("FeatureServer")+"FeatureServer".length===this.url.length?"queryByMap":"queryByLayer";this._applyEditsService=this.url&&this.url.indexOf("FeatureServer")+"FeatureServer".length===this.url.length?"applyEditsByMap":"applyEditsByLayer";let e=new ym;this.queryByMap=function(t){let r=this.url+"/query?f=json";r=Te(t,r,["geometry","layerDefs"],null);return e.getPromise(r)};this.queryByLayer=function(t){let r=this.url+"/query?f=json";r=Te(t,r,["geometry"],null);return e.getPromise(r)};this.applyEditsByLayer=function(t,r){let n=this.url+"/applyEdits",i="";r=r?r:{gdbVersion:[],rollbackOnFailure:true,f:"json"};let o=["addFeatures","updateFeatures","deleteFeatures"];if(t.deleteFeatures){let e=[];for(let r=0;r<t.deleteFeatures.length;r++){e.push(t.deleteFeatures[r].objectId)}t.deleteFeatures=e.join(",")}i=Oe(i,t,o);i=Oe(i,r);i=i.substring(0,i.length-1);return e.getPromiseP(n,i)};this.applyEditsByMap=function(t,r){r=r?r:{gdbVersion:[],rollbackOnFailure:true,f:"json"};let n=this.url+"/applyEdits",i="";i+="edits="+encodeURIComponent(JSON.stringify(t))+"&";i=Oe(i,r);i=i.substring(0,i.length-1);return e.getPromiseP(n,i)}}}mm.prototype.createQuery=function(){return new gm};mm.prototype.queryFeatures=function(t){return this[this._queryService](t)};mm.prototype.applyEdits=function(t,e){return this[this._applyEditsService](t,e)};mm.prototype.queryFeatureCount=function(t){t.returnCountOnly=true;return this[this._queryService](t)};mm.prototype.queryObjectIds=function(t){t.returnIdsOnly=true;return this[this._queryService](t)};mm.prototype.queryExtent=function(t){t.returnExtentOnly=true;return this[this._queryService](t)};qt.Service.ArcGisFeatureLayer=mm;class _m extends vm{constructor(t){super();this.contains=true;this.dynamicLayerInfos=null;this.gdbVersion=null;this.geometryPrecision=null;this.layerDefinitions=null;this.layerIds=null;this.maxAllowableOffset=null;this.outSpatialReference=null;this.returnGeometry=true;this.searchFields=null;this.searchText=null;zt(this,t)}}qt.Service.ArcGisFindParameters=_m;class bm{constructor(t){this.options={gdbVersion:null,url:null};t.url=t.url+"/find?f=json";zt(this.options,t)}}bm.prototype.execute=function(t){let e=this.options.url,r={layerIds:"layers",outSpatialReference:"sr"},n=new ym;e=Te(t,e,null,r);return n.getPromise(e)};qt.Service.ArcGisFindTask=bm;class xm extends vm{constructor(t){super();this.imageCoordinateSystem=null;this.isGeographic=false;this.isWebMercator=false;this.isWGS84=false;this.isWrappable=false;this.WebMercator=null;this.WGS84=null;this.latestVcsWkid=null;this.latestWkid=null;this.vcsWkid=null;this.wkid=undefined;this.wkt=null;zt(this,t);if(this.wkid===3857){this.isWebMercator=true;this.isWrappable=true}else if(this.wkid===4326){this.sGeographic=true;this.isWGS84=true;this.isWrappable=true}}}xm.prototype.equals=function(t){return t.wkid===this.wkid||t.wkt===this.wkt};qt.Service.ArcGisSpatialReference=xm;class Sm extends vm{constructor(t){super();this.cache={};this.extent=null;this.hasM=false;this.hasZ=false;this.spatialReference=new xm({wkid:4326,wkt:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'});this.type=null;zt(this,t);if(t&&t.hasOwnProperty("spatialReference")){t.spatialReference=new xm(t.spatialReference)}}}qt.Service.ArcGisGeometry=Sm;class wm extends Sm{constructor(t){super();this.hasM=false;this.hasZ=false;this.latitude=0;this.longitude=0;this.m=undefined;this.x=0;this.y=0;this.z=undefined;this.type="point";let e=this.spatialReference.wkid;zt(this,t);if(t){if(!t.hasOwnProperty("spatialReference")||t.hasOwnProperty("spatialReference")&&t.spatialReference.hasOwnProperty("wkid")&&t.spatialReference.wkid===4326){let e=this;["longitude","latitude","x","y"].forEach(function(r){if(!t.hasOwnProperty(r))e[r]=undefined});if(t.hasOwnProperty("x"))this.longitude=this.x;if(t.hasOwnProperty("y"))this.latitude=this.y;if(!t.hasOwnProperty("x")&&t.hasOwnProperty("longitude"))this.x=this.longitude;if(!t.hasOwnProperty("y")&&t.hasOwnProperty("latitude"))this.y=this.latitude}else if(t.hasOwnProperty("spatialReference")&&t.spatialReference.hasOwnProperty("wkid")&&t.spatialReference.wkid===3857){if(t.hasOwnProperty("longitude")&&t.hasOwnProperty("latitude")){Cm(e,"3857",[this.longitude,this.latitude],"x","y",this,t)}else if(t.hasOwnProperty("x")&&t.hasOwnProperty("y")){Cm("3857",e,[this.x,this.y],"longitude","latitude",this,t)}else{if(!t.hasOwnProperty("x")){if(t.hasOwnProperty("longitude"))this.x=this.longitude;if(!t.hasOwnProperty("longitude"))this.x=this.longitude=undefined}if(!t.hasOwnProperty("y")){if(t.hasOwnProperty("latitude"))this.y=this.latitude;if(!t.hasOwnProperty("latitude"))this.y=this.latitude=undefined}Cm("3857",e,[this.x,this.y],"longitude","latitude",this,t)}}}else{this.x=this.y=this.latitude=this.longitude=undefined}this.hasM=!!this.m;this.hasZ=!!this.z}}wm.prototype.toArray=function(){let t=[];t.push(this.x);t.push(this.y);if(this.z)t.push(this.z);return t};wm.prototype.copy=function(t){zt(this,t)};wm.prototype.distance=function(t){let e=Math.abs(this.x-t.x),r=Math.abs(this.y-t.y),n=0;if(this.hasZ&&t.hasZ)n=Math.abs(this.z-t.z);return Math.sqrt(Math.pow(e,2)+Math.pow(r,2)+Math.pow(n,2))};wm.prototype.equals=function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z&&this.m===t.m&&this.spatialRefere.equals(t.spatialRefere)};wm.prototype.toGeometryJSON=function(){return'{"x":'+this.x+',"y":'+this.y+"}"};function Cm(t,e,r,n,i,o,s){let a=bc("EPSG:"+t,"EPSG:"+e,[r[0],r[1]]);o[n]=isNaN(a[0])?undefined:a[0];o[i]=isNaN(a[1])?undefined:a[1];o.spatialReference=new xm(s.spatialReference)}qt.Service.ArcGisPoint=wm;class Im extends Sm{constructor(t){super(t);this.center=undefined;this.hasM=false;this.hasZ=false;this.height=0;this.mmax=undefined;this.mmin=undefined;this.type="extent";this.width=0;this.xmax=0;this.xmin=0;this.ymax=0;this.ymin=0;this.zmax=undefined;this.zmin=undefined;this.extent=this;this.private=["center","hasM","hasZ","height","width","type","extent"];for(let e in this.private){if(Fe(t[this.private[e]])){throw new Error("[accessor] cannot assign to read-only property '"+this.private[e]+"' of ArcGisExtent")}}zt(this,t);if(this.zmax||this.zmin){this.hasZ=true}if(this.mmax||this.mmin){this.hasM=true}this._extentPolygon=rf["polygon"]([[[this.xmin,this.ymin],[this.xmin,this.ymax],[this.xmax,this.ymax],[this.ymax,this.ymin],[this.xmin,this.ymin]]],{name:"_extentPlygon"});this.center=Em(this);this.width=this.xmax-this.xmin;this.height=this.ymax-this.ymin}}function Em(t){let e=[Oh([t.xmin,t.ymin]),Oh([t.xmin,t.ymax]),Oh([t.xmax,t.ymax]),Oh([t.ymax,t.ymin]),Oh([t.xmin,t.ymin])];let r=jh(e);let n=rf["center"](r).geometry.coordinates;return new wm({longitude:n[0],latitude:n[1]})}Im.prototype.equals=function(t){return this.mmax===t.mmax&&this.mmin===t.mmin&&this.xmax===t.xmax&&this.xmin===t.xmin&&this.ymax===t.ymax&&this.ymin===t.ymin&&this.zmax===t.zmax&&this.zmin===t.zmin};Im.prototype.contains=function(t){if(t.type==="point"){let e=t.toArray();e=rf["point"]([e[0],e[1]]);return rf["booleanContains"](this._extentPolygon,e)}if(t.type==="extent"){return rf["booleanContains"](this._extentPolygon,t._extentPolygon)}return false};Im.prototype.expand=function(t){if(t instanceof Number){t=Math.abs(t);this.width=this.width*t;this.height=this.height*t;this.xmin=this.center.x-this.width/2;this.xmax=this.center.x+this.width/2;this.ymin=this.center.y-this.height/2;this.ymax=this.center.y+this.height/2;return this}else{throw new Error("require is not defined")}};Im.prototype.intersects=function(t){if(!t.type){return false}let e;if(t.type==="polyline"){e=Gh(t.paths)}else if(t.type==="point"){e=Oh(t.toArray())}else if(t.type==="multipoint"){e=Bh(t.points)}else if(t.type==="extent"){e=t._extentPolygon}else if(t.type==="polygon"){e=Rh(t.rings)}return!rf["booleanDisjoint"](e,this._extentPolygon)};Im.prototype.offset=function(t,e,r){this.xmax+=t;this.xmin+=t;this.ymax+=e;this.ymin+=e;if(this.hasZ){this.zmax+=r;this.zmin+=r}else{this.hasZ=true;this.zmax=0;this.zmin=0}return this};Im.prototype.centerAt=function(t){if(t instanceof wm){this.center=new wm({longitude:t.x,latitude:t.y});this.xmin=this.center.x-this.width/2;this.xmax=this.center.x+this.width/2;this.ymin=this.center.y-this.height/2;this.ymax=this.center.y+this.height/2;return this}};Im.prototype.normalize=function(){return[this]};Im.prototype.union=function(t){let e=this.center;let r=t.center;if(r.x-e.x>0&&r.y-e.y>0||r.x-e.x===0&&r.y-e.y>0||r.x-e.x===0&&r.y-e.y===0||r.x-e.x>0&&r.y-e.y===0){this.xmax=t.xmax;this.ymax=t.ymax}else if(r.x-e.x>0&&r.y-e.y<0||r.x-e.x===0&&r.y-e.y<0){this.xmax=t.xmax;this.ymin=t.ymin}else if(r.x-e.x<0&&r.y-e.y<0){this.xmin=t.xmin;this.ymin=t.ymin}else if(r.x-e.x<0&&(r.y-e.y||r.x-e.x<0&&r.y-e.y<0)===0){this.xmin=t.xmin;this.ymax=t.ymax}this.center=Em(this);this.width=this.xmax-this.xmin;this.height=this.ymax-this.ymin;return this};Im.prototype.toString=function(){return this.xmin+","+this.ymin+","+this.xmax+","+this.ymax};qt.Service.ArcGisExtent=Im;class Pm{constructor(t){this.options={gdbVersion:null,url:null};let e=t.url.split("?")[0]+"?f=pjson";t.url=t.url+"/identify?f=json";let r=new ym,n=this;r.get(e,function(e){e=JSON.parse(e);n.mapInfo=e;zt(n.options,t)},function(t){console.log(t)},false)}}Pm.prototype.execute=function(t){let e=this.options.url,r={outSpatialReference:"sr"},n=new ym;let i={};let o=t["geometry"].type;let s=o.substr(0,1).toUpperCase();let a=o.substr(1,o.length);t["geometryType"]="esriGeometry"+s+a;t["geometry"]=encodeURIComponent(t["geometry"].toGeometryJSON());if(!i["layers"]){i["layers"]=t["layerIds"]?t["layerOption"]+":"+String(t["layerIds"]):"layers="+t["layerOption"];delete t["layerOption"];delete t["layerIds"]}if(!i["imageDisplay"]){i["imageDisplay"]=t["width"]+","+t["height"]+","+t["dpi"];delete t["width"];delete t["height"];delete t["dpi"]}if(!t.hasOwnProperty("mapExtent")||!t.mapExtent){t.mapExtent=new Im({xmin:this.mapInfo.initialExtent.xmin,ymin:this.mapInfo.initialExtent.ymin,xmax:this.mapInfo.initialExtent.xmax,ymax:this.mapInfo.initialExtent.ymax})}zt(i,t);e=Te(i,e,null,r);return n.getPromise(e)};qt.Service.ArcGisIdentifyTask=Pm;class Mm extends vm{constructor(t){super();this.dpi=96;this.dynamicLayerInfos=null;this.gdbVersion=null;this.geometry=null;this.geometryPrecision=null;this.height=400;this.layerDefinitions=null;this.layerIds=null;this.layerOption="top";this.layerTimeOptions=null;this.mapExtent=null;this.maxAllowableOffset=null;this.returnFieldName=!1;this.returnGeometry=!1;this.returnM=!1;this.returnUnformattedValues=!1;this.returnZ=!1;this.spatialReference=null;this.timeExtent=null;this.tolerance=0;this.width=400;zt(this,t);if(this.mapExtent){this.mapExtent=this.mapExtent.toString()}}}qt.Service.ArcGisIdentifyParameters=Mm;class Lm{constructor(t){this.url=null;this.gdbVersion=null;zt(this,t)}}Lm.prototype.execute=function(){};Lm.prototype.queryByLayer=function(t,e){e.outFields=e.outFields||"*";let r=this.url+"/"+t+"/query?f=json";let n=new ym;r=Te(e,r,["geometry"],null);return n.getPromise(r)};Lm.prototype.executeAttachmentQuery=function(){};Lm.prototype.executeForCount=function(){};Lm.prototype.executeForExtent=function(){};Lm.prototype.executeForIds=function(){};Lm.prototype.executeRelationshipQuery=function(){};qt.Service.ArcGisQueryTask=Lm;class Nm extends Sm{constructor(t){super(t);this.centroid=null;this.isSelfIntersecting=false;this.rings=[];this.type="polygon";zt(this,t);if(this.rings[0]&&this.rings[0][0]){if(this.rings[0][0].length>=3){this.hasZ=true}}}}Nm.prototype.getPoint=function(t,e){if(t>=this.rings.length||e>=this.rings[t].length)return null;return Ae(wm,this,this.rings[t][e])};Nm.prototype.insertPoint=function(t,e,r){if(t<this.rings.length&&e<=this.rings[t].length){if(r instanceof Array){this.rings[t].splice(e,0,r)}else if(r instanceof wm){this.rings[t].splice(e,0,r.hasZ?[r.x,r.y,r.z]:[r.x,r.y])}}return this};Nm.prototype.removePoint=function(t,e){if(t>=this.rings.length||e>=this.rings[t].length)return null;let r=this.rings[t].splice(e,1)[0];return Ae(wm,this,r)};Nm.prototype.setPoint=function(t,e,r){if(t>=this.rings.length||e>=this.rings[t].length)return null;if(r instanceof Array){this.rings[t][e]=r}else if(r instanceof wm){let n=[r.x,r.y];if(r.hasZ){n.push(r.z)}if(r.hasM){n.push(r.m)}this.rings[t][e]=n}return this};Nm.prototype.addRing=function(t){if(t instanceof Array){this.rings.push(Re(t))}else{this.rings.push([])}return this};Nm.prototype.removeRing=function(t){if(t>=this.rings.length)return null;let e=this.rings.splice(t,1)[0],r,n=[];for(let t=0;t<e.length;t++){r=Ae(wm,this,e[t]);n.push(r)}return n};Nm.prototype.isClockwise=function(t){let e=0,r=1,n=false,i,o;n=!!t[0][2];while(r<t.length){i=o||t[0];o=t[r];e+=n?(o[0]-i[0])*(o[1]+i[1])*(o[2]+i[2]):(o[0]-i[0])*(o[1]+i[1]);r++}return e>0};Nm.prototype.contains=function(t){if(t instanceof wm){let e=Rh(this.rings,{name:"_extentPlygon"});let r=Oh(t.toArray());return rf["booleanContains"](e,r)}else{return false}};Nm.prototype.toGeometryJSON=function(){let t=this.rings;let e='{"rings":[';for(let r=0;r<t.length;r++){e+="[";for(let n=0;n<t[r].length;n++){e+="[";e+=t[r][n].join(",");e+="],"}e=e.substr(0,e.length-1);e+="],"}e=e.substr(0,e.length-1);e+="]}";return e};Nm.prototype.fromExtent=function(t){return new Nm({rings:t._extentPolygon.geometry.coordinates})};qt.Service.ArcGisPolygon=Nm;class Tm extends Sm{constructor(t){super(t);this.points=[];this.type="multipoint";zt(this,t)}}Tm.prototype.addPoint=function(t){if(t instanceof Array){this.points.push(t)}else if(t instanceof wm){this.points.push([t.x,t.y])}};Tm.prototype.getPoint=function(t){return Ae(wm,this,this.points[t])};Tm.prototype.removePoint=function(t){let e=this.points.splice(t,1);return Ae(wm,this,e)};Tm.prototype.setPoint=function(t,e){if(t>=this.points.length)return null;if(e instanceof Array){this.points[t]=[e[0],e[1]]}else if(e instanceof wm){this.points[t]=[e.x,e.y]}return this};Tm.prototype.toGeometryJSON=function(){return'{"points":[['+this.points.join("],[")+"]]}"};qt.Service.ArcGisMultipoint=Tm;class Om extends Sm{constructor(t){super(t);this.paths=[];this.type="polyline";zt(this,t)}}Om.prototype.getPoint=function(t,e){if(t>=this.paths.length||e>=this.paths[t].length)return null;return Ae(wm,this,this.paths[t][e])};Om.prototype.removePoint=function(t,e){if(t>=this.paths.length||e>=this.paths[t].length)return null;let r=this.paths[t].splice(e,1)[0];return Ae(wm,this,r)};Om.prototype.setPoint=function(t,e,r){if(t>=this.paths.length||e>=this.paths[t].length)return null;if(r instanceof Array){this.paths[t][e]=r}else if(r instanceof wm){let n=[r.x,r.y];if(r.hasZ){n.push(r.z)}if(r.hasM){n.push(r.m)}this.paths[t][e]=n}return this};Om.prototype.addPath=function(t){if(t instanceof Array){this.paths.push(Re(t))}else{this.paths.push([])}return this};Om.prototype.removePath=function(t){if(t>=this.path.length)return null;let e=this.paths.splice(t,1)[0],r,n=[];for(let t=0;t<e.length;t++){r=Ae(wm,this,e[t]);n.push(r)}return n};Om.prototype.insertPoint=function(t,e,r){if(t<this.paths.length&&e<=this.paths[t].length){if(r instanceof Array){this.paths[t].splice(e,0,r)}else if(r instanceof wm){this.paths[t].splice(e,0,r.hasZ?[r.x,r.y,r.z]:[r.x,r.y])}}return this};Om.prototype.toGeometryJSON=function(){let t=this.paths;let e='{"paths":[';for(let r=0;r<t.length;r++){e+="[";for(let n=0;n<t[r].length;n++){e+="[";e+=t[r][n].join(",");e+="],"}e=e.substr(0,e.length-1);e+="],"}e=e.substr(0,e.length-1);e+="]}";return e};qt.Service.ArcGisPolyline=Om;class Am extends vm{constructor(t){super();this.attributes=null;this.geometry=null;this.isAggregate=false;this.layer=null;this.popupTemplate=null;this.symbol=null;this.visible=true;zt(this,t)}}Am.prototype.getAttribute=function(t){return this.attributes[t]};Am.prototype.getEffectivePopupTemplate=function(t){};Am.prototype.getObjectId=function(){return this.attributes["objectId"]};Am.prototype.setAttribute=function(t,e){return this.attributes[t]=e};qt.Service.ArcGisGraphic=Am;class Rm extends Sm{constructor(t){super(t);this.center=[0,0];this.radius=1e3;this.radiusUnit="meters";this.numberOfPoints=60;this.geodesic=false;this.type="circle";zt(this,t);let e={steps:this.numberOfPoints,units:this.radiusUnit};let r=rf["circle"](this.center,this.radius,e);this.rings=r.geometry.coordinates}}qt.Service.ArcGisCircle=Rm;const Fm={ArcGisFeatureLayer:mm,ArcGisFindParameters:_m,ArcGisFindTask:bm,ArcGisIdentifyTask:Pm,ArcGisIdentifyParameters:Mm,ArcGisGeometry:Sm,ArcGisQuery:gm,ArcGisQueryTask:Lm,ArcGisPoint:wm,ArcGisMultipoint:Tm,ArcGisPolyline:Om,ArcGisPolygon:Nm,ArcGisCircle:Rm,ArcGisGraphic:Am,ArcGisExtent:Im};var Dm=Fm;r.d(e,"OGC",function(){return km});r.d(e,"Util",function(){return n});r.d(e,"Symbol",function(){return i});r.d(e,"Style",function(){return s});r.d(e,"Renderer",function(){return a});r.d(e,"geoJSON",function(){return u});r.d(e,"Crs",function(){return l});r.d(e,"Common",function(){return o});r.d(e,"BaseServer",function(){return Fc});r.d(e,"Extend",function(){return c});r.d(e,"G3D",function(){return h});r.d(e,"MRCS",function(){return f});r.d(e,"MRFS",function(){return p});r.d(e,"MRFWS",function(){return d});r.d(e,"MRGS",function(){return y});r.d(e,"MRMS",function(){return v});r.d(e,"Info",function(){return g});r.d(e,"ElasticSearch",function(){return Tg});r.d(e,"PostGIS",function(){return zg});r.d(e,"CloudDisk",function(){return pm});r.d(e,"ArcGis",function(){return Dm});const km={WMSCapabilities:Md,WMTSCapabilities:Gv,OGCWMTSInfo:hg,OGCWMSInfo:fg,WMS:gg,WFS:mg};const jm={Symbol:i,Style:s,Renderer:a,geoJSON:u,Util:n,Crs:l,Common:o,BaseServer:Fc,Extend:c,G3D:h,MRCS:f,MRFS:p,MRFWS:d,MRGS:y,MRMS:v,Info:g,OGC:km,ElasticSearch:Tg,PostGIS:zg,CloudDisk:pm,ArcGis:Dm};var Gm=e["default"]=jm},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.notNULL=e.formatPoints=e.returnPoint=e.formatEdits=e.formatQuery=e.createCanvasContext2D=e.mixin=e.merge=e.DeepMerge=e.ChineseToUtf8=e.getTopAnalysisResult=e.bindAsEventListener=e.bind=e.newGuid=e.cloneObject=e.copyAttributesWithClip=e.copyAttributes=e.transformResult=e.toJSON=e.isInTheSameDomain=e.supportCanvas=e.isSupportCanvas=e.getBrowser=e.Browser=e.IS_GECKO=e.getParameters=e.urlAppend=e.getWFParameterString=e.getParameterString=e.applyDefaults=e.modifyDOMElement=e.indexOf=e.removeItem=e.isElement=e.getElement=e.reset=e.copyExcluce=e.copy=e.extendDeep=e.isArray=e.extend=undefined;var n=r(16);var i=b(n);var o=r(126);var s=b(o);var a=r(88);var u=b(a);var l=r(132);var c=b(l);var h=r(353);var f=b(h);var p=r(359);var d=b(p);var y=r(1);var v=b(y);var g=r(63);var m=b(g);var _=r(0);function b(t){return t&&t.__esModule?t:{default:t}}var x=function t(e,r){e=e||{};if(r){for(var n in r){var i=r[n];if(i!==undefined){e[n]=i}}var o=typeof window.Event==="function"&&r instanceof window.Event;if(!o&&r.hasOwnProperty&&r.hasOwnProperty("toString")){e.toString=r.toString}}return e};var S=function t(e){return Object.prototype.toString.call(e)==="[object Array]"};var w=function t(e,r){var n,i=Object.prototype.toString,o="[object Array]";e=e||{};for(n in r){if(r.hasOwnProperty(n)){if((0,m.default)(r[n])==="object"){if(i.call(e[n])==="[object Null]"||i.call(e[n])==="[object Undefined]"){e[n]=i.call(r[n])===o?[]:{}}t(e[n],r[n])}else{e[n]=r[n]}if(r[n]===""||r[n]===null){e[n]=r[n]}}}return e};var C=function t(e,r){e=e||{};var n;if(r){for(var i in e){n=r[i];if(typeof n!=="undefined"){e[i]=n}}}};var I=function t(e,r,n){e=e||{};var i;if(r){for(var o in r){i=r[o];if(typeof i!=="undefined"&&typeof i!=="function"){if(n.indexOf(o)<0){e[o]=i}}}}};var E=function t(e){e=e||{};for(var r in e){if(e.hasOwnProperty(r)){if((0,m.default)(e[r])==="object"&&e[r]instanceof Array){for(var n in e[r]){if(e[r][n].destroy){e[r][n].destroy()}}e[r].length=0}else if((0,m.default)(e[r])==="object"&&e[r]instanceof Object){if(e[r].destroy){e[r].destroy()}}e[r]=null}}};var P=function t(){var e=[];for(var r=0,n=arguments.length;r<n;r++){var i=arguments[r];if(typeof i==="string"){i=document.getElementById(i)}if(arguments.length===1){return i}e.push(i)}return e};var M=function t(e){return!!(e&&e.nodeType===1)};var L=function t(e,r){for(var n=e.length-1;n>=0;n--){if(e[n]===r){e.splice(n,1)}}return e};var N=function t(e,r){if(e==null){return-1}else{if(typeof e.indexOf==="function"){return e.indexOf(r)}else{for(var n=0,i=e.length;n<i;n++){if(e[n]===r){return n}}return-1}}};var T=function t(e,r,n,i,o,s,a,u){if(r){e.id=r}if(n){e.style.left=n.x+"px";e.style.top=n.y+"px"}if(i){e.style.width=i.w+"px";e.style.height=i.h+"px"}if(o){e.style.position=o}if(s){e.style.border=s}if(a){e.style.overflow=a}if(parseFloat(u)>=0&&parseFloat(u)<1){e.style.filter="alpha(opacity="+u*100+")";e.style.opacity=u}else if(parseFloat(u)===1){e.style.filter="";e.style.opacity=""}};var O=function t(e,r){e=e||{};var n=typeof window.Event==="function"&&r instanceof window.Event;for(var i in r){if(e[i]===undefined||!n&&r.hasOwnProperty&&r.hasOwnProperty(i)&&!e.hasOwnProperty(i)){e[i]=r[i]}}if(!n&&r&&r.hasOwnProperty&&r.hasOwnProperty("toString")&&!e.hasOwnProperty("toString")){e.toString=r.toString}return e};var A=function t(e){var r=[];for(var n in e){var i=e[n];if(i!=null&&typeof i!=="function"){var o;if((typeof i==="undefined"?"undefined":(0,m.default)(i))==="object"&&i.constructor===Array){var s=[];var a;for(var u=0,l=i.length;u<l;u++){a=i[u];s.push(encodeURIComponent(a===null||a===undefined?"":a))}o=s.join(",")}else{o=encodeURIComponent(i)}r.push(encodeURIComponent(n)+"="+o)}}return r.join("&")};var R=function t(e){var r=[];for(var n in e){var i=e[n];if(i!=null&&typeof i!=="function"){var o;if((typeof i==="undefined"?"undefined":(0,m.default)(i))==="object"&&i.constructor===Array){var s=[];var a;for(var u=0,l=i.length;u<l;u++){a=i[u];s.push(encodeURIComponent(a===null||a===undefined?"":a))}o=s.join(",")}else{o=encodeURIComponent(i)}r.push(encodeURIComponent(n)+":"+o)}}return r.join(";")};var F=function t(e,r){var n=e;if(r){var i=(e+" ").split(/[?&]/);n+=i.pop()===" "?r:i.length?"&"+r:"?"+r}return n};var D=function t(e){e=e===null||e===undefined?window.location.href:e;var r="";if(e.indexOf("?")>-1){var n=e.indexOf("?")+1;e.indexOf("#")>-1;var i=e.indexOf("#")>-1?e.indexOf("#"):e.length;r=e.substring(n,i)}var o={};var s=r.split(/[&;]/);for(var a=0,u=s.length;a<u;++a){var l=s[a].split("=");if(l[0]){var c=l[0];try{c=decodeURIComponent(c)}catch(t){c=unescape(c)}var h=(l[1]||"").replace(/\+/g," ");try{h=decodeURIComponent(h)}catch(t){h=unescape(h)}h=h.split(",");if(h.length==1){h=h[0]}o[c]=h}}return o};var k=function(){var t=navigator.userAgent.toLowerCase();return t.indexOf("webkit")===-1&&t.indexOf("gecko")!==-1}();var j=function(){var t="",e="",r="pc",n;var i=navigator.userAgent.toLowerCase();if(i.indexOf("msie")>-1||i.indexOf("trident")>-1&&i.indexOf("rv")>-1){t="msie";n=i.match(/msie ([\d.]+)/)||i.match(/rv:([\d.]+)/)}else if(i.indexOf("chrome")>-1){t="chrome";n=i.match(/chrome\/([\d.]+)/)}else if(i.indexOf("firefox")>-1){t="firefox";n=i.match(/firefox\/([\d.]+)/)}else if(i.indexOf("opera")>-1){t="opera";n=i.match(/version\/([\d.]+)/)}else if(i.indexOf("safari")>-1){t="safari";n=i.match(/version\/([\d.]+)/)}e=n?n[1]:"";if(i.indexOf("ipad")>-1||i.indexOf("ipod")>-1||i.indexOf("iphone")>-1){r="apple"}else if(i.indexOf("android")>-1){n=i.match(/version\/([\d.]+)/);e=n?n[1]:"";r="android"}return{name:t,version:e,device:r}}();var G=function t(){return j};var B=function(){var t=true,e=G();if(document.createElement("canvas").getContext){if(e.name==="firefox"&&parseFloat(e.version)<5){t=false}if(e.name==="safari"&&parseFloat(e.version)<4){t=false}if(e.name==="opera"&&parseFloat(e.version)<10){t=false}if(e.name==="msie"&&parseFloat(e.version)<9){t=false}}else{t=false}return t}();var U=function t(){return B};var q=function t(e){if(!e){return true}var r=e.indexOf("//");var n=document.location.toString();var i=n.indexOf("//");if(r===-1){return true}else{var o;var s=o=e.substring(0,r);var a=n.substring(i+2);i=a.indexOf("/");var u=a.indexOf(":");var l=a.substring(0,i);var c=document.location.protocol;if(u!==-1){}else{l+=":"+(c.toLowerCase()==="http:"?80:443)}if(c.toLowerCase()!==s.toLowerCase()){return false}s=e.substring(r+2);var h=s.indexOf(":");r=s.indexOf("/");var f=s.substring(0,r);var p;if(h!==-1){p=s.substring(0,h)}else{p=s.substring(0,r);f+=":"+(o.toLowerCase()==="http:"?80:443)}var d=document.domain;if(p===d&&f===l){return true}}return false};var z=function t(e){var r=e;if(r==null){return null}switch(r.constructor){case String:r='"'+r.replace(/(["\\])/g,"\\$1")+'"';r=r.replace(/\n/g,"\\n");r=r.replace(/\r/g,"\\r");r=r.replace("<","&lt;");r=r.replace(">","&gt;");r=r.replace(/%/g,"%25");r=r.replace(/&/g,"%26");return r;case Array:var n=[];for(var i=0,o=r.length;i<o;i++){n.push(t(r[i]))}return"["+n.join(",")+"]";case Number:return isFinite(r)?String(r):null;case Boolean:return String(r);case Date:var s="{"+"'__type':\"System.DateTime\","+"'Year':"+r.getFullYear()+","+"'Month':"+(r.getMonth()+1)+","+"'Day':"+r.getDate()+","+"'Hour':"+r.getHours()+","+"'Minute':"+r.getMinutes()+","+"'Second':"+r.getSeconds()+","+"'Millisecond':"+r.getMilliseconds()+","+"'TimezoneOffset':"+r.getTimezoneOffset()+"}";return s;default:if((typeof r==="undefined"?"undefined":(0,m.default)(r))==="object"){if(r.length){var n=[];for(var i=0,o=r.length;i<o;i++){n.push(t(r[i]))}return"["+n.join(",")+"]"}var a=[];for(var u in r){if(typeof r[u]!=="function"&&u!=="CLASS_NAME"){a.push("'"+u+"':"+t(r[u]))}}if(a.length>0){return"{"+a.join(",")+"}"}else{return"{}"}}return r.toString()}};var V=function t(e){if(e.responseText&&typeof e.responseText==="string"){e=JSON.parse(e.responseText)}return e};var W=function t(e,r){e=e||{};if(r){for(var n in r){var i=r[n];if(i!==undefined&&n!=="CLASS_NAME"&&typeof i!=="function"){e[n]=i}}}return e};var H=function t(e,r,n){e=e||{};if(r){for(var i in r){var o=false;if(n&&n.length){for(var s=0,a=n.length;s<a;s++){if(i===n[s]){o=true;break}}}if(o===true){continue}var u=r[i];if(u!==undefined&&i!=="CLASS_NAME"&&typeof u!=="function"){e[i]=u}}}return e};var X=function t(e){if(null===e||"object"!==(typeof e==="undefined"?"undefined":(0,m.default)(e))){return e}if(e instanceof Date){var r=new Date;r.setTime(e.getTime());return r}if(e instanceof Array){var r=e.slice(0);return r}if(e instanceof Object){var r={};for(var n in e){if(e.hasOwnProperty(n)){r[n]=t(e[n])}}return r}throw new Error("Unable to copy obj! Its type isn't supported.")};var Z=function t(){var e="";for(var r=1;r<=32;r++){var n=Math.floor(Math.random()*16).toString(16);e+=n;if(r==8||r==12||r==16||r==20)e+="-"}return e};var Y=function t(e,r){var n=Array.prototype.slice.apply(arguments,[2]);return function(){var t=n.concat(Array.prototype.slice.apply(arguments,[0]));return e.apply(r,t)}};var J=function t(e,r){return function(t){return e.call(r,t||window.event)}};var Q=function t(e){var r=e.value;switch(r){case 0:return"Intersect";case 1:return"Disjoin";case 2:return"Include";case 3:return"Adjacent";default:return"Unknown"}};var K=function t(e){return e.replace(/([\u4E00-\u9FA5]|[\uFE30-\uFFA0])/g,function(t){return $(t)})};var $=function t(e){var r=escape(e);var n=r.split("%");var i="";if(n[0]!=""){i=n[0]}for(var o=1;o<n.length;o++){if(n[o].substring(0,1)=="u"){i+=et(tt(n[o].substring(1,5)))}else i+="%"+n[o]}return i};var tt=function t(e){var r="";var n;var i="0123456789ABCDEF";var o="";for(var s=0;s<e.length;s++){r=e.charAt(s);n=i.indexOf(r);o+=nt(n)}return o};var et=function t(e){var r="";var n="";var i="";if(e.length==16){n="1110"+e.substring(0,4);n+="10"+e.substring(4,10);n+="10"+e.substring(10,16);var o="0123456789ABCDEF";for(var s=0;s<3;s++){r+="%";i=n.substring(s*8,(s+1)*8);r+=o.charAt(rt(i.substring(0,4)));r+=o.charAt(rt(i.substring(4,8)))}return r}return""};var rt=function t(e){var r=0;if(e.length==4){for(var n=0;n<4;n++){r+=e.charAt(n)*Math.pow(2,3-n)}return r}return-1};var nt=function t(e){var r="";var n=0;for(var i=0;i<4;i++){n=Math.pow(2,3-i);if(e>=n){r+="1";e=e-n}else r+="0"}return r};var it=function t(e,r){if(Object.prototype.toString.call(e)==="[object Object]"&&Object.prototype.toString.call(r)==="[object Object]"){for(var n in r){if(!e[n]){e[n]=r[n]}else{e[n]=t(e[n],r[n])}}}else if(Object.prototype.toString.call(e)==="[object Array]"&&Object.prototype.toString.call(r)==="[object Array]"){e=e.concat(r)}else{e=r}return e};var ot=function t(e,r,n,i){var o={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1};if(r.hasOwnProperty(n)){if((0,m.default)(e[n])=="object"&&!o[Object.prototype.toString.call(e[n])]){st(e[n],r[n],i)}else if(i||!(n in e)){e[n]=r[n]}}};var st=function t(e,r,n){for(var i in r){ot(e,r,i,n)}return e};var at=function t(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++){r[n]=arguments[n]}var i=function t(e){(0,v.default)(this,t);for(var n=0;n<r.length;n++){s(this,new r[n](e))}};for(var o=0;o<r.length;o++){var t=r[o];s(i,t);s(i.prototype,t.prototype);s(i.prototype,new t)}return i;function s(t,e){var r=(0,d.default)(e);if(f.default){r=r.concat((0,f.default)(e))}for(var n=0;n<r.length;n++){var i=r[n];if(i!=="constructor"&&i!=="prototype"&&i!=="name"&&i!=="length"){var o=(0,c.default)(e,i);if(window["ActiveXObject"]){(0,u.default)(t,i,o||{})}else{(0,u.default)(t,i,o)}}}}};var ut=function t(e,r){var n=document.createElement("CANVAS");if(e){n.width=e}if(r){n.height=r}return n.getContext("2d")};var lt=function t(e,r,n,o){(0,s.default)(e).forEach(function(t){var s=e[t],a=t;if(pt(s)&&typeof s!=="function"){if(n&&n.indexOf(t)>-1){var u={};if(t==="geometry"){if(s.type==="polygon"){u["rings"]=e[t]["rings"]}if(s.type==="multipoint"){u["points"]=e[t]["points"]}if(s.type==="point"){if(e[t]["x"]&&e[t]["y"]){u["y"]=e[t]["y"];u["x"]=e[t]["x"]}}if(s.type==="polyline"){u["paths"]=e[t]["paths"]}if(s.type==="circle"){s.type="polygon";u["rings"]=e[t]["rings"]}u["spatialReference"]=e[t]["spatialReference"];s=u;r+="&geometryType=esriGeometry"+e[t]["type"].charAt(0).toUpperCase()+e[t]["type"].slice(1);s=encodeURI((0,i.default)(s))}else{s=(0,i.default)(s)}}if(o&&o.hasOwnProperty(t)){a=o[t]}r+="&"+a+"="+s}});return r};var ct=function t(e,r,n){(0,s.default)(r).forEach(function(t){if(n&&n.indexOf(t)>-1){var o=t;o=t.substring(0,o.length-"Features".length)+"s";e+=o+"="+encodeURIComponent(r[t]instanceof Object?(0,i.default)(r[t]):r[t])+"&"}else{e+=t+"="+r[t]+"&"}});return e};var ht=function t(e,r,n){return new e({longitude:n[0],latitude:n[1],z:n[2],spatialReference:X(r.spatialReference)})};var ft=function t(e){for(var r=0;r<e.length;r++){if(e[r]instanceof Array){t(e[r])}else{if(e[r]instanceof Object){e[r]=e[r].toArray()}}}return e};var pt=function t(e){return e!==""&&e!==null&&e!==undefined};e.extend=x;e.isArray=S;e.extendDeep=w;e.copy=C;e.copyExcluce=I;e.reset=E;e.getElement=P;e.isElement=M;e.removeItem=L;e.indexOf=N;e.modifyDOMElement=T;e.applyDefaults=O;e.getParameterString=A;e.getWFParameterString=R;e.urlAppend=F;e.getParameters=D;e.IS_GECKO=k;e.Browser=j;e.getBrowser=G;e.isSupportCanvas=B;e.supportCanvas=U;e.isInTheSameDomain=q;e.toJSON=z;e.transformResult=V;e.copyAttributes=W;e.copyAttributesWithClip=H;e.cloneObject=X;e.newGuid=Z;e.bind=Y;e.bindAsEventListener=J;e.getTopAnalysisResult=Q;e.ChineseToUtf8=K;e.DeepMerge=it;e.merge=st;e.mixin=at;e.createCanvasContext2D=ut;e.formatQuery=lt;e.formatEdits=ct;e.returnPoint=ht;e.formatPoints=ft;e.notNULL=pt;_.Zondy.Util.extend=x;_.Zondy.Util.isArray=S;_.Zondy.Util.extendDeep=w;_.Zondy.Util.copy=C;_.Zondy.Util.copyExcluce=I;_.Zondy.Util.reset=E;_.Zondy.Util.getElement=P;_.Zondy.Util.isElement=M;_.Zondy.Util.removeItem=L;_.Zondy.Util.indexOf=N;_.Zondy.Util.modifyDOMElement=T;_.Zondy.Util.applyDefaults=O;_.Zondy.Util.getParameterString=A;_.Zondy.Util.getWFParameterString=R;_.Zondy.Util.urlAppend=F;_.Zondy.Util.getParameters=D;_.Zondy.IS_GECKO=k;_.Zondy.Browser=j;_.Zondy.Util.getBrowser=G;_.Zondy.Util.isSupportCanvas=B;_.Zondy.Util.supportCanvas=U;_.Zondy.Util.isInTheSameDomain=q;_.Zondy.Util.toJSON=z;_.Zondy.Util.transformResult=V;_.Zondy.Util.copyAttributes=W;_.Zondy.Util.copyAttributesWithClip=H;_.Zondy.Util.cloneObject=X;_.Zondy.Util.newGuid=Z;_.Zondy.Util.bind=Y;_.Zondy.Util.bindAsEventListener=J;_.Zondy.Util.getTopAnalysisResult=Q;_.Zondy.Util.ChineseToUtf8=K;_.Zondy.Util.DeepMerge=it;_.Zondy.Util.merge=st;_.Zondy.Util.mixin=at;_.Zondy.Util.createCanvasContext2D=ut;_.Zondy.Util.formatQuery=lt;_.Zondy.Util.formatEdits=ct;_.Zondy.Util.returnPoint=ht;_.Zondy.Util.returnPoint=ft;_.Zondy.Util.returnPoint=pt},function(t,e,r){"use strict";e.__esModule=true;var n=r(88);var i=o(n);function o(t){return t&&t.__esModule?t:{default:t}}e.default=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;(0,i.default)(t,n.key,n)}}return function(e,r,n){if(r)t(e.prototype,r);if(n)t(e,n);return e}}()},function(t,e,r){(function(t,n){var i;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var o;var s="4.17.21";var a=200;var u="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",c="Invalid `variable` option passed into `_.template`";var h="__lodash_hash_undefined__";var f=500;var p="__lodash_placeholder__";var d=1,y=2,v=4;var g=1,m=2;var _=1,b=2,x=4,S=8,w=16,C=32,I=64,E=128,P=256,M=512;var L=30,N="...";var T=800,O=16;var A=1,R=2,F=3;var D=1/0,k=9007199254740991,j=1.7976931348623157e308,G=0/0;var B=4294967295,U=B-1,q=B>>>1;var z=[["ary",E],["bind",_],["bindKey",b],["curry",S],["curryRight",w],["flip",M],["partial",C],["partialRight",I],["rearg",P]];var V="[object Arguments]",W="[object Array]",H="[object AsyncFunction]",X="[object Boolean]",Z="[object Date]",Y="[object DOMException]",J="[object Error]",Q="[object Function]",K="[object GeneratorFunction]",$="[object Map]",tt="[object Number]",et="[object Null]",rt="[object Object]",nt="[object Promise]",it="[object Proxy]",ot="[object RegExp]",st="[object Set]",at="[object String]",ut="[object Symbol]",lt="[object Undefined]",ct="[object WeakMap]",ht="[object WeakSet]";var ft="[object ArrayBuffer]",pt="[object DataView]",dt="[object Float32Array]",yt="[object Float64Array]",vt="[object Int8Array]",gt="[object Int16Array]",mt="[object Int32Array]",_t="[object Uint8Array]",bt="[object Uint8ClampedArray]",xt="[object Uint16Array]",St="[object Uint32Array]";var wt=/\b__p \+= '';/g,Ct=/\b(__p \+=) '' \+/g,It=/(__e\(.*?\)|\b__t\)) \+\n'';/g;var Et=/&(?:amp|lt|gt|quot|#39);/g,Pt=/[&<>"']/g,Mt=RegExp(Et.source),Lt=RegExp(Pt.source);var Nt=/<%-([\s\S]+?)%>/g,Tt=/<%([\s\S]+?)%>/g,Ot=/<%=([\s\S]+?)%>/g;var At=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Rt=/^\w*$/,Ft=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;var Dt=/[\\^$.*+?()[\]{}|]/g,kt=RegExp(Dt.source);var jt=/^\s+/;var Gt=/\s/;var Bt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ut=/\{\n\/\* \[wrapped with (.+)\] \*/,qt=/,? & /;var zt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var Vt=/[()=,{}\[\]\/\s]/;var Wt=/\\(\\)?/g;var Ht=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g;var Xt=/\w*$/;var Zt=/^[-+]0x[0-9a-f]+$/i;var Yt=/^0b[01]+$/i;var Jt=/^\[object .+?Constructor\]$/;var Qt=/^0o[0-7]+$/i;var Kt=/^(?:0|[1-9]\d*)$/;var $t=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g;var te=/($^)/;var ee=/['\n\r\u2028\u2029\\]/g;var re="\\ud800-\\udfff",ne="\\u0300-\\u036f",ie="\\ufe20-\\ufe2f",oe="\\u20d0-\\u20ff",se=ne+ie+oe,ae="\\u2700-\\u27bf",ue="a-z\\xdf-\\xf6\\xf8-\\xff",le="\\xac\\xb1\\xd7\\xf7",ce="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",he="\\u2000-\\u206f",fe=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",pe="A-Z\\xc0-\\xd6\\xd8-\\xde",de="\\ufe0e\\ufe0f",ye=le+ce+he+fe;var ve="['’]",ge="["+re+"]",me="["+ye+"]",_e="["+se+"]",be="\\d+",xe="["+ae+"]",Se="["+ue+"]",we="[^"+re+ye+be+ae+ue+pe+"]",Ce="\\ud83c[\\udffb-\\udfff]",Ie="(?:"+_e+"|"+Ce+")",Ee="[^"+re+"]",Pe="(?:\\ud83c[\\udde6-\\uddff]){2}",Me="[\\ud800-\\udbff][\\udc00-\\udfff]",Le="["+pe+"]",Ne="\\u200d";var Te="(?:"+Se+"|"+we+")",Oe="(?:"+Le+"|"+we+")",Ae="(?:"+ve+"(?:d|ll|m|re|s|t|ve))?",Re="(?:"+ve+"(?:D|LL|M|RE|S|T|VE))?",Fe=Ie+"?",De="["+de+"]?",ke="(?:"+Ne+"(?:"+[Ee,Pe,Me].join("|")+")"+De+Fe+")*",je="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ge="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Be=De+Fe+ke,Ue="(?:"+[xe,Pe,Me].join("|")+")"+Be,qe="(?:"+[Ee+_e+"?",_e,Pe,Me,ge].join("|")+")";var ze=RegExp(ve,"g");var Ve=RegExp(_e,"g");var We=RegExp(Ce+"(?="+Ce+")|"+qe+Be,"g");var He=RegExp([Le+"?"+Se+"+"+Ae+"(?="+[me,Le,"$"].join("|")+")",Oe+"+"+Re+"(?="+[me,Le+Te,"$"].join("|")+")",Le+"?"+Te+"+"+Ae,Le+"+"+Re,Ge,je,be,Ue].join("|"),"g");var Xe=RegExp("["+Ne+re+se+de+"]");var Ze=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var Ye=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"];var Je=-1;var Qe={};Qe[dt]=Qe[yt]=Qe[vt]=Qe[gt]=Qe[mt]=Qe[_t]=Qe[bt]=Qe[xt]=Qe[St]=true;Qe[V]=Qe[W]=Qe[ft]=Qe[X]=Qe[pt]=Qe[Z]=Qe[J]=Qe[Q]=Qe[$]=Qe[tt]=Qe[rt]=Qe[ot]=Qe[st]=Qe[at]=Qe[ct]=false;var Ke={};Ke[V]=Ke[W]=Ke[ft]=Ke[pt]=Ke[X]=Ke[Z]=Ke[dt]=Ke[yt]=Ke[vt]=Ke[gt]=Ke[mt]=Ke[$]=Ke[tt]=Ke[rt]=Ke[ot]=Ke[st]=Ke[at]=Ke[ut]=Ke[_t]=Ke[bt]=Ke[xt]=Ke[St]=true;Ke[J]=Ke[Q]=Ke[ct]=false;var $e={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"};var tr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};var er={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"};var rr={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};var nr=parseFloat,ir=parseInt;var or=typeof t=="object"&&t&&t.Object===Object&&t;var sr=typeof self=="object"&&self&&self.Object===Object&&self;var ar=or||sr||Function("return this")();var ur=typeof e=="object"&&e&&!e.nodeType&&e;var lr=ur&&typeof n=="object"&&n&&!n.nodeType&&n;var cr=lr&&lr.exports===ur;var hr=cr&&or.process;var fr=function(){try{var t=lr&&lr.require&&lr.require("util").types;if(t){return t}return hr&&hr.binding&&hr.binding("util")}catch(t){}}();var pr=fr&&fr.isArrayBuffer,dr=fr&&fr.isDate,yr=fr&&fr.isMap,vr=fr&&fr.isRegExp,gr=fr&&fr.isSet,mr=fr&&fr.isTypedArray;function _r(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function br(t,e,r,n){var i=-1,o=t==null?0:t.length;while(++i<o){var s=t[i];e(n,s,r(s),t)}return n}function xr(t,e){var r=-1,n=t==null?0:t.length;while(++r<n){if(e(t[r],r,t)===false){break}}return t}function Sr(t,e){var r=t==null?0:t.length;while(r--){if(e(t[r],r,t)===false){break}}return t}function wr(t,e){var r=-1,n=t==null?0:t.length;while(++r<n){if(!e(t[r],r,t)){return false}}return true}function Cr(t,e){var r=-1,n=t==null?0:t.length,i=0,o=[];while(++r<n){var s=t[r];if(e(s,r,t)){o[i++]=s}}return o}function Ir(t,e){var r=t==null?0:t.length;return!!r&&kr(t,e,0)>-1}function Er(t,e,r){var n=-1,i=t==null?0:t.length;while(++n<i){if(r(e,t[n])){return true}}return false}function Pr(t,e){var r=-1,n=t==null?0:t.length,i=Array(n);while(++r<n){i[r]=e(t[r],r,t)}return i}function Mr(t,e){var r=-1,n=e.length,i=t.length;while(++r<n){t[i+r]=e[r]}return t}function Lr(t,e,r,n){var i=-1,o=t==null?0:t.length;if(n&&o){r=t[++i]}while(++i<o){r=e(r,t[i],i,t)}return r}function Nr(t,e,r,n){var i=t==null?0:t.length;if(n&&i){r=t[--i]}while(i--){r=e(r,t[i],i,t)}return r}function Tr(t,e){var r=-1,n=t==null?0:t.length;while(++r<n){if(e(t[r],r,t)){return true}}return false}var Or=Ur("length");function Ar(t){return t.split("")}function Rr(t){return t.match(zt)||[]}function Fr(t,e,r){var n;r(t,function(t,r,i){if(e(t,r,i)){n=r;return false}});return n}function Dr(t,e,r,n){var i=t.length,o=r+(n?1:-1);while(n?o--:++o<i){if(e(t[o],o,t)){return o}}return-1}function kr(t,e,r){return e===e?dn(t,e,r):Dr(t,Gr,r)}function jr(t,e,r,n){var i=r-1,o=t.length;while(++i<o){if(n(t[i],e)){return i}}return-1}function Gr(t){return t!==t}function Br(t,e){var r=t==null?0:t.length;return r?Wr(t,e)/r:G}function Ur(t){return function(e){return e==null?o:e[t]}}function qr(t){return function(e){return t==null?o:t[e]}}function zr(t,e,r,n,i){i(t,function(t,i,o){r=n?(n=false,t):e(r,t,i,o)});return r}function Vr(t,e){var r=t.length;t.sort(e);while(r--){t[r]=t[r].value}return t}function Wr(t,e){var r,n=-1,i=t.length;while(++n<i){var s=e(t[n]);if(s!==o){r=r===o?s:r+s}}return r}function Hr(t,e){var r=-1,n=Array(t);while(++r<t){n[r]=e(r)}return n}function Xr(t,e){return Pr(e,function(e){return[e,t[e]]})}function Zr(t){return t?t.slice(0,mn(t)+1).replace(jt,""):t}function Yr(t){return function(e){return t(e)}}function Jr(t,e){return Pr(e,function(e){return t[e]})}function Qr(t,e){return t.has(e)}function Kr(t,e){var r=-1,n=t.length;while(++r<n&&kr(e,t[r],0)>-1){}return r}function $r(t,e){var r=t.length;while(r--&&kr(e,t[r],0)>-1){}return r}function tn(t,e){var r=t.length,n=0;while(r--){if(t[r]===e){++n}}return n}var en=qr($e);var rn=qr(tr);function nn(t){return"\\"+rr[t]}function on(t,e){return t==null?o:t[e]}function sn(t){return Xe.test(t)}function an(t){return Ze.test(t)}function un(t){var e,r=[];while(!(e=t.next()).done){r.push(e.value)}return r}function ln(t){var e=-1,r=Array(t.size);t.forEach(function(t,n){r[++e]=[n,t]});return r}function cn(t,e){return function(r){return t(e(r))}}function hn(t,e){var r=-1,n=t.length,i=0,o=[];while(++r<n){var s=t[r];if(s===e||s===p){t[r]=p;o[i++]=r}}return o}function fn(t){var e=-1,r=Array(t.size);t.forEach(function(t){r[++e]=t});return r}function pn(t){var e=-1,r=Array(t.size);t.forEach(function(t){r[++e]=[t,t]});return r}function dn(t,e,r){var n=r-1,i=t.length;while(++n<i){if(t[n]===e){return n}}return-1}function yn(t,e,r){var n=r+1;while(n--){if(t[n]===e){return n}}return n}function vn(t){return sn(t)?bn(t):Or(t)}function gn(t){return sn(t)?xn(t):Ar(t)}function mn(t){var e=t.length;while(e--&&Gt.test(t.charAt(e))){}return e}var _n=qr(er);function bn(t){var e=We.lastIndex=0;while(We.test(t)){++e}return e}function xn(t){return t.match(We)||[]}function Sn(t){return t.match(He)||[]}var wn=function t(e){e=e==null?ar:Cn.defaults(ar.Object(),e,Cn.pick(ar,Ye));var r=e.Array,n=e.Date,i=e.Error,Gt=e.Function,zt=e.Math,re=e.Object,ne=e.RegExp,ie=e.String,oe=e.TypeError;var se=r.prototype,ae=Gt.prototype,ue=re.prototype;var le=e["__core-js_shared__"];var ce=ae.toString;var he=ue.hasOwnProperty;var fe=0;var pe=function(){var t=/[^.]+$/.exec(le&&le.keys&&le.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();var de=ue.toString;var ye=ce.call(re);var ve=ar._;var ge=ne("^"+ce.call(he).replace(Dt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var me=cr?e.Buffer:o,_e=e.Symbol,be=e.Uint8Array,xe=me?me.allocUnsafe:o,Se=cn(re.getPrototypeOf,re),we=re.create,Ce=ue.propertyIsEnumerable,Ie=se.splice,Ee=_e?_e.isConcatSpreadable:o,Pe=_e?_e.iterator:o,Me=_e?_e.toStringTag:o;var Le=function(){try{var t=Xs(re,"defineProperty");t({},"",{});return t}catch(t){}}();var Ne=e.clearTimeout!==ar.clearTimeout&&e.clearTimeout,Te=n&&n.now!==ar.Date.now&&n.now,Oe=e.setTimeout!==ar.setTimeout&&e.setTimeout;var Ae=zt.ceil,Re=zt.floor,Fe=re.getOwnPropertySymbols,De=me?me.isBuffer:o,ke=e.isFinite,je=se.join,Ge=cn(re.keys,re),Be=zt.max,Ue=zt.min,qe=n.now,We=e.parseInt,He=zt.random,Xe=se.reverse;var Ze=Xs(e,"DataView"),$e=Xs(e,"Map"),tr=Xs(e,"Promise"),er=Xs(e,"Set"),rr=Xs(e,"WeakMap"),or=Xs(re,"create");var sr=rr&&new rr;var ur={};var lr=Oa(Ze),hr=Oa($e),fr=Oa(tr),Or=Oa(er),Ar=Oa(rr);var qr=_e?_e.prototype:o,dn=qr?qr.valueOf:o,bn=qr?qr.toString:o;function xn(t){if(Ic(t)&&!uc(t)&&!(t instanceof Pn)){if(t instanceof En){return t}if(he.call(t,"__wrapped__")){return Ra(t)}}return new En(t)}var wn=function(){function t(){}return function(e){if(!Cc(e)){return{}}if(we){return we(e)}t.prototype=e;var r=new t;t.prototype=o;return r}}();function In(){}function En(t,e){this.__wrapped__=t;this.__actions__=[];this.__chain__=!!e;this.__index__=0;this.__values__=o}xn.templateSettings={escape:Nt,evaluate:Tt,interpolate:Ot,variable:"",imports:{_:xn}};xn.prototype=In.prototype;xn.prototype.constructor=xn;En.prototype=wn(In.prototype);En.prototype.constructor=En;function Pn(t){this.__wrapped__=t;this.__actions__=[];this.__dir__=1;this.__filtered__=false;this.__iteratees__=[];this.__takeCount__=B;this.__views__=[]}function Mn(){var t=new Pn(this.__wrapped__);t.__actions__=is(this.__actions__);t.__dir__=this.__dir__;t.__filtered__=this.__filtered__;t.__iteratees__=is(this.__iteratees__);t.__takeCount__=this.__takeCount__;t.__views__=is(this.__views__);return t}function Ln(){if(this.__filtered__){var t=new Pn(this);t.__dir__=-1;t.__filtered__=true}else{t=this.clone();t.__dir__*=-1}return t}function Nn(){var t=this.__wrapped__.value(),e=this.__dir__,r=uc(t),n=e<0,i=r?t.length:0,o=Ks(0,i,this.__views__),s=o.start,a=o.end,u=a-s,l=n?a:s-1,c=this.__iteratees__,h=c.length,f=0,p=Ue(u,this.__takeCount__);if(!r||!n&&i==u&&p==u){return Go(t,this.__actions__)}var d=[];t:while(u--&&f<p){l+=e;var y=-1,v=t[l];while(++y<h){var g=c[y],m=g.iteratee,_=g.type,b=m(v);if(_==R){v=b}else if(!b){if(_==A){continue t}else{break t}}}d[f++]=v}return d}Pn.prototype=wn(In.prototype);Pn.prototype.constructor=Pn;function Tn(t){var e=-1,r=t==null?0:t.length;this.clear();while(++e<r){var n=t[e];this.set(n[0],n[1])}}function On(){this.__data__=or?or(null):{};this.size=0}function An(t){var e=this.has(t)&&delete this.__data__[t];this.size-=e?1:0;return e}function Rn(t){var e=this.__data__;if(or){var r=e[t];return r===h?o:r}return he.call(e,t)?e[t]:o}function Fn(t){var e=this.__data__;return or?e[t]!==o:he.call(e,t)}function Dn(t,e){var r=this.__data__;this.size+=this.has(t)?0:1;r[t]=or&&e===o?h:e;return this}Tn.prototype.clear=On;Tn.prototype["delete"]=An;Tn.prototype.get=Rn;Tn.prototype.has=Fn;Tn.prototype.set=Dn;function kn(t){var e=-1,r=t==null?0:t.length;this.clear();while(++e<r){var n=t[e];this.set(n[0],n[1])}}function jn(){this.__data__=[];this.size=0}function Gn(t){var e=this.__data__,r=ci(e,t);if(r<0){return false}var n=e.length-1;if(r==n){e.pop()}else{Ie.call(e,r,1)}--this.size;return true}function Bn(t){var e=this.__data__,r=ci(e,t);return r<0?o:e[r][1]}function Un(t){return ci(this.__data__,t)>-1}function qn(t,e){var r=this.__data__,n=ci(r,t);if(n<0){++this.size;r.push([t,e])}else{r[n][1]=e}return this}kn.prototype.clear=jn;kn.prototype["delete"]=Gn;kn.prototype.get=Bn;kn.prototype.has=Un;kn.prototype.set=qn;function zn(t){var e=-1,r=t==null?0:t.length;this.clear();while(++e<r){var n=t[e];this.set(n[0],n[1])}}function Vn(){this.size=0;this.__data__={hash:new Tn,map:new($e||kn),string:new Tn}}function Wn(t){var e=Ws(this,t)["delete"](t);this.size-=e?1:0;return e}function Hn(t){return Ws(this,t).get(t)}function Xn(t){return Ws(this,t).has(t)}function Zn(t,e){var r=Ws(this,t),n=r.size;r.set(t,e);this.size+=r.size==n?0:1;return this}zn.prototype.clear=Vn;zn.prototype["delete"]=Wn;zn.prototype.get=Hn;zn.prototype.has=Xn;zn.prototype.set=Zn;function Yn(t){var e=-1,r=t==null?0:t.length;this.__data__=new zn;while(++e<r){this.add(t[e])}}function Jn(t){this.__data__.set(t,h);return this}function Qn(t){return this.__data__.has(t)}Yn.prototype.add=Yn.prototype.push=Jn;Yn.prototype.has=Qn;function Kn(t){var e=this.__data__=new kn(t);this.size=e.size}function $n(){this.__data__=new kn;this.size=0}function ti(t){var e=this.__data__,r=e["delete"](t);this.size=e.size;return r}function ei(t){return this.__data__.get(t)}function ri(t){return this.__data__.has(t)}function ni(t,e){var r=this.__data__;if(r instanceof kn){var n=r.__data__;if(!$e||n.length<a-1){n.push([t,e]);this.size=++r.size;return this}r=this.__data__=new zn(n)}r.set(t,e);this.size=r.size;return this}Kn.prototype.clear=$n;Kn.prototype["delete"]=ti;Kn.prototype.get=ei;Kn.prototype.has=ri;Kn.prototype.set=ni;function ii(t,e){var r=uc(t),n=!r&&ac(t),i=!r&&!n&&pc(t),o=!r&&!n&&!i&&Bc(t),s=r||n||i||o,a=s?Hr(t.length,ie):[],u=a.length;for(var l in t){if((e||he.call(t,l))&&!(s&&(l=="length"||i&&(l=="offset"||l=="parent")||o&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||sa(l,u)))){a.push(l)}}return a}function oi(t){var e=t.length;return e?t[mo(0,e-1)]:o}function si(t,e){return La(is(t),vi(e,0,t.length))}function ai(t){return La(is(t))}function ui(t,e,r){if(r!==o&&!ic(t[e],r)||r===o&&!(e in t)){di(t,e,r)}}function li(t,e,r){var n=t[e];if(!(he.call(t,e)&&ic(n,r))||r===o&&!(e in t)){di(t,e,r)}}function ci(t,e){var r=t.length;while(r--){if(ic(t[r][0],e)){return r}}return-1}function hi(t,e,r,n){Si(t,function(t,i,o){e(n,t,r(t),o)});return n}function fi(t,e){return t&&os(e,Sh(e),t)}function pi(t,e){return t&&os(e,wh(e),t)}function di(t,e,r){if(e=="__proto__"&&Le){Le(t,e,{configurable:true,enumerable:true,value:r,writable:true})}else{t[e]=r}}function yi(t,e){var n=-1,i=e.length,s=r(i),a=t==null;while(++n<i){s[n]=a?o:vh(t,e[n])}return s}function vi(t,e,r){if(t===t){if(r!==o){t=t<=r?t:r}if(e!==o){t=t>=e?t:e}}return t}function gi(t,e,r,n,i,s){var a,u=e&d,l=e&y,c=e&v;if(r){a=i?r(t,n,i,s):r(t)}if(a!==o){return a}if(!Cc(t)){return t}var h=uc(t);if(h){a=ea(t);if(!u){return is(t,a)}}else{var f=Qs(t),p=f==Q||f==K;if(pc(t)){return Zo(t,u)}if(f==rt||f==V||p&&!i){a=l||p?{}:ra(t);if(!u){return l?as(t,pi(a,t)):ss(t,fi(a,t))}}else{if(!Ke[f]){return i?t:{}}a=na(t,f,u)}}s||(s=new Kn);var g=s.get(t);if(g){return g}s.set(t,a);if(kc(t)){t.forEach(function(n){a.add(gi(n,e,r,n,t,s))})}else if(Ec(t)){t.forEach(function(n,i){a.set(i,gi(n,e,r,i,t,s))})}var m=c?l?Bs:Gs:l?wh:Sh;var _=h?o:m(t);xr(_||t,function(n,i){if(_){i=n;n=t[i]}li(a,i,gi(n,e,r,i,t,s))});return a}function mi(t){var e=Sh(t);return function(r){return _i(r,t,e)}}function _i(t,e,r){var n=r.length;if(t==null){return!n}t=re(t);while(n--){var i=r[n],s=e[i],a=t[i];if(a===o&&!(i in t)||!s(a)){return false}}return true}function bi(t,e,r){if(typeof t!="function"){throw new oe(l)}return Ia(function(){t.apply(o,r)},e)}function xi(t,e,r,n){var i=-1,o=Ir,s=true,u=t.length,l=[],c=e.length;if(!u){return l}if(r){e=Pr(e,Yr(r))}if(n){o=Er;s=false}else if(e.length>=a){o=Qr;s=false;e=new Yn(e)}t:while(++i<u){var h=t[i],f=r==null?h:r(h);h=n||h!==0?h:0;if(s&&f===f){var p=c;while(p--){if(e[p]===f){continue t}}l.push(h)}else if(!o(e,f,n)){l.push(h)}}return l}var Si=cs(Ti);var wi=cs(Oi,true);function Ci(t,e){var r=true;Si(t,function(t,n,i){r=!!e(t,n,i);return r});return r}function Ii(t,e,r){var n=-1,i=t.length;while(++n<i){var s=t[n],a=e(s);if(a!=null&&(u===o?a===a&&!Gc(a):r(a,u))){var u=a,l=s}}return l}function Ei(t,e,r,n){var i=t.length;r=Zc(r);if(r<0){r=-r>i?0:i+r}n=n===o||n>i?i:Zc(n);if(n<0){n+=i}n=r>n?0:Yc(n);while(r<n){t[r++]=e}return t}function Pi(t,e){var r=[];Si(t,function(t,n,i){if(e(t,n,i)){r.push(t)}});return r}function Mi(t,e,r,n,i){var o=-1,s=t.length;r||(r=oa);i||(i=[]);while(++o<s){var a=t[o];if(e>0&&r(a)){if(e>1){Mi(a,e-1,r,n,i)}else{Mr(i,a)}}else if(!n){i[i.length]=a}}return i}var Li=hs();var Ni=hs(true);function Ti(t,e){return t&&Li(t,e,Sh)}function Oi(t,e){return t&&Ni(t,e,Sh)}function Ai(t,e){return Cr(e,function(e){return xc(t[e])})}function Ri(t,e){e=Vo(e,t);var r=0,n=e.length;while(t!=null&&r<n){t=t[Ta(e[r++])]}return r&&r==n?t:o}function Fi(t,e,r){var n=e(t);return uc(t)?n:Mr(n,r(t))}function Di(t){if(t==null){return t===o?lt:et}return Me&&Me in re(t)?Zs(t):_a(t)}function ki(t,e){return t>e}function ji(t,e){return t!=null&&he.call(t,e)}function Gi(t,e){return t!=null&&e in re(t)}function Bi(t,e,r){return t>=Ue(e,r)&&t<Be(e,r)}function Ui(t,e,n){var i=n?Er:Ir,s=t[0].length,a=t.length,u=a,l=r(a),c=Infinity,h=[];while(u--){var f=t[u];if(u&&e){f=Pr(f,Yr(e))}c=Ue(f.length,c);l[u]=!n&&(e||s>=120&&f.length>=120)?new Yn(u&&f):o}f=t[0];var p=-1,d=l[0];t:while(++p<s&&h.length<c){var y=f[p],v=e?e(y):y;y=n||y!==0?y:0;if(!(d?Qr(d,v):i(h,v,n))){u=a;while(--u){var g=l[u];if(!(g?Qr(g,v):i(t[u],v,n))){continue t}}if(d){d.push(v)}h.push(y)}}return h}function qi(t,e,r,n){Ti(t,function(t,i,o){e(n,r(t),i,o)});return n}function zi(t,e,r){e=Vo(e,t);t=xa(t,e);var n=t==null?t:t[Ta(ou(e))];return n==null?o:_r(n,t,r)}function Vi(t){return Ic(t)&&Di(t)==V}function Wi(t){return Ic(t)&&Di(t)==ft}function Hi(t){return Ic(t)&&Di(t)==Z}function Xi(t,e,r,n,i){if(t===e){return true}if(t==null||e==null||!Ic(t)&&!Ic(e)){return t!==t&&e!==e}return Zi(t,e,r,n,Xi,i)}function Zi(t,e,r,n,i,o){var s=uc(t),a=uc(e),u=s?W:Qs(t),l=a?W:Qs(e);u=u==V?rt:u;l=l==V?rt:l;var c=u==rt,h=l==rt,f=u==l;if(f&&pc(t)){if(!pc(e)){return false}s=true;c=false}if(f&&!c){o||(o=new Kn);return s||Bc(t)?Fs(t,e,r,n,i,o):Ds(t,e,u,r,n,i,o)}if(!(r&g)){var p=c&&he.call(t,"__wrapped__"),d=h&&he.call(e,"__wrapped__");if(p||d){var y=p?t.value():t,v=d?e.value():e;o||(o=new Kn);return i(y,v,r,n,o)}}if(!f){return false}o||(o=new Kn);return ks(t,e,r,n,i,o)}function Yi(t){return Ic(t)&&Qs(t)==$}function Ji(t,e,r,n){var i=r.length,s=i,a=!n;if(t==null){return!s}t=re(t);while(i--){var u=r[i];if(a&&u[2]?u[1]!==t[u[0]]:!(u[0]in t)){return false}}while(++i<s){u=r[i];var l=u[0],c=t[l],h=u[1];if(a&&u[2]){if(c===o&&!(l in t)){return false}}else{var f=new Kn;if(n){var p=n(c,h,l,t,e,f)}if(!(p===o?Xi(h,c,g|m,n,f):p)){return false}}}return true}function Qi(t){if(!Cc(t)||ha(t)){return false}var e=xc(t)?ge:Jt;return e.test(Oa(t))}function Ki(t){return Ic(t)&&Di(t)==ot}function $i(t){return Ic(t)&&Qs(t)==st}function to(t){return Ic(t)&&wc(t.length)&&!!Qe[Di(t)]}function eo(t){if(typeof t=="function"){return t}if(t==null){return Tf}if(typeof t=="object"){return uc(t)?ao(t[0],t[1]):so(t)}return Vf(t)}function ro(t){if(!pa(t)){return Ge(t)}var e=[];for(var r in re(t)){if(he.call(t,r)&&r!="constructor"){e.push(r)}}return e}function no(t){if(!Cc(t)){return ma(t)}var e=pa(t),r=[];for(var n in t){if(!(n=="constructor"&&(e||!he.call(t,n)))){r.push(n)}}return r}function io(t,e){return t<e}function oo(t,e){var n=-1,i=cc(t)?r(t.length):[];Si(t,function(t,r,o){i[++n]=e(t,r,o)});return i}function so(t){var e=Hs(t);if(e.length==1&&e[0][2]){return ya(e[0][0],e[0][1])}return function(r){return r===t||Ji(r,t,e)}}function ao(t,e){if(ua(t)&&da(e)){return ya(Ta(t),e)}return function(r){var n=vh(r,t);return n===o&&n===e?mh(r,t):Xi(e,n,g|m)}}function uo(t,e,r,n,i){if(t===e){return}Li(e,function(s,a){i||(i=new Kn);if(Cc(s)){lo(t,e,a,r,uo,n,i)}else{var u=n?n(wa(t,a),s,a+"",t,e,i):o;if(u===o){u=s}ui(t,a,u)}},wh)}function lo(t,e,r,n,i,s,a){var u=wa(t,r),l=wa(e,r),c=a.get(l);if(c){ui(t,r,c);return}var h=s?s(u,l,r+"",t,e,a):o;var f=h===o;if(f){var p=uc(l),d=!p&&pc(l),y=!p&&!d&&Bc(l);h=l;if(p||d||y){if(uc(u)){h=u}else if(hc(u)){h=is(u)}else if(d){f=false;h=Zo(l,true)}else if(y){f=false;h=$o(l,true)}else{h=[]}}else if(Rc(l)||ac(l)){h=u;if(ac(u)){h=Qc(u)}else if(!Cc(u)||xc(u)){h=ra(l)}}else{f=false}}if(f){a.set(l,h);i(h,l,n,s,a);a["delete"](l)}ui(t,r,h)}function co(t,e){var r=t.length;if(!r){return}e+=e<0?r:0;return sa(e,r)?t[e]:o}function ho(t,e,r){if(e.length){e=Pr(e,function(t){if(uc(t)){return function(e){return Ri(e,t.length===1?t[0]:t)}}return t})}else{e=[Tf]}var n=-1;e=Pr(e,Yr(Vs()));var i=oo(t,function(t,r,i){var o=Pr(e,function(e){return e(t)});return{criteria:o,index:++n,value:t}});return Vr(i,function(t,e){return es(t,e,r)})}function fo(t,e){return po(t,e,function(e,r){return mh(t,r)})}function po(t,e,r){var n=-1,i=e.length,o={};while(++n<i){var s=e[n],a=Ri(t,s);if(r(a,s)){Co(o,Vo(s,t),a)}}return o}function yo(t){return function(e){return Ri(e,t)}}function vo(t,e,r,n){var i=n?jr:kr,o=-1,s=e.length,a=t;if(t===e){e=is(e)}if(r){a=Pr(t,Yr(r))}while(++o<s){var u=0,l=e[o],c=r?r(l):l;while((u=i(a,c,u,n))>-1){if(a!==t){Ie.call(a,u,1)}Ie.call(t,u,1)}}return t}function go(t,e){var r=t?e.length:0,n=r-1;while(r--){var i=e[r];if(r==n||i!==o){var o=i;if(sa(i)){Ie.call(t,i,1)}else{Do(t,i)}}}return t}function mo(t,e){return t+Re(He()*(e-t+1))}function _o(t,e,n,i){var o=-1,s=Be(Ae((e-t)/(n||1)),0),a=r(s);while(s--){a[i?s:++o]=t;t+=n}return a}function bo(t,e){var r="";if(!t||e<1||e>k){return r}do{if(e%2){r+=t}e=Re(e/2);if(e){t+=t}}while(e);return r}function xo(t,e){return Ea(ba(t,e,Tf),t+"")}function So(t){return oi(Uh(t))}function wo(t,e){var r=Uh(t);return La(r,vi(e,0,r.length))}function Co(t,e,r,n){if(!Cc(t)){return t}e=Vo(e,t);var i=-1,s=e.length,a=s-1,u=t;while(u!=null&&++i<s){var l=Ta(e[i]),c=r;if(l==="__proto__"||l==="constructor"||l==="prototype"){return t}if(i!=a){var h=u[l];c=n?n(h,l,u):o;if(c===o){c=Cc(h)?h:sa(e[i+1])?[]:{}}}li(u,l,c);u=u[l]}return t}var Io=!sr?Tf:function(t,e){sr.set(t,e);return t};var Eo=!Le?Tf:function(t,e){return Le(t,"toString",{configurable:true,enumerable:false,value:Pf(e),writable:true})};function Po(t){return La(Uh(t))}function Mo(t,e,n){var i=-1,o=t.length;if(e<0){e=-e>o?0:o+e}n=n>o?o:n;if(n<0){n+=o}o=e>n?0:n-e>>>0;e>>>=0;var s=r(o);while(++i<o){s[i]=t[i+e]}return s}function Lo(t,e){var r;Si(t,function(t,n,i){r=e(t,n,i);return!r});return!!r}function No(t,e,r){var n=0,i=t==null?n:t.length;if(typeof e=="number"&&e===e&&i<=q){while(n<i){var o=n+i>>>1,s=t[o];if(s!==null&&!Gc(s)&&(r?s<=e:s<e)){n=o+1}else{i=o}}return i}return To(t,e,Tf,r)}function To(t,e,r,n){var i=0,s=t==null?0:t.length;if(s===0){return 0}e=r(e);var a=e!==e,u=e===null,l=Gc(e),c=e===o;while(i<s){var h=Re((i+s)/2),f=r(t[h]),p=f!==o,d=f===null,y=f===f,v=Gc(f);if(a){var g=n||y}else if(c){g=y&&(n||p)}else if(u){g=y&&p&&(n||!d)}else if(l){g=y&&p&&!d&&(n||!v)}else if(d||v){g=false}else{g=n?f<=e:f<e}if(g){i=h+1}else{s=h}}return Ue(s,U)}function Oo(t,e){var r=-1,n=t.length,i=0,o=[];while(++r<n){var s=t[r],a=e?e(s):s;if(!r||!ic(a,u)){var u=a;o[i++]=s===0?0:s}}return o}function Ao(t){if(typeof t=="number"){return t}if(Gc(t)){return G}return+t}function Ro(t){if(typeof t=="string"){return t}if(uc(t)){return Pr(t,Ro)+""}if(Gc(t)){return bn?bn.call(t):""}var e=t+"";return e=="0"&&1/t==-D?"-0":e}function Fo(t,e,r){var n=-1,i=Ir,o=t.length,s=true,u=[],l=u;if(r){s=false;i=Er}else if(o>=a){var c=e?null:Ls(t);if(c){return fn(c)}s=false;i=Qr;l=new Yn}else{l=e?[]:u}t:while(++n<o){var h=t[n],f=e?e(h):h;h=r||h!==0?h:0;if(s&&f===f){var p=l.length;while(p--){if(l[p]===f){continue t}}if(e){l.push(f)}u.push(h)}else if(!i(l,f,r)){if(l!==u){l.push(f)}u.push(h)}}return u}function Do(t,e){e=Vo(e,t);t=xa(t,e);return t==null||delete t[Ta(ou(e))]}function ko(t,e,r,n){return Co(t,e,r(Ri(t,e)),n)}function jo(t,e,r,n){var i=t.length,o=n?i:-1;while((n?o--:++o<i)&&e(t[o],o,t)){}return r?Mo(t,n?0:o,n?o+1:i):Mo(t,n?o+1:0,n?i:o)}function Go(t,e){var r=t;if(r instanceof Pn){r=r.value()}return Lr(e,function(t,e){return e.func.apply(e.thisArg,Mr([t],e.args))},r)}function Bo(t,e,n){var i=t.length;if(i<2){return i?Fo(t[0]):[]}var o=-1,s=r(i);while(++o<i){var a=t[o],u=-1;while(++u<i){if(u!=o){s[o]=xi(s[o]||a,t[u],e,n)}}}return Fo(Mi(s,1),e,n)}function Uo(t,e,r){var n=-1,i=t.length,s=e.length,a={};while(++n<i){var u=n<s?e[n]:o;r(a,t[n],u)}return a}function qo(t){return hc(t)?t:[]}function zo(t){return typeof t=="function"?t:Tf}function Vo(t,e){if(uc(t)){return t}return ua(t,e)?[t]:Na($c(t))}var Wo=xo;function Ho(t,e,r){var n=t.length;r=r===o?n:r;return!e&&r>=n?t:Mo(t,e,r)}var Xo=Ne||function(t){return ar.clearTimeout(t)};function Zo(t,e){if(e){return t.slice()}var r=t.length,n=xe?xe(r):new t.constructor(r);t.copy(n);return n}function Yo(t){var e=new t.constructor(t.byteLength);new be(e).set(new be(t));return e}function Jo(t,e){var r=e?Yo(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}function Qo(t){var e=new t.constructor(t.source,Xt.exec(t));e.lastIndex=t.lastIndex;return e}function Ko(t){return dn?re(dn.call(t)):{}}function $o(t,e){var r=e?Yo(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}function ts(t,e){if(t!==e){var r=t!==o,n=t===null,i=t===t,s=Gc(t);var a=e!==o,u=e===null,l=e===e,c=Gc(e);if(!u&&!c&&!s&&t>e||s&&a&&l&&!u&&!c||n&&a&&l||!r&&l||!i){return 1}if(!n&&!s&&!c&&t<e||c&&r&&i&&!n&&!s||u&&r&&i||!a&&i||!l){return-1}}return 0}function es(t,e,r){var n=-1,i=t.criteria,o=e.criteria,s=i.length,a=r.length;while(++n<s){var u=ts(i[n],o[n]);if(u){if(n>=a){return u}var l=r[n];return u*(l=="desc"?-1:1)}}return t.index-e.index}function rs(t,e,n,i){var o=-1,s=t.length,a=n.length,u=-1,l=e.length,c=Be(s-a,0),h=r(l+c),f=!i;while(++u<l){h[u]=e[u]}while(++o<a){if(f||o<s){h[n[o]]=t[o]}}while(c--){h[u++]=t[o++]}return h}function ns(t,e,n,i){var o=-1,s=t.length,a=-1,u=n.length,l=-1,c=e.length,h=Be(s-u,0),f=r(h+c),p=!i;while(++o<h){f[o]=t[o]}var d=o;while(++l<c){f[d+l]=e[l]}while(++a<u){if(p||o<s){f[d+n[a]]=t[o++]}}return f}function is(t,e){var n=-1,i=t.length;e||(e=r(i));while(++n<i){e[n]=t[n]}return e}function os(t,e,r,n){var i=!r;r||(r={});var s=-1,a=e.length;while(++s<a){var u=e[s];var l=n?n(r[u],t[u],u,r,t):o;if(l===o){l=t[u]}if(i){di(r,u,l)}else{li(r,u,l)}}return r}function ss(t,e){return os(t,Ys(t),e)}function as(t,e){return os(t,Js(t),e)}function us(t,e){return function(r,n){var i=uc(r)?br:hi,o=e?e():{};return i(r,t,Vs(n,2),o)}}function ls(t){return xo(function(e,r){var n=-1,i=r.length,s=i>1?r[i-1]:o,a=i>2?r[2]:o;s=t.length>3&&typeof s=="function"?(i--,s):o;if(a&&aa(r[0],r[1],a)){s=i<3?o:s;i=1}e=re(e);while(++n<i){var u=r[n];if(u){t(e,u,n,s)}}return e})}function cs(t,e){return function(r,n){if(r==null){return r}if(!cc(r)){return t(r,n)}var i=r.length,o=e?i:-1,s=re(r);while(e?o--:++o<i){if(n(s[o],o,s)===false){break}}return r}}function hs(t){return function(e,r,n){var i=-1,o=re(e),s=n(e),a=s.length;while(a--){var u=s[t?a:++i];if(r(o[u],u,o)===false){break}}return e}}function fs(t,e,r){var n=e&_,i=ys(t);function o(){var e=this&&this!==ar&&this instanceof o?i:t;return e.apply(n?r:this,arguments)}return o}function ps(t){return function(e){e=$c(e);var r=sn(e)?gn(e):o;var n=r?r[0]:e.charAt(0);var i=r?Ho(r,1).join(""):e.slice(1);return n[t]()+i}}function ds(t){return function(e){return Lr(Sf(Zh(e).replace(ze,"")),t,"")}}function ys(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var r=wn(t.prototype),n=t.apply(r,e);return Cc(n)?n:r}}function vs(t,e,n){var i=ys(t);function s(){var a=arguments.length,u=r(a),l=a,c=zs(s);while(l--){u[l]=arguments[l]}var h=a<3&&u[0]!==c&&u[a-1]!==c?[]:hn(u,c);a-=h.length;if(a<n){return Ps(t,e,_s,s.placeholder,o,u,h,o,o,n-a)}var f=this&&this!==ar&&this instanceof s?i:t;return _r(f,this,u)}return s}function gs(t){return function(e,r,n){var i=re(e);if(!cc(e)){var s=Vs(r,3);e=Sh(e);r=function(t){return s(i[t],t,i)}}var a=t(e,r,n);return a>-1?i[s?e[a]:a]:o}}function ms(t){return js(function(e){var r=e.length,n=r,i=En.prototype.thru;if(t){e.reverse()}while(n--){var s=e[n];if(typeof s!="function"){throw new oe(l)}if(i&&!a&&qs(s)=="wrapper"){var a=new En([],true)}}n=a?n:r;while(++n<r){s=e[n];var u=qs(s),c=u=="wrapper"?Us(s):o;if(c&&ca(c[0])&&c[1]==(E|S|C|P)&&!c[4].length&&c[9]==1){a=a[qs(c[0])].apply(a,c[3])}else{a=s.length==1&&ca(s)?a[u]():a.thru(s)}}return function(){var t=arguments,n=t[0];if(a&&t.length==1&&uc(n)){return a.plant(n).value()}var i=0,o=r?e[i].apply(this,t):n;while(++i<r){o=e[i].call(this,o)}return o}})}function _s(t,e,n,i,s,a,u,l,c,h){var f=e&E,p=e&_,d=e&b,y=e&(S|w),v=e&M,g=d?o:ys(t);function m(){var o=arguments.length,_=r(o),b=o;while(b--){_[b]=arguments[b]}if(y){var x=zs(m),S=tn(_,x)}if(i){_=rs(_,i,s,y)}if(a){_=ns(_,a,u,y)}o-=S;if(y&&o<h){var w=hn(_,x);return Ps(t,e,_s,m.placeholder,n,_,w,l,c,h-o)}var C=p?n:this,I=d?C[t]:t;o=_.length;if(l){_=Sa(_,l)}else if(v&&o>1){_.reverse()}if(f&&c<o){_.length=c}if(this&&this!==ar&&this instanceof m){I=g||ys(I)}return I.apply(C,_)}return m}function bs(t,e){return function(r,n){return qi(r,t,e(n),{})}}function xs(t,e){return function(r,n){var i;if(r===o&&n===o){return e}if(r!==o){i=r}if(n!==o){if(i===o){return n}if(typeof r=="string"||typeof n=="string"){r=Ro(r);n=Ro(n)}else{r=Ao(r);n=Ao(n)}i=t(r,n)}return i}}function Ss(t){return js(function(e){e=Pr(e,Yr(Vs()));return xo(function(r){var n=this;return t(e,function(t){return _r(t,n,r)})})})}function ws(t,e){e=e===o?" ":Ro(e);var r=e.length;if(r<2){return r?bo(e,t):e}var n=bo(e,Ae(t/vn(e)));return sn(e)?Ho(gn(n),0,t).join(""):n.slice(0,t)}function Cs(t,e,n,i){var o=e&_,s=ys(t);function a(){var e=-1,u=arguments.length,l=-1,c=i.length,h=r(c+u),f=this&&this!==ar&&this instanceof a?s:t;while(++l<c){h[l]=i[l]}while(u--){h[l++]=arguments[++e]}return _r(f,o?n:this,h)}return a}function Is(t){return function(e,r,n){if(n&&typeof n!="number"&&aa(e,r,n)){r=n=o}e=Xc(e);if(r===o){r=e;e=0}else{r=Xc(r)}n=n===o?e<r?1:-1:Xc(n);return _o(e,r,n,t)}}function Es(t){return function(e,r){if(!(typeof e=="string"&&typeof r=="string")){e=Jc(e);r=Jc(r)}return t(e,r)}}function Ps(t,e,r,n,i,s,a,u,l,c){var h=e&S,f=h?a:o,p=h?o:a,d=h?s:o,y=h?o:s;e|=h?C:I;e&=~(h?I:C);if(!(e&x)){e&=~(_|b)}var v=[t,e,i,d,f,y,p,u,l,c];var g=r.apply(o,v);if(ca(t)){Ca(g,v)}g.placeholder=n;return Pa(g,t,e)}function Ms(t){var e=zt[t];return function(t,r){t=Jc(t);r=r==null?0:Ue(Zc(r),292);if(r&&ke(t)){var n=($c(t)+"e").split("e"),i=e(n[0]+"e"+(+n[1]+r));n=($c(i)+"e").split("e");return+(n[0]+"e"+(+n[1]-r))}return e(t)}}var Ls=!(er&&1/fn(new er([,-0]))[1]==D)?Gf:function(t){return new er(t)};function Ns(t){return function(e){var r=Qs(e);if(r==$){return ln(e)}if(r==st){return pn(e)}return Xr(e,t(e))}}function Ts(t,e,r,n,i,s,a,u){var c=e&b;if(!c&&typeof t!="function"){throw new oe(l)}var h=n?n.length:0;if(!h){e&=~(C|I);n=i=o}a=a===o?a:Be(Zc(a),0);u=u===o?u:Zc(u);h-=i?i.length:0;if(e&I){var f=n,p=i;n=i=o}var d=c?o:Us(t);var y=[t,e,r,n,i,f,p,s,a,u];if(d){ga(y,d)}t=y[0];e=y[1];r=y[2];n=y[3];i=y[4];u=y[9]=y[9]===o?c?0:t.length:Be(y[9]-h,0);if(!u&&e&(S|w)){e&=~(S|w)}if(!e||e==_){var v=fs(t,e,r)}else if(e==S||e==w){v=vs(t,e,u)}else if((e==C||e==(_|C))&&!i.length){v=Cs(t,e,r,n)}else{v=_s.apply(o,y)}var g=d?Io:Ca;return Pa(g(v,y),t,e)}function Os(t,e,r,n){if(t===o||ic(t,ue[r])&&!he.call(n,r)){return e}return t}function As(t,e,r,n,i,s){if(Cc(t)&&Cc(e)){s.set(e,t);uo(t,e,o,As,s);s["delete"](e)}return t}function Rs(t){return Rc(t)?o:t}function Fs(t,e,r,n,i,s){var a=r&g,u=t.length,l=e.length;if(u!=l&&!(a&&l>u)){return false}var c=s.get(t);var h=s.get(e);if(c&&h){return c==e&&h==t}var f=-1,p=true,d=r&m?new Yn:o;s.set(t,e);s.set(e,t);while(++f<u){var y=t[f],v=e[f];if(n){var _=a?n(v,y,f,e,t,s):n(y,v,f,t,e,s)}if(_!==o){if(_){continue}p=false;break}if(d){if(!Tr(e,function(t,e){if(!Qr(d,e)&&(y===t||i(y,t,r,n,s))){return d.push(e)}})){p=false;break}}else if(!(y===v||i(y,v,r,n,s))){p=false;break}}s["delete"](t);s["delete"](e);return p}function Ds(t,e,r,n,i,o,s){switch(r){case pt:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset){return false}t=t.buffer;e=e.buffer;case ft:if(t.byteLength!=e.byteLength||!o(new be(t),new be(e))){return false}return true;case X:case Z:case tt:return ic(+t,+e);case J:return t.name==e.name&&t.message==e.message;case ot:case at:return t==e+"";case $:var a=ln;case st:var u=n&g;a||(a=fn);if(t.size!=e.size&&!u){return false}var l=s.get(t);if(l){return l==e}n|=m;s.set(t,e);var c=Fs(a(t),a(e),n,i,o,s);s["delete"](t);return c;case ut:if(dn){return dn.call(t)==dn.call(e)}}return false}function ks(t,e,r,n,i,s){var a=r&g,u=Gs(t),l=u.length,c=Gs(e),h=c.length;if(l!=h&&!a){return false}var f=l;while(f--){var p=u[f];if(!(a?p in e:he.call(e,p))){return false}}var d=s.get(t);var y=s.get(e);if(d&&y){return d==e&&y==t}var v=true;s.set(t,e);s.set(e,t);var m=a;while(++f<l){p=u[f];var _=t[p],b=e[p];if(n){var x=a?n(b,_,p,e,t,s):n(_,b,p,t,e,s)}if(!(x===o?_===b||i(_,b,r,n,s):x)){v=false;break}m||(m=p=="constructor")}if(v&&!m){var S=t.constructor,w=e.constructor;if(S!=w&&("constructor"in t&&"constructor"in e)&&!(typeof S=="function"&&S instanceof S&&typeof w=="function"&&w instanceof w)){v=false}}s["delete"](t);s["delete"](e);return v}function js(t){return Ea(ba(t,o,Za),t+"")}function Gs(t){return Fi(t,Sh,Ys)}function Bs(t){return Fi(t,wh,Js)}var Us=!sr?Gf:function(t){return sr.get(t)};function qs(t){var e=t.name+"",r=ur[e],n=he.call(ur,e)?r.length:0;while(n--){var i=r[n],o=i.func;if(o==null||o==t){return i.name}}return e}function zs(t){var e=he.call(xn,"placeholder")?xn:t;return e.placeholder}function Vs(){var t=xn.iteratee||Of;t=t===Of?eo:t;return arguments.length?t(arguments[0],arguments[1]):t}function Ws(t,e){var r=t.__data__;return la(e)?r[typeof e=="string"?"string":"hash"]:r.map}function Hs(t){var e=Sh(t),r=e.length;while(r--){var n=e[r],i=t[n];e[r]=[n,i,da(i)]}return e}function Xs(t,e){var r=on(t,e);return Qi(r)?r:o}function Zs(t){var e=he.call(t,Me),r=t[Me];try{t[Me]=o;var n=true}catch(t){}var i=de.call(t);if(n){if(e){t[Me]=r}else{delete t[Me]}}return i}var Ys=!Fe?Zf:function(t){if(t==null){return[]}t=re(t);return Cr(Fe(t),function(e){return Ce.call(t,e)})};var Js=!Fe?Zf:function(t){var e=[];while(t){Mr(e,Ys(t));t=Se(t)}return e};var Qs=Di;if(Ze&&Qs(new Ze(new ArrayBuffer(1)))!=pt||$e&&Qs(new $e)!=$||tr&&Qs(tr.resolve())!=nt||er&&Qs(new er)!=st||rr&&Qs(new rr)!=ct){Qs=function(t){var e=Di(t),r=e==rt?t.constructor:o,n=r?Oa(r):"";if(n){switch(n){case lr:return pt;case hr:return $;case fr:return nt;case Or:return st;case Ar:return ct}}return e}}function Ks(t,e,r){var n=-1,i=r.length;while(++n<i){var o=r[n],s=o.size;switch(o.type){case"drop":t+=s;break;case"dropRight":e-=s;break;case"take":e=Ue(e,t+s);break;case"takeRight":t=Be(t,e-s);break}}return{start:t,end:e}}function $s(t){var e=t.match(Ut);return e?e[1].split(qt):[]}function ta(t,e,r){e=Vo(e,t);var n=-1,i=e.length,o=false;while(++n<i){var s=Ta(e[n]);if(!(o=t!=null&&r(t,s))){break}t=t[s]}if(o||++n!=i){return o}i=t==null?0:t.length;return!!i&&wc(i)&&sa(s,i)&&(uc(t)||ac(t))}function ea(t){var e=t.length,r=new t.constructor(e);if(e&&typeof t[0]=="string"&&he.call(t,"index")){r.index=t.index;r.input=t.input}return r}function ra(t){return typeof t.constructor=="function"&&!pa(t)?wn(Se(t)):{}}function na(t,e,r){var n=t.constructor;switch(e){case ft:return Yo(t);case X:case Z:return new n(+t);case pt:return Jo(t,r);case dt:case yt:case vt:case gt:case mt:case _t:case bt:case xt:case St:return $o(t,r);case $:return new n;case tt:case at:return new n(t);case ot:return Qo(t);case st:return new n;case ut:return Ko(t)}}function ia(t,e){var r=e.length;if(!r){return t}var n=r-1;e[n]=(r>1?"& ":"")+e[n];e=e.join(r>2?", ":" ");return t.replace(Bt,"{\n/* [wrapped with "+e+"] */\n")}function oa(t){return uc(t)||ac(t)||!!(Ee&&t&&t[Ee])}function sa(t,e){var r=typeof t;e=e==null?k:e;return!!e&&(r=="number"||r!="symbol"&&Kt.test(t))&&(t>-1&&t%1==0&&t<e)}function aa(t,e,r){if(!Cc(r)){return false}var n=typeof e;if(n=="number"?cc(r)&&sa(e,r.length):n=="string"&&e in r){return ic(r[e],t)}return false}function ua(t,e){if(uc(t)){return false}var r=typeof t;if(r=="number"||r=="symbol"||r=="boolean"||t==null||Gc(t)){return true}return Rt.test(t)||!At.test(t)||e!=null&&t in re(e)}function la(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function ca(t){var e=qs(t),r=xn[e];if(typeof r!="function"||!(e in Pn.prototype)){return false}if(t===r){return true}var n=Us(r);return!!n&&t===n[0]}function ha(t){return!!pe&&pe in t}var fa=le?xc:Yf;function pa(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||ue;return t===r}function da(t){return t===t&&!Cc(t)}function ya(t,e){return function(r){if(r==null){return false}return r[t]===e&&(e!==o||t in re(r))}}function va(t){var e=Bl(t,function(t){if(r.size===f){r.clear()}return t});var r=e.cache;return e}function ga(t,e){var r=t[1],n=e[1],i=r|n,o=i<(_|b|E);var s=n==E&&r==S||n==E&&r==P&&t[7].length<=e[8]||n==(E|P)&&e[7].length<=e[8]&&r==S;if(!(o||s)){return t}if(n&_){t[2]=e[2];i|=r&_?0:x}var a=e[3];if(a){var u=t[3];t[3]=u?rs(u,a,e[4]):a;t[4]=u?hn(t[3],p):e[4]}a=e[5];if(a){u=t[5];t[5]=u?ns(u,a,e[6]):a;t[6]=u?hn(t[5],p):e[6]}a=e[7];if(a){t[7]=a}if(n&E){t[8]=t[8]==null?e[8]:Ue(t[8],e[8])}if(t[9]==null){t[9]=e[9]}t[0]=e[0];t[1]=i;return t}function ma(t){var e=[];if(t!=null){for(var r in re(t)){e.push(r)}}return e}function _a(t){return de.call(t)}function ba(t,e,n){e=Be(e===o?t.length-1:e,0);return function(){var i=arguments,o=-1,s=Be(i.length-e,0),a=r(s);while(++o<s){a[o]=i[e+o]}o=-1;var u=r(e+1);while(++o<e){u[o]=i[o]}u[e]=n(a);return _r(t,this,u)}}function xa(t,e){return e.length<2?t:Ri(t,Mo(e,0,-1))}function Sa(t,e){var r=t.length,n=Ue(e.length,r),i=is(t);while(n--){var s=e[n];t[n]=sa(s,r)?i[s]:o}return t}function wa(t,e){if(e==="constructor"&&typeof t[e]==="function"){return}if(e=="__proto__"){return}return t[e]}var Ca=Ma(Io);var Ia=Oe||function(t,e){return ar.setTimeout(t,e)};var Ea=Ma(Eo);function Pa(t,e,r){var n=e+"";return Ea(t,ia(n,Aa($s(n),r)))}function Ma(t){var e=0,r=0;return function(){var n=qe(),i=O-(n-r);r=n;if(i>0){if(++e>=T){return arguments[0]}}else{e=0}return t.apply(o,arguments)}}function La(t,e){var r=-1,n=t.length,i=n-1;e=e===o?n:e;while(++r<e){var s=mo(r,i),a=t[s];t[s]=t[r];t[r]=a}t.length=e;return t}var Na=va(function(t){var e=[];if(t.charCodeAt(0)===46){e.push("")}t.replace(Ft,function(t,r,n,i){e.push(n?i.replace(Wt,"$1"):r||t)});return e});function Ta(t){if(typeof t=="string"||Gc(t)){return t}var e=t+"";return e=="0"&&1/t==-D?"-0":e}function Oa(t){if(t!=null){try{return ce.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Aa(t,e){xr(z,function(r){var n="_."+r[0];if(e&r[1]&&!Ir(t,n)){t.push(n)}});return t.sort()}function Ra(t){if(t instanceof Pn){return t.clone()}var e=new En(t.__wrapped__,t.__chain__);e.__actions__=is(t.__actions__);e.__index__=t.__index__;e.__values__=t.__values__;return e}function Fa(t,e,n){if(n?aa(t,e,n):e===o){e=1}else{e=Be(Zc(e),0)}var i=t==null?0:t.length;if(!i||e<1){return[]}var s=0,a=0,u=r(Ae(i/e));while(s<i){u[a++]=Mo(t,s,s+=e)}return u}function Da(t){var e=-1,r=t==null?0:t.length,n=0,i=[];while(++e<r){var o=t[e];if(o){i[n++]=o}}return i}function ka(){var t=arguments.length;if(!t){return[]}var e=r(t-1),n=arguments[0],i=t;while(i--){e[i-1]=arguments[i]}return Mr(uc(n)?is(n):[n],Mi(e,1))}var ja=xo(function(t,e){return hc(t)?xi(t,Mi(e,1,hc,true)):[]});var Ga=xo(function(t,e){var r=ou(e);if(hc(r)){r=o}return hc(t)?xi(t,Mi(e,1,hc,true),Vs(r,2)):[]});var Ba=xo(function(t,e){var r=ou(e);if(hc(r)){r=o}return hc(t)?xi(t,Mi(e,1,hc,true),o,r):[]});function Ua(t,e,r){var n=t==null?0:t.length;if(!n){return[]}e=r||e===o?1:Zc(e);return Mo(t,e<0?0:e,n)}function qa(t,e,r){var n=t==null?0:t.length;if(!n){return[]}e=r||e===o?1:Zc(e);e=n-e;return Mo(t,0,e<0?0:e)}function za(t,e){return t&&t.length?jo(t,Vs(e,3),true,true):[]}function Va(t,e){return t&&t.length?jo(t,Vs(e,3),true):[]}function Wa(t,e,r,n){var i=t==null?0:t.length;if(!i){return[]}if(r&&typeof r!="number"&&aa(t,e,r)){r=0;n=i}return Ei(t,e,r,n)}function Ha(t,e,r){var n=t==null?0:t.length;if(!n){return-1}var i=r==null?0:Zc(r);if(i<0){i=Be(n+i,0)}return Dr(t,Vs(e,3),i)}function Xa(t,e,r){var n=t==null?0:t.length;if(!n){return-1}var i=n-1;if(r!==o){i=Zc(r);i=r<0?Be(n+i,0):Ue(i,n-1)}return Dr(t,Vs(e,3),i,true)}function Za(t){var e=t==null?0:t.length;return e?Mi(t,1):[]}function Ya(t){var e=t==null?0:t.length;return e?Mi(t,D):[]}function Ja(t,e){var r=t==null?0:t.length;if(!r){return[]}e=e===o?1:Zc(e);return Mi(t,e)}function Qa(t){var e=-1,r=t==null?0:t.length,n={};while(++e<r){var i=t[e];n[i[0]]=i[1]}return n}function Ka(t){return t&&t.length?t[0]:o}function $a(t,e,r){var n=t==null?0:t.length;if(!n){return-1}var i=r==null?0:Zc(r);if(i<0){i=Be(n+i,0)}return kr(t,e,i)}function tu(t){var e=t==null?0:t.length;return e?Mo(t,0,-1):[]}var eu=xo(function(t){var e=Pr(t,qo);return e.length&&e[0]===t[0]?Ui(e):[]});var ru=xo(function(t){var e=ou(t),r=Pr(t,qo);if(e===ou(r)){e=o}else{r.pop()}return r.length&&r[0]===t[0]?Ui(r,Vs(e,2)):[]});var nu=xo(function(t){var e=ou(t),r=Pr(t,qo);e=typeof e=="function"?e:o;if(e){r.pop()}return r.length&&r[0]===t[0]?Ui(r,o,e):[]});function iu(t,e){return t==null?"":je.call(t,e)}function ou(t){var e=t==null?0:t.length;return e?t[e-1]:o}function su(t,e,r){var n=t==null?0:t.length;if(!n){return-1}var i=n;if(r!==o){i=Zc(r);i=i<0?Be(n+i,0):Ue(i,n-1)}return e===e?yn(t,e,i):Dr(t,Gr,i,true)}function au(t,e){return t&&t.length?co(t,Zc(e)):o}var uu=xo(lu);function lu(t,e){return t&&t.length&&e&&e.length?vo(t,e):t}function cu(t,e,r){return t&&t.length&&e&&e.length?vo(t,e,Vs(r,2)):t}function hu(t,e,r){return t&&t.length&&e&&e.length?vo(t,e,o,r):t}var fu=js(function(t,e){var r=t==null?0:t.length,n=yi(t,e);go(t,Pr(e,function(t){return sa(t,r)?+t:t}).sort(ts));return n});function pu(t,e){var r=[];if(!(t&&t.length)){return r}var n=-1,i=[],o=t.length;e=Vs(e,3);while(++n<o){var s=t[n];if(e(s,n,t)){r.push(s);i.push(n)}}go(t,i);return r}function du(t){return t==null?t:Xe.call(t)}function yu(t,e,r){var n=t==null?0:t.length;if(!n){return[]}if(r&&typeof r!="number"&&aa(t,e,r)){e=0;r=n}else{e=e==null?0:Zc(e);r=r===o?n:Zc(r)}return Mo(t,e,r)}function vu(t,e){return No(t,e)}function gu(t,e,r){return To(t,e,Vs(r,2))}function mu(t,e){var r=t==null?0:t.length;if(r){var n=No(t,e);if(n<r&&ic(t[n],e)){return n}}return-1}function _u(t,e){return No(t,e,true)}function bu(t,e,r){return To(t,e,Vs(r,2),true)}function xu(t,e){var r=t==null?0:t.length;if(r){var n=No(t,e,true)-1;if(ic(t[n],e)){return n}}return-1}function Su(t){return t&&t.length?Oo(t):[]}function wu(t,e){return t&&t.length?Oo(t,Vs(e,2)):[]}function Cu(t){var e=t==null?0:t.length;return e?Mo(t,1,e):[]}function Iu(t,e,r){if(!(t&&t.length)){return[]}e=r||e===o?1:Zc(e);return Mo(t,0,e<0?0:e)}function Eu(t,e,r){var n=t==null?0:t.length;if(!n){return[]}e=r||e===o?1:Zc(e);e=n-e;return Mo(t,e<0?0:e,n)}function Pu(t,e){return t&&t.length?jo(t,Vs(e,3),false,true):[]}function Mu(t,e){return t&&t.length?jo(t,Vs(e,3)):[]}var Lu=xo(function(t){return Fo(Mi(t,1,hc,true))});var Nu=xo(function(t){var e=ou(t);if(hc(e)){e=o}return Fo(Mi(t,1,hc,true),Vs(e,2))});var Tu=xo(function(t){var e=ou(t);e=typeof e=="function"?e:o;return Fo(Mi(t,1,hc,true),o,e)});function Ou(t){return t&&t.length?Fo(t):[]}function Au(t,e){return t&&t.length?Fo(t,Vs(e,2)):[]}function Ru(t,e){e=typeof e=="function"?e:o;return t&&t.length?Fo(t,o,e):[]}function Fu(t){if(!(t&&t.length)){return[]}var e=0;t=Cr(t,function(t){if(hc(t)){e=Be(t.length,e);return true}});return Hr(e,function(e){return Pr(t,Ur(e))})}function Du(t,e){if(!(t&&t.length)){return[]}var r=Fu(t);if(e==null){return r}return Pr(r,function(t){return _r(e,o,t)})}var ku=xo(function(t,e){return hc(t)?xi(t,e):[]});var ju=xo(function(t){return Bo(Cr(t,hc))});var Gu=xo(function(t){var e=ou(t);if(hc(e)){e=o}return Bo(Cr(t,hc),Vs(e,2))});var Bu=xo(function(t){var e=ou(t);e=typeof e=="function"?e:o;return Bo(Cr(t,hc),o,e)});var Uu=xo(Fu);function qu(t,e){return Uo(t||[],e||[],li)}function zu(t,e){return Uo(t||[],e||[],Co)}var Vu=xo(function(t){var e=t.length,r=e>1?t[e-1]:o;r=typeof r=="function"?(t.pop(),r):o;return Du(t,r)});function Wu(t){var e=xn(t);e.__chain__=true;return e}function Hu(t,e){e(t);return t}function Xu(t,e){return e(t)}var Zu=js(function(t){var e=t.length,r=e?t[0]:0,n=this.__wrapped__,i=function(e){return yi(e,t)};if(e>1||this.__actions__.length||!(n instanceof Pn)||!sa(r)){return this.thru(i)}n=n.slice(r,+r+(e?1:0));n.__actions__.push({func:Xu,args:[i],thisArg:o});return new En(n,this.__chain__).thru(function(t){if(e&&!t.length){t.push(o)}return t})});function Yu(){return Wu(this)}function Ju(){return new En(this.value(),this.__chain__)}function Qu(){if(this.__values__===o){this.__values__=Hc(this.value())}var t=this.__index__>=this.__values__.length,e=t?o:this.__values__[this.__index__++];return{done:t,value:e}}function Ku(){return this}function $u(t){var e,r=this;while(r instanceof In){var n=Ra(r);n.__index__=0;n.__values__=o;if(e){i.__wrapped__=n}else{e=n}var i=n;r=r.__wrapped__}i.__wrapped__=t;return e}function tl(){var t=this.__wrapped__;if(t instanceof Pn){var e=t;if(this.__actions__.length){e=new Pn(this)}e=e.reverse();e.__actions__.push({func:Xu,args:[du],thisArg:o});return new En(e,this.__chain__)}return this.thru(du)}function el(){return Go(this.__wrapped__,this.__actions__)}var rl=us(function(t,e,r){if(he.call(t,r)){++t[r]}else{di(t,r,1)}});function nl(t,e,r){var n=uc(t)?wr:Ci;if(r&&aa(t,e,r)){e=o}return n(t,Vs(e,3))}function il(t,e){var r=uc(t)?Cr:Pi;return r(t,Vs(e,3))}var ol=gs(Ha);var sl=gs(Xa);function al(t,e){return Mi(vl(t,e),1)}function ul(t,e){return Mi(vl(t,e),D)}function ll(t,e,r){r=r===o?1:Zc(r);return Mi(vl(t,e),r)}function cl(t,e){var r=uc(t)?xr:Si;return r(t,Vs(e,3))}function hl(t,e){var r=uc(t)?Sr:wi;return r(t,Vs(e,3))}var fl=us(function(t,e,r){if(he.call(t,r)){t[r].push(e)}else{di(t,r,[e])}});function pl(t,e,r,n){t=cc(t)?t:Uh(t);r=r&&!n?Zc(r):0;var i=t.length;if(r<0){r=Be(i+r,0)}return jc(t)?r<=i&&t.indexOf(e,r)>-1:!!i&&kr(t,e,r)>-1}var dl=xo(function(t,e,n){var i=-1,o=typeof e=="function",s=cc(t)?r(t.length):[];Si(t,function(t){s[++i]=o?_r(e,t,n):zi(t,e,n)});return s});var yl=us(function(t,e,r){di(t,r,e)});function vl(t,e){var r=uc(t)?Pr:oo;return r(t,Vs(e,3))}function gl(t,e,r,n){if(t==null){return[]}if(!uc(e)){e=e==null?[]:[e]}r=n?o:r;if(!uc(r)){r=r==null?[]:[r]}return ho(t,e,r)}var ml=us(function(t,e,r){t[r?0:1].push(e)},function(){return[[],[]]});function _l(t,e,r){var n=uc(t)?Lr:zr,i=arguments.length<3;return n(t,Vs(e,4),r,i,Si)}function bl(t,e,r){var n=uc(t)?Nr:zr,i=arguments.length<3;return n(t,Vs(e,4),r,i,wi)}function xl(t,e){var r=uc(t)?Cr:Pi;return r(t,Ul(Vs(e,3)))}function Sl(t){var e=uc(t)?oi:So;return e(t)}function wl(t,e,r){if(r?aa(t,e,r):e===o){e=1}else{e=Zc(e)}var n=uc(t)?si:wo;return n(t,e)}function Cl(t){var e=uc(t)?ai:Po;return e(t)}function Il(t){if(t==null){return 0}if(cc(t)){return jc(t)?vn(t):t.length}var e=Qs(t);if(e==$||e==st){return t.size}return ro(t).length}function El(t,e,r){var n=uc(t)?Tr:Lo;if(r&&aa(t,e,r)){e=o}return n(t,Vs(e,3))}var Pl=xo(function(t,e){if(t==null){return[]}var r=e.length;if(r>1&&aa(t,e[0],e[1])){e=[]}else if(r>2&&aa(e[0],e[1],e[2])){e=[e[0]]}return ho(t,Mi(e,1),[])});var Ml=Te||function(){return ar.Date.now()};function Ll(t,e){if(typeof e!="function"){throw new oe(l)}t=Zc(t);return function(){if(--t<1){return e.apply(this,arguments)}}}function Nl(t,e,r){e=r?o:e;e=t&&e==null?t.length:e;return Ts(t,E,o,o,o,o,e)}function Tl(t,e){var r;if(typeof e!="function"){throw new oe(l)}t=Zc(t);return function(){if(--t>0){r=e.apply(this,arguments)}if(t<=1){e=o}return r}}var Ol=xo(function(t,e,r){var n=_;if(r.length){var i=hn(r,zs(Ol));n|=C}return Ts(t,n,e,r,i)});var Al=xo(function(t,e,r){var n=_|b;if(r.length){var i=hn(r,zs(Al));n|=C}return Ts(e,n,t,r,i)});function Rl(t,e,r){e=r?o:e;var n=Ts(t,S,o,o,o,o,o,e);n.placeholder=Rl.placeholder;return n}function Fl(t,e,r){e=r?o:e;var n=Ts(t,w,o,o,o,o,o,e);n.placeholder=Fl.placeholder;return n}function Dl(t,e,r){var n,i,s,a,u,c,h=0,f=false,p=false,d=true;if(typeof t!="function"){throw new oe(l)}e=Jc(e)||0;if(Cc(r)){f=!!r.leading;p="maxWait"in r;s=p?Be(Jc(r.maxWait)||0,e):s;d="trailing"in r?!!r.trailing:d}function y(e){var r=n,s=i;n=i=o;h=e;a=t.apply(s,r);return a}function v(t){h=t;u=Ia(_,e);return f?y(t):a}function g(t){var r=t-c,n=t-h,i=e-r;return p?Ue(i,s-n):i}function m(t){var r=t-c,n=t-h;return c===o||r>=e||r<0||p&&n>=s}function _(){var t=Ml();if(m(t)){return b(t)}u=Ia(_,g(t))}function b(t){u=o;if(d&&n){return y(t)}n=i=o;return a}function x(){if(u!==o){Xo(u)}h=0;n=c=i=u=o}function S(){return u===o?a:b(Ml())}function w(){var t=Ml(),r=m(t);n=arguments;i=this;c=t;if(r){if(u===o){return v(c)}if(p){Xo(u);u=Ia(_,e);return y(c)}}if(u===o){u=Ia(_,e)}return a}w.cancel=x;w.flush=S;return w}var kl=xo(function(t,e){return bi(t,1,e)});var jl=xo(function(t,e,r){return bi(t,Jc(e)||0,r)});function Gl(t){return Ts(t,M)}function Bl(t,e){if(typeof t!="function"||e!=null&&typeof e!="function"){throw new oe(l)}var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],o=r.cache;if(o.has(i)){return o.get(i)}var s=t.apply(this,n);r.cache=o.set(i,s)||o;return s};r.cache=new(Bl.Cache||zn);return r}Bl.Cache=zn;function Ul(t){if(typeof t!="function"){throw new oe(l)}return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function ql(t){return Tl(2,t)}var zl=Wo(function(t,e){e=e.length==1&&uc(e[0])?Pr(e[0],Yr(Vs())):Pr(Mi(e,1),Yr(Vs()));var r=e.length;return xo(function(n){var i=-1,o=Ue(n.length,r);while(++i<o){n[i]=e[i].call(this,n[i])}return _r(t,this,n)})});var Vl=xo(function(t,e){var r=hn(e,zs(Vl));return Ts(t,C,o,e,r)});var Wl=xo(function(t,e){var r=hn(e,zs(Wl));return Ts(t,I,o,e,r)});var Hl=js(function(t,e){return Ts(t,P,o,o,o,e)});function Xl(t,e){if(typeof t!="function"){throw new oe(l)}e=e===o?e:Zc(e);return xo(t,e)}function Zl(t,e){if(typeof t!="function"){throw new oe(l)}e=e==null?0:Be(Zc(e),0);return xo(function(r){var n=r[e],i=Ho(r,0,e);if(n){Mr(i,n)}return _r(t,this,i)})}function Yl(t,e,r){var n=true,i=true;if(typeof t!="function"){throw new oe(l)}if(Cc(r)){n="leading"in r?!!r.leading:n;i="trailing"in r?!!r.trailing:i}return Dl(t,e,{leading:n,maxWait:e,trailing:i})}function Jl(t){return Nl(t,1)}function Ql(t,e){return Vl(zo(e),t)}function Kl(){if(!arguments.length){return[]}var t=arguments[0];return uc(t)?t:[t]}function $l(t){return gi(t,v)}function tc(t,e){e=typeof e=="function"?e:o;return gi(t,v,e)}function ec(t){return gi(t,d|v)}function rc(t,e){e=typeof e=="function"?e:o;return gi(t,d|v,e)}function nc(t,e){return e==null||_i(t,e,Sh(e))}function ic(t,e){return t===e||t!==t&&e!==e}var oc=Es(ki);var sc=Es(function(t,e){return t>=e});var ac=Vi(function(){return arguments}())?Vi:function(t){return Ic(t)&&he.call(t,"callee")&&!Ce.call(t,"callee")};var uc=r.isArray;var lc=pr?Yr(pr):Wi;function cc(t){return t!=null&&wc(t.length)&&!xc(t)}function hc(t){return Ic(t)&&cc(t)}function fc(t){return t===true||t===false||Ic(t)&&Di(t)==X}var pc=De||Yf;var dc=dr?Yr(dr):Hi;function yc(t){return Ic(t)&&t.nodeType===1&&!Rc(t)}function vc(t){if(t==null){return true}if(cc(t)&&(uc(t)||typeof t=="string"||typeof t.splice=="function"||pc(t)||Bc(t)||ac(t))){return!t.length}var e=Qs(t);if(e==$||e==st){return!t.size}if(pa(t)){return!ro(t).length}for(var r in t){if(he.call(t,r)){return false}}return true}function gc(t,e){return Xi(t,e)}function mc(t,e,r){r=typeof r=="function"?r:o;var n=r?r(t,e):o;return n===o?Xi(t,e,o,r):!!n}function _c(t){if(!Ic(t)){return false}var e=Di(t);return e==J||e==Y||typeof t.message=="string"&&typeof t.name=="string"&&!Rc(t)}function bc(t){return typeof t=="number"&&ke(t)}function xc(t){if(!Cc(t)){return false}var e=Di(t);return e==Q||e==K||e==H||e==it}function Sc(t){return typeof t=="number"&&t==Zc(t)}function wc(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=k}function Cc(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function Ic(t){return t!=null&&typeof t=="object"}var Ec=yr?Yr(yr):Yi;function Pc(t,e){return t===e||Ji(t,e,Hs(e))}function Mc(t,e,r){r=typeof r=="function"?r:o;return Ji(t,e,Hs(e),r)}function Lc(t){return Ac(t)&&t!=+t}function Nc(t){if(fa(t)){throw new i(u)}return Qi(t)}function Tc(t){return t===null}function Oc(t){return t==null}function Ac(t){return typeof t=="number"||Ic(t)&&Di(t)==tt}function Rc(t){if(!Ic(t)||Di(t)!=rt){return false}var e=Se(t);if(e===null){return true}var r=he.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&ce.call(r)==ye}var Fc=vr?Yr(vr):Ki;function Dc(t){return Sc(t)&&t>=-k&&t<=k}var kc=gr?Yr(gr):$i;function jc(t){return typeof t=="string"||!uc(t)&&Ic(t)&&Di(t)==at}function Gc(t){return typeof t=="symbol"||Ic(t)&&Di(t)==ut}var Bc=mr?Yr(mr):to;function Uc(t){return t===o}function qc(t){return Ic(t)&&Qs(t)==ct}function zc(t){return Ic(t)&&Di(t)==ht}var Vc=Es(io);var Wc=Es(function(t,e){return t<=e});function Hc(t){if(!t){return[]}if(cc(t)){return jc(t)?gn(t):is(t)}if(Pe&&t[Pe]){return un(t[Pe]())}var e=Qs(t),r=e==$?ln:e==st?fn:Uh;return r(t)}function Xc(t){if(!t){return t===0?t:0}t=Jc(t);if(t===D||t===-D){var e=t<0?-1:1;return e*j}return t===t?t:0}function Zc(t){var e=Xc(t),r=e%1;return e===e?r?e-r:e:0}function Yc(t){return t?vi(Zc(t),0,B):0}function Jc(t){if(typeof t=="number"){return t}if(Gc(t)){return G}if(Cc(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Cc(e)?e+"":e}if(typeof t!="string"){return t===0?t:+t}t=Zr(t);var r=Yt.test(t);return r||Qt.test(t)?ir(t.slice(2),r?2:8):Zt.test(t)?G:+t}function Qc(t){return os(t,wh(t))}function Kc(t){return t?vi(Zc(t),-k,k):t===0?t:0}function $c(t){return t==null?"":Ro(t)}var th=ls(function(t,e){if(pa(e)||cc(e)){os(e,Sh(e),t);return}for(var r in e){if(he.call(e,r)){li(t,r,e[r])}}});var eh=ls(function(t,e){os(e,wh(e),t)});var rh=ls(function(t,e,r,n){os(e,wh(e),t,n)});var nh=ls(function(t,e,r,n){os(e,Sh(e),t,n)});var ih=js(yi);function oh(t,e){var r=wn(t);return e==null?r:fi(r,e)}var sh=xo(function(t,e){t=re(t);var r=-1;var n=e.length;var i=n>2?e[2]:o;if(i&&aa(e[0],e[1],i)){n=1}while(++r<n){var s=e[r];var a=wh(s);var u=-1;var l=a.length;while(++u<l){var c=a[u];var h=t[c];if(h===o||ic(h,ue[c])&&!he.call(t,c)){t[c]=s[c]}}}return t});var ah=xo(function(t){t.push(o,As);return _r(Ph,o,t)});function uh(t,e){return Fr(t,Vs(e,3),Ti)}function lh(t,e){return Fr(t,Vs(e,3),Oi)}function ch(t,e){return t==null?t:Li(t,Vs(e,3),wh)}function hh(t,e){return t==null?t:Ni(t,Vs(e,3),wh)}function fh(t,e){return t&&Ti(t,Vs(e,3))}function ph(t,e){return t&&Oi(t,Vs(e,3))}function dh(t){return t==null?[]:Ai(t,Sh(t))}function yh(t){return t==null?[]:Ai(t,wh(t))}function vh(t,e,r){var n=t==null?o:Ri(t,e);return n===o?r:n}function gh(t,e){return t!=null&&ta(t,e,ji)}function mh(t,e){return t!=null&&ta(t,e,Gi)}var _h=bs(function(t,e,r){if(e!=null&&typeof e.toString!="function"){e=de.call(e)}t[e]=r},Pf(Tf));var bh=bs(function(t,e,r){if(e!=null&&typeof e.toString!="function"){e=de.call(e)}if(he.call(t,e)){t[e].push(r)}else{t[e]=[r]}},Vs);var xh=xo(zi);function Sh(t){return cc(t)?ii(t):ro(t)}function wh(t){return cc(t)?ii(t,true):no(t)}function Ch(t,e){var r={};e=Vs(e,3);Ti(t,function(t,n,i){di(r,e(t,n,i),t)});return r}function Ih(t,e){var r={};e=Vs(e,3);Ti(t,function(t,n,i){di(r,n,e(t,n,i))});return r}var Eh=ls(function(t,e,r){uo(t,e,r)});var Ph=ls(function(t,e,r,n){uo(t,e,r,n)});var Mh=js(function(t,e){var r={};if(t==null){return r}var n=false;e=Pr(e,function(e){e=Vo(e,t);n||(n=e.length>1);return e});os(t,Bs(t),r);if(n){r=gi(r,d|y|v,Rs)}var i=e.length;while(i--){Do(r,e[i])}return r});function Lh(t,e){return Th(t,Ul(Vs(e)))}var Nh=js(function(t,e){return t==null?{}:fo(t,e)});function Th(t,e){if(t==null){return{}}var r=Pr(Bs(t),function(t){return[t]});e=Vs(e);return po(t,r,function(t,r){return e(t,r[0])})}function Oh(t,e,r){e=Vo(e,t);var n=-1,i=e.length;if(!i){i=1;t=o}while(++n<i){var s=t==null?o:t[Ta(e[n])];if(s===o){n=i;s=r}t=xc(s)?s.call(t):s}return t}function Ah(t,e,r){return t==null?t:Co(t,e,r)}function Rh(t,e,r,n){n=typeof n=="function"?n:o;return t==null?t:Co(t,e,r,n)}var Fh=Ns(Sh);var Dh=Ns(wh);function kh(t,e,r){var n=uc(t),i=n||pc(t)||Bc(t);e=Vs(e,4);if(r==null){var o=t&&t.constructor;if(i){r=n?new o:[]}else if(Cc(t)){r=xc(o)?wn(Se(t)):{}}else{r={}}}(i?xr:Ti)(t,function(t,n,i){return e(r,t,n,i)});return r}function jh(t,e){return t==null?true:Do(t,e)}function Gh(t,e,r){return t==null?t:ko(t,e,zo(r))}function Bh(t,e,r,n){n=typeof n=="function"?n:o;return t==null?t:ko(t,e,zo(r),n)}function Uh(t){return t==null?[]:Jr(t,Sh(t))}function qh(t){return t==null?[]:Jr(t,wh(t))}function zh(t,e,r){if(r===o){r=e;e=o}if(r!==o){r=Jc(r);r=r===r?r:0}if(e!==o){e=Jc(e);e=e===e?e:0}return vi(Jc(t),e,r)}function Vh(t,e,r){e=Xc(e);if(r===o){r=e;e=0}else{r=Xc(r)}t=Jc(t);return Bi(t,e,r)}function Wh(t,e,r){if(r&&typeof r!="boolean"&&aa(t,e,r)){e=r=o}if(r===o){if(typeof e=="boolean"){r=e;e=o}else if(typeof t=="boolean"){r=t;t=o}}if(t===o&&e===o){t=0;e=1}else{t=Xc(t);if(e===o){e=t;t=0}else{e=Xc(e)}}if(t>e){var n=t;t=e;e=n}if(r||t%1||e%1){var i=He();return Ue(t+i*(e-t+nr("1e-"+((i+"").length-1))),e)}return mo(t,e)}var Hh=ds(function(t,e,r){e=e.toLowerCase();return t+(r?Xh(e):e)});function Xh(t){return xf($c(t).toLowerCase())}function Zh(t){t=$c(t);return t&&t.replace($t,en).replace(Ve,"")}function Yh(t,e,r){t=$c(t);e=Ro(e);var n=t.length;r=r===o?n:vi(Zc(r),0,n);var i=r;r-=e.length;return r>=0&&t.slice(r,i)==e}function Jh(t){t=$c(t);return t&&Lt.test(t)?t.replace(Pt,rn):t}function Qh(t){t=$c(t);return t&&kt.test(t)?t.replace(Dt,"\\$&"):t}var Kh=ds(function(t,e,r){return t+(r?"-":"")+e.toLowerCase()});var $h=ds(function(t,e,r){return t+(r?" ":"")+e.toLowerCase()});var tf=ps("toLowerCase");function ef(t,e,r){t=$c(t);e=Zc(e);var n=e?vn(t):0;if(!e||n>=e){return t}var i=(e-n)/2;return ws(Re(i),r)+t+ws(Ae(i),r)}function rf(t,e,r){t=$c(t);e=Zc(e);var n=e?vn(t):0;return e&&n<e?t+ws(e-n,r):t}function nf(t,e,r){t=$c(t);e=Zc(e);var n=e?vn(t):0;return e&&n<e?ws(e-n,r)+t:t}function of(t,e,r){if(r||e==null){e=0}else if(e){e=+e}return We($c(t).replace(jt,""),e||0)}function sf(t,e,r){if(r?aa(t,e,r):e===o){e=1}else{e=Zc(e)}return bo($c(t),e)}function af(){var t=arguments,e=$c(t[0]);return t.length<3?e:e.replace(t[1],t[2])}var uf=ds(function(t,e,r){return t+(r?"_":"")+e.toLowerCase()});function lf(t,e,r){if(r&&typeof r!="number"&&aa(t,e,r)){e=r=o}r=r===o?B:r>>>0;if(!r){return[]}t=$c(t);if(t&&(typeof e=="string"||e!=null&&!Fc(e))){e=Ro(e);if(!e&&sn(t)){return Ho(gn(t),0,r)}}return t.split(e,r)}var cf=ds(function(t,e,r){return t+(r?" ":"")+xf(e)});function hf(t,e,r){t=$c(t);r=r==null?0:vi(Zc(r),0,t.length);e=Ro(e);return t.slice(r,r+e.length)==e}function ff(t,e,r){var n=xn.templateSettings;if(r&&aa(t,e,r)){e=o}t=$c(t);e=rh({},e,n,Os);var s=rh({},e.imports,n.imports,Os),a=Sh(s),u=Jr(s,a);var l,h,f=0,p=e.interpolate||te,d="__p += '";var y=ne((e.escape||te).source+"|"+p.source+"|"+(p===Ot?Ht:te).source+"|"+(e.evaluate||te).source+"|$","g");var v="//# sourceURL="+(he.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Je+"]")+"\n";t.replace(y,function(e,r,n,i,o,s){n||(n=i);d+=t.slice(f,s).replace(ee,nn);if(r){l=true;d+="' +\n__e("+r+") +\n'"}if(o){h=true;d+="';\n"+o+";\n__p += '"}if(n){d+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"}f=s+e.length;return e});d+="';\n";var g=he.call(e,"variable")&&e.variable;if(!g){d="with (obj) {\n"+d+"\n}\n"}else if(Vt.test(g)){throw new i(c)}d=(h?d.replace(wt,""):d).replace(Ct,"$1").replace(It,"$1;");d="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(l?", __e = _.escape":"")+(h?", __j = Array.prototype.join;\n"+"function print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var m=wf(function(){return Gt(a,v+"return "+d).apply(o,u)});m.source=d;if(_c(m)){throw m}return m}function pf(t){return $c(t).toLowerCase()}function df(t){return $c(t).toUpperCase()}function yf(t,e,r){t=$c(t);if(t&&(r||e===o)){return Zr(t)}if(!t||!(e=Ro(e))){return t}var n=gn(t),i=gn(e),s=Kr(n,i),a=$r(n,i)+1;return Ho(n,s,a).join("")}function vf(t,e,r){t=$c(t);if(t&&(r||e===o)){return t.slice(0,mn(t)+1)}if(!t||!(e=Ro(e))){return t}var n=gn(t),i=$r(n,gn(e))+1;return Ho(n,0,i).join("")}function gf(t,e,r){t=$c(t);if(t&&(r||e===o)){return t.replace(jt,"")}if(!t||!(e=Ro(e))){return t}var n=gn(t),i=Kr(n,gn(e));return Ho(n,i).join("")}function mf(t,e){var r=L,n=N;if(Cc(e)){var i="separator"in e?e.separator:i;r="length"in e?Zc(e.length):r;n="omission"in e?Ro(e.omission):n}t=$c(t);var s=t.length;if(sn(t)){var a=gn(t);s=a.length}if(r>=s){return t}var u=r-vn(n);if(u<1){return n}var l=a?Ho(a,0,u).join(""):t.slice(0,u);if(i===o){return l+n}if(a){u+=l.length-u}if(Fc(i)){if(t.slice(u).search(i)){var c,h=l;if(!i.global){i=ne(i.source,$c(Xt.exec(i))+"g")}i.lastIndex=0;while(c=i.exec(h)){var f=c.index}l=l.slice(0,f===o?u:f)}}else if(t.indexOf(Ro(i),u)!=u){var p=l.lastIndexOf(i);if(p>-1){l=l.slice(0,p)}}return l+n}function _f(t){t=$c(t);return t&&Mt.test(t)?t.replace(Et,_n):t}var bf=ds(function(t,e,r){return t+(r?" ":"")+e.toUpperCase()});var xf=ps("toUpperCase");function Sf(t,e,r){t=$c(t);e=r?o:e;if(e===o){return an(t)?Sn(t):Rr(t)}return t.match(e)||[]}var wf=xo(function(t,e){try{return _r(t,o,e)}catch(t){return _c(t)?t:new i(t)}});var Cf=js(function(t,e){xr(e,function(e){e=Ta(e);di(t,e,Ol(t[e],t))});return t});function If(t){var e=t==null?0:t.length,r=Vs();t=!e?[]:Pr(t,function(t){if(typeof t[1]!="function"){throw new oe(l)}return[r(t[0]),t[1]]});return xo(function(r){var n=-1;while(++n<e){var i=t[n];if(_r(i[0],this,r)){return _r(i[1],this,r)}}})}function Ef(t){return mi(gi(t,d))}function Pf(t){return function(){return t}}function Mf(t,e){return t==null||t!==t?e:t}var Lf=ms();var Nf=ms(true);function Tf(t){return t}function Of(t){return eo(typeof t=="function"?t:gi(t,d))}function Af(t){return so(gi(t,d))}function Rf(t,e){return ao(t,gi(e,d))}var Ff=xo(function(t,e){return function(r){return zi(r,t,e)}});var Df=xo(function(t,e){return function(r){return zi(t,r,e)}});function kf(t,e,r){var n=Sh(e),i=Ai(e,n);if(r==null&&!(Cc(e)&&(i.length||!n.length))){r=e;e=t;t=this;i=Ai(e,Sh(e))}var o=!(Cc(r)&&"chain"in r)||!!r.chain,s=xc(t);xr(i,function(r){var n=e[r];t[r]=n;if(s){t.prototype[r]=function(){var e=this.__chain__;if(o||e){var r=t(this.__wrapped__),i=r.__actions__=is(this.__actions__);i.push({func:n,args:arguments,thisArg:t});r.__chain__=e;return r}return n.apply(t,Mr([this.value()],arguments))}}});return t}function jf(){if(ar._===this){ar._=ve}return this}function Gf(){}function Bf(t){t=Zc(t);return xo(function(e){return co(e,t)})}var Uf=Ss(Pr);var qf=Ss(wr);var zf=Ss(Tr);function Vf(t){return ua(t)?Ur(Ta(t)):yo(t)}function Wf(t){return function(e){return t==null?o:Ri(t,e)}}var Hf=Is();var Xf=Is(true);function Zf(){return[]}function Yf(){return false}function Jf(){return{}}function Qf(){return""}function Kf(){return true}function $f(t,e){t=Zc(t);if(t<1||t>k){return[]}var r=B,n=Ue(t,B);e=Vs(e);t-=B;var i=Hr(n,e);while(++r<t){e(r)}return i}function tp(t){if(uc(t)){return Pr(t,Ta)}return Gc(t)?[t]:is(Na($c(t)))}function ep(t){var e=++fe;return $c(t)+e}var rp=xs(function(t,e){return t+e},0);var np=Ms("ceil");var ip=xs(function(t,e){return t/e},1);var op=Ms("floor");function sp(t){return t&&t.length?Ii(t,Tf,ki):o}function ap(t,e){return t&&t.length?Ii(t,Vs(e,2),ki):o}function up(t){return Br(t,Tf)}function lp(t,e){return Br(t,Vs(e,2))}function cp(t){return t&&t.length?Ii(t,Tf,io):o}function hp(t,e){return t&&t.length?Ii(t,Vs(e,2),io):o}var fp=xs(function(t,e){return t*e},1);var pp=Ms("round");var dp=xs(function(t,e){return t-e},0);function yp(t){return t&&t.length?Wr(t,Tf):0}function vp(t,e){return t&&t.length?Wr(t,Vs(e,2)):0}xn.after=Ll;xn.ary=Nl;xn.assign=th;xn.assignIn=eh;xn.assignInWith=rh;xn.assignWith=nh;xn.at=ih;xn.before=Tl;xn.bind=Ol;xn.bindAll=Cf;xn.bindKey=Al;xn.castArray=Kl;xn.chain=Wu;xn.chunk=Fa;xn.compact=Da;xn.concat=ka;xn.cond=If;xn.conforms=Ef;xn.constant=Pf;xn.countBy=rl;xn.create=oh;xn.curry=Rl;xn.curryRight=Fl;xn.debounce=Dl;xn.defaults=sh;xn.defaultsDeep=ah;xn.defer=kl;xn.delay=jl;xn.difference=ja;xn.differenceBy=Ga;xn.differenceWith=Ba;xn.drop=Ua;xn.dropRight=qa;xn.dropRightWhile=za;xn.dropWhile=Va;xn.fill=Wa;xn.filter=il;xn.flatMap=al;xn.flatMapDeep=ul;xn.flatMapDepth=ll;xn.flatten=Za;xn.flattenDeep=Ya;xn.flattenDepth=Ja;xn.flip=Gl;xn.flow=Lf;xn.flowRight=Nf;xn.fromPairs=Qa;xn.functions=dh;xn.functionsIn=yh;xn.groupBy=fl;xn.initial=tu;xn.intersection=eu;xn.intersectionBy=ru;xn.intersectionWith=nu;xn.invert=_h;xn.invertBy=bh;xn.invokeMap=dl;xn.iteratee=Of;xn.keyBy=yl;xn.keys=Sh;xn.keysIn=wh;xn.map=vl;xn.mapKeys=Ch;xn.mapValues=Ih;xn.matches=Af;xn.matchesProperty=Rf;xn.memoize=Bl;xn.merge=Eh;xn.mergeWith=Ph;xn.method=Ff;xn.methodOf=Df;xn.mixin=kf;xn.negate=Ul;xn.nthArg=Bf;xn.omit=Mh;xn.omitBy=Lh;xn.once=ql;xn.orderBy=gl;xn.over=Uf;xn.overArgs=zl;xn.overEvery=qf;xn.overSome=zf;xn.partial=Vl;xn.partialRight=Wl;xn.partition=ml;xn.pick=Nh;xn.pickBy=Th;xn.property=Vf;xn.propertyOf=Wf;xn.pull=uu;xn.pullAll=lu;xn.pullAllBy=cu;xn.pullAllWith=hu;xn.pullAt=fu;xn.range=Hf;xn.rangeRight=Xf;xn.rearg=Hl;xn.reject=xl;xn.remove=pu;xn.rest=Xl;xn.reverse=du;xn.sampleSize=wl;xn.set=Ah;xn.setWith=Rh;xn.shuffle=Cl;xn.slice=yu;xn.sortBy=Pl;xn.sortedUniq=Su;xn.sortedUniqBy=wu;xn.split=lf;xn.spread=Zl;xn.tail=Cu;xn.take=Iu;xn.takeRight=Eu;xn.takeRightWhile=Pu;xn.takeWhile=Mu;xn.tap=Hu;xn.throttle=Yl;xn.thru=Xu;xn.toArray=Hc;xn.toPairs=Fh;xn.toPairsIn=Dh;xn.toPath=tp;xn.toPlainObject=Qc;xn.transform=kh;xn.unary=Jl;xn.union=Lu;xn.unionBy=Nu;xn.unionWith=Tu;xn.uniq=Ou;xn.uniqBy=Au;xn.uniqWith=Ru;xn.unset=jh;xn.unzip=Fu;xn.unzipWith=Du;xn.update=Gh;xn.updateWith=Bh;xn.values=Uh;xn.valuesIn=qh;xn.without=ku;xn.words=Sf;xn.wrap=Ql;xn.xor=ju;xn.xorBy=Gu;xn.xorWith=Bu;xn.zip=Uu;xn.zipObject=qu;xn.zipObjectDeep=zu;xn.zipWith=Vu;xn.entries=Fh;xn.entriesIn=Dh;xn.extend=eh;xn.extendWith=rh;kf(xn,xn);xn.add=rp;xn.attempt=wf;xn.camelCase=Hh;xn.capitalize=Xh;xn.ceil=np;xn.clamp=zh;xn.clone=$l;xn.cloneDeep=ec;xn.cloneDeepWith=rc;xn.cloneWith=tc;xn.conformsTo=nc;xn.deburr=Zh;xn.defaultTo=Mf;xn.divide=ip;xn.endsWith=Yh;xn.eq=ic;xn.escape=Jh;xn.escapeRegExp=Qh;xn.every=nl;xn.find=ol;xn.findIndex=Ha;xn.findKey=uh;xn.findLast=sl;xn.findLastIndex=Xa;xn.findLastKey=lh;xn.floor=op;xn.forEach=cl;xn.forEachRight=hl;xn.forIn=ch;xn.forInRight=hh;xn.forOwn=fh;xn.forOwnRight=ph;xn.get=vh;xn.gt=oc;xn.gte=sc;xn.has=gh;xn.hasIn=mh;xn.head=Ka;xn.identity=Tf;xn.includes=pl;xn.indexOf=$a;xn.inRange=Vh;xn.invoke=xh;xn.isArguments=ac;xn.isArray=uc;xn.isArrayBuffer=lc;xn.isArrayLike=cc;xn.isArrayLikeObject=hc;xn.isBoolean=fc;xn.isBuffer=pc;xn.isDate=dc;xn.isElement=yc;xn.isEmpty=vc;xn.isEqual=gc;xn.isEqualWith=mc;xn.isError=_c;xn.isFinite=bc;xn.isFunction=xc;xn.isInteger=Sc;xn.isLength=wc;xn.isMap=Ec;xn.isMatch=Pc;xn.isMatchWith=Mc;xn.isNaN=Lc;xn.isNative=Nc;xn.isNil=Oc;xn.isNull=Tc;xn.isNumber=Ac;xn.isObject=Cc;xn.isObjectLike=Ic;xn.isPlainObject=Rc;xn.isRegExp=Fc;xn.isSafeInteger=Dc;xn.isSet=kc;xn.isString=jc;xn.isSymbol=Gc;xn.isTypedArray=Bc;xn.isUndefined=Uc;xn.isWeakMap=qc;xn.isWeakSet=zc;xn.join=iu;xn.kebabCase=Kh;xn.last=ou;xn.lastIndexOf=su;xn.lowerCase=$h;xn.lowerFirst=tf;xn.lt=Vc;xn.lte=Wc;xn.max=sp;xn.maxBy=ap;xn.mean=up;xn.meanBy=lp;xn.min=cp;xn.minBy=hp;xn.stubArray=Zf;xn.stubFalse=Yf;xn.stubObject=Jf;xn.stubString=Qf;xn.stubTrue=Kf;xn.multiply=fp;xn.nth=au;xn.noConflict=jf;xn.noop=Gf;xn.now=Ml;xn.pad=ef;xn.padEnd=rf;xn.padStart=nf;xn.parseInt=of;xn.random=Wh;xn.reduce=_l;xn.reduceRight=bl;xn.repeat=sf;xn.replace=af;xn.result=Oh;xn.round=pp;xn.runInContext=t;xn.sample=Sl;xn.size=Il;xn.snakeCase=uf;xn.some=El;xn.sortedIndex=vu;xn.sortedIndexBy=gu;xn.sortedIndexOf=mu;xn.sortedLastIndex=_u;xn.sortedLastIndexBy=bu;xn.sortedLastIndexOf=xu;xn.startCase=cf;xn.startsWith=hf;xn.subtract=dp;xn.sum=yp;xn.sumBy=vp;xn.template=ff;xn.times=$f;xn.toFinite=Xc;xn.toInteger=Zc;xn.toLength=Yc;xn.toLower=pf;xn.toNumber=Jc;xn.toSafeInteger=Kc;xn.toString=$c;xn.toUpper=df;xn.trim=yf;xn.trimEnd=vf;xn.trimStart=gf;xn.truncate=mf;xn.unescape=_f;xn.uniqueId=ep;xn.upperCase=bf;xn.upperFirst=xf;xn.each=cl;xn.eachRight=hl;xn.first=Ka;kf(xn,function(){var t={};Ti(xn,function(e,r){if(!he.call(xn.prototype,r)){t[r]=e}});return t}(),{chain:false});xn.VERSION=s;xr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){xn[t].placeholder=xn});xr(["drop","take"],function(t,e){Pn.prototype[t]=function(r){r=r===o?1:Be(Zc(r),0);var n=this.__filtered__&&!e?new Pn(this):this.clone();if(n.__filtered__){n.__takeCount__=Ue(r,n.__takeCount__)}else{n.__views__.push({size:Ue(r,B),type:t+(n.__dir__<0?"Right":"")})}return n};Pn.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}});xr(["filter","map","takeWhile"],function(t,e){var r=e+1,n=r==A||r==F;Pn.prototype[t]=function(t){var e=this.clone();e.__iteratees__.push({iteratee:Vs(t,3),type:r});e.__filtered__=e.__filtered__||n;return e}});xr(["head","last"],function(t,e){var r="take"+(e?"Right":"");Pn.prototype[t]=function(){return this[r](1).value()[0]}});xr(["initial","tail"],function(t,e){var r="drop"+(e?"":"Right");Pn.prototype[t]=function(){return this.__filtered__?new Pn(this):this[r](1)}});Pn.prototype.compact=function(){return this.filter(Tf)};Pn.prototype.find=function(t){return this.filter(t).head()};Pn.prototype.findLast=function(t){return this.reverse().find(t)};Pn.prototype.invokeMap=xo(function(t,e){if(typeof t=="function"){return new Pn(this)}return this.map(function(r){return zi(r,t,e)})});Pn.prototype.reject=function(t){return this.filter(Ul(Vs(t)))};Pn.prototype.slice=function(t,e){t=Zc(t);var r=this;if(r.__filtered__&&(t>0||e<0)){return new Pn(r)}if(t<0){r=r.takeRight(-t)}else if(t){r=r.drop(t)}if(e!==o){e=Zc(e);r=e<0?r.dropRight(-e):r.take(e-t)}return r};Pn.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()};Pn.prototype.toArray=function(){return this.take(B)};Ti(Pn.prototype,function(t,e){var r=/^(?:filter|find|map|reject)|While$/.test(e),n=/^(?:head|last)$/.test(e),i=xn[n?"take"+(e=="last"?"Right":""):e],s=n||/^find/.test(e);if(!i){return}xn.prototype[e]=function(){var e=this.__wrapped__,a=n?[1]:arguments,u=e instanceof Pn,l=a[0],c=u||uc(e);var h=function(t){var e=i.apply(xn,Mr([t],a));return n&&f?e[0]:e};if(c&&r&&typeof l=="function"&&l.length!=1){u=c=false}var f=this.__chain__,p=!!this.__actions__.length,d=s&&!f,y=u&&!p;if(!s&&c){e=y?e:new Pn(this);var v=t.apply(e,a);v.__actions__.push({func:Xu,args:[h],thisArg:o});return new En(v,f)}if(d&&y){return t.apply(this,a)}v=this.thru(h);return d?n?v.value()[0]:v.value():v}});xr(["pop","push","shift","sort","splice","unshift"],function(t){var e=se[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",n=/^(?:pop|shift)$/.test(t);xn.prototype[t]=function(){var t=arguments;if(n&&!this.__chain__){var i=this.value();return e.apply(uc(i)?i:[],t)}return this[r](function(r){return e.apply(uc(r)?r:[],t)})}});Ti(Pn.prototype,function(t,e){var r=xn[e];if(r){var n=r.name+"";if(!he.call(ur,n)){ur[n]=[]}ur[n].push({name:e,func:r})}});ur[_s(o,b).name]=[{name:"wrapper",func:o}];Pn.prototype.clone=Mn;Pn.prototype.reverse=Ln;Pn.prototype.value=Nn;xn.prototype.at=Zu;xn.prototype.chain=Yu;xn.prototype.commit=Ju;xn.prototype.next=Qu;xn.prototype.plant=$u;xn.prototype.reverse=tl;xn.prototype.toJSON=xn.prototype.valueOf=xn.prototype.value=el;xn.prototype.first=xn.prototype.head;if(Pe){xn.prototype[Pe]=Ku}return xn};var Cn=wn();if(true){ar._=Cn;!(i=function(){return Cn}.call(e,r,e,n),i!==o&&(n.exports=i))}else{}}).call(this)}).call(this,r(77),r(522)(t))},function(t,e,r){t.exports={default:r(495),__esModule:true}},function(t,e,r){"use strict";e.__esModule=true;var n=r(79);var i=o(n);function o(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e){if(!t){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e&&((typeof e==="undefined"?"undefined":(0,i.default)(e))==="object"||typeof e==="function")?e:t}},function(t,e,r){"use strict";e.__esModule=true;var n=r(511);var i=l(n);var o=r(186);var s=l(o);var a=r(79);var u=l(a);function l(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof e==="undefined"?"undefined":(0,u.default)(e)))}t.prototype=(0,s.default)(e&&e.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}});if(e)i.default?(0,i.default)(t,e):t.__proto__=e}},function(t,e,r){"use strict";e.__esModule=true;var n=r(11);var i=a(n);var o=r(553);var s=a(o);function a(t){return t&&t.__esModule?t:{default:t}}e.default=function t(e,r,n){if(e===null)e=Function.prototype;var o=(0,s.default)(e,r);if(o===undefined){var a=(0,i.default)(e);if(a===null){return undefined}else{return t(a,r,n)}}else if("value"in o){return o.value}else{var u=o.get;if(u===undefined){return undefined}return u.call(n)}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.IgsServiceBase=undefined;var n=r(2);var i=g(n);var o=r(1);var s=g(o);var a=r(9);var u=g(a);var l=r(3);var c=g(l);var h=r(227);var f=g(h);var p=r(4);var d=g(p);var y=r(8);var v=r(228);function g(t){return t&&t.__esModule?t:{default:t}}var m=function(t){(0,d.default)(e,t);function e(t,r){(0,s.default)(this,e);r=r||{};var n=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r));n.CLASS_NAME="Zondy.IgsServiceBase";return n}(0,u.default)(e,[{key:"destroy",value:function t(){(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this);var r=this;if(r.events){r.events.un(r.eventListeners);r.events.listeners=null;r.events.destroy();r.events=null;r.eventListeners=null}}},{key:"processAsync",value:function t(e){var r=this;r.request({method:e&&e.method?e.method:"GET",scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed,data:e&&e.data?e.data:null,headers:e&&e.headers?e.headers:null})}},{key:"serviceProcessCompleted",value:function t(e){var r=this;e=(0,y.transformResult)(e);if(e.succeed){r.events&&r.events.triggerEvent("processCompleted",{result:e})}else{r.events&&r.events.triggerEvent("processFailed",{result:e})}}}]);return e}(v.CommonServiceBase);e.IgsServiceBase=m;Zondy.Service.IgsServiceBase=m},function(t,e,r){t.exports={default:r(346),__esModule:true}},function(t,e){var r=t.exports={version:"2.6.12"};if(typeof __e=="number")__e=r},function(t,e,r){(function(t){!function(t,r){true?r(e):undefined}(this,function(e){"use strict";var r=6371008.8,n={centimeters:637100880,centimetres:637100880,degrees:57.22891354143274,feet:20902260.511392,inches:39.37*r,kilometers:6371.0088,kilometres:6371.0088,meters:r,metres:r,miles:3958.761333810546,millimeters:6371008800,millimetres:6371008800,nauticalmiles:r/1852,radians:1,yards:6967335.223679999},i={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/r,yards:1.0936133},o={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:3.86e-7,millimeters:1e6,millimetres:1e6,yards:1.195990046};function s(t,e,r){void 0===r&&(r={});var n={type:"Feature"};return(0===r.id||r.id)&&(n.id=r.id),r.bbox&&(n.bbox=r.bbox),n.properties=e||{},n.geometry=t,n}function a(t,e,r){switch(t){case"Point":return u(e).geometry;case"LineString":return f(e).geometry;case"Polygon":return c(e).geometry;case"MultiPoint":return v(e).geometry;case"MultiLineString":return y(e).geometry;case"MultiPolygon":return g(e).geometry;default:throw new Error(t+" is invalid")}}function u(t,e,r){if(void 0===r&&(r={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!M(t[0])||!M(t[1]))throw new Error("coordinates must contain numbers");return s({type:"Point",coordinates:t},e,r)}function l(t,e,r){return void 0===r&&(r={}),d(t.map(function(t){return u(t,e)}),r)}function c(t,e,r){void 0===r&&(r={});for(var n=0,i=t;n<i.length;n++){var o=i[n];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<o[o.length-1].length;a++)if(o[o.length-1][a]!==o[0][a])throw new Error("First and last Position are not equivalent.")}return s({type:"Polygon",coordinates:t},e,r)}function h(t,e,r){return void 0===r&&(r={}),d(t.map(function(t){return c(t,e)}),r)}function f(t,e,r){if(void 0===r&&(r={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return s({type:"LineString",coordinates:t},e,r)}function p(t,e,r){return void 0===r&&(r={}),d(t.map(function(t){return f(t,e)}),r)}function d(t,e){void 0===e&&(e={});var r={type:"FeatureCollection"};return e.id&&(r.id=e.id),e.bbox&&(r.bbox=e.bbox),r.features=t,r}function y(t,e,r){return void 0===r&&(r={}),s({type:"MultiLineString",coordinates:t},e,r)}function v(t,e,r){return void 0===r&&(r={}),s({type:"MultiPoint",coordinates:t},e,r)}function g(t,e,r){return void 0===r&&(r={}),s({type:"MultiPolygon",coordinates:t},e,r)}function m(t,e,r){return void 0===r&&(r={}),s({type:"GeometryCollection",geometries:t},e,r)}function _(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var r=Math.pow(10,e||0);return Math.round(t*r)/r}function b(t,e){void 0===e&&(e="kilometers");var r=n[e];if(!r)throw new Error(e+" units is invalid");return t*r}function x(t,e){void 0===e&&(e="kilometers");var r=n[e];if(!r)throw new Error(e+" units is invalid");return t/r}function S(t,e){return C(x(t,e))}function w(t){var e=t%360;return e<0&&(e+=360),e}function C(t){return 180*(t%(2*Math.PI))/Math.PI}function I(t){return t%360*Math.PI/180}function E(t,e,r){if(void 0===e&&(e="kilometers"),void 0===r&&(r="kilometers"),!(t>=0))throw new Error("length must be a positive number");return b(x(t,e),r)}function P(t,e,r){if(void 0===e&&(e="meters"),void 0===r&&(r="kilometers"),!(t>=0))throw new Error("area must be a positive number");var n=o[e];if(!n)throw new Error("invalid original units");var i=o[r];if(!i)throw new Error("invalid final units");return t/n*i}function M(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function L(t){return!!t&&t.constructor===Object}function N(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(t){if(!M(t))throw new Error("bbox must only contain numbers")})}function T(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}var O=Object.freeze({__proto__:null,earthRadius:r,factors:n,unitsFactors:i,areaFactors:o,feature:s,geometry:a,point:u,points:l,polygon:c,polygons:h,lineString:f,lineStrings:p,featureCollection:d,multiLineString:y,multiPoint:v,multiPolygon:g,geometryCollection:m,round:_,radiansToLength:b,lengthToRadians:x,lengthToDegrees:S,bearingToAzimuth:w,radiansToDegrees:C,degreesToRadians:I,convertLength:E,convertArea:P,isNumber:M,isObject:L,validateBBox:N,validateId:T});function A(t,e,r){if(null!==t)for(var n,i,o,s,a,u,l,c,h=0,f=0,p=t.type,d="FeatureCollection"===p,y="Feature"===p,v=d?t.features.length:1,g=0;g<v;g++){a=(c=!!(l=d?t.features[g].geometry:y?t.geometry:t)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var m=0;m<a;m++){var _=0,b=0;if(null!==(s=c?l.geometries[m]:l)){u=s.coordinates;var x=s.type;switch(h=!r||"Polygon"!==x&&"MultiPolygon"!==x?0:1,x){case null:break;case"Point":if(!1===e(u,f,g,_,b))return!1;f++,_++;break;case"LineString":case"MultiPoint":for(n=0;n<u.length;n++){if(!1===e(u[n],f,g,_,b))return!1;f++,"MultiPoint"===x&&_++}"LineString"===x&&_++;break;case"Polygon":case"MultiLineString":for(n=0;n<u.length;n++){for(i=0;i<u[n].length-h;i++){if(!1===e(u[n][i],f,g,_,b))return!1;f++}"MultiLineString"===x&&_++,"Polygon"===x&&b++}"Polygon"===x&&_++;break;case"MultiPolygon":for(n=0;n<u.length;n++){for(b=0,i=0;i<u[n].length;i++){for(o=0;o<u[n][i].length-h;o++){if(!1===e(u[n][i][o],f,g,_,b))return!1;f++}b++}_++}break;case"GeometryCollection":for(n=0;n<s.geometries.length;n++)if(!1===A(s.geometries[n],e,r))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function R(t,e,r,n){var i=r;return A(t,function(t,n,o,s,a){i=0===n&&void 0===r?t:e(i,t,n,o,s,a)},n),i}function F(t,e){var r;switch(t.type){case"FeatureCollection":for(r=0;r<t.features.length&&!1!==e(t.features[r].properties,r);r++);break;case"Feature":e(t.properties,0)}}function D(t,e,r){var n=r;return F(t,function(t,i){n=0===i&&void 0===r?t:e(n,t,i)}),n}function k(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var r=0;r<t.features.length&&!1!==e(t.features[r],r);r++);}function j(t,e,r){var n=r;return k(t,function(t,i){n=0===i&&void 0===r?t:e(n,t,i)}),n}function G(t){var e=[];return A(t,function(t){e.push(t)}),e}function B(t,e){var r,n,i,o,s,a,u,l,c,h,f=0,p="FeatureCollection"===t.type,d="Feature"===t.type,y=p?t.features.length:1;for(r=0;r<y;r++){for(a=p?t.features[r].geometry:d?t.geometry:t,l=p?t.features[r].properties:d?t.properties:{},c=p?t.features[r].bbox:d?t.bbox:void 0,h=p?t.features[r].id:d?t.id:void 0,s=(u=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,i=0;i<s;i++)if(null!==(o=u?a.geometries[i]:a))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,f,l,c,h))return!1;break;case"GeometryCollection":for(n=0;n<o.geometries.length;n++)if(!1===e(o.geometries[n],f,l,c,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,f,l,c,h))return!1;f++}}function U(t,e,r){var n=r;return B(t,function(t,i,o,s,a){n=0===i&&void 0===r?t:e(n,t,i,o,s,a)}),n}function q(t,e){B(t,function(t,r,n,i,o){var a,u=null===t?null:t.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return!1!==e(s(t,n,{bbox:i,id:o}),r,0)&&void 0}switch(u){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon"}for(var l=0;l<t.coordinates.length;l++){var c=t.coordinates[l];if(!1===e(s({type:a,coordinates:c},n),r,l))return!1}})}function z(t,e,r){var n=r;return q(t,function(t,i,o){n=0===i&&0===o&&void 0===r?t:e(n,t,i,o)}),n}function V(t,e){q(t,function(t,r,n){var i=0;if(t.geometry){var o=t.geometry.type;if("Point"!==o&&"MultiPoint"!==o){var s,a=0,u=0,l=0;return!1!==A(t,function(o,c,h,p,d){if(void 0===s||r>a||p>u||d>l)return s=o,a=r,u=p,l=d,void(i=0);var y=f([s,o],t.properties);if(!1===e(y,r,n,d,i))return!1;i++,s=o})&&void 0}}})}function W(t,e,r){var n=r,i=!1;return V(t,function(t,o,s,a,u){n=!1===i&&void 0===r?t:e(n,t,o,s,a,u),i=!0}),n}function H(t,e){if(!t)throw new Error("geojson is required");q(t,function(t,r,n){if(null!==t.geometry){var i=t.geometry.type,o=t.geometry.coordinates;switch(i){case"LineString":if(!1===e(t,r,n,0,0))return!1;break;case"Polygon":for(var s=0;s<o.length;s++)if(!1===e(f(o[s],t.properties),r,n,s))return!1}}})}function X(t,e,r){var n=r;return H(t,function(t,i,o,s){n=0===i&&void 0===r?t:e(n,t,i,o,s)}),n}function Z(t,e){if(!L(e=e||{}))throw new Error("options is invalid");var r,n=e.featureIndex||0,i=e.multiFeatureIndex||0,o=e.geometryIndex||0,s=e.segmentIndex||0,a=e.properties;switch(t.type){case"FeatureCollection":n<0&&(n=t.features.length+n),a=a||t.features[n].properties,r=t.features[n].geometry;break;case"Feature":a=a||t.properties,r=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=t;break;default:throw new Error("geojson is invalid")}if(null===r)return null;var u=r.coordinates;switch(r.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=u.length+s-1),f([u[s],u[s+1]],a,e);case"Polygon":return o<0&&(o=u.length+o),s<0&&(s=u[o].length+s-1),f([u[o][s],u[o][s+1]],a,e);case"MultiLineString":return i<0&&(i=u.length+i),s<0&&(s=u[i].length+s-1),f([u[i][s],u[i][s+1]],a,e);case"MultiPolygon":return i<0&&(i=u.length+i),o<0&&(o=u[i].length+o),s<0&&(s=u[i][o].length-s-1),f([u[i][o][s],u[i][o][s+1]],a,e)}throw new Error("geojson is invalid")}function Y(t,e){if(!L(e=e||{}))throw new Error("options is invalid");var r,n=e.featureIndex||0,i=e.multiFeatureIndex||0,o=e.geometryIndex||0,s=e.coordIndex||0,a=e.properties;switch(t.type){case"FeatureCollection":n<0&&(n=t.features.length+n),a=a||t.features[n].properties,r=t.features[n].geometry;break;case"Feature":a=a||t.properties,r=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=t;break;default:throw new Error("geojson is invalid")}if(null===r)return null;var l=r.coordinates;switch(r.type){case"Point":return u(l,a,e);case"MultiPoint":return i<0&&(i=l.length+i),u(l[i],a,e);case"LineString":return s<0&&(s=l.length+s),u(l[s],a,e);case"Polygon":return o<0&&(o=l.length+o),s<0&&(s=l[o].length+s),u(l[o][s],a,e);case"MultiLineString":return i<0&&(i=l.length+i),s<0&&(s=l[i].length+s),u(l[i][s],a,e);case"MultiPolygon":return i<0&&(i=l.length+i),o<0&&(o=l[i].length+o),s<0&&(s=l[i][o].length-s),u(l[i][o][s],a,e)}throw new Error("geojson is invalid")}var J=Object.freeze({__proto__:null,coordAll:G,coordEach:A,coordReduce:R,featureEach:k,featureReduce:j,findPoint:Y,findSegment:Z,flattenEach:q,flattenReduce:z,geomEach:B,geomReduce:U,lineEach:H,lineReduce:X,propEach:F,propReduce:D,segmentEach:V,segmentReduce:W});function Q(t){var e=[1/0,1/0,-1/0,-1/0];return A(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}function K(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function $(t){if(Array.isArray(t))return t;if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function tt(t){if(t.length>1&&M(t[0])&&M(t[1]))return!0;if(Array.isArray(t[0])&&t[0].length)return tt(t[0]);throw new Error("coordinates must only contain numbers")}function et(t,e,r){if(!e||!r)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+r+": must be a "+e+", given "+t.type)}function rt(t,e,r){if(!t)throw new Error("No feature passed");if(!r)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+r+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+r+": must be a "+e+", given "+t.geometry.type)}function nt(t,e,r){if(!t)throw new Error("No featureCollection passed");if(!r)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+r+", FeatureCollection required");for(var n=0,i=t.features;n<i.length;n++){var o=i[n];if(!o||"Feature"!==o.type||!o.geometry)throw new Error("Invalid input to "+r+", Feature with geometry required");if(!o.geometry||o.geometry.type!==e)throw new Error("Invalid input to "+r+": must be a "+e+", given "+o.geometry.type)}}function it(t){return"Feature"===t.type?t.geometry:t}function ot(t,e){return"FeatureCollection"===t.type?"FeatureCollection":"GeometryCollection"===t.type?"GeometryCollection":"Feature"===t.type&&null!==t.geometry?t.geometry.type:t.type}Q.default=Q;var st=Object.freeze({__proto__:null,getCoord:K,getCoords:$,containsNumber:tt,geojsonType:et,featureOf:rt,collectionOf:nt,getGeom:it,getType:ot}),at=Object.getOwnPropertySymbols,ut=Object.prototype.hasOwnProperty,lt=Object.prototype.propertyIsEnumerable;
/*
    object-assign
    (c) Sindre Sorhus
    @license MIT
    */function ct(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var ht=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(t){n[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var r,n,i=ct(t),o=1;o<arguments.length;o++){for(var s in r=Object(arguments[o]))ut.call(r,s)&&(i[s]=r[s]);if(at){n=at(r);for(var a=0;a<n.length;a++)lt.call(r,n[a])&&(i[n[a]]=r[n[a]])}}return i},ft={successCallback:null,verbose:!1},pt={};
/**
     * @license GNU Affero General Public License.
     * Copyright (c) 2015, 2015 Ronny Lorenz <ronny@tbi.univie.ac.at>
     * v. 1.2.0
     * https://github.com/RaumZeit/MarchingSquares.js
     *
     * MarchingSquaresJS is free software: you can redistribute it and/or modify
     * it under the terms of the GNU Affero General Public License as published by
     * the Free Software Foundation, either version 3 of the License, or
     * (at your option) any later version.
     *
     * MarchingSquaresJS is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     * GNU Affero General Public License for more details.
     *
     * As additional permission under GNU Affero General Public License version 3
     * section 7, third-party projects (personal or commercial) may distribute,
     * include, or link against UNMODIFIED VERSIONS of MarchingSquaresJS without the
     * requirement that said third-party project for that reason alone becomes
     * subject to any requirement of the GNU Affero General Public License version 3.
     * Any modifications to MarchingSquaresJS, however, must be shared with the public
     * and made available.
     *
     * In summary this:
     * - allows you to use MarchingSquaresJS at no cost
     * - allows you to use MarchingSquaresJS for both personal and commercial purposes
     * - allows you to distribute UNMODIFIED VERSIONS of MarchingSquaresJS under any
     *   license as long as this license notice is included
     * - enables you to keep the source code of your program that uses MarchingSquaresJS
     *   undisclosed
     * - forces you to share any modifications you have made to MarchingSquaresJS,
     *   e.g. bug-fixes
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with MarchingSquaresJS.  If not, see <http://www.gnu.org/licenses/>.
     */function dt(t,e,r){r=r||{};for(var n=Object.keys(ft),i=0;i<n.length;i++){var o=n[i],s=r[o];s=null!=s?s:ft[o],pt[o]=s}pt.verbose&&console.log("MarchingSquaresJS-isoContours: computing isocontour for "+e);var a=function(t){var e=[],r=0,n=1e-7;return t.cells.forEach(function(i,o){i.forEach(function(i,s){if(void 0!==i&&(5!==(p=i).cval&&10!==p.cval)&&!vt(i)){var a=function(t,e,r){var n,i,o=t.length,s=[],a=[0,0,1,1,0,0,0,0,-1,0,1,1,-1,0,-1,0],u=[0,-1,0,0,1,1,1,1,0,-1,0,0,0,-1,0,0],l=["none","left","bottom","left","right","none","bottom","left","top","top","none","top","right","right","bottom","none"],c=["none","bottom","right","right","top","top","top","top","left","bottom","right","right","left","bottom","left","none"],h=t[e][r],f=h.cval,p=l[f],d=mt(h,p);s.push([r+d[0],e+d[1]]),p=c[f],d=mt(h,p),s.push([r+d[0],e+d[1]]),gt(h);var y=r+a[f],v=e+u[f],g=f;for(;y>=0&&v>=0&&v<o&&(y!=r||v!=e)&&void 0!==(h=t[v][y]);){if(0===(f=h.cval)||15===f)return{path:s,info:"mergeable"};p=c[f],n=a[f],i=u[f],5!==f&&10!==f||(5===f?h.flipped?-1===u[g]?(p="left",n=-1,i=0):(p="right",n=1,i=0):-1===a[g]&&(p="bottom",n=0,i=-1):10===f&&(h.flipped?-1===a[g]?(p="top",n=0,i=1):(p="bottom",n=0,i=-1):1===u[g]&&(p="left",n=-1,i=0))),d=mt(h,p),s.push([y+d[0],v+d[1]]),gt(h),y+=n,v+=i,g=f}return{path:s,info:"closed"}}(t.cells,o,s),u=!1;if("mergeable"===a.info)for(var l=a.path[a.path.length-1][0],c=a.path[a.path.length-1][1],h=r-1;h>=0;h--)if(Math.abs(e[h][0][0]-l)<=n&&Math.abs(e[h][0][1]-c)<=n){for(var f=a.path.length-2;f>=0;--f)e[h].unshift(a.path[f]);u=!0;break}u||(e[r++]=a.path)}var p})}),e}(function(t,e){for(var r=t.length-1,n=t[0].length-1,i={rows:r,cols:n,cells:[]},o=0;o<r;++o){i.cells[o]=[];for(var s=0;s<n;++s){var a=0,u=t[o+1][s],l=t[o+1][s+1],c=t[o][s+1],h=t[o][s];if(!(isNaN(u)||isNaN(l)||isNaN(c)||isNaN(h))){a|=u>=e?8:0,a|=l>=e?4:0,a|=c>=e?2:0;var f,p,d,y,v=!1;if(5===(a|=h>=e?1:0)||10===a){var g=(u+l+c+h)/4;5===a&&g<e?(a=10,v=!0):10===a&&g<e&&(a=5,v=!0)}if(0!==a&&15!==a)f=p=d=y=.5,1===a?(d=1-yt(e,u,h),p=1-yt(e,c,h)):2===a?(p=yt(e,h,c),y=1-yt(e,l,c)):3===a?(d=1-yt(e,u,h),y=1-yt(e,l,c)):4===a?(f=yt(e,u,l),y=yt(e,c,l)):5===a?(f=yt(e,u,l),y=yt(e,c,l),p=1-yt(e,c,h),d=1-yt(e,u,h)):6===a?(p=yt(e,h,c),f=yt(e,u,l)):7===a?(d=1-yt(e,u,h),f=yt(e,u,l)):8===a?(d=yt(e,h,u),f=1-yt(e,l,u)):9===a?(p=1-yt(e,c,h),f=1-yt(e,l,u)):10===a?(f=1-yt(e,l,u),y=1-yt(e,l,c),p=yt(e,h,c),d=yt(e,h,u)):11===a?(f=1-yt(e,l,u),y=1-yt(e,l,c)):12===a?(d=yt(e,h,u),y=yt(e,c,l)):13===a?(p=1-yt(e,c,h),y=yt(e,c,l)):14===a?(d=yt(e,h,u),p=yt(e,h,c)):console.log("MarchingSquaresJS-isoContours: Illegal cval detected: "+a),i.cells[o][s]={cval:a,flipped:v,top:f,right:y,bottom:p,left:d}}}}return i}(t,e));return"function"==typeof pt.successCallback&&pt.successCallback(a),a}function yt(t,e,r){return(t-e)/(r-e)}function vt(t){return 0===t.cval||15===t.cval}function gt(t){vt(t)||5===t.cval||10===t.cval||(t.cval=15)}function mt(t,e){return"top"===e?[t.top,1]:"bottom"===e?[t.bottom,0]:"right"===e?[1,t.right]:"left"===e?[0,t.left]:void 0}function _t(t,e){if(!L(e=e||{}))throw new Error("options is invalid");var r=e.zProperty||"elevation",n=e.flip,i=e.flags;nt(t,"Point","input must contain Points");for(var o=function(t,e){var r={};return k(t,function(t){var e=$(t)[1];r[e]||(r[e]=[]),r[e].push(t)}),Object.keys(r).map(function(t){return r[t].sort(function(t,e){return $(t)[0]-$(e)[0]})}).sort(function(t,r){return e?$(t[0])[1]-$(r[0])[1]:$(r[0])[1]-$(t[0])[1]})}(t,n),s=[],a=0;a<o.length;a++){for(var u=o[a],l=[],c=0;c<u.length;c++){var h=u[c];h.properties[r]?l.push(h.properties[r]):l.push(0),!0===i&&(h.properties.matrixPosition=[a,c])}s.push(l)}return s}var bt=St,xt=St;function St(t,e,r,n,i){wt(t,e,r||0,n||t.length-1,i||It)}function wt(t,e,r,n,i){for(;n>r;){if(n-r>600){var o=n-r+1,s=e-r+1,a=Math.log(o),u=.5*Math.exp(2*a/3),l=.5*Math.sqrt(a*u*(o-u)/o)*(s-o/2<0?-1:1);wt(t,e,Math.max(r,Math.floor(e-s*u/o+l)),Math.min(n,Math.floor(e+(o-s)*u/o+l)),i)}var c=t[e],h=r,f=n;for(Ct(t,r,e),i(t[n],c)>0&&Ct(t,r,n);h<f;){for(Ct(t,h,f),h++,f--;i(t[h],c)<0;)h++;for(;i(t[f],c)>0;)f--}0===i(t[r],c)?Ct(t,r,f):Ct(t,++f,n),f<=e&&(r=f+1),e<=f&&(n=f-1)}}function Ct(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function It(t,e){return t<e?-1:t>e?1:0}bt.default=xt;var Et=Mt,Pt=Mt;function Mt(t,e){if(!(this instanceof Mt))return new Mt(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function Lt(t,e,r){if(!r)return e.indexOf(t);for(var n=0;n<e.length;n++)if(r(t,e[n]))return n;return-1}function Nt(t,e){Tt(t,0,t.children.length,e,t)}function Tt(t,e,r,n,i){i||(i=Gt(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o,s=e;s<r;s++)o=t.children[s],Ot(i,t.leaf?n(o):o);return i}function Ot(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function At(t,e){return t.minX-e.minX}function Rt(t,e){return t.minY-e.minY}function Ft(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function Dt(t){return t.maxX-t.minX+(t.maxY-t.minY)}function kt(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function jt(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function Gt(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Bt(t,e,r,n,i){for(var o,s=[e,r];s.length;)(r=s.pop())-(e=s.pop())<=n||(o=e+Math.ceil((r-e)/n/2)*n,bt(t,o,e,r,i),s.push(e,o,o,r))}function Ut(t){var e={exports:{}};return t(e,e.exports),e.exports}Mt.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,r=[],n=this.toBBox;if(!jt(t,e))return r;for(var i,o,s,a,u=[];e;){for(i=0,o=e.children.length;i<o;i++)s=e.children[i],jt(t,a=e.leaf?n(s):s)&&(e.leaf?r.push(s):kt(t,a)?this._all(s,r):u.push(s));e=u.pop()}return r},collides:function(t){var e=this.data,r=this.toBBox;if(!jt(t,e))return!1;for(var n,i,o,s,a=[];e;){for(n=0,i=e.children.length;n<i;n++)if(o=e.children[n],jt(t,s=e.leaf?r(o):o)){if(e.leaf||kt(t,s))return!0;a.push(o)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,r=t.length;e<r;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var i=this.data;this.data=n,n=i}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=Gt([]),this},remove:function(t,e){if(!t)return this;for(var r,n,i,o,s=this.data,a=this.toBBox(t),u=[],l=[];s||u.length;){if(s||(s=u.pop(),n=u[u.length-1],r=l.pop(),o=!0),s.leaf&&-1!==(i=Lt(t,s.children,e)))return s.children.splice(i,1),u.push(s),this._condense(u),this;o||s.leaf||!kt(s,a)?n?(r++,s=n.children[r],o=!1):s=null:(u.push(s),l.push(r),r=0,n=s,s=s.children[0])}return this},toBBox:function(t){return t},compareMinX:At,compareMinY:Rt,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var r=[];t;)t.leaf?e.push.apply(e,t.children):r.push.apply(r,t.children),t=r.pop();return e},_build:function(t,e,r,n){var i,o=r-e+1,s=this._maxEntries;if(o<=s)return Nt(i=Gt(t.slice(e,r+1)),this.toBBox),i;n||(n=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,n-1))),(i=Gt([])).leaf=!1,i.height=n;var a,u,l,c,h=Math.ceil(o/s),f=h*Math.ceil(Math.sqrt(s));for(Bt(t,e,r,f,this.compareMinX),a=e;a<=r;a+=f)for(Bt(t,a,l=Math.min(a+f-1,r),h,this.compareMinY),u=a;u<=l;u+=h)c=Math.min(u+h-1,l),i.children.push(this._build(t,u,c,n-1));return Nt(i,this.toBBox),i},_chooseSubtree:function(t,e,r,n){for(var i,o,s,a,u,l,c,h,f,p;n.push(e),!e.leaf&&n.length-1!==r;){for(c=h=1/0,i=0,o=e.children.length;i<o;i++)u=Ft(s=e.children[i]),f=t,p=s,(l=(Math.max(p.maxX,f.maxX)-Math.min(p.minX,f.minX))*(Math.max(p.maxY,f.maxY)-Math.min(p.minY,f.minY))-u)<h?(h=l,c=u<c?u:c,a=s):l===h&&u<c&&(c=u,a=s);e=a||e.children[0]}return e},_insert:function(t,e,r){var n=this.toBBox,i=r?t:n(t),o=[],s=this._chooseSubtree(i,this.data,e,o);for(s.children.push(t),Ot(s,i);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(i,o,e)},_split:function(t,e){var r=t[e],n=r.children.length,i=this._minEntries;this._chooseSplitAxis(r,i,n);var o=this._chooseSplitIndex(r,i,n),s=Gt(r.children.splice(o,r.children.length-o));s.height=r.height,s.leaf=r.leaf,Nt(r,this.toBBox),Nt(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(r,s)},_splitRoot:function(t,e){this.data=Gt([t,e]),this.data.height=t.height+1,this.data.leaf=!1,Nt(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,r){var n,i,o,s,a,u,l,c,h,f,p,d,y,v;for(u=l=1/0,n=e;n<=r-e;n++)i=Tt(t,0,n,this.toBBox),o=Tt(t,n,r,this.toBBox),h=i,f=o,p=void 0,d=void 0,y=void 0,v=void 0,p=Math.max(h.minX,f.minX),d=Math.max(h.minY,f.minY),y=Math.min(h.maxX,f.maxX),v=Math.min(h.maxY,f.maxY),s=Math.max(0,y-p)*Math.max(0,v-d),a=Ft(i)+Ft(o),s<u?(u=s,c=n,l=a<l?a:l):s===u&&a<l&&(l=a,c=n);return c},_chooseSplitAxis:function(t,e,r){var n=t.leaf?this.compareMinX:At,i=t.leaf?this.compareMinY:Rt;this._allDistMargin(t,e,r,n)<this._allDistMargin(t,e,r,i)&&t.children.sort(n)},_allDistMargin:function(t,e,r,n){t.children.sort(n);var i,o,s=this.toBBox,a=Tt(t,0,e,s),u=Tt(t,r-e,r,s),l=Dt(a)+Dt(u);for(i=e;i<r-e;i++)o=t.children[i],Ot(a,t.leaf?s(o):o),l+=Dt(a);for(i=r-e-1;i>=e;i--)o=t.children[i],Ot(u,t.leaf?s(o):o),l+=Dt(u);return l},_adjustParentBBoxes:function(t,e,r){for(var n=r;n>=0;n--)Ot(e[n],t)},_condense:function(t){for(var e,r=t.length-1;r>=0;r--)0===t[r].children.length?r>0?(e=t[r-1].children).splice(e.indexOf(t[r]),1):this.clear():Nt(t[r],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}},Et.default=Pt;var qt=function(t,e,r){var n=t*e,i=zt*t,o=i-(i-t),s=t-o,a=zt*e,u=a-(a-e),l=e-u,c=s*l-(n-o*u-s*u-o*l);if(r)return r[0]=c,r[1]=n,r;return[c,n]},zt=+(Math.pow(2,27)+1);var Vt=function(t,e){var r=0|t.length,n=0|e.length;if(1===r&&1===n)return function(t,e){var r=t+e,n=r-t,i=t-(r-n)+(e-n);if(i)return[i,r];return[r]}(t[0],e[0]);var i,o,s=new Array(r+n),a=0,u=0,l=0,c=Math.abs,h=t[u],f=c(h),p=e[l],d=c(p);f<d?(o=h,(u+=1)<r&&(h=t[u],f=c(h))):(o=p,(l+=1)<n&&(p=e[l],d=c(p)));u<r&&f<d||l>=n?(i=h,(u+=1)<r&&(h=t[u],f=c(h))):(i=p,(l+=1)<n&&(p=e[l],d=c(p)));var y,v,g=i+o,m=g-i,_=o-m,b=_,x=g;for(;u<r&&l<n;)f<d?(i=h,(u+=1)<r&&(h=t[u],f=c(h))):(i=p,(l+=1)<n&&(p=e[l],d=c(p))),(_=(o=b)-(m=(g=i+o)-i))&&(s[a++]=_),b=x-((y=x+g)-(v=y-x))+(g-v),x=y;for(;u<r;)(_=(o=b)-(m=(g=(i=h)+o)-i))&&(s[a++]=_),b=x-((y=x+g)-(v=y-x))+(g-v),x=y,(u+=1)<r&&(h=t[u]);for(;l<n;)(_=(o=b)-(m=(g=(i=p)+o)-i))&&(s[a++]=_),b=x-((y=x+g)-(v=y-x))+(g-v),x=y,(l+=1)<n&&(p=e[l]);b&&(s[a++]=b);x&&(s[a++]=x);a||(s[a++]=0);return s.length=a,s};var Wt=function(t,e,r){var n=t+e,i=n-t,o=e-i,s=t-(n-i);if(r)return r[0]=s+o,r[1]=n,r;return[s+o,n]};var Ht=function(t,e){var r=t.length;if(1===r){var n=qt(t[0],e);return n[0]?n:[n[1]]}var i=new Array(2*r),o=[.1,.1],s=[.1,.1],a=0;qt(t[0],e,o),o[0]&&(i[a++]=o[0]);for(var u=1;u<r;++u){qt(t[u],e,s);var l=o[1];Wt(l,s[0],o),o[0]&&(i[a++]=o[0]);var c=s[1],h=o[1],f=c+h,p=h-(f-c);o[1]=f,p&&(i[a++]=p)}o[1]&&(i[a++]=o[1]);0===a&&(i[a++]=0);return i.length=a,i};var Xt=function(t,e){var r=0|t.length,n=0|e.length;if(1===r&&1===n)return function(t,e){var r=t+e,n=r-t,i=t-(r-n)+(e-n);if(i)return[i,r];return[r]}(t[0],-e[0]);var i,o,s=new Array(r+n),a=0,u=0,l=0,c=Math.abs,h=t[u],f=c(h),p=-e[l],d=c(p);f<d?(o=h,(u+=1)<r&&(h=t[u],f=c(h))):(o=p,(l+=1)<n&&(p=-e[l],d=c(p)));u<r&&f<d||l>=n?(i=h,(u+=1)<r&&(h=t[u],f=c(h))):(i=p,(l+=1)<n&&(p=-e[l],d=c(p)));var y,v,g=i+o,m=g-i,_=o-m,b=_,x=g;for(;u<r&&l<n;)f<d?(i=h,(u+=1)<r&&(h=t[u],f=c(h))):(i=p,(l+=1)<n&&(p=-e[l],d=c(p))),(_=(o=b)-(m=(g=i+o)-i))&&(s[a++]=_),b=x-((y=x+g)-(v=y-x))+(g-v),x=y;for(;u<r;)(_=(o=b)-(m=(g=(i=h)+o)-i))&&(s[a++]=_),b=x-((y=x+g)-(v=y-x))+(g-v),x=y,(u+=1)<r&&(h=t[u]);for(;l<n;)(_=(o=b)-(m=(g=(i=p)+o)-i))&&(s[a++]=_),b=x-((y=x+g)-(v=y-x))+(g-v),x=y,(l+=1)<n&&(p=-e[l]);b&&(s[a++]=b);x&&(s[a++]=x);a||(s[a++]=0);return s.length=a,s};var Zt=Ut(function(t){function e(t,e){for(var r=new Array(t.length-1),n=1;n<t.length;++n)for(var i=r[n-1]=new Array(t.length-1),o=0,s=0;o<t.length;++o)o!==e&&(i[s++]=t[n][o]);return r}function r(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",r(t.slice(0,e)),",",r(t.slice(e)),")"].join("")}function n(t){if(2===t.length)return[["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("")];for(var i=[],o=0;o<t.length;++o)i.push(["scale(",r(n(e(t,o))),",",(s=o,1&s?"-":""),t[0][o],")"].join(""));return i;var s}function i(t){for(var i=[],o=[],s=function(t){for(var e=new Array(t),r=0;r<t;++r){e[r]=new Array(t);for(var n=0;n<t;++n)e[r][n]=["m",n,"[",t-r-1,"]"].join("")}return e}(t),a=[],u=0;u<t;++u)0==(1&u)?i.push.apply(i,n(e(s,u))):o.push.apply(o,n(e(s,u))),a.push("m"+u);var l=r(i),c=r(o),h="orientation"+t+"Exact",f=["function ",h,"(",a.join(),"){var p=",l,",n=",c,",d=sub(p,n);return d[d.length-1];};return ",h].join("");return new Function("sum","prod","scale","sub",f)(Vt,qt,Ht,Xt)}var o=i(3),s=i(4),a=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,r){var n,i=(t[1]-r[1])*(e[0]-r[0]),s=(t[0]-r[0])*(e[1]-r[1]),a=i-s;if(i>0){if(s<=0)return a;n=i+s}else{if(!(i<0))return a;if(s>=0)return a;n=-(i+s)}var u=3.3306690738754716e-16*n;return a>=u||a<=-u?a:o(t,e,r)},function(t,e,r,n){var i=t[0]-n[0],o=e[0]-n[0],a=r[0]-n[0],u=t[1]-n[1],l=e[1]-n[1],c=r[1]-n[1],h=t[2]-n[2],f=e[2]-n[2],p=r[2]-n[2],d=o*c,y=a*l,v=a*u,g=i*c,m=i*l,_=o*u,b=h*(d-y)+f*(v-g)+p*(m-_),x=7.771561172376103e-16*((Math.abs(d)+Math.abs(y))*Math.abs(h)+(Math.abs(v)+Math.abs(g))*Math.abs(f)+(Math.abs(m)+Math.abs(_))*Math.abs(p));return b>x||-b>x?b:s(t,e,r,n)}];function u(t){var e=a[t.length];return e||(e=a[t.length]=i(t.length)),e.apply(void 0,t)}!function(){for(;a.length<=5;)a.push(i(a.length));for(var e=[],r=["slow"],n=0;n<=5;++n)e.push("a"+n),r.push("o"+n);var o=["function getOrientation(",e.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(n=2;n<=5;++n)o.push("case ",n,":return o",n,"(",e.slice(0,n).join(),");");o.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),r.push(o.join(""));var s=Function.apply(void 0,r);for(t.exports=s.apply(void 0,[u].concat(a)),n=0;n<=5;++n)t.exports[n]=a[n]}()}),Yt=function(t){var e=t.length;if(e<3){for(var r=new Array(e),n=0;n<e;++n)r[n]=n;return 2===e&&t[0][0]===t[1][0]&&t[0][1]===t[1][1]?[0]:r}var i=new Array(e);for(n=0;n<e;++n)i[n]=n;i.sort(function(e,r){var n=t[e][0]-t[r][0];return n||t[e][1]-t[r][1]});var o=[i[0],i[1]],s=[i[0],i[1]];for(n=2;n<e;++n){for(var a=i[n],u=t[a],l=o.length;l>1&&Jt(t[o[l-2]],t[o[l-1]],u)<=0;)l-=1,o.pop();for(o.push(a),l=s.length;l>1&&Jt(t[s[l-2]],t[s[l-1]],u)>=0;)l-=1,s.pop();s.push(a)}r=new Array(s.length+o.length-2);for(var c=0,h=(n=0,o.length);n<h;++n)r[c++]=o[n];for(var f=s.length-2;f>0;--f)r[c++]=s[f];return r},Jt=Zt[3];var Qt=$t,Kt=$t;function $t(t,e){if(!(this instanceof $t))return new $t(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||te,this.length>0)for(var r=(this.length>>1)-1;r>=0;r--)this._down(r)}function te(t,e){return t<e?-1:t>e?1:0}$t.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,r=this.compare,n=e[t];t>0;){var i=t-1>>1,o=e[i];if(r(n,o)>=0)break;e[t]=o,t=i}e[t]=n},_down:function(t){for(var e=this.data,r=this.compare,n=this.length>>1,i=e[t];t<n;){var o=1+(t<<1),s=o+1,a=e[o];if(s<this.length&&r(e[s],a)<0&&(o=s,a=e[s]),r(a,i)>=0)break;e[t]=a,t=o}e[t]=i}},Qt.default=Kt;var ee=function(t,e){for(var r=t[0],n=t[1],i=!1,o=0,s=e.length-1;o<e.length;s=o++){var a=e[o][0],u=e[o][1],l=e[s][0],c=e[s][1];u>n!=c>n&&r<(l-a)*(n-u)/(c-u)+a&&(i=!i)}return i},re=Zt[3],ne=oe,ie=oe;function oe(t,e,r){e=Math.max(0,void 0===e?2:e),r=r||0;for(var n,i=function(t){for(var e=t[0],r=t[0],n=t[0],i=t[0],o=0;o<t.length;o++){var s=t[o];s[0]<e[0]&&(e=s),s[0]>n[0]&&(n=s),s[1]<r[1]&&(r=s),s[1]>i[1]&&(i=s)}var a=[e,r,n,i],u=a.slice();for(o=0;o<t.length;o++)ee(t[o],a)||u.push(t[o]);var l=Yt(u),c=[];for(o=0;o<l.length;o++)c.push(u[l[o]]);return c}(t),o=Et(16,["[0]","[1]","[0]","[1]"]).load(t),s=[],a=0;a<i.length;a++){var u=i[a];o.remove(u),n=fe(u,n),s.push(n)}var l=Et(16);for(a=0;a<s.length;a++)l.insert(he(s[a]));for(var c=e*e,h=r*r;s.length;){var f=s.shift(),p=f.p,d=f.next.p,y=pe(p,d);if(!(y<h)){var v=y/c;(u=se(o,f.prev.p,p,d,f.next.next.p,v,l))&&Math.min(pe(u,p),pe(u,d))<=v&&(s.push(f),s.push(fe(u,f)),o.remove(u),l.remove(f),l.insert(he(f)),l.insert(he(f.next)))}}f=n;var g=[];do{g.push(f.p),f=f.next}while(f!==n);return g.push(f.p),g}function se(t,e,r,n,i,o,s){for(var a=new Qt(null,ae),u=t.data;u;){for(var l=0;l<u.children.length;l++){var c=u.children[l],h=u.leaf?de(c,r,n):ue(r,n,c);h>o||a.push({node:c,dist:h})}for(;a.length&&!a.peek().node.children;){var f=a.pop(),p=f.node,d=de(p,e,r),y=de(p,n,i);if(f.dist<d&&f.dist<y&&ce(r,p,s)&&ce(n,p,s))return p}(u=a.pop())&&(u=u.node)}return null}function ae(t,e){return t.dist-e.dist}function ue(t,e,r){if(le(t,r)||le(e,r))return 0;var n=ye(t[0],t[1],e[0],e[1],r.minX,r.minY,r.maxX,r.minY);if(0===n)return 0;var i=ye(t[0],t[1],e[0],e[1],r.minX,r.minY,r.minX,r.maxY);if(0===i)return 0;var o=ye(t[0],t[1],e[0],e[1],r.maxX,r.minY,r.maxX,r.maxY);if(0===o)return 0;var s=ye(t[0],t[1],e[0],e[1],r.minX,r.maxY,r.maxX,r.maxY);return 0===s?0:Math.min(n,i,o,s)}function le(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function ce(t,e,r){for(var n,i,o,s,a=Math.min(t[0],e[0]),u=Math.min(t[1],e[1]),l=Math.max(t[0],e[0]),c=Math.max(t[1],e[1]),h=r.search({minX:a,minY:u,maxX:l,maxY:c}),f=0;f<h.length;f++)if(n=h[f].p,i=h[f].next.p,o=t,n!==(s=e)&&i!==o&&re(n,i,o)>0!=re(n,i,s)>0&&re(o,s,n)>0!=re(o,s,i)>0)return!1;return!0}function he(t){var e=t.p,r=t.next.p;return t.minX=Math.min(e[0],r[0]),t.minY=Math.min(e[1],r[1]),t.maxX=Math.max(e[0],r[0]),t.maxY=Math.max(e[1],r[1]),t}function fe(t,e){var r={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(r.next=e.next,r.prev=e,e.next.prev=r,e.next=r):(r.prev=r,r.next=r),r}function pe(t,e){var r=t[0]-e[0],n=t[1]-e[1];return r*r+n*n}function de(t,e,r){var n=e[0],i=e[1],o=r[0]-n,s=r[1]-i;if(0!==o||0!==s){var a=((t[0]-n)*o+(t[1]-i)*s)/(o*o+s*s);a>1?(n=r[0],i=r[1]):a>0&&(n+=o*a,i+=s*a)}return(o=t[0]-n)*o+(s=t[1]-i)*s}function ye(t,e,r,n,i,o,s,a){var u,l,c,h,f=r-t,p=n-e,d=s-i,y=a-o,v=t-i,g=e-o,m=f*f+p*p,_=f*d+p*y,b=d*d+y*y,x=f*v+p*g,S=d*v+y*g,w=m*b-_*_,C=w,I=w;0===w?(l=0,C=1,h=S,I=b):(h=m*S-_*x,(l=_*S-b*x)<0?(l=0,h=S,I=b):l>C&&(l=C,h=S+_,I=b)),h<0?(h=0,-x<0?l=0:-x>m?l=C:(l=-x,C=m)):h>I&&(h=I,-x+_<0?l=0:-x+_>m?l=C:(l=-x+_,C=m));var E=(1-(c=0===h?0:h/I))*i+c*s-((1-(u=0===l?0:l/C))*t+u*r),P=(1-c)*o+c*a-((1-u)*e+u*n);return E*E+P*P}function ve(t,e){void 0===e&&(e={}),e.concavity=e.concavity||1/0;var r=[];if(A(t,function(t){r.push([t[0],t[1]])}),!r.length)return null;var n=ne(r,e.concavity);return n.length>3?c([n]):null}function ge(t,e,r){if(void 0===r&&(r={}),!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var n=K(t),i=it(e),o=i.type,s=e.bbox,a=i.coordinates;if(s&&!1===function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(n,s))return!1;"Polygon"===o&&(a=[a]);for(var u=!1,l=0;l<a.length&&!u;l++)if(me(n,a[l][0],r.ignoreBoundary)){for(var c=!1,h=1;h<a[l].length&&!c;)me(n,a[l][h],!r.ignoreBoundary)&&(c=!0),h++;c||(u=!0)}return u}function me(t,e,r){var n=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var i=0,o=e.length-1;i<e.length;o=i++){var s=e[i][0],a=e[i][1],u=e[o][0],l=e[o][1];if(t[1]*(s-u)+a*(u-t[0])+l*(t[0]-s)==0&&(s-t[0])*(u-t[0])<=0&&(a-t[1])*(l-t[1])<=0)return!r;a>t[1]!=l>t[1]&&t[0]<(u-s)*(t[1]-a)/(l-a)+s&&(n=!n)}return n}function _e(t,e){var r=[];return k(t,function(t){var n=!1;if("Point"===t.geometry.type)B(e,function(e){ge(t,e)&&(n=!0)}),n&&r.push(t);else{if("MultiPoint"!==t.geometry.type)throw new Error("Input geometry must be a Point or MultiPoint");var i=[];B(e,function(e){A(t,function(t){ge(t,e)&&(n=!0,i.push(t))})}),n&&r.push(v(i))}}),d(r)}function be(t,e,r){void 0===r&&(r={});var n=K(t),i=K(e),o=I(i[1]-n[1]),s=I(i[0]-n[0]),a=I(n[1]),u=I(i[1]),l=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(s/2),2)*Math.cos(a)*Math.cos(u);return b(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)),r.units)}function xe(t,e){var r=!1;return d(function(t){if(t.length<3)return[];t.sort(we);var e,r,n,i,o,s,a=t.length-1,u=t[a].x,l=t[0].x,c=t[a].y,h=c,f=1e-12;for(;a--;)t[a].y<c&&(c=t[a].y),t[a].y>h&&(h=t[a].y);var p,d=l-u,y=h-c,v=d>y?d:y,g=.5*(l+u),m=.5*(h+c),_=[new Se({__sentinel:!0,x:g-20*v,y:m-v},{__sentinel:!0,x:g,y:m+20*v},{__sentinel:!0,x:g+20*v,y:m-v})],b=[],x=[];a=t.length;for(;a--;){for(x.length=0,p=_.length;p--;)(d=t[a].x-_[p].x)>0&&d*d>_[p].r?(b.push(_[p]),_.splice(p,1)):d*d+(y=t[a].y-_[p].y)*y>_[p].r||(x.push(_[p].a,_[p].b,_[p].b,_[p].c,_[p].c,_[p].a),_.splice(p,1));for(Ce(x),p=x.length;p;)r=x[--p],e=x[--p],n=t[a],i=r.x-e.x,o=r.y-e.y,s=2*(i*(n.y-r.y)-o*(n.x-r.x)),Math.abs(s)>f&&_.push(new Se(e,r,n))}Array.prototype.push.apply(b,_),a=b.length;for(;a--;)(b[a].a.__sentinel||b[a].b.__sentinel||b[a].c.__sentinel)&&b.splice(a,1);return b}(t.features.map(function(t){var n={x:t.geometry.coordinates[0],y:t.geometry.coordinates[1]};return e?n.z=t.properties[e]:3===t.geometry.coordinates.length&&(r=!0,n.z=t.geometry.coordinates[2]),n})).map(function(t){var e=[t.a.x,t.a.y],n=[t.b.x,t.b.y],i=[t.c.x,t.c.y],o={};return r?(e.push(t.a.z),n.push(t.b.z),i.push(t.c.z)):o={a:t.a.z,b:t.b.z,c:t.c.z},c([[e,n,i,e]],o)}))}ne.default=ie;var Se=function(t,e,r){this.a=t,this.b=e,this.c=r;var n,i,o=e.x-t.x,s=e.y-t.y,a=r.x-t.x,u=r.y-t.y,l=o*(t.x+e.x)+s*(t.y+e.y),c=a*(t.x+r.x)+u*(t.y+r.y),h=2*(o*(r.y-e.y)-s*(r.x-e.x));this.x=(u*l-s*c)/h,this.y=(o*c-a*l)/h,n=this.x-t.x,i=this.y-t.y,this.r=n*n+i*i};function we(t,e){return e.x-t.x}function Ce(t){var e,r,n,i,o,s=t.length;t:for(;s;)for(r=t[--s],e=t[--s],n=s;n;)if(o=t[--n],e===(i=t[--n])&&r===o||e===o&&r===i){t.splice(s,2),t.splice(n,2),s-=2;continue t}}function Ie(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return Ee(t);case"FeatureCollection":return function(t){var e={type:"FeatureCollection"};return Object.keys(t).forEach(function(r){switch(r){case"type":case"features":return;default:e[r]=t[r]}}),e.features=t.features.map(function(t){return Ee(t)}),e}(t);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return Me(t);default:throw new Error("unknown GeoJSON type")}}function Ee(t){var e={type:"Feature"};return Object.keys(t).forEach(function(r){switch(r){case"type":case"properties":case"geometry":return;default:e[r]=t[r]}}),e.properties=Pe(t.properties),e.geometry=Me(t.geometry),e}function Pe(t){var e={};return t?(Object.keys(t).forEach(function(r){var n=t[r];"object"==typeof n?null===n?e[r]=null:Array.isArray(n)?e[r]=n.map(function(t){return t}):e[r]=Pe(n):e[r]=n}),e):e}function Me(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?(e.geometries=t.geometries.map(function(t){return Me(t)}),e):(e.coordinates=Le(t.coordinates),e)}function Le(t){var e=t;return"object"!=typeof e[0]?e.slice():e.map(function(t){return Le(t)})}function Ne(t,e){if(void 0===e&&(e={}),!L(e=e||{}))throw new Error("options is invalid");var r=e.mutate;if("FeatureCollection"!==ot(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==r&&void 0!==r||(t=Ie(t));var n=[],i=X(t,function(t,e){var r=function(t,e){var r,n=t.geometry.coordinates,i=e.geometry.coordinates,o=Te(n[0]),s=Te(n[n.length-1]),a=Te(i[0]),u=Te(i[i.length-1]);if(o===u)r=i.concat(n.slice(1));else if(a===s)r=n.concat(i.slice(1));else if(o===a)r=n.slice(1).reverse().concat(i);else{if(s!==u)return null;r=n.concat(i.reverse().slice(1))}return f(r)}(t,e);return r||(n.push(t),e)});return i&&n.push(i),n.length?1===n.length?n[0]:y(n.map(function(t){return t.coordinates})):null}function Te(t){return t[0].toString()+","+t[1].toString()}function Oe(t){return t}function Ae(t,e){var r=function(t){if(null==t)return Oe;var e,r,n=t.scale[0],i=t.scale[1],o=t.translate[0],s=t.translate[1];return function(t,a){a||(e=r=0);var u=2,l=t.length,c=new Array(l);for(c[0]=(e+=t[0])*n+o,c[1]=(r+=t[1])*i+s;u<l;)c[u]=t[u],++u;return c}}(t.transform),n=t.arcs;function i(t,e){e.length&&e.pop();for(var i=n[t<0?~t:t],o=0,s=i.length;o<s;++o)e.push(r(i[o],o));t<0&&function(t,e){for(var r,n=t.length,i=n-e;i<--n;)r=t[i],t[i++]=t[n],t[n]=r}(e,s)}function o(t){return r(t)}function s(t){for(var e=[],r=0,n=t.length;r<n;++r)i(t[r],e);return e.length<2&&e.push(e[0]),e}function a(t){for(var e=s(t);e.length<4;)e.push(e[0]);return e}function u(t){return t.map(a)}return function t(e){var r,n=e.type;switch(n){case"GeometryCollection":return{type:n,geometries:e.geometries.map(t)};case"Point":r=o(e.coordinates);break;case"MultiPoint":r=e.coordinates.map(o);break;case"LineString":r=s(e.arcs);break;case"MultiLineString":r=e.arcs.map(s);break;case"Polygon":r=u(e.arcs);break;case"MultiPolygon":r=e.arcs.map(u);break;default:return null}return{type:n,coordinates:r}}(e)}function Re(t,e){var r={},n={},i={},o=[],s=-1;function a(t,e){for(var n in t){var i=t[n];delete e[i.start],delete i.start,delete i.end,i.forEach(function(t){r[t<0?~t:t]=1}),o.push(i)}}return e.forEach(function(r,n){var i,o=t.arcs[r<0?~r:r];o.length<3&&!o[1][0]&&!o[1][1]&&(i=e[++s],e[s]=r,e[n]=i)}),e.forEach(function(e){var r,o,s=function(e){var r,n=t.arcs[e<0?~e:e],i=n[0];t.transform?(r=[0,0],n.forEach(function(t){r[0]+=t[0],r[1]+=t[1]})):r=n[n.length-1];return e<0?[r,i]:[i,r]}(e),a=s[0],u=s[1];if(r=i[a])if(delete i[r.end],r.push(e),r.end=u,o=n[u]){delete n[o.start];var l=o===r?r:r.concat(o);n[l.start=r.start]=i[l.end=o.end]=l}else n[r.start]=i[r.end]=r;else if(r=n[u])if(delete n[r.start],r.unshift(e),r.start=a,o=i[a]){delete i[o.end];var c=o===r?r:o.concat(r);n[c.start=o.start]=i[c.end=r.end]=c}else n[r.start]=i[r.end]=r;else n[(r=[e]).start=a]=i[r.end=u]=r}),a(i,n),a(n,i),e.forEach(function(t){r[t<0?~t:t]||o.push([t])}),o}function Fe(t,e){var r={},n=[],i=[];function o(t){t.forEach(function(e){e.forEach(function(e){(r[e=e<0?~e:e]||(r[e]=[])).push(t)})}),n.push(t)}function s(e){return function(t){for(var e,r=-1,n=t.length,i=t[n-1],o=0;++r<n;)e=i,i=t[r],o+=e[0]*i[1]-e[1]*i[0];return Math.abs(o)}(Ae(t,{type:"Polygon",arcs:[e]}).coordinates[0])}return e.forEach(function t(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"Polygon":o(e.arcs);break;case"MultiPolygon":e.arcs.forEach(o)}}),n.forEach(function(t){if(!t._){var e=[],n=[t];for(t._=1,i.push(e);t=n.pop();)e.push(t),t.forEach(function(t){t.forEach(function(t){r[t<0?~t:t].forEach(function(t){t._||(t._=1,n.push(t))})})})}}),n.forEach(function(t){delete t._}),{type:"MultiPolygon",arcs:i.map(function(e){var n,i=[];if(e.forEach(function(t){t.forEach(function(t){t.forEach(function(t){r[t<0?~t:t].length<2&&i.push(t)})})}),(n=(i=Re(t,i)).length)>1)for(var o,a,u=1,l=s(i[0]);u<n;++u)(o=s(i[u]))>l&&(a=i[0],i[0]=i[u],i[u]=a,l=o);return i}).filter(function(t){return t.length>0})}}var De=Object.prototype.hasOwnProperty;function ke(t,e,r,n,i,o){3===arguments.length&&(n=o=Array,i=null);for(var s=new n(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),a=new o(t),u=t-1,l=0;l<t;++l)s[l]=i;function c(n,o){for(var l=e(n)&u,c=s[l],h=0;c!=i;){if(r(c,n))return a[l]=o;if(++h>=t)throw new Error("full hashmap");c=s[l=l+1&u]}return s[l]=n,a[l]=o,o}function h(n,o){for(var l=e(n)&u,c=s[l],h=0;c!=i;){if(r(c,n))return a[l];if(++h>=t)throw new Error("full hashmap");c=s[l=l+1&u]}return s[l]=n,a[l]=o,o}function f(n,o){for(var l=e(n)&u,c=s[l],h=0;c!=i;){if(r(c,n))return a[l];if(++h>=t)break;c=s[l=l+1&u]}return o}function p(){for(var t=[],e=0,r=s.length;e<r;++e){var n=s[e];n!=i&&t.push(n)}return t}return{set:c,maybeSet:h,get:f,keys:p}}function je(t,e){return t[0]===e[0]&&t[1]===e[1]}var Ge=new ArrayBuffer(16),Be=new Float64Array(Ge),Ue=new Uint32Array(Ge);function qe(t){Be[0]=t[0],Be[1]=t[1];var e=Ue[0]^Ue[1];return 2147483647&(e=e<<5^e>>7^Ue[2]^Ue[3])}function ze(t){var e,r,n,i,o=t.coordinates,s=t.lines,a=t.rings,u=function(){for(var t=ke(1.4*o.length,x,S,Int32Array,-1,Int32Array),e=new Int32Array(o.length),r=0,n=o.length;r<n;++r)e[r]=t.maybeSet(r,r);return e}(),l=new Int32Array(o.length),c=new Int32Array(o.length),h=new Int32Array(o.length),f=new Int8Array(o.length),p=0;for(e=0,r=o.length;e<r;++e)l[e]=c[e]=h[e]=-1;for(e=0,r=s.length;e<r;++e){var d=s[e],y=d[0],v=d[1];for(n=u[y],i=u[++y],++p,f[n]=1;++y<=v;)b(e,n,n=i,i=u[y]);++p,f[i]=1}for(e=0,r=o.length;e<r;++e)l[e]=-1;for(e=0,r=a.length;e<r;++e){var g=a[e],m=g[0]+1,_=g[1];for(b(e,u[_-1],n=u[m-1],i=u[m]);++m<=_;)b(e,n,n=i,i=u[m])}function b(t,e,r,n){if(l[r]!==t){l[r]=t;var i=c[r];if(i>=0){var o=h[r];i===e&&o===n||i===n&&o===e||(++p,f[r]=1)}else c[r]=e,h[r]=n}}function x(t){return qe(o[t])}function S(t,e){return je(o[t],o[e])}l=c=h=null;var w,C=function(t,e,r,n,i){3===arguments.length&&(n=Array,i=null);for(var o=new n(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),s=t-1,a=0;a<t;++a)o[a]=i;function u(n){for(var a=e(n)&s,u=o[a],l=0;u!=i;){if(r(u,n))return!0;if(++l>=t)throw new Error("full hashset");u=o[a=a+1&s]}return o[a]=n,!0}function l(n){for(var a=e(n)&s,u=o[a],l=0;u!=i;){if(r(u,n))return!0;if(++l>=t)break;u=o[a=a+1&s]}return!1}function c(){for(var t=[],e=0,r=o.length;e<r;++e){var n=o[e];n!=i&&t.push(n)}return t}return{add:u,has:l,values:c}}(1.4*p,qe,je);for(e=0,r=o.length;e<r;++e)f[w=u[e]]&&C.add(o[w]);return C}function Ve(t,e,r,n){We(t,e,r),We(t,e,e+n),We(t,e+n,r)}function We(t,e,r){for(var n,i=e+(r---e>>1);e<i;++e,--r)n=t[e],t[e]=t[r],t[r]=n}function He(t){var e,r,n={};for(e in t)n[e]=null==(r=t[e])?{type:null}:("FeatureCollection"===r.type?Xe:"Feature"===r.type?Ze:Ye)(r);return n}function Xe(t){var e={type:"GeometryCollection",geometries:t.features.map(Ze)};return null!=t.bbox&&(e.bbox=t.bbox),e}function Ze(t){var e,r=Ye(t.geometry);for(e in null!=t.id&&(r.id=t.id),null!=t.bbox&&(r.bbox=t.bbox),t.properties){r.properties=t.properties;break}return r}function Ye(t){if(null==t)return{type:null};var e="GeometryCollection"===t.type?{type:"GeometryCollection",geometries:t.geometries.map(Ye)}:"Point"===t.type||"MultiPoint"===t.type?{type:t.type,coordinates:t.coordinates}:{type:t.type,arcs:t.coordinates};return null!=t.bbox&&(e.bbox=t.bbox),e}function Je(t,e){var r=function(t){var e=1/0,r=1/0,n=-1/0,i=-1/0;function o(t){null!=t&&De.call(s,t.type)&&s[t.type](t)}var s={GeometryCollection:function(t){t.geometries.forEach(o)},Point:function(t){a(t.coordinates)},MultiPoint:function(t){t.coordinates.forEach(a)},LineString:function(t){u(t.arcs)},MultiLineString:function(t){t.arcs.forEach(u)},Polygon:function(t){t.arcs.forEach(u)},MultiPolygon:function(t){t.arcs.forEach(l)}};function a(t){var o=t[0],s=t[1];o<e&&(e=o),o>n&&(n=o),s<r&&(r=s),s>i&&(i=s)}function u(t){t.forEach(a)}function l(t){t.forEach(u)}for(var c in t)o(t[c]);return n>=e&&i>=r?[e,r,n,i]:void 0}(t=He(t)),n=e>0&&r&&function(t,e,r){var n=e[0],i=e[1],o=e[2],s=e[3],a=o-n?(r-1)/(o-n):1,u=s-i?(r-1)/(s-i):1;function l(t){return[Math.round((t[0]-n)*a),Math.round((t[1]-i)*u)]}function c(t,e){for(var r,o,s,l,c,h=-1,f=0,p=t.length,d=new Array(p);++h<p;)r=t[h],l=Math.round((r[0]-n)*a),c=Math.round((r[1]-i)*u),l===o&&c===s||(d[f++]=[o=l,s=c]);for(d.length=f;f<e;)f=d.push([d[0][0],d[0][1]]);return d}function h(t){return c(t,2)}function f(t){return c(t,4)}function p(t){return t.map(f)}function d(t){null!=t&&De.call(y,t.type)&&y[t.type](t)}var y={GeometryCollection:function(t){t.geometries.forEach(d)},Point:function(t){t.coordinates=l(t.coordinates)},MultiPoint:function(t){t.coordinates=t.coordinates.map(l)},LineString:function(t){t.arcs=h(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(h)},Polygon:function(t){t.arcs=p(t.arcs)},MultiPolygon:function(t){t.arcs=t.arcs.map(p)}};for(var v in t)d(t[v]);return{scale:[1/a,1/u],translate:[n,i]}}(t,r,e),i=function(t){var e,r,n,i,o=t.coordinates,s=t.lines,a=t.rings,u=s.length+a.length;for(delete t.lines,delete t.rings,n=0,i=s.length;n<i;++n)for(e=s[n];e=e.next;)++u;for(n=0,i=a.length;n<i;++n)for(r=a[n];r=r.next;)++u;var l=ke(2*u*1.4,qe,je),c=t.arcs=[];for(n=0,i=s.length;n<i;++n){e=s[n];do{h(e)}while(e=e.next)}for(n=0,i=a.length;n<i;++n)if((r=a[n]).next)do{h(r)}while(r=r.next);else f(r);function h(t){var e,r,n,i,s,a,u,h;if(n=l.get(e=o[t[0]]))for(u=0,h=n.length;u<h;++u)if(p(i=n[u],t))return t[0]=i[0],void(t[1]=i[1]);if(s=l.get(r=o[t[1]]))for(u=0,h=s.length;u<h;++u)if(d(a=s[u],t))return t[1]=a[0],void(t[0]=a[1]);n?n.push(t):l.set(e,[t]),s?s.push(t):l.set(r,[t]),c.push(t)}function f(t){var e,r,n,i,s;if(r=l.get(o[t[0]]))for(i=0,s=r.length;i<s;++i){if(y(n=r[i],t))return t[0]=n[0],void(t[1]=n[1]);if(v(n,t))return t[0]=n[1],void(t[1]=n[0])}if(r=l.get(e=o[t[0]+g(t)]))for(i=0,s=r.length;i<s;++i){if(y(n=r[i],t))return t[0]=n[0],void(t[1]=n[1]);if(v(n,t))return t[0]=n[1],void(t[1]=n[0])}r?r.push(t):l.set(e,[t]),c.push(t)}function p(t,e){var r=t[0],n=e[0],i=t[1];if(r-i!=n-e[1])return!1;for(;r<=i;++r,++n)if(!je(o[r],o[n]))return!1;return!0}function d(t,e){var r=t[0],n=e[0],i=t[1],s=e[1];if(r-i!=n-s)return!1;for(;r<=i;++r,--s)if(!je(o[r],o[s]))return!1;return!0}function y(t,e){var r=t[0],n=e[0],i=t[1]-r;if(i!==e[1]-n)return!1;for(var s=g(t),a=g(e),u=0;u<i;++u)if(!je(o[r+(u+s)%i],o[n+(u+a)%i]))return!1;return!0}function v(t,e){var r=t[0],n=e[0],i=t[1],s=e[1],a=i-r;if(a!==s-n)return!1;for(var u=g(t),l=a-g(e),c=0;c<a;++c)if(!je(o[r+(c+u)%a],o[s-(c+l)%a]))return!1;return!0}function g(t){for(var e=t[0],r=t[1],n=e,i=n,s=o[n];++n<r;){var a=o[n];(a[0]<s[0]||a[0]===s[0]&&a[1]<s[1])&&(i=n,s=a)}return i-e}return t}(function(t){var e,r,n,i=ze(t),o=t.coordinates,s=t.lines,a=t.rings;for(r=0,n=s.length;r<n;++r)for(var u=s[r],l=u[0],c=u[1];++l<c;)i.has(o[l])&&(e={0:l,1:u[1]},u[1]=l,u=u.next=e);for(r=0,n=a.length;r<n;++r)for(var h=a[r],f=h[0],p=f,d=h[1],y=i.has(o[f]);++p<d;)i.has(o[p])&&(y?(e={0:p,1:h[1]},h[1]=p,h=h.next=e):(Ve(o,f,d,d-p),o[d]=o[f],y=!0,p=f));return t}(function(t){var e=-1,r=[],n=[],i=[];function o(t){t&&De.call(s,t.type)&&s[t.type](t)}var s={GeometryCollection:function(t){t.geometries.forEach(o)},LineString:function(t){t.arcs=a(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(a)},Polygon:function(t){t.arcs=t.arcs.map(u)},MultiPolygon:function(t){t.arcs=t.arcs.map(l)}};function a(t){for(var n=0,o=t.length;n<o;++n)i[++e]=t[n];var s={0:e-o+1,1:e};return r.push(s),s}function u(t){for(var r=0,o=t.length;r<o;++r)i[++e]=t[r];var s={0:e-o+1,1:e};return n.push(s),s}function l(t){return t.map(u)}for(var c in t)o(t[c]);return{type:"Topology",coordinates:i,lines:r,rings:n,objects:t}}(t))),o=i.coordinates,s=ke(1.4*i.arcs.length,Qe,Ke);function a(t){t&&De.call(u,t.type)&&u[t.type](t)}t=i.objects,i.bbox=r,i.arcs=i.arcs.map(function(t,e){return s.set(t,e),o.slice(t[0],t[1]+1)}),delete i.coordinates,o=null;var u={GeometryCollection:function(t){t.geometries.forEach(a)},LineString:function(t){t.arcs=l(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(l)},Polygon:function(t){t.arcs=t.arcs.map(l)},MultiPolygon:function(t){t.arcs=t.arcs.map(c)}};function l(t){var e=[];do{var r=s.get(t);e.push(t[0]<t[1]?r:~r)}while(t=t.next);return e}function c(t){return t.map(l)}for(var h in t)a(t[h]);return n&&(i.transform=n,i.arcs=function(t){for(var e=-1,r=t.length;++e<r;){for(var n,i,o=t[e],s=0,a=1,u=o.length,l=o[0],c=l[0],h=l[1];++s<u;)n=(l=o[s])[0],i=l[1],n===c&&i===h||(o[a++]=[n-c,i-h],c=n,h=i);1===a&&(o[a++]=[0,0]),o.length=a}return t}(i.arcs)),i}function Qe(t){var e,r=t[0],n=t[1];return n<r&&(e=r,r=n,n=e),r+31*n}function Ke(t,e){var r,n=t[0],i=t[1],o=e[0],s=e[1];return i<n&&(r=n,n=i,i=r),s<o&&(r=o,o=s,s=r),n===o&&i===s}function $e(t,e){if(void 0===e&&(e={}),"FeatureCollection"!==ot(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==e.mutate&&void 0!==e.mutate||(t=Ie(t));var r=[];q(t,function(t){r.push(t.geometry)});var n=Je({geoms:m(r).geometry});return function(t){return Ae(t,Fe.apply(this,arguments))}(n,n.objects.geoms.geometries)}function tr(t,e){if(void 0===e&&(e={}),!L(e=e||{}))throw new Error("options is invalid");var r=e.mutate;if("FeatureCollection"!==ot(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==r&&void 0!==r||(t=Ie(t));var n=function(t){var e={};q(t,function(t){e[t.geometry.type]=!0});var r=Object.keys(e);if(1===r.length)return r[0];return null}(t);if(!n)throw new Error("geojson must be homogenous");var i=t;switch(n){case"LineString":return Ne(i,e);case"Polygon":return $e(i,e);default:throw new Error(n+" is not supported")}}function er(t,e){void 0===e&&(e={});var r="object"==typeof e?e.mutate:e;if(!t)throw new Error("geojson is required");var n=ot(t),i=[];switch(n){case"LineString":i=rr(t);break;case"MultiLineString":case"Polygon":$(t).forEach(function(t){i.push(rr(t))});break;case"MultiPolygon":$(t).forEach(function(t){var e=[];t.forEach(function(t){e.push(rr(t))}),i.push(e)});break;case"Point":return t;case"MultiPoint":var o={};$(t).forEach(function(t){var e=t.join("-");Object.prototype.hasOwnProperty.call(o,e)||(i.push(t),o[e]=!0)});break;default:throw new Error(n+" geometry not supported")}return t.coordinates?!0===r?(t.coordinates=i,t):{type:n,coordinates:i}:!0===r?(t.geometry.coordinates=i,t):s({type:n,coordinates:i},t.properties,{bbox:t.bbox,id:t.id})}function rr(t){var e=$(t);if(2===e.length&&!nr(e[0],e[1]))return e;var r=[],n=e.length-1,i=r.length;r.push(e[0]);for(var o=1;o<n;o++){var s=r[r.length-1];e[o][0]===s[0]&&e[o][1]===s[1]||(r.push(e[o]),(i=r.length)>2&&ir(r[i-3],r[i-1],r[i-2])&&r.splice(r.length-2,1))}if(r.push(e[e.length-1]),i=r.length,nr(e[0],e[e.length-1])&&i<4)throw new Error("invalid polygon");return ir(r[i-3],r[i-1],r[i-2])&&r.splice(r.length-2,1),r}function nr(t,e){return t[0]===e[0]&&t[1]===e[1]}function ir(t,e,r){var n=r[0],i=r[1],o=t[0],s=t[1],a=e[0],u=e[1],l=a-o,c=u-s;return 0===(n-o)*c-(i-s)*l&&(Math.abs(l)>=Math.abs(c)?l>0?o<=n&&n<=a:a<=n&&n<=o:c>0?s<=i&&i<=u:u<=i&&i<=s)}function or(t,e,r){var n=e.x,i=e.y,o=r.x-n,s=r.y-i;if(0!==o||0!==s){var a=((t.x-n)*o+(t.y-i)*s)/(o*o+s*s);a>1?(n=r.x,i=r.y):a>0&&(n+=o*a,i+=s*a)}return(o=t.x-n)*o+(s=t.y-i)*s}function sr(t,e,r,n,i){for(var o,s=n,a=e+1;a<r;a++){var u=or(t[a],t[e],t[r]);u>s&&(o=a,s=u)}s>n&&(o-e>1&&sr(t,e,o,n,i),i.push(t[o]),r-o>1&&sr(t,o,r,n,i))}function ar(t,e){var r=t.length-1,n=[t[0]];return sr(t,0,r,e,n),n.push(t[r]),n}function ur(t,e,r){if(t.length<=2)return t;var n=void 0!==e?e*e:1;return t=ar(t=r?t:function(t,e){for(var r,n,i,o,s,a=t[0],u=[a],l=1,c=t.length;l<c;l++)r=t[l],i=a,o=void 0,s=void 0,o=(n=r).x-i.x,s=n.y-i.y,o*o+s*s>e&&(u.push(r),a=r);return a!==r&&u.push(r),u}(t,n),n)}function lr(t,e,r){return ur(t.map(function(t){return{x:t[0],y:t[1],z:t[2]}}),e,r).map(function(t){return t.z?[t.x,t.y,t.z]:[t.x,t.y]})}function cr(t,e,r){return t.map(function(t){var n=t.map(function(t){return{x:t[0],y:t[1]}});if(n.length<4)throw new Error("invalid polygon");for(var i=ur(n,e,r).map(function(t){return[t.x,t.y]});!hr(i);)i=ur(n,e-=.01*e,r).map(function(t){return[t.x,t.y]});return i[i.length-1][0]===i[0][0]&&i[i.length-1][1]===i[0][1]||i.push(i[0]),i})}function hr(t){return!(t.length<3)&&!(3===t.length&&t[2][0]===t[0][0]&&t[2][1]===t[0][1])}var fr=function(){function t(t){this.points=t.points||[],this.duration=t.duration||1e4,this.sharpness=t.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=t.stepLength||60,this.length=this.points.length,this.delay=0;for(var e=0;e<this.length;e++)this.points[e].z=this.points[e].z||0;for(e=0;e<this.length-1;e++){var r=this.points[e],n=this.points[e+1];this.centers.push({x:(r.x+n.x)/2,y:(r.y+n.y)/2,z:(r.z+n.z)/2})}this.controls.push([this.points[0],this.points[0]]);for(e=0;e<this.centers.length-1;e++){var i=this.points[e+1].x-(this.centers[e].x+this.centers[e+1].x)/2,o=this.points[e+1].y-(this.centers[e].y+this.centers[e+1].y)/2,s=this.points[e+1].z-(this.centers[e].y+this.centers[e+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e].z+s)},{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e+1].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e+1].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e+1].z+s)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this}return t.prototype.cacheSteps=function(t){var e=[],r=this.pos(0);e.push(0);for(var n=0;n<this.duration;n+=10){var i=this.pos(n);Math.sqrt((i.x-r.x)*(i.x-r.x)+(i.y-r.y)*(i.y-r.y)+(i.z-r.z)*(i.z-r.z))>t&&(e.push(n),r=i)}return e},t.prototype.vector=function(t){var e=this.pos(t+10),r=this.pos(t-10);return{angle:180*Math.atan2(e.y-r.y,e.x-r.x)/3.14,speed:Math.sqrt((r.x-e.x)*(r.x-e.x)+(r.y-e.y)*(r.y-e.y)+(r.z-e.z)*(r.z-e.z))}},t.prototype.pos=function(t){var e=t-this.delay;e<0&&(e=0),e>this.duration&&(e=this.duration-1);var r=e/this.duration;if(r>=1)return this.points[this.length-1];var n=Math.floor((this.points.length-1)*r);return function(t,e,r,n,i){var o=function(t){var e=t*t;return[e*t,3*e*(1-t),3*t*(1-t)*(1-t),(1-t)*(1-t)*(1-t)]}(t);return{x:i.x*o[0]+n.x*o[1]+r.x*o[2]+e.x*o[3],y:i.y*o[0]+n.y*o[1]+r.y*o[2]+e.y*o[3],z:i.z*o[0]+n.z*o[1]+r.z*o[2]+e.z*o[3]}}((this.length-1)*r-n,this.points[n],this.controls[n][1],this.controls[n+1][0],this.points[n+1])},t}();function pr(t,e){void 0===e&&(e={});for(var r=e.resolution||1e4,n=e.sharpness||.85,i=[],o=it(t).coordinates.map(function(t){return{x:t[0],y:t[1]}}),s=new fr({duration:r,points:o,sharpness:n}),a=function(t){var e=s.pos(t);Math.floor(t/100)%2==0&&i.push([e.x,e.y])},u=0;u<s.duration;u+=10)a(u);return a(s.duration),f(i,e.properties)}function dr(t,e){void 0===e&&(e={});var r=Number(t[0]),n=Number(t[1]),i=Number(t[2]),o=Number(t[3]);if(6===t.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var s=[r,n];return c([[s,[i,n],[i,o],[r,o],s]],e.properties,{bbox:t,id:e.id})}function yr(t){return dr(Q(t))}function vr(t){var e=t[0],r=t[1],n=t[2],i=t[3];if(be(t.slice(0,2),[n,r])>=be(t.slice(0,2),[e,i])){var o=(r+i)/2;return[e,o-(n-e)/2,n,o+(n-e)/2]}var s=(e+n)/2;return[s-(i-r)/2,r,s+(i-r)/2,i]}function gr(t,e,r,n){void 0===n&&(n={});var i=K(t),o=I(i[0]),s=I(i[1]),a=I(r),l=x(e,n.units),c=Math.asin(Math.sin(s)*Math.cos(l)+Math.cos(s)*Math.sin(l)*Math.cos(a));return u([C(o+Math.atan2(Math.sin(a)*Math.sin(l)*Math.cos(s),Math.cos(l)-Math.sin(s)*Math.sin(c))),C(c)],n.properties)}function mr(t,e,r){void 0===r&&(r={});for(var n=r.steps||64,i=r.properties?r.properties:!Array.isArray(t)&&"Feature"===t.type&&t.properties?t.properties:{},o=[],s=0;s<n;s++)o.push(gr(t,e,-360*s/n,r).geometry.coordinates);return o.push(o[0]),c([o],i)}function _r(t,e,r){if(void 0===r&&(r={}),!0===r.final)return function(t,e){var r=_r(e,t);return r=(r+180)%360}(t,e);var n=K(t),i=K(e),o=I(n[0]),s=I(i[0]),a=I(n[1]),u=I(i[1]),l=Math.sin(s-o)*Math.cos(u),c=Math.cos(a)*Math.sin(u)-Math.sin(a)*Math.cos(u)*Math.cos(s-o);return C(Math.atan2(l,c))}function br(t,e){void 0===e&&(e={});var r=Q(t);return u([(r[0]+r[2])/2,(r[1]+r[3])/2],e.properties,e)}function xr(t,e){void 0===e&&(e={});var r=0,n=0,i=0;return A(t,function(t){r+=t[0],n+=t[1],i++},!0),u([r/i,n/i],e.properties)}function Sr(t){var e=[];return"FeatureCollection"===t.type?k(t,function(t){A(t,function(r){e.push(u(r,t.properties))})}):A(t,function(r){e.push(u(r,t.properties))}),d(e)}var wr=Ir,Cr=Ir;function Ir(t,e,r){r=r||2;var n,i,o,s,a,u,l,c=e&&e.length,h=c?e[0]*r:t.length,f=Er(t,0,h,r,!0),p=[];if(!f)return p;if(c&&(f=function(t,e,r,n){var i,o,s,a=[];for(i=0,o=e.length;i<o;i++)(s=Er(t,e[i]*n,i<o-1?e[i+1]*n:t.length,n,!1))===s.next&&(s.steiner=!0),a.push(Dr(s));for(a.sort(Ar),i=0;i<a.length;i++)Rr(a[i],r),r=Pr(r,r.next);return r}(t,e,f,r)),t.length>80*r){n=o=t[0],i=s=t[1];for(var d=r;d<h;d+=r)(a=t[d])<n&&(n=a),(u=t[d+1])<i&&(i=u),a>o&&(o=a),u>s&&(s=u);l=0!==(l=Math.max(o-n,s-i))?1/l:0}return Mr(f,p,r,n,i,l),p}function Er(t,e,r,n,i){var o,s;if(i===Xr(t,e,r,n)>0)for(o=e;o<r;o+=n)s=Vr(o,t[o],t[o+1],s);else for(o=r-n;o>=e;o-=n)s=Vr(o,t[o],t[o+1],s);return s&&Br(s,s.next)&&(Wr(s),s=s.next),s}function Pr(t,e){if(!t)return t;e||(e=t);var r,n=t;do{if(r=!1,n.steiner||!Br(n,n.next)&&0!==Gr(n.prev,n,n.next))n=n.next;else{if(Wr(n),(n=e=n.prev)===n.next)break;r=!0}}while(r||n!==e);return e}function Mr(t,e,r,n,i,o,s){if(t){!s&&o&&function(t,e,r,n){var i=t;do{null===i.z&&(i.z=Fr(i.x,i.y,e,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,r,n,i,o,s,a,u,l=1;do{for(r=t,t=null,o=null,s=0;r;){for(s++,n=r,a=0,e=0;e<l&&(a++,n=n.nextZ);e++);for(u=l;a>0||u>0&&n;)0!==a&&(0===u||!n||r.z<=n.z)?(i=r,r=r.nextZ,a--):(i=n,n=n.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;r=n}o.nextZ=null,l*=2}while(s>1)}(i)}(t,n,i,o);for(var a,u,l=t;t.prev!==t.next;)if(a=t.prev,u=t.next,o?Nr(t,n,i,o):Lr(t))e.push(a.i/r),e.push(t.i/r),e.push(u.i/r),Wr(t),t=u.next,l=u.next;else if((t=u)===l){s?1===s?Mr(t=Tr(t,e,r),e,r,n,i,o,2):2===s&&Or(t,e,r,n,i,o):Mr(Pr(t),e,r,n,i,o,1);break}}}function Lr(t){var e=t.prev,r=t,n=t.next;if(Gr(e,r,n)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(kr(e.x,e.y,r.x,r.y,n.x,n.y,i.x,i.y)&&Gr(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function Nr(t,e,r,n){var i=t.prev,o=t,s=t.next;if(Gr(i,o,s)>=0)return!1;for(var a=i.x<o.x?i.x<s.x?i.x:s.x:o.x<s.x?o.x:s.x,u=i.y<o.y?i.y<s.y?i.y:s.y:o.y<s.y?o.y:s.y,l=i.x>o.x?i.x>s.x?i.x:s.x:o.x>s.x?o.x:s.x,c=i.y>o.y?i.y>s.y?i.y:s.y:o.y>s.y?o.y:s.y,h=Fr(a,u,e,r,n),f=Fr(l,c,e,r,n),p=t.prevZ,d=t.nextZ;p&&p.z>=h&&d&&d.z<=f;){if(p!==t.prev&&p!==t.next&&kr(i.x,i.y,o.x,o.y,s.x,s.y,p.x,p.y)&&Gr(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,d!==t.prev&&d!==t.next&&kr(i.x,i.y,o.x,o.y,s.x,s.y,d.x,d.y)&&Gr(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;p&&p.z>=h;){if(p!==t.prev&&p!==t.next&&kr(i.x,i.y,o.x,o.y,s.x,s.y,p.x,p.y)&&Gr(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;d&&d.z<=f;){if(d!==t.prev&&d!==t.next&&kr(i.x,i.y,o.x,o.y,s.x,s.y,d.x,d.y)&&Gr(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function Tr(t,e,r){var n=t;do{var i=n.prev,o=n.next.next;!Br(i,o)&&Ur(i,n,n.next,o)&&qr(i,o)&&qr(o,i)&&(e.push(i.i/r),e.push(n.i/r),e.push(o.i/r),Wr(n),Wr(n.next),n=t=o),n=n.next}while(n!==t);return n}function Or(t,e,r,n,i,o){var s=t;do{for(var a=s.next.next;a!==s.prev;){if(s.i!==a.i&&jr(s,a)){var u=zr(s,a);return s=Pr(s,s.next),u=Pr(u,u.next),Mr(s,e,r,n,i,o),void Mr(u,e,r,n,i,o)}a=a.next}s=s.next}while(s!==t)}function Ar(t,e){return t.x-e.x}function Rr(t,e){if(e=function(t,e){var r,n=e,i=t.x,o=t.y,s=-1/0;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){var a=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(a<=i&&a>s){if(s=a,a===i){if(o===n.y)return n;if(o===n.next.y)return n.next}r=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!r)return null;if(i===s)return r.prev;var u,l=r,c=r.x,h=r.y,f=1/0;n=r.next;for(;n!==l;)i>=n.x&&n.x>=c&&i!==n.x&&kr(o<h?i:s,o,c,h,o<h?s:i,o,n.x,n.y)&&((u=Math.abs(o-n.y)/(i-n.x))<f||u===f&&n.x>r.x)&&qr(n,t)&&(r=n,f=u),n=n.next;return r}(t,e)){var r=zr(e,t);Pr(r,r.next)}}function Fr(t,e,r,n,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Dr(t){var e=t,r=t;do{e.x<r.x&&(r=e),e=e.next}while(e!==t);return r}function kr(t,e,r,n,i,o,s,a){return(i-s)*(e-a)-(t-s)*(o-a)>=0&&(t-s)*(n-a)-(r-s)*(e-a)>=0&&(r-s)*(o-a)-(i-s)*(n-a)>=0}function jr(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&Ur(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}(t,e)&&qr(t,e)&&qr(e,t)&&function(t,e){var r=t,n=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{r.y>o!=r.next.y>o&&r.next.y!==r.y&&i<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==t);return n}(t,e)}function Gr(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function Br(t,e){return t.x===e.x&&t.y===e.y}function Ur(t,e,r,n){return!!(Br(t,e)&&Br(r,n)||Br(t,n)&&Br(r,e))||Gr(t,e,r)>0!=Gr(t,e,n)>0&&Gr(r,n,t)>0!=Gr(r,n,e)>0}function qr(t,e){return Gr(t.prev,t,t.next)<0?Gr(t,e,t.next)>=0&&Gr(t,t.prev,e)>=0:Gr(t,e,t.prev)<0||Gr(t,t.next,e)<0}function zr(t,e){var r=new Hr(t.i,t.x,t.y),n=new Hr(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,r.next=i,i.prev=r,n.next=r,r.prev=n,o.next=n,n.prev=o,n}function Vr(t,e,r,n){var i=new Hr(t,e,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function Wr(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Hr(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Xr(t,e,r,n){for(var i=0,o=e,s=r-n;o<r;o+=n)i+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return i}function Zr(t){var e=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},n=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var s=0;s<e;s++)r.vertices.push(t[i][o][s]);i>0&&(n+=t[i-1].length,r.holes.push(n))}return r}(t),r=wr(e.vertices,e.holes,2),n=[],i=[];r.forEach(function(t,n){var o=r[n];i.push([e.vertices[2*o],e.vertices[2*o+1]])});for(var o=0;o<i.length;o+=3){var s=i.slice(o,o+3);s.push(i[o]),n.push(c([s]))}return n}function Yr(t,e){if(!t)throw new Error("targetPoint is required");if(!e)throw new Error("points is required");var r,n=1/0,i=0;return k(e,function(e,r){var o=be(t,e);o<n&&(i=r,n=o)}),(r=Ie(e.features[i])).properties.featureIndex=i,r.properties.distanceToPoint=n,r}function Jr(t){if(!t)throw new Error("geojson is required");var e=[];return q(t,function(t){!function(t,e){var r=[],n=t.geometry;if(null!==n){switch(n.type){case"Polygon":r=$(n);break;case"LineString":r=[$(n)]}r.forEach(function(r){(function(t,e){var r=[];return t.reduce(function(t,n){var i=f([t,n],e);return i.bbox=function(t,e){var r=t[0],n=t[1],i=e[0],o=e[1];return[r<i?r:i,n<o?n:o,r>i?r:i,n>o?n:o]}(t,n),r.push(i),n}),r})(r,t.properties).forEach(function(t){t.id=e.length,e.push(t)})})}}(t,e)}),d(e)}Ir.deviation=function(t,e,r,n){var i=e&&e.length,o=i?e[0]*r:t.length,s=Math.abs(Xr(t,0,o,r));if(i)for(var a=0,u=e.length;a<u;a++){var l=e[a]*r,c=a<u-1?e[a+1]*r:t.length;s-=Math.abs(Xr(t,l,c,r))}var h=0;for(a=0;a<n.length;a+=3){var f=n[a]*r,p=n[a+1]*r,d=n[a+2]*r;h+=Math.abs((t[f]-t[d])*(t[p+1]-t[f+1])-(t[f]-t[p])*(t[d+1]-t[f+1]))}return 0===s&&0===h?0:Math.abs((h-s)/s)},Ir.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},n=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var s=0;s<e;s++)r.vertices.push(t[i][o][s]);i>0&&(n+=t[i-1].length,r.holes.push(n))}return r},wr.default=Cr;var Qr=Ut(function(t,e){function r(t,e,r){void 0===r&&(r={});var n={type:"Feature"};return(0===r.id||r.id)&&(n.id=r.id),r.bbox&&(n.bbox=r.bbox),n.properties=e||{},n.geometry=t,n}function n(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!p(t[0])||!p(t[1]))throw new Error("coordinates must contain numbers");return r({type:"Point",coordinates:t},e,n)}function i(t,e,n){void 0===n&&(n={});for(var i=0,o=t;i<o.length;i++){var s=o[i];if(s.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<s[s.length-1].length;a++)if(s[s.length-1][a]!==s[0][a])throw new Error("First and last Position are not equivalent.")}return r({type:"Polygon",coordinates:t},e,n)}function o(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return r({type:"LineString",coordinates:t},e,n)}function s(t,e){void 0===e&&(e={});var r={type:"FeatureCollection"};return e.id&&(r.id=e.id),e.bbox&&(r.bbox=e.bbox),r.features=t,r}function a(t,e,n){return void 0===n&&(n={}),r({type:"MultiLineString",coordinates:t},e,n)}function u(t,e,n){return void 0===n&&(n={}),r({type:"MultiPoint",coordinates:t},e,n)}function l(t,e,n){return void 0===n&&(n={}),r({type:"MultiPolygon",coordinates:t},e,n)}function c(t,r){void 0===r&&(r="kilometers");var n=e.factors[r];if(!n)throw new Error(r+" units is invalid");return t*n}function h(t,r){void 0===r&&(r="kilometers");var n=e.factors[r];if(!n)throw new Error(r+" units is invalid");return t/n}function f(t){return 180*(t%(2*Math.PI))/Math.PI}function p(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.earthRadius=6371008.8,e.factors={centimeters:100*e.earthRadius,centimetres:100*e.earthRadius,degrees:e.earthRadius/111325,feet:3.28084*e.earthRadius,inches:39.37*e.earthRadius,kilometers:e.earthRadius/1e3,kilometres:e.earthRadius/1e3,meters:e.earthRadius,metres:e.earthRadius,miles:e.earthRadius/1609.344,millimeters:1e3*e.earthRadius,millimetres:1e3*e.earthRadius,nauticalmiles:e.earthRadius/1852,radians:1,yards:1.0936*e.earthRadius},e.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/e.earthRadius,yards:1.0936133},e.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:3.86e-7,millimeters:1e6,millimetres:1e6,yards:1.195990046},e.feature=r,e.geometry=function(t,e,r){switch(t){case"Point":return n(e).geometry;case"LineString":return o(e).geometry;case"Polygon":return i(e).geometry;case"MultiPoint":return u(e).geometry;case"MultiLineString":return a(e).geometry;case"MultiPolygon":return l(e).geometry;default:throw new Error(t+" is invalid")}},e.point=n,e.points=function(t,e,r){return void 0===r&&(r={}),s(t.map(function(t){return n(t,e)}),r)},e.polygon=i,e.polygons=function(t,e,r){return void 0===r&&(r={}),s(t.map(function(t){return i(t,e)}),r)},e.lineString=o,e.lineStrings=function(t,e,r){return void 0===r&&(r={}),s(t.map(function(t){return o(t,e)}),r)},e.featureCollection=s,e.multiLineString=a,e.multiPoint=u,e.multiPolygon=l,e.geometryCollection=function(t,e,n){return void 0===n&&(n={}),r({type:"GeometryCollection",geometries:t},e,n)},e.round=function(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var r=Math.pow(10,e||0);return Math.round(t*r)/r},e.radiansToLength=c,e.lengthToRadians=h,e.lengthToDegrees=function(t,e){return f(h(t,e))},e.bearingToAzimuth=function(t){var e=t%360;return e<0&&(e+=360),e},e.radiansToDegrees=f,e.degreesToRadians=function(t){return t%360*Math.PI/180},e.convertLength=function(t,e,r){if(void 0===e&&(e="kilometers"),void 0===r&&(r="kilometers"),!(t>=0))throw new Error("length must be a positive number");return c(h(t,e),r)},e.convertArea=function(t,r,n){if(void 0===r&&(r="meters"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("area must be a positive number");var i=e.areaFactors[r];if(!i)throw new Error("invalid original units");var o=e.areaFactors[n];if(!o)throw new Error("invalid final units");return t/i*o},e.isNumber=p,e.isObject=function(t){return!!t&&t.constructor===Object},e.validateBBox=function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(t){if(!p(t))throw new Error("bbox must only contain numbers")})},e.validateId=function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}});function Kr(t,e,r){if(null!==t)for(var n,i,o,s,a,u,l,c,h=0,f=0,p=t.type,d="FeatureCollection"===p,y="Feature"===p,v=d?t.features.length:1,g=0;g<v;g++){a=(c=!!(l=d?t.features[g].geometry:y?t.geometry:t)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var m=0;m<a;m++){var _=0,b=0;if(null!==(s=c?l.geometries[m]:l)){u=s.coordinates;var x=s.type;switch(h=!r||"Polygon"!==x&&"MultiPolygon"!==x?0:1,x){case null:break;case"Point":if(!1===e(u,f,g,_,b))return!1;f++,_++;break;case"LineString":case"MultiPoint":for(n=0;n<u.length;n++){if(!1===e(u[n],f,g,_,b))return!1;f++,"MultiPoint"===x&&_++}"LineString"===x&&_++;break;case"Polygon":case"MultiLineString":for(n=0;n<u.length;n++){for(i=0;i<u[n].length-h;i++){if(!1===e(u[n][i],f,g,_,b))return!1;f++}"MultiLineString"===x&&_++,"Polygon"===x&&b++}"Polygon"===x&&_++;break;case"MultiPolygon":for(n=0;n<u.length;n++){for(b=0,i=0;i<u[n].length;i++){for(o=0;o<u[n][i].length-h;o++){if(!1===e(u[n][i][o],f,g,_,b))return!1;f++}b++}_++}break;case"GeometryCollection":for(n=0;n<s.geometries.length;n++)if(!1===Kr(s.geometries[n],e,r))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function $r(t,e){var r;switch(t.type){case"FeatureCollection":for(r=0;r<t.features.length&&!1!==e(t.features[r].properties,r);r++);break;case"Feature":e(t.properties,0)}}function tn(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var r=0;r<t.features.length&&!1!==e(t.features[r],r);r++);}function en(t,e){var r,n,i,o,s,a,u,l,c,h,f=0,p="FeatureCollection"===t.type,d="Feature"===t.type,y=p?t.features.length:1;for(r=0;r<y;r++){for(a=p?t.features[r].geometry:d?t.geometry:t,l=p?t.features[r].properties:d?t.properties:{},c=p?t.features[r].bbox:d?t.bbox:void 0,h=p?t.features[r].id:d?t.id:void 0,s=(u=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,i=0;i<s;i++)if(null!==(o=u?a.geometries[i]:a))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,f,l,c,h))return!1;break;case"GeometryCollection":for(n=0;n<o.geometries.length;n++)if(!1===e(o.geometries[n],f,l,c,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,f,l,c,h))return!1;f++}}function rn(t,e){en(t,function(t,r,n,i,o){var s,a=null===t?null:t.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return!1!==e(Qr.feature(t,n,{bbox:i,id:o}),r,0)&&void 0}switch(a){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}for(var u=0;u<t.coordinates.length;u++){var l={type:s,coordinates:t.coordinates[u]};if(!1===e(Qr.feature(l,n),r,u))return!1}})}function nn(t,e){rn(t,function(t,r,n){var i=0;if(t.geometry){var o=t.geometry.type;if("Point"!==o&&"MultiPoint"!==o){var s,a=0,u=0,l=0;return!1!==Kr(t,function(o,c,h,f,p){if(void 0===s||r>a||f>u||p>l)return s=o,a=r,u=f,l=p,void(i=0);var d=Qr.lineString([s,o],t.properties);if(!1===e(d,r,n,p,i))return!1;i++,s=o})&&void 0}}})}function on(t,e){if(!t)throw new Error("geojson is required");rn(t,function(t,r,n){if(null!==t.geometry){var i=t.geometry.type,o=t.geometry.coordinates;switch(i){case"LineString":if(!1===e(t,r,n,0,0))return!1;break;case"Polygon":for(var s=0;s<o.length;s++)if(!1===e(Qr.lineString(o[s],t.properties),r,n,s))return!1}}})}var sn=function(t){var e=[];return Kr(t,function(t){e.push(t)}),e},an=Kr,un=function(t,e,r,n){var i=r;return Kr(t,function(t,n,o,s,a){i=0===n&&void 0===r?t:e(i,t,n,o,s,a)},n),i},ln=tn,cn=function(t,e,r){var n=r;return tn(t,function(t,i){n=0===i&&void 0===r?t:e(n,t,i)}),n},hn=function(t,e){if(e=e||{},!Qr.isObject(e))throw new Error("options is invalid");var r,n=e.featureIndex||0,i=e.multiFeatureIndex||0,o=e.geometryIndex||0,s=e.coordIndex||0,a=e.properties;switch(t.type){case"FeatureCollection":n<0&&(n=t.features.length+n),a=a||t.features[n].properties,r=t.features[n].geometry;break;case"Feature":a=a||t.properties,r=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=t;break;default:throw new Error("geojson is invalid")}if(null===r)return null;var u=r.coordinates;switch(r.type){case"Point":return Qr.point(u,a,e);case"MultiPoint":return i<0&&(i=u.length+i),Qr.point(u[i],a,e);case"LineString":return s<0&&(s=u.length+s),Qr.point(u[s],a,e);case"Polygon":return o<0&&(o=u.length+o),s<0&&(s=u[o].length+s),Qr.point(u[o][s],a,e);case"MultiLineString":return i<0&&(i=u.length+i),s<0&&(s=u[i].length+s),Qr.point(u[i][s],a,e);case"MultiPolygon":return i<0&&(i=u.length+i),o<0&&(o=u[i].length+o),s<0&&(s=u[i][o].length-s),Qr.point(u[i][o][s],a,e)}throw new Error("geojson is invalid")},fn=function(t,e){if(e=e||{},!Qr.isObject(e))throw new Error("options is invalid");var r,n=e.featureIndex||0,i=e.multiFeatureIndex||0,o=e.geometryIndex||0,s=e.segmentIndex||0,a=e.properties;switch(t.type){case"FeatureCollection":n<0&&(n=t.features.length+n),a=a||t.features[n].properties,r=t.features[n].geometry;break;case"Feature":a=a||t.properties,r=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=t;break;default:throw new Error("geojson is invalid")}if(null===r)return null;var u=r.coordinates;switch(r.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=u.length+s-1),Qr.lineString([u[s],u[s+1]],a,e);case"Polygon":return o<0&&(o=u.length+o),s<0&&(s=u[o].length+s-1),Qr.lineString([u[o][s],u[o][s+1]],a,e);case"MultiLineString":return i<0&&(i=u.length+i),s<0&&(s=u[i].length+s-1),Qr.lineString([u[i][s],u[i][s+1]],a,e);case"MultiPolygon":return i<0&&(i=u.length+i),o<0&&(o=u[i].length+o),s<0&&(s=u[i][o].length-s-1),Qr.lineString([u[i][o][s],u[i][o][s+1]],a,e)}throw new Error("geojson is invalid")},pn=rn,dn=function(t,e,r){var n=r;return rn(t,function(t,i,o){n=0===i&&0===o&&void 0===r?t:e(n,t,i,o)}),n},yn=en,vn=function(t,e,r){var n=r;return en(t,function(t,i,o,s,a){n=0===i&&void 0===r?t:e(n,t,i,o,s,a)}),n},gn=on,mn=function(t,e,r){var n=r;return on(t,function(t,i,o,s){n=0===i&&void 0===r?t:e(n,t,i,o,s)}),n},_n=$r,bn=function(t,e,r){var n=r;return $r(t,function(t,i){n=0===i&&void 0===r?t:e(n,t,i)}),n},xn=nn,Sn=function(t,e,r){var n=r,i=!1;return nn(t,function(t,o,s,a,u){n=!1===i&&void 0===r?t:e(n,t,o,s,a,u),i=!0}),n},wn=Object.defineProperty({coordAll:sn,coordEach:an,coordReduce:un,featureEach:ln,featureReduce:cn,findPoint:hn,findSegment:fn,flattenEach:pn,flattenReduce:dn,geomEach:yn,geomReduce:vn,lineEach:gn,lineReduce:mn,propEach:_n,propReduce:bn,segmentEach:xn,segmentReduce:Sn},"__esModule",{value:!0});function Cn(t){var e=[1/0,1/0,-1/0,-1/0];return wn.coordEach(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}Cn.default=Cn;var In=Cn,En=Object.defineProperty({default:In},"__esModule",{value:!0}).default,Pn=wn.featureEach,Mn=(wn.coordEach,Qr.polygon,Qr.featureCollection);function Ln(t){var e=Et(t);return e.insert=function(t){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:En(t),Et.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach(function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:En(t),e.push(t)}):Pn(t,function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:En(t),e.push(t)}),Et.prototype.load.call(this,e)},e.remove=function(t,e){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:En(t),Et.prototype.remove.call(this,t,e)},e.clear=function(){return Et.prototype.clear.call(this)},e.search=function(t){var e=Et.prototype.search.call(this,this.toBBox(t));return Mn(e)},e.collides=function(t){return Et.prototype.collides.call(this,this.toBBox(t))},e.all=function(){var t=Et.prototype.all.call(this);return Mn(t)},e.toJSON=function(){return Et.prototype.toJSON.call(this)},e.fromJSON=function(t){return Et.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;if(t.bbox)e=t.bbox;else if(Array.isArray(t)&&4===t.length)e=t;else if(Array.isArray(t)&&6===t.length)e=[t[0],t[1],t[3],t[4]];else if("Feature"===t.type)e=En(t);else{if("FeatureCollection"!==t.type)throw new Error("invalid geojson");e=En(t)}return{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}var Nn=Ln,Tn=Ln;function On(t,e){var r={},n=[];if("LineString"===t.type&&(t=s(t)),"LineString"===e.type&&(e=s(e)),"Feature"===t.type&&"Feature"===e.type&&null!==t.geometry&&null!==e.geometry&&"LineString"===t.geometry.type&&"LineString"===e.geometry.type&&2===t.geometry.coordinates.length&&2===e.geometry.coordinates.length){var i=An(t,e);return i&&n.push(i),d(n)}var o=Nn();return o.load(Jr(e)),k(Jr(t),function(t){k(o.search(t),function(e){var i=An(t,e);if(i){var o=$(i).join(",");r[o]||(r[o]=!0,n.push(i))}})}),d(n)}function An(t,e){var r=$(t),n=$(e);if(2!==r.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==n.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var i=r[0][0],o=r[0][1],s=r[1][0],a=r[1][1],l=n[0][0],c=n[0][1],h=n[1][0],f=n[1][1],p=(f-c)*(s-i)-(h-l)*(a-o),d=(h-l)*(o-c)-(f-c)*(i-l),y=(s-i)*(o-c)-(a-o)*(i-l);if(0===p)return null;var v=d/p,g=y/p;return v>=0&&v<=1&&g>=0&&g<=1?u([i+v*(s-i),o+v*(a-o)]):null}function Rn(t,e,r){void 0===r&&(r={});var n=u([1/0,1/0],{dist:1/0}),i=0;return q(t,function(t){for(var o=$(t),s=0;s<o.length-1;s++){var a=u(o[s]);a.properties.dist=be(e,a,r);var l=u(o[s+1]);l.properties.dist=be(e,l,r);var c=be(a,l,r),h=Math.max(a.properties.dist,l.properties.dist),p=_r(a,l),d=gr(e,h,p+90,r),y=gr(e,h,p-90,r),v=On(f([d.geometry.coordinates,y.geometry.coordinates]),f([a.geometry.coordinates,l.geometry.coordinates])),g=null;v.features.length>0&&((g=v.features[0]).properties.dist=be(e,g,r),g.properties.location=i+be(a,g,r)),a.properties.dist<n.properties.dist&&((n=a).properties.index=s,n.properties.location=i),l.properties.dist<n.properties.dist&&((n=l).properties.index=s+1,n.properties.location=i+c),g&&g.properties.dist<n.properties.dist&&((n=g).properties.index=s),i+=c}}),n}function Fn(t,e,n){void 0===n&&(n={});var i=K(t),o=K(e);return o[0]+=o[0]-i[0]>180?-360:i[0]-o[0]>180?360:0,E(function(t,e,n){var i=n=void 0===n?r:Number(n),o=t[1]*Math.PI/180,s=e[1]*Math.PI/180,a=s-o,u=Math.abs(e[0]-t[0])*Math.PI/180;u>Math.PI&&(u-=2*Math.PI);var l=Math.log(Math.tan(s/2+Math.PI/4)/Math.tan(o/2+Math.PI/4)),c=Math.abs(l)>1e-11?a/l:Math.cos(o);return Math.sqrt(a*a+c*c*u*u)*i}(i,o),"meters",n.units)}function Dn(t,e,r){if(void 0===r&&(r={}),r.method||(r.method="geodesic"),r.units||(r.units="kilometers"),!t)throw new Error("pt is required");if(Array.isArray(t)?t=u(t):"Point"===t.type?t=s(t):rt(t,"Point","point"),!e)throw new Error("line is required");Array.isArray(e)?e=f(e):"LineString"===e.type?e=s(e):rt(e,"LineString","line");var n=1/0,i=t.geometry.coordinates;return V(e,function(t){var e=t.geometry.coordinates[0],o=t.geometry.coordinates[1],s=function(t,e,r,n){var i=[r[0]-e[0],r[1]-e[1]],o=kn([t[0]-e[0],t[1]-e[1]],i);if(o<=0)return jn(t,e,{method:n.method,units:"degrees"});var s=kn(i,i);if(s<=o)return jn(t,r,{method:n.method,units:"degrees"});var a=o/s,u=[e[0]+a*i[0],e[1]+a*i[1]];return jn(t,u,{method:n.method,units:"degrees"})}(i,e,o,r);s<n&&(n=s)}),E(n,"degrees",r.units)}function kn(t,e){return t[0]*e[0]+t[1]*e[1]}function jn(t,e,r){return"planar"===r.method?Fn(t,e,r):be(t,e,r)}function Gn(t,e,r,n,i,o,s,a){var u,l,c,h,f={x:null,y:null,onLine1:!1,onLine2:!1};return 0===(u=(a-o)*(r-t)-(s-i)*(n-e))?null!==f.x&&null!==f.y&&f:(h=(r-t)*(l=e-o)-(n-e)*(c=t-i),l=((s-i)*l-(a-o)*c)/u,c=h/u,f.x=t+l*(r-t),f.y=e+l*(n-e),l>=0&&l<=1&&(f.onLine1=!0),c>=0&&c<=1&&(f.onLine2=!0),!(!f.onLine1||!f.onLine2)&&[f.x,f.y])}function Bn(t){for(var e=function(t){if("FeatureCollection"!==t.type)return"Feature"!==t.type?d([s(t)]):d([t]);return t}(t),r=br(e),n=!1,i=0;!n&&i<e.features.length;){var o,a=e.features[i].geometry,l=!1;if("Point"===a.type)r.geometry.coordinates[0]===a.coordinates[0]&&r.geometry.coordinates[1]===a.coordinates[1]&&(n=!0);else if("MultiPoint"===a.type){var c=!1;for(o=0;!c&&o<a.coordinates.length;)r.geometry.coordinates[0]===a.coordinates[o][0]&&r.geometry.coordinates[1]===a.coordinates[o][1]&&(n=!0,c=!0),o++}else if("LineString"===a.type)for(o=0;!l&&o<a.coordinates.length-1;)Un(r.geometry.coordinates[0],r.geometry.coordinates[1],a.coordinates[o][0],a.coordinates[o][1],a.coordinates[o+1][0],a.coordinates[o+1][1])&&(l=!0,n=!0),o++;else if("MultiLineString"===a.type)for(var h=0;h<a.coordinates.length;){l=!1,o=0;for(var f=a.coordinates[h];!l&&o<f.length-1;)Un(r.geometry.coordinates[0],r.geometry.coordinates[1],f[o][0],f[o][1],f[o+1][0],f[o+1][1])&&(l=!0,n=!0),o++;h++}else"Polygon"!==a.type&&"MultiPolygon"!==a.type||ge(r,a)&&(n=!0);i++}if(n)return r;var p=d([]);for(i=0;i<e.features.length;i++)p.features=p.features.concat(Sr(e.features[i]).features);return u(Yr(r,p).geometry.coordinates)}function Un(t,e,r,n,i,o){return Math.sqrt((i-r)*(i-r)+(o-n)*(o-n))===Math.sqrt((t-r)*(t-r)+(e-n)*(e-n))+Math.sqrt((i-t)*(i-t)+(o-e)*(o-e))}Nn.default=Tn;var qn=6378137;function zn(t){return U(t,function(t,e){return t+function(t){var e,r=0;switch(t.type){case"Polygon":return Vn(t.coordinates);case"MultiPolygon":for(e=0;e<t.coordinates.length;e++)r+=Vn(t.coordinates[e]);return r;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(e)},0)}function Vn(t){var e=0;if(t&&t.length>0){e+=Math.abs(Wn(t[0]));for(var r=1;r<t.length;r++)e-=Math.abs(Wn(t[r]))}return e}function Wn(t){var e,r,n,i,o,s,a=0,u=t.length;if(u>2){for(s=0;s<u;s++)s===u-2?(n=u-2,i=u-1,o=0):s===u-1?(n=u-1,i=0,o=1):(n=s,i=s+1,o=s+2),e=t[n],r=t[i],a+=(Hn(t[o][0])-Hn(e[0]))*Math.sin(Hn(r[1]));a=a*qn*qn/2}return a}function Hn(t){return t*Math.PI/180}function Xn(t,e){return void 0===e&&(e={}),W(t,function(t,r){var n=r.geometry.coordinates;return t+be(n[0],n[1],e)},0)}function Zn(t,e,r,n){if(!L(n=n||{}))throw new Error("options is invalid");var i,o=[];if("Feature"===t.type)i=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");i=t.coordinates}for(var s,a,u,l=i.length,c=0,h=0;h<i.length&&!(e>=c&&h===i.length-1);h++){if(c>e&&0===o.length){if(!(s=e-c))return o.push(i[h]),f(o);a=_r(i[h],i[h-1])-180,u=gr(i[h],s,a,n),o.push(u.geometry.coordinates)}if(c>=r)return(s=r-c)?(a=_r(i[h],i[h-1])-180,u=gr(i[h],s,a,n),o.push(u.geometry.coordinates),f(o)):(o.push(i[h]),f(o));if(c>=e&&o.push(i[h]),h===i.length-1)return f(o);c+=be(i[h],i[h+1],n)}if(c<e&&i.length===l)throw new Error("Start position is beyond line");var p=i[i.length-1];return f([p,p])}function Yn(t,e,r){void 0===r&&(r={});for(var n=K(t),i=$(e),o=0;o<i.length-1;o++){var s=!1;if(r.ignoreEndVertices&&(0===o&&(s="start"),o===i.length-2&&(s="end"),0===o&&o+1===i.length-1&&(s="both")),Jn(i[o],i[o+1],n,s,void 0===r.epsilon?null:r.epsilon))return!0}return!1}function Jn(t,e,r,n,i){var o=r[0],s=r[1],a=t[0],u=t[1],l=e[0],c=e[1],h=l-a,f=c-u,p=(r[0]-a)*f-(r[1]-u)*h;if(null!==i){if(Math.abs(p)>i)return!1}else if(0!==p)return!1;return n?"start"===n?Math.abs(h)>=Math.abs(f)?h>0?a<o&&o<=l:l<=o&&o<a:f>0?u<s&&s<=c:c<=s&&s<u:"end"===n?Math.abs(h)>=Math.abs(f)?h>0?a<=o&&o<l:l<o&&o<=a:f>0?u<=s&&s<c:c<s&&s<=u:"both"===n&&(Math.abs(h)>=Math.abs(f)?h>0?a<o&&o<l:l<o&&o<a:f>0?u<s&&s<c:c<s&&s<u):Math.abs(h)>=Math.abs(f)?h>0?a<=o&&o<=l:l<=o&&o<=a:f>0?u<=s&&s<=c:c<=s&&s<=u}function Qn(t,e){var r=it(t),n=it(e),i=r.type,o=n.type;switch(i){case"Point":switch(o){case"MultiPoint":return function(t,e){var r,n=!1;for(r=0;r<e.coordinates.length;r++)if($n(e.coordinates[r],t.coordinates)){n=!0;break}return n}(r,n);case"LineString":return Yn(r,n,{ignoreEndVertices:!0});case"Polygon":case"MultiPolygon":return ge(r,n,{ignoreBoundary:!0});default:throw new Error("feature2 "+o+" geometry not supported")}case"MultiPoint":switch(o){case"MultiPoint":return function(t,e){for(var r=0;r<t.coordinates.length;r++){for(var n=!1,i=0;i<e.coordinates.length;i++)$n(t.coordinates[r],e.coordinates[i])&&(n=!0);if(!n)return!1}return!0}(r,n);case"LineString":return function(t,e){for(var r=!1,n=0;n<t.coordinates.length;n++){if(!Yn(t.coordinates[n],e))return!1;r||(r=Yn(t.coordinates[n],e,{ignoreEndVertices:!0}))}return r}(r,n);case"Polygon":case"MultiPolygon":return function(t,e){for(var r=!0,n=!1,i=0;i<t.coordinates.length;i++){if(!(n=ge(t.coordinates[1],e))){r=!1;break}n=ge(t.coordinates[1],e,{ignoreBoundary:!0})}return r&&n}(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"LineString":return function(t,e){for(var r=0;r<t.coordinates.length;r++)if(!Yn(t.coordinates[r],e))return!1;return!0}(r,n);case"Polygon":case"MultiPolygon":return function(t,e){var r=Q(e),n=Q(t);if(!Kn(r,n))return!1;for(var i=!1,o=0;o<t.coordinates.length-1;o++){if(!ge(t.coordinates[o],e))return!1;if(i||(i=ge(t.coordinates[o],e,{ignoreBoundary:!0})),!i)i=ge(ti(t.coordinates[o],t.coordinates[o+1]),e,{ignoreBoundary:!0})}return i}(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Polygon":case"MultiPolygon":return function(t,e){var r=Q(t);if(!Kn(Q(e),r))return!1;for(var n=0;n<t.coordinates[0].length;n++)if(!ge(t.coordinates[0][n],e))return!1;return!0}(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}}function Kn(t,e){return!(t[0]>e[0])&&(!(t[2]<e[2])&&(!(t[1]>e[1])&&!(t[3]<e[3])))}function $n(t,e){return t[0]===e[0]&&t[1]===e[1]}function ti(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}function ei(t,e,r){void 0===r&&(r={}),r.mask&&!r.units&&(r.units="kilometers");for(var n=[],i=t[0],o=t[1],s=t[2],a=t[3],l=e/be([i,o],[s,o],r)*(s-i),c=e/be([i,o],[i,a],r)*(a-o),h=s-i,f=a-o,p=Math.floor(h/l),y=(f-Math.floor(f/c)*c)/2,v=i+(h-p*l)/2;v<=s;){for(var g=o+y;g<=a;){var m=u([v,g],r.properties);r.mask?Qn(m,r.mask)&&n.push(m):n.push(m),g+=c}v+=l}return d(n)}function ri(t,e){void 0===e&&(e={});var r=e.precision,n=e.coordinates,i=e.mutate;if(r=null==r||isNaN(r)?6:r,n=null==n||isNaN(n)?3:n,!t)throw new Error("<geojson> is required");if("number"!=typeof r)throw new Error("<precision> must be a number");if("number"!=typeof n)throw new Error("<coordinates> must be a number");!1!==i&&void 0!==i||(t=JSON.parse(JSON.stringify(t)));var o=Math.pow(10,r);return A(t,function(t){!function(t,e,r){t.length>r&&t.splice(r,t.length);for(var n=0;n<t.length;n++)t[n]=Math.round(t[n]*e)/e}(t,o,n)}),t}function ni(t){if(!t)throw new Error("geojson is required");var e=[];return q(t,function(t){e.push(t)}),d(e)}function ii(t,e,r){if("Polygon"!==t.geometry.type)throw new Error("The input feature must be a Polygon");void 0===r&&(r=1);var n=t.geometry.coordinates,i=[],o={};if(r){for(var s=[],a=0;a<n.length;a++)for(var u=0;u<n[a].length-1;u++)s.push(y(a,u));var l=Et();l.load(s)}for(var c=0;c<n.length;c++)for(var h=0;h<n[c].length-1;h++){if(r)l.search(y(c,h)).forEach(function(t){var e=t.ring,r=t.edge;d(c,h,e,r)});else for(var f=0;f<n.length;f++)for(var p=0;p<n[f].length-1;p++)d(c,h,f,p)}return e||(i={type:"Feature",geometry:{type:"MultiPoint",coordinates:i}}),i;function d(t,r,s,a){var u,l,c=n[t][r],h=n[t][r+1],f=n[s][a],p=n[s][a+1],d=function(t,e,r,n){if(oi(t,r)||oi(t,n)||oi(e,r)||oi(n,r))return null;var i=t[0],o=t[1],s=e[0],a=e[1],u=r[0],l=r[1],c=n[0],h=n[1],f=(i-s)*(l-h)-(o-a)*(u-c);return 0===f?null:[((i*a-o*s)*(u-c)-(i-s)*(u*h-l*c))/f,((i*a-o*s)*(l-h)-(o-a)*(u*h-l*c))/f]}(c,h,f,p);if(null!==d&&(u=h[0]!==c[0]?(d[0]-c[0])/(h[0]-c[0]):(d[1]-c[1])/(h[1]-c[1]),l=p[0]!==f[0]?(d[0]-f[0])/(p[0]-f[0]):(d[1]-f[1])/(p[1]-f[1]),!(u>=1||u<=0||l>=1||l<=0))){var y=d,v=!o[y];v&&(o[y]=!0),e?i.push(e(d,t,r,c,h,u,s,a,f,p,l,v)):i.push(d)}}function y(t,e){var r,i,o,s,a=n[t][e],u=n[t][e+1];return a[0]<u[0]?(r=a[0],i=u[0]):(r=u[0],i=a[0]),a[1]<u[1]?(o=a[1],s=u[1]):(o=u[1],s=a[1]),{minX:r,minY:o,maxX:i,maxY:s,ring:t,edge:e}}}function oi(t,e){if(!t||!e)return!1;if(t.length!==e.length)return!1;for(var r=0,n=t.length;r<n;r++)if(t[r]instanceof Array&&e[r]instanceof Array){if(!oi(t[r],e[r]))return!1}else if(t[r]!==e[r])return!1;return!0}function si(t){if("Feature"!=t.type)throw new Error("The input must a geojson object of type Feature");if(void 0===t.geometry||null==t.geometry)throw new Error("The input must a geojson object with a non-empty geometry");if("Polygon"!=t.geometry.type)throw new Error("The input must be a geojson Polygon");for(var e=t.geometry.coordinates.length,r=[],n=0;n<e;n++){var i=t.geometry.coordinates[n];hi(i[0],i[i.length-1])||i.push(i[0]),r.push.apply(r,i.slice(0,i.length-1))}if(!function(t){for(var e={},r=1,n=0,i=t.length;n<i;++n){if(Object.prototype.hasOwnProperty.call(e,t[n])){r=0;break}e[t[n]]=1}return r}(r))throw new Error("The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)");var o=r.length,s=ii(t,function(t,e,r,n,i,o,s,a,u,l,c,h){return[t,e,r,n,i,o,s,a,u,l,c,h]}),a=s.length;if(0==a){var u=[];for(n=0;n<e;n++)u.push(c([t.geometry.coordinates[n]],{parent:-1,winding:ci(t.geometry.coordinates[n])}));var l=d(u);return j(),G(),l}var h=[],f=[];for(n=0;n<e;n++){h.push([]);for(var p=0;p<t.geometry.coordinates[n].length-1;p++)h[n].push([new ai(t.geometry.coordinates[n][fi(p+1,t.geometry.coordinates[n].length-1)],1,[n,p],[n,fi(p+1,t.geometry.coordinates[n].length-1)],void 0)]),f.push(new ui(t.geometry.coordinates[n][p],[n,fi(p-1,t.geometry.coordinates[n].length-1)],[n,p],void 0,void 0,!1,!0))}for(n=0;n<a;n++)h[s[n][1]][s[n][2]].push(new ai(s[n][0],s[n][5],[s[n][1],s[n][2]],[s[n][6],s[n][7]],void 0)),s[n][11]&&f.push(new ui(s[n][0],[s[n][1],s[n][2]],[s[n][6],s[n][7]],void 0,void 0,!0,!0));var y=f.length;for(n=0;n<h.length;n++)for(p=0;p<h[n].length;p++)h[n][p].sort(function(t,e){return t.param<e.param?-1:1});var v=[];for(n=0;n<y;n++)v.push({minX:f[n].coord[0],minY:f[n].coord[1],maxX:f[n].coord[0],maxY:f[n].coord[1],index:n});var g=Et();g.load(v);for(n=0;n<h.length;n++)for(p=0;p<h[n].length;p++)for(var m=0;m<h[n][p].length;m++){b=m==h[n][p].length-1?h[n][fi(p+1,t.geometry.coordinates[n].length-1)][0].coord:h[n][p][m+1].coord;var _=g.search({minX:b[0],minY:b[1],maxX:b[0],maxY:b[1]})[0];h[n][p][m].nxtIsectAlongEdgeIn=_.index}for(n=0;n<h.length;n++)for(p=0;p<h[n].length;p++)for(m=0;m<h[n][p].length;m++){var b=h[n][p][m].coord,x=(_=g.search({minX:b[0],minY:b[1],maxX:b[0],maxY:b[1]})[0]).index;x<o?f[x].nxtIsectAlongRingAndEdge2=h[n][p][m].nxtIsectAlongEdgeIn:hi(f[x].ringAndEdge1,h[n][p][m].ringAndEdgeIn)?f[x].nxtIsectAlongRingAndEdge1=h[n][p][m].nxtIsectAlongEdgeIn:f[x].nxtIsectAlongRingAndEdge2=h[n][p][m].nxtIsectAlongEdgeIn}var S=[];for(n=0,p=0;p<e;p++){var w=n;for(m=0;m<t.geometry.coordinates[p].length-1;m++)f[n].coord[0]<f[w].coord[0]&&(w=n),n++;var C=f[w].nxtIsectAlongRingAndEdge2;for(m=0;m<f.length;m++)if(f[m].nxtIsectAlongRingAndEdge1==w||f[m].nxtIsectAlongRingAndEdge2==w){var I=m;break}var E=li([f[I].coord,f[w].coord,f[C].coord],!0)?1:-1;S.push({isect:w,parent:-1,winding:E})}S.sort(function(t,e){return f[t.isect].coord>f[e.isect].coord?-1:1});for(u=[];S.length>0;){var P=S.pop(),M=P.isect,L=P.parent,N=P.winding,T=u.length,O=[f[M].coord],A=M;if(f[M].ringAndEdge1Walkable)var R=f[M].ringAndEdge1,F=f[M].nxtIsectAlongRingAndEdge1;else R=f[M].ringAndEdge2,F=f[M].nxtIsectAlongRingAndEdge2;for(;!hi(f[M].coord,f[F].coord);){O.push(f[F].coord);var D=void 0;for(n=0;n<S.length;n++)if(S[n].isect==F){D=n;break}if(null!=D&&S.splice(D,1),hi(R,f[F].ringAndEdge1)){if(R=f[F].ringAndEdge2,f[F].ringAndEdge2Walkable=!1,f[F].ringAndEdge1Walkable){var k={isect:F};li([f[A].coord,f[F].coord,f[f[F].nxtIsectAlongRingAndEdge2].coord],1==N)?(k.parent=L,k.winding=-N):(k.parent=T,k.winding=N),S.push(k)}A=F,F=f[F].nxtIsectAlongRingAndEdge2}else{if(R=f[F].ringAndEdge1,f[F].ringAndEdge1Walkable=!1,f[F].ringAndEdge2Walkable){k={isect:F};li([f[A].coord,f[F].coord,f[f[F].nxtIsectAlongRingAndEdge1].coord],1==N)?(k.parent=L,k.winding=-N):(k.parent=T,k.winding=N),S.push(k)}A=F,F=f[F].nxtIsectAlongRingAndEdge1}}O.push(f[F].coord),u.push(c([O],{index:T,parent:L,winding:N,netWinding:void 0}))}l=d(u);function j(){for(var t=[],e=0;e<l.features.length;e++)-1==l.features[e].properties.parent&&t.push(e);if(t.length>1)for(e=0;e<t.length;e++){for(var r=-1,n=0;n<l.features.length;n++)t[e]!=n&&ge(l.features[t[e]].geometry.coordinates[0][0],l.features[n],{ignoreBoundary:!0})&&zn(l.features[n])<Infinity&&(r=n);l.features[t[e]].properties.parent=r}}function G(){for(var t=0;t<l.features.length;t++)if(-1==l.features[t].properties.parent){var e=l.features[t].properties.winding;l.features[t].properties.netWinding=e,B(t,e)}}function B(t,e){for(var r=0;r<l.features.length;r++)if(l.features[r].properties.parent==t){var n=e+l.features[r].properties.winding;l.features[r].properties.netWinding=n,B(r,n)}}return j(),G(),l}var ai=function(t,e,r,n,i){this.coord=t,this.param=e,this.ringAndEdgeIn=r,this.ringAndEdgeOut=n,this.nxtIsectAlongEdgeIn=i},ui=function(t,e,r,n,i,o,s){this.coord=t,this.ringAndEdge1=e,this.ringAndEdge2=r,this.nxtIsectAlongRingAndEdge1=n,this.nxtIsectAlongRingAndEdge2=i,this.ringAndEdge1Walkable=o,this.ringAndEdge2Walkable=s};function li(t,e){if(void 0===e&&(e=!0),3!=t.length)throw new Error("This function requires an array of three points [x,y]");return(t[1][0]-t[0][0])*(t[2][1]-t[0][1])-(t[1][1]-t[0][1])*(t[2][0]-t[0][0])>=0==e}function ci(t){for(var e=0,r=0;r<t.length-1;r++)t[r][0]<t[e][0]&&(e=r);if(li([t[fi(e-1,t.length-1)],t[e],t[fi(e+1,t.length-1)]],!0))var n=1;else n=-1;return n}function hi(t,e){if(!t||!e)return!1;if(t.length!=e.length)return!1;for(var r=0,n=t.length;r<n;r++)if(t[r]instanceof Array&&e[r]instanceof Array){if(!hi(t[r],e[r]))return!1}else if(t[r]!=e[r])return!1;return!0}function fi(t,e){return(t%e+e)%e}var pi=Math.PI/180,di=180/Math.PI,yi=function(t,e){this.lon=t,this.lat=e,this.x=pi*t,this.y=pi*e};yi.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},yi.prototype.antipode=function(){var t=-1*this.lat,e=this.lon<0?180+this.lon:-1*(180-this.lon);return new yi(e,t)};var vi=function(){this.coords=[],this.length=0};vi.prototype.move_to=function(t){this.length++,this.coords.push(t)};var gi=function(t){this.properties=t||{},this.geometries=[]};gi.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var t=[],e=0;e<this.geometries.length;e++)t.push(this.geometries[e].coords);return{geometry:{type:"MultiLineString",coordinates:t},type:"Feature",properties:this.properties}},gi.prototype.wkt=function(){for(var t="",e="LINESTRING(",r=function(t){e+=t[0]+" "+t[1]+","},n=0;n<this.geometries.length;n++){if(0===this.geometries[n].coords.length)return"LINESTRING(empty)";this.geometries[n].coords.forEach(r),t+=e.substring(0,e.length-1)+")"}return t};var mi=function(t,e,r){if(!t||void 0===t.x||void 0===t.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!e||void 0===e.x||void 0===e.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new yi(t.x,t.y),this.end=new yi(e.x,e.y),this.properties=r||{};var n=this.start.x-this.end.x,i=this.start.y-this.end.y,o=Math.pow(Math.sin(i/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(n/2),2);if(this.g=2*Math.asin(Math.sqrt(o)),this.g===Math.PI)throw new Error("it appears "+t.view()+" and "+e.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+t+" and "+e)};function _i(t,e){var r=[],n=Nn();return q(e,function(e){if(r.forEach(function(t,e){t.id=e}),r.length){var i=n.search(e);if(i.features.length){var o=xi(e,i);r=r.filter(function(t){return t.id!==o.id}),n.remove(o),k(bi(o,e),function(t){r.push(t),n.insert(t)})}}else(r=bi(t,e).features).forEach(function(t){t.bbox||(t.bbox=vr(Q(t)))}),n.load(d(r))}),d(r)}function bi(t,e){var r=[],n=$(t)[0],i=$(t)[t.geometry.coordinates.length-1];if(Si(n,K(e))||Si(i,K(e)))return d([t]);var o=Nn(),s=Jr(t);o.load(s);var a=o.search(e);if(!a.features.length)return d([t]);var u=xi(e,a),l=j(s,function(t,n,i){var o=$(n)[1],s=K(e);return i===u.id?(t.push(s),r.push(f(t)),Si(s,o)?[s]:[s,o]):(t.push(o),t)},[n]);return l.length>1&&r.push(f(l)),d(r)}function xi(t,e){if(!e.features.length)throw new Error("lines must contain features");if(1===e.features.length)return e.features[0];var r,n=1/0;return k(e,function(e){var i=Rn(e,t).properties.dist;i<n&&(r=e,n=i)}),r}function Si(t,e){return t[0]===e[0]&&t[1]===e[1]}function wi(t,e,r,n,i){void 0===i&&(i={});var o=i.steps||64,s=Ci(r),a=Ci(n),u=Array.isArray(t)||"Feature"!==t.type?{}:t.properties;if(s===a)return f(mr(t,e,i).geometry.coordinates[0],u);for(var l=s,c=s<a?a:a+360,h=l,p=[],d=0;h<c;)p.push(gr(t,e,h,i).geometry.coordinates),h=l+360*++d/o;return h>c&&p.push(gr(t,e,c,i).geometry.coordinates),f(p,u)}function Ci(t){var e=t%360;return e<0&&(e+=360),e}function Ii(t,e){void 0===e&&(e={});var r=it(t);switch(e.properties||"Feature"!==t.type||(e.properties=t.properties),r.type){case"Polygon":return Ei(r,e);case"MultiPolygon":return function(t,e){void 0===e&&(e={});var r=it(t).coordinates,n=e.properties?e.properties:"Feature"===t.type?t.properties:{},i=[];return r.forEach(function(t){i.push(Pi(t,n))}),d(i)}(r,e);default:throw new Error("invalid poly")}}function Ei(t,e){return void 0===e&&(e={}),Pi(it(t).coordinates,e.properties?e.properties:"Feature"===t.type?t.properties:{})}function Pi(t,e){return t.length>1?y(t,e):f(t[0],e)}function Mi(t,e){var r,n,i;void 0===e&&(e={});var o=e.properties,s=null===(r=e.autoComplete)||void 0===r||r,a=null===(n=e.orderCoords)||void 0===n||n;switch(null!==(i=e.mutate)&&void 0!==i&&i||(t=Ie(t)),t.type){case"FeatureCollection":var u=[];return t.features.forEach(function(t){u.push($(Li(t,{},s,a)))}),g(u,o);default:return Li(t,o,s,a)}}function Li(t,e,r,n){e=e||("Feature"===t.type?t.properties:{});var i=it(t),o=i.coordinates,s=i.type;if(!o.length)throw new Error("line must contain coordinates");switch(s){case"LineString":return r&&(o=Ni(o)),c([o],e);case"MultiLineString":var a=[],u=0;return o.forEach(function(t){if(r&&(t=Ni(t)),n){var e=function(t){var e=t[0],r=t[1],n=t[2],i=t[3];return Math.abs(e-n)*Math.abs(r-i)}(Q(f(t)));e>u?(a.unshift(t),u=e):a.push(t)}else a.push(t)}),c(a,e);default:throw new Error("geometry type "+s+" is not supported")}}function Ni(t){var e=t[0],r=e[0],n=e[1],i=t[t.length-1],o=i[0],s=i[1];return r===o&&n===s||t.push(e),t}function Ti(t,e){var r,n,i,o,s,a,u;for(n=1;n<=8;n*=2){for(r=[],o=!(Ai(i=t[t.length-1],e)&n),s=0;s<t.length;s++)(u=!(Ai(a=t[s],e)&n))!==o&&r.push(Oi(i,a,n,e)),u&&r.push(a),i=a,o=u;if(!(t=r).length)break}return r}function Oi(t,e,r,n){return 8&r?[t[0]+(e[0]-t[0])*(n[3]-t[1])/(e[1]-t[1]),n[3]]:4&r?[t[0]+(e[0]-t[0])*(n[1]-t[1])/(e[1]-t[1]),n[1]]:2&r?[n[2],t[1]+(e[1]-t[1])*(n[2]-t[0])/(e[0]-t[0])]:1&r?[n[0],t[1]+(e[1]-t[1])*(n[0]-t[0])/(e[0]-t[0])]:null}function Ai(t,e){var r=0;return t[0]<e[0]?r|=1:t[0]>e[2]&&(r|=2),t[1]<e[1]?r|=4:t[1]>e[3]&&(r|=8),r}function Ri(t,e){for(var r=[],n=0,i=t;n<i.length;n++){var o=Ti(i[n],e);o.length>0&&(o[0][0]===o[o.length-1][0]&&o[0][1]===o[o.length-1][1]||o.push(o[0]),o.length>=4&&r.push(o))}return r}mi.prototype.interpolate=function(t){var e=Math.sin((1-t)*this.g)/Math.sin(this.g),r=Math.sin(t*this.g)/Math.sin(this.g),n=e*Math.cos(this.start.y)*Math.cos(this.start.x)+r*Math.cos(this.end.y)*Math.cos(this.end.x),i=e*Math.cos(this.start.y)*Math.sin(this.start.x)+r*Math.cos(this.end.y)*Math.sin(this.end.x),o=e*Math.sin(this.start.y)+r*Math.sin(this.end.y),s=di*Math.atan2(o,Math.sqrt(Math.pow(n,2)+Math.pow(i,2)));return[di*Math.atan2(i,n),s]},mi.prototype.Arc=function(t,e){var r=[];if(!t||t<=2)r.push([this.start.lon,this.start.lat]),r.push([this.end.lon,this.end.lat]);else for(var n=1/(t-1),i=0;i<t;++i){var o=n*i,s=this.interpolate(o);r.push(s)}for(var a=!1,u=0,l=e&&e.offset?e.offset:10,c=180-l,h=-180+l,f=360-l,p=1;p<r.length;++p){var d=r[p-1][0],y=r[p][0],v=Math.abs(y-d);v>f&&(y>c&&d<h||d>c&&y<h)?a=!0:v>u&&(u=v)}var g=[];if(a&&u<l){var m=[];g.push(m);for(var _=0;_<r.length;++_){var b=parseFloat(r[_][0]);if(_>0&&Math.abs(b-r[_-1][0])>f){var x=parseFloat(r[_-1][0]),S=parseFloat(r[_-1][1]),w=parseFloat(r[_][0]),C=parseFloat(r[_][1]);if(x>-180&&x<h&&180===w&&_+1<r.length&&r[_-1][0]>-180&&r[_-1][0]<h){m.push([-180,r[_][1]]),_++,m.push([r[_][0],r[_][1]]);continue}if(x>c&&x<180&&-180===w&&_+1<r.length&&r[_-1][0]>c&&r[_-1][0]<180){m.push([180,r[_][1]]),_++,m.push([r[_][0],r[_][1]]);continue}if(x<h&&w>c){var I=x;x=w,w=I;var E=S;S=C,C=E}if(x>c&&w<h&&(w+=360),x<=180&&w>=180&&x<w){var P=(180-x)/(w-x),M=P*C+(1-P)*S;m.push([r[_-1][0]>c?180:-180,M]),(m=[]).push([r[_-1][0]>c?-180:180,M]),g.push(m)}else m=[],g.push(m);m.push([b,r[_][1]])}else m.push([r[_][0],r[_][1]])}}else{var L=[];g.push(L);for(var N=0;N<r.length;++N)L.push([r[N][0],r[N][1]])}for(var T=new gi(this.properties),O=0;O<g.length;++O){var A=new vi;T.geometries.push(A);for(var R=g[O],F=0;F<R.length;++F)A.move_to(R[F])}return T};var Fi=Ut(function(t,e){function r(t){var e=[];for(var r in t)e.push(r);return e}(t.exports="function"==typeof Object.keys?Object.keys:r).shim=r}),Di=Ut(function(t,e){var r="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function n(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function i(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}(e=t.exports=r?n:i).supported=n,e.unsupported=i}),ki=Ut(function(t){var e=Array.prototype.slice,r=t.exports=function(t,o,s){return s||(s={}),t===o||(t instanceof Date&&o instanceof Date?t.getTime()===o.getTime():!t||!o||"object"!=typeof t&&"object"!=typeof o?s.strict?t===o:t==o:function(t,o,s){var a,u;if(n(t)||n(o))return!1;if(t.prototype!==o.prototype)return!1;if(Di(t))return!!Di(o)&&(t=e.call(t),o=e.call(o),r(t,o,s));if(i(t)){if(!i(o))return!1;if(t.length!==o.length)return!1;for(a=0;a<t.length;a++)if(t[a]!==o[a])return!1;return!0}try{var l=Fi(t),c=Fi(o)}catch(t){return!1}if(l.length!=c.length)return!1;for(l.sort(),c.sort(),a=l.length-1;a>=0;a--)if(l[a]!=c[a])return!1;for(a=l.length-1;a>=0;a--)if(u=l[a],!r(t[u],o[u],s))return!1;return typeof t==typeof o}(t,o,s))};function n(t){return null==t}function i(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length)&&("function"==typeof t.copy&&"function"==typeof t.slice&&!(t.length>0&&"number"!=typeof t[0]))}});function ji(t,e,r){if(void 0===r&&(r={}),!L(r=r||{}))throw new Error("options is invalid");var n,i=r.tolerance||0,o=[],s=Nn(),a=Jr(t);return s.load(a),V(e,function(t){var e=!1;t&&(k(s.search(t),function(r){if(!1===e){var o=$(t).sort(),s=$(r).sort();ki(o,s)||(0===i?Yn(o[0],r)&&Yn(o[1],r):Rn(r,o[0]).properties.dist<=i&&Rn(r,o[1]).properties.dist<=i)?(e=!0,n=n?Gi(n,t):t):(0===i?Yn(s[0],t)&&Yn(s[1],t):Rn(t,s[0]).properties.dist<=i&&Rn(t,s[1]).properties.dist<=i)&&(n=n?Gi(n,r):r)}}),!1===e&&n&&(o.push(n),n=void 0))}),n&&o.push(n),d(o)}function Gi(t,e){var r=$(e),n=$(t),i=n[0],o=n[n.length-1],s=t.geometry.coordinates;return ki(r[0],i)?s.unshift(r[1]):ki(r[0],o)?s.push(r[1]):ki(r[1],i)?s.unshift(r[0]):ki(r[1],o)&&s.push(r[0]),t}function Bi(t){var e=t%360;return e<0&&(e+=360),e}function Ui(t,e,r){var n;return void 0===r&&(r={}),(n=r.final?qi(K(e),K(t)):qi(K(t),K(e)))>180?-(360-n):n}function qi(t,e){var r=I(t[1]),n=I(e[1]),i=I(e[0]-t[0]);i>Math.PI&&(i-=2*Math.PI),i<-Math.PI&&(i+=2*Math.PI);var o=Math.log(Math.tan(n/2+Math.PI/4)/Math.tan(r/2+Math.PI/4));return(C(Math.atan2(i,o))+360)%360}function zi(t,e,n,i){void 0===i&&(i={});var o=e<0,s=E(Math.abs(e),i.units,"meters");o&&(s=-Math.abs(s));var a=K(t),l=function(t,e,n,i){i=void 0===i?r:Number(i);var o=e/i,s=t[0]*Math.PI/180,a=I(t[1]),u=I(n),l=o*Math.cos(u),c=a+l;Math.abs(c)>Math.PI/2&&(c=c>0?Math.PI-c:-Math.PI-c);var h=Math.log(Math.tan(c/2+Math.PI/4)/Math.tan(a/2+Math.PI/4)),f=Math.abs(h)>1e-11?l/h:Math.cos(a),p=o*Math.sin(u)/f;return[(180*(s+p)/Math.PI+540)%360-180,180*c/Math.PI]}(a,s,n);return l[0]+=l[0]-a[0]>180?-360:a[0]-l[0]>180?360:0,u(l,i.properties)}function Vi(t,e,r,n,i,o){for(var s=0;s<t.length;s++){var a=t[s],u=t[s+1];s===t.length-1&&(u=t[0]),n=Hi(a,u,e),r<=0&&n>0?Hi(e,a,i)<0||(i=a):r>0&&n<=0&&(Wi(e,a,o)||(o=a)),r=n}return[i,o]}function Wi(t,e,r){return Hi(t,e,r)>0}function Hi(t,e,r){return(e[0]-t[0])*(r[1]-t[1])-(r[0]-t[0])*(e[1]-t[1])}function Xi(t){for(var e,r,n=$(t),i=0,o=1;o<n.length;)e=r||n[0],i+=((r=n[o])[0]-e[0])*(r[1]+e[1]),o++;return i>0}function Zi(t,e){switch("Feature"===t.type?t.geometry.type:t.type){case"GeometryCollection":return B(t,function(t){Zi(t,e)}),t;case"LineString":return Yi($(t),e),t;case"Polygon":return Ji($(t),e),t;case"MultiLineString":return $(t).forEach(function(t){Yi(t,e)}),t;case"MultiPolygon":return $(t).forEach(function(t){Ji(t,e)}),t;case"Point":case"MultiPoint":return t}}function Yi(t,e){Xi(t)===e&&t.reverse()}function Ji(t,e){Xi(t[0])!==e&&t[0].reverse();for(var r=1;r<t.length;r++)Xi(t[r])===e&&t[r].reverse()}function Qi(t,e){if(!L(e=e||{}))throw new Error("options is invalid");var r=e.zProperty||"elevation",n=e.flip,i=e.flags;nt(t,"Point","input must contain Points");for(var o=function(t,e){var r={};return k(t,function(t){var e=$(t)[1];r[e]||(r[e]=[]),r[e].push(t)}),Object.keys(r).map(function(t){return r[t].sort(function(t,e){return $(t)[0]-$(e)[0]})}).sort(function(t,r){return e?$(t[0])[1]-$(r[0])[1]:$(r[0])[1]-$(t[0])[1]})}
/*!
     * @license GNU Affero General Public License.
     * Copyright (c) 2015, 2015 Ronny Lorenz <ronny@tbi.univie.ac.at>
     * v. 1.2.0
     * https://github.com/RaumZeit/MarchingSquares.js
     *
     * MarchingSquaresJS is free software: you can redistribute it and/or modify
     * it under the terms of the GNU Affero General Public License as published by
     * the Free Software Foundation, either version 3 of the License, or
     * (at your option) any later version.
     *
     * MarchingSquaresJS is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     * GNU Affero General Public License for more details.
     *
     * As additional permission under GNU Affero General Public License version 3
     * section 7, third-party projects (personal or commercial) may distribute,
     * include, or link against UNMODIFIED VERSIONS of MarchingSquaresJS without the
     * requirement that said third-party project for that reason alone becomes
     * subject to any requirement of the GNU Affero General Public License version 3.
     * Any modifications to MarchingSquaresJS, however, must be shared with the public
     * and made available.
     *
     * In summary this:
     * - allows you to use MarchingSquaresJS at no cost
     * - allows you to use MarchingSquaresJS for both personal and commercial purposes
     * - allows you to distribute UNMODIFIED VERSIONS of MarchingSquaresJS under any
     *   license as long as this license notice is included
     * - enables you to keep the source code of your program that uses MarchingSquaresJS
     *   undisclosed
     * - forces you to share any modifications you have made to MarchingSquaresJS,
     *   e.g. bug-fixes
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with MarchingSquaresJS.  If not, see <http://www.gnu.org/licenses/>.
     */(t,n),s=[],a=0;a<o.length;a++){for(var u=o[a],l=[],c=0;c<u.length;c++){var h=u[c];h.properties[r]?l.push(h.properties[r]):l.push(0),!0===i&&(h.properties.matrixPosition=[a,c])}s.push(l)}return s}var Ki={successCallback:null,verbose:!1,polygons:!1},$i={};function to(t,e,r,n){n=n||{};for(var i=Object.keys(Ki),o=0;o<i.length;o++){var s=i[o],a=n[s];a=null!=a?a:Ki[s],$i[s]=a}$i.verbose&&console.log("MarchingSquaresJS-isoBands: computing isobands for ["+e+":"+(e+r)+"]");var u,l=function(t,e,r){for(var n=t.length-1,i=t[0].length-1,o={rows:n,cols:i,cells:[]},s=e+Math.abs(r),a=0;a<n;++a){o.cells[a]=[];for(var u=0;u<i;++u){var l=0,c=t[a+1][u],h=t[a+1][u+1],f=t[a][u+1],p=t[a][u];if(!(isNaN(c)||isNaN(h)||isNaN(f)||isNaN(p))){l|=c<e?0:c>s?128:64,l|=h<e?0:h>s?32:16,l|=f<e?0:f>s?8:4;var d=+(l|=p<e?0:p>s?2:1),y=0;if(17===l||18===l||33===l||34===l||38===l||68===l||72===l||98===l||102===l||132===l||136===l||137===l||152===l||153===l){var v=(c+h+f+p)/4;y=v>s?2:v<e?0:1,34===l?1===y?l=35:0===y&&(l=136):136===l?1===y?(l=35,y=4):0===y&&(l=34):17===l?1===y?(l=155,y=4):0===y&&(l=153):68===l?1===y?(l=103,y=4):0===y&&(l=102):153===l?1===y&&(l=155):102===l?1===y&&(l=103):152===l?y<2&&(l=156,y=1):137===l?y<2&&(l=139,y=1):98===l?y<2&&(l=99,y=1):38===l?y<2&&(l=39,y=1):18===l?y>0?(l=156,y=4):l=152:33===l?y>0?(l=139,y=4):l=137:72===l?y>0?(l=99,y=4):l=98:132===l&&(y>0?(l=39,y=4):l=38)}if(0!=l&&170!=l){var g,m,_,b,x,S,w,C;g=m=_=b=x=S=w=C=.5;var I=[];1===l?(_=1-Wo(e,f,p),C=1-Wo(e,c,p),I.push(Go[l])):169===l?(_=Wo(s,p,f),C=Wo(s,p,c),I.push(Go[l])):4===l?(S=1-Wo(e,h,f),b=Wo(e,p,f),I.push(ko[l])):166===l?(S=Wo(s,f,h),b=1-Wo(s,f,p),I.push(ko[l])):16===l?(x=Wo(e,f,h),m=Wo(e,c,h),I.push(Do[l])):154===l?(x=1-Wo(s,h,f),m=1-Wo(s,h,c),I.push(Do[l])):64===l?(w=Wo(e,p,c),g=1-Wo(e,h,c),I.push(Uo[l])):106===l?(w=1-Wo(s,c,p),g=Wo(s,c,h),I.push(Uo[l])):168===l?(b=Wo(s,p,f),_=Wo(e,p,f),C=Wo(e,p,c),w=Wo(s,p,c),I.push(jo[l]),I.push(Go[l])):2===l?(b=1-Wo(e,f,p),_=1-Wo(s,f,p),C=1-Wo(s,c,p),w=1-Wo(e,c,p),I.push(jo[l]),I.push(Go[l])):162===l?(x=Wo(s,f,h),S=Wo(e,f,h),b=1-Wo(e,f,p),_=1-Wo(s,f,p),I.push(jo[l]),I.push(Go[l])):8===l?(x=1-Wo(e,h,f),S=1-Wo(s,h,f),b=Wo(s,p,f),_=Wo(e,p,f),I.push(Do[l]),I.push(ko[l])):138===l?(x=1-Wo(e,h,f),S=1-Wo(s,h,f),g=1-Wo(s,h,c),m=1-Wo(e,h,c),I.push(Do[l]),I.push(ko[l])):32===l?(x=Wo(s,f,h),S=Wo(e,f,h),g=Wo(e,c,h),m=Wo(s,c,h),I.push(Do[l]),I.push(ko[l])):42===l?(C=1-Wo(s,c,p),w=1-Wo(e,c,p),g=Wo(e,c,h),m=Wo(s,c,h),I.push(Bo[l]),I.push(Uo[l])):128===l&&(C=Wo(e,p,c),w=Wo(s,p,c),g=1-Wo(s,h,c),m=1-Wo(e,h,c),I.push(Bo[l]),I.push(Uo[l])),5===l?(S=1-Wo(e,h,f),C=1-Wo(e,c,p),I.push(ko[l])):165===l?(S=Wo(s,f,h),C=Wo(s,p,c),I.push(ko[l])):20===l?(b=Wo(e,p,f),m=Wo(e,c,h),I.push(jo[l])):150===l?(b=1-Wo(s,f,p),m=1-Wo(s,h,c),I.push(jo[l])):80===l?(x=Wo(e,f,h),w=Wo(e,p,c),I.push(Do[l])):90===l?(x=1-Wo(s,h,f),w=1-Wo(s,c,p),I.push(Do[l])):65===l?(_=1-Wo(e,f,p),g=1-Wo(e,h,c),I.push(Go[l])):105===l?(_=Wo(s,p,f),g=Wo(s,c,h),I.push(Go[l])):160===l?(x=Wo(s,f,h),S=Wo(e,f,h),C=Wo(e,p,c),w=Wo(s,p,c),I.push(Do[l]),I.push(ko[l])):10===l?(x=1-Wo(e,h,f),S=1-Wo(s,h,f),C=1-Wo(s,c,p),w=1-Wo(e,c,p),I.push(Do[l]),I.push(ko[l])):130===l?(b=1-Wo(e,f,p),_=1-Wo(s,f,p),g=1-Wo(s,h,c),m=1-Wo(e,h,c),I.push(jo[l]),I.push(Go[l])):40===l?(b=Wo(s,p,f),_=Wo(e,p,f),g=Wo(e,c,h),m=Wo(s,c,h),I.push(jo[l]),I.push(Go[l])):101===l?(S=Wo(s,f,h),g=Wo(s,c,h),I.push(ko[l])):69===l?(S=1-Wo(e,h,f),g=1-Wo(e,h,c),I.push(ko[l])):149===l?(C=Wo(s,p,c),m=1-Wo(s,h,c),I.push(Bo[l])):21===l?(C=1-Wo(e,c,p),m=Wo(e,c,h),I.push(Bo[l])):86===l?(b=1-Wo(s,f,p),w=1-Wo(s,c,p),I.push(jo[l])):84===l?(b=Wo(e,p,f),w=Wo(e,p,c),I.push(jo[l])):89===l?(x=1-Wo(s,h,f),_=Wo(s,p,f),I.push(Go[l])):81===l?(x=Wo(e,f,h),_=1-Wo(e,f,p),I.push(Go[l])):96===l?(x=Wo(s,f,h),S=Wo(e,f,h),w=Wo(e,p,c),g=Wo(s,c,h),I.push(Do[l]),I.push(ko[l])):74===l?(x=1-Wo(e,h,f),S=1-Wo(s,h,f),w=1-Wo(s,c,p),g=1-Wo(e,h,c),I.push(Do[l]),I.push(ko[l])):24===l?(x=1-Wo(s,h,f),b=Wo(s,p,f),_=Wo(e,p,f),m=Wo(e,c,h),I.push(Do[l]),I.push(Go[l])):146===l?(x=Wo(e,f,h),b=1-Wo(e,f,p),_=1-Wo(s,f,p),m=1-Wo(s,h,c),I.push(Do[l]),I.push(Go[l])):6===l?(S=1-Wo(e,h,f),b=1-Wo(s,f,p),C=1-Wo(s,c,p),w=1-Wo(e,c,p),I.push(ko[l]),I.push(jo[l])):164===l?(S=Wo(s,f,h),b=Wo(e,p,f),C=Wo(e,p,c),w=Wo(s,p,c),I.push(ko[l]),I.push(jo[l])):129===l?(_=1-Wo(e,f,p),C=Wo(s,p,c),g=1-Wo(s,h,c),m=1-Wo(e,h,c),I.push(Go[l]),I.push(Bo[l])):41===l?(_=Wo(s,p,f),C=1-Wo(e,c,p),g=Wo(e,c,h),m=Wo(s,c,h),I.push(Go[l]),I.push(Bo[l])):66===l?(b=1-Wo(e,f,p),_=1-Wo(s,f,p),w=1-Wo(s,c,p),g=1-Wo(e,h,c),I.push(jo[l]),I.push(Go[l])):104===l?(b=Wo(s,p,f),_=Wo(e,p,f),w=Wo(e,p,c),g=Wo(s,c,h),I.push(Go[l]),I.push(qo[l])):144===l?(x=Wo(e,f,h),C=Wo(e,p,c),w=Wo(s,p,c),m=1-Wo(s,h,c),I.push(Do[l]),I.push(Uo[l])):26===l?(x=1-Wo(s,h,f),C=1-Wo(s,c,p),w=1-Wo(e,c,p),m=Wo(e,c,h),I.push(Do[l]),I.push(Uo[l])):36===l?(S=Wo(s,f,h),b=Wo(e,p,f),g=Wo(e,c,h),m=Wo(s,c,h),I.push(ko[l]),I.push(jo[l])):134===l?(S=1-Wo(e,h,f),b=1-Wo(s,f,p),g=1-Wo(s,h,c),m=1-Wo(e,h,c),I.push(ko[l]),I.push(jo[l])):9===l?(x=1-Wo(e,h,f),S=1-Wo(s,h,f),_=Wo(s,p,f),C=1-Wo(e,c,p),I.push(Do[l]),I.push(ko[l])):161===l?(x=Wo(s,f,h),S=Wo(e,f,h),_=1-Wo(e,f,p),C=Wo(s,p,c),I.push(Do[l]),I.push(ko[l])):37===l?(S=Wo(s,f,h),C=1-Wo(e,c,p),g=Wo(e,c,h),m=Wo(s,c,h),I.push(ko[l]),I.push(Bo[l])):133===l?(S=1-Wo(e,h,f),C=Wo(s,p,c),g=1-Wo(s,h,c),m=1-Wo(e,h,c),I.push(ko[l]),I.push(Bo[l])):148===l?(b=Wo(e,p,f),C=Wo(e,p,c),w=Wo(s,p,c),m=1-Wo(s,h,c),I.push(jo[l]),I.push(Uo[l])):22===l?(b=1-Wo(s,f,p),C=1-Wo(s,c,p),w=1-Wo(e,c,p),m=Wo(e,c,h),I.push(jo[l]),I.push(Uo[l])):82===l?(x=Wo(e,f,h),b=1-Wo(e,f,p),_=1-Wo(s,f,p),w=1-Wo(s,c,p),I.push(Do[l]),I.push(Go[l])):88===l?(x=1-Wo(s,h,f),b=Wo(s,p,f),_=Wo(e,p,f),w=Wo(e,p,c),I.push(Do[l]),I.push(Go[l])):73===l?(x=1-Wo(e,h,f),S=1-Wo(s,h,f),_=Wo(s,p,f),g=1-Wo(e,h,c),I.push(Do[l]),I.push(ko[l])):97===l?(x=Wo(s,f,h),S=Wo(e,f,h),_=1-Wo(e,f,p),g=Wo(s,c,h),I.push(Do[l]),I.push(ko[l])):145===l?(x=Wo(e,f,h),_=1-Wo(e,f,p),C=Wo(s,p,c),m=1-Wo(s,h,c),I.push(Do[l]),I.push(Bo[l])):25===l?(x=1-Wo(s,h,f),_=Wo(s,p,f),C=1-Wo(e,c,p),m=Wo(e,c,h),I.push(Do[l]),I.push(Bo[l])):70===l?(S=1-Wo(e,h,f),b=1-Wo(s,f,p),w=1-Wo(s,c,p),g=1-Wo(e,h,c),I.push(ko[l]),I.push(jo[l])):100===l?(S=Wo(s,f,h),b=Wo(e,p,f),w=Wo(e,p,c),g=Wo(s,c,h),I.push(ko[l]),I.push(jo[l])):34===l?(0===y?(x=1-Wo(e,h,f),S=1-Wo(s,h,f),b=Wo(s,p,f),_=Wo(e,p,f),C=Wo(e,p,c),w=Wo(s,p,c),g=1-Wo(s,h,c),m=1-Wo(e,h,c)):(x=Wo(s,f,h),S=Wo(e,f,h),b=1-Wo(e,f,p),_=1-Wo(s,f,p),C=1-Wo(s,c,p),w=1-Wo(e,c,p),g=Wo(e,c,h),m=Wo(s,c,h)),I.push(Do[l]),I.push(ko[l]),I.push(Bo[l]),I.push(Uo[l])):35===l?(4===y?(x=1-Wo(e,h,f),S=1-Wo(s,h,f),b=Wo(s,p,f),_=Wo(e,p,f),C=Wo(e,p,c),w=Wo(s,p,c),g=1-Wo(s,h,c),m=1-Wo(e,h,c)):(x=Wo(s,f,h),S=Wo(e,f,h),b=1-Wo(e,f,p),_=1-Wo(s,f,p),C=1-Wo(s,c,p),w=1-Wo(e,c,p),g=Wo(e,c,h),m=Wo(s,c,h)),I.push(Do[l]),I.push(ko[l]),I.push(Go[l]),I.push(Uo[l])):136===l?(0===y?(x=Wo(s,f,h),S=Wo(e,f,h),b=1-Wo(e,f,p),_=1-Wo(s,f,p),C=1-Wo(s,c,p),w=1-Wo(e,c,p),g=Wo(e,c,h),m=Wo(s,c,h)):(x=1-Wo(e,h,f),S=1-Wo(s,h,f),b=Wo(s,p,f),_=Wo(e,p,f),C=Wo(e,p,c),w=Wo(s,p,c),g=1-Wo(s,h,c),m=1-Wo(e,h,c)),I.push(Do[l]),I.push(ko[l]),I.push(Bo[l]),I.push(Uo[l])):153===l?(0===y?(x=Wo(e,f,h),_=1-Wo(e,f,p),C=1-Wo(e,c,p),m=Wo(e,c,h)):(x=1-Wo(s,h,f),_=Wo(s,p,f),C=Wo(s,p,c),m=1-Wo(s,h,c)),I.push(Do[l]),I.push(Go[l])):102===l?(0===y?(S=1-Wo(e,h,f),b=Wo(e,p,f),w=Wo(e,p,c),g=1-Wo(e,h,c)):(S=Wo(s,f,h),b=1-Wo(s,f,p),w=1-Wo(s,c,p),g=Wo(s,c,h)),I.push(ko[l]),I.push(Uo[l])):155===l?(4===y?(x=Wo(e,f,h),_=1-Wo(e,f,p),C=1-Wo(e,c,p),m=Wo(e,c,h)):(x=1-Wo(s,h,f),_=Wo(s,p,f),C=Wo(s,p,c),m=1-Wo(s,h,c)),I.push(Do[l]),I.push(Bo[l])):103===l?(4===y?(S=1-Wo(e,h,f),b=Wo(e,p,f),w=Wo(e,p,c),g=1-Wo(e,h,c)):(S=Wo(s,f,h),b=1-Wo(s,f,p),w=1-Wo(s,c,p),g=Wo(s,c,h)),I.push(ko[l]),I.push(jo[l])):152===l?(0===y?(x=Wo(e,f,h),b=1-Wo(e,f,p),_=1-Wo(s,f,p),C=1-Wo(s,c,p),w=1-Wo(e,c,p),m=Wo(e,c,h)):(x=1-Wo(s,h,f),b=Wo(s,p,f),_=Wo(e,p,f),C=Wo(e,p,c),w=Wo(s,p,c),m=1-Wo(s,h,c)),I.push(Do[l]),I.push(jo[l]),I.push(Go[l])):156===l?(4===y?(x=Wo(e,f,h),b=1-Wo(e,f,p),_=1-Wo(s,f,p),C=1-Wo(s,c,p),w=1-Wo(e,c,p),m=Wo(e,c,h)):(x=1-Wo(s,h,f),b=Wo(s,p,f),_=Wo(e,p,f),C=Wo(e,p,c),w=Wo(s,p,c),m=1-Wo(s,h,c)),I.push(Do[l]),I.push(Go[l]),I.push(Uo[l])):137===l?(0===y?(x=Wo(s,f,h),S=Wo(e,f,h),_=1-Wo(e,f,p),C=1-Wo(e,c,p),g=Wo(e,c,h),m=Wo(s,c,h)):(x=1-Wo(e,h,f),S=1-Wo(s,h,f),_=Wo(s,p,f),C=Wo(s,p,c),g=1-Wo(s,h,c),m=1-Wo(e,h,c)),I.push(Do[l]),I.push(ko[l]),I.push(Go[l])):139===l?(4===y?(x=Wo(s,f,h),S=Wo(e,f,h),_=1-Wo(e,f,p),C=1-Wo(e,c,p),g=Wo(e,c,h),m=Wo(s,c,h)):(x=1-Wo(e,h,f),S=1-Wo(s,h,f),_=Wo(s,p,f),C=Wo(s,p,c),g=1-Wo(s,h,c),m=1-Wo(e,h,c)),I.push(Do[l]),I.push(ko[l]),I.push(Bo[l])):98===l?(0===y?(x=1-Wo(e,h,f),S=1-Wo(s,h,f),b=Wo(s,p,f),_=Wo(e,p,f),w=Wo(e,p,c),g=1-Wo(e,h,c)):(x=Wo(s,f,h),S=Wo(e,f,h),b=1-Wo(e,f,p),_=1-Wo(s,f,p),w=1-Wo(s,c,p),g=Wo(s,c,h)),I.push(Do[l]),I.push(ko[l]),I.push(Uo[l])):99===l?(4===y?(x=1-Wo(e,h,f),S=1-Wo(s,h,f),b=Wo(s,p,f),_=Wo(e,p,f),w=Wo(e,p,c),g=1-Wo(e,h,c)):(x=Wo(s,f,h),S=Wo(e,f,h),b=1-Wo(e,f,p),_=1-Wo(s,f,p),w=1-Wo(s,c,p),g=Wo(s,c,h)),I.push(Do[l]),I.push(ko[l]),I.push(Go[l])):38===l?(0===y?(S=1-Wo(e,h,f),b=Wo(e,p,f),C=Wo(e,p,c),w=Wo(s,p,c),g=1-Wo(s,h,c),m=1-Wo(e,h,c)):(S=Wo(s,f,h),b=1-Wo(s,f,p),C=1-Wo(s,c,p),w=1-Wo(e,c,p),g=Wo(e,c,h),m=Wo(s,c,h)),I.push(ko[l]),I.push(Bo[l]),I.push(Uo[l])):39===l?(4===y?(S=1-Wo(e,h,f),b=Wo(e,p,f),C=Wo(e,p,c),w=Wo(s,p,c),g=1-Wo(s,h,c),m=1-Wo(e,h,c)):(S=Wo(s,f,h),b=1-Wo(s,f,p),C=1-Wo(s,c,p),w=1-Wo(e,c,p),g=Wo(e,c,h),m=Wo(s,c,h)),I.push(ko[l]),I.push(jo[l]),I.push(Uo[l])):85===l&&(x=1,S=0,b=1,_=0,C=0,w=1,g=0,m=1),(g<0||g>1||m<0||m>1||x<0||x>1||b<0||b>1||C<0||C>1||w<0||w>1)&&console.log("MarchingSquaresJS-isoBands: "+l+" "+d+" "+c+","+h+","+f+","+p+" "+y+" "+g+" "+m+" "+x+" "+S+" "+b+" "+_+" "+C+" "+w),o.cells[a][u]={cval:l,cval_real:d,flipped:y,topleft:g,topright:m,righttop:x,rightbottom:S,bottomright:b,bottomleft:_,leftbottom:C,lefttop:w,edges:I}}}}}return o}(t,e,r);return $i.polygons?($i.verbose&&console.log("MarchingSquaresJS-isoBands: returning single polygons for each grid cell"),u=function(t){var e=[],r=0;return t.cells.forEach(function(t,n){t.forEach(function(t,i){if(void 0!==t){var o=Vo[t.cval](t);"object"==typeof o&&Ho(o)?"object"==typeof o[0]&&Ho(o[0])?"object"==typeof o[0][0]&&Ho(o[0][0])?o.forEach(function(t){t.forEach(function(t){t[0]+=i,t[1]+=n}),e[r++]=t}):(o.forEach(function(t){t[0]+=i,t[1]+=n}),e[r++]=o):console.log("MarchingSquaresJS-isoBands: bandcell polygon with malformed coordinates"):console.log("MarchingSquaresJS-isoBands: bandcell polygon with null coordinates")}})}),e}(l)):($i.verbose&&console.log("MarchingSquaresJS-isoBands: returning polygon paths for entire data grid"),u=function(t){for(var e=[],r=t.rows,n=t.cols,i=[],o=0;o<r;o++)for(var s=0;s<n;s++)if(void 0!==t.cells[o][s]&&t.cells[o][s].edges.length>0){var a=Zo(t.cells[o][s]),u=null,l=s,c=o;null!==a&&i.push([a.p[0]+l,a.p[1]+c]);do{if(null===(u=Yo(t.cells[c][l],a.x,a.y,a.o)))break;if(i.push([u.p[0]+l,u.p[1]+c]),l+=u.x,a=u,(c+=u.y)<0||c>=r||l<0||l>=n||void 0===t.cells[c][l]){var h=Xo(t,l-=u.x,c-=u.y,u.x,u.y,u.o);if(null===h)break;h.path.forEach(function(t){i.push(t)}),l=h.i,c=h.j,a=h}}while(void 0!==t.cells[c][l]&&t.cells[c][l].edges.length>0);e.push(i),i=[],t.cells[o][s].edges.length>0&&s--}return e}(l)),"function"==typeof $i.successCallback&&$i.successCallback(u),u}var eo=64,ro=16,no=[],io=[],oo=[],so=[],ao=[],uo=[],lo=[],co=[],ho=[],fo=[],po=[],yo=[],vo=[],go=[],mo=[],_o=[],bo=[],xo=[],So=[],wo=[],Co=[],Io=[],Eo=[],Po=[];lo[85]=fo[85]=-1,co[85]=po[85]=0,ho[85]=yo[85]=1,So[85]=Io[85]=1,wo[85]=Eo[85]=0,Co[85]=Po[85]=1,no[85]=so[85]=0,io[85]=ao[85]=-1,oo[85]=mo[85]=0,_o[85]=vo[85]=0,bo[85]=go[85]=1,uo[85]=xo[85]=1,Io[1]=Io[169]=0,Eo[1]=Eo[169]=-1,Po[1]=Po[169]=0,vo[1]=vo[169]=-1,go[1]=go[169]=0,mo[1]=mo[169]=0,fo[4]=fo[166]=0,po[4]=po[166]=-1,yo[4]=yo[166]=1,_o[4]=_o[166]=1,bo[4]=bo[166]=0,xo[4]=xo[166]=0,lo[16]=lo[154]=0,co[16]=co[154]=1,ho[16]=ho[154]=1,so[16]=so[154]=1,ao[16]=ao[154]=0,uo[16]=uo[154]=1,So[64]=So[106]=0,wo[64]=wo[106]=1,Co[64]=Co[106]=0,no[64]=no[106]=-1,io[64]=io[106]=0,oo[64]=oo[106]=1,So[2]=So[168]=0,wo[2]=wo[168]=-1,Co[2]=Co[168]=1,Io[2]=Io[168]=0,Eo[2]=Eo[168]=-1,Po[2]=Po[168]=0,vo[2]=vo[168]=-1,go[2]=go[168]=0,mo[2]=mo[168]=0,_o[2]=_o[168]=-1,bo[2]=bo[168]=0,xo[2]=xo[168]=1,lo[8]=lo[162]=0,co[8]=co[162]=-1,ho[8]=ho[162]=0,fo[8]=fo[162]=0,po[8]=po[162]=-1,yo[8]=yo[162]=1,vo[8]=vo[162]=1,go[8]=go[162]=0,mo[8]=mo[162]=1,_o[8]=_o[162]=1,bo[8]=bo[162]=0,xo[8]=xo[162]=0,lo[32]=lo[138]=0,co[32]=co[138]=1,ho[32]=ho[138]=1,fo[32]=fo[138]=0,po[32]=po[138]=1,yo[32]=yo[138]=0,no[32]=no[138]=1,io[32]=io[138]=0,oo[32]=oo[138]=0,so[32]=so[138]=1,ao[32]=ao[138]=0,uo[32]=uo[138]=1,Io[128]=Io[42]=0,Eo[128]=Eo[42]=1,Po[128]=Po[42]=1,So[128]=So[42]=0,wo[128]=wo[42]=1,Co[128]=Co[42]=0,no[128]=no[42]=-1,io[128]=io[42]=0,oo[128]=oo[42]=1,so[128]=so[42]=-1,ao[128]=ao[42]=0,uo[128]=uo[42]=0,fo[5]=fo[165]=-1,po[5]=po[165]=0,yo[5]=yo[165]=0,Io[5]=Io[165]=1,Eo[5]=Eo[165]=0,Po[5]=Po[165]=0,_o[20]=_o[150]=0,bo[20]=bo[150]=1,xo[20]=xo[150]=1,so[20]=so[150]=0,ao[20]=ao[150]=-1,uo[20]=uo[150]=1,lo[80]=lo[90]=-1,co[80]=co[90]=0,ho[80]=ho[90]=1,So[80]=So[90]=1,wo[80]=wo[90]=0,Co[80]=Co[90]=1,vo[65]=vo[105]=0,go[65]=go[105]=1,mo[65]=mo[105]=0,no[65]=no[105]=0,io[65]=io[105]=-1,oo[65]=oo[105]=0,lo[160]=lo[10]=-1,co[160]=co[10]=0,ho[160]=ho[10]=1,fo[160]=fo[10]=-1,po[160]=po[10]=0,yo[160]=yo[10]=0,Io[160]=Io[10]=1,Eo[160]=Eo[10]=0,Po[160]=Po[10]=0,So[160]=So[10]=1,wo[160]=wo[10]=0,Co[160]=Co[10]=1,_o[130]=_o[40]=0,bo[130]=bo[40]=1,xo[130]=xo[40]=1,vo[130]=vo[40]=0,go[130]=go[40]=1,mo[130]=mo[40]=0,no[130]=no[40]=0,io[130]=io[40]=-1,oo[130]=oo[40]=0,so[130]=so[40]=0,ao[130]=ao[40]=-1,uo[130]=uo[40]=1,fo[37]=fo[133]=0,po[37]=po[133]=1,yo[37]=yo[133]=1,Io[37]=Io[133]=0,Eo[37]=Eo[133]=1,Po[37]=Po[133]=0,no[37]=no[133]=-1,io[37]=io[133]=0,oo[37]=oo[133]=0,so[37]=so[133]=1,ao[37]=ao[133]=0,uo[37]=uo[133]=0,_o[148]=_o[22]=-1,bo[148]=bo[22]=0,xo[148]=xo[22]=0,Io[148]=Io[22]=0,Eo[148]=Eo[22]=-1,Po[148]=Po[22]=1,So[148]=So[22]=0,wo[148]=wo[22]=1,Co[148]=Co[22]=1,so[148]=so[22]=-1,ao[148]=ao[22]=0,uo[148]=uo[22]=1,lo[82]=lo[88]=0,co[82]=co[88]=-1,ho[82]=ho[88]=1,_o[82]=_o[88]=1,bo[82]=bo[88]=0,xo[82]=xo[88]=1,vo[82]=vo[88]=-1,go[82]=go[88]=0,mo[82]=mo[88]=1,So[82]=So[88]=0,wo[82]=wo[88]=-1,Co[82]=Co[88]=0,lo[73]=lo[97]=0,co[73]=co[97]=1,ho[73]=ho[97]=0,fo[73]=fo[97]=0,po[73]=po[97]=-1,yo[73]=yo[97]=0,vo[73]=vo[97]=1,go[73]=go[97]=0,mo[73]=mo[97]=0,no[73]=no[97]=1,io[73]=io[97]=0,oo[73]=oo[97]=1,lo[145]=lo[25]=0,co[145]=co[25]=-1,ho[145]=ho[25]=0,vo[145]=vo[25]=1,go[145]=go[25]=0,mo[145]=mo[25]=1,Io[145]=Io[25]=0,Eo[145]=Eo[25]=1,Po[145]=Po[25]=1,so[145]=so[25]=-1,ao[145]=ao[25]=0,uo[145]=uo[25]=0,fo[70]=fo[100]=0,po[70]=po[100]=1,yo[70]=yo[100]=0,_o[70]=_o[100]=-1,bo[70]=bo[100]=0,xo[70]=xo[100]=1,So[70]=So[100]=0,wo[70]=wo[100]=-1,Co[70]=Co[100]=1,no[70]=no[100]=1,io[70]=io[100]=0,oo[70]=oo[100]=0,fo[101]=fo[69]=0,po[101]=po[69]=1,yo[101]=yo[69]=0,no[101]=no[69]=1,io[101]=io[69]=0,oo[101]=oo[69]=0,Io[149]=Io[21]=0,Eo[149]=Eo[21]=1,Po[149]=Po[21]=1,so[149]=so[21]=-1,ao[149]=ao[21]=0,uo[149]=uo[21]=0,_o[86]=_o[84]=-1,bo[86]=bo[84]=0,xo[86]=xo[84]=1,So[86]=So[84]=0,wo[86]=wo[84]=-1,Co[86]=Co[84]=1,lo[89]=lo[81]=0,co[89]=co[81]=-1,ho[89]=ho[81]=0,vo[89]=vo[81]=1,go[89]=go[81]=0,mo[89]=mo[81]=1,lo[96]=lo[74]=0,co[96]=co[74]=1,ho[96]=ho[74]=0,fo[96]=fo[74]=-1,po[96]=po[74]=0,yo[96]=yo[74]=1,So[96]=So[74]=1,wo[96]=wo[74]=0,Co[96]=Co[74]=0,no[96]=no[74]=1,io[96]=io[74]=0,oo[96]=oo[74]=1,lo[24]=lo[146]=0,co[24]=co[146]=-1,ho[24]=ho[146]=1,_o[24]=_o[146]=1,bo[24]=bo[146]=0,xo[24]=xo[146]=1,vo[24]=vo[146]=0,go[24]=go[146]=1,mo[24]=mo[146]=1,so[24]=so[146]=0,ao[24]=ao[146]=-1,uo[24]=uo[146]=0,fo[6]=fo[164]=-1,po[6]=po[164]=0,yo[6]=yo[164]=1,_o[6]=_o[164]=-1,bo[6]=bo[164]=0,xo[6]=xo[164]=0,Io[6]=Io[164]=0,Eo[6]=Eo[164]=-1,Po[6]=Po[164]=1,So[6]=So[164]=1,wo[6]=wo[164]=0,Co[6]=Co[164]=0,vo[129]=vo[41]=0,go[129]=go[41]=1,mo[129]=mo[41]=1,Io[129]=Io[41]=0,Eo[129]=Eo[41]=1,Po[129]=Po[41]=0,no[129]=no[41]=-1,io[129]=io[41]=0,oo[129]=oo[41]=0,so[129]=so[41]=0,ao[129]=ao[41]=-1,uo[129]=uo[41]=0,_o[66]=_o[104]=0,bo[66]=bo[104]=1,xo[66]=xo[104]=0,vo[66]=vo[104]=-1,go[66]=go[104]=0,mo[66]=mo[104]=1,So[66]=So[104]=0,wo[66]=wo[104]=-1,Co[66]=Co[104]=0,no[66]=no[104]=0,io[66]=io[104]=-1,oo[66]=oo[104]=1,lo[144]=lo[26]=-1,co[144]=co[26]=0,ho[144]=ho[26]=0,Io[144]=Io[26]=1,Eo[144]=Eo[26]=0,Po[144]=Po[26]=1,So[144]=So[26]=0,wo[144]=wo[26]=1,Co[144]=Co[26]=1,so[144]=so[26]=-1,ao[144]=ao[26]=0,uo[144]=uo[26]=1,fo[36]=fo[134]=0,po[36]=po[134]=1,yo[36]=yo[134]=1,_o[36]=_o[134]=0,bo[36]=bo[134]=1,xo[36]=xo[134]=0,no[36]=no[134]=0,io[36]=io[134]=-1,oo[36]=oo[134]=1,so[36]=so[134]=1,ao[36]=ao[134]=0,uo[36]=uo[134]=0,lo[9]=lo[161]=-1,co[9]=co[161]=0,ho[9]=ho[161]=0,fo[9]=fo[161]=0,po[9]=po[161]=-1,yo[9]=yo[161]=0,vo[9]=vo[161]=1,go[9]=go[161]=0,mo[9]=mo[161]=0,Io[9]=Io[161]=1,Eo[9]=Eo[161]=0,Po[9]=Po[161]=1,lo[136]=0,co[136]=1,ho[136]=1,fo[136]=0,po[136]=1,yo[136]=0,_o[136]=-1,bo[136]=0,xo[136]=1,vo[136]=-1,go[136]=0,mo[136]=0,Io[136]=0,Eo[136]=-1,Po[136]=0,So[136]=0,wo[136]=-1,Co[136]=1,no[136]=1,io[136]=0,oo[136]=0,so[136]=1,ao[136]=0,uo[136]=1,lo[34]=0,co[34]=-1,ho[34]=0,fo[34]=0,po[34]=-1,yo[34]=1,_o[34]=1,bo[34]=0,xo[34]=0,vo[34]=1,go[34]=0,mo[34]=1,Io[34]=0,Eo[34]=1,Po[34]=1,So[34]=0,wo[34]=1,Co[34]=0,no[34]=-1,io[34]=0,oo[34]=1,so[34]=-1,ao[34]=0,uo[34]=0,lo[35]=0,co[35]=1,ho[35]=1,fo[35]=0,po[35]=-1,yo[35]=1,_o[35]=1,bo[35]=0,xo[35]=0,vo[35]=-1,go[35]=0,mo[35]=0,Io[35]=0,Eo[35]=-1,Po[35]=0,So[35]=0,wo[35]=1,Co[35]=0,no[35]=-1,io[35]=0,oo[35]=1,so[35]=1,ao[35]=0,uo[35]=1,lo[153]=0,co[153]=1,ho[153]=1,vo[153]=-1,go[153]=0,mo[153]=0,Io[153]=0,Eo[153]=-1,Po[153]=0,so[153]=1,ao[153]=0,uo[153]=1,fo[102]=0,po[102]=-1,yo[102]=1,_o[102]=1,bo[102]=0,xo[102]=0,So[102]=0,wo[102]=1,Co[102]=0,no[102]=-1,io[102]=0,oo[102]=1,lo[155]=0,co[155]=-1,ho[155]=0,vo[155]=1,go[155]=0,mo[155]=1,Io[155]=0,Eo[155]=1,Po[155]=1,so[155]=-1,ao[155]=0,uo[155]=0,fo[103]=0,po[103]=1,yo[103]=0,_o[103]=-1,bo[103]=0,xo[103]=1,So[103]=0,wo[103]=-1,Co[103]=1,no[103]=1,io[103]=0,oo[103]=0,lo[152]=0,co[152]=1,ho[152]=1,_o[152]=-1,bo[152]=0,xo[152]=1,vo[152]=-1,go[152]=0,mo[152]=0,Io[152]=0,Eo[152]=-1,Po[152]=0,So[152]=0,wo[152]=-1,Co[152]=1,so[152]=1,ao[152]=0,uo[152]=1,lo[156]=0,co[156]=-1,ho[156]=1,_o[156]=1,bo[156]=0,xo[156]=1,vo[156]=-1,go[156]=0,mo[156]=0,Io[156]=0,Eo[156]=-1,Po[156]=0,So[156]=0,wo[156]=1,Co[156]=1,so[156]=-1,ao[156]=0,uo[156]=1,lo[137]=0,co[137]=1,ho[137]=1,fo[137]=0,po[137]=1,yo[137]=0,vo[137]=-1,go[137]=0,mo[137]=0,Io[137]=0,Eo[137]=-1,Po[137]=0,no[137]=1,io[137]=0,oo[137]=0,so[137]=1,ao[137]=0,uo[137]=1,lo[139]=0,co[139]=1,ho[139]=1,fo[139]=0,po[139]=-1,yo[139]=0,vo[139]=1,go[139]=0,mo[139]=0,Io[139]=0,Eo[139]=1,Po[139]=0,no[139]=-1,io[139]=0,oo[139]=0,so[139]=1,ao[139]=0,uo[139]=1,lo[98]=0,co[98]=-1,ho[98]=0,fo[98]=0,po[98]=-1,yo[98]=1,_o[98]=1,bo[98]=0,xo[98]=0,vo[98]=1,go[98]=0,mo[98]=1,So[98]=0,wo[98]=1,Co[98]=0,no[98]=-1,io[98]=0,oo[98]=1,lo[99]=0,co[99]=1,ho[99]=0,fo[99]=0,po[99]=-1,yo[99]=1,_o[99]=1,bo[99]=0,xo[99]=0,vo[99]=-1,go[99]=0,mo[99]=1,So[99]=0,wo[99]=-1,Co[99]=0,no[99]=1,io[99]=0,oo[99]=1,fo[38]=0,po[38]=-1,yo[38]=1,_o[38]=1,bo[38]=0,xo[38]=0,Io[38]=0,Eo[38]=1,Po[38]=1,So[38]=0,wo[38]=1,Co[38]=0,no[38]=-1,io[38]=0,oo[38]=1,so[38]=-1,ao[38]=0,uo[38]=0,fo[39]=0,po[39]=1,yo[39]=1,_o[39]=-1,bo[39]=0,xo[39]=0,Io[39]=0,Eo[39]=-1,Po[39]=1,So[39]=0,wo[39]=1,Co[39]=0,no[39]=-1,io[39]=0,oo[39]=1,so[39]=1,ao[39]=0,uo[39]=0;var Mo=function(t){return[[t.bottomleft,0],[0,0],[0,t.leftbottom]]},Lo=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0]]},No=function(t){return[[t.topright,1],[1,1],[1,t.righttop]]},To=function(t){return[[0,t.lefttop],[0,1],[t.topleft,1]]},Oo=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop]]},Ao=function(t){return[[t.bottomright,0],[t.bottomleft,0],[1,t.righttop],[1,t.rightbottom]]},Ro=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.topleft,1],[t.topright,1]]},Fo=function(t){return[[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},Do=[],ko=[],jo=[],Go=[],Bo=[],Uo=[],qo=[],zo=[];Go[1]=Bo[1]=18,Go[169]=Bo[169]=18,jo[4]=ko[4]=12,jo[166]=ko[166]=12,Do[16]=zo[16]=4,Do[154]=zo[154]=4,Uo[64]=qo[64]=22,Uo[106]=qo[106]=22,jo[2]=Uo[2]=17,Go[2]=Bo[2]=18,jo[168]=Uo[168]=17,Go[168]=Bo[168]=18,Do[8]=Go[8]=9,ko[8]=jo[8]=12,Do[162]=Go[162]=9,ko[162]=jo[162]=12,Do[32]=zo[32]=4,ko[32]=qo[32]=1,Do[138]=zo[138]=4,ko[138]=qo[138]=1,Bo[128]=zo[128]=21,Uo[128]=qo[128]=22,Bo[42]=zo[42]=21,Uo[42]=qo[42]=22,ko[5]=Bo[5]=14,ko[165]=Bo[165]=14,jo[20]=zo[20]=6,jo[150]=zo[150]=6,Do[80]=Uo[80]=11,Do[90]=Uo[90]=11,Go[65]=qo[65]=3,Go[105]=qo[105]=3,Do[160]=Uo[160]=11,ko[160]=Bo[160]=14,Do[10]=Uo[10]=11,ko[10]=Bo[10]=14,jo[130]=zo[130]=6,Go[130]=qo[130]=3,jo[40]=zo[40]=6,Go[40]=qo[40]=3,ko[101]=qo[101]=1,ko[69]=qo[69]=1,Bo[149]=zo[149]=21,Bo[21]=zo[21]=21,jo[86]=Uo[86]=17,jo[84]=Uo[84]=17,Do[89]=Go[89]=9,Do[81]=Go[81]=9,Do[96]=qo[96]=0,ko[96]=Uo[96]=15,Do[74]=qo[74]=0,ko[74]=Uo[74]=15,Do[24]=jo[24]=8,Go[24]=zo[24]=7,Do[146]=jo[146]=8,Go[146]=zo[146]=7,ko[6]=Uo[6]=15,jo[6]=Bo[6]=16,ko[164]=Uo[164]=15,jo[164]=Bo[164]=16,Go[129]=zo[129]=7,Bo[129]=qo[129]=20,Go[41]=zo[41]=7,Bo[41]=qo[41]=20,jo[66]=qo[66]=2,Go[66]=Uo[66]=19,jo[104]=qo[104]=2,Go[104]=Uo[104]=19,Do[144]=Bo[144]=10,Uo[144]=zo[144]=23,Do[26]=Bo[26]=10,Uo[26]=zo[26]=23,ko[36]=zo[36]=5,jo[36]=qo[36]=2,ko[134]=zo[134]=5,jo[134]=qo[134]=2,Do[9]=Bo[9]=10,ko[9]=Go[9]=13,Do[161]=Bo[161]=10,ko[161]=Go[161]=13,ko[37]=zo[37]=5,Bo[37]=qo[37]=20,ko[133]=zo[133]=5,Bo[133]=qo[133]=20,jo[148]=Bo[148]=16,Uo[148]=zo[148]=23,jo[22]=Bo[22]=16,Uo[22]=zo[22]=23,Do[82]=jo[82]=8,Go[82]=Uo[82]=19,Do[88]=jo[88]=8,Go[88]=Uo[88]=19,Do[73]=qo[73]=0,ko[73]=Go[73]=13,Do[97]=qo[97]=0,ko[97]=Go[97]=13,Do[145]=Go[145]=9,Bo[145]=zo[145]=21,Do[25]=Go[25]=9,Bo[25]=zo[25]=21,ko[70]=qo[70]=1,jo[70]=Uo[70]=17,ko[100]=qo[100]=1,jo[100]=Uo[100]=17,Do[34]=Go[34]=9,ko[34]=jo[34]=12,Bo[34]=zo[34]=21,Uo[34]=qo[34]=22,Do[136]=zo[136]=4,ko[136]=qo[136]=1,jo[136]=Uo[136]=17,Go[136]=Bo[136]=18,Do[35]=zo[35]=4,ko[35]=jo[35]=12,Go[35]=Bo[35]=18,Uo[35]=qo[35]=22,Do[153]=zo[153]=4,Go[153]=Bo[153]=18,ko[102]=jo[102]=12,Uo[102]=qo[102]=22,Do[155]=Go[155]=9,Bo[155]=zo[155]=23,ko[103]=qo[103]=1,jo[103]=Uo[103]=17,Do[152]=zo[152]=4,jo[152]=Uo[152]=17,Go[152]=Bo[152]=18,Do[156]=jo[156]=8,Go[156]=Bo[156]=18,Uo[156]=zo[156]=23,Do[137]=zo[137]=4,ko[137]=qo[137]=1,Go[137]=Bo[137]=18,Do[139]=zo[139]=4,ko[139]=Go[139]=13,Bo[139]=qo[139]=20,Do[98]=Go[98]=9,ko[98]=jo[98]=12,Uo[98]=qo[98]=22,Do[99]=qo[99]=0,ko[99]=jo[99]=12,Go[99]=Uo[99]=19,ko[38]=jo[38]=12,Bo[38]=zo[38]=21,Uo[38]=qo[38]=22,ko[39]=zo[39]=5,jo[39]=Bo[39]=16,Uo[39]=qo[39]=22;var Vo=[];function Wo(t,e,r){return(t-e)/(r-e)}function Ho(t){return t.constructor.toString().indexOf("Array")>-1}function Xo(t,e,r,n,i,o){for(var s=t.cells[r][e],a=s.cval_real,u=e+n,l=r+i,c=[],h=!1;!h;){if(void 0===t.cells[l]||void 0===t.cells[l][u])if(l-=i,u-=n,a=(s=t.cells[l][u]).cval_real,-1===i)if(0===o)if(1&a)c.push([u,l]),n=-1,i=0,o=0;else{if(!(4&a)){c.push([u+s.bottomright,l]),n=0,i=1,o=1,h=!0;break}c.push([u+1,l]),n=1,i=0,o=0}else{if(!(1&a)){if(4&a){c.push([u+s.bottomright,l]),n=0,i=1,o=1,h=!0;break}c.push([u+s.bottomleft,l]),n=0,i=1,o=0,h=!0;break}c.push([u,l]),n=-1,i=0,o=0}else if(1===i)if(0===o){if(!(a&ro)){if(a&eo){c.push([u+s.topleft,l+1]),n=0,i=-1,o=0,h=!0;break}c.push([u+s.topright,l+1]),n=0,i=-1,o=1,h=!0;break}c.push([u+1,l+1]),n=1,i=0,o=1}else c.push([u+1,l+1]),n=1,i=0,o=1;else if(-1===n)if(0===o){if(!(a&eo)){if(1&a){c.push([u,l+s.leftbottom]),n=1,i=0,o=0,h=!0;break}c.push([u,l+s.lefttop]),n=1,i=0,o=1,h=!0;break}c.push([u,l+1]),n=0,i=1,o=0}else{if(!(a&eo)){console.log("MarchingSquaresJS-isoBands: wtf");break}c.push([u,l+1]),n=0,i=1,o=0}else{if(1!==n){console.log("MarchingSquaresJS-isoBands: we came from nowhere!");break}if(0===o){if(!(4&a)){c.push([u+1,l+s.rightbottom]),n=-1,i=0,o=0,h=!0;break}c.push([u+1,l]),n=0,i=-1,o=1}else{if(!(4&a)){if(a&ro){c.push([u+1,l+s.righttop]),n=-1,i=0,o=1;break}c.push([u+1,l+s.rightbottom]),n=-1,i=0,o=0,h=!0;break}c.push([u+1,l]),n=0,i=-1,o=1}}else if(a=(s=t.cells[l][u]).cval_real,-1===n)if(0===o)if(void 0!==t.cells[l-1]&&void 0!==t.cells[l-1][u])n=0,i=-1,o=1;else{if(!(1&a)){c.push([u+s.bottomright,l]),n=0,i=1,o=1,h=!0;break}c.push([u,l])}else{if(!(a&eo)){console.log("MarchingSquaresJS-isoBands: found entry from top at "+u+","+l);break}console.log("MarchingSquaresJS-isoBands: proceeding in x-direction!")}else if(1===n){if(0===o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[l+1]&&void 0!==t.cells[l+1][u])n=0,i=1,o=0;else{if(!(a&ro)){c.push([u+s.topleft,l+1]),n=0,i=-1,o=0,h=!0;break}c.push([u+1,l+1]),n=1,i=0,o=1}}else if(-1===i){if(1!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[l][u+1])n=1,i=0,o=1;else{if(!(4&a)){c.push([u+1,l+s.righttop]),n=-1,i=0,o=1,h=!0;break}c.push([u+1,l]),n=0,i=-1,o=1}}else{if(1!==i){console.log("MarchingSquaresJS-isoBands: where did we came from???");break}if(0!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[l][u-1])n=-1,i=0,o=0;else{if(!(a&eo)){c.push([u,l+s.leftbottom]),n=1,i=0,o=0,h=!0;break}c.push([u,l+1]),n=0,i=1,o=0}}if(l+=i,(u+=n)===e&&l===r)break}return{path:c,i:u,j:l,x:n,y:i,o:o}}function Zo(t){if(t.edges.length>0){var e=t.edges[t.edges.length-1],r=t.cval_real;switch(e){case 0:return r&ro?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 1:return 4&r?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 2:return 4&r?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 3:return 1&r?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 4:return r&ro?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 5:return 4&r?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 6:return 4&r?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 7:return 1&r?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 8:return 4&r?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.righttop],x:-1,y:0,o:1};case 9:return 1&r?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 10:return 1&r?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.righttop],x:-1,y:0,o:1};case 11:return r&eo?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 12:return 4&r?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 13:return 1&r?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 14:return 1&r?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 15:return r&eo?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 16:return 4&r?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 17:return r&eo?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 18:return 1&r?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 19:return r&eo?{p:[t.bottomleft,0],x:0,y:1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 20:return r&eo?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 21:return r&ro?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.topright,1],x:0,y:-1,o:1};case 22:return r&eo?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 23:return r&ro?{p:[0,t.lefttop],x:1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};default:console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t)}}return null}function Yo(t,e,r,n){var i,o,s,a,u,l=t.cval;switch(e){case-1:switch(n){case 0:i=ko[l],s=fo[l],a=po[l],u=yo[l];break;default:i=Do[l],s=lo[l],a=co[l],u=ho[l]}break;case 1:switch(n){case 0:i=Bo[l],s=Io[l],a=Eo[l],u=Po[l];break;default:i=Uo[l],s=So[l],a=wo[l],u=Co[l]}break;default:switch(r){case-1:switch(n){case 0:i=qo[l],s=no[l],a=io[l],u=oo[l];break;default:i=zo[l],s=so[l],a=ao[l],u=uo[l]}break;case 1:switch(n){case 0:i=Go[l],s=vo[l],a=go[l],u=mo[l];break;default:i=jo[l],s=_o[l],a=bo[l],u=xo[l]}}}if(o=t.edges.indexOf(i),void 0===t.edges[o])return null;switch(function(t,e){delete t.edges[e];for(var r=e+1;r<t.edges.length;r++)t.edges[r-1]=t.edges[r];t.edges.pop()}(t,o),l=t.cval_real,i){case 0:l&ro?(e=t.topleft,r=1):(e=1,r=t.righttop);break;case 1:4&l?(e=1,r=t.rightbottom):(e=t.topleft,r=1);break;case 2:4&l?(e=t.topleft,r=1):(e=t.bottomright,r=0);break;case 3:1&l?(e=t.bottomleft,r=0):(e=t.topleft,r=1);break;case 4:l&ro?(e=t.topright,r=1):(e=1,r=t.righttop);break;case 5:4&l?(e=1,r=t.rightbottom):(e=t.topright,r=1);break;case 6:4&l?(e=t.topright,r=1):(e=t.bottomright,r=0);break;case 7:1&l?(e=t.bottomleft,r=0):(e=t.topright,r=1);break;case 8:4&l?(e=1,r=t.righttop):(e=t.bottomright,r=0);break;case 9:1&l?(e=t.bottomleft,r=0):(e=1,r=t.righttop);break;case 10:1&l?(e=1,r=t.righttop):(e=0,r=t.leftbottom);break;case 11:l&eo?(e=0,r=t.lefttop):(e=1,r=t.righttop);break;case 12:4&l?(e=1,r=t.rightbottom):(e=t.bottomright,r=0);break;case 13:1&l?(e=t.bottomleft,r=0):(e=1,r=t.rightbottom);break;case 14:1&l?(e=1,r=t.rightbottom):(e=0,r=t.leftbottom);break;case 15:l&eo?(e=0,r=t.lefttop):(e=1,r=t.rightbottom);break;case 16:4&l?(e=0,r=t.leftbottom):(e=t.bottomright,r=0);break;case 17:l&eo?(e=0,r=t.lefttop):(e=t.bottomright,r=0);break;case 18:1&l?(e=t.bottomleft,r=0):(e=0,r=t.leftbottom);break;case 19:l&eo?(e=0,r=t.lefttop):(e=t.bottomleft,r=0);break;case 20:l&eo?(e=0,r=t.leftbottom):(e=t.topleft,r=1);break;case 21:l&ro?(e=t.topright,r=1):(e=0,r=t.leftbottom);break;case 22:l&eo?(e=0,r=t.lefttop):(e=t.topleft,r=1);break;case 23:l&ro?(e=t.topright,r=1):(e=0,r=t.lefttop);break;default:return console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t),null}return void 0!==e&&void 0!==r&&void 0!==s&&void 0!==a&&void 0!==u||(console.log("MarchingSquaresJS-isoBands: undefined value!"),console.log(t),console.log(e+" "+r+" "+s+" "+a+" "+u)),{p:[e,r],x:s,y:a,o:u}}function Jo(t){var e=[],r=[];t.forEach(function(t){var n=zn(c([t]));r.push(n),e.push({ring:t,area:n})}),r.sort(function(t,e){return e-t});var n=[];return r.forEach(function(t){for(var r=0;r<e.length;r++)if(e[r].area===t){n.push(e[r].ring),e.splice(r,1);break}}),n}function Qo(t){for(var e=t.map(function(t){return{lrCoordinates:t,grouped:!1}}),r=[];!$o(e);)for(var n=0;n<e.length;n++)if(!e[n].grouped){var i=[];i.push(e[n].lrCoordinates),e[n].grouped=!0;for(var o=c([e[n].lrCoordinates]),s=n+1;s<e.length;s++){if(!e[s].grouped)Ko(c([e[s].lrCoordinates]),o)&&(i.push(e[s].lrCoordinates),e[s].grouped=!0)}r.push(i)}return r}function Ko(t,e){for(var r=Sr(t),n=0;n<r.features.length;n++)if(!ge(r.features[n],e))return!1;return!0}function $o(t){for(var e=0;e<t.length;e++)if(!1===t[e].grouped)return!1;return!0}function ts(t,e,r){if(!L(r=r||{}))throw new Error("options is invalid");var n=r.pivot,i=r.mutate;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("angle is required");return 0===e||(n||(n=xr(t)),!1!==i&&void 0!==i||(t=Ie(t)),A(t,function(t){var r=Ui(n,t)+e,i=Fn(n,t),o=$(zi(n,i,r));t[0]=o[0],t[1]=o[1]})),t}function es(t,e,r){if(!L(r=r||{}))throw new Error("options is invalid");var n=r.origin,i=r.mutate;if(!t)throw new Error("geojson required");if("number"!=typeof e||0===e)throw new Error("invalid factor");var o=Array.isArray(n)||"object"==typeof n;return!0!==i&&(t=Ie(t)),"FeatureCollection"!==t.type||o?rs(t,e,n):(k(t,function(r,i){t.features[i]=rs(r,e,n)}),t)}function rs(t,e,r){var n="Point"===ot(t);return r=function(t,e){null==e&&(e="centroid");if(Array.isArray(e)||"object"==typeof e)return K(e);var r=t.bbox?t.bbox:Q(t),n=r[0],i=r[1],o=r[2],s=r[3];switch(e){case"sw":case"southwest":case"westsouth":case"bottomleft":return u([n,i]);case"se":case"southeast":case"eastsouth":case"bottomright":return u([o,i]);case"nw":case"northwest":case"westnorth":case"topleft":return u([n,s]);case"ne":case"northeast":case"eastnorth":case"topright":return u([o,s]);case"center":return br(t);case void 0:case null:case"centroid":return xr(t);default:throw new Error("invalid origin")}}(t,r),1===e||n||A(t,function(t){var n=Fn(r,t),i=Ui(r,t),o=$(zi(r,n*e,i));t[0]=o[0],t[1]=o[1],3===t.length&&(t[2]*=e)}),t}function ns(t){var e=t[0],r=t[1];return[r[0]-e[0],r[1]-e[1]]}function is(t,e){return t[0]*e[1]-e[0]*t[1]}function os(t,e){return!function(t,e){return 0===is(ns(t),ns(e))}(t,e)&&function(t,e){var r,n,i=t[0],o=ns(t),s=e[0],a=ns(e),u=is(o,a);return function(t,e){return[t[0]+e[0],t[1]+e[1]]}(i,function(t,e){return[t*e[0],t*e[1]]}(is((n=i,[(r=s)[0]-n[0],r[1]-n[1]]),a)/u,o))}(t,e)}function ss(t,e,r){var n=[],i=S(e,r),o=$(t),s=[];return o.forEach(function(t,e){if(e!==o.length-1){var r=(l=t,c=o[e+1],h=i,f=Math.sqrt((l[0]-c[0])*(l[0]-c[0])+(l[1]-c[1])*(l[1]-c[1])),p=l[0]+h*(c[1]-l[1])/f,d=c[0]+h*(c[1]-l[1])/f,y=l[1]+h*(l[0]-c[0])/f,v=c[1]+h*(l[0]-c[0])/f,[[p,y],[d,v]]);if(n.push(r),e>0){var a=n[e-1],u=os(r,a);!1!==u&&(a[1]=u,r[0]=u),s.push(a[0]),e===o.length-2&&(s.push(r[0]),s.push(r[1]))}2===o.length&&(s.push(r[0]),s.push(r[1]))}var l,c,h,f,p,d,y,v}),f(s,t.properties)}function as(t,e,r){var n=e[0]-t[0],i=e[1]-t[1],o=r[0]-e[0];return function(t){return(t>0)-(t<0)||+t}(n*(r[1]-e[1])-o*i)}function us(t,e){return e.geometry.coordinates[0].every(function(e){return ge(u(e),t)})}Vo[1]=Vo[169]=Mo,Vo[4]=Vo[166]=Lo,Vo[16]=Vo[154]=No,Vo[64]=Vo[106]=To,Vo[168]=Vo[2]=Oo,Vo[162]=Vo[8]=Ao,Vo[138]=Vo[32]=Ro,Vo[42]=Vo[128]=Fo,Vo[5]=Vo[165]=function(t){return[[0,0],[0,t.leftbottom],[1,t.rightbottom],[1,0]]},Vo[20]=Vo[150]=function(t){return[[1,0],[t.bottomright,0],[t.topright,1],[1,1]]},Vo[80]=Vo[90]=function(t){return[[1,1],[1,t.righttop],[0,t.lefttop],[0,1]]},Vo[65]=Vo[105]=function(t){return[[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},Vo[160]=Vo[10]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.leftbottom],[0,t.lefttop]]},Vo[130]=Vo[40]=function(t){return[[t.topleft,1],[t.topright,1],[t.bottomright,0],[t.bottomleft,0]]},Vo[85]=function(){return[[0,0],[0,1],[1,1],[1,0]]},Vo[101]=Vo[69]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,1],[t.topleft,1]]},Vo[149]=Vo[21]=function(t){return[[t.topright,1],[1,1],[1,0],[0,0],[0,t.leftbottom]]},Vo[86]=Vo[84]=function(t){return[[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[1,1]]},Vo[89]=Vo[81]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,1]]},Vo[96]=Vo[74]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.lefttop],[0,1],[t.topleft,1]]},Vo[24]=Vo[146]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[t.topright,1]]},Vo[6]=Vo[164]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop]]},Vo[129]=Vo[41]=function(t){return[[t.topright,1],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1]]},Vo[66]=Vo[104]=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Vo[144]=Vo[26]=function(t){return[[1,1],[1,t.righttop],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},Vo[36]=Vo[134]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[t.topleft,1],[t.topright,1]]},Vo[9]=Vo[161]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom]]},Vo[37]=Vo[133]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},Vo[148]=Vo[22]=function(t){return[[1,1],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},Vo[82]=Vo[88]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1]]},Vo[73]=Vo[97]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},Vo[145]=Vo[25]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},Vo[70]=Vo[100]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Vo[34]=function(t){return[Fo(t),Ao(t)]},Vo[35]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},Vo[136]=function(t){return[Ro(t),Oo(t)]},Vo[153]=function(t){return[No(t),Mo(t)]},Vo[102]=function(t){return[Lo(t),To(t)]},Vo[155]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},Vo[103]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Vo[152]=function(t){return[No(t),Oo(t)]},Vo[156]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},Vo[137]=function(t){return[Ro(t),Mo(t)]},Vo[139]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},Vo[98]=function(t){return[Ao(t),To(t)]},Vo[99]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Vo[38]=function(t){return[Lo(t),Fo(t)]},Vo[39]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]};var ls=function(){function t(e){this.id=t.buildId(e),this.coordinates=e,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1}return t.buildId=function(t){return t.join(",")},t.prototype.removeInnerEdge=function(t){this.innerEdges=this.innerEdges.filter(function(e){return e.from.id!==t.from.id})},t.prototype.removeOuterEdge=function(t){this.outerEdges=this.outerEdges.filter(function(e){return e.to.id!==t.to.id})},t.prototype.addOuterEdge=function(t){this.outerEdges.push(t),this.outerEdgesSorted=!1},t.prototype.sortOuterEdges=function(){var t=this;this.outerEdgesSorted||(this.outerEdges.sort(function(e,r){var n=e.to,i=r.to;if(n.coordinates[0]-t.coordinates[0]>=0&&i.coordinates[0]-t.coordinates[0]<0)return 1;if(n.coordinates[0]-t.coordinates[0]<0&&i.coordinates[0]-t.coordinates[0]>=0)return-1;if(n.coordinates[0]-t.coordinates[0]==0&&i.coordinates[0]-t.coordinates[0]==0)return n.coordinates[1]-t.coordinates[1]>=0||i.coordinates[1]-t.coordinates[1]>=0?n.coordinates[1]-i.coordinates[1]:i.coordinates[1]-n.coordinates[1];var o=as(t.coordinates,n.coordinates,i.coordinates);return o<0?1:o>0?-1:Math.pow(n.coordinates[0]-t.coordinates[0],2)+Math.pow(n.coordinates[1]-t.coordinates[1],2)-(Math.pow(i.coordinates[0]-t.coordinates[0],2)+Math.pow(i.coordinates[1]-t.coordinates[1],2))}),this.outerEdgesSorted=!0)},t.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},t.prototype.getOuterEdge=function(t){return this.sortOuterEdges(),this.outerEdges[t]},t.prototype.addInnerEdge=function(t){this.innerEdges.push(t)},t}(),cs=function(){function t(t,e){this.from=t,this.to=e,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)}return t.prototype.getSymetric=function(){return this.symetric||(this.symetric=new t(this.to,this.from),this.symetric.symetric=this),this.symetric},t.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},t.prototype.isEqual=function(t){return this.from.id===t.from.id&&this.to.id===t.to.id},t.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},t.prototype.toLineString=function(){return f([this.from.coordinates,this.to.coordinates])},t.prototype.compareTo=function(t){return as(t.from.coordinates,t.to.coordinates,this.to.coordinates)},t}(),hs=function(){function t(){this.edges=[],this.polygon=void 0,this.envelope=void 0}return t.prototype.push=function(t){this.edges.push(t),this.polygon=this.envelope=void 0},t.prototype.get=function(t){return this.edges[t]},Object.defineProperty(t.prototype,"length",{get:function(){return this.edges.length},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t){this.edges.forEach(t)},t.prototype.map=function(t){return this.edges.map(t)},t.prototype.some=function(t){return this.edges.some(t)},t.prototype.isValid=function(){return!0},t.prototype.isHole=function(){var t=this,e=this.edges.reduce(function(e,r,n){return r.from.coordinates[1]>t.edges[e].from.coordinates[1]&&(e=n),e},0),r=(0===e?this.length:e)-1,n=(e+1)%this.length,i=as(this.edges[r].from.coordinates,this.edges[e].from.coordinates,this.edges[n].from.coordinates);return 0===i?this.edges[r].from.coordinates[0]>this.edges[n].from.coordinates[0]:i>0},t.prototype.toMultiPoint=function(){return v(this.edges.map(function(t){return t.from.coordinates}))},t.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var t=this.edges.map(function(t){return t.from.coordinates});return t.push(this.edges[0].from.coordinates),this.polygon=c([t])},t.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=yr(this.toPolygon())},t.findEdgeRingContaining=function(t,e){var r,n,i=t.getEnvelope();return e.forEach(function(e){var o,s,a,l,c,h,f=e.getEnvelope();if((n&&(r=n.getEnvelope()),s=i,a=(o=f).geometry.coordinates[0].map(function(t){return t[0]}),l=o.geometry.coordinates[0].map(function(t){return t[1]}),c=s.geometry.coordinates[0].map(function(t){return t[0]}),h=s.geometry.coordinates[0].map(function(t){return t[1]}),Math.max.apply(null,a)!==Math.max.apply(null,c)||Math.max.apply(null,l)!==Math.max.apply(null,h)||Math.min.apply(null,a)!==Math.min.apply(null,c)||Math.min.apply(null,l)!==Math.min.apply(null,h))&&us(f,i)){for(var p=t.map(function(t){return t.from.coordinates}),d=void 0,y=function(t){e.some(function(e){return r=t,n=e.from.coordinates,r[0]===n[0]&&r[1]===n[1];var r,n})||(d=t)},v=0,g=p;v<g.length;v++){y(g[v])}d&&e.inside(u(d))&&(n&&!us(r,f)||(n=e))}}),n},t.prototype.inside=function(t){return ge(t,this.toPolygon())},t}();var fs=function(){function t(){this.edges=[],this.nodes={}}return t.fromGeoJson=function(e){!function(t){if(!t)throw new Error("No geojson passed");if("FeatureCollection"!==t.type&&"GeometryCollection"!==t.type&&"MultiLineString"!==t.type&&"LineString"!==t.type&&"Feature"!==t.type)throw new Error("Invalid input type '"+t.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}(e);var r=new t;return q(e,function(t){rt(t,"LineString","Graph::fromGeoJson"),R(t,function(t,e){if(t){var n=r.getNode(t),i=r.getNode(e);r.addEdge(n,i)}return e})}),r},t.prototype.getNode=function(t){var e=ls.buildId(t),r=this.nodes[e];return r||(r=this.nodes[e]=new ls(t)),r},t.prototype.addEdge=function(t,e){var r=new cs(t,e),n=r.getSymetric();this.edges.push(r),this.edges.push(n)},t.prototype.deleteDangles=function(){var t=this;Object.keys(this.nodes).map(function(e){return t.nodes[e]}).forEach(function(e){return t._removeIfDangle(e)})},t.prototype._removeIfDangle=function(t){var e=this;if(t.innerEdges.length<=1){var r=t.getOuterEdges().map(function(t){return t.to});this.removeNode(t),r.forEach(function(t){return e._removeIfDangle(t)})}},t.prototype.deleteCutEdges=function(){var t=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach(function(e){e.label===e.symetric.label&&(t.removeEdge(e.symetric),t.removeEdge(e))})},t.prototype._computeNextCWEdges=function(t){var e=this;void 0===t?Object.keys(this.nodes).forEach(function(t){return e._computeNextCWEdges(e.nodes[t])}):t.getOuterEdges().forEach(function(e,r){t.getOuterEdge((0===r?t.getOuterEdges().length:r)-1).symetric.next=e})},t.prototype._computeNextCCWEdges=function(t,e){for(var r,n,i=t.getOuterEdges(),o=i.length-1;o>=0;--o){var s=i[o],a=s.symetric,u=void 0,l=void 0;s.label===e&&(u=s),a.label===e&&(l=a),u&&l&&(l&&(n=l),u&&(n&&(n.next=u,n=void 0),r||(r=u)))}n&&(n.next=r)},t.prototype._findLabeledEdgeRings=function(){var t=[],e=0;return this.edges.forEach(function(r){if(!(r.label>=0)){t.push(r);var n=r;do{n.label=e,n=n.next}while(!r.isEqual(n));e++}}),t},t.prototype.getEdgeRings=function(){var t=this;this._computeNextCWEdges(),this.edges.forEach(function(t){t.label=void 0}),this._findLabeledEdgeRings().forEach(function(e){t._findIntersectionNodes(e).forEach(function(r){t._computeNextCCWEdges(r,e.label)})});var e=[];return this.edges.forEach(function(r){r.ring||e.push(t._findEdgeRing(r))}),e},t.prototype._findIntersectionNodes=function(t){var e=[],r=t,n=function(){var n=0;r.from.getOuterEdges().forEach(function(e){e.label===t.label&&++n}),n>1&&e.push(r.from),r=r.next};do{n()}while(!t.isEqual(r));return e},t.prototype._findEdgeRing=function(t){var e=t,r=new hs;do{r.push(e),e.ring=r,e=e.next}while(!t.isEqual(e));return r},t.prototype.removeNode=function(t){var e=this;t.getOuterEdges().forEach(function(t){return e.removeEdge(t)}),t.innerEdges.forEach(function(t){return e.removeEdge(t)}),delete this.nodes[t.id]},t.prototype.removeEdge=function(t){this.edges=this.edges.filter(function(e){return!e.isEqual(t)}),t.deleteEdge()},t}();function ps(t,e){var r=!0;return q(t,function(t){q(e,function(e){if(!1===r)return!1;r=function(t,e){switch(t.type){case"Point":switch(e.type){case"Point":return r=t.coordinates,n=e.coordinates,!(r[0]===n[0]&&r[1]===n[1]);case"LineString":return!ds(e,t);case"Polygon":return!ge(t,e)}break;case"LineString":switch(e.type){case"Point":return!ds(t,e);case"LineString":return!function(t,e){if(On(t,e).features.length>0)return!0;return!1}(t,e);case"Polygon":return!ys(e,t)}break;case"Polygon":switch(e.type){case"Point":return!ge(e,t);case"LineString":return!ys(t,e);case"Polygon":return!function(t,e){for(var r=0,n=t.coordinates[0];r<n.length;r++){if(ge(n[r],e))return!0}for(var i=0,o=e.coordinates[0];i<o.length;i++){if(ge(o[i],t))return!0}if(On(Ii(t),Ii(e)).features.length>0)return!0;return!1}(e,t)}}var r,n;return!1}(t.geometry,e.geometry)})}),r}function ds(t,e){for(var r=0;r<t.coordinates.length-1;r++)if(vs(t.coordinates[r],t.coordinates[r+1],e.coordinates))return!0;return!1}function ys(t,e){for(var r=0,n=e.coordinates;r<n.length;r++){if(ge(n[r],t))return!0}return On(e,Ii(t)).features.length>0}function vs(t,e,r){var n=r[0]-t[0],i=r[1]-t[1],o=e[0]-t[0],s=e[1]-t[1];return 0==n*s-i*o&&(Math.abs(o)>=Math.abs(s)?o>0?t[0]<=r[0]&&r[0]<=e[0]:e[0]<=r[0]&&r[0]<=t[0]:s>0?t[1]<=r[1]&&r[1]<=e[1]:e[1]<=r[1]&&r[1]<=t[1])}function gs(t,e){return!(t[0]>e[0])&&(!(t[2]<e[2])&&(!(t[1]>e[1])&&!(t[3]<e[3])))}function ms(t,e){return t[0]===e[0]&&t[1]===e[1]}function _s(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}function bs(t,e){for(var r=!1,n=!1,i=t.coordinates.length,o=0;o<i&&!r&&!n;){for(var s=0;s<e.coordinates.length-1;s++){var a=!0;0!==s&&s!==e.coordinates.length-2||(a=!1),ws(e.coordinates[s],e.coordinates[s+1],t.coordinates[o],a)?r=!0:n=!0}o++}return r&&n}function xs(t,e){return On(t,Ei(e)).features.length>0}function Ss(t,e){for(var r=!1,n=!1,i=t.coordinates.length,o=0;o<i&&(!r||!n);o++)ge(u(t.coordinates[o]),e)?r=!0:n=!0;return n&&r}function ws(t,e,r,n){var i=r[0]-t[0],o=r[1]-t[1],s=e[0]-t[0],a=e[1]-t[1];return 0==i*a-o*s&&(n?Math.abs(s)>=Math.abs(a)?s>0?t[0]<=r[0]&&r[0]<=e[0]:e[0]<=r[0]&&r[0]<=t[0]:a>0?t[1]<=r[1]&&r[1]<=e[1]:e[1]<=r[1]&&r[1]<=t[1]:Math.abs(s)>=Math.abs(a)?s>0?t[0]<r[0]&&r[0]<e[0]:e[0]<r[0]&&r[0]<t[0]:a>0?t[1]<r[1]&&r[1]<e[1]:e[1]<r[1]&&r[1]<t[1])}var Cs=function(t){this.precision=t&&t.precision?t.precision:17,this.direction=!(!t||!t.direction)&&t.direction,this.pseudoNode=!(!t||!t.pseudoNode)&&t.pseudoNode,this.objectComparator=t&&t.objectComparator?t.objectComparator:Ps};function Is(t){return t.coordinates.map(function(e){return{type:t.type.replace("Multi",""),coordinates:e}})}function Es(t,e){return t.hasOwnProperty("coordinates")?t.coordinates.length===e.coordinates.length:t.length===e.length}function Ps(t,e){return ki(t,e,{strict:!0})}Cs.prototype.compare=function(t,e){if(t.type!==e.type||!Es(t,e))return!1;switch(t.type){case"Point":return this.compareCoord(t.coordinates,e.coordinates);case"LineString":return this.compareLine(t.coordinates,e.coordinates,0,!1);case"Polygon":return this.comparePolygon(t,e);case"Feature":return this.compareFeature(t,e);default:if(0===t.type.indexOf("Multi")){var r=this,n=Is(t),i=Is(e);return n.every(function(t){return this.some(function(e){return r.compare(t,e)})},i)}}return!1},Cs.prototype.compareCoord=function(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(t[r].toFixed(this.precision)!==e[r].toFixed(this.precision))return!1;return!0},Cs.prototype.compareLine=function(t,e,r,n){if(!Es(t,e))return!1;var i=this.pseudoNode?t:this.removePseudo(t),o=this.pseudoNode?e:this.removePseudo(e);if(!n||this.compareCoord(i[0],o[0])||(o=this.fixStartIndex(o,i))){var s=this.compareCoord(i[r],o[r]);return this.direction||s?this.comparePath(i,o):!!this.compareCoord(i[r],o[o.length-(1+r)])&&this.comparePath(i.slice().reverse(),o)}},Cs.prototype.fixStartIndex=function(t,e){for(var r,n=-1,i=0;i<t.length;i++)if(this.compareCoord(t[i],e[0])){n=i;break}return n>=0&&(r=[].concat(t.slice(n,t.length),t.slice(1,n+1))),r},Cs.prototype.comparePath=function(t,e){var r=this;return t.every(function(t,e){return r.compareCoord(t,this[e])},e)},Cs.prototype.comparePolygon=function(t,e){if(this.compareLine(t.coordinates[0],e.coordinates[0],1,!0)){var r=t.coordinates.slice(1,t.coordinates.length),n=e.coordinates.slice(1,e.coordinates.length),i=this;return r.every(function(t){return this.some(function(e){return i.compareLine(t,e,1,!0)})},n)}return!1},Cs.prototype.compareFeature=function(t,e){return!(t.id!==e.id||!this.objectComparator(t.properties,e.properties)||!this.compareBBox(t,e))&&this.compare(t.geometry,e.geometry)},Cs.prototype.compareBBox=function(t,e){return!!(!t.bbox&&!e.bbox||t.bbox&&e.bbox&&this.compareCoord(t.bbox,e.bbox))},Cs.prototype.removePseudo=function(t){return t};var Ms=Cs;function Ls(t,e){var r=!1;return q(t,function(t){q(e,function(e){if(!0===r)return!0;r=!ps(t.geometry,e.geometry)})}),r}var Ns=Ut(function(t){function e(t,e,r,n){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(t,e,r,n)}e.prototype.run=function(t,e,r,n){this._init(t,e,r,n);for(var i=0;i<this._datasetLength;i++)if(1!==this._visited[i]){this._visited[i]=1;var o=this._regionQuery(i);if(o.length<this.minPts)this.noise.push(i);else{var s=this.clusters.length;this.clusters.push([]),this._addToCluster(i,s),this._expandCluster(s,o)}}return this.clusters},e.prototype._init=function(t,e,r,n){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this.noise=[],this._datasetLength=t.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}e&&(this.epsilon=e),r&&(this.minPts=r),n&&(this.distance=n)},e.prototype._expandCluster=function(t,e){for(var r=0;r<e.length;r++){var n=e[r];if(1!==this._visited[n]){this._visited[n]=1;var i=this._regionQuery(n);i.length>=this.minPts&&(e=this._mergeArrays(e,i))}1!==this._assigned[n]&&this._addToCluster(n,t)}},e.prototype._addToCluster=function(t,e){this.clusters[e].push(t),this._assigned[t]=1},e.prototype._regionQuery=function(t){for(var e=[],r=0;r<this._datasetLength;r++){this.distance(this.dataset[t],this.dataset[r])<this.epsilon&&e.push(r)}return e},e.prototype._mergeArrays=function(t,e){for(var r=e.length,n=0;n<r;n++){var i=e[n];t.indexOf(i)<0&&t.push(i)}return t},e.prototype._euclideanDistance=function(t,e){for(var r=0,n=Math.min(t.length,e.length);n--;)r+=(t[n]-e[n])*(t[n]-e[n]);return Math.sqrt(r)},t.exports&&(t.exports=e)}),Ts=Ut(function(t){function e(t,e,r){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(t,e,r)}e.prototype.init=function(t,e,r){this.assignments=[],this.centroids=[],void 0!==t&&(this.dataset=t),void 0!==e&&(this.k=e),void 0!==r&&(this.distance=r)},e.prototype.run=function(t,e){this.init(t,e);for(var r=this.dataset.length,n=0;n<this.k;n++)this.centroids[n]=this.randomCentroid();for(var i=!0;i;){i=this.assign();for(var o=0;o<this.k;o++){for(var s=new Array(c),a=0,u=0;u<c;u++)s[u]=0;for(var l=0;l<r;l++){var c=this.dataset[l].length;if(o===this.assignments[l]){for(u=0;u<c;u++)s[u]+=this.dataset[l][u];a++}}if(a>0){for(u=0;u<c;u++)s[u]/=a;this.centroids[o]=s}else this.centroids[o]=this.randomCentroid(),i=!0}}return this.getClusters()},e.prototype.randomCentroid=function(){var t,e,r=this.dataset.length-1;do{e=Math.round(Math.random()*r),t=this.dataset[e]}while(this.centroids.indexOf(t)>=0);return t},e.prototype.assign=function(){for(var t,e=!1,r=this.dataset.length,n=0;n<r;n++)(t=this.argmin(this.dataset[n],this.centroids,this.distance))!=this.assignments[n]&&(this.assignments[n]=t,e=!0);return e},e.prototype.getClusters=function(){for(var t,e=new Array(this.k),r=0;r<this.assignments.length;r++)void 0===e[t=this.assignments[r]]&&(e[t]=[]),e[t].push(r);return e},e.prototype.argmin=function(t,e,r){for(var n,i=Number.MAX_VALUE,o=0,s=e.length,a=0;a<s;a++)(n=r(t,e[a]))<i&&(i=n,o=a);return o},e.prototype.distance=function(t,e){for(var r=0,n=Math.min(t.length,e.length);n--;){var i=t[n]-e[n];r+=i*i}return Math.sqrt(r)},t.exports&&(t.exports=e)}),Os=Ut(function(t){function e(t,e,r){this._queue=[],this._priorities=[],this._sorting="desc",this._init(t,e,r)}e.prototype.insert=function(t,e){for(var r=this._queue.length,n=r;n--;){var i=this._priorities[n];"desc"===this._sorting?e>i&&(r=n):e<i&&(r=n)}this._insertAt(t,e,r)},e.prototype.remove=function(t){for(var e=this._queue.length;e--;){if(t===this._queue[e]){this._queue.splice(e,1),this._priorities.splice(e,1);break}}},e.prototype.forEach=function(t){this._queue.forEach(t)},e.prototype.getElements=function(){return this._queue},e.prototype.getElementPriority=function(t){return this._priorities[t]},e.prototype.getPriorities=function(){return this._priorities},e.prototype.getElementsWithPriorities=function(){for(var t=[],e=0,r=this._queue.length;e<r;e++)t.push([this._queue[e],this._priorities[e]]);return t},e.prototype._init=function(t,e,r){if(t&&e){if(this._queue=[],this._priorities=[],t.length!==e.length)throw new Error("Arrays must have the same length");for(var n=0;n<t.length;n++)this.insert(t[n],e[n])}r&&(this._sorting=r)},e.prototype._insertAt=function(t,e,r){this._queue.length===r?(this._queue.push(t),this._priorities.push(e)):(this._queue.splice(r,0,t),this._priorities.splice(r,0,e))},t.exports&&(t.exports=e)}),As=Ut(function(t){if(t.exports)var e=Os;function r(t,e,r,n){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(t,e,r,n)}r.prototype.run=function(t,r,n,i){this._init(t,r,n,i);for(var o=0,s=this.dataset.length;o<s;o++)if(1!==this._processed[o]){this._processed[o]=1,this.clusters.push([o]);var a=this.clusters.length-1;this._orderedList.push(o);var u=new e(null,null,"asc"),l=this._regionQuery(o);void 0!==this._distanceToCore(o)&&(this._updateQueue(o,l,u),this._expandCluster(a,u))}return this.clusters},r.prototype.getReachabilityPlot=function(){for(var t=[],e=0,r=this._orderedList.length;e<r;e++){var n=this._orderedList[e],i=this._reachability[n];t.push([n,i])}return t},r.prototype._init=function(t,e,r,n){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}e&&(this.epsilon=e),r&&(this.minPts=r),n&&(this.distance=n)},r.prototype._updateQueue=function(t,e,r){var n=this;this._coreDistance=this._distanceToCore(t),e.forEach(function(e){if(void 0===n._processed[e]){var i=n.distance(n.dataset[t],n.dataset[e]),o=Math.max(n._coreDistance,i);void 0===n._reachability[e]?(n._reachability[e]=o,r.insert(e,o)):o<n._reachability[e]&&(n._reachability[e]=o,r.remove(e),r.insert(e,o))}})},r.prototype._expandCluster=function(t,e){for(var r=e.getElements(),n=0,i=r.length;n<i;n++){var o=r[n];if(void 0===this._processed[o]){var s=this._regionQuery(o);this._processed[o]=1,this.clusters[t].push(o),this._orderedList.push(o),void 0!==this._distanceToCore(o)&&(this._updateQueue(o,s,e),this._expandCluster(t,e))}}},r.prototype._distanceToCore=function(t){for(var e=this.epsilon,r=0;r<e;r++){if(this._regionQuery(t,r).length>=this.minPts)return r}},r.prototype._regionQuery=function(t,e){e=e||this.epsilon;for(var r=[],n=0,i=this.dataset.length;n<i;n++)this.distance(this.dataset[t],this.dataset[n])<e&&r.push(n);return r},r.prototype._euclideanDistance=function(t,e){for(var r=0,n=Math.min(t.length,e.length);n--;)r+=(t[n]-e[n])*(t[n]-e[n]);return Math.sqrt(r)},t.exports&&(t.exports=r)}),Rs=Ut(function(t){t.exports&&(t.exports={DBSCAN:Ns,KMEANS:Ts,OPTICS:As,PriorityQueue:Os})});var Fs=function(t,e,r){for(var n=t.length,i=0,o=0;o<n;o++){var s=(t[o]||0)-(e[o]||0);i+=s*s}return r?Math.sqrt(i):i},Ds=Fs,ks=function(t,e,r){var n=Math.abs(t-e);return r?n:n*n},js=Fs,Gs=function(t,e){for(var r={},n=[],i=e<<2,o=t.length,s=t[0].length>0;n.length<e&&i-- >0;){var a=t[Math.floor(Math.random()*o)],u=s?a.join("_"):""+a;r[u]||(r[u]=!0,n.push(a))}if(n.length<e)throw new Error("Error initializating clusters");return n},Bs=function(t,e){var r=t[0].length?Ds:ks,n=[],i=t.length,o=t[0].length>0,s=t[Math.floor(Math.random()*i)];o&&s.join("_");for(n.push(s);n.length<e;){for(var a=[],u=n.length,l=0,c=[],h=0;h<i;h++){for(var f=1/0,p=0;p<u;p++){var d=r(t[h],n[p]);d<=f&&(f=d)}a[h]=f}for(var y=0;y<i;y++)l+=a[y];for(var v=0;v<i;v++)c[v]={i:v,v:t[v],pr:a[v]/l,cs:0};c.sort(function(t,e){return t.pr-e.pr}),c[0].cs=c[0].pr;for(var g=1;g<i;g++)c[g].cs=c[g-1].cs+c[g].pr;for(var m=Math.random(),_=0;_<i-1&&c[_++].cs<m;);n.push(c[_-1].v)}return n};function Us(t,e,r){r=r||[];for(var n=0;n<t;n++)r[n]=e;return r}var qs=function(t,e,r,n){var i=[],o=[],s=[],a=[],u=!1,l=n||1e4,c=t.length,h=t[0].length,f=h>0,p=[];if(r)i="kmrand"==r?Gs(t,e):"kmpp"==r?Bs(t,e):r;else for(var d={};i.length<e;){var y=Math.floor(Math.random()*c);d[y]||(d[y]=!0,i.push(t[y]))}do{Us(e,0,p);for(var v=0;v<c;v++){for(var g=1/0,m=0,_=0;_<e;_++){(a=f?js(t[v],i[_]):Math.abs(t[v]-i[_]))<=g&&(g=a,m=_)}s[v]=m,p[m]++}for(var b=[],x=(o=[],0);x<e;x++)b[x]=f?Us(h,0,b[x]):0,o[x]=i[x];if(f){for(var S=0;S<e;S++)i[S]=[];for(var w=0;w<c;w++)for(var C=b[s[w]],I=t[w],E=0;E<h;E++)C[E]+=I[E];u=!0;for(var P=0;P<e;P++){for(var M=i[P],L=b[P],N=o[P],T=p[P],O=0;O<h;O++)M[O]=L[O]/T||0;if(u)for(var A=0;A<h;A++)if(N[A]!=M[A]){u=!1;break}}}else{for(var R=0;R<c;R++){b[s[R]]+=t[R]}for(var F=0;F<e;F++)i[F]=b[F]/p[F]||0;u=!0;for(var D=0;D<e;D++)if(o[D]!=i[D]){u=!1;break}}u=u||--l<=0}while(!u);return{it:1e4-l,k:e,idxs:s,centroids:i}};function zs(t,e){return w(Ui(t[0],t[1]))===w(Ui(e[0],e[1]))}function Vs(t,e){if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error("Invalid GeoJSON object for "+e)}function Ws(t){for(var e=t,r=[];e.parent;)r.unshift(e),e=e.parent;return r}var Hs={search:function(t,e,r,n){t.cleanDirty();var i=(n=n||{}).heuristic||Hs.heuristics.manhattan,o=n.closest||!1,s=new Ys(function(t){return t.f}),a=e;for(e.h=i(e,r),s.push(e);s.size()>0;){var u=s.pop();if(u===r)return Ws(u);u.closed=!0;for(var l=t.neighbors(u),c=0,h=l.length;c<h;++c){var f=l[c];if(!f.closed&&!f.isWall()){var p=u.g+f.getCost(u),d=f.visited;(!d||p<f.g)&&(f.visited=!0,f.parent=u,f.h=f.h||i(f,r),f.g=p,f.f=f.g+f.h,t.markDirty(f),o&&(f.h<a.h||f.h===a.h&&f.g<a.g)&&(a=f),d?s.rescoreElement(f):s.push(f))}}}return o?Ws(a):[]},heuristics:{manhattan:function(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},diagonal:function(t,e){var r=Math.sqrt(2),n=Math.abs(e.x-t.x),i=Math.abs(e.y-t.y);return 1*(n+i)+(r-2)*Math.min(n,i)}},cleanNode:function(t){t.f=0,t.g=0,t.h=0,t.visited=!1,t.closed=!1,t.parent=null}};function Xs(t,e){e=e||{},this.nodes=[],this.diagonal=!!e.diagonal,this.grid=[];for(var r=0;r<t.length;r++){this.grid[r]=[];for(var n=0,i=t[r];n<i.length;n++){var o=new Zs(r,n,i[n]);this.grid[r][n]=o,this.nodes.push(o)}}this.init()}function Zs(t,e,r){this.x=t,this.y=e,this.weight=r}function Ys(t){this.content=[],this.scoreFunction=t}function Js(t,e){for(var r=0;r<e.features.length;r++)if(ge(t,e.features[r]))return!0;return!1}function Qs(t){return function(){return t}}function Ks(t){return t[0]}function $s(t){return t[1]}function ta(){this._=null}function ea(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function ra(t,e){var r=e,n=e.R,i=r.U;i?i.L===r?i.L=n:i.R=n:t._=n,n.U=i,r.U=n,r.R=n.L,r.R&&(r.R.U=r),n.L=r}function na(t,e){var r=e,n=e.L,i=r.U;i?i.L===r?i.L=n:i.R=n:t._=n,n.U=i,r.U=n,r.L=n.R,r.L&&(r.L.U=r),n.R=r}function ia(t){for(;t.L;)t=t.L;return t}function oa(t,e,r,n){var i=[null,null],o=La.push(i)-1;return i.left=t,i.right=e,r&&aa(i,t,e,r),n&&aa(i,e,t,n),Pa[t.index].halfedges.push(o),Pa[e.index].halfedges.push(o),i}function sa(t,e,r){var n=[e,r];return n.left=t,n}function aa(t,e,r,n){t[0]||t[1]?t.left===r?t[1]=n:t[0]=n:(t[0]=n,t.left=e,t.right=r)}function ua(t,e,r,n,i){var o,s=t[0],a=t[1],u=s[0],l=s[1],c=0,h=1,f=a[0]-u,p=a[1]-l;if(o=e-u,f||!(o>0)){if(o/=f,f<0){if(o<c)return;o<h&&(h=o)}else if(f>0){if(o>h)return;o>c&&(c=o)}if(o=n-u,f||!(o<0)){if(o/=f,f<0){if(o>h)return;o>c&&(c=o)}else if(f>0){if(o<c)return;o<h&&(h=o)}if(o=r-l,p||!(o>0)){if(o/=p,p<0){if(o<c)return;o<h&&(h=o)}else if(p>0){if(o>h)return;o>c&&(c=o)}if(o=i-l,p||!(o<0)){if(o/=p,p<0){if(o>h)return;o>c&&(c=o)}else if(p>0){if(o<c)return;o<h&&(h=o)}return!(c>0||h<1)||(c>0&&(t[0]=[u+c*f,l+c*p]),h<1&&(t[1]=[u+h*f,l+h*p]),!0)}}}}}function la(t,e,r,n,i){var o=t[1];if(o)return!0;var s,a,u=t[0],l=t.left,c=t.right,h=l[0],f=l[1],p=c[0],d=c[1],y=(h+p)/2,v=(f+d)/2;if(d===f){if(y<e||y>=n)return;if(h>p){if(u){if(u[1]>=i)return}else u=[y,r];o=[y,i]}else{if(u){if(u[1]<r)return}else u=[y,i];o=[y,r]}}else if(a=v-(s=(h-p)/(d-f))*y,s<-1||s>1)if(h>p){if(u){if(u[1]>=i)return}else u=[(r-a)/s,r];o=[(i-a)/s,i]}else{if(u){if(u[1]<r)return}else u=[(i-a)/s,i];o=[(r-a)/s,r]}else if(f<d){if(u){if(u[0]>=n)return}else u=[e,s*e+a];o=[n,s*n+a]}else{if(u){if(u[0]<e)return}else u=[n,s*n+a];o=[e,s*e+a]}return t[0]=u,t[1]=o,!0}function ca(t,e){var r=t.site,n=e.left,i=e.right;return r===i&&(i=n,n=r),i?Math.atan2(i[1]-n[1],i[0]-n[0]):(r===n?(n=e[1],i=e[0]):(n=e[0],i=e[1]),Math.atan2(n[0]-i[0],i[1]-n[1]))}function ha(t,e){return e[+(e.left!==t.site)]}function fa(t,e){return e[+(e.left===t.site)]}Xs.prototype.init=function(){this.dirtyNodes=[];for(var t=0;t<this.nodes.length;t++)Hs.cleanNode(this.nodes[t])},Xs.prototype.cleanDirty=function(){for(var t=0;t<this.dirtyNodes.length;t++)Hs.cleanNode(this.dirtyNodes[t]);this.dirtyNodes=[]},Xs.prototype.markDirty=function(t){this.dirtyNodes.push(t)},Xs.prototype.neighbors=function(t){var e=[],r=t.x,n=t.y,i=this.grid;return i[r-1]&&i[r-1][n]&&e.push(i[r-1][n]),i[r+1]&&i[r+1][n]&&e.push(i[r+1][n]),i[r]&&i[r][n-1]&&e.push(i[r][n-1]),i[r]&&i[r][n+1]&&e.push(i[r][n+1]),this.diagonal&&(i[r-1]&&i[r-1][n-1]&&e.push(i[r-1][n-1]),i[r+1]&&i[r+1][n-1]&&e.push(i[r+1][n-1]),i[r-1]&&i[r-1][n+1]&&e.push(i[r-1][n+1]),i[r+1]&&i[r+1][n+1]&&e.push(i[r+1][n+1])),e},Xs.prototype.toString=function(){for(var t,e,r,n,i=[],o=this.grid,s=0,a=o.length;s<a;s++){for(t=[],r=0,n=(e=o[s]).length;r<n;r++)t.push(e[r].weight);i.push(t.join(" "))}return i.join("\n")},Zs.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},Zs.prototype.getCost=function(t){return t&&t.x!==this.x&&t.y!==this.y?1.41421*this.weight:this.weight},Zs.prototype.isWall=function(){return 0===this.weight},Ys.prototype={push:function(t){this.content.push(t),this.sinkDown(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),t},remove:function(t){var e=this.content.indexOf(t),r=this.content.pop();e!==this.content.length-1&&(this.content[e]=r,this.scoreFunction(r)<this.scoreFunction(t)?this.sinkDown(e):this.bubbleUp(e))},size:function(){return this.content.length},rescoreElement:function(t){this.sinkDown(this.content.indexOf(t))},sinkDown:function(t){for(var e=this.content[t];t>0;){var r=(t+1>>1)-1,n=this.content[r];if(!(this.scoreFunction(e)<this.scoreFunction(n)))break;this.content[r]=e,this.content[t]=n,t=r}},bubbleUp:function(t){for(var e=this.content.length,r=this.content[t],n=this.scoreFunction(r);;){var i,o=t+1<<1,s=o-1,a=null;if(s<e){var u=this.content[s];(i=this.scoreFunction(u))<n&&(a=s)}if(o<e){var l=this.content[o];this.scoreFunction(l)<(null===a?n:i)&&(a=o)}if(null===a)break;this.content[t]=this.content[a],this.content[a]=r,t=a}}},ta.prototype={constructor:ta,insert:function(t,e){var r,n,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;r=t}else this._?(t=ia(this._),e.P=null,e.N=t,t.P=t.L=e,r=t):(e.P=e.N=null,this._=e,r=null);for(e.L=e.R=null,e.U=r,e.C=!0,t=e;r&&r.C;)r===(n=r.U).L?(i=n.R)&&i.C?(r.C=i.C=!1,n.C=!0,t=n):(t===r.R&&(ra(this,r),r=(t=r).U),r.C=!1,n.C=!0,na(this,n)):(i=n.L)&&i.C?(r.C=i.C=!1,n.C=!0,t=n):(t===r.L&&(na(this,r),r=(t=r).U),r.C=!1,n.C=!0,ra(this,n)),r=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,r,n,i=t.U,o=t.L,s=t.R;if(r=o?s?ia(s):o:s,i?i.L===t?i.L=r:i.R=r:this._=r,o&&s?(n=r.C,r.C=t.C,r.L=o,o.U=r,r!==s?(i=r.U,r.U=t.U,t=r.R,i.L=t,r.R=s,s.U=r):(r.U=i,i=r,t=r.R)):(n=t.C,t=r),t&&(t.U=i),!n)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,ra(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,na(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,ra(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,na(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,ra(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,na(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}};var pa,da=[];function ya(){ea(this),this.x=this.y=this.arc=this.site=this.cy=null}function va(t){var e=t.P,r=t.N;if(e&&r){var n=e.site,i=t.site,o=r.site;if(n!==o){var s=i[0],a=i[1],u=n[0]-s,l=n[1]-a,c=o[0]-s,h=o[1]-a,f=2*(u*h-l*c);if(!(f>=-Ta)){var p=u*u+l*l,d=c*c+h*h,y=(h*p-l*d)/f,v=(u*d-c*p)/f,g=da.pop()||new ya;g.arc=t,g.site=i,g.x=y+s,g.y=(g.cy=v+a)+Math.sqrt(y*y+v*v),t.circle=g;for(var m=null,_=Ma._;_;)if(g.y<_.y||g.y===_.y&&g.x<=_.x){if(!_.L){m=_.P;break}_=_.L}else{if(!_.R){m=_;break}_=_.R}Ma.insert(m,g),m||(pa=g)}}}}function ga(t){var e=t.circle;e&&(e.P||(pa=e.N),Ma.remove(e),da.push(e),ea(e),t.circle=null)}var ma=[];function _a(){ea(this),this.edge=this.site=this.circle=null}function ba(t){var e=ma.pop()||new _a;return e.site=t,e}function xa(t){ga(t),Ea.remove(t),ma.push(t),ea(t)}function Sa(t){var e=t.circle,r=e.x,n=e.cy,i=[r,n],o=t.P,s=t.N,a=[t];xa(t);for(var u=o;u.circle&&Math.abs(r-u.circle.x)<Na&&Math.abs(n-u.circle.cy)<Na;)o=u.P,a.unshift(u),xa(u),u=o;a.unshift(u),ga(u);for(var l=s;l.circle&&Math.abs(r-l.circle.x)<Na&&Math.abs(n-l.circle.cy)<Na;)s=l.N,a.push(l),xa(l),l=s;a.push(l),ga(l);var c,h=a.length;for(c=1;c<h;++c)l=a[c],u=a[c-1],aa(l.edge,u.site,l.site,i);u=a[0],(l=a[h-1]).edge=oa(u.site,l.site,null,i),va(u),va(l)}function wa(t){for(var e,r,n,i,o=t[0],s=t[1],a=Ea._;a;)if((n=Ca(a,s)-o)>Na)a=a.L;else{if(!((i=o-Ia(a,s))>Na)){n>-Na?(e=a.P,r=a):i>-Na?(e=a,r=a.N):e=r=a;break}if(!a.R){e=a;break}a=a.R}!function(t){Pa[t.index]={site:t,halfedges:[]}}(t);var u=ba(t);if(Ea.insert(e,u),e||r){if(e===r)return ga(e),r=ba(e.site),Ea.insert(u,r),u.edge=r.edge=oa(e.site,u.site),va(e),void va(r);if(r){ga(e),ga(r);var l=e.site,c=l[0],h=l[1],f=t[0]-c,p=t[1]-h,d=r.site,y=d[0]-c,v=d[1]-h,g=2*(f*v-p*y),m=f*f+p*p,_=y*y+v*v,b=[(v*m-p*_)/g+c,(f*_-y*m)/g+h];aa(r.edge,l,d,b),u.edge=oa(l,t,null,b),r.edge=oa(t,d,null,b),va(e),va(r)}else u.edge=oa(e.site,u.site)}}function Ca(t,e){var r=t.site,n=r[0],i=r[1],o=i-e;if(!o)return n;var s=t.P;if(!s)return-1/0;var a=(r=s.site)[0],u=r[1],l=u-e;if(!l)return a;var c=a-n,h=1/o-1/l,f=c/l;return h?(-f+Math.sqrt(f*f-2*h*(c*c/(-2*l)-u+l/2+i-o/2)))/h+n:(n+a)/2}function Ia(t,e){var r=t.N;if(r)return Ca(r,e);var n=t.site;return n[1]===e?n[0]:1/0}var Ea,Pa,Ma,La,Na=1e-6,Ta=1e-12;function Oa(t,e){return e[1]-t[1]||e[0]-t[0]}function Aa(t,e){var r,n,i,o=t.sort(Oa).pop();for(La=[],Pa=new Array(t.length),Ea=new ta,Ma=new ta;;)if(i=pa,o&&(!i||o[1]<i.y||o[1]===i.y&&o[0]<i.x))o[0]===r&&o[1]===n||(wa(o),r=o[0],n=o[1]),o=t.pop();else{if(!i)break;Sa(i.arc)}if(function(){for(var t,e,r,n,i=0,o=Pa.length;i<o;++i)if((t=Pa[i])&&(n=(e=t.halfedges).length)){var s=new Array(n),a=new Array(n);for(r=0;r<n;++r)s[r]=r,a[r]=ca(t,La[e[r]]);for(s.sort(function(t,e){return a[e]-a[t]}),r=0;r<n;++r)a[r]=e[s[r]];for(r=0;r<n;++r)e[r]=a[r]}}(),e){var s=+e[0][0],a=+e[0][1],u=+e[1][0],l=+e[1][1];!function(t,e,r,n){for(var i,o=La.length;o--;)la(i=La[o],t,e,r,n)&&ua(i,t,e,r,n)&&(Math.abs(i[0][0]-i[1][0])>Na||Math.abs(i[0][1]-i[1][1])>Na)||delete La[o]}(s,a,u,l),function(t,e,r,n){var i,o,s,a,u,l,c,h,f,p,d,y,v=Pa.length,g=!0;for(i=0;i<v;++i)if(o=Pa[i]){for(s=o.site,a=(u=o.halfedges).length;a--;)La[u[a]]||u.splice(a,1);for(a=0,l=u.length;a<l;)d=(p=fa(o,La[u[a]]))[0],y=p[1],h=(c=ha(o,La[u[++a%l]]))[0],f=c[1],(Math.abs(d-h)>Na||Math.abs(y-f)>Na)&&(u.splice(a,0,La.push(sa(s,p,Math.abs(d-t)<Na&&n-y>Na?[t,Math.abs(h-t)<Na?f:n]:Math.abs(y-n)<Na&&r-d>Na?[Math.abs(f-n)<Na?h:r,n]:Math.abs(d-r)<Na&&y-e>Na?[r,Math.abs(h-r)<Na?f:e]:Math.abs(y-e)<Na&&d-t>Na?[Math.abs(f-e)<Na?h:t,e]:null))-1),++l);l&&(g=!1)}if(g){var m,_,b,x=1/0;for(i=0,g=null;i<v;++i)(o=Pa[i])&&(b=(m=(s=o.site)[0]-t)*m+(_=s[1]-e)*_)<x&&(x=b,g=o);if(g){var S=[t,e],w=[t,n],C=[r,n],I=[r,e];g.halfedges.push(La.push(sa(s=g.site,S,w))-1,La.push(sa(s,w,C))-1,La.push(sa(s,C,I))-1,La.push(sa(s,I,S))-1)}}for(i=0;i<v;++i)(o=Pa[i])&&(o.halfedges.length||delete Pa[i])}(s,a,u,l)}this.edges=La,this.cells=Pa,Ea=Ma=La=Pa=null}function Ra(t){return(t=t.slice()).push(t[0]),c([t])}function Fa(t,e,r,n){var i=(n=n||{}).steps||64,o=n.units||"kilometers",s=n.angle||0,a=n.pivot||t,u=n.properties||t.properties||{};if(!t)throw new Error("center is required");if(!e)throw new Error("xSemiAxis is required");if(!r)throw new Error("ySemiAxis is required");if(!L(n))throw new Error("options must be an object");if(!M(i))throw new Error("steps must be a number");if(!M(s))throw new Error("angle must be a number");var l=K(t);if("degrees"===o)var h=I(s);else e=zi(t,e,90,{units:o}),r=zi(t,r,0,{units:o}),e=K(e)[0]-l[0],r=K(r)[1]-l[1];for(var f=[],p=0;p<i;p+=1){var d=-360*p/i,y=e*r/Math.sqrt(Math.pow(r,2)+Math.pow(e,2)*Math.pow(Da(d),2)),v=e*r/Math.sqrt(Math.pow(e,2)+Math.pow(r,2)/Math.pow(Da(d),2));if(d<-90&&d>=-270&&(y=-y),d<-180&&d>=-360&&(v=-v),"degrees"===o){var g=y*Math.cos(h)+v*Math.sin(h),m=v*Math.cos(h)-y*Math.sin(h);y=g,v=m}f.push([y+l[0],v+l[1]])}return f.push(f[0]),"degrees"===o?c([f],u):ts(c([f],u),s,{pivot:a})}function Da(t){var e=t*Math.PI/180;return Math.tan(e)}function ka(t,e){void 0===e&&(e={});var r=0,n=0,i=0;return B(t,function(t,o,s){var a=e.weight?null==s?void 0:s[e.weight]:void 0;if(!M(a=null==a?1:a))throw new Error("weight value must be a number for feature index "+o);(a=Number(a))>0&&A(t,function(t){r+=t[0]*a,n+=t[1]*a,i+=a})}),u([r/i,n/i],e.properties,e)}function ja(t,e,r,n,i){var o=n.tolerance||.001,s=0,a=0,l=0,c=0;if(k(r,function(e){var r,n=null===(r=e.properties)||void 0===r?void 0:r.weight,i=null==n?1:n;if(!M(i=Number(i)))throw new Error("weight value must be a number");if(i>0){c+=1;var o=i*be(e,t);0===o&&(o=1);var u=i/o;s+=e.geometry.coordinates[0]*u,a+=e.geometry.coordinates[1]*u,l+=u}}),c<1)throw new Error("no features to measure");var h=s/l,f=a/l;return 1===c||0===i||Math.abs(h-e[0])<o&&Math.abs(f-e[1])<o?u([h,f],{medianCandidates:n.medianCandidates}):(n.medianCandidates.push([h,f]),ja([h,f],t,r,n,i-1))}function Ga(t,e){return{x:t[0]-e[0],y:t[1]-e[1]}}function Ba(t,e){var r=0,n=0;A(t,function(i,o,s,a,u){u>r&&(r=u,n=o,e.push([]));var l=o-n,c=t.coordinates[u][l+1],h=i[0],f=i[1],p=c[0],d=c[1];e[u].push([.75*h+.25*p,.75*f+.25*d]),e[u].push([.25*h+.75*p,.25*f+.75*d])},!0),e.forEach(function(t){t.push(t[0])})}function Ua(t,e){var r=0,n=0,i=0;A(t,function(o,s,a,u,l){u>i&&(i=u,n=s,e.push([[]])),l>r&&(r=l,n=s,e[u].push([]));var c=s-n,h=t.coordinates[u][l][c+1],f=o[0],p=o[1],d=h[0],y=h[1];e[u][l].push([.75*f+.25*d,.75*p+.25*y]),e[u][l].push([.25*f+.75*d,.25*p+.75*y])},!0),e.forEach(function(t){t.forEach(function(t){t.push(t[0])})})}function qa(t,e,r){void 0===r&&(r=2);var n=K(t),i=K(e),o=n[0]-i[0],s=n[1]-i[1];return 1===r?Math.abs(o)+Math.abs(s):Math.pow(Math.pow(o,r)+Math.pow(s,r),1/r)}function za(t,e){var r=(e=e||{}).threshold||1e4,n=e.p||2,i=e.binary||!1,o=e.alpha||-1,s=e.standardization||!1,a=[];k(t,function(t){a.push(xr(t))});for(var u=[],l=0;l<a.length;l++)u[l]=[];for(l=0;l<a.length;l++)for(var c=l;c<a.length;c++){l===c&&(u[l][c]=0);var h=qa(a[l],a[c],n);u[l][c]=h,u[c][l]=h}for(l=0;l<a.length;l++)for(c=0;c<a.length;c++){0!==(h=u[l][c])&&(u[l][c]=i?h<=r?1:0:h<=r?Math.pow(h,o):0)}if(s)for(l=0;l<a.length;l++){var f=u[l].reduce(function(t,e){return t+e},0);for(c=0;c<a.length;c++)u[l][c]=u[l][c]/f}return u}function Va(t){for(var e=0,r=0,n=t;r<n.length;r++){e+=n[r]}return e/t.length}function Wa(t,e){return void 0===e&&(e={}),Xa(t,"mercator",e)}function Ha(t,e){return void 0===e&&(e={}),Xa(t,"wgs84",e)}function Xa(t,e,r){void 0===r&&(r={});var n=(r=r||{}).mutate;if(!t)throw new Error("geojson is required");return Array.isArray(t)&&M(t[0])?t="mercator"===e?Za(t):Ya(t):(!0!==n&&(t=Ie(t)),A(t,function(t){var r="mercator"===e?Za(t):Ya(t);t[0]=r[0],t[1]=r[1]})),t}function Za(t){var e=Math.PI/180,r=6378137,n=20037508.342789244,i=[r*(Math.abs(t[0])<=180?t[0]:t[0]-360*function(t){return t<0?-1:t>0?1:0}(t[0]))*e,r*Math.log(Math.tan(.25*Math.PI+.5*t[1]*e))];return i[0]>n&&(i[0]=n),i[0]<-n&&(i[0]=-n),i[1]>n&&(i[1]=n),i[1]<-n&&(i[1]=-n),i}function Ya(t){var e=180/Math.PI,r=6378137;return[t[0]*e/r,(.5*Math.PI-2*Math.atan(Math.exp(-t[1]/r)))*e]}Aa.prototype={constructor:Aa,polygons:function(){var t=this.edges;return this.cells.map(function(e){var r=e.halfedges.map(function(r){return ha(e,t[r])});return r.data=e.site.data,r})},triangles:function(){var t=[],e=this.edges;return this.cells.forEach(function(r,n){if(o=(i=r.halfedges).length)for(var i,o,s,a,u,l,c=r.site,h=-1,f=e[i[o-1]],p=f.left===c?f.right:f.left;++h<o;)s=p,p=(f=e[i[h]]).left===c?f.right:f.left,s&&p&&n<s.index&&n<p.index&&(u=s,l=p,((a=c)[0]-l[0])*(u[1]-a[1])-(a[0]-u[0])*(l[1]-a[1])<0)&&t.push([c.data,s.data,p.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,e,r){for(var n,i,o=this,s=o._found||0,a=o.cells.length;!(i=o.cells[s]);)if(++s>=a)return null;var u=t-i.site[0],l=e-i.site[1],c=u*u+l*l;do{i=o.cells[n=s],s=null,i.halfedges.forEach(function(r){var n=o.edges[r],a=n.left;if(a!==i.site&&a||(a=n.right)){var u=t-a[0],l=e-a[1],h=u*u+l*l;h<c&&(c=h,s=a.index)}})}while(null!==s);return o._found=n,null==r||c<=r*r?i.site:null}};var Ja=Object.freeze({__proto__:null,toMercator:Wa,toWgs84:Ha}),Qa=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var n=Array(t),i=0;for(e=0;e<r;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n};function Ka(t){return Array.isArray(t)?nu(t):t&&t.bbox?nu(t.bbox):[360*ru(),180*ru()]}function $a(t,e){void 0===e&&(e={}),null==t&&(t=1);for(var r=[],n=0;n<t;n++)r.push(u(Ka(e.bbox)));return d(r)}function tu(t,e){void 0===e&&(e={}),null==t&&(t=1),M(e.num_vertices)&&void 0!==e.num_vertices||(e.num_vertices=10),M(e.max_radial_length)&&void 0!==e.max_radial_length||(e.max_radial_length=10);for(var r=[],n=function(t){var n,i=[],o=Qa(Array(e.num_vertices+1)).map(Math.random);o.forEach(function(t,e,r){r[e]=e>0?t+r[e-1]:t}),o.forEach(function(t){t=2*t*Math.PI/o[o.length-1];var r=Math.random();i.push([r*(e.max_radial_length||10)*Math.sin(t),r*(e.max_radial_length||10)*Math.cos(t)])}),i[i.length-1]=i[0],i=i.map((n=Ka(e.bbox),function(t){return[t[0]+n[0],t[1]+n[1]]})),r.push(c([i]))},i=0;i<t;i++)n();return d(r)}function eu(t,e){if(void 0===e&&(e={}),!L(e=e||{}))throw new Error("options is invalid");var r=e.bbox,n=e.num_vertices,i=e.max_length,o=e.max_rotation;null==t&&(t=1),(!M(n)||void 0===n||n<2)&&(n=10),M(i)&&void 0!==i||(i=1e-4),M(o)&&void 0!==o||(o=Math.PI/8);for(var s=[],a=0;a<t;a++){for(var u=[Ka(r)],l=0;l<n-1;l++){var c=(0===l?2*Math.random()*Math.PI:Math.tan((u[l][1]-u[l-1][1])/(u[l][0]-u[l-1][0])))+(Math.random()-.5)*o*2,h=Math.random()*i;u.push([u[l][0]+h*Math.cos(c),u[l][1]+h*Math.sin(c)])}s.push(f(u))}return d(s)}function ru(){return Math.random()-.5}function nu(t){return[Math.random()*(t[2]-t[0])+t[0],Math.random()*(t[3]-t[1])+t[1]]}var iu=Object.freeze({__proto__:null,randomPosition:Ka,randomPoint:$a,randomPolygon:tu,randomLineString:eu});function ou(t,e){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(null==e)throw new Error("filter is required");var r=[];return k(t,function(t){lu(t.properties,e)&&r.push(t)}),d(r)}function su(t,e,r){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(null==e)throw new Error("property is required");for(var n=uu(t,e),i=Object.keys(n),o=0;o<i.length;o++){for(var s=i[o],a=n[s],u=[],l=0;l<a.length;l++)u.push(t.features[a[l]]);r(d(u),s,o)}}function au(t,e,r,n){var i=n;return su(t,e,function(t,e,o){i=0===o&&void 0===n?t:r(i,t,e,o)}),i}function uu(t,e){var r={};return k(t,function(t,n){var i=t.properties||{};if(Object.prototype.hasOwnProperty.call(i,String(e))){var o=i[e];Object.prototype.hasOwnProperty.call(r,o)?r[o].push(n):r[o]=[n]}}),r}function lu(t,e){if(void 0===t)return!1;var r=typeof e;if("number"===r||"string"===r)return Object.prototype.hasOwnProperty.call(t,e);if(Array.isArray(e)){for(var n=0;n<e.length;n++)if(!lu(t,e[n]))return!1;return!0}return cu(t,e)}function cu(t,e){for(var r=Object.keys(e),n=0;n<r.length;n++){var i=r[n];if(t[i]!==e[i])return!1}return!0}function hu(t,e){if(!e)return{};if(!e.length)return{};for(var r={},n=0;n<e.length;n++){var i=e[n];Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r}var fu=Object.freeze({__proto__:null,getCluster:ou,clusterEach:su,clusterReduce:au,createBins:uu,applyFilter:lu,propertiesContainsFilter:cu,filterProperties:hu}),pu=function(t,e){this.next=null,this.key=t,this.data=e,this.left=null,this.right=null
/**
     * splaytree v3.1.0
     * Fast Splay tree for Node and browser
     *
     * @author Alexander Milevski <info@w8r.name>
     * @license MIT
     * @preserve
     */};function du(t,e){return t>e?1:t<e?-1:0}function yu(t,e,r){for(var n=new pu(null,null),i=n,o=n;;){var s=r(t,e.key);if(s<0){if(null===e.left)break;if(r(t,e.left.key)<0){var a=e.left;if(e.left=a.right,a.right=e,null===(e=a).left)break}o.left=e,o=e,e=e.left}else{if(!(s>0))break;if(null===e.right)break;if(r(t,e.right.key)>0){a=e.right;if(e.right=a.left,a.left=e,null===(e=a).right)break}i.right=e,i=e,e=e.right}}return i.right=e.left,o.left=e.right,e.left=n.right,e.right=n.left,e}function vu(t,e,r,n){var i=new pu(t,e);if(null===r)return i.left=i.right=null,i;var o=n(t,(r=yu(t,r,n)).key);return o<0?(i.left=r.left,i.right=r,r.left=null):o>=0&&(i.right=r.right,i.left=r,r.right=null),i}function gu(t,e,r){var n=null,i=null;if(e){var o=r((e=yu(t,e,r)).key,t);0===o?(n=e.left,i=e.right):o<0?(i=e.right,e.right=null,n=e):(n=e.left,e.left=null,i=e)}return{left:n,right:i}}function mu(t,e,r,n,i){if(t){n(e+(r?"└── ":"├── ")+i(t)+"\n");var o=e+(r?"    ":"│   ");t.left&&mu(t.left,o,!1,n,i),t.right&&mu(t.right,o,!0,n,i)}}var _u=function(){function t(t){void 0===t&&(t=du),this._root=null,this._size=0,this._comparator=t}return t.prototype.insert=function(t,e){return this._size++,this._root=vu(t,e,this._root,this._comparator)},t.prototype.add=function(t,e){var r=new pu(t,e);null===this._root&&(r.left=r.right=null,this._size++,this._root=r);var n=this._comparator,i=yu(t,this._root,n),o=n(t,i.key);return 0===o?this._root=i:(o<0?(r.left=i.left,r.right=i,i.left=null):o>0&&(r.right=i.right,r.left=i,i.right=null),this._size++,this._root=r),this._root},t.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},t.prototype._remove=function(t,e,r){var n;return null===e?null:0===r(t,(e=yu(t,e,r)).key)?(null===e.left?n=e.right:(n=yu(t,e.left,r)).right=e.right,this._size--,n):e},t.prototype.pop=function(){var t=this._root;if(t){for(;t.left;)t=t.left;return this._root=yu(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},t.prototype.findStatic=function(t){for(var e=this._root,r=this._comparator;e;){var n=r(t,e.key);if(0===n)return e;e=n<0?e.left:e.right}return null},t.prototype.find=function(t){return this._root&&(this._root=yu(t,this._root,this._comparator),0!==this._comparator(t,this._root.key))?null:this._root},t.prototype.contains=function(t){for(var e=this._root,r=this._comparator;e;){var n=r(t,e.key);if(0===n)return!0;e=n<0?e.left:e.right}return!1},t.prototype.forEach=function(t,e){for(var r=this._root,n=[],i=!1;!i;)null!==r?(n.push(r),r=r.left):0!==n.length?(r=n.pop(),t.call(e,r),r=r.right):i=!0;return this},t.prototype.range=function(t,e,r,n){for(var i=[],o=this._comparator,s=this._root;0!==i.length||s;)if(s)i.push(s),s=s.left;else{if(o((s=i.pop()).key,e)>0)break;if(o(s.key,t)>=0&&r.call(n,s))return this;s=s.right}return this},t.prototype.keys=function(){var t=[];return this.forEach(function(e){var r=e.key;return t.push(r)}),t},t.prototype.values=function(){var t=[];return this.forEach(function(e){var r=e.data;return t.push(r)}),t},t.prototype.min=function(){return this._root?this.minNode(this._root).key:null},t.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},t.prototype.minNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.left;)t=t.left;return t},t.prototype.maxNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.right;)t=t.right;return t},t.prototype.at=function(t){for(var e=this._root,r=!1,n=0,i=[];!r;)if(e)i.push(e),e=e.left;else if(i.length>0){if(e=i.pop(),n===t)return e;n++,e=e.right}else r=!0;return null},t.prototype.next=function(t){var e=this._root,r=null;if(t.right){for(r=t.right;r.left;)r=r.left;return r}for(var n=this._comparator;e;){var i=n(t.key,e.key);if(0===i)break;i<0?(r=e,e=e.left):e=e.right}return r},t.prototype.prev=function(t){var e=this._root,r=null;if(null!==t.left){for(r=t.left;r.right;)r=r.right;return r}for(var n=this._comparator;e;){var i=n(t.key,e.key);if(0===i)break;i<0?e=e.left:(r=e,e=e.right)}return r},t.prototype.clear=function(){return this._root=null,this._size=0,this},t.prototype.toList=function(){return function(t){var e=t,r=[],n=!1,i=new pu(null,null),o=i;for(;!n;)e?(r.push(e),e=e.left):r.length>0?e=(e=o=o.next=r.pop()).right:n=!0;return o.next=null,i.next}(this._root)},t.prototype.load=function(t,e,r){void 0===e&&(e=[]),void 0===r&&(r=!1);var n=t.length,i=this._comparator;if(r&&Su(t,e,0,n-1,i),null===this._root)this._root=bu(t,e,0,n),this._size=n;else{var o=function(t,e,r){var n=new pu(null,null),i=n,o=t,s=e;for(;null!==o&&null!==s;)r(o.key,s.key)<0?(i.next=o,o=o.next):(i.next=s,s=s.next),i=i.next;null!==o?i.next=o:null!==s&&(i.next=s);return n.next}(this.toList(),function(t,e){for(var r=new pu(null,null),n=r,i=0;i<t.length;i++)n=n.next=new pu(t[i],e[i]);return n.next=null,r.next}(t,e),i);n=this._size+n,this._root=xu({head:o},0,n)}return this},t.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),t.prototype.toString=function(t){void 0===t&&(t=function(t){return String(t.key)});var e=[];return mu(this._root,"",!0,function(t){return e.push(t)},t),e.join("")},t.prototype.update=function(t,e,r){var n=this._comparator,i=gu(t,this._root,n),o=i.left,s=i.right;n(t,e)<0?s=vu(e,r,s,n):o=vu(e,r,o,n),this._root=function(t,e,r){return null===e?t:(null===t||((e=yu(t.key,e,r)).left=t),e)}(o,s,n)},t.prototype.split=function(t){return gu(t,this._root,this._comparator)},t}();function bu(t,e,r,n){var i=n-r;if(i>0){var o=r+Math.floor(i/2),s=t[o],a=e[o],u=new pu(s,a);return u.left=bu(t,e,r,o),u.right=bu(t,e,o+1,n),u}return null}function xu(t,e,r){var n=r-e;if(n>0){var i=e+Math.floor(n/2),o=xu(t,e,i),s=t.head;return s.left=o,t.head=t.head.next,s.right=xu(t,i+1,r),s}return null}function Su(t,e,r,n,i){if(!(r>=n)){for(var o=t[r+n>>1],s=r-1,a=n+1;;){do{s++}while(i(t[s],o)<0);do{a--}while(i(t[a],o)>0);if(s>=a)break;var u=t[s];t[s]=t[a],t[a]=u,u=e[s],e[s]=e[a],e[a]=u}Su(t,e,r,a,i),Su(t,e,a+1,n,i)}}function wu(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Cu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Iu(t,e,r){return e&&Cu(t.prototype,e),r&&Cu(t,r),t}var Eu=function(t,e){return t.ll.x<=e.x&&e.x<=t.ur.x&&t.ll.y<=e.y&&e.y<=t.ur.y},Pu=function(t,e){if(e.ur.x<t.ll.x||t.ur.x<e.ll.x||e.ur.y<t.ll.y||t.ur.y<e.ll.y)return null;var r=t.ll.x<e.ll.x?e.ll.x:t.ll.x,n=t.ur.x<e.ur.x?t.ur.x:e.ur.x;return{ll:{x:r,y:t.ll.y<e.ll.y?e.ll.y:t.ll.y},ur:{x:n,y:t.ur.y<e.ur.y?t.ur.y:e.ur.y}}},Mu=Number.EPSILON;void 0===Mu&&(Mu=Math.pow(2,-52));var Lu=Mu*Mu,Nu=function(t,e){if(-Mu<t&&t<Mu&&-Mu<e&&e<Mu)return 0;var r=t-e;return r*r<Lu*t*e?0:t<e?-1:1},Tu=function(){function t(){wu(this,t),this.reset()}return Iu(t,[{key:"reset",value:function(){this.xRounder=new Ou,this.yRounder=new Ou}},{key:"round",value:function(t,e){return{x:this.xRounder.round(t),y:this.yRounder.round(e)}}}]),t}(),Ou=function(){function t(){wu(this,t),this.tree=new _u,this.round(0)}return Iu(t,[{key:"round",value:function(t){var e=this.tree.add(t),r=this.tree.prev(e);if(null!==r&&0===Nu(e.key,r.key))return this.tree.remove(t),r.key;var n=this.tree.next(e);return null!==n&&0===Nu(e.key,n.key)?(this.tree.remove(t),n.key):t}}]),t}(),Au=new Tu,Ru=function(t,e){return t.x*e.y-t.y*e.x},Fu=function(t,e){return t.x*e.x+t.y*e.y},Du=function(t,e,r){var n={x:e.x-t.x,y:e.y-t.y},i={x:r.x-t.x,y:r.y-t.y},o=Ru(n,i);return Nu(o,0)},ku=function(t){return Math.sqrt(Fu(t,t))},ju=function(t,e,r){var n={x:e.x-t.x,y:e.y-t.y},i={x:r.x-t.x,y:r.y-t.y};return Fu(i,n)/ku(i)/ku(n)},Gu=function(t,e,r){return 0===e.y?null:{x:t.x+e.x/e.y*(r-t.y),y:r}},Bu=function(t,e,r){return 0===e.x?null:{x:r,y:t.y+e.y/e.x*(r-t.x)}},Uu=function(){function t(e,r){wu(this,t),void 0===e.events?e.events=[this]:e.events.push(this),this.point=e,this.isLeft=r}return Iu(t,null,[{key:"compare",value:function(e,r){var n=t.comparePoints(e.point,r.point);return 0!==n?n:(e.point!==r.point&&e.link(r),e.isLeft!==r.isLeft?e.isLeft?1:-1:zu.compare(e.segment,r.segment))}},{key:"comparePoints",value:function(t,e){return t.x<e.x?-1:t.x>e.x?1:t.y<e.y?-1:t.y>e.y?1:0}}]),Iu(t,[{key:"link",value:function(t){if(t.point===this.point)throw new Error("Tried to link already linked events");for(var e=t.point.events,r=0,n=e.length;r<n;r++){var i=e[r];this.point.events.push(i),i.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var t=this.point.events.length,e=0;e<t;e++){var r=this.point.events[e];if(void 0===r.segment.consumedBy)for(var n=e+1;n<t;n++){var i=this.point.events[n];void 0===i.consumedBy&&(r.otherSE.point.events===i.otherSE.point.events&&r.segment.consume(i.segment))}}}},{key:"getAvailableLinkedEvents",value:function(){for(var t=[],e=0,r=this.point.events.length;e<r;e++){var n=this.point.events[e];n!==this&&!n.segment.ringOut&&n.segment.isInResult()&&t.push(n)}return t}},{key:"getLeftmostComparator",value:function(t){var e=this,r=new Map,n=function(n){var i,o,s,a,u,l=n.otherSE;r.set(n,{sine:(i=e.point,o=t.point,s=l.point,a={x:o.x-i.x,y:o.y-i.y},u={x:s.x-i.x,y:s.y-i.y},Ru(u,a)/ku(u)/ku(a)),cosine:ju(e.point,t.point,l.point)})};return function(t,e){r.has(t)||n(t),r.has(e)||n(e);var i=r.get(t),o=i.sine,s=i.cosine,a=r.get(e),u=a.sine,l=a.cosine;return o>=0&&u>=0?s<l?1:s>l?-1:0:o<0&&u<0?s<l?-1:s>l?1:0:u<o?-1:u>o?1:0}}}]),t}(),qu=0,zu=function(){function t(e,r,n,i){wu(this,t),this.id=++qu,this.leftSE=e,e.segment=this,e.otherSE=r,this.rightSE=r,r.segment=this,r.otherSE=e,this.rings=n,this.windings=i}return Iu(t,null,[{key:"compare",value:function(t,e){var r=t.leftSE.point.x,n=e.leftSE.point.x,i=t.rightSE.point.x,o=e.rightSE.point.x;if(o<r)return 1;if(i<n)return-1;var s=t.leftSE.point.y,a=e.leftSE.point.y,u=t.rightSE.point.y,l=e.rightSE.point.y;if(r<n){if(a<s&&a<u)return 1;if(a>s&&a>u)return-1;var c=t.comparePoint(e.leftSE.point);if(c<0)return 1;if(c>0)return-1;var h=e.comparePoint(t.rightSE.point);return 0!==h?h:-1}if(r>n){if(s<a&&s<l)return-1;if(s>a&&s>l)return 1;var f=e.comparePoint(t.leftSE.point);if(0!==f)return f;var p=t.comparePoint(e.rightSE.point);return p<0?1:p>0?-1:1}if(s<a)return-1;if(s>a)return 1;if(i<o){var d=e.comparePoint(t.rightSE.point);if(0!==d)return d}if(i>o){var y=t.comparePoint(e.rightSE.point);if(y<0)return 1;if(y>0)return-1}if(i!==o){var v=u-s,g=i-r,m=l-a,_=o-n;if(v>g&&m<_)return 1;if(v<g&&m>_)return-1}return i>o?1:i<o||u<l?-1:u>l?1:t.id<e.id?-1:t.id>e.id?1:0}}]),Iu(t,[{key:"replaceRightSE",value:function(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var t=this.leftSE.point.y,e=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<e?t:e},ur:{x:this.rightSE.point.x,y:t>e?t:e}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}},{key:"comparePoint",value:function(t){if(this.isAnEndpoint(t))return 0;var e=this.leftSE.point,r=this.rightSE.point,n=this.vector();if(e.x===r.x)return t.x===e.x?0:t.x<e.x?1:-1;var i=(t.y-e.y)/n.y,o=e.x+i*n.x;if(t.x===o)return 0;var s=(t.x-e.x)/n.x,a=e.y+s*n.y;return t.y===a?0:t.y<a?-1:1}},{key:"getIntersection",value:function(t){var e=this.bbox(),r=t.bbox(),n=Pu(e,r);if(null===n)return null;var i=this.leftSE.point,o=this.rightSE.point,s=t.leftSE.point,a=t.rightSE.point,u=Eu(e,s)&&0===this.comparePoint(s),l=Eu(r,i)&&0===t.comparePoint(i),c=Eu(e,a)&&0===this.comparePoint(a),h=Eu(r,o)&&0===t.comparePoint(o);if(l&&u)return h&&!c?o:!h&&c?a:null;if(l)return c&&i.x===a.x&&i.y===a.y?null:i;if(u)return h&&o.x===s.x&&o.y===s.y?null:s;if(h&&c)return null;if(h)return o;if(c)return a;var f=function(t,e,r,n){if(0===e.x)return Bu(r,n,t.x);if(0===n.x)return Bu(t,e,r.x);if(0===e.y)return Gu(r,n,t.y);if(0===n.y)return Gu(t,e,r.y);var i=Ru(e,n);if(0==i)return null;var o={x:r.x-t.x,y:r.y-t.y},s=Ru(o,e)/i,a=Ru(o,n)/i;return{x:(t.x+a*e.x+(r.x+s*n.x))/2,y:(t.y+a*e.y+(r.y+s*n.y))/2}}(i,this.vector(),s,t.vector());return null===f?null:Eu(n,f)?Au.round(f.x,f.y):null}},{key:"split",value:function(e){var r=[],n=void 0!==e.events,i=new Uu(e,!0),o=new Uu(e,!1),s=this.rightSE;this.replaceRightSE(o),r.push(o),r.push(i);var a=new t(i,s,this.rings.slice(),this.windings.slice());return Uu.comparePoints(a.leftSE.point,a.rightSE.point)>0&&a.swapEvents(),Uu.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),n&&(i.checkForConsuming(),o.checkForConsuming()),r}},{key:"swapEvents",value:function(){var t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var e=0,r=this.windings.length;e<r;e++)this.windings[e]*=-1}},{key:"consume",value:function(e){for(var r=this,n=e;r.consumedBy;)r=r.consumedBy;for(;n.consumedBy;)n=n.consumedBy;var i=t.compare(r,n);if(0!==i){if(i>0){var o=r;r=n,n=o}if(r.prev===n){var s=r;r=n,n=s}for(var a=0,u=n.rings.length;a<u;a++){var l=n.rings[a],c=n.windings[a],h=r.rings.indexOf(l);-1===h?(r.rings.push(l),r.windings.push(c)):r.windings[h]+=c}n.rings=null,n.windings=null,n.consumedBy=r,n.leftSE.consumedBy=r.leftSE,n.rightSE.consumedBy=r.rightSE}}},{key:"prevInResult",value:function(){return void 0!==this._prevInResult||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}},{key:"beforeState",value:function(){if(void 0!==this._beforeState)return this._beforeState;if(this.prev){var t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}},{key:"afterState",value:function(){if(void 0!==this._afterState)return this._afterState;var t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};for(var e=this._afterState.rings,r=this._afterState.windings,n=this._afterState.multiPolys,i=0,o=this.rings.length;i<o;i++){var s=this.rings[i],a=this.windings[i],u=e.indexOf(s);-1===u?(e.push(s),r.push(a)):r[u]+=a}for(var l=[],c=[],h=0,f=e.length;h<f;h++)if(0!==r[h]){var p=e[h],d=p.poly;if(-1===c.indexOf(d))if(p.isExterior)l.push(d);else{-1===c.indexOf(d)&&c.push(d);var y=l.indexOf(p.poly);-1!==y&&l.splice(y,1)}}for(var v=0,g=l.length;v<g;v++){var m=l[v].multiPoly;-1===n.indexOf(m)&&n.push(m)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var t=this.beforeState().multiPolys,e=this.afterState().multiPolys;switch($u.type){case"union":var r=0===t.length,n=0===e.length;this._isInResult=r!==n;break;case"intersection":var i,o;t.length<e.length?(i=t.length,o=e.length):(i=e.length,o=t.length),this._isInResult=o===$u.numMultiPolys&&i<o;break;case"xor":var s=Math.abs(t.length-e.length);this._isInResult=s%2==1;break;case"difference":var a=function(t){return 1===t.length&&t[0].isSubject};this._isInResult=a(t)!==a(e);break;default:throw new Error("Unrecognized operation type found ".concat($u.type))}return this._isInResult}}],[{key:"fromRing",value:function(e,r,n){var i,o,s,a=Uu.comparePoints(e,r);if(a<0)i=e,o=r,s=1;else{if(!(a>0))throw new Error("Tried to create degenerate segment at [".concat(e.x,", ").concat(e.y,"]"));i=r,o=e,s=-1}return new t(new Uu(i,!0),new Uu(o,!1),[n],[s])}}]),t}(),Vu=function(){function t(e,r,n){if(wu(this,t),!Array.isArray(e)||0===e.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=r,this.isExterior=n,this.segments=[],"number"!=typeof e[0][0]||"number"!=typeof e[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var i=Au.round(e[0][0],e[0][1]);this.bbox={ll:{x:i.x,y:i.y},ur:{x:i.x,y:i.y}};for(var o=i,s=1,a=e.length;s<a;s++){if("number"!=typeof e[s][0]||"number"!=typeof e[s][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var u=Au.round(e[s][0],e[s][1]);u.x===o.x&&u.y===o.y||(this.segments.push(zu.fromRing(o,u,this)),u.x<this.bbox.ll.x&&(this.bbox.ll.x=u.x),u.y<this.bbox.ll.y&&(this.bbox.ll.y=u.y),u.x>this.bbox.ur.x&&(this.bbox.ur.x=u.x),u.y>this.bbox.ur.y&&(this.bbox.ur.y=u.y),o=u)}i.x===o.x&&i.y===o.y||this.segments.push(zu.fromRing(o,i,this))}return Iu(t,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,r=this.segments.length;e<r;e++){var n=this.segments[e];t.push(n.leftSE),t.push(n.rightSE)}return t}}]),t}(),Wu=function(){function t(e,r){if(wu(this,t),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Vu(e[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var n=1,i=e.length;n<i;n++){var o=new Vu(e[n],this,!1);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.interiorRings.push(o)}this.multiPoly=r}return Iu(t,[{key:"getSweepEvents",value:function(){for(var t=this.exteriorRing.getSweepEvents(),e=0,r=this.interiorRings.length;e<r;e++)for(var n=this.interiorRings[e].getSweepEvents(),i=0,o=n.length;i<o;i++)t.push(n[i]);return t}}]),t}(),Hu=function(){function t(e,r){if(wu(this,t),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"==typeof e[0][0][0]&&(e=[e])}catch(t){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var n=0,i=e.length;n<i;n++){var o=new Wu(e[n],this);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.polys.push(o)}this.isSubject=r}return Iu(t,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,r=this.polys.length;e<r;e++)for(var n=this.polys[e].getSweepEvents(),i=0,o=n.length;i<o;i++)t.push(n[i]);return t}}]),t}(),Xu=function(){function t(e){wu(this,t),this.events=e;for(var r=0,n=e.length;r<n;r++)e[r].segment.ringOut=this;this.poly=null}return Iu(t,null,[{key:"factory",value:function(e){for(var r=[],n=0,i=e.length;n<i;n++){var o=e[n];if(o.isInResult()&&!o.ringOut){for(var s=null,a=o.leftSE,u=o.rightSE,l=[a],c=a.point,h=[];s=a,a=u,l.push(a),a.point!==c;)for(;;){var f=a.getAvailableLinkedEvents();if(0===f.length){var p=l[0].point,d=l[l.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(p.x,",")+" ".concat(p.y,"]. Last matching segment found ends at")+" [".concat(d.x,", ").concat(d.y,"]."))}if(1===f.length){u=f[0].otherSE;break}for(var y=null,v=0,g=h.length;v<g;v++)if(h[v].point===a.point){y=v;break}if(null===y){h.push({index:l.length,point:a.point});var m=a.getLeftmostComparator(s);u=f.sort(m)[0].otherSE;break}var _=h.splice(y)[0],b=l.splice(_.index);b.unshift(b[0].otherSE),r.push(new t(b.reverse()))}r.push(new t(l))}}return r}}]),Iu(t,[{key:"getGeom",value:function(){for(var t=this.events[0].point,e=[t],r=1,n=this.events.length-1;r<n;r++){var i=this.events[r].point,o=this.events[r+1].point;0!==Du(i,t,o)&&(e.push(i),t=i)}if(1===e.length)return null;var s=e[0],a=e[1];0===Du(s,t,a)&&e.shift(),e.push(e[0]);for(var u=this.isExteriorRing()?1:-1,l=this.isExteriorRing()?0:e.length-1,c=this.isExteriorRing()?e.length:-1,h=[],f=l;f!=c;f+=u)h.push([e[f].x,e[f].y]);return h}},{key:"isExteriorRing",value:function(){if(void 0===this._isExteriorRing){var t=this.enclosingRing();this._isExteriorRing=!t||!t.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var t=this.events[0],e=1,r=this.events.length;e<r;e++){var n=this.events[e];Uu.compare(t,n)>0&&(t=n)}for(var i=t.segment.prevInResult(),o=i?i.prevInResult():null;;){if(!i)return null;if(!o)return i.ringOut;if(o.ringOut!==i.ringOut)return o.ringOut.enclosingRing()!==i.ringOut?i.ringOut:i.ringOut.enclosingRing();i=o.prevInResult(),o=i?i.prevInResult():null}}}]),t}(),Zu=function(){function t(e){wu(this,t),this.exteriorRing=e,e.poly=this,this.interiorRings=[]}return Iu(t,[{key:"addInterior",value:function(t){this.interiorRings.push(t),t.poly=this}},{key:"getGeom",value:function(){var t=[this.exteriorRing.getGeom()];if(null===t[0])return null;for(var e=0,r=this.interiorRings.length;e<r;e++){var n=this.interiorRings[e].getGeom();null!==n&&t.push(n)}return t}}]),t}(),Yu=function(){function t(e){wu(this,t),this.rings=e,this.polys=this._composePolys(e)}return Iu(t,[{key:"getGeom",value:function(){for(var t=[],e=0,r=this.polys.length;e<r;e++){var n=this.polys[e].getGeom();null!==n&&t.push(n)}return t}},{key:"_composePolys",value:function(t){for(var e=[],r=0,n=t.length;r<n;r++){var i=t[r];if(!i.poly)if(i.isExteriorRing())e.push(new Zu(i));else{var o=i.enclosingRing();o.poly||e.push(new Zu(o)),o.poly.addInterior(i)}}return e}}]),t}(),Ju=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:zu.compare;wu(this,t),this.queue=e,this.tree=new _u(r),this.segments=[]}return Iu(t,[{key:"process",value:function(t){var e=t.segment,r=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(e),r;var n=t.isLeft?this.tree.insert(e):this.tree.find(e);if(!n)throw new Error("Unable to find segment #".concat(e.id," ")+"[".concat(e.leftSE.point.x,", ").concat(e.leftSE.point.y,"] -> ")+"[".concat(e.rightSE.point.x,", ").concat(e.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var i=n,o=n,s=void 0,a=void 0;void 0===s;)null===(i=this.tree.prev(i))?s=null:void 0===i.key.consumedBy&&(s=i.key);for(;void 0===a;)null===(o=this.tree.next(o))?a=null:void 0===o.key.consumedBy&&(a=o.key);if(t.isLeft){var u=null;if(s){var l=s.getIntersection(e);if(null!==l&&(e.isAnEndpoint(l)||(u=l),!s.isAnEndpoint(l)))for(var c=this._splitSafely(s,l),h=0,f=c.length;h<f;h++)r.push(c[h])}var p=null;if(a){var d=a.getIntersection(e);if(null!==d&&(e.isAnEndpoint(d)||(p=d),!a.isAnEndpoint(d)))for(var y=this._splitSafely(a,d),v=0,g=y.length;v<g;v++)r.push(y[v])}if(null!==u||null!==p){var m=null;if(null===u)m=p;else if(null===p)m=u;else{m=Uu.comparePoints(u,p)<=0?u:p}this.queue.remove(e.rightSE),r.push(e.rightSE);for(var _=e.split(m),b=0,x=_.length;b<x;b++)r.push(_[b])}r.length>0?(this.tree.remove(e),r.push(t)):(this.segments.push(e),e.prev=s)}else{if(s&&a){var S=s.getIntersection(a);if(null!==S){if(!s.isAnEndpoint(S))for(var w=this._splitSafely(s,S),C=0,I=w.length;C<I;C++)r.push(w[C]);if(!a.isAnEndpoint(S))for(var E=this._splitSafely(a,S),P=0,M=E.length;P<M;P++)r.push(E[P])}}this.tree.remove(e)}return r}},{key:"_splitSafely",value:function(t,e){this.tree.remove(t);var r=t.rightSE;this.queue.remove(r);var n=t.split(e);return n.push(r),void 0===t.consumedBy&&this.tree.insert(t),n}}]),t}(),Qu="undefined"!=typeof t&&Object({NODE_ENV:undefined}).POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,Ku="undefined"!=typeof t&&Object({NODE_ENV:undefined}).POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,$u=new(function(){function t(){wu(this,t)}return Iu(t,[{key:"run",value:function(t,e,r){$u.type=t,Au.reset();for(var n=[new Hu(e,!0)],i=0,o=r.length;i<o;i++)n.push(new Hu(r[i],!1));if($u.numMultiPolys=n.length,"difference"===$u.type)for(var s=n[0],a=1;a<n.length;)null!==Pu(n[a].bbox,s.bbox)?a++:n.splice(a,1);if("intersection"===$u.type)for(var u=0,l=n.length;u<l;u++)for(var c=n[u],h=u+1,f=n.length;h<f;h++)if(null===Pu(c.bbox,n[h].bbox))return[];for(var p=new _u(Uu.compare),d=0,y=n.length;d<y;d++)for(var v=n[d].getSweepEvents(),g=0,m=v.length;g<m;g++)if(p.insert(v[g]),p.size>Qu)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var _=new Ju(p),b=p.size,x=p.pop();x;){var S=x.key;if(p.size===b){var w=S.segment;throw new Error("Unable to pop() ".concat(S.isLeft?"left":"right"," SweepEvent ")+"[".concat(S.point.x,", ").concat(S.point.y,"] from segment #").concat(w.id," ")+"[".concat(w.leftSE.point.x,", ").concat(w.leftSE.point.y,"] -> ")+"[".concat(w.rightSE.point.x,", ").concat(w.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(p.size>Qu)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(_.segments.length>Ku)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var C=_.process(S),I=0,E=C.length;I<E;I++){var P=C[I];void 0===P.consumedBy&&p.insert(P)}b=p.size,x=p.pop()}Au.reset();var M=Xu.factory(_.segments);return new Yu(M).getGeom()}}]),t}()),tl={union:function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return $u.run("union",t,r)},intersection:function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return $u.run("intersection",t,r)},xor:function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return $u.run("xor",t,r)},difference:function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return $u.run("difference",t,r)}};"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(null==this)throw new TypeError(this+" is not an object");var e=Object(this),r=Math.max(Math.min(e.length,9007199254740991),0)||0,n=1 in arguments&&parseInt(Number(arguments[1]),10)||0;n=n<0?Math.max(r+n,0):Math.min(n,r);var i=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:r;for(i=i<0?Math.max(r+arguments[2],0):Math.min(i,r);n<i;)e[n]=t,++n;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var el=function(){};el.prototype.interfaces_=function(){return[]},el.prototype.getClass=function(){return el},el.prototype.equalsWithTolerance=function(t,e,r){return Math.abs(t-e)<=r};var rl=function(t){function e(e){t.call(this,e),this.name="IllegalArgumentException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),nl=function(){},il={MAX_VALUE:{configurable:!0}};nl.isNaN=function(t){return Number.isNaN(t)},nl.doubleToLongBits=function(t){return t},nl.longBitsToDouble=function(t){return t},nl.isInfinite=function(t){return!Number.isFinite(t)},il.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(nl,il);var ol=function(){},sl=function(){},al=function(){};function ul(){}var ll=function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},cl={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};ll.prototype.setOrdinate=function(t,e){switch(t){case ll.X:this.x=e;break;case ll.Y:this.y=e;break;case ll.Z:this.z=e;break;default:throw new rl("Invalid ordinate index: "+t)}},ll.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],r=arguments[1];return!!el.equalsWithTolerance(this.x,e.x,r)&&!!el.equalsWithTolerance(this.y,e.y,r)}},ll.prototype.getOrdinate=function(t){switch(t){case ll.X:return this.x;case ll.Y:return this.y;case ll.Z:return this.z}throw new rl("Invalid ordinate index: "+t)},ll.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||nl.isNaN(this.z))&&nl.isNaN(t.z)},ll.prototype.equals=function(t){return t instanceof ll&&this.equals2D(t)},ll.prototype.equalInZ=function(t,e){return el.equalsWithTolerance(this.z,t.z,e)},ll.prototype.compareTo=function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},ll.prototype.clone=function(){},ll.prototype.copy=function(){return new ll(this)},ll.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},ll.prototype.distance3D=function(t){var e=this.x-t.x,r=this.y-t.y,n=this.z-t.z;return Math.sqrt(e*e+r*r+n*n)},ll.prototype.distance=function(t){var e=this.x-t.x,r=this.y-t.y;return Math.sqrt(e*e+r*r)},ll.prototype.hashCode=function(){var t=17;return t=37*(t=37*t+ll.hashCode(this.x))+ll.hashCode(this.y)},ll.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},ll.prototype.interfaces_=function(){return[ol,sl,ul]},ll.prototype.getClass=function(){return ll},ll.hashCode=function(){if(1===arguments.length){var t=arguments[0],e=nl.doubleToLongBits(t);return Math.trunc((e^e)>>>32)}},cl.DimensionalComparator.get=function(){return hl},cl.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},cl.NULL_ORDINATE.get=function(){return nl.NaN},cl.X.get=function(){return 0},cl.Y.get=function(){return 1},cl.Z.get=function(){return 2},Object.defineProperties(ll,cl);var hl=function(t){if(this._dimensionsToTest=2,0===arguments.length);else if(1===arguments.length){var e=arguments[0];if(2!==e&&3!==e)throw new rl("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}};hl.prototype.compare=function(t,e){var r=t,n=e,i=hl.compare(r.x,n.x);if(0!==i)return i;var o=hl.compare(r.y,n.y);return 0!==o?o:this._dimensionsToTest<=2?0:hl.compare(r.z,n.z)},hl.prototype.interfaces_=function(){return[al]},hl.prototype.getClass=function(){return hl},hl.compare=function(t,e){return t<e?-1:t>e?1:nl.isNaN(t)?nl.isNaN(e)?0:-1:nl.isNaN(e)?1:0};var fl=function(){};fl.prototype.create=function(){},fl.prototype.interfaces_=function(){return[]},fl.prototype.getClass=function(){return fl};var pl=function(){},dl={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};pl.prototype.interfaces_=function(){return[]},pl.prototype.getClass=function(){return pl},pl.toLocationSymbol=function(t){switch(t){case pl.EXTERIOR:return"e";case pl.BOUNDARY:return"b";case pl.INTERIOR:return"i";case pl.NONE:return"-"}throw new rl("Unknown location value: "+t)},dl.INTERIOR.get=function(){return 0},dl.BOUNDARY.get=function(){return 1},dl.EXTERIOR.get=function(){return 2},dl.NONE.get=function(){return-1},Object.defineProperties(pl,dl);var yl=function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1},vl=function(){},gl={LOG_10:{configurable:!0}};vl.prototype.interfaces_=function(){return[]},vl.prototype.getClass=function(){return vl},vl.log10=function(t){var e=Math.log(t);return nl.isInfinite(e)||nl.isNaN(e)?e:e/vl.LOG_10},vl.min=function(t,e,r,n){var i=t;return e<i&&(i=e),r<i&&(i=r),n<i&&(i=n),i},vl.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],r=arguments[2];return t<e?e:t>r?r:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var n=arguments[0],i=arguments[1],o=arguments[2];return n<i?i:n>o?o:n}},vl.wrap=function(t,e){return t<0?e- -t%e:t%e},vl.max=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],r=arguments[2],n=t;return e>n&&(n=e),r>n&&(n=r),n}if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],u=i;return o>u&&(u=o),s>u&&(u=s),a>u&&(u=a),u}},vl.average=function(t,e){return(t+e)/2},gl.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(vl,gl);var ml=function(t){this.str=t};ml.prototype.append=function(t){this.str+=t},ml.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},ml.prototype.toString=function(t){return this.str};var _l=function(t){this.value=t};_l.prototype.intValue=function(){return this.value},_l.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},_l.isNaN=function(t){return Number.isNaN(t)};var bl=function(){};bl.isWhitespace=function(t){return t<=32&&t>=0||127===t},bl.toUpperCase=function(t){return t.toUpperCase()};var xl=function t(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length){if("number"==typeof arguments[0]){var e=arguments[0];this.init(e)}else if(arguments[0]instanceof t){var r=arguments[0];this.init(r)}else if("string"==typeof arguments[0]){var n=arguments[0];t.call(this,t.parse(n))}}else if(2===arguments.length){var i=arguments[0],o=arguments[1];this.init(i,o)}},Sl={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};xl.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},xl.prototype.extractSignificantDigits=function(t,e){var r=this.abs(),n=xl.magnitude(r._hi),i=xl.TEN.pow(n);(r=r.divide(i)).gt(xl.TEN)?(r=r.divide(xl.TEN),n+=1):r.lt(xl.ONE)&&(r=r.multiply(xl.TEN),n-=1);for(var o=n+1,s=new ml,a=xl.MAX_PRINT_DIGITS-1,u=0;u<=a;u++){t&&u===o&&s.append(".");var l=Math.trunc(r._hi);if(l<0)break;var c=!1,h=0;l>9?(c=!0,h="9"):h="0"+l,s.append(h),r=r.subtract(xl.valueOf(l)).multiply(xl.TEN),c&&r.selfAdd(xl.TEN);var f=!0,p=xl.magnitude(r._hi);if(p<0&&Math.abs(p)>=a-u&&(f=!1),!f)break}return e[0]=n,s.toString()},xl.prototype.sqr=function(){return this.multiply(this)},xl.prototype.doubleValue=function(){return this._hi+this._lo},xl.prototype.subtract=function(){if(arguments[0]instanceof xl){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},xl.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},xl.prototype.isZero=function(){return 0===this._hi&&0===this._lo},xl.prototype.selfSubtract=function(){if(arguments[0]instanceof xl){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},xl.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},xl.prototype.min=function(t){return this.le(t)?this:t},xl.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof xl){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var r=arguments[0],n=arguments[1],i=null,o=null,s=null,a=null,u=null,l=null,c=null,h=null;return u=this._hi/r,h=(i=(l=xl.SPLIT*u)-(i=l-u))*(s=(h=xl.SPLIT*r)-(s=h-r))-(c=u*r)+i*(a=r-s)+(o=u-i)*s+o*a,h=u+(l=(this._hi-c-h+this._lo-u*n)/r),this._hi=h,this._lo=u-h+l,this}},xl.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},xl.prototype.divide=function(){if(arguments[0]instanceof xl){var t=arguments[0],e=null,r=null,n=null,i=null,o=null,s=null,a=null,u=null;r=(o=this._hi/t._hi)-(e=(s=xl.SPLIT*o)-(e=s-o)),u=e*(n=(u=xl.SPLIT*t._hi)-(n=u-t._hi))-(a=o*t._hi)+e*(i=t._hi-n)+r*n+r*i;var l=u=o+(s=(this._hi-a-u+this._lo-o*t._lo)/t._hi),c=o-u+s;return new xl(l,c)}if("number"==typeof arguments[0]){var h=arguments[0];return nl.isNaN(h)?xl.createNaN():xl.copy(this).selfDivide(h,0)}},xl.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},xl.prototype.pow=function(t){if(0===t)return xl.valueOf(1);var e=new xl(this),r=xl.valueOf(1),n=Math.abs(t);if(n>1)for(;n>0;)n%2==1&&r.selfMultiply(e),(n/=2)>0&&(e=e.sqr());else r=e;return t<0?r.reciprocal():r},xl.prototype.ceil=function(){if(this.isNaN())return xl.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new xl(t,e)},xl.prototype.compareTo=function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0},xl.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},xl.prototype.setValue=function(){if(arguments[0]instanceof xl){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},xl.prototype.max=function(t){return this.ge(t)?this:t},xl.prototype.sqrt=function(){if(this.isZero())return xl.valueOf(0);if(this.isNegative())return xl.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,r=xl.valueOf(e),n=this.subtract(r.sqr())._hi*(.5*t);return r.add(n)},xl.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof xl){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0],r=null,n=null,i=null,o=null,s=null,a=null;return o=(i=this._hi+e)-(s=i-this._hi),n=(a=(o=e-s+(this._hi-o))+this._lo)+(i-(r=i+a)),this._hi=r+n,this._lo=n+(r-this._hi),this}}else if(2===arguments.length){var u=arguments[0],l=arguments[1],c=null,h=null,f=null,p=null,d=null,y=null,v=null;p=this._hi+u,h=this._lo+l,d=p-(y=p-this._hi),f=h-(v=h-this._lo);var g=(c=p+(y=(d=u-y+(this._hi-d))+h))+(y=(f=l-v+(this._lo-f))+(y+(p-c))),m=y+(c-g);return this._hi=g,this._lo=m,this}},xl.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof xl){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var r=arguments[0],n=arguments[1],i=null,o=null,s=null,a=null,u=null,l=null;i=(u=xl.SPLIT*this._hi)-this._hi,l=xl.SPLIT*r,i=u-i,o=this._hi-i,s=l-r;var c=(u=this._hi*r)+(l=i*(s=l-s)-u+i*(a=r-s)+o*s+o*a+(this._hi*n+this._lo*r)),h=l+(i=u-c);return this._hi=c,this._lo=h,this}},xl.prototype.selfSqr=function(){return this.selfMultiply(this)},xl.prototype.floor=function(){if(this.isNaN())return xl.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new xl(t,e)},xl.prototype.negate=function(){return this.isNaN()?this:new xl(-this._hi,-this._lo)},xl.prototype.clone=function(){},xl.prototype.multiply=function(){if(arguments[0]instanceof xl){var t=arguments[0];return t.isNaN()?xl.createNaN():xl.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return nl.isNaN(e)?xl.createNaN():xl.copy(this).selfMultiply(e,0)}},xl.prototype.isNaN=function(){return nl.isNaN(this._hi)},xl.prototype.intValue=function(){return Math.trunc(this._hi)},xl.prototype.toString=function(){var t=xl.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},xl.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),r=this.extractSignificantDigits(!0,e),n=e[0]+1,i=r;if("."===r.charAt(0))i="0"+r;else if(n<0)i="0."+xl.stringOfChar("0",-n)+r;else if(-1===r.indexOf(".")){var o=n-r.length;i=r+xl.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+i:i},xl.prototype.reciprocal=function(){var t,e,r,n,i=null,o=null,s=null,a=null;t=(r=1/this._hi)-(i=(s=xl.SPLIT*r)-(i=s-r)),o=(a=xl.SPLIT*this._hi)-this._hi;var u=r+(s=(1-(n=r*this._hi)-(a=i*(o=a-o)-n+i*(e=this._hi-o)+t*o+t*e)-r*this._lo)/this._hi);return new xl(u,r-u+s)},xl.prototype.toSciNotation=function(){if(this.isZero())return xl.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),r=this.extractSignificantDigits(!1,e),n=xl.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===r.charAt(0))throw new Error("Found leading zero: "+r);var i="";r.length>1&&(i=r.substring(1));var o=r.charAt(0)+"."+i;return this.isNegative()?"-"+o+n:o+n},xl.prototype.abs=function(){return this.isNaN()?xl.NaN:this.isNegative()?this.negate():new xl(this)},xl.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},xl.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},xl.prototype.add=function(){if(arguments[0]instanceof xl){var t=arguments[0];return xl.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return xl.copy(this).selfAdd(e)}},xl.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof xl){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var r=arguments[0],n=arguments[1];this._hi=r,this._lo=n}},xl.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},xl.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},xl.prototype.trunc=function(){return this.isNaN()?xl.NaN:this.isPositive()?this.floor():this.ceil()},xl.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},xl.prototype.interfaces_=function(){return[ul,ol,sl]},xl.prototype.getClass=function(){return xl},xl.sqr=function(t){return xl.valueOf(t).selfMultiply(t)},xl.valueOf=function(){if("string"==typeof arguments[0]){var t=arguments[0];return xl.parse(t)}if("number"==typeof arguments[0]){var e=arguments[0];return new xl(e)}},xl.sqrt=function(t){return xl.valueOf(t).sqrt()},xl.parse=function(t){for(var e=0,r=t.length;bl.isWhitespace(t.charAt(e));)e++;var n=!1;if(e<r){var i=t.charAt(e);"-"!==i&&"+"!==i||(e++,"-"===i&&(n=!0))}for(var o=new xl,s=0,a=0,u=0;!(e>=r);){var l=t.charAt(e);if(e++,bl.isDigit(l)){var c=l-"0";o.selfMultiply(xl.TEN),o.selfAdd(c),s++}else{if("."!==l){if("e"===l||"E"===l){var h=t.substring(e);try{u=_l.parseInt(h)}catch(e){throw e instanceof Error?new Error("Invalid exponent "+h+" in string "+t):e}break}throw new Error("Unexpected character '"+l+"' at position "+e+" in string "+t)}a=s}}var f=o,p=s-a-u;if(0===p)f=o;else if(p>0){var d=xl.TEN.pow(p);f=o.divide(d)}else if(p<0){var y=xl.TEN.pow(-p);f=o.multiply(y)}return n?f.negate():f},xl.createNaN=function(){return new xl(nl.NaN,nl.NaN)},xl.copy=function(t){return new xl(t)},xl.magnitude=function(t){var e=Math.abs(t),r=Math.log(e)/Math.log(10),n=Math.trunc(Math.floor(r));return 10*Math.pow(10,n)<=e&&(n+=1),n},xl.stringOfChar=function(t,e){for(var r=new ml,n=0;n<e;n++)r.append(t);return r.toString()},Sl.PI.get=function(){return new xl(3.141592653589793,1.2246467991473532e-16)},Sl.TWO_PI.get=function(){return new xl(6.283185307179586,2.4492935982947064e-16)},Sl.PI_2.get=function(){return new xl(1.5707963267948966,6.123233995736766e-17)},Sl.E.get=function(){return new xl(2.718281828459045,1.4456468917292502e-16)},Sl.NaN.get=function(){return new xl(nl.NaN,nl.NaN)},Sl.EPS.get=function(){return 1.23259516440783e-32},Sl.SPLIT.get=function(){return 134217729},Sl.MAX_PRINT_DIGITS.get=function(){return 32},Sl.TEN.get=function(){return xl.valueOf(10)},Sl.ONE.get=function(){return xl.valueOf(1)},Sl.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},Sl.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(xl,Sl);var wl=function(){},Cl={DP_SAFE_EPSILON:{configurable:!0}};wl.prototype.interfaces_=function(){return[]},wl.prototype.getClass=function(){return wl},wl.orientationIndex=function(t,e,r){var n=wl.orientationIndexFilter(t,e,r);if(n<=1)return n;var i=xl.valueOf(e.x).selfAdd(-t.x),o=xl.valueOf(e.y).selfAdd(-t.y),s=xl.valueOf(r.x).selfAdd(-e.x),a=xl.valueOf(r.y).selfAdd(-e.y);return i.selfMultiply(a).selfSubtract(o.selfMultiply(s)).signum()},wl.signOfDet2x2=function(t,e,r,n){return t.multiply(n).selfSubtract(e.multiply(r)).signum()},wl.intersection=function(t,e,r,n){var i=xl.valueOf(n.y).selfSubtract(r.y).selfMultiply(xl.valueOf(e.x).selfSubtract(t.x)),o=xl.valueOf(n.x).selfSubtract(r.x).selfMultiply(xl.valueOf(e.y).selfSubtract(t.y)),s=i.subtract(o),a=xl.valueOf(n.x).selfSubtract(r.x).selfMultiply(xl.valueOf(t.y).selfSubtract(r.y)),u=xl.valueOf(n.y).selfSubtract(r.y).selfMultiply(xl.valueOf(t.x).selfSubtract(r.x)),l=a.subtract(u).selfDivide(s).doubleValue(),c=xl.valueOf(t.x).selfAdd(xl.valueOf(e.x).selfSubtract(t.x).selfMultiply(l)).doubleValue(),h=xl.valueOf(e.x).selfSubtract(t.x).selfMultiply(xl.valueOf(t.y).selfSubtract(r.y)),f=xl.valueOf(e.y).selfSubtract(t.y).selfMultiply(xl.valueOf(t.x).selfSubtract(r.x)),p=h.subtract(f).selfDivide(s).doubleValue(),d=xl.valueOf(r.y).selfAdd(xl.valueOf(n.y).selfSubtract(r.y).selfMultiply(p)).doubleValue();return new ll(c,d)},wl.orientationIndexFilter=function(t,e,r){var n=null,i=(t.x-r.x)*(e.y-r.y),o=(t.y-r.y)*(e.x-r.x),s=i-o;if(i>0){if(o<=0)return wl.signum(s);n=i+o}else{if(!(i<0))return wl.signum(s);if(o>=0)return wl.signum(s);n=-i-o}var a=wl.DP_SAFE_EPSILON*n;return s>=a||-s>=a?wl.signum(s):2},wl.signum=function(t){return t>0?1:t<0?-1:0},Cl.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(wl,Cl);var Il=function(){},El={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};El.X.get=function(){return 0},El.Y.get=function(){return 1},El.Z.get=function(){return 2},El.M.get=function(){return 3},Il.prototype.setOrdinate=function(t,e,r){},Il.prototype.size=function(){},Il.prototype.getOrdinate=function(t,e){},Il.prototype.getCoordinate=function(){},Il.prototype.getCoordinateCopy=function(t){},Il.prototype.getDimension=function(){},Il.prototype.getX=function(t){},Il.prototype.clone=function(){},Il.prototype.expandEnvelope=function(t){},Il.prototype.copy=function(){},Il.prototype.getY=function(t){},Il.prototype.toCoordinateArray=function(){},Il.prototype.interfaces_=function(){return[sl]},Il.prototype.getClass=function(){return Il},Object.defineProperties(Il,El);var Pl=function(){},Ml=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Pl),Ll=function(){};Ll.arraycopy=function(t,e,r,n,i){for(var o=0,s=e;s<e+i;s++)r[n+o]=t[s],o++},Ll.getProperty=function(t){return{"line.separator":"\n"}[t]};var Nl=function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var r=arguments[0],n=arguments[1];this.x=r,this.y=n,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var i=arguments[0],o=arguments[1];this.x=i.y*o.w-o.y*i.w,this.y=o.x*i.w-i.x*o.w,this.w=i.x*o.y-o.x*i.y}else if(arguments[0]instanceof ll&&arguments[1]instanceof ll){var s=arguments[0],a=arguments[1];this.x=s.y-a.y,this.y=a.x-s.x,this.w=s.x*a.y-a.x*s.y}}else if(3===arguments.length){var u=arguments[0],l=arguments[1],c=arguments[2];this.x=u,this.y=l,this.w=c}else if(4===arguments.length){var h=arguments[0],f=arguments[1],p=arguments[2],d=arguments[3],y=h.y-f.y,v=f.x-h.x,g=h.x*f.y-f.x*h.y,m=p.y-d.y,_=d.x-p.x,b=p.x*d.y-d.x*p.y;this.x=v*b-_*g,this.y=m*g-y*b,this.w=y*_-m*v}};Nl.prototype.getY=function(){var t=this.y/this.w;if(nl.isNaN(t)||nl.isInfinite(t))throw new Ml;return t},Nl.prototype.getX=function(){var t=this.x/this.w;if(nl.isNaN(t)||nl.isInfinite(t))throw new Ml;return t},Nl.prototype.getCoordinate=function(){var t=new ll;return t.x=this.getX(),t.y=this.getY(),t},Nl.prototype.interfaces_=function(){return[]},Nl.prototype.getClass=function(){return Nl},Nl.intersection=function(t,e,r,n){var i=t.y-e.y,o=e.x-t.x,s=t.x*e.y-e.x*t.y,a=r.y-n.y,u=n.x-r.x,l=r.x*n.y-n.x*r.y,c=i*u-a*o,h=(o*l-u*s)/c,f=(a*s-i*l)/c;if(nl.isNaN(h)||nl.isInfinite(h)||nl.isNaN(f)||nl.isInfinite(f))throw new Ml;return new ll(h,f)};var Tl=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof ll){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof t){var r=arguments[0];this.init(r)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.init(n.x,i.x,n.y,i.y)}else if(4===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3];this.init(o,s,a,u)}},Ol={serialVersionUID:{configurable:!0}};Tl.prototype.getArea=function(){return this.getWidth()*this.getHeight()},Tl.prototype.equals=function(t){if(!(t instanceof Tl))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},Tl.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new Tl;var e=this._minx>t._minx?this._minx:t._minx,r=this._miny>t._miny?this._miny:t._miny,n=this._maxx<t._maxx?this._maxx:t._maxx,i=this._maxy<t._maxy?this._maxy:t._maxy;return new Tl(e,n,r,i)},Tl.prototype.isNull=function(){return this._maxx<this._minx},Tl.prototype.getMaxX=function(){return this._maxx},Tl.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof ll){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof Tl){var e=arguments[0];return!this.isNull()&&!e.isNull()&&(e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy)}}else if(2===arguments.length){var r=arguments[0],n=arguments[1];return!this.isNull()&&(r>=this._minx&&r<=this._maxx&&n>=this._miny&&n<=this._maxy)}},Tl.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof Tl){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof ll){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var r=arguments[0],n=arguments[1];return!this.isNull()&&!(r>this._maxx||r<this._minx||n>this._maxy||n<this._miny)}},Tl.prototype.getMinY=function(){return this._miny},Tl.prototype.getMinX=function(){return this._minx},Tl.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof ll){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof Tl){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var r=arguments[0],n=arguments[1];this.isNull()?(this._minx=r,this._maxx=r,this._miny=n,this._maxy=n):(r<this._minx&&(this._minx=r),r>this._maxx&&(this._maxx=r),n<this._miny&&(this._miny=n),n>this._maxy&&(this._maxy=n))}},Tl.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},Tl.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},Tl.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},Tl.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},Tl.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},Tl.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},Tl.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},Tl.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},Tl.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],r=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=r,this._maxy+=r,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},Tl.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof Tl){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof ll){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var r=arguments[0],n=arguments[1];return this.covers(r,n)}},Tl.prototype.centre=function(){return this.isNull()?null:new ll((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},Tl.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof ll){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof Tl){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var r=arguments[0],n=arguments[1];this.init(r.x,n.x,r.y,n.y)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];i<o?(this._minx=i,this._maxx=o):(this._minx=o,this._maxx=i),s<a?(this._miny=s,this._maxy=a):(this._miny=a,this._maxy=s)}},Tl.prototype.getMaxY=function(){return this._maxy},Tl.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var r=0;return this._maxy<t._miny?r=t._miny-this._maxy:this._miny>t._maxy&&(r=this._miny-t._maxy),0===e?r:0===r?e:Math.sqrt(e*e+r*r)},Tl.prototype.hashCode=function(){var t=17;return t=37*(t=37*(t=37*(t=37*t+ll.hashCode(this._minx))+ll.hashCode(this._maxx))+ll.hashCode(this._miny))+ll.hashCode(this._maxy)},Tl.prototype.interfaces_=function(){return[ol,ul]},Tl.prototype.getClass=function(){return Tl},Tl.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],r=arguments[2];return r.x>=(t.x<e.x?t.x:e.x)&&r.x<=(t.x>e.x?t.x:e.x)&&r.y>=(t.y<e.y?t.y:e.y)&&r.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var n=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3],a=Math.min(o.x,s.x),u=Math.max(o.x,s.x),l=Math.min(n.x,i.x),c=Math.max(n.x,i.x);return!(l>u)&&(!(c<a)&&(a=Math.min(o.y,s.y),u=Math.max(o.y,s.y),l=Math.min(n.y,i.y),c=Math.max(n.y,i.y),!(l>u)&&!(c<a)))}},Ol.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(Tl,Ol);var Al={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},Rl=function(t){this.geometryFactory=t||new _h};Rl.prototype.read=function(t){var e,r,n;t=t.replace(/[\n\r]/g," ");var i=Al.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((i=Al.emptyTypeStr.exec(t))[2]=void 0),i&&(r=i[1].toLowerCase(),n=i[2],Dl[r]&&(e=Dl[r].apply(this,[n]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},Rl.prototype.write=function(t){return this.extractGeometry(t)},Rl.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!Fl[e])return null;var r=e.toUpperCase();return t.isEmpty()?r+" EMPTY":r+"("+Fl[e].apply(this,[t])+")"};var Fl={coordinate:function(t){return t.x+" "+t.y},point:function(t){return Fl.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],r=0,n=t._geometries.length;r<n;++r)e.push("("+Fl.point.apply(this,[t._geometries[r]])+")");return e.join(",")},linestring:function(t){for(var e=[],r=0,n=t._points._coordinates.length;r<n;++r)e.push(Fl.coordinate.apply(this,[t._points._coordinates[r]]));return e.join(",")},linearring:function(t){for(var e=[],r=0,n=t._points._coordinates.length;r<n;++r)e.push(Fl.coordinate.apply(this,[t._points._coordinates[r]]));return e.join(",")},multilinestring:function(t){for(var e=[],r=0,n=t._geometries.length;r<n;++r)e.push("("+Fl.linestring.apply(this,[t._geometries[r]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+Fl.linestring.apply(this,[t._shell])+")");for(var r=0,n=t._holes.length;r<n;++r)e.push("("+Fl.linestring.apply(this,[t._holes[r]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],r=0,n=t._geometries.length;r<n;++r)e.push("("+Fl.polygon.apply(this,[t._geometries[r]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],r=0,n=t._geometries.length;r<n;++r)e.push(this.extractGeometry(t._geometries[r]));return e.join(",")}},Dl={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(Al.spaces);return this.geometryFactory.createPoint(new ll(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){var e;if(void 0===t)return this.geometryFactory.createMultiPoint();for(var r=t.trim().split(","),n=[],i=0,o=r.length;i<o;++i)e=r[i].replace(Al.trimParens,"$1"),n.push(Dl.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(n)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,r=t.trim().split(","),n=[],i=0,o=r.length;i<o;++i)e=r[i].trim().split(Al.spaces),n.push(new ll(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(n)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,r=t.trim().split(","),n=[],i=0,o=r.length;i<o;++i)e=r[i].trim().split(Al.spaces),n.push(new ll(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(n)},multilinestring:function(t){var e;if(void 0===t)return this.geometryFactory.createMultiLineString();for(var r=t.trim().split(Al.parenComma),n=[],i=0,o=r.length;i<o;++i)e=r[i].replace(Al.trimParens,"$1"),n.push(Dl.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(n)},polygon:function(t){var e,r,n;if(void 0===t)return this.geometryFactory.createPolygon();for(var i,o=t.trim().split(Al.parenComma),s=[],a=0,u=o.length;a<u;++a)e=o[a].replace(Al.trimParens,"$1"),r=Dl.linestring.apply(this,[e]),n=this.geometryFactory.createLinearRing(r._points),0===a?i=n:s.push(n);return this.geometryFactory.createPolygon(i,s)},multipolygon:function(t){var e;if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var r=t.trim().split(Al.doubleParenComma),n=[],i=0,o=r.length;i<o;++i)e=r[i].replace(Al.trimParens,"$1"),n.push(Dl.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(n)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),r=[],n=0,i=e.length;n<i;++n)r.push(this.read(e[n]));return this.geometryFactory.createGeometryCollection(r)}},kl=function(t){this.parser=new Rl(t)};kl.prototype.write=function(t){return this.parser.write(t)},kl.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};var jl=function(t){function e(e){t.call(this,e),this.name="RuntimeException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),Gl=function(t){function e(){if(t.call(this),0===arguments.length)t.call(this);else if(1===arguments.length){var e=arguments[0];t.call(this,e)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(jl),Bl=function(){};Bl.prototype.interfaces_=function(){return[]},Bl.prototype.getClass=function(){return Bl},Bl.shouldNeverReachHere=function(){if(0===arguments.length)Bl.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new Gl("Should never reach here"+(null!==t?": "+t:""))}},Bl.isTrue=function(){var t;if(1===arguments.length)Bl.isTrue(arguments[0],null);else if(2===arguments.length&&(t=arguments[1],!arguments[0]))throw null===t?new Gl:new Gl(t)},Bl.equals=function(){var t,e,r;if(2===arguments.length)Bl.equals(t=arguments[0],e=arguments[1],null);else if(3===arguments.length&&(t=arguments[0],r=arguments[2],!(e=arguments[1]).equals(t)))throw new Gl("Expected "+t+" but encountered "+e+(null!==r?": "+r:""))};var Ul=function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new ll,this._intPt[1]=new ll,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},ql={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};Ul.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},Ul.prototype.getTopologySummary=function(){var t=new ml;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},Ul.prototype.computeIntersection=function(t,e,r,n){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=r,this._inputLines[1][1]=n,this._result=this.computeIntersect(t,e,r,n)},Ul.prototype.getIntersectionNum=function(){return this._result},Ul.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0],e=this.getEdgeDistance(t,0),r=this.getEdgeDistance(t,1);e>r?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},Ul.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},Ul.prototype.setPrecisionModel=function(t){this._precisionModel=t},Ul.prototype.isInteriorIntersection=function(){var t=this;if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var e=arguments[0],r=0;r<this._result;r++)if(!t._intPt[r].equals2D(t._inputLines[e][0])&&!t._intPt[r].equals2D(t._inputLines[e][1]))return!0;return!1}},Ul.prototype.getIntersection=function(t){return this._intPt[t]},Ul.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},Ul.prototype.hasIntersection=function(){return this._result!==Ul.NO_INTERSECTION},Ul.prototype.getEdgeDistance=function(t,e){return Ul.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},Ul.prototype.isCollinear=function(){return this._result===Ul.COLLINEAR_INTERSECTION},Ul.prototype.toString=function(){return kl.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+kl.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},Ul.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},Ul.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},Ul.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},Ul.prototype.interfaces_=function(){return[]},Ul.prototype.getClass=function(){return Ul},Ul.computeEdgeDistance=function(t,e,r){var n=Math.abs(r.x-e.x),i=Math.abs(r.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(r))o=n>i?n:i;else{var s=Math.abs(t.x-e.x),a=Math.abs(t.y-e.y);0!==(o=n>i?s:a)||t.equals(e)||(o=Math.max(s,a))}return Bl.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},Ul.nonRobustComputeEdgeDistance=function(t,e,r){var n=t.x-e.x,i=t.y-e.y,o=Math.sqrt(n*n+i*i);return Bl.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},ql.DONT_INTERSECT.get=function(){return 0},ql.DO_INTERSECT.get=function(){return 1},ql.COLLINEAR.get=function(){return 2},ql.NO_INTERSECTION.get=function(){return 0},ql.POINT_INTERSECTION.get=function(){return 1},ql.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(Ul,ql);var zl=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isInSegmentEnvelopes=function(t){var e=new Tl(this._inputLines[0][0],this._inputLines[0][1]),r=new Tl(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&r.contains(t)},e.prototype.computeIntersection=function(){if(3!==arguments.length)return t.prototype.computeIntersection.apply(this,arguments);var e=arguments[0],r=arguments[1],n=arguments[2];if(this._isProper=!1,Tl.intersects(r,n,e)&&0===Hl.orientationIndex(r,n,e)&&0===Hl.orientationIndex(n,r,e))return this._isProper=!0,(e.equals(r)||e.equals(n))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null;this._result=t.NO_INTERSECTION},e.prototype.normalizeToMinimum=function(t,e,r,n,i){i.x=this.smallestInAbsValue(t.x,e.x,r.x,n.x),i.y=this.smallestInAbsValue(t.y,e.y,r.y,n.y),t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,r.x-=i.x,r.y-=i.y,n.x-=i.x,n.y-=i.y},e.prototype.safeHCoordinateIntersection=function(t,r,n,i){var o=null;try{o=Nl.intersection(t,r,n,i)}catch(s){if(!(s instanceof Ml))throw s;o=e.nearestEndpoint(t,r,n,i)}return o},e.prototype.intersection=function(t,r,n,i){var o=this.intersectionWithNormalization(t,r,n,i);return this.isInSegmentEnvelopes(o)||(o=new ll(e.nearestEndpoint(t,r,n,i))),null!==this._precisionModel&&this._precisionModel.makePrecise(o),o},e.prototype.smallestInAbsValue=function(t,e,r,n){var i=t,o=Math.abs(i);return Math.abs(e)<o&&(i=e,o=Math.abs(e)),Math.abs(r)<o&&(i=r,o=Math.abs(r)),Math.abs(n)<o&&(i=n),i},e.prototype.checkDD=function(t,e,r,n,i){var o=wl.intersection(t,e,r,n),s=this.isInSegmentEnvelopes(o);Ll.out.println("DD in env = "+s+"  --------------------- "+o),i.distance(o)>1e-4&&Ll.out.println("Distance = "+i.distance(o))},e.prototype.intersectionWithNormalization=function(t,e,r,n){var i=new ll(t),o=new ll(e),s=new ll(r),a=new ll(n),u=new ll;this.normalizeToEnvCentre(i,o,s,a,u);var l=this.safeHCoordinateIntersection(i,o,s,a);return l.x+=u.x,l.y+=u.y,l},e.prototype.computeCollinearIntersection=function(e,r,n,i){var o=Tl.intersects(e,r,n),s=Tl.intersects(e,r,i),a=Tl.intersects(n,i,e),u=Tl.intersects(n,i,r);return o&&s?(this._intPt[0]=n,this._intPt[1]=i,t.COLLINEAR_INTERSECTION):a&&u?(this._intPt[0]=e,this._intPt[1]=r,t.COLLINEAR_INTERSECTION):o&&a?(this._intPt[0]=n,this._intPt[1]=e,!n.equals(e)||s||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):o&&u?(this._intPt[0]=n,this._intPt[1]=r,!n.equals(r)||s||a?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):s&&a?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||o||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):s&&u?(this._intPt[0]=i,this._intPt[1]=r,!i.equals(r)||o||a?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):t.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(t,e,r,n,i){var o=t.x<e.x?t.x:e.x,s=t.y<e.y?t.y:e.y,a=t.x>e.x?t.x:e.x,u=t.y>e.y?t.y:e.y,l=r.x<n.x?r.x:n.x,c=r.y<n.y?r.y:n.y,h=r.x>n.x?r.x:n.x,f=r.y>n.y?r.y:n.y,p=((o>l?o:l)+(a<h?a:h))/2,d=((s>c?s:c)+(u<f?u:f))/2;i.x=p,i.y=d,t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,r.x-=i.x,r.y-=i.y,n.x-=i.x,n.y-=i.y},e.prototype.computeIntersect=function(e,r,n,i){if(this._isProper=!1,!Tl.intersects(e,r,n,i))return t.NO_INTERSECTION;var o=Hl.orientationIndex(e,r,n),s=Hl.orientationIndex(e,r,i);if(o>0&&s>0||o<0&&s<0)return t.NO_INTERSECTION;var a=Hl.orientationIndex(n,i,e),u=Hl.orientationIndex(n,i,r);return a>0&&u>0||a<0&&u<0?t.NO_INTERSECTION:0===o&&0===s&&0===a&&0===u?this.computeCollinearIntersection(e,r,n,i):(0===o||0===s||0===a||0===u?(this._isProper=!1,e.equals2D(n)||e.equals2D(i)?this._intPt[0]=e:r.equals2D(n)||r.equals2D(i)?this._intPt[0]=r:0===o?this._intPt[0]=new ll(n):0===s?this._intPt[0]=new ll(i):0===a?this._intPt[0]=new ll(e):0===u&&(this._intPt[0]=new ll(r))):(this._isProper=!0,this._intPt[0]=this.intersection(e,r,n,i)),t.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(t,e,r,n){var i=t,o=Hl.distancePointLine(t,r,n),s=Hl.distancePointLine(e,r,n);return s<o&&(o=s,i=e),(s=Hl.distancePointLine(r,t,e))<o&&(o=s,i=r),(s=Hl.distancePointLine(n,t,e))<o&&(o=s,i=n),i},e}(Ul),Vl=function(){};Vl.prototype.interfaces_=function(){return[]},Vl.prototype.getClass=function(){return Vl},Vl.orientationIndex=function(t,e,r){var n=e.x-t.x,i=e.y-t.y,o=r.x-e.x,s=r.y-e.y;return Vl.signOfDet2x2(n,i,o,s)},Vl.signOfDet2x2=function(t,e,r,n){var i=null,o=null,s=null;if(i=1,0===t||0===n)return 0===e||0===r?0:e>0?r>0?-i:i:r>0?i:-i;if(0===e||0===r)return n>0?t>0?i:-i:t>0?-i:i;if(e>0?n>0?e<=n||(i=-i,o=t,t=r,r=o,o=e,e=n,n=o):e<=-n?(i=-i,r=-r,n=-n):(o=t,t=-r,r=o,o=e,e=-n,n=o):n>0?-e<=n?(i=-i,t=-t,e=-e):(o=-t,t=r,r=o,o=-e,e=n,n=o):e>=n?(t=-t,e=-e,r=-r,n=-n):(i=-i,o=-t,t=-r,r=o,o=-e,e=-n,n=o),t>0){if(!(r>0))return i;if(!(t<=r))return i}else{if(r>0)return-i;if(!(t>=r))return-i;i=-i,t=-t,r=-r}for(;;){if((n-=(s=Math.floor(r/t))*e)<0)return-i;if(n>e)return i;if(t>(r-=s*t)+r){if(e<n+n)return i}else{if(e>n+n)return-i;r=t-r,n=e-n,i=-i}if(0===n)return 0===r?0:-i;if(0===r)return i;if((e-=(s=Math.floor(t/r))*n)<0)return i;if(e>n)return-i;if(r>(t-=s*r)+t){if(n<e+e)return-i}else{if(n>e+e)return i;t=r-t,e=n-e,i=-i}if(0===e)return 0===t?0:i;if(0===t)return-i}};var Wl=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t};Wl.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var r=t.x,n=e.x;return r>n&&(r=e.x,n=t.x),this._p.x>=r&&this._p.x<=n&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var i=t.x-this._p.x,o=t.y-this._p.y,s=e.x-this._p.x,a=e.y-this._p.y,u=Vl.signOfDet2x2(i,o,s,a);if(0===u)return this._isPointOnSegment=!0,null;a<o&&(u=-u),u>0&&this._crossingCount++}},Wl.prototype.isPointInPolygon=function(){return this.getLocation()!==pl.EXTERIOR},Wl.prototype.getLocation=function(){return this._isPointOnSegment?pl.BOUNDARY:this._crossingCount%2==1?pl.INTERIOR:pl.EXTERIOR},Wl.prototype.isOnSegment=function(){return this._isPointOnSegment},Wl.prototype.interfaces_=function(){return[]},Wl.prototype.getClass=function(){return Wl},Wl.locatePointInRing=function(){if(arguments[0]instanceof ll&&yl(arguments[1],Il)){for(var t=arguments[0],e=arguments[1],r=new Wl(t),n=new ll,i=new ll,o=1;o<e.size();o++)if(e.getCoordinate(o,n),e.getCoordinate(o-1,i),r.countSegment(n,i),r.isOnSegment())return r.getLocation();return r.getLocation()}if(arguments[0]instanceof ll&&arguments[1]instanceof Array){for(var s=arguments[0],a=arguments[1],u=new Wl(s),l=1;l<a.length;l++){var c=a[l],h=a[l-1];if(u.countSegment(c,h),u.isOnSegment())return u.getLocation()}return u.getLocation()}};var Hl=function(){},Xl={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};Hl.prototype.interfaces_=function(){return[]},Hl.prototype.getClass=function(){return Hl},Hl.orientationIndex=function(t,e,r){return wl.orientationIndex(t,e,r)},Hl.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,r=t[0].x,n=1;n<t.length-1;n++){var i=t[n].x-r,o=t[n+1].y,s=t[n-1].y;e+=i*(s-o)}return e/2}if(yl(arguments[0],Il)){var a=arguments[0],u=a.size();if(u<3)return 0;var l=new ll,c=new ll,h=new ll;a.getCoordinate(0,c),a.getCoordinate(1,h);var f=c.x;h.x-=f;for(var p=0,d=1;d<u-1;d++)l.y=c.y,c.x=h.x,c.y=h.y,a.getCoordinate(d+1,h),h.x-=f,p+=c.x*(l.y-h.y);return p/2}},Hl.distanceLineLine=function(t,e,r,n){if(t.equals(e))return Hl.distancePointLine(t,r,n);if(r.equals(n))return Hl.distancePointLine(n,t,e);var i=!1;if(Tl.intersects(t,e,r,n)){var o=(e.x-t.x)*(n.y-r.y)-(e.y-t.y)*(n.x-r.x);if(0===o)i=!0;else{var s=(t.y-r.y)*(n.x-r.x)-(t.x-r.x)*(n.y-r.y),a=((t.y-r.y)*(e.x-t.x)-(t.x-r.x)*(e.y-t.y))/o,u=s/o;(u<0||u>1||a<0||a>1)&&(i=!0)}}else i=!0;return i?vl.min(Hl.distancePointLine(t,r,n),Hl.distancePointLine(e,r,n),Hl.distancePointLine(r,t,e),Hl.distancePointLine(n,t,e)):0},Hl.isPointInRing=function(t,e){return Hl.locatePointInRing(t,e)!==pl.EXTERIOR},Hl.computeLength=function(t){var e=t.size();if(e<=1)return 0;var r=0,n=new ll;t.getCoordinate(0,n);for(var i=n.x,o=n.y,s=1;s<e;s++){t.getCoordinate(s,n);var a=n.x,u=n.y,l=a-i,c=u-o;r+=Math.sqrt(l*l+c*c),i=a,o=u}return r},Hl.isCCW=function(t){var e=t.length-1;if(e<3)throw new rl("Ring has fewer than 4 points, so orientation cannot be determined");for(var r=t[0],n=0,i=1;i<=e;i++){var o=t[i];o.y>r.y&&(r=o,n=i)}var s=n;do{(s-=1)<0&&(s=e)}while(t[s].equals2D(r)&&s!==n);var a=n;do{a=(a+1)%e}while(t[a].equals2D(r)&&a!==n);var u=t[s],l=t[a];if(u.equals2D(r)||l.equals2D(r)||u.equals2D(l))return!1;var c=Hl.computeOrientation(u,r,l),h=!1;return h=0===c?u.x>l.x:c>0,h},Hl.locatePointInRing=function(t,e){return Wl.locatePointInRing(t,e)},Hl.distancePointLinePerpendicular=function(t,e,r){var n=(r.x-e.x)*(r.x-e.x)+(r.y-e.y)*(r.y-e.y),i=((e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y))/n;return Math.abs(i)*Math.sqrt(n)},Hl.computeOrientation=function(t,e,r){return Hl.orientationIndex(t,e,r)},Hl.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new rl("Line array must contain at least one vertex");for(var r=t.distance(e[0]),n=0;n<e.length-1;n++){var i=Hl.distancePointLine(t,e[n],e[n+1]);i<r&&(r=i)}return r}if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];if(s.x===a.x&&s.y===a.y)return o.distance(s);var u=(a.x-s.x)*(a.x-s.x)+(a.y-s.y)*(a.y-s.y),l=((o.x-s.x)*(a.x-s.x)+(o.y-s.y)*(a.y-s.y))/u;if(l<=0)return o.distance(s);if(l>=1)return o.distance(a);var c=((s.y-o.y)*(a.x-s.x)-(s.x-o.x)*(a.y-s.y))/u;return Math.abs(c)*Math.sqrt(u)}},Hl.isOnLine=function(t,e){for(var r=new zl,n=1;n<e.length;n++){var i=e[n-1],o=e[n];if(r.computeIntersection(t,i,o),r.hasIntersection())return!0}return!1},Xl.CLOCKWISE.get=function(){return-1},Xl.RIGHT.get=function(){return Hl.CLOCKWISE},Xl.COUNTERCLOCKWISE.get=function(){return 1},Xl.LEFT.get=function(){return Hl.COUNTERCLOCKWISE},Xl.COLLINEAR.get=function(){return 0},Xl.STRAIGHT.get=function(){return Hl.COLLINEAR},Object.defineProperties(Hl,Xl);var Zl=function(){};Zl.prototype.filter=function(t){},Zl.prototype.interfaces_=function(){return[]},Zl.prototype.getClass=function(){return Zl};var Yl=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},Jl={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};Yl.prototype.isGeometryCollection=function(){return this.getSortIndex()===Yl.SORTINDEX_GEOMETRYCOLLECTION},Yl.prototype.getFactory=function(){return this._factory},Yl.prototype.getGeometryN=function(t){return this},Yl.prototype.getArea=function(){return 0},Yl.prototype.isRectangle=function(){return!1},Yl.prototype.equals=function(){if(arguments[0]instanceof Yl){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof Yl))return!1;var r=e;return this.equalsExact(r)}},Yl.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},Yl.prototype.geometryChanged=function(){this.apply(Yl.geometryChangedFilter)},Yl.prototype.geometryChangedAction=function(){this._envelope=null},Yl.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},Yl.prototype.getLength=function(){return 0},Yl.prototype.getNumGeometries=function(){return 1},Yl.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var r=arguments[0],n=arguments[1];return this.getSortIndex()!==r.getSortIndex()?this.getSortIndex()-r.getSortIndex():this.isEmpty()&&r.isEmpty()?0:this.isEmpty()?-1:r.isEmpty()?1:this.compareToSameClass(r,n)}},Yl.prototype.getUserData=function(){return this._userData},Yl.prototype.getSRID=function(){return this._SRID},Yl.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},Yl.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===Yl.SORTINDEX_GEOMETRYCOLLECTION)throw new rl("This method does not support GeometryCollection arguments")},Yl.prototype.equal=function(t,e,r){return 0===r?t.equals(e):t.distance(e)<=r},Yl.prototype.norm=function(){var t=this.copy();return t.normalize(),t},Yl.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},Yl.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new Tl(this._envelope)},Yl.prototype.setSRID=function(t){this._SRID=t},Yl.prototype.setUserData=function(t){this._userData=t},Yl.prototype.compare=function(t,e){for(var r=t.iterator(),n=e.iterator();r.hasNext()&&n.hasNext();){var i=r.next(),o=n.next(),s=i.compareTo(o);if(0!==s)return s}return r.hasNext()?1:n.hasNext()?-1:0},Yl.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},Yl.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===Yl.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===Yl.SORTINDEX_MULTIPOINT||this.getSortIndex()===Yl.SORTINDEX_MULTILINESTRING||this.getSortIndex()===Yl.SORTINDEX_MULTIPOLYGON},Yl.prototype.interfaces_=function(){return[sl,ol,ul]},Yl.prototype.getClass=function(){return Yl},Yl.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},Yl.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},Jl.serialVersionUID.get=function(){return 0x799ea46522854c00},Jl.SORTINDEX_POINT.get=function(){return 0},Jl.SORTINDEX_MULTIPOINT.get=function(){return 1},Jl.SORTINDEX_LINESTRING.get=function(){return 2},Jl.SORTINDEX_LINEARRING.get=function(){return 3},Jl.SORTINDEX_MULTILINESTRING.get=function(){return 4},Jl.SORTINDEX_POLYGON.get=function(){return 5},Jl.SORTINDEX_MULTIPOLYGON.get=function(){return 6},Jl.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},Jl.geometryChangedFilter.get=function(){return Ql},Object.defineProperties(Yl,Jl);var Ql=function(){};Ql.interfaces_=function(){return[Zl]},Ql.filter=function(t){t.geometryChangedAction()};var Kl=function(){};Kl.prototype.filter=function(t){},Kl.prototype.interfaces_=function(){return[]},Kl.prototype.getClass=function(){return Kl};var $l=function(){},tc={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};$l.prototype.isInBoundary=function(t){},$l.prototype.interfaces_=function(){return[]},$l.prototype.getClass=function(){return $l},tc.Mod2BoundaryNodeRule.get=function(){return ec},tc.EndPointBoundaryNodeRule.get=function(){return rc},tc.MultiValentEndPointBoundaryNodeRule.get=function(){return nc},tc.MonoValentEndPointBoundaryNodeRule.get=function(){return ic},tc.MOD2_BOUNDARY_RULE.get=function(){return new ec},tc.ENDPOINT_BOUNDARY_RULE.get=function(){return new rc},tc.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new nc},tc.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new ic},tc.OGC_SFS_BOUNDARY_RULE.get=function(){return $l.MOD2_BOUNDARY_RULE},Object.defineProperties($l,tc);var ec=function(){};ec.prototype.isInBoundary=function(t){return t%2==1},ec.prototype.interfaces_=function(){return[$l]},ec.prototype.getClass=function(){return ec};var rc=function(){};rc.prototype.isInBoundary=function(t){return t>0},rc.prototype.interfaces_=function(){return[$l]},rc.prototype.getClass=function(){return rc};var nc=function(){};nc.prototype.isInBoundary=function(t){return t>1},nc.prototype.interfaces_=function(){return[$l]},nc.prototype.getClass=function(){return nc};var ic=function(){};ic.prototype.isInBoundary=function(t){return 1===t},ic.prototype.interfaces_=function(){return[$l]},ic.prototype.getClass=function(){return ic};var oc=function(){};function sc(t){this.message=t||""}oc.prototype.add=function(){},oc.prototype.addAll=function(){},oc.prototype.isEmpty=function(){},oc.prototype.iterator=function(){},oc.prototype.size=function(){},oc.prototype.toArray=function(){},oc.prototype.remove=function(){},sc.prototype=new Error,sc.prototype.name="IndexOutOfBoundsException";var ac=function(){};ac.prototype.hasNext=function(){},ac.prototype.next=function(){},ac.prototype.remove=function(){};var uc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(oc);function lc(t){this.message=t||""}lc.prototype=new Error,lc.prototype.name="NoSuchElementException";var cc=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof oc&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,oc]},e.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.set=function(t,e){var r=this.array_[t];return this.array_[t]=e,r},e.prototype.iterator=function(){return new hc(this)},e.prototype.get=function(t){if(t<0||t>=this.size())throw new sc;return this.array_[t]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,r=this.array_.length;e<r;e++)t.push(this.array_[e]);return t},e.prototype.remove=function(t){for(var e=!1,r=0,n=this.array_.length;r<n;r++)if(this.array_[r]===t){this.array_.splice(r,1),e=!0;break}return e},e}(uc),hc=function(t){function e(e){t.call(this),this.arrayList_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new lc;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(ac),fc=function(t){function e(){if(t.call(this),0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){var r=arguments[0],n=arguments[1];this.ensureCapacity(r.length),this.add(r,n)}}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={coordArrayType:{configurable:!0}};return r.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(t){return this.get(t)},e.prototype.addAll=function(){var e=this;if(2===arguments.length){for(var r=arguments[0],n=arguments[1],i=!1,o=r.iterator();o.hasNext();)e.add(o.next(),n),i=!0;return i}return t.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),r=0;r<this.size();r++)e.add(r,this.get(r).copy());return e},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){var e=this;if(1===arguments.length){var r=arguments[0];t.prototype.add.call(this,r)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var n=arguments[0],i=arguments[1];return this.add(n,i,!0),!0}if(arguments[0]instanceof ll&&"boolean"==typeof arguments[1]){var o=arguments[0],s=arguments[1];if(!s&&this.size()>=1){var a=this.get(this.size()-1);if(a.equals2D(o))return null}t.prototype.add.call(this,o)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var u=arguments[0],l=arguments[1];return this.add(u,l),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var c=arguments[0],h=arguments[1],f=arguments[2];if(f)for(var p=0;p<c.length;p++)e.add(c[p],h);else for(var d=c.length-1;d>=0;d--)e.add(c[d],h);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof ll){var y=arguments[0],v=arguments[1],g=arguments[2];if(!g){var m=this.size();if(m>0){if(y>0){var _=this.get(y-1);if(_.equals2D(v))return null}if(y<m){var b=this.get(y);if(b.equals2D(v))return null}}}t.prototype.add.call(this,y,v)}}else if(4===arguments.length){var x=arguments[0],S=arguments[1],w=arguments[2],C=arguments[3],I=1;w>C&&(I=-1);for(var E=w;E!==C;E+=I)e.add(x[E],S);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new ll(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,r),e}(cc),pc=function(){},dc={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};dc.ForwardComparator.get=function(){return yc},dc.BidirectionalComparator.get=function(){return vc},dc.coordArrayType.get=function(){return new Array(0).fill(null)},pc.prototype.interfaces_=function(){return[]},pc.prototype.getClass=function(){return pc},pc.isRing=function(t){return!(t.length<4)&&!!t[0].equals2D(t[t.length-1])},pc.ptNotInList=function(t,e){for(var r=0;r<t.length;r++){var n=t[r];if(pc.indexOf(n,e)<0)return n}return null},pc.scroll=function(t,e){var r=pc.indexOf(e,t);if(r<0)return null;var n=new Array(t.length).fill(null);Ll.arraycopy(t,r,n,0,t.length-r),Ll.arraycopy(t,0,n,t.length-r,r),Ll.arraycopy(n,0,t,0,t.length)},pc.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(!t[r].equals(e[r]))return!1;return!0}if(3===arguments.length){var n=arguments[0],i=arguments[1],o=arguments[2];if(n===i)return!0;if(null===n||null===i)return!1;if(n.length!==i.length)return!1;for(var s=0;s<n.length;s++)if(0!==o.compare(n[s],i[s]))return!1;return!0}},pc.intersection=function(t,e){for(var r=new fc,n=0;n<t.length;n++)e.intersects(t[n])&&r.add(t[n],!0);return r.toCoordinateArray()},pc.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},pc.removeRepeatedPoints=function(t){return pc.hasRepeatedPoints(t)?new fc(t,!1).toCoordinateArray():t},pc.reverse=function(t){for(var e=t.length-1,r=Math.trunc(e/2),n=0;n<=r;n++){var i=t[n];t[n]=t[e-n],t[e-n]=i}},pc.removeNull=function(t){for(var e=0,r=0;r<t.length;r++)null!==t[r]&&e++;var n=new Array(e).fill(null);if(0===e)return n;for(var i=0,o=0;o<t.length;o++)null!==t[o]&&(n[i++]=t[o]);return n},pc.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),r=0;r<t.length;r++)e[r]=new ll(t[r]);return e}if(5===arguments.length)for(var n=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3],a=arguments[4],u=0;u<a;u++)o[s+u]=new ll(n[i+u])},pc.isEqualReversed=function(t,e){for(var r=0;r<t.length;r++){var n=t[r],i=e[t.length-r-1];if(0!==n.compareTo(i))return!1}return!0},pc.envelope=function(t){for(var e=new Tl,r=0;r<t.length;r++)e.expandToInclude(t[r]);return e},pc.toCoordinateArray=function(t){return t.toArray(pc.coordArrayType)},pc.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},pc.indexOf=function(t,e){for(var r=0;r<e.length;r++)if(t.equals(e[r]))return r;return-1},pc.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var r=t.length-1-e,n=t[e].compareTo(t[r]);if(0!==n)return n}return 1},pc.compare=function(t,e){for(var r=0;r<t.length&&r<e.length;){var n=t[r].compareTo(e[r]);if(0!==n)return n;r++}return r<e.length?-1:r<t.length?1:0},pc.minCoordinate=function(t){for(var e=null,r=0;r<t.length;r++)(null===e||e.compareTo(t[r])>0)&&(e=t[r]);return e},pc.extract=function(t,e,r){e=vl.clamp(e,0,t.length);var n=(r=vl.clamp(r,-1,t.length))-e+1;r<0&&(n=0),e>=t.length&&(n=0),r<e&&(n=0);var i=new Array(n).fill(null);if(0===n)return i;for(var o=0,s=e;s<=r;s++)i[o++]=t[s];return i},Object.defineProperties(pc,dc);var yc=function(){};yc.prototype.compare=function(t,e){return pc.compare(t,e)},yc.prototype.interfaces_=function(){return[al]},yc.prototype.getClass=function(){return yc};var vc=function(){};vc.prototype.compare=function(t,e){var r=t,n=e;if(r.length<n.length)return-1;if(r.length>n.length)return 1;if(0===r.length)return 0;var i=pc.compare(r,n);return pc.isEqualReversed(r,n)?0:i},vc.prototype.OLDcompare=function(t,e){var r=t,n=e;if(r.length<n.length)return-1;if(r.length>n.length)return 1;if(0===r.length)return 0;for(var i=pc.increasingDirection(r),o=pc.increasingDirection(n),s=i>0?0:r.length-1,a=o>0?0:r.length-1,u=0;u<r.length;u++){var l=r[s].compareTo(n[a]);if(0!==l)return l;s+=i,a+=o}return 0},vc.prototype.interfaces_=function(){return[al]},vc.prototype.getClass=function(){return vc};var gc=function(){};gc.prototype.get=function(){},gc.prototype.put=function(){},gc.prototype.size=function(){},gc.prototype.values=function(){},gc.prototype.entrySet=function(){};var mc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(gc);function _c(t){this.message=t||""}function bc(){}_c.prototype=new Error,_c.prototype.name="OperationNotSupported",bc.prototype=new oc,bc.prototype.contains=function(){};var xc=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof oc&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contains=function(t){for(var e=0,r=this.array_.length;e<r;e++){if(this.array_[e]===t)return!0}return!1},e.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.remove=function(t){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,r=this.array_.length;e<r;e++)t.push(this.array_[e]);return t},e.prototype.iterator=function(){return new Sc(this)},e}(bc),Sc=function(t){function e(e){t.call(this),this.hashSet_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new lc;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new _c},e}(ac);function wc(t){return null===t?0:t.color}function Cc(t){return null===t?null:t.parent}function Ic(t,e){null!==t&&(t.color=e)}function Ec(t){return null===t?null:t.left}function Pc(t){return null===t?null:t.right}function Mc(){this.root_=null,this.size_=0}Mc.prototype=new mc,Mc.prototype.get=function(t){for(var e=this.root_;null!==e;){var r=t.compareTo(e.key);if(r<0)e=e.left;else{if(!(r>0))return e.value;e=e.right}}return null},Mc.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:0,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var r,n,i=this.root_;do{if(r=i,(n=t.compareTo(i.key))<0)i=i.left;else{if(!(n>0)){var o=i.value;return i.value=e,o}i=i.right}}while(null!==i);var s={key:t,left:null,right:null,value:e,parent:r,color:0,getValue:function(){return this.value},getKey:function(){return this.key}};return n<0?r.left=s:r.right=s,this.fixAfterInsertion(s),this.size_++,null},Mc.prototype.fixAfterInsertion=function(t){var e=this;for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(Cc(t)===Ec(Cc(Cc(t)))){var r=Pc(Cc(Cc(t)));1===wc(r)?(Ic(Cc(t),0),Ic(r,0),Ic(Cc(Cc(t)),1),t=Cc(Cc(t))):(t===Pc(Cc(t))&&(t=Cc(t),e.rotateLeft(t)),Ic(Cc(t),0),Ic(Cc(Cc(t)),1),e.rotateRight(Cc(Cc(t))))}else{var n=Ec(Cc(Cc(t)));1===wc(n)?(Ic(Cc(t),0),Ic(n,0),Ic(Cc(Cc(t)),1),t=Cc(Cc(t))):(t===Ec(Cc(t))&&(t=Cc(t),e.rotateRight(t)),Ic(Cc(t),0),Ic(Cc(Cc(t)),1),e.rotateLeft(Cc(Cc(t))))}this.root_.color=0},Mc.prototype.values=function(){var t=new cc,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=Mc.successor(e));)t.add(e.value);return t},Mc.prototype.entrySet=function(){var t=new xc,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=Mc.successor(e));)t.add(e);return t},Mc.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},Mc.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},Mc.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},Mc.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var r=t.parent,n=t;null!==r&&n===r.right;)n=r,r=r.parent;return r},Mc.prototype.size=function(){return this.size_};var Lc=function(){};function Nc(){}function Tc(){this.array_=[],arguments[0]instanceof oc&&this.addAll(arguments[0])}Lc.prototype.interfaces_=function(){return[]},Lc.prototype.getClass=function(){return Lc},Nc.prototype=new bc,Tc.prototype=new Nc,Tc.prototype.contains=function(t){for(var e=0,r=this.array_.length;e<r;e++){if(0===this.array_[e].compareTo(t))return!0}return!1},Tc.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,r=this.array_.length;e<r;e++){if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0}return this.array_.push(t),!0},Tc.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},Tc.prototype.remove=function(t){throw new _c},Tc.prototype.size=function(){return this.array_.length},Tc.prototype.isEmpty=function(){return 0===this.array_.length},Tc.prototype.toArray=function(){for(var t=[],e=0,r=this.array_.length;e<r;e++)t.push(this.array_[e]);return t},Tc.prototype.iterator=function(){return new Oc(this)};var Oc=function(t){this.treeSet_=t,this.position_=0};Oc.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new lc;return this.treeSet_.array_[this.position_++]},Oc.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},Oc.prototype.remove=function(){throw new _c};var Ac=function(){};Ac.sort=function(){var t,e,r,n,i=arguments[0];if(1===arguments.length)n=function(t,e){return t.compareTo(e)},i.sort(n);else if(2===arguments.length)r=arguments[1],n=function(t,e){return r.compare(t,e)},i.sort(n);else if(3===arguments.length){(e=i.slice(arguments[1],arguments[2])).sort();var o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length));for(i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])}else if(4===arguments.length)for(e=i.slice(arguments[1],arguments[2]),r=arguments[3],n=function(t,e){return r.compare(t,e)},e.sort(n),o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length)),i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])},Ac.asList=function(t){for(var e=new cc,r=0,n=t.length;r<n;r++)e.add(t[r]);return e};var Rc=function(){},Fc={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};Fc.P.get=function(){return 0},Fc.L.get=function(){return 1},Fc.A.get=function(){return 2},Fc.FALSE.get=function(){return-1},Fc.TRUE.get=function(){return-2},Fc.DONTCARE.get=function(){return-3},Fc.SYM_FALSE.get=function(){return"F"},Fc.SYM_TRUE.get=function(){return"T"},Fc.SYM_DONTCARE.get=function(){return"*"},Fc.SYM_P.get=function(){return"0"},Fc.SYM_L.get=function(){return"1"},Fc.SYM_A.get=function(){return"2"},Rc.prototype.interfaces_=function(){return[]},Rc.prototype.getClass=function(){return Rc},Rc.toDimensionSymbol=function(t){switch(t){case Rc.FALSE:return Rc.SYM_FALSE;case Rc.TRUE:return Rc.SYM_TRUE;case Rc.DONTCARE:return Rc.SYM_DONTCARE;case Rc.P:return Rc.SYM_P;case Rc.L:return Rc.SYM_L;case Rc.A:return Rc.SYM_A}throw new rl("Unknown dimension value: "+t)},Rc.toDimensionValue=function(t){switch(bl.toUpperCase(t)){case Rc.SYM_FALSE:return Rc.FALSE;case Rc.SYM_TRUE:return Rc.TRUE;case Rc.SYM_DONTCARE:return Rc.DONTCARE;case Rc.SYM_P:return Rc.P;case Rc.SYM_L:return Rc.L;case Rc.SYM_A:return Rc.A}throw new rl("Unknown dimension symbol: "+t)},Object.defineProperties(Rc,Fc);var Dc=function(){};Dc.prototype.filter=function(t){},Dc.prototype.interfaces_=function(){return[]},Dc.prototype.getClass=function(){return Dc};var kc=function(){};kc.prototype.filter=function(t,e){},kc.prototype.isDone=function(){},kc.prototype.isGeometryChanged=function(){},kc.prototype.interfaces_=function(){return[]},kc.prototype.getClass=function(){return kc};var jc=function(t){function e(e,r){if(t.call(this,r),this._geometries=e||[],t.hasNullElements(this._geometries))throw new rl("geometries must not contain null elements")}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var t=new Tl,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t},e.prototype.getGeometryN=function(t){return this._geometries[t]},e.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,r=0;r<this._geometries.length;r++)for(var n=this._geometries[r].getCoordinates(),i=0;i<n.length;i++)t[++e]=n[i];return t},e.prototype.getArea=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t},e.prototype.equalsExact=function(){var e=this;if(2===arguments.length){var r=arguments[0],n=arguments[1];if(!this.isEquivalentClass(r))return!1;var i=r;if(this._geometries.length!==i._geometries.length)return!1;for(var o=0;o<this._geometries.length;o++)if(!e._geometries[o].equalsExact(i._geometries[o],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();Ac.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var t=Rc.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t},e.prototype.getDimension=function(){for(var t=Rc.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t},e.prototype.getLength=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),r=0;r<this._geometries.length;r++)e[r]=this._geometries[r].reverse();return this.getFactory().createGeometryCollection(e)},e.prototype.compareToSameClass=function(){var t=this;if(1===arguments.length){var e=arguments[0],r=new Tc(Ac.asList(this._geometries)),n=new Tc(Ac.asList(e._geometries));return this.compare(r,n)}if(2===arguments.length){for(var i=arguments[0],o=arguments[1],s=i,a=this.getNumGeometries(),u=s.getNumGeometries(),l=0;l<a&&l<u;){var c=t.getGeometryN(l),h=s.getGeometryN(l),f=c.compareToSameClass(h,o);if(0!==f)return f;l++}return l<a?1:l<u?-1:0}},e.prototype.apply=function(){var t=this;if(yl(arguments[0],Kl))for(var e=arguments[0],r=0;r<this._geometries.length;r++)t._geometries[r].apply(e);else if(yl(arguments[0],kc)){var n=arguments[0];if(0===this._geometries.length)return null;for(var i=0;i<this._geometries.length&&(t._geometries[i].apply(n),!n.isDone());i++);n.isGeometryChanged()&&this.geometryChanged()}else if(yl(arguments[0],Dc)){var o=arguments[0];o.filter(this);for(var s=0;s<this._geometries.length;s++)t._geometries[s].apply(o)}else if(yl(arguments[0],Zl)){var a=arguments[0];a.filter(this);for(var u=0;u<this._geometries.length;u++)t._geometries[u].apply(a)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),Bl.shouldNeverReachHere(),null},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._geometries=new Array(this._geometries.length).fill(null);for(var r=0;r<this._geometries.length;r++)e._geometries[r]=this._geometries[r].clone();return e},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),r=0;r<t.length;r++)t[r]=this._geometries[r].copy();return new e(t,this._factory)},e.prototype.isEmpty=function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},r.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(e,r),e}(Yl),Gc=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Yl.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],r=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,r)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Rc.FALSE:0},e.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),r=0;r<this._geometries.length;r++)e[t-1-r]=this._geometries[r].reverse();return this.getFactory().createMultiLineString(e)},e.prototype.getBoundary=function(){return new Bc(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),r=0;r<t.length;r++)t[r]=this._geometries[r].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Lc]},e.prototype.getClass=function(){return e},r.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(e,r),e}(jc),Bc=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],e=$l.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(2===arguments.length){var r=arguments[0],n=arguments[1];this._geom=r,this._geomFact=r.getFactory(),this._bnRule=n}};Bc.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},Bc.prototype.getBoundary=function(){return this._geom instanceof Qc?this.boundaryLineString(this._geom):this._geom instanceof Gc?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},Bc.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},Bc.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},Bc.prototype.computeBoundaryCoordinates=function(t){var e=this,r=new cc;this._endpointMap=new Mc;for(var n=0;n<t.getNumGeometries();n++){var i=t.getGeometryN(n);0!==i.getNumPoints()&&(e.addEndpoint(i.getCoordinateN(0)),e.addEndpoint(i.getCoordinateN(i.getNumPoints()-1)))}for(var o=this._endpointMap.entrySet().iterator();o.hasNext();){var s=o.next(),a=s.getValue().count;e._bnRule.isInBoundary(a)&&r.add(s.getKey())}return pc.toCoordinateArray(r)},Bc.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new Uc,this._endpointMap.put(t,e)),e.count++},Bc.prototype.interfaces_=function(){return[]},Bc.prototype.getClass=function(){return Bc},Bc.getBoundary=function(){if(1===arguments.length){var t=arguments[0],e=new Bc(t);return e.getBoundary()}if(2===arguments.length){var r=arguments[0],n=arguments[1],i=new Bc(r,n);return i.getBoundary()}};var Uc=function(){this.count=null};function qc(){}function zc(){}Uc.prototype.interfaces_=function(){return[]},Uc.prototype.getClass=function(){return Uc};var Vc=function(){};function Wc(){}function Hc(){}function Xc(){}var Zc=function(){},Yc={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};Zc.prototype.interfaces_=function(){return[]},Zc.prototype.getClass=function(){return Zc},Zc.chars=function(t,e){for(var r=new Array(e).fill(null),n=0;n<e;n++)r[n]=t;return String(r)},Zc.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new Wc,r=new qc(e);return t.printStackTrace(r),e.toString()}if(2===arguments.length){for(var n=arguments[0],i=arguments[1],o="",s=new zc(Zc.getStackTrace(n)),a=new Xc(s),u=0;u<i;u++)try{o+=a.readLine()+Zc.NEWLINE}catch(t){if(!(t instanceof Hc))throw t;Bl.shouldNeverReachHere()}return o}},Zc.split=function(t,e){for(var r=e.length,n=new cc,i=""+t,o=i.indexOf(e);o>=0;){var s=i.substring(0,o);n.add(s),o=(i=i.substring(o+r)).indexOf(e)}i.length>0&&n.add(i);for(var a=new Array(n.size()).fill(null),u=0;u<a.length;u++)a[u]=n.get(u);return a},Zc.toString=function(){if(1===arguments.length){var t=arguments[0];return Zc.SIMPLE_ORDINATE_FORMAT.format(t)}},Zc.spaces=function(t){return Zc.chars(" ",t)},Yc.NEWLINE.get=function(){return Ll.getProperty("line.separator")},Yc.SIMPLE_ORDINATE_FORMAT.get=function(){return new Vc("0.#")},Object.defineProperties(Zc,Yc);var Jc=function(){};Jc.prototype.interfaces_=function(){return[]},Jc.prototype.getClass=function(){return Jc},Jc.copyCoord=function(t,e,r,n){for(var i=Math.min(t.getDimension(),r.getDimension()),o=0;o<i;o++)r.setOrdinate(n,o,t.getOrdinate(e,o))},Jc.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&(t.getOrdinate(0,Il.X)===t.getOrdinate(e-1,Il.X)&&t.getOrdinate(0,Il.Y)===t.getOrdinate(e-1,Il.Y))},Jc.isEqual=function(t,e){var r=t.size();if(r!==e.size())return!1;for(var n=Math.min(t.getDimension(),e.getDimension()),i=0;i<r;i++)for(var o=0;o<n;o++){var s=t.getOrdinate(i,o),a=e.getOrdinate(i,o);if(t.getOrdinate(i,o)!==e.getOrdinate(i,o)&&(!nl.isNaN(s)||!nl.isNaN(a)))return!1}return!0},Jc.extend=function(t,e,r){var n=t.create(r,e.getDimension()),i=e.size();if(Jc.copy(e,0,n,0,i),i>0)for(var o=i;o<r;o++)Jc.copy(e,i-1,n,o,1);return n},Jc.reverse=function(t){for(var e=t.size()-1,r=Math.trunc(e/2),n=0;n<=r;n++)Jc.swap(t,n,e-n)},Jc.swap=function(t,e,r){if(e===r)return null;for(var n=0;n<t.getDimension();n++){var i=t.getOrdinate(e,n);t.setOrdinate(e,n,t.getOrdinate(r,n)),t.setOrdinate(r,n,i)}},Jc.copy=function(t,e,r,n,i){for(var o=0;o<i;o++)Jc.copyCoord(t,e+o,r,n+o)},Jc.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var r=t.getDimension(),n=new ml;n.append("(");for(var i=0;i<e;i++){i>0&&n.append(" ");for(var o=0;o<r;o++)o>0&&n.append(","),n.append(Zc.toString(t.getOrdinate(i,o)))}return n.append(")"),n.toString()}},Jc.ensureValidRing=function(t,e){var r=e.size();return 0===r?e:r<=3?Jc.createClosedRing(t,e,4):e.getOrdinate(0,Il.X)===e.getOrdinate(r-1,Il.X)&&e.getOrdinate(0,Il.Y)===e.getOrdinate(r-1,Il.Y)?e:Jc.createClosedRing(t,e,r+1)},Jc.createClosedRing=function(t,e,r){var n=t.create(r,e.getDimension()),i=e.size();Jc.copy(e,0,n,0,i);for(var o=i;o<r;o++)Jc.copy(e,0,n,o,1);return n};var Qc=function(t){function e(e,r){t.call(this,r),this._points=null,this.init(e)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new Tl:this._points.expandEnvelope(new Tl)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){var e=this;if(2===arguments.length){var r=arguments[0],n=arguments[1];if(!this.isEquivalentClass(r))return!1;var i=r;if(this._points.size()!==i._points.size())return!1;for(var o=0;o<this._points.size();o++)if(!e.equal(e._points.getCoordinate(o),i._points.getCoordinate(o),n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=this,e=0;e<Math.trunc(this._points.size()/2);e++){var r=t._points.size()-1-e;if(!t._points.getCoordinate(e).equals(t._points.getCoordinate(r)))return t._points.getCoordinate(e).compareTo(t._points.getCoordinate(r))>0&&Jc.reverse(t._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Rc.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return Hl.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var t=this._points.copy();return Jc.reverse(t),this.getFactory().createLineString(t)},e.prototype.compareToSameClass=function(){var t=this;if(1===arguments.length){for(var e=arguments[0],r=e,n=0,i=0;n<this._points.size()&&i<r._points.size();){var o=t._points.getCoordinate(n).compareTo(r._points.getCoordinate(i));if(0!==o)return o;n++,i++}return n<this._points.size()?1:i<r._points.size()?-1:0}if(2===arguments.length){var s=arguments[0],a=arguments[1],u=s;return a.compare(this._points,u._points)}},e.prototype.apply=function(){var t=this;if(yl(arguments[0],Kl))for(var e=arguments[0],r=0;r<this._points.size();r++)e.filter(t._points.getCoordinate(r));else if(yl(arguments[0],kc)){var n=arguments[0];if(0===this._points.size())return null;for(var i=0;i<this._points.size()&&(n.filter(t._points,i),!n.isDone());i++);n.isGeometryChanged()&&this.geometryChanged()}else if(yl(arguments[0],Dc)){var o=arguments[0];o.filter(this)}else if(yl(arguments[0],Zl)){var s=arguments[0];s.filter(this)}},e.prototype.getBoundary=function(){return new Bc(this).getBoundary()},e.prototype.isEquivalentClass=function(t){return t instanceof e},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._points=this._points.clone(),e},e.prototype.getCoordinateN=function(t){return this._points.getCoordinate(t)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new rl("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t},e.prototype.isCoordinate=function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},e.prototype.interfaces_=function(){return[Lc]},e.prototype.getClass=function(){return e},r.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,r),e}(Yl),Kc=function(){};Kc.prototype.interfaces_=function(){return[]},Kc.prototype.getClass=function(){return Kc};var $c=function(t){function e(e,r){t.call(this,r),this._coordinates=e||null,this.init(this._coordinates)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new Tl;var t=new Tl;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},e.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],r=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),r))}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return Rc.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getCoordinate().compareTo(e.getCoordinate())}if(2===arguments.length){var r=arguments[0],n=arguments[1],i=r;return n.compare(this._coordinates,i._coordinates)}},e.prototype.apply=function(){if(yl(arguments[0],Kl)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(yl(arguments[0],kc)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else if(yl(arguments[0],Dc)){var r=arguments[0];r.filter(this)}else if(yl(arguments[0],Zl)){var n=arguments[0];n.filter(this)}},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._coordinates=this._coordinates.clone(),e},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),Bl.isTrue(t.size()<=1),this._coordinates=t},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[Kc]},e.prototype.getClass=function(){return e},r.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,r),e}(Yl),th=function(){};th.prototype.interfaces_=function(){return[]},th.prototype.getClass=function(){return th};var eh=function(t){function e(e,r,n){if(t.call(this,n),this._shell=null,this._holes=null,null===e&&(e=this.getFactory().createLinearRing()),null===r&&(r=[]),t.hasNullElements(r))throw new rl("holes must not contain null elements");if(e.isEmpty()&&t.hasNonEmptyElements(r))throw new rl("shell is empty but holes are not");this._shell=e,this._holes=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,r=this._shell.getCoordinates(),n=0;n<r.length;n++)t[++e]=r[n];for(var i=0;i<this._holes.length;i++)for(var o=this._holes[i].getCoordinates(),s=0;s<o.length;s++)t[++e]=o[s];return t},e.prototype.getArea=function(){var t=0;t+=Math.abs(Hl.signedArea(this._shell.getCoordinateSequence()));for(var e=0;e<this._holes.length;e++)t-=Math.abs(Hl.signedArea(this._holes[e].getCoordinateSequence()));return t},e.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),r=0;r<5;r++){var n=t.getX(r);if(n!==e.getMinX()&&n!==e.getMaxX())return!1;var i=t.getY(r);if(i!==e.getMinY()&&i!==e.getMaxY())return!1}for(var o=t.getX(0),s=t.getY(0),a=1;a<=4;a++){var u=t.getX(a),l=t.getY(a);if(u!==o===(l!==s))return!1;o=u,s=l}return!0},e.prototype.equalsExact=function(){var e=this;if(2===arguments.length){var r=arguments[0],n=arguments[1];if(!this.isEquivalentClass(r))return!1;var i=r,o=this._shell,s=i._shell;if(!o.equalsExact(s,n))return!1;if(this._holes.length!==i._holes.length)return!1;for(var a=0;a<this._holes.length;a++)if(!e._holes[a].equalsExact(i._holes[a],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){var t=this;if(0===arguments.length){this.normalize(this._shell,!0);for(var e=0;e<this._holes.length;e++)t.normalize(t._holes[e],!1);Ac.sort(this._holes)}else if(2===arguments.length){var r=arguments[0],n=arguments[1];if(r.isEmpty())return null;var i=new Array(r.getCoordinates().length-1).fill(null);Ll.arraycopy(r.getCoordinates(),0,i,0,i.length);var o=pc.minCoordinate(r.getCoordinates());pc.scroll(i,o),Ll.arraycopy(i,0,r.getCoordinates(),0,i.length),r.getCoordinates()[i.length]=i[0],Hl.isCCW(r.getCoordinates())===n&&pc.reverse(r.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t},e.prototype.reverse=function(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){var t=this;if(1===arguments.length){var e=arguments[0],r=this._shell,n=e._shell;return r.compareToSameClass(n)}if(2===arguments.length){var i=arguments[0],o=arguments[1],s=i,a=this._shell,u=s._shell,l=a.compareToSameClass(u,o);if(0!==l)return l;for(var c=this.getNumInteriorRing(),h=s.getNumInteriorRing(),f=0;f<c&&f<h;){var p=t.getInteriorRingN(f),d=s.getInteriorRingN(f),y=p.compareToSameClass(d,o);if(0!==y)return y;f++}return f<c?1:f<h?-1:0}},e.prototype.apply=function(t){var e=this;if(yl(t,Kl)){this._shell.apply(t);for(var r=0;r<this._holes.length;r++)e._holes[r].apply(t)}else if(yl(t,kc)){if(this._shell.apply(t),!t.isDone())for(var n=0;n<this._holes.length&&(e._holes[n].apply(t),!t.isDone());n++);t.isGeometryChanged()&&this.geometryChanged()}else if(yl(t,Dc))t.filter(this);else if(yl(t,Zl)){t.filter(this),this._shell.apply(t);for(var i=0;i<this._holes.length;i++)e._holes[i].apply(t)}},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._shell=this._shell.clone(),e._holes=new Array(this._holes.length).fill(null);for(var r=0;r<this._holes.length;r++)e._holes[r]=this._holes[r].clone();return e},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var t=this._shell.copy(),r=new Array(this._holes.length).fill(null),n=0;n<r.length;n++)r[n]=this._holes[n].copy();return new e(t,r,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(t){return this._holes[t]},e.prototype.interfaces_=function(){return[th]},e.prototype.getClass=function(){return e},r.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,r),e}(Yl),rh=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Yl.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],r=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,r)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){if(1===arguments.length){var e=arguments[0];return this._geometries[e].getCoordinate()}return t.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return Rc.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),r=0;r<t.length;r++)t[r]=this._geometries[r].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Kc]},e.prototype.getClass=function(){return e},r.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(e,r),e}(jc),nh=function(t){function e(e,r){e instanceof ll&&r instanceof _h&&(e=r.getCoordinateSequenceFactory().create(e)),t.call(this,e,r),this.validateConstruction()}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Yl.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return Rc.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||t.prototype.isClosed.call(this)},e.prototype.reverse=function(){var t=this._points.copy();return Jc.reverse(t),this.getFactory().createLinearRing(t)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new rl("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new rl("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},r.MINIMUM_VALID_SIZE.get=function(){return 4},r.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,r),e}(Qc),ih=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Yl.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],r=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,r)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),r=0;r<this._geometries.length;r++)e[r]=this._geometries[r].reverse();return this.getFactory().createMultiPolygon(e)},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new cc,e=0;e<this._geometries.length;e++)for(var r=this._geometries[e].getBoundary(),n=0;n<r.getNumGeometries();n++)t.add(r.getGeometryN(n));var i=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(i))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),r=0;r<t.length;r++)t[r]=this._geometries[r].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[th]},e.prototype.getClass=function(){return e},r.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,r),e}(jc),oh=function(t){this._factory=t||null,this._isUserDataCopied=!1},sh={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};oh.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},oh.prototype.edit=function(t,e){if(null===t)return null;var r=this.editInternal(t,e);return this._isUserDataCopied&&r.setUserData(t.getUserData()),r},oh.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof jc?this.editGeometryCollection(t,e):t instanceof eh?this.editPolygon(t,e):t instanceof $c||t instanceof Qc?e.edit(t,this._factory):(Bl.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},oh.prototype.editGeometryCollection=function(t,e){for(var r=e.edit(t,this._factory),n=new cc,i=0;i<r.getNumGeometries();i++){var o=this.edit(r.getGeometryN(i),e);null===o||o.isEmpty()||n.add(o)}return r.getClass()===rh?this._factory.createMultiPoint(n.toArray([])):r.getClass()===Gc?this._factory.createMultiLineString(n.toArray([])):r.getClass()===ih?this._factory.createMultiPolygon(n.toArray([])):this._factory.createGeometryCollection(n.toArray([]))},oh.prototype.editPolygon=function(t,e){var r=e.edit(t,this._factory);if(null===r&&(r=this._factory.createPolygon(null)),r.isEmpty())return r;var n=this.edit(r.getExteriorRing(),e);if(null===n||n.isEmpty())return this._factory.createPolygon();for(var i=new cc,o=0;o<r.getNumInteriorRing();o++){var s=this.edit(r.getInteriorRingN(o),e);null===s||s.isEmpty()||i.add(s)}return this._factory.createPolygon(n,i.toArray([]))},oh.prototype.interfaces_=function(){return[]},oh.prototype.getClass=function(){return oh},oh.GeometryEditorOperation=function(){},sh.NoOpGeometryOperation.get=function(){return ah},sh.CoordinateOperation.get=function(){return uh},sh.CoordinateSequenceOperation.get=function(){return lh},Object.defineProperties(oh,sh);var ah=function(){};ah.prototype.edit=function(t,e){return t},ah.prototype.interfaces_=function(){return[oh.GeometryEditorOperation]},ah.prototype.getClass=function(){return ah};var uh=function(){};uh.prototype.edit=function(t,e){var r=this.editCoordinates(t.getCoordinates(),t);return null===r?t:t instanceof nh?e.createLinearRing(r):t instanceof Qc?e.createLineString(r):t instanceof $c?r.length>0?e.createPoint(r[0]):e.createPoint():t},uh.prototype.interfaces_=function(){return[oh.GeometryEditorOperation]},uh.prototype.getClass=function(){return uh};var lh=function(){};lh.prototype.edit=function(t,e){return t instanceof nh?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof Qc?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof $c?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},lh.prototype.interfaces_=function(){return[oh.GeometryEditorOperation]},lh.prototype.getClass=function(){return lh};var ch=function(){var t=this;if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var e=arguments[0];this._coordinates=new Array(e).fill(null);for(var r=0;r<e;r++)t._coordinates[r]=new ll}else if(yl(arguments[0],Il)){var n=arguments[0];if(null===n)return this._coordinates=new Array(0).fill(null),null;this._dimension=n.getDimension(),this._coordinates=new Array(n.size()).fill(null);for(var i=0;i<this._coordinates.length;i++)t._coordinates[i]=n.getCoordinateCopy(i)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var o=arguments[0],s=arguments[1];this._coordinates=o,this._dimension=s,null===o&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var a=arguments[0],u=arguments[1];this._coordinates=new Array(a).fill(null),this._dimension=u;for(var l=0;l<a;l++)t._coordinates[l]=new ll}},hh={serialVersionUID:{configurable:!0}};ch.prototype.setOrdinate=function(t,e,r){switch(e){case Il.X:this._coordinates[t].x=r;break;case Il.Y:this._coordinates[t].y=r;break;case Il.Z:this._coordinates[t].z=r;break;default:throw new rl("invalid ordinateIndex")}},ch.prototype.size=function(){return this._coordinates.length},ch.prototype.getOrdinate=function(t,e){switch(e){case Il.X:return this._coordinates[t].x;case Il.Y:return this._coordinates[t].y;case Il.Z:return this._coordinates[t].z}return nl.NaN},ch.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}if(2===arguments.length){var e=arguments[0],r=arguments[1];r.x=this._coordinates[e].x,r.y=this._coordinates[e].y,r.z=this._coordinates[e].z}},ch.prototype.getCoordinateCopy=function(t){return new ll(this._coordinates[t])},ch.prototype.getDimension=function(){return this._dimension},ch.prototype.getX=function(t){return this._coordinates[t].x},ch.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new ch(t,this._dimension)},ch.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},ch.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new ch(t,this._dimension)},ch.prototype.toString=function(){if(this._coordinates.length>0){var t=new ml(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},ch.prototype.getY=function(t){return this._coordinates[t].y},ch.prototype.toCoordinateArray=function(){return this._coordinates},ch.prototype.interfaces_=function(){return[Il,ul]},ch.prototype.getClass=function(){return ch},hh.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(ch,hh);var fh=function(){},ph={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};fh.prototype.readResolve=function(){return fh.instance()},fh.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return new ch(t)}if(yl(arguments[0],Il)){var e=arguments[0];return new ch(e)}}else if(2===arguments.length){var r=arguments[0],n=arguments[1];return n>3&&(n=3),n<2?new ch(r):new ch(r,n)}},fh.prototype.interfaces_=function(){return[fl,ul]},fh.prototype.getClass=function(){return fh},fh.instance=function(){return fh.instanceObject},ph.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},ph.instanceObject.get=function(){return new fh},Object.defineProperties(fh,ph);var dh=function(t){function e(){t.call(this),this.map_=new Map}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return this.map_.get(t)||null},e.prototype.put=function(t,e){return this.map_.set(t,e),e},e.prototype.values=function(){for(var t=new cc,e=this.map_.values(),r=e.next();!r.done;)t.add(r.value),r=e.next();return t},e.prototype.entrySet=function(){var t=new xc;return this.map_.entries().forEach(function(e){return t.add(e)}),t},e.prototype.size=function(){return this.map_.size()},e}(gc),yh=function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof gh){var e=arguments[0];this._modelType=e,e===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var r=arguments[0];this._modelType=t.FIXED,this.setScale(r)}else if(arguments[0]instanceof t){var n=arguments[0];this._modelType=n._modelType,this._scale=n._scale}},vh={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};yh.prototype.equals=function(t){if(!(t instanceof yh))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale},yh.prototype.compareTo=function(t){var e=t,r=this.getMaximumSignificantDigits(),n=e.getMaximumSignificantDigits();return new _l(r).compareTo(new _l(n))},yh.prototype.getScale=function(){return this._scale},yh.prototype.isFloating=function(){return this._modelType===yh.FLOATING||this._modelType===yh.FLOATING_SINGLE},yh.prototype.getType=function(){return this._modelType},yh.prototype.toString=function(){var t="UNKNOWN";return this._modelType===yh.FLOATING?t="Floating":this._modelType===yh.FLOATING_SINGLE?t="Floating-Single":this._modelType===yh.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},yh.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];if(nl.isNaN(t))return t;if(this._modelType===yh.FLOATING_SINGLE){return t}return this._modelType===yh.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof ll){var e=arguments[0];if(this._modelType===yh.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},yh.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===yh.FLOATING?t=16:this._modelType===yh.FLOATING_SINGLE?t=6:this._modelType===yh.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},yh.prototype.setScale=function(t){this._scale=Math.abs(t)},yh.prototype.interfaces_=function(){return[ul,ol]},yh.prototype.getClass=function(){return yh},yh.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},vh.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},vh.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(yh,vh);var gh=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},mh={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};gh.prototype.readResolve=function(){return gh.nameToTypeMap.get(this._name)},gh.prototype.toString=function(){return this._name},gh.prototype.interfaces_=function(){return[ul]},gh.prototype.getClass=function(){return gh},mh.serialVersionUID.get=function(){return-552860263173159e4},mh.nameToTypeMap.get=function(){return new dh},Object.defineProperties(gh,mh),yh.Type=gh,yh.FIXED=new gh("FIXED"),yh.FLOATING=new gh("FLOATING"),yh.FLOATING_SINGLE=new gh("FLOATING SINGLE");var _h=function t(){this._precisionModel=new yh,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?yl(arguments[0],fl)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof yh&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},bh={serialVersionUID:{configurable:!0}};_h.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new ll(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new ll(t.getMinX(),t.getMinY()),new ll(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new ll(t.getMinX(),t.getMinY()),new ll(t.getMinX(),t.getMaxY()),new ll(t.getMaxX(),t.getMaxY()),new ll(t.getMaxX(),t.getMinY()),new ll(t.getMinX(),t.getMinY())]),null)},_h.prototype.createLineString=function(t){return t?t instanceof Array?new Qc(this.getCoordinateSequenceFactory().create(t),this):yl(t,Il)?new Qc(t,this):void 0:new Qc(this.getCoordinateSequenceFactory().create([]),this)},_h.prototype.createMultiLineString=function(){if(0===arguments.length)return new Gc(null,this);if(1===arguments.length){var t=arguments[0];return new Gc(t,this)}},_h.prototype.buildGeometry=function(t){for(var e=null,r=!1,n=!1,i=t.iterator();i.hasNext();){var o=i.next(),s=o.getClass();null===e&&(e=s),s!==e&&(r=!0),o.isGeometryCollectionOrDerived()&&(n=!0)}if(null===e)return this.createGeometryCollection();if(r||n)return this.createGeometryCollection(_h.toGeometryArray(t));var a=t.iterator().next();if(t.size()>1){if(a instanceof eh)return this.createMultiPolygon(_h.toPolygonArray(t));if(a instanceof Qc)return this.createMultiLineString(_h.toLineStringArray(t));if(a instanceof $c)return this.createMultiPoint(_h.toPointArray(t));Bl.shouldNeverReachHere("Unhandled class: "+a.getClass().getName())}return a},_h.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},_h.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof ll){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(yl(arguments[0],Il)){var e=arguments[0];return new $c(e,this)}}},_h.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},_h.prototype.createPolygon=function(){if(0===arguments.length)return new eh(null,null,this);if(1===arguments.length){if(yl(arguments[0],Il)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof nh){var r=arguments[0];return this.createPolygon(r,null)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return new eh(n,i,this)}},_h.prototype.getSRID=function(){return this._SRID},_h.prototype.createGeometryCollection=function(){if(0===arguments.length)return new jc(null,this);if(1===arguments.length){var t=arguments[0];return new jc(t,this)}},_h.prototype.createGeometry=function(t){return new oh(this).edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return this._coordinateSequenceFactory.create(t)}}})},_h.prototype.getPrecisionModel=function(){return this._precisionModel},_h.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(yl(arguments[0],Il)){var e=arguments[0];return new nh(e,this)}}},_h.prototype.createMultiPolygon=function(){if(0===arguments.length)return new ih(null,this);if(1===arguments.length){var t=arguments[0];return new ih(t,this)}},_h.prototype.createMultiPoint=function(){var t=this;if(0===arguments.length)return new rh(null,this);if(1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];return new rh(e,this)}if(arguments[0]instanceof Array){var r=arguments[0];return this.createMultiPoint(null!==r?this.getCoordinateSequenceFactory().create(r):null)}if(yl(arguments[0],Il)){var n=arguments[0];if(null===n)return this.createMultiPoint(new Array(0).fill(null));for(var i=new Array(n.size()).fill(null),o=0;o<n.size();o++){var s=t.getCoordinateSequenceFactory().create(1,n.getDimension());Jc.copy(n,o,s,0,1),i[o]=t.createPoint(s)}return this.createMultiPoint(i)}}},_h.prototype.interfaces_=function(){return[ul]},_h.prototype.getClass=function(){return _h},_h.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_h.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},_h.getDefaultCoordinateSequenceFactory=function(){return fh.instance()},_h.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_h.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_h.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_h.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_h.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_h.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_h.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},bh.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(_h,bh);var xh=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],Sh=function(t){this.geometryFactory=t||new _h};Sh.prototype.read=function(t){var e,r=(e="string"==typeof t?JSON.parse(t):t).type;if(!wh[r])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==xh.indexOf(r)?wh[r].apply(this,[e.coordinates]):"GeometryCollection"===r?wh[r].apply(this,[e.geometries]):wh[r].apply(this,[e])},Sh.prototype.write=function(t){var e=t.getGeometryType();if(!Ch[e])throw new Error("Geometry is not supported");return Ch[e].apply(this,[t])};var wh={Feature:function(t){var e={};for(var r in t)e[r]=t[r];if(t.geometry){var n=t.geometry.type;if(!wh[n])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=wh.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var r=0;r<t.features.length;++r)e.features.push(this.read(t.features[r]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],r=0;r<t.length;++r){var n=t[r];e.push(new ll(n[0],n[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new ll(t[0],t[1]),new ll(t[2],t[1]),new ll(t[2],t[3]),new ll(t[0],t[3]),new ll(t[0],t[1])])},Point:function(t){var e=new ll(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],r=0;r<t.length;++r)e.push(wh.Point.apply(this,[t[r]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=wh.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],r=0;r<t.length;++r)e.push(wh.LineString.apply(this,[t[r]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=wh.coordinates.apply(this,[t[0]]),r=this.geometryFactory.createLinearRing(e),n=[],i=1;i<t.length;++i){var o=t[i],s=wh.coordinates.apply(this,[o]),a=this.geometryFactory.createLinearRing(s);n.push(a)}return this.geometryFactory.createPolygon(r,n)},MultiPolygon:function(t){for(var e=[],r=0;r<t.length;++r){var n=t[r];e.push(wh.Polygon.apply(this,[n]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],r=0;r<t.length;++r){var n=t[r];e.push(this.read(n))}return this.geometryFactory.createGeometryCollection(e)}},Ch={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:Ch.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],r=0;r<t._geometries.length;++r){var n=t._geometries[r],i=Ch.Point.apply(this,[n]);e.push(i.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],r=t.getCoordinates(),n=0;n<r.length;++n){var i=r[n];e.push(Ch.coordinate.apply(this,[i]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],r=0;r<t._geometries.length;++r){var n=t._geometries[r],i=Ch.LineString.apply(this,[n]);e.push(i.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],r=Ch.LineString.apply(this,[t._shell]);e.push(r.coordinates);for(var n=0;n<t._holes.length;++n){var i=t._holes[n],o=Ch.LineString.apply(this,[i]);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],r=0;r<t._geometries.length;++r){var n=t._geometries[r],i=Ch.Polygon.apply(this,[n]);e.push(i.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],r=0;r<t._geometries.length;++r){var n=t._geometries[r],i=n.getGeometryType();e.push(Ch[i].apply(this,[n]))}return{type:"GeometryCollection",geometries:e}}},Ih=function(t){this.geometryFactory=t||new _h,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new Sh(this.geometryFactory)};Ih.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===yh.FIXED&&this.reducePrecision(e),e},Ih.prototype.reducePrecision=function(t){var e,r;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,r=t.points.length;e<r;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,r=t.geometries.length;e<r;e++)this.reducePrecision(t.geometries[e])};var Eh=function(){this.parser=new Sh(this.geometryFactory)};Eh.prototype.write=function(t){return this.parser.write(t)};var Ph=function(){},Mh={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};function Lh(t){this.message=t||""}function Nh(){this.array_=[]}Ph.prototype.interfaces_=function(){return[]},Ph.prototype.getClass=function(){return Ph},Ph.opposite=function(t){return t===Ph.LEFT?Ph.RIGHT:t===Ph.RIGHT?Ph.LEFT:t},Mh.ON.get=function(){return 0},Mh.LEFT.get=function(){return 1},Mh.RIGHT.get=function(){return 2},Object.defineProperties(Ph,Mh),Lh.prototype=new Error,Lh.prototype.name="EmptyStackException",Nh.prototype=new uc,Nh.prototype.add=function(t){return this.array_.push(t),!0},Nh.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},Nh.prototype.push=function(t){return this.array_.push(t),t},Nh.prototype.pop=function(t){if(0===this.array_.length)throw new Lh;return this.array_.pop()},Nh.prototype.peek=function(){if(0===this.array_.length)throw new Lh;return this.array_[this.array_.length-1]},Nh.prototype.empty=function(){return 0===this.array_.length},Nh.prototype.isEmpty=function(){return this.empty()},Nh.prototype.search=function(t){return this.array_.indexOf(t)},Nh.prototype.size=function(){return this.array_.length},Nh.prototype.toArray=function(){for(var t=[],e=0,r=this.array_.length;e<r;e++)t.push(this.array_[e]);return t};var Th=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};Th.prototype.getCoordinate=function(){return this._minCoord},Th.prototype.getRightmostSide=function(t,e){var r=this.getRightmostSideOfSegment(t,e);return r<0&&(r=this.getRightmostSideOfSegment(t,e-1)),r<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),r},Th.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();Bl.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],r=t[this._minIndex+1],n=Hl.computeOrientation(this._minCoord,r,e),i=!1;(e.y<this._minCoord.y&&r.y<this._minCoord.y&&n===Hl.COUNTERCLOCKWISE||e.y>this._minCoord.y&&r.y>this._minCoord.y&&n===Hl.CLOCKWISE)&&(i=!0),i&&(this._minIndex=this._minIndex-1)},Th.prototype.getRightmostSideOfSegment=function(t,e){var r=t.getEdge().getCoordinates();if(e<0||e+1>=r.length)return-1;if(r[e].y===r[e+1].y)return-1;var n=Ph.LEFT;return r[e].y<r[e+1].y&&(n=Ph.RIGHT),n},Th.prototype.getEdge=function(){return this._orientedDe},Th.prototype.checkForRightmostCoordinate=function(t){for(var e=this,r=t.getEdge().getCoordinates(),n=0;n<r.length-1;n++)(null===e._minCoord||r[n].x>e._minCoord.x)&&(e._minDe=t,e._minIndex=n,e._minCoord=r[n])},Th.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},Th.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var r=e.next();r.isForward()&&this.checkForRightmostCoordinate(r)}Bl.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Ph.LEFT&&(this._orientedDe=this._minDe.getSym())},Th.prototype.interfaces_=function(){return[]},Th.prototype.getClass=function(){return Th};var Oh=function(t){function e(r,n){t.call(this,e.msgWithCoord(r,n)),this.pt=n?new ll(n):null,this.name="TopologyException"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(t,e){return e?t:t+" [ "+e+" ]"},e}(jl),Ah=function(){this.array_=[]};Ah.prototype.addLast=function(t){this.array_.push(t)},Ah.prototype.removeFirst=function(){return this.array_.shift()},Ah.prototype.isEmpty=function(){return 0===this.array_.length};var Rh=function(){this._finder=null,this._dirEdgeList=new cc,this._nodes=new cc,this._rightMostCoord=null,this._env=null,this._finder=new Th};Rh.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){t.next().setVisited(!1)}},Rh.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},Rh.prototype.computeNodeDepth=function(t){for(var e=null,r=t.getEdges().iterator();r.hasNext();){var n=r.next();if(n.isVisited()||n.getSym().isVisited()){e=n;break}}if(null===e)throw new Oh("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var i=t.getEdges().iterator();i.hasNext();){var o=i.next();o.setVisited(!0),this.copySymDepths(o)}},Rh.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(Ph.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},Rh.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},Rh.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(Ph.RIGHT)>=1&&e.getDepth(Ph.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},Rh.prototype.computeDepths=function(t){var e=new xc,r=new Ah,n=t.getNode();for(r.addLast(n),e.add(n),t.setVisited(!0);!r.isEmpty();){var i=r.removeFirst();e.add(i),this.computeNodeDepth(i);for(var o=i.getEdges().iterator();o.hasNext();){var s=o.next().getSym();if(!s.isVisited()){var a=s.getNode();e.contains(a)||(r.addLast(a),e.add(a))}}}},Rh.prototype.compareTo=function(t){var e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0},Rh.prototype.getEnvelope=function(){if(null===this._env){for(var t=new Tl,e=this._dirEdgeList.iterator();e.hasNext();)for(var r=e.next().getEdge().getCoordinates(),n=0;n<r.length-1;n++)t.expandToInclude(r[n]);this._env=t}return this._env},Rh.prototype.addReachable=function(t){var e=new Nh;for(e.add(t);!e.empty();){var r=e.pop();this.add(r,e)}},Rh.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(Ph.LEFT,t.getDepth(Ph.RIGHT)),e.setDepth(Ph.RIGHT,t.getDepth(Ph.LEFT))},Rh.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var r=t.getEdges().iterator();r.hasNext();){var n=r.next();this._dirEdgeList.add(n);var i=n.getSym().getNode();i.isVisited()||e.push(i)}},Rh.prototype.getNodes=function(){return this._nodes},Rh.prototype.getDirectedEdges=function(){return this._dirEdgeList},Rh.prototype.interfaces_=function(){return[ol]},Rh.prototype.getClass=function(){return Rh};var Fh=function t(){var e=this;if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var r=arguments[0];this.init(r.length)}else if(Number.isInteger(arguments[0])){var n=arguments[0];this.init(1),this.location[Ph.ON]=n}else if(arguments[0]instanceof t){var i=arguments[0];if(this.init(i.location.length),null!==i)for(var o=0;o<this.location.length;o++)e.location[o]=i.location[o]}}else if(3===arguments.length){var s=arguments[0],a=arguments[1],u=arguments[2];this.init(3),this.location[Ph.ON]=s,this.location[Ph.LEFT]=a,this.location[Ph.RIGHT]=u}};Fh.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},Fh.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==pl.NONE)return!1;return!0},Fh.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===pl.NONE&&(this.location[e]=t)},Fh.prototype.isLine=function(){return 1===this.location.length},Fh.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[Ph.ON]=this.location[Ph.ON],e[Ph.LEFT]=pl.NONE,e[Ph.RIGHT]=pl.NONE,this.location=e}for(var r=0;r<this.location.length;r++)this.location[r]===pl.NONE&&r<t.location.length&&(this.location[r]=t.location[r])},Fh.prototype.getLocations=function(){return this.location},Fh.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[Ph.LEFT];this.location[Ph.LEFT]=this.location[Ph.RIGHT],this.location[Ph.RIGHT]=t},Fh.prototype.toString=function(){var t=new ml;return this.location.length>1&&t.append(pl.toLocationSymbol(this.location[Ph.LEFT])),t.append(pl.toLocationSymbol(this.location[Ph.ON])),this.location.length>1&&t.append(pl.toLocationSymbol(this.location[Ph.RIGHT])),t.toString()},Fh.prototype.setLocations=function(t,e,r){this.location[Ph.ON]=t,this.location[Ph.LEFT]=e,this.location[Ph.RIGHT]=r},Fh.prototype.get=function(t){return t<this.location.length?this.location[t]:pl.NONE},Fh.prototype.isArea=function(){return this.location.length>1},Fh.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===pl.NONE)return!0;return!1},Fh.prototype.setLocation=function(){if(1===arguments.length){var t=arguments[0];this.setLocation(Ph.ON,t)}else if(2===arguments.length){var e=arguments[0],r=arguments[1];this.location[e]=r}},Fh.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(pl.NONE)},Fh.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},Fh.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},Fh.prototype.interfaces_=function(){return[]},Fh.prototype.getClass=function(){return Fh};var Dh=function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new Fh(e),this.elt[1]=new Fh(e)}else if(arguments[0]instanceof t){var r=arguments[0];this.elt[0]=new Fh(r.elt[0]),this.elt[1]=new Fh(r.elt[1])}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.elt[0]=new Fh(pl.NONE),this.elt[1]=new Fh(pl.NONE),this.elt[n].setLocation(i)}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];this.elt[0]=new Fh(o,s,a),this.elt[1]=new Fh(o,s,a)}else if(4===arguments.length){var u=arguments[0],l=arguments[1],c=arguments[2],h=arguments[3];this.elt[0]=new Fh(pl.NONE,pl.NONE,pl.NONE),this.elt[1]=new Fh(pl.NONE,pl.NONE,pl.NONE),this.elt[u].setLocations(l,c,h)}};Dh.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},Dh.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},Dh.prototype.isNull=function(t){return this.elt[t].isNull()},Dh.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],r=arguments[1];this.elt[e].setAllLocationsIfNull(r)}},Dh.prototype.isLine=function(t){return this.elt[t].isLine()},Dh.prototype.merge=function(t){for(var e=this,r=0;r<2;r++)null===e.elt[r]&&null!==t.elt[r]?e.elt[r]=new Fh(t.elt[r]):e.elt[r].merge(t.elt[r])},Dh.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},Dh.prototype.getLocation=function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(Ph.ON)}if(2===arguments.length){var e=arguments[0],r=arguments[1];return this.elt[e].get(r)}},Dh.prototype.toString=function(){var t=new ml;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},Dh.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},Dh.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},Dh.prototype.setLocation=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(Ph.ON,e)}else if(3===arguments.length){var r=arguments[0],n=arguments[1],i=arguments[2];this.elt[r].setLocation(n,i)}},Dh.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},Dh.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},Dh.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new Fh(this.elt[t].location[0]))},Dh.prototype.interfaces_=function(){return[]},Dh.prototype.getClass=function(){return Dh},Dh.toLineLabel=function(t){for(var e=new Dh(pl.NONE),r=0;r<2;r++)e.setLocation(r,t.getLocation(r));return e};var kh=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new cc,this._pts=new cc,this._label=new Dh(pl.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new cc,this._geometryFactory=null;var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()};kh.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=Hl.isCCW(this._ring.getCoordinates())},kh.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},kh.prototype.computePoints=function(t){var e=this;this._startDe=t;var r=t,n=!0;do{if(null===r)throw new Oh("Found null DirectedEdge");if(r.getEdgeRing()===e)throw new Oh("Directed Edge visited twice during ring-building at "+r.getCoordinate());e._edges.add(r);var i=r.getLabel();Bl.isTrue(i.isArea()),e.mergeLabel(i),e.addPoints(r.getEdge(),r.isForward(),n),n=!1,e.setEdgeRing(r,e),r=e.getNext(r)}while(r!==this._startDe)},kh.prototype.getLinearRing=function(){return this._ring},kh.prototype.getCoordinate=function(t){return this._pts.get(t)},kh.prototype.computeMaxNodeDegree=function(){var t=this;this._maxNodeDegree=0;var e=this._startDe;do{var r=e.getNode().getEdges().getOutgoingDegree(t);r>t._maxNodeDegree&&(t._maxNodeDegree=r),e=t.getNext(e)}while(e!==this._startDe);this._maxNodeDegree*=2},kh.prototype.addPoints=function(t,e,r){var n=t.getCoordinates();if(e){var i=1;r&&(i=0);for(var o=i;o<n.length;o++)this._pts.add(n[o])}else{var s=n.length-2;r&&(s=n.length-1);for(var a=s;a>=0;a--)this._pts.add(n[a])}},kh.prototype.isHole=function(){return this._isHole},kh.prototype.setInResult=function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)},kh.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!Hl.isPointInRing(t,e.getCoordinates()))return!1;for(var r=this._holes.iterator();r.hasNext();){if(r.next().containsPoint(t))return!1}return!0},kh.prototype.addHole=function(t){this._holes.add(t)},kh.prototype.isShell=function(){return null===this._shell},kh.prototype.getLabel=function(){return this._label},kh.prototype.getEdges=function(){return this._edges},kh.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},kh.prototype.getShell=function(){return this._shell},kh.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[0],r=arguments[1],n=e.getLocation(r,Ph.RIGHT);if(n===pl.NONE)return null;if(this._label.getLocation(r)===pl.NONE)return this._label.setLocation(r,n),null}},kh.prototype.setShell=function(t){this._shell=t,null!==t&&t.addHole(this)},kh.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),r=0;r<this._holes.size();r++)e[r]=this._holes.get(r).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},kh.prototype.interfaces_=function(){return[]},kh.prototype.getClass=function(){return kh};var jh=function(t){function e(){var e=arguments[0],r=arguments[1];t.call(this,e,r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},e.prototype.getNext=function(t){return t.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(kh),Gh=function(t){function e(){var e=arguments[0],r=arguments[1];t.call(this,e,r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildMinimalRings=function(){var t=new cc,e=this._startDe;do{if(null===e.getMinEdgeRing()){var r=new jh(e,this._geometryFactory);t.add(r)}e=e.getNext()}while(e!==this._startDe);return t},e.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)},e.prototype.getNext=function(t){return t.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(kh),Bh=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._label=t}};Bh.prototype.setVisited=function(t){this._isVisited=t},Bh.prototype.setInResult=function(t){this._isInResult=t},Bh.prototype.isCovered=function(){return this._isCovered},Bh.prototype.isCoveredSet=function(){return this._isCoveredSet},Bh.prototype.setLabel=function(t){this._label=t},Bh.prototype.getLabel=function(){return this._label},Bh.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},Bh.prototype.updateIM=function(t){Bl.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},Bh.prototype.isInResult=function(){return this._isInResult},Bh.prototype.isVisited=function(){return this._isVisited},Bh.prototype.interfaces_=function(){return[]},Bh.prototype.getClass=function(){return Bh};var Uh=function(t){function e(){t.call(this),this._coord=null,this._edges=null;var e=arguments[0],r=arguments[1];this._coord=e,this._edges=r,this._label=new Dh(0,pl.NONE)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();){if(t.next().getEdge().isInResult())return!0}return!1},e.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(t){t.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(t){},e.prototype.computeMergedLocation=function(t,e){var r=pl.NONE;if(r=this._label.getLocation(e),!t.isNull(e)){var n=t.getLocation(e);r!==pl.BOUNDARY&&(r=n)}return r},e.prototype.setLabel=function(){if(2!==arguments.length)return t.prototype.setLabel.apply(this,arguments);var e=arguments[0],r=arguments[1];null===this._label?this._label=new Dh(e,r):this._label.setLocation(e,r)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){var t=this;if(arguments[0]instanceof e){var r=arguments[0];this.mergeLabel(r._label)}else if(arguments[0]instanceof Dh)for(var n=arguments[0],i=0;i<2;i++){var o=t.computeMergedLocation(n,i),s=t._label.getLocation(i);s===pl.NONE&&t._label.setLocation(i,o)}},e.prototype.add=function(t){this._edges.insert(t),t.setNode(this)},e.prototype.setLabelBoundary=function(t){if(null===this._label)return null;var e=pl.NONE;null!==this._label&&(e=this._label.getLocation(t));var r=null;switch(e){case pl.BOUNDARY:r=pl.INTERIOR;break;case pl.INTERIOR:default:r=pl.BOUNDARY}this._label.setLocation(t,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Bh),qh=function(){this.nodeMap=new Mc,this.nodeFact=null;var t=arguments[0];this.nodeFact=t};qh.prototype.find=function(t){return this.nodeMap.get(t)},qh.prototype.addNode=function(){if(arguments[0]instanceof ll){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof Uh){var r=arguments[0],n=this.nodeMap.get(r.getCoordinate());return null===n?(this.nodeMap.put(r.getCoordinate(),r),r):(n.mergeLabel(r),n)}},qh.prototype.print=function(t){for(var e=this.iterator();e.hasNext();){e.next().print(t)}},qh.prototype.iterator=function(){return this.nodeMap.values().iterator()},qh.prototype.values=function(){return this.nodeMap.values()},qh.prototype.getBoundaryNodes=function(t){for(var e=new cc,r=this.iterator();r.hasNext();){var n=r.next();n.getLabel().getLocation(t)===pl.BOUNDARY&&e.add(n)}return e},qh.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},qh.prototype.interfaces_=function(){return[]},qh.prototype.getClass=function(){return qh};var zh=function(){},Vh={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};zh.prototype.interfaces_=function(){return[]},zh.prototype.getClass=function(){return zh},zh.isNorthern=function(t){return t===zh.NE||t===zh.NW},zh.isOpposite=function(t,e){return t!==e&&2===(t-e+4)%4},zh.commonHalfPlane=function(t,e){if(t===e)return t;if(2===(t-e+4)%4)return-1;var r=t<e?t:e;return 0===r&&3===(t>e?t:e)?3:r},zh.isInHalfPlane=function(t,e){return e===zh.SE?t===zh.SE||t===zh.SW:t===e||t===e+1},zh.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new rl("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?zh.NE:zh.SE:e>=0?zh.NW:zh.SW}if(arguments[0]instanceof ll&&arguments[1]instanceof ll){var r=arguments[0],n=arguments[1];if(n.x===r.x&&n.y===r.y)throw new rl("Cannot compute the quadrant for two identical points "+r);return n.x>=r.x?n.y>=r.y?zh.NE:zh.SE:n.y>=r.y?zh.NW:zh.SW}},Vh.NE.get=function(){return 0},Vh.NW.get=function(){return 1},Vh.SW.get=function(){return 2},Vh.SE.get=function(){return 3},Object.defineProperties(zh,Vh);var Wh=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0];this._edge=t}else if(3===arguments.length){var e=arguments[0],r=arguments[1],n=arguments[2],i=null;this._edge=e,this.init(r,n),this._label=i}else if(4===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3];this._edge=o,this.init(s,a),this._label=u}};Wh.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:Hl.computeOrientation(t._p0,t._p1,this._p1)},Wh.prototype.getDy=function(){return this._dy},Wh.prototype.getCoordinate=function(){return this._p0},Wh.prototype.setNode=function(t){this._node=t},Wh.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),r=this.getClass().getName(),n=r.lastIndexOf("."),i=r.substring(n+1);t.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},Wh.prototype.compareTo=function(t){var e=t;return this.compareDirection(e)},Wh.prototype.getDirectedCoordinate=function(){return this._p1},Wh.prototype.getDx=function(){return this._dx},Wh.prototype.getLabel=function(){return this._label},Wh.prototype.getEdge=function(){return this._edge},Wh.prototype.getQuadrant=function(){return this._quadrant},Wh.prototype.getNode=function(){return this._node},Wh.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),r=e.lastIndexOf(".");return"  "+e.substring(r+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},Wh.prototype.computeLabel=function(t){},Wh.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=zh.quadrant(this._dx,this._dy),Bl.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},Wh.prototype.interfaces_=function(){return[ol]},Wh.prototype.getClass=function(){return Wh};var Hh=function(t){function e(){var e=arguments[0],r=arguments[1];if(t.call(this,e),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=r,r)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var n=e.getNumPoints()-1;this.init(e.getCoordinate(n),e.getCoordinate(n-1))}this.computeDirectedLabel()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(t){return this._depth[t]},e.prototype.setVisited=function(t){this._isVisited=t},e.prototype.computeDirectedLabel=function(){this._label=new Dh(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new Oh("assigned depths do not match",this.getCoordinate());this._depth[t]=e},e.prototype.isInteriorAreaEdge=function(){for(var t=this,e=!0,r=0;r<2;r++)t._label.isArea(r)&&t._label.getLocation(r,Ph.LEFT)===pl.INTERIOR&&t._label.getLocation(r,Ph.RIGHT)===pl.INTERIOR||(e=!1);return e},e.prototype.setNextMin=function(t){this._nextMin=t},e.prototype.print=function(e){t.prototype.print.call(this,e),e.print(" "+this._depth[Ph.LEFT]+"/"+this._depth[Ph.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")},e.prototype.setMinEdgeRing=function(t){this._minEdgeRing=t},e.prototype.isLineEdge=function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,pl.EXTERIOR),r=!this._label.isArea(1)||this._label.allPositionsEqual(1,pl.EXTERIOR);return t&&e&&r},e.prototype.setEdgeRing=function(t){this._edgeRing=t},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t},e.prototype.setInResult=function(t){this._isInResult=t},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)},e.prototype.setSym=function(t){this._sym=t},e.prototype.setVisitedEdge=function(t){this.setVisited(t),this._sym.setVisited(t)},e.prototype.setEdgeDepths=function(t,e){var r=this.getEdge().getDepthDelta();this._isForward||(r=-r);var n=1;t===Ph.LEFT&&(n=-1);var i=Ph.opposite(t),o=e+r*n;this.setDepth(t,e),this.setDepth(i,o)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(t){this._next=t},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(t,e){return t===pl.EXTERIOR&&e===pl.INTERIOR?1:t===pl.INTERIOR&&e===pl.EXTERIOR?-1:0},e}(Wh),Xh=function(){};Xh.prototype.createNode=function(t){return new Uh(t,null)},Xh.prototype.interfaces_=function(){return[]},Xh.prototype.getClass=function(){return Xh};var Zh=function(){if(this._edges=new cc,this._nodes=null,this._edgeEndList=new cc,0===arguments.length)this._nodes=new qh(new Xh);else if(1===arguments.length){var t=arguments[0];this._nodes=new qh(t)}};Zh.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var r=this._edges.get(e);r.print(t),r.eiList.print(t)}},Zh.prototype.find=function(t){return this._nodes.find(t)},Zh.prototype.addNode=function(){if(arguments[0]instanceof Uh){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof ll){var e=arguments[0];return this._nodes.addNode(e)}},Zh.prototype.getNodeIterator=function(){return this._nodes.iterator()},Zh.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();){t.next().getEdges().linkResultDirectedEdges()}},Zh.prototype.debugPrintln=function(t){Ll.out.println(t)},Zh.prototype.isBoundaryNode=function(t,e){var r=this._nodes.find(e);if(null===r)return!1;var n=r.getLabel();return null!==n&&n.getLocation(t)===pl.BOUNDARY},Zh.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();){t.next().getEdges().linkAllDirectedEdges()}},Zh.prototype.matchInSameDirection=function(t,e,r,n){return!!t.equals(r)&&(Hl.computeOrientation(t,e,n)===Hl.COLLINEAR&&zh.quadrant(t,e)===zh.quadrant(r,n))},Zh.prototype.getEdgeEnds=function(){return this._edgeEndList},Zh.prototype.debugPrint=function(t){Ll.out.print(t)},Zh.prototype.getEdgeIterator=function(){return this._edges.iterator()},Zh.prototype.findEdgeInSameDirection=function(t,e){for(var r=this,n=0;n<this._edges.size();n++){var i=r._edges.get(n),o=i.getCoordinates();if(r.matchInSameDirection(t,e,o[0],o[1]))return i;if(r.matchInSameDirection(t,e,o[o.length-1],o[o.length-2]))return i}return null},Zh.prototype.insertEdge=function(t){this._edges.add(t)},Zh.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var r=e.next();if(r.getEdge()===t)return r}return null},Zh.prototype.addEdges=function(t){for(var e=this,r=t.iterator();r.hasNext();){var n=r.next();e._edges.add(n);var i=new Hh(n,!0),o=new Hh(n,!1);i.setSym(o),o.setSym(i),e.add(i),e.add(o)}},Zh.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},Zh.prototype.getNodes=function(){return this._nodes.values()},Zh.prototype.findEdge=function(t,e){for(var r=0;r<this._edges.size();r++){var n=this._edges.get(r),i=n.getCoordinates();if(t.equals(i[0])&&e.equals(i[1]))return n}return null},Zh.prototype.interfaces_=function(){return[]},Zh.prototype.getClass=function(){return Zh},Zh.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();){e.next().getEdges().linkResultDirectedEdges()}};var Yh=function(){this._geometryFactory=null,this._shellList=new cc;var t=arguments[0];this._geometryFactory=t};Yh.prototype.sortShellsAndHoles=function(t,e,r){for(var n=t.iterator();n.hasNext();){var i=n.next();i.isHole()?r.add(i):e.add(i)}},Yh.prototype.computePolygons=function(t){for(var e=new cc,r=t.iterator();r.hasNext();){var n=r.next().toPolygon(this._geometryFactory);e.add(n)}return e},Yh.prototype.placeFreeHoles=function(t,e){for(var r=e.iterator();r.hasNext();){var n=r.next();if(null===n.getShell()){var i=this.findEdgeRingContaining(n,t);if(null===i)throw new Oh("unable to assign hole to a shell",n.getCoordinate(0));n.setShell(i)}}},Yh.prototype.buildMinimalEdgeRings=function(t,e,r){for(var n=new cc,i=t.iterator();i.hasNext();){var o=i.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var s=o.buildMinimalRings(),a=this.findShell(s);null!==a?(this.placePolygonHoles(a,s),e.add(a)):r.addAll(s)}else n.add(o)}return n},Yh.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();){if(e.next().containsPoint(t))return!0}return!1},Yh.prototype.buildMaximalEdgeRings=function(t){for(var e=new cc,r=t.iterator();r.hasNext();){var n=r.next();if(n.isInResult()&&n.getLabel().isArea()&&null===n.getEdgeRing()){var i=new Gh(n,this._geometryFactory);e.add(i),i.setInResult()}}return e},Yh.prototype.placePolygonHoles=function(t,e){for(var r=e.iterator();r.hasNext();){var n=r.next();n.isHole()&&n.setShell(t)}},Yh.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},Yh.prototype.findEdgeRingContaining=function(t,e){for(var r=t.getLinearRing(),n=r.getEnvelopeInternal(),i=r.getCoordinateN(0),o=null,s=null,a=e.iterator();a.hasNext();){var u=a.next(),l=u.getLinearRing(),c=l.getEnvelopeInternal();null!==o&&(s=o.getLinearRing().getEnvelopeInternal());var h=!1;c.contains(n)&&Hl.isPointInRing(i,l.getCoordinates())&&(h=!0),h&&(null===o||s.contains(c))&&(o=u)}return o},Yh.prototype.findShell=function(t){for(var e=0,r=null,n=t.iterator();n.hasNext();){var i=n.next();i.isHole()||(r=i,e++)}return Bl.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),r},Yh.prototype.add=function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],r=arguments[1];Zh.linkResultDirectedEdges(r);var n=this.buildMaximalEdgeRings(e),i=new cc,o=this.buildMinimalEdgeRings(n,this._shellList,i);this.sortShellsAndHoles(o,this._shellList,i),this.placeFreeHoles(this._shellList,i)}},Yh.prototype.interfaces_=function(){return[]},Yh.prototype.getClass=function(){return Yh};var Jh=function(){};Jh.prototype.getBounds=function(){},Jh.prototype.interfaces_=function(){return[]},Jh.prototype.getClass=function(){return Jh};var Qh=function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e};Qh.prototype.getItem=function(){return this._item},Qh.prototype.getBounds=function(){return this._bounds},Qh.prototype.interfaces_=function(){return[Jh,ul]},Qh.prototype.getClass=function(){return Qh};var Kh=function(){this._size=null,this._items=null,this._size=0,this._items=new cc,this._items.add(null)};Kh.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},Kh.prototype.size=function(){return this._size},Kh.prototype.reorder=function(t){for(var e=this,r=null,n=this._items.get(t);2*t<=this._size&&((r=2*t)!==e._size&&e._items.get(r+1).compareTo(e._items.get(r))<0&&r++,e._items.get(r).compareTo(n)<0);t=r)e._items.set(t,e._items.get(r));this._items.set(t,n)},Kh.prototype.clear=function(){this._size=0,this._items.clear()},Kh.prototype.isEmpty=function(){return 0===this._size},Kh.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},Kh.prototype.interfaces_=function(){return[]},Kh.prototype.getClass=function(){return Kh};var $h=function(){};$h.prototype.visitItem=function(t){},$h.prototype.interfaces_=function(){return[]},$h.prototype.getClass=function(){return $h};var tf=function(){};tf.prototype.insert=function(t,e){},tf.prototype.remove=function(t,e){},tf.prototype.query=function(){},tf.prototype.interfaces_=function(){return[]},tf.prototype.getClass=function(){return tf};var ef=function(){if(this._childBoundables=new cc,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._level=t}},rf={serialVersionUID:{configurable:!0}};ef.prototype.getLevel=function(){return this._level},ef.prototype.size=function(){return this._childBoundables.size()},ef.prototype.getChildBoundables=function(){return this._childBoundables},ef.prototype.addChildBoundable=function(t){Bl.isTrue(null===this._bounds),this._childBoundables.add(t)},ef.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},ef.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},ef.prototype.interfaces_=function(){return[Jh,ul]},ef.prototype.getClass=function(){return ef},rf.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(ef,rf);var nf=function(){};nf.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},nf.min=function(t){return nf.sort(t),t.get(0)},nf.sort=function(t,e){var r=t.toArray();e?Ac.sort(r,e):Ac.sort(r);for(var n=t.iterator(),i=0,o=r.length;i<o;i++)n.next(),n.set(r[i])},nf.singletonList=function(t){var e=new cc;return e.add(t),e};var of=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],r=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=r,this._distance=this.distance()};of.prototype.expandToQueue=function(t,e){var r=of.isComposite(this._boundable1),n=of.isComposite(this._boundable2);if(r&&n)return of.area(this._boundable1)>of.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null);if(r)return this.expand(this._boundable1,this._boundable2,t,e),null;if(n)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new rl("neither boundable is composite")},of.prototype.isLeaves=function(){return!(of.isComposite(this._boundable1)||of.isComposite(this._boundable2))},of.prototype.compareTo=function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},of.prototype.expand=function(t,e,r,n){for(var i=t.getChildBoundables().iterator();i.hasNext();){var o=i.next(),s=new of(o,e,this._itemDistance);s.getDistance()<n&&r.add(s)}},of.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},of.prototype.getDistance=function(){return this._distance},of.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},of.prototype.interfaces_=function(){return[ol]},of.prototype.getClass=function(){return of},of.area=function(t){return t.getBounds().getArea()},of.isComposite=function(t){return t instanceof ef};var sf=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new cc,this._nodeCapacity=null,0===arguments.length){var e=t.DEFAULT_NODE_CAPACITY;this._nodeCapacity=e}else if(1===arguments.length){var r=arguments[0];Bl.isTrue(r>1,"Node capacity must be greater than 1"),this._nodeCapacity=r}},af={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};sf.prototype.getNodeCapacity=function(){return this._nodeCapacity},sf.prototype.lastNode=function(t){return t.get(t.size()-1)},sf.prototype.size=function(){var t=this;if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var e=arguments[0],r=0,n=e.getChildBoundables().iterator();n.hasNext();){var i=n.next();i instanceof ef?r+=t.size(i):i instanceof Qh&&(r+=1)}return r}},sf.prototype.removeItem=function(t,e){for(var r=null,n=t.getChildBoundables().iterator();n.hasNext();){var i=n.next();i instanceof Qh&&i.getItem()===e&&(r=i)}return null!==r&&(t.getChildBoundables().remove(r),!0)},sf.prototype.itemsTree=function(){var t=this;if(0===arguments.length){this.build();var e=this.itemsTree(this._root);return null===e?new cc:e}if(1===arguments.length){for(var r=arguments[0],n=new cc,i=r.getChildBoundables().iterator();i.hasNext();){var o=i.next();if(o instanceof ef){var s=t.itemsTree(o);null!==s&&n.add(s)}else o instanceof Qh?n.add(o.getItem()):Bl.shouldNeverReachHere()}return n.size()<=0?null:n}},sf.prototype.insert=function(t,e){Bl.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Qh(t,e))},sf.prototype.boundablesAtLevel=function(){var t=this;if(1===arguments.length){var e=arguments[0],r=new cc;return this.boundablesAtLevel(e,this._root,r),r}if(3===arguments.length){var n=arguments[0],i=arguments[1],o=arguments[2];if(Bl.isTrue(n>-2),i.getLevel()===n)return o.add(i),null;for(var s=i.getChildBoundables().iterator();s.hasNext();){var a=s.next();a instanceof ef?t.boundablesAtLevel(n,a,o):(Bl.isTrue(a instanceof Qh),-1===n&&o.add(a))}return null}},sf.prototype.query=function(){var t=this;if(1===arguments.length){var e=arguments[0];this.build();var r=new cc;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),e)&&this.query(e,this._root,r),r}if(2===arguments.length){var n=arguments[0],i=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.query(n,this._root,i)}else if(3===arguments.length)if(yl(arguments[2],$h)&&arguments[0]instanceof Object&&arguments[1]instanceof ef)for(var o=arguments[0],s=arguments[1],a=arguments[2],u=s.getChildBoundables(),l=0;l<u.size();l++){var c=u.get(l);t.getIntersectsOp().intersects(c.getBounds(),o)&&(c instanceof ef?t.query(o,c,a):c instanceof Qh?a.visitItem(c.getItem()):Bl.shouldNeverReachHere())}else if(yl(arguments[2],uc)&&arguments[0]instanceof Object&&arguments[1]instanceof ef)for(var h=arguments[0],f=arguments[1],p=arguments[2],d=f.getChildBoundables(),y=0;y<d.size();y++){var v=d.get(y);t.getIntersectsOp().intersects(v.getBounds(),h)&&(v instanceof ef?t.query(h,v,p):v instanceof Qh?p.add(v.getItem()):Bl.shouldNeverReachHere())}},sf.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},sf.prototype.getRoot=function(){return this.build(),this._root},sf.prototype.remove=function(){var t=this;if(2===arguments.length){var e=arguments[0],r=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),e)&&this.remove(e,this._root,r)}if(3===arguments.length){var n=arguments[0],i=arguments[1],o=arguments[2],s=this.removeItem(i,o);if(s)return!0;for(var a=null,u=i.getChildBoundables().iterator();u.hasNext();){var l=u.next();if(t.getIntersectsOp().intersects(l.getBounds(),n)&&(l instanceof ef&&(s=t.remove(n,l,o)))){a=l;break}}return null!==a&&a.getChildBoundables().isEmpty()&&i.getChildBoundables().remove(a),s}},sf.prototype.createHigherLevels=function(t,e){Bl.isTrue(!t.isEmpty());var r=this.createParentBoundables(t,e+1);return 1===r.size()?r.get(0):this.createHigherLevels(r,e+1)},sf.prototype.depth=function(){var t=this;if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var e=arguments[0],r=0,n=e.getChildBoundables().iterator();n.hasNext();){var i=n.next();if(i instanceof ef){var o=t.depth(i);o>r&&(r=o)}}return r+1}},sf.prototype.createParentBoundables=function(t,e){var r=this;Bl.isTrue(!t.isEmpty());var n=new cc;n.add(this.createNode(e));var i=new cc(t);nf.sort(i,this.getComparator());for(var o=i.iterator();o.hasNext();){var s=o.next();r.lastNode(n).getChildBoundables().size()===r.getNodeCapacity()&&n.add(r.createNode(e)),r.lastNode(n).addChildBoundable(s)}return n},sf.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},sf.prototype.interfaces_=function(){return[ul]},sf.prototype.getClass=function(){return sf},sf.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},af.IntersectsOp.get=function(){return uf},af.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},af.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(sf,af);var uf=function(){},lf=function(){};lf.prototype.distance=function(t,e){},lf.prototype.interfaces_=function(){return[]},lf.prototype.getClass=function(){return lf};var cf=function(t){function e(r){r=r||e.DEFAULT_NODE_CAPACITY,t.call(this,r)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return e.prototype.createParentBoundablesFromVerticalSlices=function(t,e){Bl.isTrue(t.length>0);for(var r=new cc,n=0;n<t.length;n++)r.addAll(this.createParentBoundablesFromVerticalSlice(t[n],e));return r},e.prototype.createNode=function(t){return new hf(t)},e.prototype.size=function(){return 0===arguments.length?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},e.prototype.insert=function(){if(2!==arguments.length)return t.prototype.insert.apply(this,arguments);var e=arguments[0],r=arguments[1];if(e.isNull())return null;t.prototype.insert.call(this,e,r)},e.prototype.getIntersectsOp=function(){return e.intersectsOp},e.prototype.verticalSlices=function(t,e){for(var r=Math.trunc(Math.ceil(t.size()/e)),n=new Array(e).fill(null),i=t.iterator(),o=0;o<e;o++){n[o]=new cc;for(var s=0;i.hasNext()&&s<r;){var a=i.next();n[o].add(a),s++}}return n},e.prototype.query=function(){if(1===arguments.length){var e=arguments[0];return t.prototype.query.call(this,e)}if(2===arguments.length){var r=arguments[0],n=arguments[1];t.prototype.query.call(this,r,n)}else if(3===arguments.length)if(yl(arguments[2],$h)&&arguments[0]instanceof Object&&arguments[1]instanceof ef){var i=arguments[0],o=arguments[1],s=arguments[2];t.prototype.query.call(this,i,o,s)}else if(yl(arguments[2],uc)&&arguments[0]instanceof Object&&arguments[1]instanceof ef){var a=arguments[0],u=arguments[1],l=arguments[2];t.prototype.query.call(this,a,u,l)}},e.prototype.getComparator=function(){return e.yComparator},e.prototype.createParentBoundablesFromVerticalSlice=function(e,r){return t.prototype.createParentBoundables.call(this,e,r)},e.prototype.remove=function(){if(2===arguments.length){var e=arguments[0],r=arguments[1];return t.prototype.remove.call(this,e,r)}return t.prototype.remove.apply(this,arguments)},e.prototype.depth=function(){return 0===arguments.length?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},e.prototype.createParentBoundables=function(t,r){Bl.isTrue(!t.isEmpty());var n=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),i=new cc(t);nf.sort(i,e.xComparator);var o=this.verticalSlices(i,Math.trunc(Math.ceil(Math.sqrt(n))));return this.createParentBoundablesFromVerticalSlices(o,r)},e.prototype.nearestNeighbour=function(){if(1===arguments.length){if(yl(arguments[0],lf)){var t=arguments[0],r=new of(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(r)}if(arguments[0]instanceof of){var n=arguments[0];return this.nearestNeighbour(n,nl.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof e&&yl(arguments[1],lf)){var i=arguments[0],o=arguments[1],s=new of(this.getRoot(),i.getRoot(),o);return this.nearestNeighbour(s)}if(arguments[0]instanceof of&&"number"==typeof arguments[1]){var a=arguments[0],u=arguments[1],l=u,c=null,h=new Kh;for(h.add(a);!h.isEmpty()&&l>0;){var f=h.poll(),p=f.getDistance();if(p>=l)break;f.isLeaves()?(l=p,c=f):f.expandToQueue(h,l)}return[c.getBoundable(0).getItem(),c.getBoundable(1).getItem()]}}else if(3===arguments.length){var d=arguments[0],y=arguments[1],v=arguments[2],g=new Qh(d,y),m=new of(this.getRoot(),g,v);return this.nearestNeighbour(m)[0]}},e.prototype.interfaces_=function(){return[tf,ul]},e.prototype.getClass=function(){return e},e.centreX=function(t){return e.avg(t.getMinX(),t.getMaxX())},e.avg=function(t,e){return(t+e)/2},e.centreY=function(t){return e.avg(t.getMinY(),t.getMaxY())},r.STRtreeNode.get=function(){return hf},r.serialVersionUID.get=function(){return 0x39920f7d5f261e0},r.xComparator.get=function(){return{interfaces_:function(){return[al]},compare:function(r,n){return t.compareDoubles(e.centreX(r.getBounds()),e.centreX(n.getBounds()))}}},r.yComparator.get=function(){return{interfaces_:function(){return[al]},compare:function(r,n){return t.compareDoubles(e.centreY(r.getBounds()),e.centreY(n.getBounds()))}}},r.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(t,e){return t.intersects(e)}}},r.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(e,r),e}(sf),hf=function(t){function e(){var e=arguments[0];t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.computeBounds=function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var r=e.next();null===t?t=new Tl(r.getBounds()):t.expandToInclude(r.getBounds())}return t},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ef),ff=function(){};ff.prototype.interfaces_=function(){return[]},ff.prototype.getClass=function(){return ff},ff.relativeSign=function(t,e){return t<e?-1:t>e?1:0},ff.compare=function(t,e,r){if(e.equals2D(r))return 0;var n=ff.relativeSign(e.x,r.x),i=ff.relativeSign(e.y,r.y);switch(t){case 0:return ff.compareValue(n,i);case 1:return ff.compareValue(i,n);case 2:return ff.compareValue(i,-n);case 3:return ff.compareValue(-n,i);case 4:return ff.compareValue(-n,-i);case 5:return ff.compareValue(-i,-n);case 6:return ff.compareValue(-i,n);case 7:return ff.compareValue(n,-i)}return Bl.shouldNeverReachHere("invalid octant value"),0},ff.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0};var pf=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3];this._segString=t,this.coord=new ll(e),this.segmentIndex=r,this._segmentOctant=n,this._isInterior=!e.equals2D(t.getCoordinate(r))};pf.prototype.getCoordinate=function(){return this.coord},pf.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},pf.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:ff.compare(this._segmentOctant,this.coord,e.coord)},pf.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},pf.prototype.isInterior=function(){return this._isInterior},pf.prototype.interfaces_=function(){return[ol]},pf.prototype.getClass=function(){return pf};var df=function(){this._nodeMap=new Mc,this._edge=null;var t=arguments[0];this._edge=t};df.prototype.getSplitCoordinates=function(){var t=new fc;this.addEndpoints();for(var e=this.iterator(),r=e.next();e.hasNext();){var n=e.next();this.addEdgeCoordinates(r,n,t),r=n}return t.toCoordinateArray()},df.prototype.addCollapsedNodes=function(){var t=new cc;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var r=e.next().intValue();this.add(this._edge.getCoordinate(r),r)}},df.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();){e.next().print(t)}},df.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var r=this._edge.getCoordinate(e),n=this._edge.getCoordinate(e+2);r.equals2D(n)&&t.add(new _l(e+1))}},df.prototype.addEdgeCoordinates=function(t,e,r){var n=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(n);r.add(new ll(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)r.add(this._edge.getCoordinate(o));i&&r.add(new ll(e.coord))},df.prototype.iterator=function(){return this._nodeMap.values().iterator()},df.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),r=e.next();e.hasNext();){var n=e.next(),i=this.createSplitEdge(r,n);t.add(i),r=n}},df.prototype.findCollapseIndex=function(t,e,r){if(!t.coord.equals2D(e.coord))return!1;var n=e.segmentIndex-t.segmentIndex;return e.isInterior()||n--,1===n&&(r[0]=t.segmentIndex+1,!0)},df.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),r=this.iterator(),n=r.next();r.hasNext();){var i=r.next();this.findCollapseIndex(n,i,e)&&t.add(new _l(e[0])),n=i}},df.prototype.getEdge=function(){return this._edge},df.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},df.prototype.createSplitEdge=function(t,e){var r=e.segmentIndex-t.segmentIndex+2,n=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(n);i||r--;var o=new Array(r).fill(null),s=0;o[s++]=new ll(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this._edge.getCoordinate(a);return i&&(o[s]=new ll(e.coord)),new mf(o,this._edge.getData())},df.prototype.add=function(t,e){var r=new pf(this._edge,t,e,this._edge.getSegmentOctant(e)),n=this._nodeMap.get(r);return null!==n?(Bl.isTrue(n.coord.equals2D(t),"Found equal nodes with different coordinates"),n):(this._nodeMap.put(r,r),r)},df.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),r=t.get(0).getCoordinate(0);if(!r.equals2D(e[0]))throw new jl("bad split edge start point at "+r);var n=t.get(t.size()-1).getCoordinates(),i=n[n.length-1];if(!i.equals2D(e[e.length-1]))throw new jl("bad split edge end point at "+i)},df.prototype.interfaces_=function(){return[]},df.prototype.getClass=function(){return df};var yf=function(){};yf.prototype.interfaces_=function(){return[]},yf.prototype.getClass=function(){return yf},yf.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new rl("Cannot compute the octant for point ( "+t+", "+e+" )");var r=Math.abs(t),n=Math.abs(e);return t>=0?e>=0?r>=n?0:1:r>=n?7:6:e>=0?r>=n?3:2:r>=n?4:5}if(arguments[0]instanceof ll&&arguments[1]instanceof ll){var i=arguments[0],o=arguments[1],s=o.x-i.x,a=o.y-i.y;if(0===s&&0===a)throw new rl("Cannot compute the octant for two identical points "+i);return yf.octant(s,a)}};var vf=function(){};vf.prototype.getCoordinates=function(){},vf.prototype.size=function(){},vf.prototype.getCoordinate=function(t){},vf.prototype.isClosed=function(){},vf.prototype.setData=function(t){},vf.prototype.getData=function(){},vf.prototype.interfaces_=function(){return[]},vf.prototype.getClass=function(){return vf};var gf=function(){};gf.prototype.addIntersection=function(t,e){},gf.prototype.interfaces_=function(){return[vf]},gf.prototype.getClass=function(){return gf};var mf=function(){this._nodeList=new df(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};mf.prototype.getCoordinates=function(){return this._pts},mf.prototype.size=function(){return this._pts.length},mf.prototype.getCoordinate=function(t){return this._pts[t]},mf.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},mf.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},mf.prototype.setData=function(t){this._data=t},mf.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:yf.octant(t,e)},mf.prototype.getData=function(){return this._data},mf.prototype.addIntersection=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var r=arguments[0],n=arguments[1],i=arguments[3],o=new ll(r.getIntersection(i));this.addIntersection(o,n)}},mf.prototype.toString=function(){return kl.toLineString(new ch(this._pts))},mf.prototype.getNodeList=function(){return this._nodeList},mf.prototype.addIntersectionNode=function(t,e){var r=e,n=r+1;if(n<this._pts.length){var i=this._pts[n];t.equals2D(i)&&(r=n)}return this._nodeList.add(t,r)},mf.prototype.addIntersections=function(t,e,r){for(var n=0;n<t.getIntersectionNum();n++)this.addIntersection(t,e,r,n)},mf.prototype.interfaces_=function(){return[gf]},mf.prototype.getClass=function(){return mf},mf.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new cc;return mf.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var r=arguments[0],n=arguments[1],i=r.iterator();i.hasNext();){var o=i.next();o.getNodeList().addSplitEdges(n)}};var _f=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new ll,this.p1=new ll;else if(1===arguments.length){var t=arguments[0];this.p0=new ll(t.p0),this.p1=new ll(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var e=arguments[0],r=arguments[1],n=arguments[2],i=arguments[3];this.p0=new ll(e,r),this.p1=new ll(n,i)}},bf={serialVersionUID:{configurable:!0}};_f.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},_f.prototype.orientationIndex=function(){if(arguments[0]instanceof _f){var t=arguments[0],e=Hl.orientationIndex(this.p0,this.p1,t.p0),r=Hl.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&r>=0||e<=0&&r<=0?Math.max(e,r):0}if(arguments[0]instanceof ll){var n=arguments[0];return Hl.orientationIndex(this.p0,this.p1,n)}},_f.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},_f.prototype.isVertical=function(){return this.p0.x===this.p1.x},_f.prototype.equals=function(t){if(!(t instanceof _f))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},_f.prototype.intersection=function(t){var e=new zl;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},_f.prototype.project=function(){if(arguments[0]instanceof ll){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new ll(t);var e=this.projectionFactor(t),r=new ll;return r.x=this.p0.x+e*(this.p1.x-this.p0.x),r.y=this.p0.y+e*(this.p1.y-this.p0.y),r}if(arguments[0]instanceof _f){var n=arguments[0],i=this.projectionFactor(n.p0),o=this.projectionFactor(n.p1);if(i>=1&&o>=1)return null;if(i<=0&&o<=0)return null;var s=this.project(n.p0);i<0&&(s=this.p0),i>1&&(s=this.p1);var a=this.project(n.p1);return o<0&&(a=this.p0),o>1&&(a=this.p1),new _f(s,a)}},_f.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},_f.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},_f.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},_f.prototype.distancePerpendicular=function(t){return Hl.distancePointLinePerpendicular(t,this.p0,this.p1)},_f.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},_f.prototype.midPoint=function(){return _f.midPoint(this.p0,this.p1)},_f.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,r=this.p1.y-this.p0.y,n=e*e+r*r;return n<=0?nl.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*r)/n},_f.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var r=new Array(2).fill(null),n=nl.MAX_VALUE,i=null,o=this.closestPoint(t.p0);n=o.distance(t.p0),r[0]=o,r[1]=t.p0;var s=this.closestPoint(t.p1);(i=s.distance(t.p1))<n&&(n=i,r[0]=s,r[1]=t.p1);var a=t.closestPoint(this.p0);(i=a.distance(this.p0))<n&&(n=i,r[0]=this.p0,r[1]=a);var u=t.closestPoint(this.p1);return(i=u.distance(this.p1))<n&&(n=i,r[0]=this.p1,r[1]=u),r},_f.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},_f.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},_f.prototype.getLength=function(){return this.p0.distance(this.p1)},_f.prototype.compareTo=function(t){var e=t,r=this.p0.compareTo(e.p0);return 0!==r?r:this.p1.compareTo(e.p1)},_f.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},_f.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},_f.prototype.lineIntersection=function(t){try{return Nl.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof Ml))throw t}return null},_f.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},_f.prototype.pointAlongOffset=function(t,e){var r=this.p0.x+t*(this.p1.x-this.p0.x),n=this.p0.y+t*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,s=Math.sqrt(i*i+o*o),a=0,u=0;if(0!==e){if(s<=0)throw new Error("Cannot compute offset from zero-length line segment");a=e*i/s,u=e*o/s}return new ll(r-u,n+a)},_f.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],r=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=r.x,this.p1.y=r.y}},_f.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||nl.isNaN(e))&&(e=1),e},_f.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},_f.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},_f.prototype.distance=function(){if(arguments[0]instanceof _f){var t=arguments[0];return Hl.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof ll){var e=arguments[0];return Hl.distancePointLine(e,this.p0,this.p1)}},_f.prototype.pointAlong=function(t){var e=new ll;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},_f.prototype.hashCode=function(){var t=nl.doubleToLongBits(this.p0.x);t^=31*nl.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),r=nl.doubleToLongBits(this.p1.x);return r^=31*nl.doubleToLongBits(this.p1.y),e^(Math.trunc(r)^Math.trunc(r>>32))},_f.prototype.interfaces_=function(){return[ol,ul]},_f.prototype.getClass=function(){return _f},_f.midPoint=function(t,e){return new ll((t.x+e.x)/2,(t.y+e.y)/2)},bf.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(_f,bf);var xf=function(){this.tempEnv1=new Tl,this.tempEnv2=new Tl,this._overlapSeg1=new _f,this._overlapSeg2=new _f};xf.prototype.overlap=function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3];t.getLineSegment(e,this._overlapSeg1),r.getLineSegment(n,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},xf.prototype.interfaces_=function(){return[]},xf.prototype.getClass=function(){return xf};var Sf=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3];this._pts=t,this._start=e,this._end=r,this._context=n};Sf.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},Sf.prototype.computeSelect=function(t,e,r,n){var i=this._pts[e],o=this._pts[r];if(n.tempEnv1.init(i,o),r-e==1)return n.select(this,e),null;if(!t.intersects(n.tempEnv1))return null;var s=Math.trunc((e+r)/2);e<s&&this.computeSelect(t,e,s,n),s<r&&this.computeSelect(t,s,r,n)},Sf.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,r=this._start;r<=this._end;r++)t[e++]=this._pts[r];return t},Sf.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},Sf.prototype.setId=function(t){this._id=t},Sf.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},Sf.prototype.getEnvelope=function(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end];this._env=new Tl(t,e)}return this._env},Sf.prototype.getEndIndex=function(){return this._end},Sf.prototype.getStartIndex=function(){return this._start},Sf.prototype.getContext=function(){return this._context},Sf.prototype.getId=function(){return this._id},Sf.prototype.computeOverlapsInternal=function(t,e,r,n,i,o){var s=this._pts[t],a=this._pts[e],u=r._pts[n],l=r._pts[i];if(e-t==1&&i-n==1)return o.overlap(this,t,r,n),null;if(o.tempEnv1.init(s,a),o.tempEnv2.init(u,l),!o.tempEnv1.intersects(o.tempEnv2))return null;var c=Math.trunc((t+e)/2),h=Math.trunc((n+i)/2);t<c&&(n<h&&this.computeOverlapsInternal(t,c,r,n,h,o),h<i&&this.computeOverlapsInternal(t,c,r,h,i,o)),c<e&&(n<h&&this.computeOverlapsInternal(c,e,r,n,h,o),h<i&&this.computeOverlapsInternal(c,e,r,h,i,o))},Sf.prototype.interfaces_=function(){return[]},Sf.prototype.getClass=function(){return Sf};var wf=function(){};wf.prototype.interfaces_=function(){return[]},wf.prototype.getClass=function(){return wf},wf.getChainStartIndices=function(t){var e=0,r=new cc;r.add(new _l(e));do{var n=wf.findChainEnd(t,e);r.add(new _l(n)),e=n}while(e<t.length-1);return wf.toIntArray(r)},wf.findChainEnd=function(t,e){for(var r=e;r<t.length-1&&t[r].equals2D(t[r+1]);)r++;if(r>=t.length-1)return t.length-1;for(var n=zh.quadrant(t[r],t[r+1]),i=e+1;i<t.length;){if(!t[i-1].equals2D(t[i]))if(zh.quadrant(t[i-1],t[i])!==n)break;i++}return i-1},wf.getChains=function(){if(1===arguments.length){var t=arguments[0];return wf.getChains(t,null)}if(2===arguments.length){for(var e=arguments[0],r=arguments[1],n=new cc,i=wf.getChainStartIndices(e),o=0;o<i.length-1;o++){var s=new Sf(e,i[o],i[o+1],r);n.add(s)}return n}},wf.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),r=0;r<e.length;r++)e[r]=t.get(r).intValue();return e};var Cf=function(){};Cf.prototype.computeNodes=function(t){},Cf.prototype.getNodedSubstrings=function(){},Cf.prototype.interfaces_=function(){return[]},Cf.prototype.getClass=function(){return Cf};var If=function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}};If.prototype.setSegmentIntersector=function(t){this._segInt=t},If.prototype.interfaces_=function(){return[Cf]},If.prototype.getClass=function(){return If};var Ef=function(t){function e(e){e?t.call(this,e):t.call(this),this._monoChains=new cc,this._index=new cf,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return mf.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(t){for(var e=this,r=wf.getChains(t.getCoordinates(),t).iterator();r.hasNext();){var n=r.next();n.setId(e._idCounter++),e._index.insert(n.getEnvelope(),n),e._monoChains.add(n)}},e.prototype.computeNodes=function(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var t=this,e=new Pf(this._segInt),r=this._monoChains.iterator();r.hasNext();)for(var n=r.next(),i=t._index.query(n.getEnvelope()).iterator();i.hasNext();){var o=i.next();if(o.getId()>n.getId()&&(n.computeOverlaps(o,e),t._nOverlaps++),t._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},r.SegmentOverlapAction.get=function(){return Pf},Object.defineProperties(e,r),e}(If),Pf=function(t){function e(){t.call(this),this._si=null;var e=arguments[0];this._si=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.overlap=function(){if(4!==arguments.length)return t.prototype.overlap.apply(this,arguments);var e=arguments[0],r=arguments[1],n=arguments[2],i=arguments[3],o=e.getContext(),s=n.getContext();this._si.processIntersections(o,r,s,i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(xf),Mf=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.setQuadrantSegments(e)}else if(2===arguments.length){var r=arguments[0],n=arguments[1];this.setQuadrantSegments(r),this.setEndCapStyle(n)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(o),this.setJoinStyle(s),this.setMitreLimit(a)}},Lf={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};Mf.prototype.getEndCapStyle=function(){return this._endCapStyle},Mf.prototype.isSingleSided=function(){return this._isSingleSided},Mf.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=Mf.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=Mf.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==Mf.JOIN_ROUND&&(this._quadrantSegments=Mf.DEFAULT_QUADRANT_SEGMENTS)},Mf.prototype.getJoinStyle=function(){return this._joinStyle},Mf.prototype.setJoinStyle=function(t){this._joinStyle=t},Mf.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},Mf.prototype.getSimplifyFactor=function(){return this._simplifyFactor},Mf.prototype.getQuadrantSegments=function(){return this._quadrantSegments},Mf.prototype.setEndCapStyle=function(t){this._endCapStyle=t},Mf.prototype.getMitreLimit=function(){return this._mitreLimit},Mf.prototype.setMitreLimit=function(t){this._mitreLimit=t},Mf.prototype.setSingleSided=function(t){this._isSingleSided=t},Mf.prototype.interfaces_=function(){return[]},Mf.prototype.getClass=function(){return Mf},Mf.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},Lf.CAP_ROUND.get=function(){return 1},Lf.CAP_FLAT.get=function(){return 2},Lf.CAP_SQUARE.get=function(){return 3},Lf.JOIN_ROUND.get=function(){return 1},Lf.JOIN_MITRE.get=function(){return 2},Lf.JOIN_BEVEL.get=function(){return 3},Lf.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},Lf.DEFAULT_MITRE_LIMIT.get=function(){return 5},Lf.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(Mf,Lf);var Nf=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=Hl.COUNTERCLOCKWISE,this._inputLine=t||null},Tf={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Nf.prototype.isDeletable=function(t,e,r,n){var i=this._inputLine[t],o=this._inputLine[e],s=this._inputLine[r];return!!this.isConcave(i,o,s)&&(!!this.isShallow(i,o,s,n)&&this.isShallowSampled(i,o,t,r,n))},Nf.prototype.deleteShallowConcavities=function(){for(var t=this,e=1,r=this.findNextNonDeletedIndex(e),n=this.findNextNonDeletedIndex(r),i=!1;n<this._inputLine.length;){var o=!1;t.isDeletable(e,r,n,t._distanceTol)&&(t._isDeleted[r]=Nf.DELETE,o=!0,i=!0),e=o?n:r,r=t.findNextNonDeletedIndex(e),n=t.findNextNonDeletedIndex(r)}return i},Nf.prototype.isShallowConcavity=function(t,e,r,n){return Hl.computeOrientation(t,e,r)===this._angleOrientation&&Hl.distancePointLine(e,t,r)<n},Nf.prototype.isShallowSampled=function(t,e,r,n,i){var o=Math.trunc((n-r)/Nf.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var s=r;s<n;s+=o)if(!this.isShallow(t,e,this._inputLine[s],i))return!1;return!0},Nf.prototype.isConcave=function(t,e,r){var n=Hl.computeOrientation(t,e,r)===this._angleOrientation;return n},Nf.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=Hl.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()},Nf.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===Nf.DELETE;)e++;return e},Nf.prototype.isShallow=function(t,e,r,n){return Hl.distancePointLine(e,t,r)<n},Nf.prototype.collapseLine=function(){for(var t=new fc,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==Nf.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},Nf.prototype.interfaces_=function(){return[]},Nf.prototype.getClass=function(){return Nf},Nf.simplify=function(t,e){return new Nf(t).simplify(e)},Tf.INIT.get=function(){return 0},Tf.DELETE.get=function(){return 1},Tf.KEEP.get=function(){return 1},Tf.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(Nf,Tf);var Of=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new cc},Af={COORDINATE_ARRAY_TYPE:{configurable:!0}};Of.prototype.getCoordinates=function(){return this._ptList.toArray(Of.COORDINATE_ARRAY_TYPE)},Of.prototype.setPrecisionModel=function(t){this._precisionModel=t},Of.prototype.addPt=function(t){var e=new ll(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},Of.prototype.revere=function(){},Of.prototype.addPts=function(t,e){if(e)for(var r=0;r<t.length;r++)this.addPt(t[r]);else for(var n=t.length-1;n>=0;n--)this.addPt(t[n])},Of.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},Of.prototype.toString=function(){return(new _h).createLineString(this.getCoordinates()).toString()},Of.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new ll(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},Of.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},Of.prototype.interfaces_=function(){return[]},Of.prototype.getClass=function(){return Of},Af.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(Of,Af);var Rf=function(){},Ff={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};Rf.prototype.interfaces_=function(){return[]},Rf.prototype.getClass=function(){return Rf},Rf.toDegrees=function(t){return 180*t/Math.PI},Rf.normalize=function(t){for(;t>Math.PI;)t-=Rf.PI_TIMES_2;for(;t<=-Math.PI;)t+=Rf.PI_TIMES_2;return t},Rf.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],r=arguments[1],n=r.x-e.x,i=r.y-e.y;return Math.atan2(i,n)}},Rf.isAcute=function(t,e,r){var n=t.x-e.x,i=t.y-e.y;return n*(r.x-e.x)+i*(r.y-e.y)>0},Rf.isObtuse=function(t,e,r){var n=t.x-e.x,i=t.y-e.y;return n*(r.x-e.x)+i*(r.y-e.y)<0},Rf.interiorAngle=function(t,e,r){var n=Rf.angle(e,t),i=Rf.angle(e,r);return Math.abs(i-n)},Rf.normalizePositive=function(t){if(t<0){for(;t<0;)t+=Rf.PI_TIMES_2;t>=Rf.PI_TIMES_2&&(t=0)}else{for(;t>=Rf.PI_TIMES_2;)t-=Rf.PI_TIMES_2;t<0&&(t=0)}return t},Rf.angleBetween=function(t,e,r){var n=Rf.angle(e,t),i=Rf.angle(e,r);return Rf.diff(n,i)},Rf.diff=function(t,e){var r=null;return(r=t<e?e-t:t-e)>Math.PI&&(r=2*Math.PI-r),r},Rf.toRadians=function(t){return t*Math.PI/180},Rf.getTurn=function(t,e){var r=Math.sin(e-t);return r>0?Rf.COUNTERCLOCKWISE:r<0?Rf.CLOCKWISE:Rf.NONE},Rf.angleBetweenOriented=function(t,e,r){var n=Rf.angle(e,t),i=Rf.angle(e,r)-n;return i<=-Math.PI?i+Rf.PI_TIMES_2:i>Math.PI?i-Rf.PI_TIMES_2:i},Ff.PI_TIMES_2.get=function(){return 2*Math.PI},Ff.PI_OVER_2.get=function(){return Math.PI/2},Ff.PI_OVER_4.get=function(){return Math.PI/4},Ff.COUNTERCLOCKWISE.get=function(){return Hl.COUNTERCLOCKWISE},Ff.CLOCKWISE.get=function(){return Hl.CLOCKWISE},Ff.NONE.get=function(){return Hl.COLLINEAR},Object.defineProperties(Rf,Ff);var Df=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new _f,this._seg1=new _f,this._offset0=new _f,this._offset1=new _f,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[0],r=arguments[1],n=arguments[2];this._precisionModel=e,this._bufParams=r,this._li=new zl,this._filletAngleQuantum=Math.PI/2/r.getQuadrantSegments(),r.getQuadrantSegments()>=8&&r.getJoinStyle()===Mf.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(n)},kf={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};Df.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var r=Hl.computeOrientation(this._s0,this._s1,this._s2),n=r===Hl.CLOCKWISE&&this._side===Ph.LEFT||r===Hl.COUNTERCLOCKWISE&&this._side===Ph.RIGHT;0===r?this.addCollinear(e):n?this.addOutsideTurn(r,e):this.addInsideTurn(r,e)},Df.prototype.addLineEndCap=function(t,e){var r=new _f(t,e),n=new _f;this.computeOffsetSegment(r,Ph.LEFT,this._distance,n);var i=new _f;this.computeOffsetSegment(r,Ph.RIGHT,this._distance,i);var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o);switch(this._bufParams.getEndCapStyle()){case Mf.CAP_ROUND:this._segList.addPt(n.p1),this.addFilletArc(e,a+Math.PI/2,a-Math.PI/2,Hl.CLOCKWISE,this._distance),this._segList.addPt(i.p1);break;case Mf.CAP_FLAT:this._segList.addPt(n.p1),this._segList.addPt(i.p1);break;case Mf.CAP_SQUARE:var u=new ll;u.x=Math.abs(this._distance)*Math.cos(a),u.y=Math.abs(this._distance)*Math.sin(a);var l=new ll(n.p1.x+u.x,n.p1.y+u.y),c=new ll(i.p1.x+u.x,i.p1.y+u.y);this._segList.addPt(l),this._segList.addPt(c)}},Df.prototype.getCoordinates=function(){return this._segList.getCoordinates()},Df.prototype.addMitreJoin=function(t,e,r,n){var i=!0,o=null;try{o=Nl.intersection(e.p0,e.p1,r.p0,r.p1),(n<=0?1:o.distance(t)/Math.abs(n))>this._bufParams.getMitreLimit()&&(i=!1)}catch(t){if(!(t instanceof Ml))throw t;o=new ll(0,0),i=!1}i?this._segList.addPt(o):this.addLimitedMitreJoin(e,r,n,this._bufParams.getMitreLimit())},Df.prototype.addFilletCorner=function(t,e,r,n,i){var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o),u=r.x-t.x,l=r.y-t.y,c=Math.atan2(l,u);n===Hl.CLOCKWISE?a<=c&&(a+=2*Math.PI):a>=c&&(a-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,a,c,n,i),this._segList.addPt(r)},Df.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*Df.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===Mf.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Mf.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},Df.prototype.createSquare=function(t){this._segList.addPt(new ll(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new ll(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new ll(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new ll(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},Df.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},Df.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},Df.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},Df.prototype.initSideSegments=function(t,e,r){this._s1=t,this._s2=e,this._side=r,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,r,this._distance,this._offset1)},Df.prototype.addLimitedMitreJoin=function(t,e,r,n){var i=this._seg0.p1,o=Rf.angle(i,this._seg0.p0),s=Rf.angleBetweenOriented(this._seg0.p0,i,this._seg1.p1)/2,a=Rf.normalize(o+s),u=Rf.normalize(a+Math.PI),l=n*r,c=r-l*Math.abs(Math.sin(s)),h=i.x+l*Math.cos(u),f=i.y+l*Math.sin(u),p=new ll(h,f),d=new _f(i,p),y=d.pointAlongOffset(1,c),v=d.pointAlongOffset(1,-c);this._side===Ph.LEFT?(this._segList.addPt(y),this._segList.addPt(v)):(this._segList.addPt(v),this._segList.addPt(y))},Df.prototype.computeOffsetSegment=function(t,e,r,n){var i=e===Ph.LEFT?1:-1,o=t.p1.x-t.p0.x,s=t.p1.y-t.p0.y,a=Math.sqrt(o*o+s*s),u=i*r*o/a,l=i*r*s/a;n.p0.x=t.p0.x-l,n.p0.y=t.p0.y+u,n.p1.x=t.p1.x-l,n.p1.y=t.p1.y+u},Df.prototype.addFilletArc=function(t,e,r,n,i){var o=n===Hl.CLOCKWISE?-1:1,s=Math.abs(e-r),a=Math.trunc(s/this._filletAngleQuantum+.5);if(a<1)return null;for(var u=s/a,l=0,c=new ll;l<s;){var h=e+o*l;c.x=t.x+i*Math.cos(h),c.y=t.y+i*Math.sin(h),this._segList.addPt(c),l+=u}},Df.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*Df.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var r=new ll((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r);var n=new ll((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},Df.prototype.createCircle=function(t){var e=new ll(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},Df.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},Df.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Of,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*Df.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},Df.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===Mf.JOIN_BEVEL||this._bufParams.getJoinStyle()===Mf.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,Hl.CLOCKWISE,this._distance))},Df.prototype.closeRing=function(){this._segList.closeRing()},Df.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},Df.prototype.interfaces_=function(){return[]},Df.prototype.getClass=function(){return Df},kf.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},kf.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},kf.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},kf.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(Df,kf);var jf=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e};jf.prototype.getOffsetCurve=function(t,e){if(this._distance=e,0===e)return null;var r=e<0,n=Math.abs(e),i=this.getSegGen(n);t.length<=1?this.computePointCurve(t[0],i):this.computeOffsetCurve(t,r,i);var o=i.getCoordinates();return r&&pc.reverse(o),o},jf.prototype.computeSingleSidedBufferCurve=function(t,e,r){var n=this.simplifyTolerance(this._distance);if(e){r.addSegments(t,!0);var i=Nf.simplify(t,-n),o=i.length-1;r.initSideSegments(i[o],i[o-1],Ph.LEFT),r.addFirstSegment();for(var s=o-2;s>=0;s--)r.addNextSegment(i[s],!0)}else{r.addSegments(t,!1);var a=Nf.simplify(t,n),u=a.length-1;r.initSideSegments(a[0],a[1],Ph.LEFT),r.addFirstSegment();for(var l=2;l<=u;l++)r.addNextSegment(a[l],!0)}r.addLastSegment(),r.closeRing()},jf.prototype.computeRingBufferCurve=function(t,e,r){var n=this.simplifyTolerance(this._distance);e===Ph.RIGHT&&(n=-n);var i=Nf.simplify(t,n),o=i.length-1;r.initSideSegments(i[o-1],i[0],e);for(var s=1;s<=o;s++){var a=1!==s;r.addNextSegment(i[s],a)}r.closeRing()},jf.prototype.computeLineBufferCurve=function(t,e){var r=this.simplifyTolerance(this._distance),n=Nf.simplify(t,r),i=n.length-1;e.initSideSegments(n[0],n[1],Ph.LEFT);for(var o=2;o<=i;o++)e.addNextSegment(n[o],!0);e.addLastSegment(),e.addLineEndCap(n[i-1],n[i]);var s=Nf.simplify(t,-r),a=s.length-1;e.initSideSegments(s[a],s[a-1],Ph.LEFT);for(var u=a-2;u>=0;u--)e.addNextSegment(s[u],!0);e.addLastSegment(),e.addLineEndCap(s[1],s[0]),e.closeRing()},jf.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case Mf.CAP_ROUND:e.createCircle(t);break;case Mf.CAP_SQUARE:e.createSquare(t)}},jf.prototype.getLineCurve=function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided())return null;if(0===e)return null;var r=Math.abs(e),n=this.getSegGen(r);if(t.length<=1)this.computePointCurve(t[0],n);else if(this._bufParams.isSingleSided()){var i=e<0;this.computeSingleSidedBufferCurve(t,i,n)}else this.computeLineBufferCurve(t,n);return n.getCoordinates()},jf.prototype.getBufferParameters=function(){return this._bufParams},jf.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},jf.prototype.getRingCurve=function(t,e,r){if(this._distance=r,t.length<=2)return this.getLineCurve(t,r);if(0===r)return jf.copyCoordinates(t);var n=this.getSegGen(r);return this.computeRingBufferCurve(t,e,n),n.getCoordinates()},jf.prototype.computeOffsetCurve=function(t,e,r){var n=this.simplifyTolerance(this._distance);if(e){var i=Nf.simplify(t,-n),o=i.length-1;r.initSideSegments(i[o],i[o-1],Ph.LEFT),r.addFirstSegment();for(var s=o-2;s>=0;s--)r.addNextSegment(i[s],!0)}else{var a=Nf.simplify(t,n),u=a.length-1;r.initSideSegments(a[0],a[1],Ph.LEFT),r.addFirstSegment();for(var l=2;l<=u;l++)r.addNextSegment(a[l],!0)}r.addLastSegment()},jf.prototype.getSegGen=function(t){return new Df(this._precisionModel,this._bufParams,t)},jf.prototype.interfaces_=function(){return[]},jf.prototype.getClass=function(){return jf},jf.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),r=0;r<e.length;r++)e[r]=new ll(t[r]);return e};var Gf=function(){this._subgraphs=null,this._seg=new _f,this._cga=new Hl;var t=arguments[0];this._subgraphs=t},Bf={DepthSegment:{configurable:!0}};Gf.prototype.findStabbedSegments=function(){var t=this;if(1===arguments.length){for(var e=arguments[0],r=new cc,n=this._subgraphs.iterator();n.hasNext();){var i=n.next(),o=i.getEnvelope();e.y<o.getMinY()||e.y>o.getMaxY()||t.findStabbedSegments(e,i.getDirectedEdges(),r)}return r}if(3===arguments.length)if(yl(arguments[2],uc)&&arguments[0]instanceof ll&&arguments[1]instanceof Hh)for(var s=arguments[0],a=arguments[1],u=arguments[2],l=a.getEdge().getCoordinates(),c=0;c<l.length-1;c++){t._seg.p0=l[c],t._seg.p1=l[c+1],t._seg.p0.y>t._seg.p1.y&&t._seg.reverse();var h=Math.max(t._seg.p0.x,t._seg.p1.x);if(!(h<s.x)&&!(t._seg.isHorizontal()||s.y<t._seg.p0.y||s.y>t._seg.p1.y||Hl.computeOrientation(t._seg.p0,t._seg.p1,s)===Hl.RIGHT)){var f=a.getDepth(Ph.LEFT);t._seg.p0.equals(l[c])||(f=a.getDepth(Ph.RIGHT));var p=new Uf(t._seg,f);u.add(p)}}else if(yl(arguments[2],uc)&&arguments[0]instanceof ll&&yl(arguments[1],uc))for(var d=arguments[0],y=arguments[1],v=arguments[2],g=y.iterator();g.hasNext();){var m=g.next();m.isForward()&&t.findStabbedSegments(d,m,v)}},Gf.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:nf.min(e)._leftDepth},Gf.prototype.interfaces_=function(){return[]},Gf.prototype.getClass=function(){return Gf},Bf.DepthSegment.get=function(){return Uf},Object.defineProperties(Gf,Bf);var Uf=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new _f(t),this._leftDepth=e};Uf.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var r=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==r||0!==(r=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?r:this._upwardSeg.compareTo(e._upwardSeg)},Uf.prototype.compareX=function(t,e){var r=t.p0.compareTo(e.p0);return 0!==r?r:t.p1.compareTo(e.p1)},Uf.prototype.toString=function(){return this._upwardSeg.toString()},Uf.prototype.interfaces_=function(){return[ol]},Uf.prototype.getClass=function(){return Uf};var qf=function(t,e,r){this.p0=t||null,this.p1=e||null,this.p2=r||null};qf.prototype.area=function(){return qf.area(this.p0,this.p1,this.p2)},qf.prototype.signedArea=function(){return qf.signedArea(this.p0,this.p1,this.p2)},qf.prototype.interpolateZ=function(t){if(null===t)throw new rl("Supplied point is null.");return qf.interpolateZ(t,this.p0,this.p1,this.p2)},qf.prototype.longestSideLength=function(){return qf.longestSideLength(this.p0,this.p1,this.p2)},qf.prototype.isAcute=function(){return qf.isAcute(this.p0,this.p1,this.p2)},qf.prototype.circumcentre=function(){return qf.circumcentre(this.p0,this.p1,this.p2)},qf.prototype.area3D=function(){return qf.area3D(this.p0,this.p1,this.p2)},qf.prototype.centroid=function(){return qf.centroid(this.p0,this.p1,this.p2)},qf.prototype.inCentre=function(){return qf.inCentre(this.p0,this.p1,this.p2)},qf.prototype.interfaces_=function(){return[]},qf.prototype.getClass=function(){return qf},qf.area=function(t,e,r){return Math.abs(((r.x-t.x)*(e.y-t.y)-(e.x-t.x)*(r.y-t.y))/2)},qf.signedArea=function(t,e,r){return((r.x-t.x)*(e.y-t.y)-(e.x-t.x)*(r.y-t.y))/2},qf.det=function(t,e,r,n){return t*n-e*r},qf.interpolateZ=function(t,e,r,n){var i=e.x,o=e.y,s=r.x-i,a=n.x-i,u=r.y-o,l=n.y-o,c=s*l-a*u,h=t.x-i,f=t.y-o,p=(l*h-a*f)/c,d=(-u*h+s*f)/c;return e.z+p*(r.z-e.z)+d*(n.z-e.z)},qf.longestSideLength=function(t,e,r){var n=t.distance(e),i=e.distance(r),o=r.distance(t),s=n;return i>s&&(s=i),o>s&&(s=o),s},qf.isAcute=function(t,e,r){return!!Rf.isAcute(t,e,r)&&(!!Rf.isAcute(e,r,t)&&!!Rf.isAcute(r,t,e))},qf.circumcentre=function(t,e,r){var n=r.x,i=r.y,o=t.x-n,s=t.y-i,a=e.x-n,u=e.y-i,l=2*qf.det(o,s,a,u),c=qf.det(s,o*o+s*s,u,a*a+u*u),h=qf.det(o,o*o+s*s,a,a*a+u*u);return new ll(n-c/l,i+h/l)},qf.perpendicularBisector=function(t,e){var r=e.x-t.x,n=e.y-t.y,i=new Nl(t.x+r/2,t.y+n/2,1),o=new Nl(t.x-n+r/2,t.y+r+n/2,1);return new Nl(i,o)},qf.angleBisector=function(t,e,r){var n=e.distance(t),i=n/(n+e.distance(r)),o=r.x-t.x,s=r.y-t.y;return new ll(t.x+i*o,t.y+i*s)},qf.area3D=function(t,e,r){var n=e.x-t.x,i=e.y-t.y,o=e.z-t.z,s=r.x-t.x,a=r.y-t.y,u=r.z-t.z,l=i*u-o*a,c=o*s-n*u,h=n*a-i*s,f=l*l+c*c+h*h,p=Math.sqrt(f)/2;return p},qf.centroid=function(t,e,r){var n=(t.x+e.x+r.x)/3,i=(t.y+e.y+r.y)/3;return new ll(n,i)},qf.inCentre=function(t,e,r){var n=e.distance(r),i=t.distance(r),o=t.distance(e),s=n+i+o,a=(n*t.x+i*e.x+o*r.x)/s,u=(n*t.y+i*e.y+o*r.y)/s;return new ll(a,u)};var zf=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new cc;var t=arguments[0],e=arguments[1],r=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=r};zf.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),r=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(r,pl.EXTERIOR,pl.INTERIOR)},zf.prototype.addPolygon=function(t){var e=this,r=this._distance,n=Ph.LEFT;this._distance<0&&(r=-this._distance,n=Ph.RIGHT);var i=t.getExteriorRing(),o=pc.removeRepeatedPoints(i.getCoordinates());if(this._distance<0&&this.isErodedCompletely(i,this._distance))return null;if(this._distance<=0&&o.length<3)return null;this.addPolygonRing(o,r,n,pl.EXTERIOR,pl.INTERIOR);for(var s=0;s<t.getNumInteriorRing();s++){var a=t.getInteriorRingN(s),u=pc.removeRepeatedPoints(a.getCoordinates());e._distance>0&&e.isErodedCompletely(a,-e._distance)||e.addPolygonRing(u,r,Ph.opposite(n),pl.INTERIOR,pl.EXTERIOR)}},zf.prototype.isTriangleErodedCompletely=function(t,e){var r=new qf(t[0],t[1],t[2]),n=r.inCentre();return Hl.distancePointLine(n,r.p0,r.p1)<Math.abs(e)},zf.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=pc.removeRepeatedPoints(t.getCoordinates()),r=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(r,pl.EXTERIOR,pl.INTERIOR)},zf.prototype.addCurve=function(t,e,r){if(null===t||t.length<2)return null;var n=new mf(t,new Dh(0,pl.BOUNDARY,e,r));this._curveList.add(n)},zf.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},zf.prototype.addPolygonRing=function(t,e,r,n,i){if(0===e&&t.length<nh.MINIMUM_VALID_SIZE)return null;var o=n,s=i;t.length>=nh.MINIMUM_VALID_SIZE&&Hl.isCCW(t)&&(o=i,s=n,r=Ph.opposite(r));var a=this._curveBuilder.getRingCurve(t,r,e);this.addCurve(a,o,s)},zf.prototype.add=function(t){if(t.isEmpty())return null;t instanceof eh?this.addPolygon(t):t instanceof Qc?this.addLineString(t):t instanceof $c?this.addPoint(t):(t instanceof rh||t instanceof Gc||t instanceof ih||t instanceof jc)&&this.addCollection(t)},zf.prototype.isErodedCompletely=function(t,e){var r=t.getCoordinates();if(r.length<4)return e<0;if(4===r.length)return this.isTriangleErodedCompletely(r,e);var n=t.getEnvelopeInternal(),i=Math.min(n.getHeight(),n.getWidth());return e<0&&2*Math.abs(e)>i},zf.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var r=t.getGeometryN(e);this.add(r)}},zf.prototype.interfaces_=function(){return[]},zf.prototype.getClass=function(){return zf};var Vf=function(){};Vf.prototype.locate=function(t){},Vf.prototype.interfaces_=function(){return[]},Vf.prototype.getClass=function(){return Vf};var Wf=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};Wf.prototype.next=function(){if(this._atStart)return this._atStart=!1,Wf.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new lc;var t=this._parent.getGeometryN(this._index++);return t instanceof jc?(this._subcollectionIterator=new Wf(t),this._subcollectionIterator.next()):t},Wf.prototype.remove=function(){throw new Error(this.getClass().getName())},Wf.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},Wf.prototype.interfaces_=function(){return[ac]},Wf.prototype.getClass=function(){return Wf},Wf.isAtomic=function(t){return!(t instanceof jc)};var Hf=function(){this._geom=null;var t=arguments[0];this._geom=t};Hf.prototype.locate=function(t){return Hf.locate(t,this._geom)},Hf.prototype.interfaces_=function(){return[Vf]},Hf.prototype.getClass=function(){return Hf},Hf.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&Hl.isPointInRing(t,e.getCoordinates())},Hf.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var r=e.getExteriorRing();if(!Hf.isPointInRing(t,r))return!1;for(var n=0;n<e.getNumInteriorRing();n++){var i=e.getInteriorRingN(n);if(Hf.isPointInRing(t,i))return!1}return!0},Hf.containsPoint=function(t,e){if(e instanceof eh)return Hf.containsPointInPolygon(t,e);if(e instanceof jc)for(var r=new Wf(e);r.hasNext();){var n=r.next();if(n!==e&&Hf.containsPoint(t,n))return!0}return!1},Hf.locate=function(t,e){return e.isEmpty()?pl.EXTERIOR:Hf.containsPoint(t,e)?pl.INTERIOR:pl.EXTERIOR};var Xf=function(){this._edgeMap=new Mc,this._edgeList=null,this._ptInAreaLocation=[pl.NONE,pl.NONE]};Xf.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),r=e-1;return 0===e&&(r=this._edgeList.size()-1),this._edgeList.get(r)},Xf.prototype.propagateSideLabels=function(t){for(var e=pl.NONE,r=this.iterator();r.hasNext();){var n=r.next().getLabel();n.isArea(t)&&n.getLocation(t,Ph.LEFT)!==pl.NONE&&(e=n.getLocation(t,Ph.LEFT))}if(e===pl.NONE)return null;for(var i=e,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getLabel();if(a.getLocation(t,Ph.ON)===pl.NONE&&a.setLocation(t,Ph.ON,i),a.isArea(t)){var u=a.getLocation(t,Ph.LEFT),l=a.getLocation(t,Ph.RIGHT);if(l!==pl.NONE){if(l!==i)throw new Oh("side location conflict",s.getCoordinate());u===pl.NONE&&Bl.shouldNeverReachHere("found single null side (at "+s.getCoordinate()+")"),i=u}else Bl.isTrue(a.getLocation(t,Ph.LEFT)===pl.NONE,"found single null side"),a.setLocation(t,Ph.RIGHT,i),a.setLocation(t,Ph.LEFT,i)}}},Xf.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},Xf.prototype.print=function(t){Ll.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){e.next().print(t)}},Xf.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},Xf.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var r=e.size()-1,n=e.get(r).getLabel().getLocation(t,Ph.LEFT);Bl.isTrue(n!==pl.NONE,"Found unlabelled area edge");for(var i=n,o=this.iterator();o.hasNext();){var s=o.next().getLabel();Bl.isTrue(s.isArea(t),"Found non-area edge");var a=s.getLocation(t,Ph.LEFT),u=s.getLocation(t,Ph.RIGHT);if(a===u)return!1;if(u!==i)return!1;i=a}return!0},Xf.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++){if(this._edgeList.get(e)===t)return e}return-1},Xf.prototype.iterator=function(){return this.getEdges().iterator()},Xf.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new cc(this._edgeMap.values())),this._edgeList},Xf.prototype.getLocation=function(t,e,r){return this._ptInAreaLocation[t]===pl.NONE&&(this._ptInAreaLocation[t]=Hf.locate(e,r[t].getGeometry())),this._ptInAreaLocation[t]},Xf.prototype.toString=function(){var t=new ml;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var r=e.next();t.append(r),t.append("\n")}return t.toString()},Xf.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();){e.next().computeLabel(t)}},Xf.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],r=this.iterator();r.hasNext();)for(var n=r.next().getLabel(),i=0;i<2;i++)n.isLine(i)&&n.getLocation(i)===pl.BOUNDARY&&(e[i]=!0);for(var o=this.iterator();o.hasNext();)for(var s=o.next(),a=s.getLabel(),u=0;u<2;u++)if(a.isAnyNull(u)){var l=pl.NONE;if(e[u])l=pl.EXTERIOR;else{var c=s.getCoordinate();l=this.getLocation(u,c,t)}a.setAllLocationsIfNull(u,l)}},Xf.prototype.getDegree=function(){return this._edgeMap.size()},Xf.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},Xf.prototype.interfaces_=function(){return[]},Xf.prototype.getClass=function(){return Xf};var Zf=function(t){function e(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.linkResultDirectedEdges=function(){var t=this;this.getResultAreaEdges();for(var e=null,r=null,n=this._SCANNING_FOR_INCOMING,i=0;i<this._resultAreaEdgeList.size();i++){var o=t._resultAreaEdgeList.get(i),s=o.getSym();if(o.getLabel().isArea())switch(null===e&&o.isInResult()&&(e=o),n){case t._SCANNING_FOR_INCOMING:if(!s.isInResult())continue;r=s,n=t._LINKING_TO_OUTGOING;break;case t._LINKING_TO_OUTGOING:if(!o.isInResult())continue;r.setNext(o),n=t._SCANNING_FOR_INCOMING}}if(n===this._LINKING_TO_OUTGOING){if(null===e)throw new Oh("no outgoing dirEdge found",this.getCoordinate());Bl.isTrue(e.isInResult(),"unable to link last incoming dirEdge"),r.setNext(e)}},e.prototype.insert=function(t){var e=t;this.insertEdgeEnd(e,e)},e.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var r=t.get(0);if(1===e)return r;var n=t.get(e-1),i=r.getQuadrant(),o=n.getQuadrant();return zh.isNorthern(i)&&zh.isNorthern(o)?r:zh.isNorthern(i)||zh.isNorthern(o)?0!==r.getDy()?r:0!==n.getDy()?n:(Bl.shouldNeverReachHere("found two horizontal edges incident on node"),null):n},e.prototype.print=function(t){Ll.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var r=e.next();t.print("out "),r.print(t),t.println(),t.print("in "),r.getSym().print(t),t.println()}},e.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new cc;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var r=e.next().getLabel();r.setAllLocationsIfNull(0,t.getLocation(0)),r.setAllLocationsIfNull(1,t.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,r=this._edgeList.size()-1;r>=0;r--){var n=this._edgeList.get(r),i=n.getSym();null===e&&(e=i),null!==t&&i.setNext(t),t=n}e.setNext(t)},e.prototype.computeDepths=function(){var t=this;if(1===arguments.length){var e=arguments[0],r=this.findIndex(e),n=e.getDepth(Ph.LEFT),i=e.getDepth(Ph.RIGHT),o=this.computeDepths(r+1,this._edgeList.size(),n),s=this.computeDepths(0,r,o);if(s!==i)throw new Oh("depth mismatch at "+e.getCoordinate())}else if(3===arguments.length){for(var a=arguments[0],u=arguments[1],l=arguments[2],c=l,h=a;h<u;h++){var f=t._edgeList.get(h);f.setEdgeDepths(Ph.RIGHT,c),c=f.getDepth(Ph.LEFT)}return c}},e.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(t){for(var e=this,r=null,n=null,i=this._SCANNING_FOR_INCOMING,o=this._resultAreaEdgeList.size()-1;o>=0;o--){var s=e._resultAreaEdgeList.get(o),a=s.getSym();switch(null===r&&s.getEdgeRing()===t&&(r=s),i){case e._SCANNING_FOR_INCOMING:if(a.getEdgeRing()!==t)continue;n=a,i=e._LINKING_TO_OUTGOING;break;case e._LINKING_TO_OUTGOING:if(s.getEdgeRing()!==t)continue;n.setNextMin(s),i=e._SCANNING_FOR_INCOMING}}i===this._LINKING_TO_OUTGOING&&(Bl.isTrue(null!==r,"found null for first outgoing dirEdge"),Bl.isTrue(r.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(r))},e.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();){var r=e.next();r.isInResult()&&t++}return t}if(1===arguments.length){for(var n=arguments[0],i=0,o=this.iterator();o.hasNext();){var s=o.next();s.getEdgeRing()===n&&i++}return i}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var t=pl.NONE,e=this.iterator();e.hasNext();){var r=e.next(),n=r.getSym();if(!r.isLineEdge()){if(r.isInResult()){t=pl.INTERIOR;break}if(n.isInResult()){t=pl.EXTERIOR;break}}}if(t===pl.NONE)return null;for(var i=t,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getSym();s.isLineEdge()?s.getEdge().setCovered(i===pl.INTERIOR):(s.isInResult()&&(i=pl.EXTERIOR),a.isInResult()&&(i=pl.INTERIOR))}},e.prototype.computeLabelling=function(e){t.prototype.computeLabelling.call(this,e),this._label=new Dh(pl.NONE);for(var r=this.iterator();r.hasNext();)for(var n=r.next().getEdge().getLabel(),i=0;i<2;i++){var o=n.getLocation(i);o!==pl.INTERIOR&&o!==pl.BOUNDARY||this._label.setLocation(i,pl.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Xf),Yf=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createNode=function(t){return new Uh(t,new Zf)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Xh),Jf=function t(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)};Jf.prototype.compareTo=function(t){var e=t;return Jf.compareOriented(this._pts,this._orientation,e._pts,e._orientation)},Jf.prototype.interfaces_=function(){return[ol]},Jf.prototype.getClass=function(){return Jf},Jf.orientation=function(t){return 1===pc.increasingDirection(t)},Jf.compareOriented=function(t,e,r,n){for(var i=e?1:-1,o=n?1:-1,s=e?t.length:-1,a=n?r.length:-1,u=e?0:t.length-1,l=n?0:r.length-1;;){var c=t[u].compareTo(r[l]);if(0!==c)return c;var h=(u+=i)===s,f=(l+=o)===a;if(h&&!f)return-1;if(!h&&f)return 1;if(h&&f)return 0}};var Qf=function(){this._edges=new cc,this._ocaMap=new Mc};Qf.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var r=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var n=r.getCoordinates(),i=0;i<n.length;i++)i>0&&t.print(","),t.print(n[i].x+" "+n[i].y);t.println(")")}t.print(")  ")},Qf.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},Qf.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},Qf.prototype.iterator=function(){return this._edges.iterator()},Qf.prototype.getEdges=function(){return this._edges},Qf.prototype.get=function(t){return this._edges.get(t)},Qf.prototype.findEqualEdge=function(t){var e=new Jf(t.getCoordinates());return this._ocaMap.get(e)},Qf.prototype.add=function(t){this._edges.add(t);var e=new Jf(t.getCoordinates());this._ocaMap.put(e,t)},Qf.prototype.interfaces_=function(){return[]},Qf.prototype.getClass=function(){return Qf};var Kf=function(){};Kf.prototype.processIntersections=function(t,e,r,n){},Kf.prototype.isDone=function(){},Kf.prototype.interfaces_=function(){return[]},Kf.prototype.getClass=function(){return Kf};var $f=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t};$f.prototype.isTrivialIntersection=function(t,e,r,n){if(t===r&&1===this._li.getIntersectionNum()){if($f.isAdjacentSegments(e,n))return!0;if(t.isClosed()){var i=t.size()-1;if(0===e&&n===i||0===n&&e===i)return!0}}return!1},$f.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},$f.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},$f.prototype.getLineIntersector=function(){return this._li},$f.prototype.hasProperIntersection=function(){return this._hasProper},$f.prototype.processIntersections=function(t,e,r,n){if(t===r&&e===n)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=r.getCoordinates()[n],a=r.getCoordinates()[n+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,r,n)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),r.addIntersections(this._li,n,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},$f.prototype.hasIntersection=function(){return this._hasIntersection},$f.prototype.isDone=function(){return!1},$f.prototype.hasInteriorIntersection=function(){return this._hasInterior},$f.prototype.interfaces_=function(){return[Kf]},$f.prototype.getClass=function(){return $f},$f.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var tp=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],r=arguments[2];this.coord=new ll(t),this.segmentIndex=e,this.dist=r};tp.prototype.getSegmentIndex=function(){return this.segmentIndex},tp.prototype.getCoordinate=function(){return this.coord},tp.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},tp.prototype.compareTo=function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},tp.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},tp.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},tp.prototype.getDistance=function(){return this.dist},tp.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},tp.prototype.interfaces_=function(){return[ol]},tp.prototype.getClass=function(){return tp};var ep=function(){this._nodeMap=new Mc,this.edge=null;var t=arguments[0];this.edge=t};ep.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();){e.next().print(t)}},ep.prototype.iterator=function(){return this._nodeMap.values().iterator()},ep.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),r=e.next();e.hasNext();){var n=e.next(),i=this.createSplitEdge(r,n);t.add(i),r=n}},ep.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},ep.prototype.createSplitEdge=function(t,e){var r=e.segmentIndex-t.segmentIndex+2,n=this.edge.pts[e.segmentIndex],i=e.dist>0||!e.coord.equals2D(n);i||r--;var o=new Array(r).fill(null),s=0;o[s++]=new ll(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this.edge.pts[a];return i&&(o[s]=e.coord),new sp(o,new Dh(this.edge._label))},ep.prototype.add=function(t,e,r){var n=new tp(t,e,r),i=this._nodeMap.get(n);return null!==i?i:(this._nodeMap.put(n,n),n)},ep.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();){if(e.next().coord.equals(t))return!0}return!1},ep.prototype.interfaces_=function(){return[]},ep.prototype.getClass=function(){return ep};var rp=function(){};rp.prototype.getChainStartIndices=function(t){var e=0,r=new cc;r.add(new _l(e));do{var n=this.findChainEnd(t,e);r.add(new _l(n)),e=n}while(e<t.length-1);return rp.toIntArray(r)},rp.prototype.findChainEnd=function(t,e){for(var r=zh.quadrant(t[e],t[e+1]),n=e+1;n<t.length;){if(zh.quadrant(t[n-1],t[n])!==r)break;n++}return n-1},rp.prototype.interfaces_=function(){return[]},rp.prototype.getClass=function(){return rp},rp.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),r=0;r<e.length;r++)e[r]=t.get(r).intValue();return e};var np=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new Tl,this.env2=new Tl;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new rp;this.startIndex=e.getChainStartIndices(this.pts)};np.prototype.getCoordinates=function(){return this.pts},np.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,r=this.pts[this.startIndex[t+1]].x;return e>r?e:r},np.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,r=this.pts[this.startIndex[t+1]].x;return e<r?e:r},np.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[r],e.startIndex[r+1],n)}else if(6===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],u=arguments[4],l=arguments[5],c=this.pts[i],h=this.pts[o],f=s.pts[a],p=s.pts[u];if(o-i==1&&u-a==1)return l.addIntersections(this.e,i,s.e,a),null;if(this.env1.init(c,h),this.env2.init(f,p),!this.env1.intersects(this.env2))return null;var d=Math.trunc((i+o)/2),y=Math.trunc((a+u)/2);i<d&&(a<y&&this.computeIntersectsForChain(i,d,s,a,y,l),y<u&&this.computeIntersectsForChain(i,d,s,y,u,l)),d<o&&(a<y&&this.computeIntersectsForChain(d,o,s,a,y,l),y<u&&this.computeIntersectsForChain(d,o,s,y,u,l))}},np.prototype.getStartIndexes=function(){return this.startIndex},np.prototype.computeIntersects=function(t,e){for(var r=0;r<this.startIndex.length-1;r++)for(var n=0;n<t.startIndex.length-1;n++)this.computeIntersectsForChain(r,t,n,e)},np.prototype.interfaces_=function(){return[]},np.prototype.getClass=function(){return np};var ip=function t(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var e=0;e<2;e++)for(var r=0;r<3;r++)this._depth[e][r]=t.NULL_VALUE},op={NULL_VALUE:{configurable:!0}};ip.prototype.getDepth=function(t,e){return this._depth[t][e]},ip.prototype.setDepth=function(t,e,r){this._depth[t][e]=r},ip.prototype.isNull=function(){var t=this;if(0===arguments.length){for(var e=0;e<2;e++)for(var r=0;r<3;r++)if(t._depth[e][r]!==ip.NULL_VALUE)return!1;return!0}if(1===arguments.length){var n=arguments[0];return this._depth[n][1]===ip.NULL_VALUE}if(2===arguments.length){var i=arguments[0],o=arguments[1];return this._depth[i][o]===ip.NULL_VALUE}},ip.prototype.normalize=function(){for(var t=this,e=0;e<2;e++)if(!t.isNull(e)){var r=t._depth[e][1];t._depth[e][2]<r&&(r=t._depth[e][2]),r<0&&(r=0);for(var n=1;n<3;n++){var i=0;t._depth[e][n]>r&&(i=1),t._depth[e][n]=i}}},ip.prototype.getDelta=function(t){return this._depth[t][Ph.RIGHT]-this._depth[t][Ph.LEFT]},ip.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?pl.EXTERIOR:pl.INTERIOR},ip.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},ip.prototype.add=function(){var t=this;if(1===arguments.length)for(var e=arguments[0],r=0;r<2;r++)for(var n=1;n<3;n++){var i=e.getLocation(r,n);i!==pl.EXTERIOR&&i!==pl.INTERIOR||(t.isNull(r,n)?t._depth[r][n]=ip.depthAtLocation(i):t._depth[r][n]+=ip.depthAtLocation(i))}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];a===pl.INTERIOR&&this._depth[o][s]++}},ip.prototype.interfaces_=function(){return[]},ip.prototype.getClass=function(){return ip},ip.depthAtLocation=function(t){return t===pl.EXTERIOR?0:t===pl.INTERIOR?1:ip.NULL_VALUE},op.NULL_VALUE.get=function(){return-1},Object.defineProperties(ip,op);var sp=function(t){function e(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new ep(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new ip,this._depthDelta=0,1===arguments.length){var r=arguments[0];e.call(this,r,null)}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.pts=n,this._label=i}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new e(t,Dh.toLineLabel(this._label))},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(t){this._isIsolated=t},e.prototype.setName=function(t){this._name=t},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var r=t;if(this.pts.length!==r.pts.length)return!1;for(var n=!0,i=!0,o=this.pts.length,s=0;s<this.pts.length;s++)if(this.pts[s].equals2D(r.pts[s])||(n=!1),this.pts[s].equals2D(r.pts[--o])||(i=!1),!n&&!i)return!1;return!0},e.prototype.getCoordinate=function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},e.prototype.print=function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(t){e.updateIM(this._label,t)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&(3===this.pts.length&&!!this.pts[0].equals(this.pts[2]))},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},e.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new np(this)),this._mce},e.prototype.getEnvelope=function(){if(null===this._env){this._env=new Tl;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},e.prototype.addIntersection=function(t,e,r,n){var i=new ll(t.getIntersection(n)),o=e,s=t.getEdgeDistance(r,n),a=o+1;if(a<this.pts.length){var u=this.pts[a];i.equals2D(u)&&(o=a,s=0)}this.eiList.add(i,o,s)},e.prototype.toString=function(){var t=new ml;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()},e.prototype.isPointwiseEqual=function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},e.prototype.setDepthDelta=function(t){this._depthDelta=t},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(t,e,r){for(var n=0;n<t.getIntersectionNum();n++)this.addIntersection(t,e,r,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(2!==arguments.length)return t.prototype.updateIM.apply(this,arguments);var e=arguments[0],r=arguments[1];r.setAtLeastIfValid(e.getLocation(0,Ph.ON),e.getLocation(1,Ph.ON),1),e.isArea()&&(r.setAtLeastIfValid(e.getLocation(0,Ph.LEFT),e.getLocation(1,Ph.LEFT),2),r.setAtLeastIfValid(e.getLocation(0,Ph.RIGHT),e.getLocation(1,Ph.RIGHT),2))},e}(Bh),ap=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Qf,this._bufParams=t||null};ap.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},ap.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var r=e.getLabel(),n=t.getLabel();e.isPointwiseEqual(t)||(n=new Dh(t.getLabel())).flip(),r.merge(n);var i=ap.depthDelta(n),o=e.getDepthDelta()+i;e.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(ap.depthDelta(t.getLabel()))},ap.prototype.buildSubgraphs=function(t,e){for(var r=new cc,n=t.iterator();n.hasNext();){var i=n.next(),o=i.getRightmostCoordinate(),s=new Gf(r).getDepth(o);i.computeDepth(s),i.findResultEdges(),r.add(i),e.add(i.getDirectedEdges(),i.getNodes())}},ap.prototype.createSubgraphs=function(t){for(var e=new cc,r=t.getNodes().iterator();r.hasNext();){var n=r.next();if(!n.isVisited()){var i=new Rh;i.create(n),e.add(i)}}return nf.sort(e,nf.reverseOrder()),e},ap.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},ap.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new Ef,r=new zl;return r.setPrecisionModel(t),e.setSegmentIntersector(new $f(r)),e},ap.prototype.buffer=function(t,e){var r=this._workingPrecisionModel;null===r&&(r=t.getPrecisionModel()),this._geomFact=t.getFactory();var n=new jf(r,this._bufParams),i=new zf(t,e,n).getCurves();if(i.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(i,r),this._graph=new Zh(new Yf),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),s=new Yh(this._geomFact);this.buildSubgraphs(o,s);var a=s.getPolygons();return a.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(a)},ap.prototype.computeNodedEdges=function(t,e){var r=this.getNoder(e);r.computeNodes(t);for(var n=r.getNodedSubstrings().iterator();n.hasNext();){var i=n.next(),o=i.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var s=i.getData(),a=new sp(i.getCoordinates(),new Dh(s));this.insertUniqueEdge(a)}}},ap.prototype.setNoder=function(t){this._workingNoder=t},ap.prototype.interfaces_=function(){return[]},ap.prototype.getClass=function(){return ap},ap.depthDelta=function(t){var e=t.getLocation(0,Ph.LEFT),r=t.getLocation(0,Ph.RIGHT);return e===pl.INTERIOR&&r===pl.EXTERIOR?1:e===pl.EXTERIOR&&r===pl.INTERIOR?-1:0},ap.convertSegStrings=function(t){for(var e=new _h,r=new cc;t.hasNext();){var n=t.next(),i=e.createLineString(n.getCoordinates());r.add(i)}return e.buildGeometry(r)};var up=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this._noder=t,this._scaleFactor=e,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var r=arguments[0],n=arguments[1],i=arguments[2],o=arguments[3];this._noder=r,this._scaleFactor=n,this._offsetX=i,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};up.prototype.rescale=function(){var t=this;if(yl(arguments[0],oc))for(var e=arguments[0],r=e.iterator();r.hasNext();){var n=r.next();t.rescale(n.getCoordinates())}else if(arguments[0]instanceof Array){for(var i=arguments[0],o=0;o<i.length;o++)i[o].x=i[o].x/t._scaleFactor+t._offsetX,i[o].y=i[o].y/t._scaleFactor+t._offsetY;2===i.length&&i[0].equals2D(i[1])&&Ll.out.println(i)}},up.prototype.scale=function(){var t=this;if(yl(arguments[0],oc)){for(var e=arguments[0],r=new cc,n=e.iterator();n.hasNext();){var i=n.next();r.add(new mf(t.scale(i.getCoordinates()),i.getData()))}return r}if(arguments[0]instanceof Array){for(var o=arguments[0],s=new Array(o.length).fill(null),a=0;a<o.length;a++)s[a]=new ll(Math.round((o[a].x-t._offsetX)*t._scaleFactor),Math.round((o[a].y-t._offsetY)*t._scaleFactor),o[a].z);var u=pc.removeRepeatedPoints(s);return u}},up.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},up.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},up.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},up.prototype.interfaces_=function(){return[Cf]},up.prototype.getClass=function(){return up};var lp=function(){this._li=new zl,this._segStrings=null;var t=arguments[0];this._segStrings=t},cp={fact:{configurable:!0}};lp.prototype.checkEndPtVertexIntersections=function(){var t=this;if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();){var r=e.next(),n=r.getCoordinates();t.checkEndPtVertexIntersections(n[0],t._segStrings),t.checkEndPtVertexIntersections(n[n.length-1],t._segStrings)}else if(2===arguments.length)for(var i=arguments[0],o=arguments[1],s=o.iterator();s.hasNext();)for(var a=s.next(),u=a.getCoordinates(),l=1;l<u.length-1;l++)if(u[l].equals(i))throw new jl("found endpt/interior pt intersection at index "+l+" :pt "+i)},lp.prototype.checkInteriorIntersections=function(){var t=this;if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();)for(var r=e.next(),n=this._segStrings.iterator();n.hasNext();){var i=n.next();t.checkInteriorIntersections(r,i)}else if(2===arguments.length)for(var o=arguments[0],s=arguments[1],a=o.getCoordinates(),u=s.getCoordinates(),l=0;l<a.length-1;l++)for(var c=0;c<u.length-1;c++)t.checkInteriorIntersections(o,l,s,c);else if(4===arguments.length){var h=arguments[0],f=arguments[1],p=arguments[2],d=arguments[3];if(h===p&&f===d)return null;var y=h.getCoordinates()[f],v=h.getCoordinates()[f+1],g=p.getCoordinates()[d],m=p.getCoordinates()[d+1];if(this._li.computeIntersection(y,v,g,m),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,y,v)||this.hasInteriorIntersection(this._li,g,m)))throw new jl("found non-noded intersection at "+y+"-"+v+" and "+g+"-"+m)}},lp.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},lp.prototype.checkCollapses=function(){var t=this;if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();){var r=e.next();t.checkCollapses(r)}else if(1===arguments.length)for(var n=arguments[0],i=n.getCoordinates(),o=0;o<i.length-2;o++)t.checkCollapse(i[o],i[o+1],i[o+2])},lp.prototype.hasInteriorIntersection=function(t,e,r){for(var n=0;n<t.getIntersectionNum();n++){var i=t.getIntersection(n);if(!i.equals(e)&&!i.equals(r))return!0}return!1},lp.prototype.checkCollapse=function(t,e,r){if(t.equals(r))throw new jl("found non-noded collapse at "+lp.fact.createLineString([t,e,r]))},lp.prototype.interfaces_=function(){return[]},lp.prototype.getClass=function(){return lp},cp.fact.get=function(){return new _h},Object.defineProperties(lp,cp);var hp=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],r=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=r,e<=0)throw new rl("Scale factor must be non-zero");1!==e&&(this._pt=new ll(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new ll,this._p1Scaled=new ll),this.initCorners(this._pt)},fp={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};hp.prototype.intersectsScaled=function(t,e){var r=Math.min(t.x,e.x),n=Math.max(t.x,e.x),i=Math.min(t.y,e.y),o=Math.max(t.y,e.y),s=this._maxx<r||this._minx>n||this._maxy<i||this._miny>o;if(s)return!1;var a=this.intersectsToleranceSquare(t,e);return Bl.isTrue(!(s&&a),"Found bad envelope test"),a},hp.prototype.initCorners=function(t){var e=.5;this._minx=t.x-e,this._maxx=t.x+e,this._miny=t.y-e,this._maxy=t.y+e,this._corner[0]=new ll(this._maxx,this._maxy),this._corner[1]=new ll(this._minx,this._maxy),this._corner[2]=new ll(this._minx,this._miny),this._corner[3]=new ll(this._maxx,this._miny)},hp.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},hp.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},hp.prototype.getCoordinate=function(){return this._originalPt},hp.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},hp.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=hp.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new Tl(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},hp.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),!!this._li.hasIntersection())))},hp.prototype.intersectsToleranceSquare=function(t,e){var r=!1,n=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),!!this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),!!this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),!!this._li.isProper()||(!(!r||!n)||(!!t.equals(this._pt)||!!e.equals(this._pt))))))},hp.prototype.addSnappedNode=function(t,e){var r=t.getCoordinate(e),n=t.getCoordinate(e+1);return!!this.intersects(r,n)&&(t.addIntersection(this.getCoordinate(),e),!0)},hp.prototype.interfaces_=function(){return[]},hp.prototype.getClass=function(){return hp},fp.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(hp,fp);var pp=function(){this.tempEnv1=new Tl,this.selectedSegment=new _f};pp.prototype.select=function(){if(1===arguments.length);else if(2===arguments.length){var t=arguments[0],e=arguments[1];t.getLineSegment(e,this.selectedSegment),this.select(this.selectedSegment)}},pp.prototype.interfaces_=function(){return[]},pp.prototype.getClass=function(){return pp};var dp=function(){this._index=null;var t=arguments[0];this._index=t},yp={HotPixelSnapAction:{configurable:!0}};dp.prototype.snap=function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],r=arguments[1],n=arguments[2],i=e.getSafeEnvelope(),o=new vp(e,r,n);return this._index.query(i,{interfaces_:function(){return[$h]},visitItem:function(t){t.select(i,o)}}),o.isNodeAdded()}},dp.prototype.interfaces_=function(){return[]},dp.prototype.getClass=function(){return dp},yp.HotPixelSnapAction.get=function(){return vp},Object.defineProperties(dp,yp);var vp=function(t){function e(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[0],r=arguments[1],n=arguments[2];this._hotPixel=e,this._parentEdge=r,this._hotPixelVertexIndex=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!==arguments.length)return t.prototype.select.apply(this,arguments);var e=arguments[0],r=arguments[1],n=e.getContext();if(null!==this._parentEdge&&n===this._parentEdge&&r===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(n,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(pp),gp=function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new cc};gp.prototype.processIntersections=function(t,e,r,n){if(t===r&&e===n)return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=r.getCoordinates()[n],a=r.getCoordinates()[n+1];if(this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var u=0;u<this._li.getIntersectionNum();u++)this._interiorIntersections.add(this._li.getIntersection(u));t.addIntersections(this._li,e,0),r.addIntersections(this._li,n,1)}},gp.prototype.isDone=function(){return!1},gp.prototype.getInteriorIntersections=function(){return this._interiorIntersections},gp.prototype.interfaces_=function(){return[Kf]},gp.prototype.getClass=function(){return gp};var mp=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new zl,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};mp.prototype.checkCorrectness=function(t){var e=mf.getNodedSubstrings(t),r=new lp(e);try{r.checkValid()}catch(t){if(!(t instanceof Pl))throw t;t.printStackTrace()}},mp.prototype.getNodedSubstrings=function(){return mf.getNodedSubstrings(this._nodedSegStrings)},mp.prototype.snapRound=function(t,e){var r=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(r),this.computeVertexSnaps(t)},mp.prototype.findInteriorIntersections=function(t,e){var r=new gp(e);return this._noder.setSegmentIntersector(r),this._noder.computeNodes(t),r.getInteriorIntersections()},mp.prototype.computeVertexSnaps=function(){var t=this;if(yl(arguments[0],oc))for(var e=arguments[0],r=e.iterator();r.hasNext();){var n=r.next();t.computeVertexSnaps(n)}else if(arguments[0]instanceof mf)for(var i=arguments[0],o=i.getCoordinates(),s=0;s<o.length;s++){var a=new hp(o[s],t._scaleFactor,t._li),u=t._pointSnapper.snap(a,i,s);u&&i.addIntersection(o[s],s)}},mp.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new Ef,this._pointSnapper=new dp(this._noder.getIndex()),this.snapRound(t,this._li)},mp.prototype.computeIntersectionSnaps=function(t){for(var e=this,r=t.iterator();r.hasNext();){var n=r.next(),i=new hp(n,e._scaleFactor,e._li);e._pointSnapper.snap(i)}},mp.prototype.interfaces_=function(){return[Cf]},mp.prototype.getClass=function(){return mp};var _p=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new Mf,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0];this._argGeom=t}else if(2===arguments.length){var e=arguments[0],r=arguments[1];this._argGeom=e,this._bufParams=r}},bp={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};_p.prototype.bufferFixedPrecision=function(t){var e=new up(new mp(new yh(1)),t.getScale()),r=new ap(this._bufParams);r.setWorkingPrecisionModel(t),r.setNoder(e),this._resultGeometry=r.buffer(this._argGeom,this._distance)},_p.prototype.bufferReducedPrecision=function(){var t=this;if(0===arguments.length){for(var e=_p.MAX_PRECISION_DIGITS;e>=0;e--){try{t.bufferReducedPrecision(e)}catch(e){if(!(e instanceof Oh))throw e;t._saveException=e}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var r=arguments[0],n=_p.precisionScaleFactor(this._argGeom,this._distance,r),i=new yh(n);this.bufferFixedPrecision(i)}},_p.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===yh.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},_p.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},_p.prototype.bufferOriginalPrecision=function(){try{var t=new ap(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof jl))throw t;this._saveException=t}},_p.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},_p.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},_p.prototype.interfaces_=function(){return[]},_p.prototype.getClass=function(){return _p},_p.bufferOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],r=new _p(t),n=r.getResultGeometry(e);return n}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Yl&&"number"==typeof arguments[1]){var i=arguments[0],o=arguments[1],s=arguments[2],a=new _p(i);a.setQuadrantSegments(s);var u=a.getResultGeometry(o);return u}if(arguments[2]instanceof Mf&&arguments[0]instanceof Yl&&"number"==typeof arguments[1]){var l=arguments[0],c=arguments[1],h=arguments[2],f=new _p(l,h),p=f.getResultGeometry(c);return p}}else if(4===arguments.length){var d=arguments[0],y=arguments[1],v=arguments[2],g=arguments[3],m=new _p(d);m.setQuadrantSegments(v),m.setEndCapStyle(g);var _=m.getResultGeometry(y);return _}},_p.precisionScaleFactor=function(t,e,r){var n=t.getEnvelopeInternal(),i=vl.max(Math.abs(n.getMaxX()),Math.abs(n.getMaxY()),Math.abs(n.getMinX()),Math.abs(n.getMinY()))+2*(e>0?e:0),o=r-Math.trunc(Math.log(i)/Math.log(10)+1);return Math.pow(10,o)},bp.CAP_ROUND.get=function(){return Mf.CAP_ROUND},bp.CAP_BUTT.get=function(){return Mf.CAP_FLAT},bp.CAP_FLAT.get=function(){return Mf.CAP_FLAT},bp.CAP_SQUARE.get=function(){return Mf.CAP_SQUARE},bp.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(_p,bp);var xp=function(){this._pt=[new ll,new ll],this._distance=nl.NaN,this._isNull=!0};xp.prototype.getCoordinates=function(){return this._pt},xp.prototype.getCoordinate=function(t){return this._pt[t]},xp.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],r=arguments[1];if(this._isNull)return this.initialize(e,r),null;var n=e.distance(r);n<this._distance&&this.initialize(e,r,n)}},xp.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var r=arguments[0],n=arguments[1],i=arguments[2];this._pt[0].setCoordinate(r),this._pt[1].setCoordinate(n),this._distance=i,this._isNull=!1}},xp.prototype.getDistance=function(){return this._distance},xp.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],r=arguments[1];if(this._isNull)return this.initialize(e,r),null;var n=e.distance(r);n>this._distance&&this.initialize(e,r,n)}},xp.prototype.interfaces_=function(){return[]},xp.prototype.getClass=function(){return xp};var Sp=function(){};Sp.prototype.interfaces_=function(){return[]},Sp.prototype.getClass=function(){return Sp},Sp.computeDistance=function(){if(arguments[2]instanceof xp&&arguments[0]instanceof Qc&&arguments[1]instanceof ll)for(var t=arguments[0],e=arguments[1],r=arguments[2],n=t.getCoordinates(),i=new _f,o=0;o<n.length-1;o++){i.setCoordinates(n[o],n[o+1]);var s=i.closestPoint(e);r.setMinimum(s,e)}else if(arguments[2]instanceof xp&&arguments[0]instanceof eh&&arguments[1]instanceof ll){var a=arguments[0],u=arguments[1],l=arguments[2];Sp.computeDistance(a.getExteriorRing(),u,l);for(var c=0;c<a.getNumInteriorRing();c++)Sp.computeDistance(a.getInteriorRingN(c),u,l)}else if(arguments[2]instanceof xp&&arguments[0]instanceof Yl&&arguments[1]instanceof ll){var h=arguments[0],f=arguments[1],p=arguments[2];if(h instanceof Qc)Sp.computeDistance(h,f,p);else if(h instanceof eh)Sp.computeDistance(h,f,p);else if(h instanceof jc)for(var d=h,y=0;y<d.getNumGeometries();y++){var v=d.getGeometryN(y);Sp.computeDistance(v,f,p)}else p.setMinimum(h.getCoordinate(),f)}else if(arguments[2]instanceof xp&&arguments[0]instanceof _f&&arguments[1]instanceof ll){var g=arguments[0],m=arguments[1],_=arguments[2],b=g.closestPoint(m);_.setMinimum(b,m)}};var wp=function(t){this._maxPtDist=new xp,this._inputGeom=t||null},Cp={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};wp.prototype.computeMaxMidpointDistance=function(t){var e=new Ep(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},wp.prototype.computeMaxVertexDistance=function(t){var e=new Ip(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},wp.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},wp.prototype.getDistancePoints=function(){return this._maxPtDist},wp.prototype.interfaces_=function(){return[]},wp.prototype.getClass=function(){return wp},Cp.MaxPointDistanceFilter.get=function(){return Ip},Cp.MaxMidpointDistanceFilter.get=function(){return Ep},Object.defineProperties(wp,Cp);var Ip=function(t){this._maxPtDist=new xp,this._minPtDist=new xp,this._geom=t||null};Ip.prototype.filter=function(t){this._minPtDist.initialize(),Sp.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Ip.prototype.getMaxPointDistance=function(){return this._maxPtDist},Ip.prototype.interfaces_=function(){return[Kl]},Ip.prototype.getClass=function(){return Ip};var Ep=function(t){this._maxPtDist=new xp,this._minPtDist=new xp,this._geom=t||null};Ep.prototype.filter=function(t,e){if(0===e)return null;var r=t.getCoordinate(e-1),n=t.getCoordinate(e),i=new ll((r.x+n.x)/2,(r.y+n.y)/2);this._minPtDist.initialize(),Sp.computeDistance(this._geom,i,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Ep.prototype.isDone=function(){return!1},Ep.prototype.isGeometryChanged=function(){return!1},Ep.prototype.getMaxPointDistance=function(){return this._maxPtDist},Ep.prototype.interfaces_=function(){return[kc]},Ep.prototype.getClass=function(){return Ep};var Pp=function(t){this._comps=t||null};Pp.prototype.filter=function(t){t instanceof eh&&this._comps.add(t)},Pp.prototype.interfaces_=function(){return[Dc]},Pp.prototype.getClass=function(){return Pp},Pp.getPolygons=function(){if(1===arguments.length){var t=arguments[0];return Pp.getPolygons(t,new cc)}if(2===arguments.length){var e=arguments[0],r=arguments[1];return e instanceof eh?r.add(e):e instanceof jc&&e.apply(new Pp(r)),r}};var Mp=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this._lines=t}else if(2===arguments.length){var e=arguments[0],r=arguments[1];this._lines=e,this._isForcedToLineString=r}};Mp.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof nh){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof Qc&&this._lines.add(t)},Mp.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},Mp.prototype.interfaces_=function(){return[Zl]},Mp.prototype.getClass=function(){return Mp},Mp.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(Mp.getLines(t))}if(2===arguments.length){var e=arguments[0],r=arguments[1];return e.getFactory().buildGeometry(Mp.getLines(e,r))}},Mp.getLines=function(){if(1===arguments.length){var t=arguments[0];return Mp.getLines(t,!1)}if(2===arguments.length){if(yl(arguments[0],oc)&&yl(arguments[1],oc)){for(var e=arguments[0],r=arguments[1],n=e.iterator();n.hasNext();){var i=n.next();Mp.getLines(i,r)}return r}if(arguments[0]instanceof Yl&&"boolean"==typeof arguments[1]){var o=arguments[0],s=arguments[1],a=new cc;return o.apply(new Mp(a,s)),a}if(arguments[0]instanceof Yl&&yl(arguments[1],oc)){var u=arguments[0],l=arguments[1];return u instanceof Qc?l.add(u):u.apply(new Mp(l)),l}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&yl(arguments[0],oc)&&yl(arguments[1],oc)){for(var c=arguments[0],h=arguments[1],f=arguments[2],p=c.iterator();p.hasNext();){var d=p.next();Mp.getLines(d,h,f)}return h}if("boolean"==typeof arguments[2]&&arguments[0]instanceof Yl&&yl(arguments[1],oc)){var y=arguments[0],v=arguments[1],g=arguments[2];return y.apply(new Mp(v,g)),v}}};var Lp=function(){if(this._boundaryRule=$l.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new rl("Rule must be non-null");this._boundaryRule=t}};Lp.prototype.locateInternal=function(){var t=this;if(arguments[0]instanceof ll&&arguments[1]instanceof eh){var e=arguments[0],r=arguments[1];if(r.isEmpty())return pl.EXTERIOR;var n=r.getExteriorRing(),i=this.locateInPolygonRing(e,n);if(i===pl.EXTERIOR)return pl.EXTERIOR;if(i===pl.BOUNDARY)return pl.BOUNDARY;for(var o=0;o<r.getNumInteriorRing();o++){var s=r.getInteriorRingN(o),a=t.locateInPolygonRing(e,s);if(a===pl.INTERIOR)return pl.EXTERIOR;if(a===pl.BOUNDARY)return pl.BOUNDARY}return pl.INTERIOR}if(arguments[0]instanceof ll&&arguments[1]instanceof Qc){var u=arguments[0],l=arguments[1];if(!l.getEnvelopeInternal().intersects(u))return pl.EXTERIOR;var c=l.getCoordinates();return l.isClosed()||!u.equals(c[0])&&!u.equals(c[c.length-1])?Hl.isOnLine(u,c)?pl.INTERIOR:pl.EXTERIOR:pl.BOUNDARY}if(arguments[0]instanceof ll&&arguments[1]instanceof $c){var h=arguments[0],f=arguments[1],p=f.getCoordinate();return p.equals2D(h)?pl.INTERIOR:pl.EXTERIOR}},Lp.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?Hl.locatePointInRing(t,e.getCoordinates()):pl.EXTERIOR},Lp.prototype.intersects=function(t,e){return this.locate(t,e)!==pl.EXTERIOR},Lp.prototype.updateLocationInfo=function(t){t===pl.INTERIOR&&(this._isIn=!0),t===pl.BOUNDARY&&this._numBoundaries++},Lp.prototype.computeLocation=function(t,e){var r=this;if(e instanceof $c&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof Qc)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof eh)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Gc)for(var n=e,i=0;i<n.getNumGeometries();i++){var o=n.getGeometryN(i);r.updateLocationInfo(r.locateInternal(t,o))}else if(e instanceof ih)for(var s=e,a=0;a<s.getNumGeometries();a++){var u=s.getGeometryN(a);r.updateLocationInfo(r.locateInternal(t,u))}else if(e instanceof jc)for(var l=new Wf(e);l.hasNext();){var c=l.next();c!==e&&r.computeLocation(t,c)}},Lp.prototype.locate=function(t,e){return e.isEmpty()?pl.EXTERIOR:e instanceof Qc||e instanceof eh?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?pl.BOUNDARY:this._numBoundaries>0||this._isIn?pl.INTERIOR:pl.EXTERIOR)},Lp.prototype.interfaces_=function(){return[]},Lp.prototype.getClass=function(){return Lp};var Np=function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length){var e=arguments[0],r=arguments[1];t.call(this,e,t.INSIDE_AREA,r)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],o=arguments[2];this._component=n,this._segIndex=i,this._pt=o}},Tp={INSIDE_AREA:{configurable:!0}};Np.prototype.isInsideArea=function(){return this._segIndex===Np.INSIDE_AREA},Np.prototype.getCoordinate=function(){return this._pt},Np.prototype.getGeometryComponent=function(){return this._component},Np.prototype.getSegmentIndex=function(){return this._segIndex},Np.prototype.interfaces_=function(){return[]},Np.prototype.getClass=function(){return Np},Tp.INSIDE_AREA.get=function(){return-1},Object.defineProperties(Np,Tp);var Op=function(t){this._pts=t||null};Op.prototype.filter=function(t){t instanceof $c&&this._pts.add(t)},Op.prototype.interfaces_=function(){return[Dc]},Op.prototype.getClass=function(){return Op},Op.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof $c?nf.singletonList(t):Op.getPoints(t,new cc)}if(2===arguments.length){var e=arguments[0],r=arguments[1];return e instanceof $c?r.add(e):e instanceof jc&&e.apply(new Op(r)),r}};var Ap=function(){this._locations=null;var t=arguments[0];this._locations=t};Ap.prototype.filter=function(t){(t instanceof $c||t instanceof Qc||t instanceof eh)&&this._locations.add(new Np(t,0,t.getCoordinate()))},Ap.prototype.interfaces_=function(){return[Dc]},Ap.prototype.getClass=function(){return Ap},Ap.getLocations=function(t){var e=new cc;return t.apply(new Ap(e)),e};var Rp=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Lp,this._minDistanceLocation=null,this._minDistance=nl.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];this._geom=[t,e],this._terminateDistance=0}else if(3===arguments.length){var r=arguments[0],n=arguments[1],i=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=r,this._geom[1]=n,this._terminateDistance=i}};Rp.prototype.computeContainmentDistance=function(){var t=this;if(0===arguments.length){var e=new Array(2).fill(null);if(this.computeContainmentDistance(0,e),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,e)}else if(2===arguments.length){var r=arguments[0],n=arguments[1],i=1-r,o=Pp.getPolygons(this._geom[r]);if(o.size()>0){var s=Ap.getLocations(this._geom[i]);if(this.computeContainmentDistance(s,o,n),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[i]=n[0],this._minDistanceLocation[r]=n[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&yl(arguments[0],uc)&&yl(arguments[1],uc)){for(var a=arguments[0],u=arguments[1],l=arguments[2],c=0;c<a.size();c++)for(var h=a.get(c),f=0;f<u.size();f++)if(t.computeContainmentDistance(h,u.get(f),l),t._minDistance<=t._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Np&&arguments[1]instanceof eh){var p=arguments[0],d=arguments[1],y=arguments[2],v=p.getCoordinate();if(pl.EXTERIOR!==this._ptLocator.locate(v,d))return this._minDistance=0,y[0]=p,y[1]=new Np(d,v),null}},Rp.prototype.computeMinDistanceLinesPoints=function(t,e,r){for(var n=this,i=0;i<t.size();i++)for(var o=t.get(i),s=0;s<e.size();s++){var a=e.get(s);if(n.computeMinDistance(o,a,r),n._minDistance<=n._terminateDistance)return null}},Rp.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=Mp.getLines(this._geom[0]),r=Mp.getLines(this._geom[1]),n=Op.getPoints(this._geom[0]),i=Op.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,r,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,i,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(r,n,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(n,i,t),void this.updateMinDistance(t,!1))))},Rp.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},Rp.prototype.updateMinDistance=function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},Rp.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},Rp.prototype.computeMinDistance=function(){var t=this;if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof Qc&&arguments[1]instanceof $c){var e=arguments[0],r=arguments[1],n=arguments[2];if(e.getEnvelopeInternal().distance(r.getEnvelopeInternal())>this._minDistance)return null;for(var i=e.getCoordinates(),o=r.getCoordinate(),s=0;s<i.length-1;s++){var a=Hl.distancePointLine(o,i[s],i[s+1]);if(a<t._minDistance){t._minDistance=a;var u=new _f(i[s],i[s+1]),l=u.closestPoint(o);n[0]=new Np(e,s,l),n[1]=new Np(r,0,o)}if(t._minDistance<=t._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof Qc&&arguments[1]instanceof Qc){var c=arguments[0],h=arguments[1],f=arguments[2];if(c.getEnvelopeInternal().distance(h.getEnvelopeInternal())>this._minDistance)return null;for(var p=c.getCoordinates(),d=h.getCoordinates(),y=0;y<p.length-1;y++)for(var v=0;v<d.length-1;v++){var g=Hl.distanceLineLine(p[y],p[y+1],d[v],d[v+1]);if(g<t._minDistance){t._minDistance=g;var m=new _f(p[y],p[y+1]),_=new _f(d[v],d[v+1]),b=m.closestPoints(_);f[0]=new Np(c,y,b[0]),f[1]=new Np(h,v,b[1])}if(t._minDistance<=t._terminateDistance)return null}}},Rp.prototype.computeMinDistancePoints=function(t,e,r){for(var n=this,i=0;i<t.size();i++)for(var o=t.get(i),s=0;s<e.size();s++){var a=e.get(s),u=o.getCoordinate().distance(a.getCoordinate());if(u<n._minDistance&&(n._minDistance=u,r[0]=new Np(o,0,o.getCoordinate()),r[1]=new Np(a,0,a.getCoordinate())),n._minDistance<=n._terminateDistance)return null}},Rp.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new rl("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},Rp.prototype.computeMinDistanceLines=function(t,e,r){for(var n=this,i=0;i<t.size();i++)for(var o=t.get(i),s=0;s<e.size();s++){var a=e.get(s);if(n.computeMinDistance(o,a,r),n._minDistance<=n._terminateDistance)return null}},Rp.prototype.interfaces_=function(){return[]},Rp.prototype.getClass=function(){return Rp},Rp.distance=function(t,e){return new Rp(t,e).distance()},Rp.isWithinDistance=function(t,e,r){return new Rp(t,e,r).distance()<=r},Rp.nearestPoints=function(t,e){return new Rp(t,e).nearestPoints()};var Fp=function(){this._pt=[new ll,new ll],this._distance=nl.NaN,this._isNull=!0};Fp.prototype.getCoordinates=function(){return this._pt},Fp.prototype.getCoordinate=function(t){return this._pt[t]},Fp.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],r=arguments[1];if(this._isNull)return this.initialize(e,r),null;var n=e.distance(r);n<this._distance&&this.initialize(e,r,n)}},Fp.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var r=arguments[0],n=arguments[1],i=arguments[2];this._pt[0].setCoordinate(r),this._pt[1].setCoordinate(n),this._distance=i,this._isNull=!1}},Fp.prototype.toString=function(){return kl.toLineString(this._pt[0],this._pt[1])},Fp.prototype.getDistance=function(){return this._distance},Fp.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],r=arguments[1];if(this._isNull)return this.initialize(e,r),null;var n=e.distance(r);n>this._distance&&this.initialize(e,r,n)}},Fp.prototype.interfaces_=function(){return[]},Fp.prototype.getClass=function(){return Fp};var Dp=function(){};Dp.prototype.interfaces_=function(){return[]},Dp.prototype.getClass=function(){return Dp},Dp.computeDistance=function(){if(arguments[2]instanceof Fp&&arguments[0]instanceof Qc&&arguments[1]instanceof ll)for(var t=arguments[0],e=arguments[1],r=arguments[2],n=new _f,i=t.getCoordinates(),o=0;o<i.length-1;o++){n.setCoordinates(i[o],i[o+1]);var s=n.closestPoint(e);r.setMinimum(s,e)}else if(arguments[2]instanceof Fp&&arguments[0]instanceof eh&&arguments[1]instanceof ll){var a=arguments[0],u=arguments[1],l=arguments[2];Dp.computeDistance(a.getExteriorRing(),u,l);for(var c=0;c<a.getNumInteriorRing();c++)Dp.computeDistance(a.getInteriorRingN(c),u,l)}else if(arguments[2]instanceof Fp&&arguments[0]instanceof Yl&&arguments[1]instanceof ll){var h=arguments[0],f=arguments[1],p=arguments[2];if(h instanceof Qc)Dp.computeDistance(h,f,p);else if(h instanceof eh)Dp.computeDistance(h,f,p);else if(h instanceof jc)for(var d=h,y=0;y<d.getNumGeometries();y++){var v=d.getGeometryN(y);Dp.computeDistance(v,f,p)}else p.setMinimum(h.getCoordinate(),f)}else if(arguments[2]instanceof Fp&&arguments[0]instanceof _f&&arguments[1]instanceof ll){var g=arguments[0],m=arguments[1],_=arguments[2],b=g.closestPoint(m);_.setMinimum(b,m)}};var kp=function(){this._g0=null,this._g1=null,this._ptDist=new Fp,this._densifyFrac=0;var t=arguments[0],e=arguments[1];this._g0=t,this._g1=e},jp={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};kp.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},kp.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new rl("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},kp.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},kp.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},kp.prototype.computeOrientedDistance=function(t,e,r){var n=new Gp(e);if(t.apply(n),r.setMaximum(n.getMaxPointDistance()),this._densifyFrac>0){var i=new Bp(e,this._densifyFrac);t.apply(i),r.setMaximum(i.getMaxPointDistance())}},kp.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},kp.prototype.interfaces_=function(){return[]},kp.prototype.getClass=function(){return kp},kp.distance=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],r=new kp(t,e);return r.distance()}if(3===arguments.length){var n=arguments[0],i=arguments[1],o=arguments[2],s=new kp(n,i);return s.setDensifyFraction(o),s.distance()}},jp.MaxPointDistanceFilter.get=function(){return Gp},jp.MaxDensifiedByFractionDistanceFilter.get=function(){return Bp},Object.defineProperties(kp,jp);var Gp=function(){this._maxPtDist=new Fp,this._minPtDist=new Fp,this._euclideanDist=new Dp,this._geom=null;var t=arguments[0];this._geom=t};Gp.prototype.filter=function(t){this._minPtDist.initialize(),Dp.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Gp.prototype.getMaxPointDistance=function(){return this._maxPtDist},Gp.prototype.interfaces_=function(){return[Kl]},Gp.prototype.getClass=function(){return Gp};var Bp=function(){this._maxPtDist=new Fp,this._minPtDist=new Fp,this._geom=null,this._numSubSegs=0;var t=arguments[0],e=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))};Bp.prototype.filter=function(t,e){var r=this;if(0===e)return null;for(var n=t.getCoordinate(e-1),i=t.getCoordinate(e),o=(i.x-n.x)/this._numSubSegs,s=(i.y-n.y)/this._numSubSegs,a=0;a<this._numSubSegs;a++){var u=n.x+a*o,l=n.y+a*s,c=new ll(u,l);r._minPtDist.initialize(),Dp.computeDistance(r._geom,c,r._minPtDist),r._maxPtDist.setMaximum(r._minPtDist)}},Bp.prototype.isDone=function(){return!1},Bp.prototype.isGeometryChanged=function(){return!1},Bp.prototype.getMaxPointDistance=function(){return this._maxPtDist},Bp.prototype.interfaces_=function(){return[kc]},Bp.prototype.getClass=function(){return Bp};var Up=function(t,e,r){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=r||null},qp={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};Up.prototype.checkMaximumDistance=function(t,e,r){var n=new kp(e,t);if(n.setDensifyFraction(.25),this._maxDistanceFound=n.orientedDistance(),this._maxDistanceFound>r){this._isValid=!1;var i=n.getCoordinates();this._errorLocation=i[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+kl.toLineString(i[0],i[1])+")"}},Up.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=Up.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),Up.VERBOSE&&Ll.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},Up.prototype.checkNegativeValid=function(){if(!(this._input instanceof eh||this._input instanceof ih||this._input instanceof jc))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},Up.prototype.getErrorIndicator=function(){return this._errorIndicator},Up.prototype.checkMinimumDistance=function(t,e,r){var n=new Rp(t,e,r);if(this._minDistanceFound=n.distance(),this._minDistanceFound<r){this._isValid=!1;var i=n.nearestPoints();this._errorLocation=n.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+kl.toLineString(i[0],i[1])+" )"}},Up.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},Up.prototype.getErrorLocation=function(){return this._errorLocation},Up.prototype.getPolygonLines=function(t){for(var e=new cc,r=new Mp(e),n=Pp.getPolygons(t).iterator();n.hasNext();){n.next().apply(r)}return t.getFactory().buildGeometry(e)},Up.prototype.getErrorMessage=function(){return this._errMsg},Up.prototype.interfaces_=function(){return[]},Up.prototype.getClass=function(){return Up},qp.VERBOSE.get=function(){return!1},qp.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Up,qp);var zp=function(t,e,r){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=r||null},Vp={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};zp.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},zp.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*zp.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new Tl(this._input.getEnvelopeInternal());e.expandBy(this._distance);var r=new Tl(this._result.getEnvelopeInternal());r.expandBy(t),r.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(r)),this.report("Envelope")},zp.prototype.checkDistance=function(){var t=new Up(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},zp.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();this._distance>0&&t>e&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},zp.prototype.checkPolygonal=function(){this._result instanceof eh||this._result instanceof ih||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},zp.prototype.getErrorIndicator=function(){return this._errorIndicator},zp.prototype.getErrorLocation=function(){return this._errorLocation},zp.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},zp.prototype.report=function(t){if(!zp.VERBOSE)return null;Ll.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},zp.prototype.getErrorMessage=function(){return this._errorMsg},zp.prototype.interfaces_=function(){return[]},zp.prototype.getClass=function(){return zp},zp.isValidMsg=function(t,e,r){var n=new zp(t,e,r);return n.isValid()?null:n.getErrorMessage()},zp.isValid=function(t,e,r){return!!new zp(t,e,r).isValid()},Vp.VERBOSE.get=function(){return!1},Vp.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(zp,Vp);var Wp=function(){this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};Wp.prototype.getCoordinates=function(){return this._pts},Wp.prototype.size=function(){return this._pts.length},Wp.prototype.getCoordinate=function(t){return this._pts[t]},Wp.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Wp.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:yf.octant(this.getCoordinate(t),this.getCoordinate(t+1))},Wp.prototype.setData=function(t){this._data=t},Wp.prototype.getData=function(){return this._data},Wp.prototype.toString=function(){return kl.toLineString(new ch(this._pts))},Wp.prototype.interfaces_=function(){return[vf]},Wp.prototype.getClass=function(){return Wp};var Hp=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new cc,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null};Hp.prototype.getInteriorIntersection=function(){return this._interiorIntersection},Hp.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},Hp.prototype.getIntersectionSegments=function(){return this._intSegments},Hp.prototype.count=function(){return this._intersectionCount},Hp.prototype.getIntersections=function(){return this._intersections},Hp.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Hp.prototype.setKeepIntersections=function(t){this._keepIntersections=t},Hp.prototype.processIntersections=function(t,e,r,n){if(!this._findAllIntersections&&this.hasIntersection())return null;if(t===r&&e===n)return null;if(this._isCheckEndSegmentsOnly&&!(this.isEndSegment(t,e)||this.isEndSegment(r,n)))return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=r.getCoordinates()[n],a=r.getCoordinates()[n+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=i,this._intSegments[1]=o,this._intSegments[2]=s,this._intSegments[3]=a,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},Hp.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},Hp.prototype.hasIntersection=function(){return null!==this._interiorIntersection},Hp.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},Hp.prototype.interfaces_=function(){return[Kf]},Hp.prototype.getClass=function(){return Hp},Hp.createAllIntersectionsFinder=function(t){var e=new Hp(t);return e.setFindAllIntersections(!0),e},Hp.createAnyIntersectionFinder=function(t){return new Hp(t)},Hp.createIntersectionCounter=function(t){var e=new Hp(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var Xp=function(){this._li=new zl,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t};Xp.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},Xp.prototype.getIntersections=function(){return this._segInt.getIntersections()},Xp.prototype.isValid=function(){return this.execute(),this._isValid},Xp.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Xp.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new Hp(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new Ef;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},Xp.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new Oh(this.getErrorMessage(),this._segInt.getInteriorIntersection())},Xp.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+kl.toLineString(t[0],t[1])+" and "+kl.toLineString(t[2],t[3])},Xp.prototype.interfaces_=function(){return[]},Xp.prototype.getClass=function(){return Xp},Xp.computeIntersections=function(t){var e=new Xp(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var Zp=function t(){this._nv=null;var e=arguments[0];this._nv=new Xp(t.toSegmentStrings(e))};Zp.prototype.checkValid=function(){this._nv.checkValid()},Zp.prototype.interfaces_=function(){return[]},Zp.prototype.getClass=function(){return Zp},Zp.toSegmentStrings=function(t){for(var e=new cc,r=t.iterator();r.hasNext();){var n=r.next();e.add(new Wp(n.getCoordinates(),n))}return e},Zp.checkValid=function(t){new Zp(t).checkValid()};var Yp=function(t){this._mapOp=t};Yp.prototype.map=function(t){for(var e=new cc,r=0;r<t.getNumGeometries();r++){var n=this._mapOp.map(t.getGeometryN(r));n.isEmpty()||e.add(n)}return t.getFactory().createGeometryCollection(_h.toGeometryArray(e))},Yp.prototype.interfaces_=function(){return[]},Yp.prototype.getClass=function(){return Yp},Yp.map=function(t,e){return new Yp(e).map(t)};var Jp=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new cc,this._resultLineList=new cc;var t=arguments[0],e=arguments[1],r=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=r};Jp.prototype.collectLines=function(t){for(var e=this,r=this._op.getGraph().getEdgeEnds().iterator();r.hasNext();){var n=r.next();e.collectLineEdge(n,t,e._lineEdgesList),e.collectBoundaryTouchEdge(n,t,e._lineEdgesList)}},Jp.prototype.labelIsolatedLine=function(t,e){var r=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,r)},Jp.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},Jp.prototype.collectLineEdge=function(t,e,r){var n=t.getLabel(),i=t.getEdge();t.isLineEdge()&&(t.isVisited()||!Nd.isResultOfOp(n,e)||i.isCovered()||(r.add(i),t.setVisitedEdge(!0)))},Jp.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();){t.next().getEdges().findCoveredLineEdges()}for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var r=e.next(),n=r.getEdge();if(r.isLineEdge()&&!n.isCoveredSet()){var i=this._op.isCoveredByA(r.getCoordinate());n.setCovered(i)}}},Jp.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var r=e.next(),n=r.getLabel();r.isIsolated()&&(n.isNull(0)?this.labelIsolatedLine(r,0):this.labelIsolatedLine(r,1))}},Jp.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var r=e.next(),n=this._geometryFactory.createLineString(r.getCoordinates());this._resultLineList.add(n),r.setInResult(!0)}},Jp.prototype.collectBoundaryTouchEdge=function(t,e,r){var n=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(Bl.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(Nd.isResultOfOp(n,e)&&e===Nd.INTERSECTION&&(r.add(t.getEdge()),t.setVisitedEdge(!0))))},Jp.prototype.interfaces_=function(){return[]},Jp.prototype.getClass=function(){return Jp};var Qp=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new cc;var t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e};Qp.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var r=this._geometryFactory.createPoint(e);this._resultPointList.add(r)}},Qp.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var r=e.next();if(!r.isInResult()&&(!r.isIncidentEdgeInResult()&&(0===r.getEdges().getDegree()||t===Nd.INTERSECTION))){var n=r.getLabel();Nd.isResultOfOp(n,t)&&this.filterCoveredNodeToPoint(r)}}},Qp.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},Qp.prototype.interfaces_=function(){return[]},Qp.prototype.getClass=function(){return Qp};var Kp=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};Kp.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},Kp.prototype.transformPolygon=function(t,e){var r=!0,n=this.transformLinearRing(t.getExteriorRing(),t);null!==n&&n instanceof nh&&!n.isEmpty()||(r=!1);for(var i=new cc,o=0;o<t.getNumInteriorRing();o++){var s=this.transformLinearRing(t.getInteriorRingN(o),t);null===s||s.isEmpty()||(s instanceof nh||(r=!1),i.add(s))}if(r)return this._factory.createPolygon(n,i.toArray([]));var a=new cc;return null!==n&&a.add(n),a.addAll(i),this._factory.buildGeometry(a)},Kp.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},Kp.prototype.getInputGeometry=function(){return this._inputGeom},Kp.prototype.transformMultiLineString=function(t,e){for(var r=new cc,n=0;n<t.getNumGeometries();n++){var i=this.transformLineString(t.getGeometryN(n),t);null!==i&&(i.isEmpty()||r.add(i))}return this._factory.buildGeometry(r)},Kp.prototype.transformCoordinates=function(t,e){return this.copy(t)},Kp.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},Kp.prototype.transformMultiPoint=function(t,e){for(var r=new cc,n=0;n<t.getNumGeometries();n++){var i=this.transformPoint(t.getGeometryN(n),t);null!==i&&(i.isEmpty()||r.add(i))}return this._factory.buildGeometry(r)},Kp.prototype.transformMultiPolygon=function(t,e){for(var r=new cc,n=0;n<t.getNumGeometries();n++){var i=this.transformPolygon(t.getGeometryN(n),t);null!==i&&(i.isEmpty()||r.add(i))}return this._factory.buildGeometry(r)},Kp.prototype.copy=function(t){return t.copy()},Kp.prototype.transformGeometryCollection=function(t,e){for(var r=new cc,n=0;n<t.getNumGeometries();n++){var i=this.transform(t.getGeometryN(n));null!==i&&(this._pruneEmptyGeometry&&i.isEmpty()||r.add(i))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(_h.toGeometryArray(r)):this._factory.buildGeometry(r)},Kp.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof $c)return this.transformPoint(t,null);if(t instanceof rh)return this.transformMultiPoint(t,null);if(t instanceof nh)return this.transformLinearRing(t,null);if(t instanceof Qc)return this.transformLineString(t,null);if(t instanceof Gc)return this.transformMultiLineString(t,null);if(t instanceof eh)return this.transformPolygon(t,null);if(t instanceof ih)return this.transformMultiPolygon(t,null);if(t instanceof jc)return this.transformGeometryCollection(t,null);throw new rl("Unknown Geometry subtype: "+t.getClass().getName())},Kp.prototype.transformLinearRing=function(t,e){var r=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===r)return this._factory.createLinearRing(null);var n=r.size();return n>0&&n<4&&!this._preserveType?this._factory.createLineString(r):this._factory.createLinearRing(r)},Kp.prototype.interfaces_=function(){return[]},Kp.prototype.getClass=function(){return Kp};var $p=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new _f,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof Qc&&"number"==typeof arguments[1]){var e=arguments[0],r=arguments[1];t.call(this,e.getCoordinates(),r)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var n=arguments[0],i=arguments[1];this._srcPts=n,this._isClosed=t.isClosed(n),this._snapTolerance=i}};$p.prototype.snapVertices=function(t,e){for(var r=this._isClosed?t.size()-1:t.size(),n=0;n<r;n++){var i=t.get(n),o=this.findSnapForVertex(i,e);null!==o&&(t.set(n,new ll(o)),0===n&&this._isClosed&&t.set(t.size()-1,new ll(o)))}},$p.prototype.findSnapForVertex=function(t,e){for(var r=0;r<e.length;r++){if(t.equals2D(e[r]))return null;if(t.distance(e[r])<this._snapTolerance)return e[r]}return null},$p.prototype.snapTo=function(t){var e=new fc(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},$p.prototype.snapSegments=function(t,e){if(0===e.length)return null;var r=e.length;e[0].equals2D(e[e.length-1])&&(r=e.length-1);for(var n=0;n<r;n++){var i=e[n],o=this.findSegmentIndexToSnap(i,t);o>=0&&t.add(o+1,new ll(i),!1)}},$p.prototype.findSegmentIndexToSnap=function(t,e){for(var r=this,n=nl.MAX_VALUE,i=-1,o=0;o<e.size()-1;o++){if(r._seg.p0=e.get(o),r._seg.p1=e.get(o+1),r._seg.p0.equals2D(t)||r._seg.p1.equals2D(t)){if(r._allowSnappingToSourceVertices)continue;return-1}var s=r._seg.distance(t);s<r._snapTolerance&&s<n&&(n=s,i=o)}return i},$p.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},$p.prototype.interfaces_=function(){return[]},$p.prototype.getClass=function(){return $p},$p.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var td=function(t){this._srcGeom=t||null},ed={SNAP_PRECISION_FACTOR:{configurable:!0}};td.prototype.snapTo=function(t,e){var r=this.extractTargetCoordinates(t);return new rd(e,r).transform(this._srcGeom)},td.prototype.snapToSelf=function(t,e){var r=this.extractTargetCoordinates(this._srcGeom),n=new rd(t,r,!0).transform(this._srcGeom),i=n;return e&&yl(i,th)&&(i=n.buffer(0)),i},td.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},td.prototype.extractTargetCoordinates=function(t){for(var e=new Tc,r=t.getCoordinates(),n=0;n<r.length;n++)e.add(r[n]);return e.toArray(new Array(0).fill(null))},td.prototype.computeMinimumSegmentLength=function(t){for(var e=nl.MAX_VALUE,r=0;r<t.length-1;r++){var n=t[r].distance(t[r+1]);n<e&&(e=n)}return e},td.prototype.interfaces_=function(){return[]},td.prototype.getClass=function(){return td},td.snap=function(t,e,r){var n=new Array(2).fill(null),i=new td(t);n[0]=i.snapTo(e,r);var o=new td(e);return n[1]=o.snapTo(n[0],r),n},td.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=td.computeSizeBasedSnapTolerance(t),r=t.getPrecisionModel();if(r.getType()===yh.FIXED){var n=1/r.getScale()*2/1.415;n>e&&(e=n)}return e}if(2===arguments.length){var i=arguments[0],o=arguments[1];return Math.min(td.computeOverlaySnapTolerance(i),td.computeOverlaySnapTolerance(o))}},td.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*td.SNAP_PRECISION_FACTOR},td.snapToSelf=function(t,e,r){return new td(t).snapToSelf(e,r)},ed.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(td,ed);var rd=function(t){function e(e,r,n){t.call(this),this._snapTolerance=e||null,this._snapPts=r||null,this._isSelfSnap=void 0!==n&&n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.snapLine=function(t,e){var r=new $p(t,this._snapTolerance);return r.setAllowSnappingToSourceVertices(this._isSelfSnap),r.snapTo(e)},e.prototype.transformCoordinates=function(t,e){var r=t.toCoordinateArray(),n=this.snapLine(r,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Kp),nd=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};nd.prototype.getCommon=function(){return nl.longBitsToDouble(this._commonBits)},nd.prototype.add=function(t){var e=nl.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=nd.signExpBits(this._commonBits),this._isFirst=!1,null):nd.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=nd.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=nd.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},nd.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=nl.longBitsToDouble(t),r=nl.toBinaryString(t),n="0000000000000000000000000000000000000000000000000000000000000000"+r,i=n.substring(n.length-64),o=i.substring(0,1)+"  "+i.substring(1,12)+"(exp) "+i.substring(12)+" [ "+e+" ]";return o}},nd.prototype.interfaces_=function(){return[]},nd.prototype.getClass=function(){return nd},nd.getBit=function(t,e){return 0!=(t&1<<e)?1:0},nd.signExpBits=function(t){return t>>52},nd.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},nd.numCommonMostSigMantissaBits=function(t,e){for(var r=0,n=52;n>=0;n--){if(nd.getBit(t,n)!==nd.getBit(e,n))return r;r++}return 52};var id=function(){this._commonCoord=null,this._ccFilter=new sd},od={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};id.prototype.addCommonBits=function(t){var e=new ad(this._commonCoord);t.apply(e),t.geometryChanged()},id.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new ll(this._commonCoord);e.x=-e.x,e.y=-e.y;var r=new ad(e);return t.apply(r),t.geometryChanged(),t},id.prototype.getCommonCoordinate=function(){return this._commonCoord},id.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},id.prototype.interfaces_=function(){return[]},id.prototype.getClass=function(){return id},od.CommonCoordinateFilter.get=function(){return sd},od.Translater.get=function(){return ad},Object.defineProperties(id,od);var sd=function(){this._commonBitsX=new nd,this._commonBitsY=new nd};sd.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},sd.prototype.getCommonCoordinate=function(){return new ll(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},sd.prototype.interfaces_=function(){return[Kl]},sd.prototype.getClass=function(){return sd};var ad=function(){this.trans=null;var t=arguments[0];this.trans=t};ad.prototype.filter=function(t,e){var r=t.getOrdinate(e,0)+this.trans.x,n=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,r),t.setOrdinate(e,1,n)},ad.prototype.isDone=function(){return!1},ad.prototype.isGeometryChanged=function(){return!0},ad.prototype.interfaces_=function(){return[kc]},ad.prototype.getClass=function(){return ad};var ud=function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};ud.prototype.selfSnap=function(t){return new td(t).snapTo(t,this._snapTolerance)},ud.prototype.removeCommonBits=function(t){this._cbr=new id,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},ud.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},ud.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),r=Nd.overlayOp(e[0],e[1],t);return this.prepareResult(r)},ud.prototype.checkValid=function(t){t.isValid()||Ll.out.println("Snapped geometry is invalid")},ud.prototype.computeSnapTolerance=function(){this._snapTolerance=td.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},ud.prototype.snap=function(t){var e=this.removeCommonBits(t);return td.snap(e[0],e[1],this._snapTolerance)},ud.prototype.interfaces_=function(){return[]},ud.prototype.getClass=function(){return ud},ud.overlayOp=function(t,e,r){return new ud(t,e).getResultGeometry(r)},ud.union=function(t,e){return ud.overlayOp(t,e,Nd.UNION)},ud.intersection=function(t,e){return ud.overlayOp(t,e,Nd.INTERSECTION)},ud.symDifference=function(t,e){return ud.overlayOp(t,e,Nd.SYMDIFFERENCE)},ud.difference=function(t,e){return ud.overlayOp(t,e,Nd.DIFFERENCE)};var ld=function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e};ld.prototype.getResultGeometry=function(t){var e=null,r=!1,n=null;try{e=Nd.overlayOp(this._geom[0],this._geom[1],t);r=!0}catch(t){if(!(t instanceof jl))throw t;n=t}if(!r)try{e=ud.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof jl?n:t}return e},ld.prototype.interfaces_=function(){return[]},ld.prototype.getClass=function(){return ld},ld.overlayOp=function(t,e,r){return new ld(t,e).getResultGeometry(r)},ld.union=function(t,e){return ld.overlayOp(t,e,Nd.UNION)},ld.intersection=function(t,e){return ld.overlayOp(t,e,Nd.INTERSECTION)},ld.symDifference=function(t,e){return ld.overlayOp(t,e,Nd.SYMDIFFERENCE)},ld.difference=function(t,e){return ld.overlayOp(t,e,Nd.DIFFERENCE)};var cd=function(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e};cd.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},cd.prototype.interfaces_=function(){return[]},cd.prototype.getClass=function(){return cd};var hd=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var e=arguments[0],r=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=r}else if(3===arguments.length){var n=arguments[0],i=arguments[1],o=arguments[2];this._eventType=t.INSERT,this._label=n,this._xValue=i,this._obj=o}},fd={INSERT:{configurable:!0},DELETE:{configurable:!0}};hd.prototype.isDelete=function(){return this._eventType===hd.DELETE},hd.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},hd.prototype.getObject=function(){return this._obj},hd.prototype.compareTo=function(t){var e=t;return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0},hd.prototype.getInsertEvent=function(){return this._insertEvent},hd.prototype.isInsert=function(){return this._eventType===hd.INSERT},hd.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},hd.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},hd.prototype.interfaces_=function(){return[ol]},hd.prototype.getClass=function(){return hd},fd.INSERT.get=function(){return 1},fd.DELETE.get=function(){return 2},Object.defineProperties(hd,fd);var pd=function(){};pd.prototype.interfaces_=function(){return[]},pd.prototype.getClass=function(){return pd};var dd=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],r=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=r};dd.prototype.isTrivialIntersection=function(t,e,r,n){if(t===r&&1===this._li.getIntersectionNum()){if(dd.isAdjacentSegments(e,n))return!0;if(t.isClosed()){var i=t.getNumPoints()-1;if(0===e&&n===i||0===n&&e===i)return!0}}return!1},dd.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},dd.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},dd.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},dd.prototype.isBoundaryPointInternal=function(t,e){for(var r=e.iterator();r.hasNext();){var n=r.next().getCoordinate();if(t.isIntersection(n))return!0}return!1},dd.prototype.hasProperIntersection=function(){return this._hasProper},dd.prototype.hasIntersection=function(){return this._hasIntersection},dd.prototype.isDone=function(){return this._isDone},dd.prototype.isBoundaryPoint=function(t,e){return null!==e&&(!!this.isBoundaryPointInternal(t,e[0])||!!this.isBoundaryPointInternal(t,e[1]))},dd.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},dd.prototype.addIntersections=function(t,e,r,n){if(t===r&&e===n)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=r.getCoordinates()[n],a=r.getCoordinates()[n+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),r.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,r,n)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),r.addIntersections(this._li,n,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},dd.prototype.interfaces_=function(){return[]},dd.prototype.getClass=function(){return dd},dd.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var yd=function(t){function e(){t.call(this),this.events=new cc,this.nOverlaps=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvents=function(){nf.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},e.prototype.computeIntersections=function(){var t=this;if(1===arguments.length){var e=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var r=0;r<this.events.size();r++){var n=t.events.get(r);if(n.isInsert()&&t.processOverlaps(r,n.getDeleteEventIndex(),n,e),e.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof dd&&yl(arguments[0],uc)&&yl(arguments[1],uc)){var i=arguments[0],o=arguments[1],s=arguments[2];this.addEdges(i,i),this.addEdges(o,o),this.computeIntersections(s)}else if("boolean"==typeof arguments[2]&&yl(arguments[0],uc)&&arguments[1]instanceof dd){var a=arguments[0],u=arguments[1],l=arguments[2];l?this.addEdges(a,null):this.addEdges(a),this.computeIntersections(u)}},e.prototype.addEdge=function(t,e){for(var r=t.getMonotoneChainEdge(),n=r.getStartIndexes(),i=0;i<n.length-1;i++){var o=new cd(r,i),s=new hd(e,r.getMinX(i),o);this.events.add(s),this.events.add(new hd(r.getMaxX(i),s))}},e.prototype.processOverlaps=function(t,e,r,n){for(var i=r.getObject(),o=t;o<e;o++){var s=this.events.get(o);if(s.isInsert()){var a=s.getObject();r.isSameLabel(s)||(i.computeIntersections(a,n),this.nOverlaps++)}}},e.prototype.addEdges=function(){var t=this;if(1===arguments.length)for(var e=arguments[0],r=e.iterator();r.hasNext();){var n=r.next();t.addEdge(n,n)}else if(2===arguments.length)for(var i=arguments[0],o=arguments[1],s=i.iterator();s.hasNext();){var a=s.next();t.addEdge(a,o)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(pd),vd=function(){this._min=nl.POSITIVE_INFINITY,this._max=nl.NEGATIVE_INFINITY},gd={NodeComparator:{configurable:!0}};vd.prototype.getMin=function(){return this._min},vd.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},vd.prototype.getMax=function(){return this._max},vd.prototype.toString=function(){return kl.toLineString(new ll(this._min,0),new ll(this._max,0))},vd.prototype.interfaces_=function(){return[]},vd.prototype.getClass=function(){return vd},gd.NodeComparator.get=function(){return md},Object.defineProperties(vd,gd);var md=function(){};md.prototype.compare=function(t,e){var r=t,n=e,i=(r._min+r._max)/2,o=(n._min+n._max)/2;return i<o?-1:i>o?1:0},md.prototype.interfaces_=function(){return[al]},md.prototype.getClass=function(){return md};var _d=function(t){function e(){t.call(this),this._item=null;var e=arguments[0],r=arguments[1],n=arguments[2];this._min=e,this._max=r,this._item=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.query=function(t,e,r){if(!this.intersects(t,e))return null;r.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(vd),bd=function(t){function e(){t.call(this),this._node1=null,this._node2=null;var e=arguments[0],r=arguments[1];this._node1=e,this._node2=r,this.buildExtent(this._node1,this._node2)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},e.prototype.query=function(t,e,r){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,r),null!==this._node2&&this._node2.query(t,e,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(vd),xd=function(){this._leaves=new cc,this._root=null,this._level=0};xd.prototype.buildTree=function(){nf.sort(this._leaves,new vd.NodeComparator);for(var t=this._leaves,e=null,r=new cc;;){if(this.buildLevel(t,r),1===r.size())return r.get(0);e=t,t=r,r=e}},xd.prototype.insert=function(t,e,r){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new _d(t,e,r))},xd.prototype.query=function(t,e,r){this.init(),this._root.query(t,e,r)},xd.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},xd.prototype.printNode=function(t){Ll.out.println(kl.toLineString(new ll(t._min,this._level),new ll(t._max,this._level)))},xd.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},xd.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var r=0;r<t.size();r+=2){var n=t.get(r);if(null===(r+1<t.size()?t.get(r):null))e.add(n);else{var i=new bd(t.get(r),t.get(r+1));e.add(i)}}},xd.prototype.interfaces_=function(){return[]},xd.prototype.getClass=function(){return xd};var Sd=function(){this._items=new cc};Sd.prototype.visitItem=function(t){this._items.add(t)},Sd.prototype.getItems=function(){return this._items},Sd.prototype.interfaces_=function(){return[$h]},Sd.prototype.getClass=function(){return Sd};var wd=function(){this._index=null;var t=arguments[0];if(!yl(t,th))throw new rl("Argument must be Polygonal");this._index=new Ed(t)},Cd={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};wd.prototype.locate=function(t){var e=new Wl(t),r=new Id(e);return this._index.query(t.y,t.y,r),e.getLocation()},wd.prototype.interfaces_=function(){return[Vf]},wd.prototype.getClass=function(){return wd},Cd.SegmentVisitor.get=function(){return Id},Cd.IntervalIndexedGeometry.get=function(){return Ed},Object.defineProperties(wd,Cd);var Id=function(){this._counter=null;var t=arguments[0];this._counter=t};Id.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},Id.prototype.interfaces_=function(){return[$h]},Id.prototype.getClass=function(){return Id};var Ed=function(){this._index=new xd;var t=arguments[0];this.init(t)};Ed.prototype.init=function(t){for(var e=Mp.getLines(t).iterator();e.hasNext();){var r=e.next().getCoordinates();this.addLine(r)}},Ed.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var r=new _f(t[e-1],t[e]),n=Math.min(r.p0.y,r.p1.y),i=Math.max(r.p0.y,r.p1.y);this._index.insert(n,i,r)}},Ed.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],r=new Sd;return this._index.query(t,e,r),r.getItems()}if(3===arguments.length){var n=arguments[0],i=arguments[1],o=arguments[2];this._index.query(n,i,o)}},Ed.prototype.interfaces_=function(){return[]},Ed.prototype.getClass=function(){return Ed};var Pd=function(t){function e(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new dh,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Lp,2===arguments.length){var e=arguments[0],r=arguments[1],n=$l.OGC_SFS_BOUNDARY_RULE;this._argIndex=e,this._parentGeom=r,this._boundaryNodeRule=n,null!==r&&this.add(r)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];this._argIndex=i,this._parentGeom=o,this._boundaryNodeRule=s,null!==o&&this.add(o)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertBoundaryPoint=function(t,r){var n=this._nodes.addNode(r).getLabel(),i=1;n.getLocation(t,Ph.ON)===pl.BOUNDARY&&i++;var o=e.determineBoundary(this._boundaryNodeRule,i);n.setLocation(t,o)},e.prototype.computeSelfNodes=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var r=arguments[0],n=arguments[1],i=arguments[2],o=new dd(r,!0,!1);o.setIsDoneIfProperInt(i);var s=this.createEdgeSetIntersector(),a=this._parentGeom instanceof nh||this._parentGeom instanceof eh||this._parentGeom instanceof ih,u=n||!a;return s.computeIntersections(this._edges,o,u),this.addSelfIntersectionNodes(this._argIndex),o}},e.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();){e.next().eiList.addSplitEdges(t)}},e.prototype.computeEdgeIntersections=function(t,e,r){var n=new dd(e,r,!0);return n.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,n),n},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof $c){var t=arguments[0],e=t.getCoordinate();this.insertPoint(this._argIndex,e,pl.INTERIOR)}else if(arguments[0]instanceof ll){var r=arguments[0];this.insertPoint(this._argIndex,r,pl.INTERIOR)}},e.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),pl.EXTERIOR,pl.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var r=t.getInteriorRingN(e);this.addPolygonRing(r,pl.INTERIOR,pl.EXTERIOR)}},e.prototype.addEdge=function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],pl.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],pl.BOUNDARY)},e.prototype.addLineString=function(t){var e=pc.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var r=new sp(e,new Dh(this._argIndex,pl.INTERIOR));this._lineEdgeMap.put(t,r),this.insertEdge(r),Bl.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),r=0,n=t.iterator();n.hasNext();){var i=n.next();e[r++]=i.getCoordinate().copy()}return e},e.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(t,e,r){if(this.isBoundaryNode(t,e))return null;r===pl.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,r)},e.prototype.addPolygonRing=function(t,e,r){if(t.isEmpty())return null;var n=pc.removeRepeatedPoints(t.getCoordinates());if(n.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=n[0],null;var i=e,o=r;Hl.isCCW(n)&&(i=r,o=e);var s=new sp(n,new Dh(this._argIndex,pl.BOUNDARY,i,o));this._lineEdgeMap.put(t,s),this.insertEdge(s),this.insertPoint(this._argIndex,n[0],pl.BOUNDARY)},e.prototype.insertPoint=function(t,e,r){var n=this._nodes.addNode(e),i=n.getLabel();null===i?n._label=new Dh(t,r):i.setLocation(t,r)},e.prototype.createEdgeSetIntersector=function(){return new yd},e.prototype.addSelfIntersectionNodes=function(t){for(var e=this._edges.iterator();e.hasNext();)for(var r=e.next(),n=r.getLabel().getLocation(t),i=r.eiList.iterator();i.hasNext();){var o=i.next();this.addSelfIntersectionNode(t,o.coord,n)}},e.prototype.add=function(){if(1!==arguments.length)return t.prototype.add.apply(this,arguments);var e=arguments[0];if(e.isEmpty())return null;if(e instanceof ih&&(this._useBoundaryDeterminationRule=!1),e instanceof eh)this.addPolygon(e);else if(e instanceof Qc)this.addLineString(e);else if(e instanceof $c)this.addPoint(e);else if(e instanceof rh)this.addCollection(e);else if(e instanceof Gc)this.addCollection(e);else if(e instanceof ih)this.addCollection(e);else{if(!(e instanceof jc))throw new Error(e.getClass().getName());this.addCollection(e)}},e.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var r=t.getGeometryN(e);this.add(r)}},e.prototype.locate=function(t){return yl(this._parentGeom,th)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new wd(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},e.prototype.findEdge=function(){if(1===arguments.length){var e=arguments[0];return this._lineEdgeMap.get(e)}return t.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(t,e){return t.isInBoundary(e)?pl.BOUNDARY:pl.INTERIOR},e}(Zh),Md=function(){if(this._li=new zl,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new Pd(0,t)}else if(2===arguments.length){var e=arguments[0],r=arguments[1],n=$l.OGC_SFS_BOUNDARY_RULE;e.getPrecisionModel().compareTo(r.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(r.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Pd(0,e,n),this._arg[1]=new Pd(1,r,n)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];i.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Pd(0,i,s),this._arg[1]=new Pd(1,o,s)}};Md.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},Md.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},Md.prototype.interfaces_=function(){return[]},Md.prototype.getClass=function(){return Md};var Ld=function(){};Ld.prototype.interfaces_=function(){return[]},Ld.prototype.getClass=function(){return Ld},Ld.map=function(){if(arguments[0]instanceof Yl&&yl(arguments[1],Ld.MapOp)){for(var t=arguments[0],e=arguments[1],r=new cc,n=0;n<t.getNumGeometries();n++){var i=e.map(t.getGeometryN(n));null!==i&&r.add(i)}return t.getFactory().buildGeometry(r)}if(yl(arguments[0],oc)&&yl(arguments[1],Ld.MapOp)){for(var o=arguments[0],s=arguments[1],a=new cc,u=o.iterator();u.hasNext();){var l=u.next(),c=s.map(l);null!==c&&a.add(c)}return a}},Ld.MapOp=function(){};var Nd=function(t){function e(){var e=arguments[0],r=arguments[1];t.call(this,e,r),this._ptLocator=new Lp,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Qf,this._resultPolyList=new cc,this._resultLineList=new cc,this._resultPointList=new cc,this._graph=new Zh(new Yf),this._geomFact=e.getFactory()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var r=e.getLabel(),n=t.getLabel();e.isPointwiseEqual(t)||(n=new Dh(t.getLabel())).flip();var i=e.getDepth();i.isNull()&&i.add(r),i.add(n),r.merge(n)}else this._edgeList.add(t)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),r=e.getSym();e.isInResult()&&r.isInResult()&&(e.setInResult(!1),r.setInResult(!1))}},e.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},e.prototype.computeGeometry=function(t,r,n,i){var o=new cc;return o.addAll(t),o.addAll(r),o.addAll(n),o.isEmpty()?e.createEmptyResult(i,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(o)},e.prototype.mergeSymLabels=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){t.next().getEdges().mergeSymLabels()}},e.prototype.isCovered=function(t,e){for(var r=e.iterator();r.hasNext();){var n=r.next();if(this._ptLocator.locate(t,n)!==pl.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var t=new cc,e=this._edgeList.iterator();e.hasNext();){var r=e.next();r.isCollapsed()&&(e.remove(),t.add(r.getCollapsedEdge()))}this._edgeList.addAll(t)},e.prototype.updateNodeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),r=e.getEdges().getLabel();e.getLabel().merge(r)}},e.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this._resultGeom},e.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var r=e.next();this.insertUniqueEdge(r)}},e.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new cc;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),Zp.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var r=new Yh(this._geomFact);r.add(this._graph),this._resultPolyList=r.getPolygons();var n=new Jp(this,this._geomFact,this._ptLocator);this._resultLineList=n.build(t);var i=new Qp(this,this._geomFact,this._ptLocator);this._resultPointList=i.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},e.prototype.labelIncompleteNode=function(t,e){var r=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,r)},e.prototype.copyPoints=function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var r=e.next();this._graph.addNode(r.getCoordinate()).setLabel(t,r.getLabel().getLocation(t))}},e.prototype.findResultAreaEdges=function(t){for(var r=this._graph.getEdgeEnds().iterator();r.hasNext();){var n=r.next(),i=n.getLabel();i.isArea()&&!n.isInteriorAreaEdge()&&e.isResultOfOp(i.getLocation(0,Ph.RIGHT),i.getLocation(1,Ph.RIGHT),t)&&n.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),r=e.getLabel(),n=e.getDepth();if(!n.isNull()){n.normalize();for(var i=0;i<2;i++)r.isNull(i)||!r.isArea()||n.isNull(i)||(0===n.getDelta(i)?r.toLine(i):(Bl.isTrue(!n.isNull(i,Ph.LEFT),"depth of LEFT side has not been initialized"),r.setLocation(i,Ph.LEFT,n.getLocation(i,Ph.LEFT)),Bl.isTrue(!n.isNull(i,Ph.RIGHT),"depth of RIGHT side has not been initialized"),r.setLocation(i,Ph.RIGHT,n.getLocation(i,Ph.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){t.next().getEdges().computeLabelling(this._arg)}this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),r=e.getLabel();e.isIsolated()&&(r.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(r)}},e.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Md);Nd.overlayOp=function(t,e,r){return new Nd(t,e).getResultGeometry(r)},Nd.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return Nd.createEmptyResult(Nd.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var r=e;return Yp.map(t,{interfaces_:function(){return[Ld.MapOp]},map:function(t){return t.intersection(r)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),ld.overlayOp(t,e,Nd.INTERSECTION)},Nd.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Nd.createEmptyResult(Nd.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),ld.overlayOp(t,e,Nd.SYMDIFFERENCE)},Nd.resultDimension=function(t,e,r){var n=e.getDimension(),i=r.getDimension(),o=-1;switch(t){case Nd.INTERSECTION:o=Math.min(n,i);break;case Nd.UNION:o=Math.max(n,i);break;case Nd.DIFFERENCE:o=n;break;case Nd.SYMDIFFERENCE:o=Math.max(n,i)}return o},Nd.createEmptyResult=function(t,e,r,n){var i=null;switch(Nd.resultDimension(t,e,r)){case-1:i=n.createGeometryCollection(new Array(0).fill(null));break;case 0:i=n.createPoint();break;case 1:i=n.createLineString();break;case 2:i=n.createPolygon()}return i},Nd.difference=function(t,e){return t.isEmpty()?Nd.createEmptyResult(Nd.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),ld.overlayOp(t,e,Nd.DIFFERENCE))},Nd.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],r=t.getLocation(0),n=t.getLocation(1);return Nd.isResultOfOp(r,n,e)}if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];switch(i===pl.BOUNDARY&&(i=pl.INTERIOR),o===pl.BOUNDARY&&(o=pl.INTERIOR),s){case Nd.INTERSECTION:return i===pl.INTERIOR&&o===pl.INTERIOR;case Nd.UNION:return i===pl.INTERIOR||o===pl.INTERIOR;case Nd.DIFFERENCE:return i===pl.INTERIOR&&o!==pl.INTERIOR;case Nd.SYMDIFFERENCE:return i===pl.INTERIOR&&o!==pl.INTERIOR||i!==pl.INTERIOR&&o===pl.INTERIOR}return!1}},Nd.INTERSECTION=1,Nd.UNION=2,Nd.DIFFERENCE=3,Nd.SYMDIFFERENCE=4;var Td=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Lp,this._seg=new _f;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)};Td.prototype.isWithinToleranceOfBoundary=function(t){for(var e=this,r=0;r<this._linework.getNumGeometries();r++)for(var n=e._linework.getGeometryN(r).getCoordinateSequence(),i=0;i<n.size()-1;i++){if(n.getCoordinate(i,e._seg.p0),n.getCoordinate(i+1,e._seg.p1),e._seg.distance(t)<=e._boundaryDistanceTolerance)return!0}return!1},Td.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?pl.BOUNDARY:this._ptLocator.locate(t,this._g)},Td.prototype.extractLinework=function(t){var e=new Od;t.apply(e);var r=e.getLinework(),n=_h.toLineStringArray(r);return t.getFactory().createMultiLineString(n)},Td.prototype.interfaces_=function(){return[]},Td.prototype.getClass=function(){return Td};var Od=function(){this._linework=null,this._linework=new cc};Od.prototype.getLinework=function(){return this._linework},Od.prototype.filter=function(t){if(t instanceof eh){var e=t;this._linework.add(e.getExteriorRing());for(var r=0;r<e.getNumInteriorRing();r++)this._linework.add(e.getInteriorRingN(r))}},Od.prototype.interfaces_=function(){return[Dc]},Od.prototype.getClass=function(){return Od};var Ad=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var t=arguments[0];this._g=t};Ad.prototype.extractPoints=function(t,e,r){for(var n=t.getCoordinates(),i=0;i<n.length-1;i++)this.computeOffsetPoints(n[i],n[i+1],e,r)},Ad.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},Ad.prototype.getPoints=function(t){for(var e=new cc,r=Mp.getLines(this._g).iterator();r.hasNext();){var n=r.next();this.extractPoints(n,t,e)}return e},Ad.prototype.computeOffsetPoints=function(t,e,r,n){var i=e.x-t.x,o=e.y-t.y,s=Math.sqrt(i*i+o*o),a=r*i/s,u=r*o/s,l=(e.x+t.x)/2,c=(e.y+t.y)/2;if(this._doLeft){var h=new ll(l-u,c+a);n.add(h)}if(this._doRight){var f=new ll(l+u,c-a);n.add(f)}},Ad.prototype.interfaces_=function(){return[]},Ad.prototype.getClass=function(){return Ad};var Rd=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new cc;var e=arguments[0],r=arguments[1],n=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,r),this._geom=[e,r,n],this._locFinder=[new Td(this._geom[0],this._boundaryDistanceTolerance),new Td(this._geom[1],this._boundaryDistanceTolerance),new Td(this._geom[2],this._boundaryDistanceTolerance)]},Fd={TOLERANCE:{configurable:!0}};Rd.prototype.reportResult=function(t,e,r){Ll.out.println("Overlay result invalid - A:"+pl.toLocationSymbol(e[0])+" B:"+pl.toLocationSymbol(e[1])+" expected:"+(r?"i":"e")+" actual:"+pl.toLocationSymbol(e[2]))},Rd.prototype.isValid=function(t){this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]);var e=this.checkValid(t);return e},Rd.prototype.checkValid=function(){var t=this;if(1===arguments.length){for(var e=arguments[0],r=0;r<this._testCoords.size();r++){var n=t._testCoords.get(r);if(!t.checkValid(e,n))return t._invalidLocation=n,!1}return!0}if(2===arguments.length){var i=arguments[0],o=arguments[1];return this._location[0]=this._locFinder[0].getLocation(o),this._location[1]=this._locFinder[1].getLocation(o),this._location[2]=this._locFinder[2].getLocation(o),!!Rd.hasLocation(this._location,pl.BOUNDARY)||this.isValidResult(i,this._location)}},Rd.prototype.addTestPts=function(t){var e=new Ad(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},Rd.prototype.isValidResult=function(t,e){var r=Nd.isResultOfOp(e[0],e[1],t),n=!(r^e[2]===pl.INTERIOR);return n||this.reportResult(t,e,r),n},Rd.prototype.getInvalidLocation=function(){return this._invalidLocation},Rd.prototype.interfaces_=function(){return[]},Rd.prototype.getClass=function(){return Rd},Rd.hasLocation=function(t,e){for(var r=0;r<3;r++)if(t[r]===e)return!0;return!1},Rd.computeBoundaryDistanceTolerance=function(t,e){return Math.min(td.computeSizeBasedSnapTolerance(t),td.computeSizeBasedSnapTolerance(e))},Rd.isValid=function(t,e,r,n){return new Rd(t,e,n).isValid(r)},Fd.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(Rd,Fd);var Dd=function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e};Dd.prototype.extractElements=function(t,e){if(null===t)return null;for(var r=0;r<t.getNumGeometries();r++){var n=t.getGeometryN(r);this._skipEmpty&&n.isEmpty()||e.add(n)}},Dd.prototype.combine=function(){for(var t=new cc,e=this._inputGeoms.iterator();e.hasNext();){var r=e.next();this.extractElements(r,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},Dd.prototype.interfaces_=function(){return[]},Dd.prototype.getClass=function(){return Dd},Dd.combine=function(){if(1===arguments.length){var t=arguments[0],e=new Dd(t);return e.combine()}if(2===arguments.length){var r=arguments[0],n=arguments[1],i=new Dd(Dd.createList(r,n));return i.combine()}if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2],u=new Dd(Dd.createList(o,s,a));return u.combine()}},Dd.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},Dd.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],r=new cc;return r.add(t),r.add(e),r}if(3===arguments.length){var n=arguments[0],i=arguments[1],o=arguments[2],s=new cc;return s.add(n),s.add(i),s.add(o),s}};var kd=function(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new cc)},jd={STRTREE_NODE_CAPACITY:{configurable:!0}};kd.prototype.reduceToGeometries=function(t){for(var e=new cc,r=t.iterator();r.hasNext();){var n=r.next(),i=null;yl(n,uc)?i=this.unionTree(n):n instanceof Yl&&(i=n),e.add(i)}return e},kd.prototype.extractByEnvelope=function(t,e,r){for(var n=new cc,i=0;i<e.getNumGeometries();i++){var o=e.getGeometryN(i);o.getEnvelopeInternal().intersects(t)?n.add(o):r.add(o)}return this._geomFactory.buildGeometry(n)},kd.prototype.unionOptimized=function(t,e){var r=t.getEnvelopeInternal(),n=e.getEnvelopeInternal();if(!r.intersects(n))return Dd.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var i=r.intersection(n);return this.unionUsingEnvelopeIntersection(t,e,i)},kd.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new cf(kd.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var r=e.next();t.insert(r.getEnvelopeInternal(),r)}this._inputPolys=null;var n=t.itemsTree();return this.unionTree(n)},kd.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],r=arguments[1],n=arguments[2];if(n-r<=1){var i=kd.getGeometry(e,r);return this.unionSafe(i,null)}if(n-r==2)return this.unionSafe(kd.getGeometry(e,r),kd.getGeometry(e,r+1));var o=Math.trunc((n+r)/2),s=this.binaryUnion(e,r,o),a=this.binaryUnion(e,o,n);return this.unionSafe(s,a)}},kd.prototype.repeatedUnion=function(t){for(var e=null,r=t.iterator();r.hasNext();){var n=r.next();e=null===e?n.copy():e.union(n)}return e},kd.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},kd.prototype.unionActual=function(t,e){return kd.restrictToPolygons(t.union(e))},kd.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},kd.prototype.unionUsingEnvelopeIntersection=function(t,e,r){var n=new cc,i=this.extractByEnvelope(r,t,n),o=this.extractByEnvelope(r,e,n),s=this.unionActual(i,o);return n.add(s),Dd.combine(n)},kd.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0],e=t.get(0).getFactory(),r=e.buildGeometry(t),n=r.buffer(0);return n}if(2===arguments.length){var i=arguments[0],o=arguments[1],s=i.getFactory(),a=s.createGeometryCollection([i,o]),u=a.buffer(0);return u}},kd.prototype.interfaces_=function(){return[]},kd.prototype.getClass=function(){return kd},kd.restrictToPolygons=function(t){if(yl(t,th))return t;var e=Pp.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(_h.toPolygonArray(e))},kd.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},kd.union=function(t){return new kd(t).union()},jd.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(kd,jd);var Gd=function(){};function Bd(){return new Ud}function Ud(){this.reset()}Gd.prototype.interfaces_=function(){return[]},Gd.prototype.getClass=function(){return Gd},Gd.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Nd.createEmptyResult(Nd.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),ld.overlayOp(t,e,Nd.UNION)},Ud.prototype={constructor:Ud,reset:function(){this.s=this.t=0},add:function(t){zd(qd,t,this.t),zd(this,qd.s,this.s),this.s?this.t+=qd.t:this.s=qd.t},valueOf:function(){return this.s}};var qd=new Ud;function zd(t,e,r){var n=t.s=e+r,i=n-e,o=n-i;t.t=e-o+(r-i)}var Vd=1e-6,Wd=Math.PI,Hd=Wd/2,Xd=Wd/4,Zd=2*Wd,Yd=180/Wd,Jd=Wd/180,Qd=Math.abs,Kd=Math.atan,$d=Math.atan2,ty=Math.cos,ey=Math.sin,ry=Math.sqrt;function ny(t){return t>1?0:t<-1?Wd:Math.acos(t)}function iy(t){return t>1?Hd:t<-1?-Hd:Math.asin(t)}function oy(){}function sy(t,e){t&&uy.hasOwnProperty(t.type)&&uy[t.type](t,e)}var ay={Feature:function(t,e){sy(t.geometry,e)},FeatureCollection:function(t,e){for(var r=t.features,n=-1,i=r.length;++n<i;)sy(r[n].geometry,e)}},uy={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var r=t.coordinates,n=-1,i=r.length;++n<i;)t=r[n],e.point(t[0],t[1],t[2])},LineString:function(t,e){ly(t.coordinates,e,0)},MultiLineString:function(t,e){for(var r=t.coordinates,n=-1,i=r.length;++n<i;)ly(r[n],e,0)},Polygon:function(t,e){cy(t.coordinates,e)},MultiPolygon:function(t,e){for(var r=t.coordinates,n=-1,i=r.length;++n<i;)cy(r[n],e)},GeometryCollection:function(t,e){for(var r=t.geometries,n=-1,i=r.length;++n<i;)sy(r[n],e)}};function ly(t,e,r){var n,i=-1,o=t.length-r;for(e.lineStart();++i<o;)n=t[i],e.point(n[0],n[1],n[2]);e.lineEnd()}function cy(t,e){var r=-1,n=t.length;for(e.polygonStart();++r<n;)ly(t[r],e,1);e.polygonEnd()}Bd(),Bd();function hy(t){return[$d(t[1],t[0]),iy(t[2])]}function fy(t){var e=t[0],r=t[1],n=ty(r);return[n*ty(e),n*ey(e),ey(r)]}function py(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function dy(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function yy(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function vy(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function gy(t){var e=ry(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}Bd();function my(t,e){function r(r,n){return r=t(r,n),e(r[0],r[1])}return t.invert&&e.invert&&(r.invert=function(r,n){return(r=e.invert(r,n))&&t.invert(r[0],r[1])}),r}function _y(t,e){return[t>Wd?t-Zd:t<-Wd?t+Zd:t,e]}function by(t){return function(e,r){return[(e+=t)>Wd?e-Zd:e<-Wd?e+Zd:e,r]}}function xy(t){var e=by(t);return e.invert=by(-t),e}function Sy(t,e){var r=ty(t),n=ey(t),i=ty(e),o=ey(e);function s(t,e){var s=ty(e),a=ty(t)*s,u=ey(t)*s,l=ey(e),c=l*r+a*n;return[$d(u*i-c*o,a*r-l*n),iy(c*i+u*o)]}return s.invert=function(t,e){var s=ty(e),a=ty(t)*s,u=ey(t)*s,l=ey(e),c=l*i-u*o;return[$d(u*i+l*o,a*r+c*n),iy(c*r-a*n)]},s}function wy(t,e){(e=fy(e))[0]-=t,gy(e);var r=ny(-e[1]);return((-e[2]<0?-r:r)+Zd-Vd)%Zd}function Cy(){var t,e=[];return{point:function(e,r){t.push([e,r])},lineStart:function(){e.push(t=[])},lineEnd:oy,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var r=e;return e=[],t=null,r}}}function Iy(t,e){return Qd(t[0]-e[0])<Vd&&Qd(t[1]-e[1])<Vd}function Ey(t,e,r,n){this.x=t,this.z=e,this.o=r,this.e=n,this.v=!1,this.n=this.p=null}function Py(t,e,r,n,i){var o,s,a=[],u=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,r,n=t[0],s=t[e];if(Iy(n,s)){for(i.lineStart(),o=0;o<e;++o)i.point((n=t[o])[0],n[1]);i.lineEnd()}else a.push(r=new Ey(n,t,null,!0)),u.push(r.o=new Ey(n,null,r,!1)),a.push(r=new Ey(s,t,null,!1)),u.push(r.o=new Ey(s,null,r,!0))}}),a.length){for(u.sort(e),My(a),My(u),o=0,s=u.length;o<s;++o)u[o].e=r=!r;for(var l,c,h=a[0];;){for(var f=h,p=!0;f.v;)if((f=f.n)===h)return;l=f.z,i.lineStart();do{if(f.v=f.o.v=!0,f.e){if(p)for(o=0,s=l.length;o<s;++o)i.point((c=l[o])[0],c[1]);else n(f.x,f.n.x,1,i);f=f.n}else{if(p)for(l=f.p.z,o=l.length-1;o>=0;--o)i.point((c=l[o])[0],c[1]);else n(f.x,f.p.x,-1,i);f=f.p}l=(f=f.o).z,p=!p}while(!f.v);i.lineEnd()}}}function My(t){if(e=t.length){for(var e,r,n=0,i=t[0];++n<e;)i.n=r=t[n],r.p=i,i=r;i.n=r=t[0],r.p=i}}function Ly(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}_y.invert=_y;var Ny,Ty;1===(Ny=Ly).length&&(Ty=Ny,Ny=function(t,e){return Ly(Ty(t),e)});function Oy(t){for(var e,r,n,i=t.length,o=-1,s=0;++o<i;)s+=t[o].length;for(r=new Array(s);--i>=0;)for(e=(n=t[i]).length;--e>=0;)r[--s]=n[e];return r}var Ay=1e9,Ry=-Ay;function Fy(t,e,r,n){function i(i,o){return t<=i&&i<=r&&e<=o&&o<=n}function o(i,o,a,l){var c=0,h=0;if(null==i||(c=s(i,a))!==(h=s(o,a))||u(i,o)<0^a>0)do{l.point(0===c||3===c?t:r,c>1?n:e)}while((c=(c+a+4)%4)!==h);else l.point(o[0],o[1])}function s(n,i){return Qd(n[0]-t)<Vd?i>0?0:3:Qd(n[0]-r)<Vd?i>0?2:1:Qd(n[1]-e)<Vd?i>0?1:0:i>0?3:2}function a(t,e){return u(t.x,e.x)}function u(t,e){var r=s(t,1),n=s(e,1);return r!==n?r-n:0===r?e[1]-t[1]:1===r?t[0]-e[0]:2===r?t[1]-e[1]:e[0]-t[0]}return function(s){var u,l,c,h,f,p,d,y,v,g,m,_=s,b=Cy(),x={point:S,lineStart:function(){x.point=w,l&&l.push(c=[]);g=!0,v=!1,d=y=NaN},lineEnd:function(){u&&(w(h,f),p&&v&&b.rejoin(),u.push(b.result()));x.point=S,v&&_.lineEnd()},polygonStart:function(){_=b,u=[],l=[],m=!0},polygonEnd:function(){var e=function(){for(var e=0,r=0,i=l.length;r<i;++r)for(var o,s,a=l[r],u=1,c=a.length,h=a[0],f=h[0],p=h[1];u<c;++u)o=f,s=p,f=(h=a[u])[0],p=h[1],s<=n?p>n&&(f-o)*(n-s)>(p-s)*(t-o)&&++e:p<=n&&(f-o)*(n-s)<(p-s)*(t-o)&&--e;return e}(),r=m&&e,i=(u=Oy(u)).length;(r||i)&&(s.polygonStart(),r&&(s.lineStart(),o(null,null,1,s),s.lineEnd()),i&&Py(u,a,e,o,s),s.polygonEnd());_=s,u=l=c=null}};function S(t,e){i(t,e)&&_.point(t,e)}function w(o,s){var a=i(o,s);if(l&&c.push([o,s]),g)h=o,f=s,p=a,g=!1,a&&(_.lineStart(),_.point(o,s));else if(a&&v)_.point(o,s);else{var u=[d=Math.max(Ry,Math.min(Ay,d)),y=Math.max(Ry,Math.min(Ay,y))],b=[o=Math.max(Ry,Math.min(Ay,o)),s=Math.max(Ry,Math.min(Ay,s))];!function(t,e,r,n,i,o){var s,a=t[0],u=t[1],l=0,c=1,h=e[0]-a,f=e[1]-u;if(s=r-a,h||!(s>0)){if(s/=h,h<0){if(s<l)return;s<c&&(c=s)}else if(h>0){if(s>c)return;s>l&&(l=s)}if(s=i-a,h||!(s<0)){if(s/=h,h<0){if(s>c)return;s>l&&(l=s)}else if(h>0){if(s<l)return;s<c&&(c=s)}if(s=n-u,f||!(s>0)){if(s/=f,f<0){if(s<l)return;s<c&&(c=s)}else if(f>0){if(s>c)return;s>l&&(l=s)}if(s=o-u,f||!(s<0)){if(s/=f,f<0){if(s>c)return;s>l&&(l=s)}else if(f>0){if(s<l)return;s<c&&(c=s)}return l>0&&(t[0]=a+l*h,t[1]=u+l*f),c<1&&(e[0]=a+c*h,e[1]=u+c*f),!0}}}}}(u,b,t,e,r,n)?a&&(_.lineStart(),_.point(o,s),m=!1):(v||(_.lineStart(),_.point(u[0],u[1])),_.point(b[0],b[1]),a||_.lineEnd(),m=!1)}d=o,y=s,v=a}return x}}var Dy=Bd();Bd();function ky(t){return t}Bd(),Bd();var jy=1/0,Gy=jy,By=-jy,Uy=By,qy={point:function(t,e){t<jy&&(jy=t);t>By&&(By=t);e<Gy&&(Gy=e);e>Uy&&(Uy=e)},lineStart:oy,lineEnd:oy,polygonStart:oy,polygonEnd:oy,result:function(){var t=[[jy,Gy],[By,Uy]];return By=Uy=-(Gy=jy=1/0),t}};Bd();function zy(t,e,r,n){return function(i,o){var s,a,u,l=e(o),c=i.invert(n[0],n[1]),h=Cy(),f=e(h),p=!1,d={point:y,lineStart:g,lineEnd:m,polygonStart:function(){d.point=_,d.lineStart=b,d.lineEnd=x,a=[],s=[]},polygonEnd:function(){d.point=y,d.lineStart=g,d.lineEnd=m,a=Oy(a);var t=function(t,e){var r=e[0],n=e[1],i=[ey(r),-ty(r),0],o=0,s=0;Dy.reset();for(var a=0,u=t.length;a<u;++a)if(c=(l=t[a]).length)for(var l,c,h=l[c-1],f=h[0],p=h[1]/2+Xd,d=ey(p),y=ty(p),v=0;v<c;++v,f=m,d=b,y=x,h=g){var g=l[v],m=g[0],_=g[1]/2+Xd,b=ey(_),x=ty(_),S=m-f,w=S>=0?1:-1,C=w*S,I=C>Wd,E=d*b;if(Dy.add($d(E*w*ey(C),y*x+E*ty(C))),o+=I?S+w*Zd:S,I^f>=r^m>=r){var P=dy(fy(h),fy(g));gy(P);var M=dy(i,P);gy(M);var L=(I^S>=0?-1:1)*iy(M[2]);(n>L||n===L&&(P[0]||P[1]))&&(s+=I^S>=0?1:-1)}}return(o<-1e-6||o<Vd&&Dy<-1e-6)^1&s}(s,c);a.length?(p||(o.polygonStart(),p=!0),Py(a,Wy,t,r,o)):t&&(p||(o.polygonStart(),p=!0),o.lineStart(),r(null,null,1,o),o.lineEnd()),p&&(o.polygonEnd(),p=!1),a=s=null},sphere:function(){o.polygonStart(),o.lineStart(),r(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function y(e,r){var n=i(e,r);t(e=n[0],r=n[1])&&o.point(e,r)}function v(t,e){var r=i(t,e);l.point(r[0],r[1])}function g(){d.point=v,l.lineStart()}function m(){d.point=y,l.lineEnd()}function _(t,e){u.push([t,e]);var r=i(t,e);f.point(r[0],r[1])}function b(){f.lineStart(),u=[]}function x(){_(u[0][0],u[0][1]),f.lineEnd();var t,e,r,n,i=f.clean(),l=h.result(),c=l.length;if(u.pop(),s.push(u),u=null,c)if(1&i){if((e=(r=l[0]).length-1)>0){for(p||(o.polygonStart(),p=!0),o.lineStart(),t=0;t<e;++t)o.point((n=r[t])[0],n[1]);o.lineEnd()}}else c>1&&2&i&&l.push(l.pop().concat(l.shift())),a.push(l.filter(Vy))}return d}}function Vy(t){return t.length>1}function Wy(t,e){return((t=t.x)[0]<0?t[1]-Hd-Vd:Hd-t[1])-((e=e.x)[0]<0?e[1]-Hd-Vd:Hd-e[1])}var Hy=zy(function(){return!0},function(t){var e,r=NaN,n=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,s){var a=o>0?Wd:-Wd,u=Qd(o-r);Qd(u-Wd)<Vd?(t.point(r,n=(n+s)/2>0?Hd:-Hd),t.point(i,n),t.lineEnd(),t.lineStart(),t.point(a,n),t.point(o,n),e=0):i!==a&&u>=Wd&&(Qd(r-i)<Vd&&(r-=i*Vd),Qd(o-a)<Vd&&(o-=a*Vd),n=function(t,e,r,n){var i,o,s=ey(t-r);return Qd(s)>Vd?Kd((ey(e)*(o=ty(n))*ey(r)-ey(n)*(i=ty(e))*ey(t))/(i*o*s)):(e+n)/2}(r,n,o,s),t.point(i,n),t.lineEnd(),t.lineStart(),t.point(a,n),e=0),t.point(r=o,n=s),i=a},lineEnd:function(){t.lineEnd(),r=n=NaN},clean:function(){return 2-e}}},function(t,e,r,n){var i;if(null==t)i=r*Hd,n.point(-Wd,i),n.point(0,i),n.point(Wd,i),n.point(Wd,0),n.point(Wd,-i),n.point(0,-i),n.point(-Wd,-i),n.point(-Wd,0),n.point(-Wd,i);else if(Qd(t[0]-e[0])>Vd){var o=t[0]<e[0]?Wd:-Wd;i=r*o/2,n.point(-o,i),n.point(0,i),n.point(o,i)}else n.point(e[0],e[1])},[-Wd,-Hd]);function Xy(t,e){var r=ty(t),n=r>0,i=Qd(r)>Vd;function o(t,e){return ty(t)*ty(e)>r}function s(t,e,n){var i=[1,0,0],o=dy(fy(t),fy(e)),s=py(o,o),a=o[0],u=s-a*a;if(!u)return!n&&t;var l=r*s/u,c=-r*a/u,h=dy(i,o),f=vy(i,l);yy(f,vy(o,c));var p=h,d=py(f,p),y=py(p,p),v=d*d-y*(py(f,f)-1);if(!(v<0)){var g=ry(v),m=vy(p,(-d-g)/y);if(yy(m,f),m=hy(m),!n)return m;var _,b=t[0],x=e[0],S=t[1],w=e[1];x<b&&(_=b,b=x,x=_);var C=x-b,I=Qd(C-Wd)<Vd;if(!I&&w<S&&(_=S,S=w,w=_),I||C<Vd?I?S+w>0^m[1]<(Qd(m[0]-b)<Vd?S:w):S<=m[1]&&m[1]<=w:C>Wd^(b<=m[0]&&m[0]<=x)){var E=vy(p,(-d+g)/y);return yy(E,f),[m,hy(E)]}}}function a(e,r){var i=n?t:Wd-t,o=0;return e<-i?o|=1:e>i&&(o|=2),r<-i?o|=4:r>i&&(o|=8),o}return zy(o,function(t){var e,r,u,l,c;return{lineStart:function(){l=u=!1,c=1},point:function(h,f){var p,d=[h,f],y=o(h,f),v=n?y?0:a(h,f):y?a(h+(h<0?Wd:-Wd),f):0;if(!e&&(l=u=y)&&t.lineStart(),y!==u&&(!(p=s(e,d))||Iy(e,p)||Iy(d,p))&&(d[0]+=Vd,d[1]+=Vd,y=o(d[0],d[1])),y!==u)c=0,y?(t.lineStart(),p=s(d,e),t.point(p[0],p[1])):(p=s(e,d),t.point(p[0],p[1]),t.lineEnd()),e=p;else if(i&&e&&n^y){var g;v&r||!(g=s(d,e,!0))||(c=0,n?(t.lineStart(),t.point(g[0][0],g[0][1]),t.point(g[1][0],g[1][1]),t.lineEnd()):(t.point(g[1][0],g[1][1]),t.lineEnd(),t.lineStart(),t.point(g[0][0],g[0][1])))}!y||e&&Iy(e,d)||t.point(d[0],d[1]),e=d,u=y,r=v},lineEnd:function(){u&&t.lineEnd(),e=null},clean:function(){return c|(l&&u)<<1}}},function(r,n,i,o){!function(t,e,r,n,i,o){if(r){var s=ty(e),a=ey(e),u=n*r;null==i?(i=e+n*Zd,o=e-u/2):(i=wy(s,i),o=wy(s,o),(n>0?i<o:i>o)&&(i+=n*Zd));for(var l,c=i;n>0?c>o:c<o;c-=u)l=hy([s,-a*ty(c),-a*ey(c)]),t.point(l[0],l[1])}}(o,t,e,i,r,n)},n?[0,-t]:[-Wd,t-Wd])}function Zy(t){return function(e){var r=new Yy;for(var n in t)r[n]=t[n];return r.stream=e,r}}function Yy(){}function Jy(t,e,r){var n=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=o&&t.clipExtent(null),function(t,e){t&&ay.hasOwnProperty(t.type)?ay[t.type](t,e):sy(t,e)}(r,t.stream(qy));var s=qy.result(),a=Math.min(n/(s[1][0]-s[0][0]),i/(s[1][1]-s[0][1])),u=+e[0][0]+(n-a*(s[1][0]+s[0][0]))/2,l=+e[0][1]+(i-a*(s[1][1]+s[0][1]))/2;return null!=o&&t.clipExtent(o),t.scale(150*a).translate([u,l])}Yy.prototype={constructor:Yy,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Qy=ty(30*Jd);function Ky(t,e){return+e?function(t,e){function r(n,i,o,s,a,u,l,c,h,f,p,d,y,v){var g=l-n,m=c-i,_=g*g+m*m;if(_>4*e&&y--){var b=s+f,x=a+p,S=u+d,w=ry(b*b+x*x+S*S),C=iy(S/=w),I=Qd(Qd(S)-1)<Vd||Qd(o-h)<Vd?(o+h)/2:$d(x,b),E=t(I,C),P=E[0],M=E[1],L=P-n,N=M-i,T=m*L-g*N;(T*T/_>e||Qd((g*L+m*N)/_-.5)>.3||s*f+a*p+u*d<Qy)&&(r(n,i,o,s,a,u,P,M,I,b/=w,x/=w,S,y,v),v.point(P,M),r(P,M,I,b,x,S,l,c,h,f,p,d,y,v))}}return function(e){var n,i,o,s,a,u,l,c,h,f,p,d,y={point:v,lineStart:g,lineEnd:_,polygonStart:function(){e.polygonStart(),y.lineStart=b},polygonEnd:function(){e.polygonEnd(),y.lineStart=g}};function v(r,n){r=t(r,n),e.point(r[0],r[1])}function g(){c=NaN,y.point=m,e.lineStart()}function m(n,i){var o=fy([n,i]),s=t(n,i);r(c,h,l,f,p,d,c=s[0],h=s[1],l=n,f=o[0],p=o[1],d=o[2],16,e),e.point(c,h)}function _(){y.point=v,e.lineEnd()}function b(){g(),y.point=x,y.lineEnd=S}function x(t,e){m(n=t,e),i=c,o=h,s=f,a=p,u=d,y.point=m}function S(){r(c,h,l,f,p,d,i,o,n,s,a,u,16,e),y.lineEnd=_,_()}return y}}(t,e):function(t){return Zy({point:function(e,r){e=t(e,r),this.stream.point(e[0],e[1])}})}(t)}var $y=Zy({point:function(t,e){this.stream.point(t*Jd,e*Jd)}});function tv(t){return function(t){var e,r,n,i,o,s,a,u,l,c,h=150,f=480,p=250,d=0,y=0,v=0,g=0,m=0,_=null,b=Hy,x=null,S=ky,w=.5,C=Ky(P,w);function I(t){return[(t=o(t[0]*Jd,t[1]*Jd))[0]*h+r,n-t[1]*h]}function E(t){return(t=o.invert((t[0]-r)/h,(n-t[1])/h))&&[t[0]*Yd,t[1]*Yd]}function P(t,i){return[(t=e(t,i))[0]*h+r,n-t[1]*h]}function M(){o=my(i=function(t,e,r){return(t%=Zd)?e||r?my(xy(t),Sy(e,r)):xy(t):e||r?Sy(e,r):_y}(v,g,m),e);var t=e(d,y);return r=f-t[0]*h,n=p+t[1]*h,L()}function L(){return l=c=null,I}return I.stream=function(t){return l&&c===t?l:l=$y(b(i,C(S(c=t))))},I.clipAngle=function(t){return arguments.length?(b=+t?Xy(_=t*Jd,6*Jd):(_=null,Hy),L()):_*Yd},I.clipExtent=function(t){return arguments.length?(S=null==t?(x=s=a=u=null,ky):Fy(x=+t[0][0],s=+t[0][1],a=+t[1][0],u=+t[1][1]),L()):null==x?null:[[x,s],[a,u]]},I.scale=function(t){return arguments.length?(h=+t,M()):h},I.translate=function(t){return arguments.length?(f=+t[0],p=+t[1],M()):[f,p]},I.center=function(t){return arguments.length?(d=t[0]%360*Jd,y=t[1]%360*Jd,M()):[d*Yd,y*Yd]},I.rotate=function(t){return arguments.length?(v=t[0]%360*Jd,g=t[1]%360*Jd,m=t.length>2?t[2]%360*Jd:0,M()):[v*Yd,g*Yd,m*Yd]},I.precision=function(t){return arguments.length?(C=Ky(P,w=t*t),L()):ry(w)},I.fitExtent=function(t,e){return Jy(I,t,e)},I.fitSize=function(t,e){return function(t,e,r){return Jy(t,[[0,0],e],r)}(I,t,e)},function(){return e=t.apply(this,arguments),I.invert=e.invert&&E,M()}}(function(){return t})()}var ev=function(t){return function(e,r){var n=ty(e),i=ty(r),o=t(n*i);return[o*i*ey(e),o*ey(r)]}}(function(t){return(t=ny(t))&&t/ey(t)});function rv(){return tv(ev).scale(79.4188).clipAngle(179.999)}function nv(t,e,n,i){var o=t.properties||{},a="Feature"===t.type?t.geometry:t;if("GeometryCollection"===a.type){var u=[];return B(t,function(t){var r=nv(t,e,n,i);r&&u.push(r)}),d(u)}var l=function(t){var e=br(t).geometry.coordinates,n=[-e[0],-e[1]];return rv().rotate(n).scale(r)}(a),c={type:a.type,coordinates:ov(a.coordinates,l)},h=(new Ih).read(c),f=b(x(e,n),"meters"),p=_p.bufferOp(h,f,i);if(!iv((p=(new Eh).write(p)).coordinates))return s({type:p.type,coordinates:sv(p.coordinates,l)},o)}function iv(t){return Array.isArray(t[0])?iv(t[0]):isNaN(t[0])}function ov(t,e){return"object"!=typeof t[0]?e(t):t.map(function(t){return ov(t,e)})}function sv(t,e){return"object"!=typeof t[0]?e.invert(t):t.map(function(t){return sv(t,e)})}function av(t,e,r){void 0===r&&(r={});var n=it(t),i=it(e),o=tl.intersection(n.coordinates,i.coordinates);return 0===o.length?null:1===o.length?c(o[0],r.properties):g(o,r.properties)}function uv(t,e,r){void 0===r&&(r={});var n=JSON.stringify(r.properties||{}),i=t[0],o=t[1],s=t[2],a=t[3],u=(o+a)/2,l=(i+s)/2,c=2*e/be([i,u],[s,u],r)*(s-i),h=2*e/be([l,o],[l,a],r)*(a-o),f=c/2,p=2*f,y=Math.sqrt(3)/2*h,v=s-i,g=a-o,m=3/4*p,_=y,b=(v-p)/(p-f/2),x=Math.floor(b),S=(x*m-f/2-v)/2-f/2+m/2,w=Math.floor((g-y)/y),C=(g-w*y)/2,I=w*y-g>y/2;I&&(C-=y/4);for(var E=[],P=[],M=0;M<6;M++){var L=2*Math.PI/6*M;E.push(Math.cos(L)),P.push(Math.sin(L))}for(var N=[],T=0;T<=x;T++)for(var O=0;O<=w;O++){var A=T%2==1;if((0!==O||!A)&&(0!==O||!I)){var R=T*m+i-S,F=O*_+o+C;if(A&&(F-=y/2),!0===r.triangles)cv([R,F],c/2,h/2,JSON.parse(n),E,P).forEach(function(t){r.mask?av(r.mask,t)&&N.push(t):N.push(t)});else{var D=lv([R,F],c/2,h/2,JSON.parse(n),E,P);r.mask?av(r.mask,D)&&N.push(D):N.push(D)}}}return d(N)}function lv(t,e,r,n,i,o){for(var s=[],a=0;a<6;a++){var u=t[0]+e*i[a],l=t[1]+r*o[a];s.push([u,l])}return s.push(s[0].slice()),c([s],n)}function cv(t,e,r,n,i,o){for(var s=[],a=0;a<6;a++){var u=[];u.push(t),u.push([t[0]+e*i[a],t[1]+r*o[a]]),u.push([t[0]+e*i[(a+1)%6],t[1]+r*o[(a+1)%6]]),u.push(t),s.push(c([u],n))}return s}function hv(t){return g(t)}function fv(t){return c(t&&t.geometry.coordinates||[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]])}function pv(t,e,r){return void 0===r&&(r={}),function(t,e,r,n){void 0===n&&(n={});for(var i=[],o=t[0],s=t[1],a=t[2],u=t[3],l=e/be([o,s],[a,s],n)*(a-o),h=r/be([o,s],[o,u],n)*(u-s),f=a-o,p=u-s,y=Math.floor(f/l),v=Math.floor(p/h),g=(p-v*h)/2,m=o+(f-y*l)/2,_=0;_<y;_++){for(var b=s+g,x=0;x<v;x++){var S=c([[[m,b],[m,b+h],[m+l,b+h],[m+l,b],[m,b]]],n.properties);n.mask?Ls(n.mask,S)&&i.push(S):i.push(S),b+=h}m+=l}return d(i)}(t,e,e,r)}function dv(t,e,r){void 0===r&&(r={});for(var n=[],i=e/be([t[0],t[1]],[t[2],t[1]],r)*(t[2]-t[0]),o=e/be([t[0],t[1]],[t[0],t[3]],r)*(t[3]-t[1]),s=0,a=t[0];a<=t[2];){for(var u=0,l=t[1];l<=t[3];){var h=null,f=null;s%2==0&&u%2==0?(h=c([[[a,l],[a,l+o],[a+i,l],[a,l]]],r.properties),f=c([[[a,l+o],[a+i,l+o],[a+i,l],[a,l+o]]],r.properties)):s%2==0&&u%2==1?(h=c([[[a,l],[a+i,l+o],[a+i,l],[a,l]]],r.properties),f=c([[[a,l],[a,l+o],[a+i,l+o],[a,l]]],r.properties)):u%2==0&&s%2==1?(h=c([[[a,l],[a,l+o],[a+i,l+o],[a,l]]],r.properties),f=c([[[a,l],[a+i,l+o],[a+i,l],[a,l]]],r.properties)):u%2==1&&s%2==1&&(h=c([[[a,l],[a,l+o],[a+i,l],[a,l]]],r.properties),f=c([[[a,l+o],[a+i,l+o],[a+i,l],[a,l+o]]],r.properties)),r.mask?(av(r.mask,h)&&n.push(h),av(r.mask,f)&&n.push(f)):(n.push(h),n.push(f)),l+=o,u++}s++,a+=i}return d(n)}ev.invert=function(t){return function(e,r){var n=ry(e*e+r*r),i=t(n),o=ey(i),s=ty(i);return[$d(e*o,n*s),iy(n&&r*o/n)]}}(function(t){return t}),e.along=function(t,e,r){void 0===r&&(r={});for(var n=it(t).coordinates,i=0,o=0;o<n.length&&!(e>=i&&o===n.length-1);o++){if(i>=e){var s=e-i;if(s){var a=_r(n[o],n[o-1])-180;return gr(n[o],s,a,r)}return u(n[o])}i+=be(n[o],n[o+1],r)}return u(n[n.length-1])},e.angle=function(t,e,r,n){if(void 0===n&&(n={}),!L(n))throw new Error("options is invalid");if(!t)throw new Error("startPoint is required");if(!e)throw new Error("midPoint is required");if(!r)throw new Error("endPoint is required");var i=t,o=e,s=r,a=w(!0!==n.mercator?_r(i,o):Ui(i,o)),u=w(!0!==n.mercator?_r(s,o):Ui(s,o)),l=Math.abs(a-u);return!0===n.explementary?360-l:l},e.applyFilter=lu,e.area=zn,e.areaFactors=o,e.bbox=Q,e.bboxClip=function(t,e){var r=it(t),n=r.type,i="Feature"===t.type?t.properties:{},o=r.coordinates;switch(n){case"LineString":case"MultiLineString":var s=[];return"LineString"===n&&(o=[o]),o.forEach(function(t){!function(t,e,r){var n,i,o,s,a,u=t.length,l=Ai(t[0],e),c=[];for(r||(r=[]),n=1;n<u;n++){for(s=t[n-1],i=o=Ai(a=t[n],e);;){if(!(l|i)){c.push(s),i!==o?(c.push(a),n<u-1&&(r.push(c),c=[])):n===u-1&&c.push(a);break}if(l&i)break;l?l=Ai(s=Oi(s,a,l,e),e):i=Ai(a=Oi(s,a,i,e),e)}l=o}c.length&&r.push(c)}(t,e,s)}),1===s.length?f(s[0],i):y(s,i);case"Polygon":return c(Ri(o,e),i);case"MultiPolygon":return g(o.map(function(t){return Ri(t,e)}),i);default:throw new Error("geometry "+n+" not supported")}},e.bboxPolygon=dr,e.bearing=_r,e.bearingToAngle=w,e.bearingToAzimuth=w,e.bezier=pr,e.bezierSpline=pr,e.booleanClockwise=Xi,e.booleanContains=function(t,e){var r=it(t),n=it(e),i=r.type,o=n.type,s=r.coordinates,a=n.coordinates;switch(i){case"Point":switch(o){case"Point":return ms(s,a);default:throw new Error("feature2 "+o+" geometry not supported")}case"MultiPoint":switch(o){case"Point":return function(t,e){var r,n=!1;for(r=0;r<t.coordinates.length;r++)if(ms(t.coordinates[r],e.coordinates)){n=!0;break}return n}(r,n);case"MultiPoint":return function(t,e){for(var r=0,n=e.coordinates;r<n.length;r++){for(var i=n[r],o=!1,s=0,a=t.coordinates;s<a.length;s++){if(ms(i,a[s])){o=!0;break}}if(!o)return!1}return!0}(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"Point":return Yn(n,r,{ignoreEndVertices:!0});case"LineString":return function(t,e){for(var r=!1,n=0,i=e.coordinates;n<i.length;n++){var o=i[n];if(Yn({type:"Point",coordinates:o},t,{ignoreEndVertices:!0})&&(r=!0),!Yn({type:"Point",coordinates:o},t,{ignoreEndVertices:!1}))return!1}return r}(r,n);case"MultiPoint":return function(t,e){for(var r=!1,n=0,i=e.coordinates;n<i.length;n++){var o=i[n];if(Yn(o,t,{ignoreEndVertices:!0})&&(r=!0),!Yn(o,t))return!1}if(r)return!0;return!1}(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Point":return ge(n,r,{ignoreBoundary:!0});case"LineString":return function(t,e){var r=!1,n=0,i=Q(t),o=Q(e);if(!gs(i,o))return!1;for(;n<e.coordinates.length-1;n++){if(ge({type:"Point",coordinates:_s(e.coordinates[n],e.coordinates[n+1])},t,{ignoreBoundary:!0})){r=!0;break}}return r}(r,n);case"Polygon":return function(t,e){if("Feature"===t.type&&null===t.geometry)return!1;if("Feature"===e.type&&null===e.geometry)return!1;var r=Q(t),n=Q(e);if(!gs(r,n))return!1;for(var i=it(e).coordinates,o=0,s=i;o<s.length;o++)for(var a=0,u=s[o];a<u.length;a++){if(!ge(u[a],t))return!1}return!0}(r,n);case"MultiPoint":return function(t,e){for(var r=0,n=e.coordinates;r<n.length;r++){if(!ge(n[r],t,{ignoreBoundary:!0}))return!1}return!0}(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}},e.booleanCrosses=function(t,e){var r=it(t),n=it(e),i=r.type,o=n.type;switch(i){case"MultiPoint":switch(o){case"LineString":return bs(r,n);case"Polygon":return Ss(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"MultiPoint":return bs(n,r);case"LineString":return function(t,e){if(On(t,e).features.length>0)for(var r=0;r<t.coordinates.length-1;r++)for(var n=0;n<e.coordinates.length-1;n++){var i=!0;if(0!==n&&n!==e.coordinates.length-2||(i=!1),ws(t.coordinates[r],t.coordinates[r+1],e.coordinates[n],i))return!0}return!1}(r,n);case"Polygon":return xs(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"MultiPoint":return Ss(n,r);case"LineString":return xs(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}},e.booleanDisjoint=ps,e.booleanEqual=function(t,e){return it(t).type===it(e).type&&new Ms({precision:6}).compare(er(t),er(e))},e.booleanIntersects=Ls,e.booleanOverlap=function(t,e){var r=it(t),n=it(e),i=r.type,o=n.type;if("MultiPoint"===i&&"MultiPoint"!==o||("LineString"===i||"MultiLineString"===i)&&"LineString"!==o&&"MultiLineString"!==o||("Polygon"===i||"MultiPolygon"===i)&&"Polygon"!==o&&"MultiPolygon"!==o)throw new Error("features must be of the same type");if("Point"===i)throw new Error("Point geometry not supported");if(new Ms({precision:6}).compare(t,e))return!1;var s=0;switch(i){case"MultiPoint":for(var a=0;a<r.coordinates.length;a++)for(var u=0;u<n.coordinates.length;u++){var l=r.coordinates[a],c=n.coordinates[u];if(l[0]===c[0]&&l[1]===c[1])return!0}return!1;case"LineString":case"MultiLineString":V(t,function(t){V(e,function(e){ji(t,e).features.length&&s++})});break;case"Polygon":case"MultiPolygon":V(t,function(t){V(e,function(e){On(t,e).features.length&&s++})})}return s>0},e.booleanParallel=function(t,e){if(!t)throw new Error("line1 is required");if(!e)throw new Error("line2 is required");if("LineString"!==Vs(t,"line1"))throw new Error("line1 must be a LineString");if("LineString"!==Vs(e,"line2"))throw new Error("line2 must be a LineString");for(var r=Jr(er(t)).features,n=Jr(er(e)).features,i=0;i<r.length;i++){var o=r[i].geometry.coordinates;if(!n[i])break;if(!zs(o,n[i].geometry.coordinates))return!1}return!0},e.booleanPointInPolygon=ge,e.booleanPointOnLine=Yn,e.booleanWithin=Qn,e.buffer=function(t,e,r){var n=(r=r||{}).units||"kilometers",i=r.steps||8;if(!t)throw new Error("geojson is required");if("object"!=typeof r)throw new Error("options must be an object");if("number"!=typeof i)throw new Error("steps must be an number");if(void 0===e)throw new Error("radius is required");if(i<=0)throw new Error("steps must be greater than 0");var o=[];switch(t.type){case"GeometryCollection":return B(t,function(t){var r=nv(t,e,n,i);r&&o.push(r)}),d(o);case"FeatureCollection":return k(t,function(t){var r=nv(t,e,n,i);r&&k(r,function(t){t&&o.push(t)})}),d(o)}return nv(t,e,n,i)},e.center=br,e.centerMean=ka,e.centerMedian=function(t,e){if(void 0===e&&(e={}),!L(e=e||{}))throw new Error("options is invalid");var r=e.counter||10;if(!M(r))throw new Error("counter must be a number");var n=e.weight,i=ka(t,{weight:e.weight}),o=d([]);k(t,function(t){var e;o.features.push(xr(t,{properties:{weight:null===(e=t.properties)||void 0===e?void 0:e[n]}}))});var s={tolerance:e.tolerance,medianCandidates:[]};return ja(i.geometry.coordinates,[0,0],o,s,r)},e.centerOfMass=function t(e,r){switch(void 0===r&&(r={}),ot(e)){case"Point":return u(K(e),r.properties);case"Polygon":var n=[];A(e,function(t){n.push(t)});var i,o,s,a,l,c,h,f,p=xr(e,{properties:r.properties}),d=p.geometry.coordinates,y=0,v=0,g=0,m=n.map(function(t){return[t[0]-d[0],t[1]-d[1]]});for(i=0;i<n.length-1;i++)a=(o=m[i])[0],c=o[1],l=(s=m[i+1])[0],g+=f=a*(h=s[1])-l*c,y+=(a+l)*f,v+=(c+h)*f;if(0===g)return p;var _=1/(6*(.5*g));return u([d[0]+_*y,d[1]+_*v],r.properties);default:var b=ve(e);return b?t(b,{properties:r.properties}):xr(e,{properties:r.properties})}},e.centroid=xr,e.circle=mr,e.cleanCoords=er,e.clone=Ie,e.clusterEach=su,e.clusterReduce=au,e.clusters=fu,e.clustersDbscan=function(t,e,r){void 0===r&&(r={}),!0!==r.mutate&&(t=Ie(t)),r.minPoints=r.minPoints||3;var n=new Rs.DBSCAN,i=n.run(G(t),E(e,r.units),r.minPoints,be),o=-1;return i.forEach(function(e){o++,e.forEach(function(e){var r=t.features[e];r.properties||(r.properties={}),r.properties.cluster=o,r.properties.dbscan="core"})}),n.noise.forEach(function(e){var r=t.features[e];r.properties||(r.properties={}),r.properties.cluster?r.properties.dbscan="edge":r.properties.dbscan="noise"}),t},e.clustersKmeans=function(t,e){void 0===e&&(e={});var r=t.features.length;e.numberOfClusters=e.numberOfClusters||Math.round(Math.sqrt(r/2)),e.numberOfClusters>r&&(e.numberOfClusters=r),!0!==e.mutate&&(t=Ie(t));var n=G(t),i=n.slice(0,e.numberOfClusters),o=qs(n,e.numberOfClusters,i),s={};return o.centroids.forEach(function(t,e){s[e]=t}),k(t,function(t,e){var r=o.idxs[e];t.properties.cluster=r,t.properties.centroid=s[r]}),t},e.collect=function(t,e,r,n){var i=Et(6),o=e.features.map(function(t){var e;return{minX:t.geometry.coordinates[0],minY:t.geometry.coordinates[1],maxX:t.geometry.coordinates[0],maxY:t.geometry.coordinates[1],property:null===(e=t.properties)||void 0===e?void 0:e[r]}});return i.load(o),t.features.forEach(function(t){t.properties||(t.properties={});var e=Q(t),r=i.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}),o=[];r.forEach(function(e){ge([e.minX,e.minY],t)&&o.push(e.property)}),t.properties[n]=o}),t},e.collectionOf=nt,e.combine=function(t){var e={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}};return k(t,function(t){var r,n,i,o;switch(null===(o=t.geometry)||void 0===o?void 0:o.type){case"Point":e.MultiPoint.coordinates.push(t.geometry.coordinates),e.MultiPoint.properties.push(t.properties);break;case"MultiPoint":(r=e.MultiPoint.coordinates).push.apply(r,t.geometry.coordinates),e.MultiPoint.properties.push(t.properties);break;case"LineString":e.MultiLineString.coordinates.push(t.geometry.coordinates),e.MultiLineString.properties.push(t.properties);break;case"MultiLineString":(n=e.MultiLineString.coordinates).push.apply(n,t.geometry.coordinates),e.MultiLineString.properties.push(t.properties);break;case"Polygon":e.MultiPolygon.coordinates.push(t.geometry.coordinates),e.MultiPolygon.properties.push(t.properties);break;case"MultiPolygon":(i=e.MultiPolygon.coordinates).push.apply(i,t.geometry.coordinates),e.MultiPolygon.properties.push(t.properties)}}),d(Object.keys(e).filter(function(t){return e[t].coordinates.length}).sort().map(function(t){return s({type:t,coordinates:e[t].coordinates},{collectedProperties:e[t].properties})}))},e.concave=function(t,e){void 0===e&&(e={});var r=e.maxEdge||1/0,n=xe(function(t){var e=[],r={};return k(t,function(t){if(t.geometry){var n=t.geometry.coordinates.join("-");Object.prototype.hasOwnProperty.call(r,n)||(e.push(t),r[n]=!0)}}),d(e)}(t));if(n.features=n.features.filter(function(t){var n=t.geometry.coordinates[0][0],i=t.geometry.coordinates[0][1],o=t.geometry.coordinates[0][2],s=be(n,i,e),a=be(i,o,e),u=be(n,o,e);return s<=r&&a<=r&&u<=r}),n.features.length<1)return null;var i=tr(n);return 1===i.coordinates.length&&(i.coordinates=i.coordinates[0],i.type="Polygon"),s(i)},e.containsNumber=tt,e.convertArea=P,e.convertDistance=E,e.convertLength=E,e.convex=ve,e.coordAll=G,e.coordEach=A,e.coordReduce=R,e.createBins=uu,e.degrees2radians=I,e.degreesToRadians=I,e.destination=gr,e.difference=function(t,e){var r=it(t),n=it(e),i=t.properties||{},o=tl.difference(r.coordinates,n.coordinates);return 0===o.length?null:1===o.length?c(o[0],i):g(o,i)},e.dissolve=function(t,e){if(!L(e=e||{}))throw new Error("options is invalid");var r=e.propertyName;nt(t,"Polygon","dissolve");var n=[];if(!e.propertyName)return ni(g(tl.union.apply(null,t.features.map(function(t){return t.geometry.coordinates}))));var i={};k(t,function(t){Object.prototype.hasOwnProperty.call(i,t.properties[r])||(i[t.properties[r]]=[]),i[t.properties[r]].push(t)});for(var o=Object.keys(i),s=0;s<o.length;s++){var a=g(tl.union.apply(null,i[o[s]].map(function(t){return t.geometry.coordinates})));a.properties[r]=o[s],n.push(a)}return ni(d(n))},e.distance=be,e.distanceToDegrees=S,e.distanceToRadians=x,e.distanceWeight=za,e.earthRadius=r,e.ellipse=Fa,e.envelope=yr,e.explode=Sr,e.factors=n,e.feature=s,e.featureCollection=d,e.featureEach=k,e.featureOf=rt,e.featureReduce=j,e.filterProperties=hu,e.findPoint=Y,e.findSegment=Z,e.flatten=ni,e.flattenEach=q,e.flattenReduce=z,e.flip=function(t,e){if(!L(e=e||{}))throw new Error("options is invalid");var r=e.mutate;if(!t)throw new Error("geojson is required");return!1!==r&&void 0!==r||(t=Ie(t)),A(t,function(t){var e=t[0],r=t[1];t[0]=r,t[1]=e}),t},e.geojsonType=et,e.geomEach=B,e.geomReduce=U,e.geometry=a,e.geometryCollection=m,e.getCluster=ou,e.getCoord=K,e.getCoords=$,e.getGeom=it,e.getType=ot,e.greatCircle=function(t,e,r){if("object"!=typeof(r=r||{}))throw new Error("options is invalid");var n=r.properties,i=r.npoints,o=r.offset;return t=K(t),e=K(e),n=n||{},i=i||100,o=o||10,new mi({x:t[0],y:t[1]},{x:e[0],y:e[1]},n).Arc(i,{offset:o}).json()},e.helpers=O,e.hexGrid=uv,e.inside=ge,e.interpolate=function(t,e,r){if("object"!=typeof(r=r||{}))throw new Error("options is invalid");var n=r.gridType,i=r.property,o=r.weight;if(!t)throw new Error("points is required");if(nt(t,"Point","input must contain Points"),!e)throw new Error("cellSize is required");if(void 0!==o&&"number"!=typeof o)throw new Error("weight must be a number");i=i||"elevation",n=n||"square",o=o||1;var s,a=Q(t);switch(n){case"point":case"points":s=ei(a,e,r);break;case"square":case"squares":s=pv(a,e,r);break;case"hex":case"hexes":s=uv(a,e,r);break;case"triangle":case"triangles":s=dv(a,e,r);break;default:throw new Error("invalid gridType")}var u=[];return k(s,function(e){var s=0,a=0;k(t,function(t){var u,l=be("point"===n?e:xr(e),t,r);if(void 0!==i&&(u=t.properties[i]),void 0===u&&(u=t.geometry.coordinates[2]),void 0===u)throw new Error("zValue is missing");0===l&&(s=u);var c=1/Math.pow(l,o);a+=c,s+=c*u});var l=Ie(e);l.properties[i]=s/a,u.push(l)}),d(u)},e.intersect=av,e.invariant=st,e.isNumber=M,e.isObject=L,e.isobands=function(t,e,r){if(!L(r=r||{}))throw new Error("options is invalid");var n=r.zProperty||"elevation",i=r.commonProperties||{},o=r.breaksProperties||[];if(nt(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks is not an Array");if(!L(i))throw new Error("commonProperties is not an Object");if(!Array.isArray(o))throw new Error("breaksProperties is not an Array");var s=Qi(t,{zProperty:n,flip:!0}),a=function(t,e,r){for(var n=[],i=1;i<e.length;i++){var o=+e[i-1],s=+e[i],a=Qo(Jo(to(t,o,s-o))),u={};u.groupedRings=a,u[r]=o+"-"+s,n.push(u)}return n}(s,e,n);return d((a=function(t,e,r){var n=Q(r),i=n[2]-n[0],o=n[3]-n[1],s=n[0],a=n[1],u=e[0].length-1,l=e.length-1,c=i/u,h=o/l,f=function(t){t[0]=t[0]*c+s,t[1]=t[1]*h+a};return t.forEach(function(t){t.groupedRings.forEach(function(t){t.forEach(function(t){t.forEach(f)})})}),t}(a,s,t)).map(function(t,e){if(o[e]&&!L(o[e]))throw new Error("Each mappedProperty is required to be an Object");var r=ht({},i,o[e]);return r[n]=t[n],g(t.groupedRings,r)}))},e.isolines=function(t,e,r){if(!L(r=r||{}))throw new Error("options is invalid");var n=r.zProperty||"elevation",i=r.commonProperties||{},o=r.breaksProperties||[];if(nt(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks must be an Array");if(!L(i))throw new Error("commonProperties must be an Object");if(!Array.isArray(o))throw new Error("breaksProperties must be an Array");var s=_t(t,{zProperty:n,flip:!0});return d(function(t,e,r){var n=Q(r),i=n[2]-n[0],o=n[3]-n[1],s=n[0],a=n[1],u=e[0].length-1,l=e.length-1,c=i/u,h=o/l,f=function(t){t[0]=t[0]*c+s,t[1]=t[1]*h+a};return t.forEach(function(t){A(t,f)}),t}(function(t,e,r,n,i){for(var o=[],s=1;s<e.length;s++){var a=+e[s],u=ht({},n,i[s]);u[r]=a;var l=y(dt(t,a),u);o.push(l)}return o}(s,e,n,i,o),s,t))},e.kinks=function(t){var e,r,n={type:"FeatureCollection",features:[]};if("LineString"===(r="Feature"===t.type?t.geometry:t).type)e=[r.coordinates];else if("MultiLineString"===r.type)e=r.coordinates;else if("MultiPolygon"===r.type)e=[].concat.apply([],r.coordinates);else{if("Polygon"!==r.type)throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");e=r.coordinates}return e.forEach(function(t){e.forEach(function(e){for(var r=0;r<t.length-1;r++)for(var i=r;i<e.length-1;i++){if(t===e){if(1===Math.abs(r-i))continue;if(0===r&&i===t.length-2&&t[r][0]===t[t.length-1][0]&&t[r][1]===t[t.length-1][1])continue}var o=Gn(t[r][0],t[r][1],t[r+1][0],t[r+1][1],e[i][0],e[i][1],e[i+1][0],e[i+1][1]);o&&n.features.push(u([o[0],o[1]]))}})}),n},e.length=Xn,e.lengthToDegrees=S,e.lengthToRadians=x,e.lineArc=wi,e.lineChunk=function(t,e,r){if(!L(r=r||{}))throw new Error("options is invalid");var n=r.units,i=r.reverse;if(!t)throw new Error("geojson is required");if(e<=0)throw new Error("segmentLength must be greater than 0");var o=[];return q(t,function(t){i&&(t.geometry.coordinates=t.geometry.coordinates.reverse()),function(t,e,r,n){var i=Xn(t,{units:r});if(i<=e)return n(t);var o=i/e;Number.isInteger(o)||(o=Math.floor(o)+1);for(var s=0;s<o;s++){n(Zn(t,e*s,e*(s+1),{units:r}),s)}}(t,e,n,function(t){o.push(t)})}),d(o)},e.lineDistance=Xn,e.lineEach=H,e.lineIntersect=On,e.lineOffset=function(t,e,r){if(!L(r=r||{}))throw new Error("options is invalid");var n=r.units;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("distance is required");var i=ot(t),o=t.properties;switch(i){case"LineString":return ss(t,e,n);case"MultiLineString":var s=[];return q(t,function(t){s.push(ss(t,e,n).geometry.coordinates)}),y(s,o);default:throw new Error("geometry "+i+" is not supported")}},e.lineOverlap=ji,e.lineReduce=X,e.lineSegment=Jr,e.lineSlice=function(t,e,r){var n=$(r);if("LineString"!==ot(r))throw new Error("line must be a LineString");for(var i,o=Rn(r,t),s=Rn(r,e),a=[(i=o.properties.index<=s.properties.index?[o,s]:[s,o])[0].geometry.coordinates],u=i[0].properties.index+1;u<i[1].properties.index+1;u++)a.push(n[u]);return a.push(i[1].geometry.coordinates),f(a,r.properties)},e.lineSliceAlong=Zn,e.lineSplit=function(t,e){if(!t)throw new Error("line is required");if(!e)throw new Error("splitter is required");var r=ot(t),n=ot(e);if("LineString"!==r)throw new Error("line must be LineString");if("FeatureCollection"===n)throw new Error("splitter cannot be a FeatureCollection");if("GeometryCollection"===n)throw new Error("splitter cannot be a GeometryCollection");var i=ri(e,{precision:7});switch(n){case"Point":return bi(t,i);case"MultiPoint":return _i(t,i);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return _i(t,On(t,i))}},e.lineString=f,e.lineStringToPolygon=Mi,e.lineStrings=p,e.lineToPolygon=Mi,e.mask=function(t,e){var r,n=fv(e),i=null;return"FeatureCollection"===t.type?i=hv(2===(r=t).features.length?tl.union(r.features[0].geometry.coordinates,r.features[1].geometry.coordinates):tl.union.apply(tl,r.features.map(function(t){return t.geometry.coordinates}))):i=hv(tl.union(t.geometry.coordinates)),i.geometry.coordinates.forEach(function(t){n.geometry.coordinates.push(t[0])}),n},e.meta=J,e.midpoint=function(t,e){return gr(t,be(t,e)/2,_r(t,e))},e.moranIndex=function(t,e){var r=e.inputField,n=e.threshold||1e5,i=e.p||2,o=e.binary||!1,s=za(t,{alpha:e.alpha||-1,binary:o,p:i,standardization:e.standardization||!0,threshold:n}),a=[];k(t,function(t){var e=t.properties||{};a.push(e[r])});for(var u=Va(a),l=function(t){for(var e=Va(t),r=0,n=0,i=t;n<i.length;n++){var o=i[n];r+=Math.pow(o-e,2)}return r/t.length}(a),c=0,h=0,f=0,p=0,d=s.length,y=0;y<d;y++){for(var v=0,g=0;g<d;g++)c+=s[y][g]*(a[y]-u)*(a[g]-u),h+=s[y][g],f+=Math.pow(s[y][g]+s[g][y],2),v+=s[y][g]+s[g][y];p+=Math.pow(v,2)}var m=c/h/l,_=-1/(d-1),b=(d*d*(f*=.5)-d*p+h*h*3)/((d-1)*(d+1)*(h*h))-_*_,x=Math.sqrt(b);return{expectedMoranIndex:_,moranIndex:m,stdNorm:x,zNorm:(m-_)/x}},e.multiLineString=y,e.multiPoint=v,e.multiPolygon=g,e.nearest=Yr,e.nearestPoint=Yr,e.nearestPointOnLine=Rn,e.nearestPointToLine=function(t,e,r){void 0===r&&(r={});var n=r.units,i=r.properties||{},o=function(t){var e=[];switch(t.geometry?t.geometry.type:t.type){case"GeometryCollection":return B(t,function(t){"Point"===t.type&&e.push({type:"Feature",properties:{},geometry:t})}),{type:"FeatureCollection",features:e};case"FeatureCollection":return t.features=t.features.filter(function(t){return"Point"===t.geometry.type}),t;default:throw new Error("points must be a Point Collection")}}(t);if(!o.features.length)throw new Error("points must contain features");if(!e)throw new Error("line is required");if("LineString"!==ot(e))throw new Error("line must be a LineString");var s=1/0,a=null;return k(o,function(t){var r=Dn(t,e,{units:n});r<s&&(s=r,a=t)}),a&&(a.properties=ht({dist:s},a.properties,i)),a},e.planepoint=function(t,e){var r=K(t),n=it(e).coordinates[0];if(n.length<4)throw new Error("OuterRing of a Polygon must have 4 or more Positions.");var i=e.properties||{},o=i.a,s=i.b,a=i.c,u=r[0],l=r[1],c=n[0][0],h=n[0][1],f=void 0!==o?o:n[0][2],p=n[1][0],d=n[1][1],y=void 0!==s?s:n[1][2],v=n[2][0],g=n[2][1],m=void 0!==a?a:n[2][2];return(m*(u-c)*(l-d)+f*(u-p)*(l-g)+y*(u-v)*(l-h)-y*(u-c)*(l-g)-m*(u-p)*(l-h)-f*(u-v)*(l-d))/((u-c)*(l-d)+(u-p)*(l-g)+(u-v)*(l-h)-(u-c)*(l-g)-(u-p)*(l-h)-(u-v)*(l-d))},e.point=u,e.pointGrid=ei,e.pointOnFeature=Bn,e.pointOnLine=Rn,e.pointOnSurface=Bn,e.pointToLineDistance=Dn,e.points=l,e.pointsWithinPolygon=_e,e.polygon=c,e.polygonSmooth=function(t,e){var r=[],n=e.iterations||1;if(!t)throw new Error("inputPolys is required");return B(t,function(t,e,i){var o,s,a;switch(t.type){case"Polygon":o=[[]];for(var u=0;u<n;u++)a=[[]],s=t,u>0&&(s=c(o).geometry),Ba(s,a),o=a.slice(0);r.push(c(o,i));break;case"MultiPolygon":o=[[[]]];for(var l=0;l<n;l++)a=[[[]]],s=t,l>0&&(s=g(o).geometry),Ua(s,a),o=a.slice(0);r.push(g(o,i));break;default:throw new Error("geometry is invalid, must be Polygon or MultiPolygon")}}),d(r)},e.polygonTangents=function(t,e){var r,n,i,o,s=$(t),a=$(e),l=Q(e),c=0,h=null;switch(s[0]>l[0]&&s[0]<l[2]&&s[1]>l[1]&&s[1]<l[3]&&(c=(h=Yr(t,Sr(e))).properties.featureIndex),ot(e)){case"Polygon":r=a[0][c],n=a[0][0],null!==h&&h.geometry.coordinates[1]<s[1]&&(n=a[0][c]),o=Hi(a[0][0],a[0][a[0].length-1],s);var f=Vi(a[0],s,o,i,r,n);r=f[0],n=f[1];break;case"MultiPolygon":for(var p=0,y=0,v=0,g=0;g<a[0].length;g++){p=g;for(var m=!1,_=0;_<a[0][g].length;_++){if(y=_,v===c){m=!0;break}v++}if(m)break}r=a[0][p][y],n=a[0][p][y],o=Hi(a[0][0][0],a[0][0][a[0][0].length-1],s),a.forEach(function(t){var e=Vi(t[0],s,o,i,r,n);r=e[0],n=e[1]})}return d([u(r),u(n)])},e.polygonToLine=Ii,e.polygonToLineString=Ii,e.polygonize=function(t){var e=fs.fromGeoJson(t);e.deleteDangles(),e.deleteCutEdges();var r=[],n=[];return e.getEdgeRings().filter(function(t){return t.isValid()}).forEach(function(t){t.isHole()?r.push(t):n.push(t)}),r.forEach(function(t){hs.findEdgeRingContaining(t,n)&&n.push(t)}),d(n.map(function(t){return t.toPolygon()}))},e.polygons=h,e.projection=Ja,e.propEach=F,e.propReduce=D,e.propertiesContainsFilter=cu,e.radians2degrees=C,e.radiansToDegrees=C,e.radiansToDistance=b,e.radiansToLength=b,e.random=iu,e.randomLineString=eu,e.randomPoint=$a,e.randomPolygon=tu,e.randomPosition=Ka,e.rewind=function(t,e){if(!L(e=e||{}))throw new Error("options is invalid");var r=e.reverse||!1,n=e.mutate||!1;if(!t)throw new Error("<geojson> is required");if("boolean"!=typeof r)throw new Error("<reverse> must be a boolean");if("boolean"!=typeof n)throw new Error("<mutate> must be a boolean");!1===n&&(t=Ie(t));var i=[];switch(t.type){case"GeometryCollection":return B(t,function(t){Zi(t,r)}),t;case"FeatureCollection":return k(t,function(t){k(Zi(t,r),function(t){i.push(t)})}),d(i)}return Zi(t,r)},e.rhumbBearing=Ui,e.rhumbDestination=zi,e.rhumbDistance=Fn,e.round=_,e.sample=function(t,e){if(!t)throw new Error("featurecollection is required");if(null==e)throw new Error("num is required");if("number"!=typeof e)throw new Error("num must be a number");return d(function(t,e){var r,n,i=t.slice(0),o=t.length,s=o-e;for(;o-- >s;)r=i[n=Math.floor((o+1)*Math.random())],i[n]=i[o],i[o]=r;return i.slice(s)}(t.features,e))},e.sector=function(t,e,r,n,i){if(!L(i=i||{}))throw new Error("options is invalid");var o=i.properties;if(!t)throw new Error("center is required");if(null==r)throw new Error("bearing1 is required");if(null==n)throw new Error("bearing2 is required");if(!e)throw new Error("radius is required");if("object"!=typeof i)throw new Error("options must be an object");if(Bi(r)===Bi(n))return mr(t,e,i);var s=$(t),a=wi(t,e,r,n,i),u=[[s]];return A(a,function(t){u[0].push(t)}),u[0].push(s),c(u,o)},e.segmentEach=V,e.segmentReduce=W,e.shortestPath=function(t,e,r){if(!L(r=r||{}))throw new Error("options is invalid");var n=r.resolution,i=r.minDistance,o=r.obstacles||d([]);if(!t)throw new Error("start is required");if(!e)throw new Error("end is required");if(n&&!M(n)||n<=0)throw new Error("options.resolution must be a number, greater than 0");if(i)throw new Error("options.minDistance is not yet implemented");var a=K(t),l=K(e);switch(t=u(a),e=u(l),ot(o)){case"FeatureCollection":if(0===o.features.length)return f([a,l]);break;case"Polygon":o=d([s(it(o))]);break;default:throw new Error("invalid obstacles")}var c=o;c.features.push(t),c.features.push(e);var h=Q(es(dr(Q(c)),1.15));n||(n=be([h[0],h[1]],[h[2],h[1]],r)/100),c.features.pop(),c.features.pop();for(var p=h[0],y=h[1],v=h[2],g=h[3],m=n/be([p,y],[v,y],r)*(v-p),_=n/be([p,y],[p,g],r)*(g-y),b=v-p,x=g-y,S=Math.floor(b/m),w=Math.floor(x/_),C=(b-S*m)/2,I=[],E=[],P=[],N=[],T=1/0,O=1/0,A=g-(x-w*_)/2,R=0;A>=y;){for(var F=[],D=[],k=p+C,j=0;k<=v;){var G=u([k,A]),B=Js(G,o);F.push(B?0:1),D.push(k+"|"+A);var U=be(G,t);!B&&U<T&&(T=U,P={x:j,y:R});var q=be(G,e);!B&&q<O&&(O=q,N={x:j,y:R}),k+=m,j++}E.push(F),I.push(D),A-=_,R++}var z=new Xs(E,{diagonal:!0}),V=z.grid[P.y][P.x],W=z.grid[N.y][N.x],H=Hs.search(z,V,W),X=[a];return H.forEach(function(t){var e=I[t.x][t.y].split("|");X.push([+e[0],+e[1]])}),X.push(l),er(f(X))},e.simplify=function(t,e){if(!L(e=e||{}))throw new Error("options is invalid");var r=void 0!==e.tolerance?e.tolerance:1,n=e.highQuality||!1,i=e.mutate||!1;if(!t)throw new Error("geojson is required");if(r&&r<0)throw new Error("invalid tolerance");return!0!==i&&(t=Ie(t)),B(t,function(t){!function(t,e,r){var n=t.type;if("Point"===n||"MultiPoint"===n)return t;er(t,!0);var i=t.coordinates;switch(n){case"LineString":t.coordinates=lr(i,e,r);break;case"MultiLineString":t.coordinates=i.map(function(t){return lr(t,e,r)});break;case"Polygon":t.coordinates=cr(i,e,r);break;case"MultiPolygon":t.coordinates=i.map(function(t){return cr(t,e,r)})}}(t,r,n)}),t},e.square=vr,e.squareGrid=pv,e.standardDeviationalEllipse=function(t,e){if(!L(e=e||{}))throw new Error("options is invalid");var r=e.steps||64,n=e.weight,i=e.properties||{};if(!M(r))throw new Error("steps must be a number");if(!L(i))throw new Error("properties must be a number");var o=G(t).length,s=ka(t,{weight:n}),a=0,u=0,l=0;k(t,function(t){var e=t.properties[n]||1,r=Ga($(t),$(s));a+=Math.pow(r.x,2)*e,u+=Math.pow(r.y,2)*e,l+=r.x*r.y*e});var c=a-u,h=Math.sqrt(Math.pow(c,2)+4*Math.pow(l,2)),f=2*l,p=Math.atan((c+h)/f),y=180*p/Math.PI,v=0,g=0,m=0;k(t,function(t){var e=t.properties[n]||1,r=Ga($(t),$(s));v+=Math.pow(r.x*Math.cos(p)-r.y*Math.sin(p),2)*e,g+=Math.pow(r.x*Math.sin(p)+r.y*Math.cos(p),2)*e,m+=e});var _=Math.sqrt(2*v/m),b=Math.sqrt(2*g/m),x=Fa(s,_,b,{units:"degrees",angle:y,steps:r,properties:i}),S=_e(t,d([x])),w={meanCenterCoordinates:$(s),semiMajorAxis:_,semiMinorAxis:b,numberOfFeatures:o,angle:y,percentageWithinEllipse:100*G(S).length/o};return x.properties.standardDeviationalEllipse=w,x},e.tag=function(t,e,r,n){return t=Ie(t),e=Ie(e),k(t,function(t){t.properties||(t.properties={}),k(e,function(e){void 0===t.properties[n]&&ge(t,e)&&(t.properties[n]=e.properties[r])})}),t},e.tesselate=function(t){if(!t.geometry||"Polygon"!==t.geometry.type&&"MultiPolygon"!==t.geometry.type)throw new Error("input must be a Polygon or MultiPolygon");var e={type:"FeatureCollection",features:[]};return"Polygon"===t.geometry.type?e.features=Zr(t.geometry.coordinates):t.geometry.coordinates.forEach(function(t){e.features=e.features.concat(Zr(t))}),e},e.tin=xe,e.toMercator=Wa,e.toWgs84=Ha,e.transformRotate=ts,e.transformScale=es,e.transformTranslate=function(t,e,r,n){if(!L(n=n||{}))throw new Error("options is invalid");var i=n.units,o=n.zTranslation,s=n.mutate;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("distance is required");if(o&&"number"!=typeof o&&isNaN(o))throw new Error("zTranslation is not a number");if(o=void 0!==o?o:0,0===e&&0===o)return t;if(null==r||isNaN(r))throw new Error("direction is required");return e<0&&(e=-e,r+=180),!1!==s&&void 0!==s||(t=Ie(t)),A(t,function(t){var n=$(zi(t,e,r,{units:i}));t[0]=n[0],t[1]=n[1],o&&3===t.length&&(t[2]+=o)}),t},e.triangleGrid=dv,e.truncate=ri,e.union=function(t,e,r){void 0===r&&(r={});var n=it(t),i=it(e),o=tl.union(n.coordinates,i.coordinates);return 0===o.length?null:1===o.length?c(o[0],r.properties):g(o,r.properties)},e.unitsFactors=i,e.unkinkPolygon=function(t){var e=[];return q(t,function(t){"Polygon"===t.geometry.type&&k(si(t),function(r){e.push(c(r.geometry.coordinates,t.properties))})}),d(e)},e.validateBBox=N,e.validateId=T,e.voronoi=function(t,e){if(!L(e=e||{}))throw new Error("options is invalid");var r=e.bbox||[-180,-85,180,85];if(!t)throw new Error("points is required");if(!Array.isArray(r))throw new Error("bbox is invalid");return nt(t,"Point","points"),d(function(){var t=Ks,e=$s,r=null;function n(n){return new Aa(n.map(function(r,i){var o=[Math.round(t(r,i,n)/Na)*Na,Math.round(e(r,i,n)/Na)*Na];return o.index=i,o.data=r,o}),r)}return n.polygons=function(t){return n(t).polygons()},n.links=function(t){return n(t).links()},n.triangles=function(t){return n(t).triangles()},n.x=function(e){return arguments.length?(t="function"==typeof e?e:Qs(+e),n):t},n.y=function(t){return arguments.length?(e="function"==typeof t?t:Qs(+t),n):e},n.extent=function(t){return arguments.length?(r=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],n):r&&[[r[0][0],r[0][1]],[r[1][0],r[1][1]]]},n.size=function(t){return arguments.length?(r=null==t?null:[[0,0],[+t[0],+t[1]]],n):r&&[r[1][0]-r[0][0],r[1][1]-r[0][1]]},n}().x(function(t){return t.geometry.coordinates[0]}).y(function(t){return t.geometry.coordinates[1]}).extent([[r[0],r[1]],[r[2],r[3]]]).polygons(t.features).map(Ra))},e.within=_e,Object.defineProperty(e,"__esModule",{value:!0})})}).call(this,r(99))},function(t,e){t.exports=mapboxgl},function(t,e){var r=t.exports=typeof window!="undefined"&&window.Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")();if(typeof __g=="number")__g=r},function(t,e){var r=t.exports={version:"2.6.12"};if(typeof __e=="number")__e=r},function(t,e,r){"use strict";var n=r(276);var i=Object.prototype.toString;function o(t){return Array.isArray(t)}function s(t){return typeof t==="undefined"}function a(t){return t!==null&&!s(t)&&t.constructor!==null&&!s(t.constructor)&&typeof t.constructor.isBuffer==="function"&&t.constructor.isBuffer(t)}function u(t){return i.call(t)==="[object ArrayBuffer]"}function l(t){return i.call(t)==="[object FormData]"}function c(t){var e;if(typeof ArrayBuffer!=="undefined"&&ArrayBuffer.isView){e=ArrayBuffer.isView(t)}else{e=t&&t.buffer&&u(t.buffer)}return e}function h(t){return typeof t==="string"}function f(t){return typeof t==="number"}function p(t){return t!==null&&typeof t==="object"}function d(t){if(i.call(t)!=="[object Object]"){return false}var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function y(t){return i.call(t)==="[object Date]"}function v(t){return i.call(t)==="[object File]"}function g(t){return i.call(t)==="[object Blob]"}function m(t){return i.call(t)==="[object Function]"}function _(t){return p(t)&&m(t.pipe)}function b(t){return i.call(t)==="[object URLSearchParams]"}function x(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function S(){if(typeof navigator!=="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")){return false}return typeof window!=="undefined"&&typeof document!=="undefined"}function w(t,e){if(t===null||typeof t==="undefined"){return}if(typeof t!=="object"){t=[t]}if(o(t)){for(var r=0,n=t.length;r<n;r++){e.call(null,t[r],r,t)}}else{for(var i in t){if(Object.prototype.hasOwnProperty.call(t,i)){e.call(null,t[i],i,t)}}}}function C(){var t={};function e(e,r){if(d(t[r])&&d(e)){t[r]=C(t[r],e)}else if(d(e)){t[r]=C({},e)}else if(o(e)){t[r]=e.slice()}else{t[r]=e}}for(var r=0,n=arguments.length;r<n;r++){w(arguments[r],e)}return t}function I(t,e,r){w(e,function e(i,o){if(r&&typeof i==="function"){t[o]=n(i,r)}else{t[o]=i}});return t}function E(t){if(t.charCodeAt(0)===65279){t=t.slice(1)}return t}t.exports={isArray:o,isArrayBuffer:u,isBuffer:a,isFormData:l,isArrayBufferView:c,isString:h,isNumber:f,isObject:p,isPlainObject:d,isUndefined:s,isDate:y,isFile:v,isBlob:g,isFunction:m,isStream:_,isURLSearchParams:b,isStandardBrowserEnv:S,forEach:w,merge:C,extend:I,trim:x,stripBOM:E}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ShapeFactory=undefined;var n=r(5);var i=C(n);var o=r(6);var s=C(o);var a=r(7);var u=r(109);var l=r(181);var c=r(110);var h=r(302);var f=r(111);var p=r(303);var d=r(304);var y=r(182);var v=r(183);var g=r(305);var m=r(306);var _=r(184);var b=r(180);var x=r(112);var S=r(307);var w=r(308);function C(t){return t&&t.__esModule?t:{default:t}}var I=a.Common.copyAttributesWithClip,E=a.Common.Zondy;var P=function(){function t(e){(0,i.default)(this,t);this.shapeParameters=e;this.CLASS_NAME="Zondy.Feature.ShapeFactory"}(0,s.default)(t,[{key:"destroy",value:function t(){this.shapeParameters=null}},{key:"createShape",value:function e(r){if(r){this.shapeParameters=r}if(!this.shapeParameters){return null}var n=this.shapeParameters;if(n instanceof u.Point){var i=new Object;i["x"]=n.x;i["y"]=n.y;i["r"]=n.r;i=I(i,n.style,["x","y"]);var o=new v.SmicPoint;o.style=t.transformStyle(i);o.highlightStyle=t.transformStyle(n.highlightStyle);I(o,n,["x","y","style","highlightStyle"]);return o}else if(n instanceof l.Line){if(!n.pointList){return null}var s=new Object;s["pointList"]=n.pointList;s=I(s,n.style,["pointList"]);var a=new _.SmicBrokenLine;a.style=t.transformStyle(s);a.highlightStyle=t.transformStyle(n.highlightStyle);I(a,n,["pointList","style","highlightStyle"]);return a}else if(n instanceof c.Polygon){if(!n.pointList){return null}var C=new Object;C["pointList"]=n.pointList;C=I(C,n.style,["pointList"]);var E=new x.SmicPolygon;E.style=t.transformStyle(C);E.highlightStyle=t.transformStyle(n.highlightStyle);I(E,n,["pointList","style","highlightStyle"]);return E}else if(n instanceof h.Rectangle){if(!n.x&&!n.y&!n.width&!n.height){return null}var P=new Object;P["x"]=n.x;P["y"]=n.y;P["width"]=n.width;P["height"]=n.height;P=I(P,n.style,["x","y","width","height"]);var M=new S.SmicRectangle;M.style=t.transformStyle(P);M.highlightStyle=t.transformStyle(n.highlightStyle);I(M,n,["x","y","width","height","style","highlightStyle"]);return M}else if(n instanceof f.Sector){var L=new Object;L["x"]=n.x;L["y"]=n.y;L["r"]=n.r;L["startAngle"]=n.startAngle;L["endAngle"]=n.endAngle;if(n["r0"]){L["r0"]=n.r0}if(n["clockWise"]){L["clockWise"]=n.clockWise}L=I(L,n.style,["x","y","r","startAngle","endAngle","r0","endAngle"]);var N=new w.SmicSector;N.style=t.transformStyle(L);N.highlightStyle=t.transformStyle(n.highlightStyle);I(N,n,["x","y","r","startAngle","endAngle","r0","endAngle","style","highlightStyle"]);return N}else if(n instanceof p.Label){var T=new Object;T["x"]=n.x;T["y"]=n.y;T["text"]=n.text;T=I(T,n.style,["x","y","text"]);var O=new g.SmicText;O.style=t.transformStyle(T);O.highlightStyle=t.transformStyle(n.highlightStyle);I(O,n,["x","y","text","style","highlightStyle"]);return O}else if(n instanceof d.Image){var A=new Object;A["x"]=n.x;A["y"]=n.y;if(n["image"]){A["image"]=n.image}if(n["width"]){A["width"]=n.width}if(n["height"]){A["height"]=n.height}if(n["sx"]){A["sx"]=n.sx}if(n["sy"]){A["sy"]=n.sy}if(n["sWidth"]){A["sWidth"]=n.sWidth}if(n["sHeight"]){A["sHeight"]=n.sHeight}A=I(A,n.style,["x","y","image","width","height","sx","sy","sWidth","sHeight"]);var R=new b.SmicImage;R.style=t.transformStyle(A);R.highlightStyle=t.transformStyle(n.highlightStyle);I(R,n,["x","y","image","width","height","style","highlightStyle"]);return R}else if(n instanceof y.Circle){var F=new Object;F["x"]=n.x;F["r"]=n.r;F["y"]=n.y;F=I(F,n.style,["x","y","r"]);var D=new m.SmicCircle;D.style=new t.transformStyle(F);D.highlightStyle=new t.transformStyle(n.highlightStyle);I(D,n,["x","y","r","style","highlightStyle","lineWidth","text","textPosition"]);return D}return null}}],[{key:"transformStyle",value:function t(e){var r={};var n=["normal","normal","normal","12","arial,sans-serif"];var i=[true,false];for(var o in e){switch(o){case"fill":i[0]=e[o];break;case"fillColor":r["color"]=e[o];break;case"stroke":i[1]=e[o];break;case"strokeWidth":r["lineWidth"]=e[o];break;case"strokeLinecap":r["lineCap"]=e[o];break;case"strokeLineJoin":r["lineJoin"]=e[o];break;case"strokeDashstyle":r["lineType"]=e[o];break;case"pointRadius":r["r"]=e[o];break;case"label":r["text"]=e[o];break;case"labelRect":r["labelRect"]=e[o];break;case"fontColor":r["textColor"]=e[o];break;case"fontStyle":n[0]=e[o];break;case"fontVariant":n[1]=e[o];break;case"fontWeight":n[2]=e[o];break;case"fontSize":var s="";if(e[o]&&e[o].toString().indexOf("px")<0){s="px"}n[3]=e[o]+s;break;case"fontFamily":n[4]=e[o];break;case"fontOpacity":r["opacity"]=e[o];break;case"labelPosition":r["textPosition"]=e[o];break;case"labelAlign":r["textAlign"]=e[o];break;case"labelBaseline":r["textBaseline"]=e[o];break;case"labelRotation":r["textRotation"]=e[o];break;default:r[o]=e[o];break}}r["textFont"]=n.join(" ");if(i[0]===true&&i[1]===false){r["brushType"]="fill"}else if(i[0]===false&&i[1]===true){r["brushType"]="stroke"}else if(i[0]===true&&i[1]===true){r["brushType"]="both"}else{r["brushType"]="fill"}if(r["lineWidth"]==null){r["lineWidth"]=1}return r}},{key:"Background",value:function t(e,r,n){var i=n?n:{};var o=new h.Rectangle(r[0],r[3],Math.abs(r[2]-r[0]),Math.abs(r[3]-r[1]));o.style={fillColor:"#f3f3f3"};if(i.backgroundStyle){I(o.style,i.backgroundStyle)}if(i.backgroundRadius){o.style["radius"]=i.backgroundRadius}o.clickable=false;o.hoverable=false;return e.createShape(o)}},{key:"GraphAxis",value:function t(e,r,n,i){var o=r;var s=n?n:{};var a=[];var u=[];var h=s.useXReferenceLine?s.useXReferenceLine:false;var f=s.axisYTick&&!isNaN(s.axisYTick)?s.axisYTick:0;var d=[];var y=[];var v=[];if(f===0){v.push([o[0],o[3]-5]);v.push([o[0],o[1]]);if(s.axis3DParameter&&!isNaN(s.axis3DParameter)&&s.axis3DParameter>=15){var g=parseInt(s.axis3DParameter);var m=[o[0]-g,o[1]+g];if(s.axisUseArrow){y.push([m[0]+1.5,m[1]-7.5]);y.push([m[0]-1,m[1]+1]);y.push([m[0]+7.5,m[1]-1.5]);v.push([m[0],m[1]])}else{v.push([m[0],m[1]])}v.push([o[0],o[1]])}v.push([o[2]+5,o[1]])}else{var _=Math.abs(o[1]-o[3])/f;var b=o[3];v.push([o[0],b-5]);for(var x=0;x<f;x++){v.push([o[0],b]);v.push([o[0]-5,b]);v.push([o[0],b]);if(h){var S=new l.Line([[o[0],b],[o[2],b]]);S.style={strokeColor:"#cfcfcf",strokeLinecap:"butt",strokeLineJoin:"round",strokeWidth:1};S.clickable=false;S.hoverable=false;if(s.xReferenceLineStyle){I(S.style,s.xReferenceLineStyle)}a.push(e.createShape(S))}b+=_}v.push([o[0],o[1]]);if(s.axis3DParameter&&!isNaN(s.axis3DParameter)&&s.axis3DParameter>=15){var w=parseInt(s.axis3DParameter);var C=[o[0]-w,o[1]+w];if(s.axisUseArrow){y.push([C[0]+1.5,C[1]-7.5]);y.push([C[0]-1,C[1]+1]);y.push([C[0]+7.5,C[1]-1.5]);v.push([C[0],C[1]])}else{v.push([C[0],C[1]])}v.push([o[0],o[1]])}v.push([o[2]+5,o[1]])}if(s.axisUseArrow){var E=[[o[2]+5,o[1]+4],[o[2]+13,o[1]],[o[2]+5,o[1]-4]];var P=[[o[0]-4,o[3]-5],[o[0],o[3]-13],[o[0]+4,o[3]-5]];var M=new c.Polygon(E);M.style={fillColor:"#008acd"};I(M.style,s.axisStyle);u.push(e.createShape(M));var L=new c.Polygon(P);L.style={fillColor:"#008acd"};I(L.style,s.axisStyle);u.push(e.createShape(L));if(s.axis3DParameter&&!isNaN(s.axis3DParameter)&&s.axis3DParameter>=15){var N=new c.Polygon(y);N.style={fillColor:"#008acd"};I(N.style,s.axisStyle);u.push(e.createShape(N))}}d=v;var T=new l.Line(d);T.style={strokeLinecap:"butt",strokeLineJoin:"round",strokeColor:"#008acd",strokeWidth:1};if(s.axisStyle){I(T.style,s.axisStyle)}T.clickable=false;T.hoverable=false;var O=[e.createShape(T)];var A=[];if(s.axisYLabels&&s.axisYLabels.length&&s.axisYLabels.length>0){var R=s.axisYLabels;var F=R.length;var D=[0,0];if(s.axisYLabelsOffset&&s.axisYLabelsOffset.length){D=s.axisYLabelsOffset}if(F===1){var k=new p.Label(o[0]-5+D[0],o[3]+D[1],R[0]);k.style={labelAlign:"right"};if(s.axisYLabelsStyle){I(k.style,s.axisYLabelsStyle)}k.clickable=false;k.hoverable=false;A.push(e.createShape(k))}else{var j=o[3];var G=Math.abs(o[1]-o[3])/(F-1);for(var B=0;B<F;B++){var U=new p.Label(o[0]-5+D[0],j+D[1],R[B]);U.style={labelAlign:"right"};if(s.axisYLabelsStyle){I(U.style,s.axisYLabelsStyle)}U.clickable=false;U.hoverable=false;A.push(e.createShape(U));j+=G}}}var q=[];if(s.axisXLabels&&s.axisXLabels.length&&s.axisXLabels.length>0){var z=s.axisXLabels;var V=z.length;var W=[0,0];if(s.axisXLabelsOffset&&s.axisXLabelsOffset.length){W=s.axisXLabelsOffset}if(i&&i.xPositions&&i.xPositions.length&&i.xPositions.length===V){var H=i.xPositions;for(var X=0;X<V;X++){var Z=new p.Label(H[X]+W[0],o[1]+W[1],z[X]);Z.style={labelAlign:"center",labelBaseline:"top"};if(s.axisXLabelsStyle){I(Z.style,s.axisXLabelsStyle)}Z.clickable=false;Z.hoverable=false;q.push(e.createShape(Z))}}else{if(V===1){var Y=new p.Label(o[0]-5+W[0],o[1]+W[0],z[0]);Y.style={labelAlign:"center",labelBaseline:"top"};if(s.axisXLabelsStyle){I(Y.style,s.axisXLabelsStyle)}Y.clickable=false;Y.hoverable=false;q.push(e.createShape(Y))}else{var J=o[0];var Q=Math.abs(o[2]-o[0])/(V-1);for(var K=0;K<V;K++){var $=new p.Label(J+W[0],o[1]+W[1],z[K]);$.style={labelAlign:"center",labelBaseline:"top"};if(s.axisXLabelsStyle){I($.style,s.axisXLabelsStyle)}$.clickable=false;$.hoverable=false;q.push(e.createShape($));J+=Q}}}}return a.concat(O).concat(A).concat(q).concat(u)}},{key:"ShapeStyleTool",value:function t(e,r,n,i,o,s){var a=e?e:{};if(r){I(a,r)}if(n&&n.length&&typeof o!=="undefined"&&!isNaN(o)&&o>=0){if(n[o]){I(a,n[o])}}if(i&&i.length&&typeof s!=="undefined"){var u=i;var l=u.length;var c=parseFloat(s);for(var h=0;h<l;h++){if(u[h].start<=c&&c<u[h].end){I(a,u[h].style);break}}}return a}}]);return t}();e.ShapeFactory=P;E.Feature.ShapeFactory=P},function(t,e,r){var n=r(130)("wks");var i=r(91);var o=r(20).Symbol;var s=typeof o=="function";var a=t.exports=function(t){return n[t]||(n[t]=s&&o[t]||(s?o:i)("Symbol."+t))};a.store=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.LayerStatusType=e.MapType=e.CItemType=e.CLinStyleMakeType=e.CLinJointType=e.CLinHeadType=e.CLinAdjustType=e.NetElemType=e.NetAnalyType=e.ISShowArc=e.EightDirType=e.LineConstrain=e.LabelSpreadType=e.RepeatType=e.LabelPntType=e.LabelRegType=e.LabelLinType=e.FontShape=e.FeatureType=e.VectClsType=e.XClsType=undefined;var n=r(376);var i=a(n);var o;var s=r(0);function a(t){return t&&t.__esModule?t:{default:t}}var u={SFCls:"SFeatureCls",OCls:"ObjectCls",ACls:"AnnotationCls",GnetCls:"GNetCls",RDS:"RasterDataset",SFClsInfo:"sfcls_new"};e.XClsType=u;s.Zondy.Enum.XClsType=u;var l={Unknown:0,SFCls:"SFeatureCls",AnnoCls:"AnnotationCls"};e.VectClsType=l;s.Zondy.Enum.VectClsType=l;var c={Unknown:0,Pnt:1,Lin:2,Reg:3};e.FeatureType=c;s.Zondy.Enum.FeatureType=c;var h={Positive:0,LeftOblique:1,RightOblique:2,LeftTowering:3,RightTowering:4};e.FontShape=h;s.Zondy.Enum.FontShape=h;var f={Curved:0,Forward:1,Horizontal:2,Tangent:3};e.LabelLinType=f;s.Zondy.Enum.LabelLinType=f;var p={Curved:0,Forward:1,Horizontal:2,Boundray:3,Outside:4};e.LabelRegType=p;s.Zondy.Enum.LabelRegType=p;var d={PntAnyDir:0,PntEightDir:1,PntOnFea:2};e.LabelPntType=d;s.Zondy.Enum.LabelPntType=d;var y={Auto:0,NoRep:1,OnStep:2};e.RepeatType=y;s.Zondy.Enum.RepeatType=y;var v={AutoSpread:0,Centralization:1,Decentralization:2};e.LabelSpreadType=v;s.Zondy.Enum.LabelSpreadType=v;var g={Left:0,Right:1,Above:2,Below:3,Both:4,NoRes:5};e.LineConstrain=g;s.Zondy.Enum.LineConstrain=g;var m={East:0,North:1,NorthEast:2,NorthWest:3,South:4,SouthEast:5,SouthWest:6,West:7,NoDir:8};e.EightDirType=m;s.Zondy.Enum.EightDirType=m;var _={Reg:0,Arc:1,All:2};e.ISShowArc=_;s.Zondy.Enum.ISShowArc=_;var b=(o={UserMode:"UserMode",SysModeCommwayPrefer:"SysModeCommwayPrefer",SysModeHighWayPrefer:"SysModeHighWayPrefer",SysModeMinCost:"SysModeMinCost",SysModeMinDis:"SysModeMinDis"},(0,i.default)(o,"SysModeMinDis","SysModeMinDis"),(0,i.default)(o,"SysModeSysRecommend","SysModeSysRecommend"),o);e.NetAnalyType=b;s.Zondy.Enum.Net.NetAnalyType=b;var x={Node:1,Edge:2,CNode:3,Chain:4,Center:5,Source:13,Sink:13};e.NetElemType=x;s.Zondy.Enum.Net.NetElemType=x;var S={Adjust:0,NoAdjust:1};e.CLinAdjustType=S;s.Zondy.Enum.Theme.CLinAdjustType=S;var w={Round:0,Square:1,Butt:2};e.CLinHeadType=w;s.Zondy.Enum.Theme.CLinHeadType=w;var C={Round:0,Square:1,Butt:2};e.CLinJointType=C;s.Zondy.Enum.Theme.CLinJointType=C;var I={Byrule:0,Bypoint:1};e.CLinStyleMakeType=I;s.Zondy.Enum.Theme.CLinStyleMakeType=I;var E={Unknown:0,UniqueTheme:1,RangeTheme:2};e.CItemType=E;s.Zondy.Enum.Theme.CItemType=E;var P={Doc:"mapType",Tile:"tileType"};e.MapType=P;s.Zondy.Enum.Map.MapType=P;var M={Show:"show",Hide:"hide",Include:"include",Exclude:"exclude"};e.LayerStatusType=M;s.Zondy.Enum.Map.LayerStatusType=M},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Shape=undefined;var n=r(11);var i=_(n);var o=r(5);var s=_(o);var a=r(6);var u=_(a);var l=r(12);var c=_(l);var h=r(14);var f=_(h);var p=r(13);var d=_(p);var y=r(7);var v=r(80);var g=r(106);var m=r(28);function _(t){return t&&t.__esModule?t:{default:t}}var b=y.Common.Zondy,x=y.Common.mixin,S=y.Common.newGuid,w=y.Common.extend;var C=function(t){(0,d.default)(e,t);function e(t){(0,s.default)(this,e);var r=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t));t=t||{};r.id=null;r.style={};r.highlightStyle=null;r.parent=null;r.__dirty=true;r.__clipShapes=[];r.invisible=false;r.ignore=false;r.zlevel=0;r.draggable=false;r.clickable=false;r.hoverable=true;r.z=0;r.refOriginalPosition=[0,0];r.refDataID=null;r.isHoverByRefDataID=false;r.refDataHoverGroup=null;r.dataInfo=null;w(r,t);r.id=r.id||S();r.CLASS_NAME="Zondy.LevelRenderer.Shape";r.getTansform=function(){var t=[];return function(e,r){var n=[e,r];if(this.needTransform&&this.transform){m.SUtil.Util_matrix.invert(t,this.transform);m.SUtil.Util_matrix.mulVector(n,t,[e,r,1]);if(e===n[0]&&r===n[1]){this.updateNeedTransform()}}return n}}();return r}(0,u.default)(e,[{key:"destroy",value:function t(){this.id=null;this.style=null;this.highlightStyle=null;this.parent=null;this.__dirty=null;this.__clipShapes=null;this.invisible=null;this.ignore=null;this.zlevel=null;this.draggable=null;this.clickable=null;this.hoverable=null;this.z=null;this.refOriginalPosition=null;this.refDataID=null;this.refDataHoverGroup=null;this.isHoverByRefDataID=null;this.dataInfo=null;(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}},{key:"brush",value:function t(e,r){var n=this.beforeBrush(e,r);e.beginPath();this.buildPath(e,n);switch(n.brushType){case"both":this.setCtxGlobalAlpha(e,"fill",n);e.fill();if(n.lineWidth>0){this.setCtxGlobalAlpha(e,"stroke",n);e.stroke()}this.setCtxGlobalAlpha(e,"reset",n);break;case"stroke":this.setCtxGlobalAlpha(e,"stroke",n);n.lineWidth>0&&e.stroke();this.setCtxGlobalAlpha(e,"reset",n);break;default:this.setCtxGlobalAlpha(e,"fill",n);e.fill();this.setCtxGlobalAlpha(e,"reset",n);break}this.drawText(e,n,this.style);this.afterBrush(e)}},{key:"beforeBrush",value:function t(e,r){var n=this.style;if(this.brushTypeOnly){n.brushType=this.brushTypeOnly}if(r){n=this.getHighlightStyle(n,this.highlightStyle||{},this.brushTypeOnly)}if(this.brushTypeOnly==="stroke"){n.strokeColor=n.strokeColor||n.color}e.save();this.doClip(e);this.setContext(e,n);this.setTransform(e);return n}},{key:"afterBrush",value:function t(e){e.restore()}},{key:"setContext",value:function t(e,r){var n=[["color","fillStyle"],["strokeColor","strokeStyle"],["opacity","globalAlpha"],["lineCap","lineCap"],["lineJoin","lineJoin"],["miterLimit","miterLimit"],["lineWidth","lineWidth"],["shadowBlur","shadowBlur"],["shadowColor","shadowColor"],["shadowOffsetX","shadowOffsetX"],["shadowOffsetY","shadowOffsetY"]];for(var i=0,o=n.length;i<o;i++){var s=n[i][0];var a=r[s];var u=n[i][1];if(typeof a!="undefined"){e[u]=a}}}},{key:"doClip",value:function t(e){var r=m.SUtil.Util_matrix.create();if(this.__clipShapes){for(var n=0;n<this.__clipShapes.length;n++){var i=this.__clipShapes[n];if(i.needTransform){var o=i.transform;m.SUtil.Util_matrix.invert(r,o);e.transform(o[0],o[1],o[2],o[3],o[4],o[5])}e.beginPath();i.buildPath(e,i.style);e.clip();if(i.needTransform){var s=r;e.transform(s[0],s[1],s[2],s[3],s[4],s[5])}}}}},{key:"getHighlightStyle",value:function t(e,r,n){var i={};for(var o in e){i[o]=e[o]}var s=m.SUtil.Util_color.getHighlightColor();if(e.brushType!=="stroke"){i.strokeColor=s;i.lineWidth=e.lineWidth||1;i.brushType="both"}else{if(n!=="stroke"){i.strokeColor=s;i.lineWidth=e.lineWidth||1}else{i.strokeColor=r.strokeColor||m.SUtil.Util_color.mix(e.strokeColor,m.SUtil.Util_color.toRGB(s))}}for(var a in r){if(typeof r[a]!="undefined"){i[a]=r[a]}}return i}},{key:"getHighlightZoom",value:function t(){return this.type!=="text"?6:2}},{key:"drift",value:function t(e,r){this.position[0]+=e;this.position[1]+=r}},{key:"buildPath",value:function t(e,r){}},{key:"getRect",value:function t(e){}},{key:"isCover",value:function t(e,r){var n=this.getTansform(e,r);e=n[0];r=n[1];var i=this.style.__rect;if(!i){i=this.style.__rect=this.getRect(this.style)}if(e>=i.x&&e<=i.x+i.width&&r>=i.y&&r<=i.y+i.height){return m.SUtil.Util_area.isInside(this,this.style,e,r)}return false}},{key:"drawText",value:function t(r,n,i){if(typeof n.text=="undefined"||n.text===false){return}var o=n.textColor||n.color||n.strokeColor;r.fillStyle=o;var s=10;var a;var u;var l;var c;var h=n.textPosition||this.textPosition||"top";var f=[];if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){f=[0,0]}else{f=this.refOriginalPosition}switch(h){case"inside":case"top":case"bottom":case"left":case"right":if(this.getRect){var p=(i||n).__rect||this.getRect(i||n);switch(h){case"inside":l=p.x+p.width/2;c=p.y+p.height/2;a="center";u="middle";if(n.brushType!=="stroke"&&o===n.color){r.fillStyle="#fff"}break;case"left":l=p.x-s;c=p.y+p.height/2;a="end";u="middle";break;case"right":l=p.x+p.width+s;c=p.y+p.height/2;a="start";u="middle";break;case"top":l=p.x+p.width/2;c=p.y-s;a="center";u="bottom";break;case"bottom":l=p.x+p.width/2;c=p.y+p.height+s;a="center";u="top";break}}break;case"start":case"end":var d=0;var y=0;var v=0;var g=0;if(typeof n.pointList!="undefined"){var m=n.pointList;if(m.length<2){return}var _=m.length;switch(h){case"start":d=m[0][0]+f[0];y=m[1][0]+f[0];v=m[0][1]+f[1];g=m[1][1]+f[1];break;case"end":d=m[_-2][0]+f[0];y=m[_-1][0]+f[0];v=m[_-2][1]+f[1];g=m[_-1][1]+f[1];break}}else{d=n.xStart+f[0]||0;y=n.xEnd+f[0]||0;v=n.yStart+f[1]||0;g=n.yEnd+f[1]||0}switch(h){case"start":a=d<y?"end":"start";u=v<g?"bottom":"top";l=d;c=v;break;case"end":a=d<y?"start":"end";u=v<g?"top":"bottom";l=y;c=g;break}s-=4;if(d&&y&&d!==y){l-=a==="end"?s:-s}else{a="center"}if(v!==g){c-=u==="bottom"?s:-s}else{u="middle"}break;case"specific":l=n.textX||0;c=n.textY||0;a="start";u="middle";break}if(n.labelXOffset&&!isNaN(n.labelXOffset)){l+=n.labelXOffset}if(n.labelYOffset&&!isNaN(n.labelYOffset)){c+=n.labelYOffset}if(l!=null&&c!=null){e._fillText(r,n.text,l,c,n.textFont,n.textAlign||a,n.textBaseline||u)}}},{key:"modSelf",value:function t(){this.__dirty=true;if(this.style){this.style.__rect=null}if(this.highlightStyle){this.highlightStyle.__rect=null}}},{key:"isSilent",value:function t(){return!(this.hoverable||this.draggable||this.clickable||this.onmousemove||this.onmouseover||this.onmouseout||this.onmousedown||this.onmouseup||this.onclick||this.ondragenter||this.ondragover||this.ondragleave||this.ondrop)}},{key:"setCtxGlobalAlpha",value:function t(e,r,n){if(r==="fill"){e.globalAlpha=typeof n["fillOpacity"]==="undefined"?typeof n["opacity"]==="undefined"?1:n["opacity"]:n["fillOpacity"]}else if(r==="stroke"){e.globalAlpha=typeof n["strokeOpacity"]==="undefined"?typeof n["opacity"]==="undefined"?1:n["opacity"]:n["strokeOpacity"]}else{e.globalAlpha=typeof n["opacity"]==="undefined"?1:n["opacity"]}}}],[{key:"_fillText",value:function t(r,n,i,o,s,a,u){if(s){r.font=s}r.textAlign=a;r.textBaseline=u;var l=e._getTextRect(n,i,o,s,a,u);n=(n+"").split("\n");var c=m.SUtil.Util_area.getTextHeight("ZH",s);switch(u){case"top":o=l.y;break;case"bottom":o=l.y+c;break;default:o=l.y+c/2}for(var h=0,f=n.length;h<f;h++){r.fillText(n[h],i,o);o+=c}}},{key:"_getTextRect",value:function t(e,r,n,i,o,s){var a=m.SUtil.Util_area.getTextWidth(e,i);var u=m.SUtil.Util_area.getTextHeight("ZH",i);e=(e+"").split("\n");switch(o){case"end":case"right":r-=a;break;case"center":r-=a/2;break}switch(s){case"top":break;case"bottom":n-=u*e.length;break;default:n-=u*e.length/2}return{x:r,y:n,width:a,height:u*e.length}}}]);return e}(x(v.Eventful,g.Transformable));e.Shape=C;b.LevelRenderer.Shape=C},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ServiceBase=undefined;var n=r(1);var i=l(n);var o=r(9);var s=l(o);var a=r(0);var u=r(8);function l(t){return t&&t.__esModule?t:{default:t}}var c=function(){function t(e){(0,i.default)(this,t);(0,u.extend)(this,e);this.baseUrl=e&&e.baseUrl?e.baseUrl:null;this.ip=e&&e.ip?e.ip:"localhost";this.port=e&&e.port?e.port:"6163";this.partUrl=e&&e.partUrl?e.partUrl:null;this.networkProtocol=e&&e.networkProtocol?e.networkProtocol:location.protocol.split(":")[0]||"http";this.domain=e&&e.domain?e.domain:""}(0,s.default)(t,[{key:"getFullUrl",value:function t(){var e=this;var r=null;if(a.Zondy.Util.isArray(e.ip)){for(var n=0;n<e.ip.length;n++){r=new Array;var i=null;if((0,u.isArray)(e.port)){i=e.port[n]!==undefined?e.port[n]:"6163"}else{i=e.port!==undefined?e.port:"6163"}var o=null;if((0,u.isArray)(e.partUrl)){o=e.partUrl[n]!==undefined?e.partUrl[n]:null}else{o=e.partUrl!==undefined?e.partUrl:null}if(e.domain===""){e.domainStr=e.networkProtocol+"://"+e.ip[n]+":"+i}else{e.domainStr=e.domain}r.push(encodeURI((e.domainStr+"/"+e.baseUrl+"/"+o).trim()))}}else{if(e.domain===""){e.domainStr=e.networkProtocol+"://"+e.ip+":"+e.port}else{e.domainStr=e.domain}r=encodeURI((e.domainStr+"/"+e.baseUrl+"/"+e.partUrl).trim())}return r}}]);return t}();e.ServiceBase=c;a.Zondy.Service.ServiceBase=c},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.SUtil=undefined;var n=r(5);var i=_(n);var o=r(6);var s=_(o);var a=r(7);var u=r(290);var l=r(178);var c=r(291);var h=r(107);var f=r(292);var p=r(293);var d=r(294);var y=r(295);var v=r(296);var g=r(67);var m=r(108);function _(t){return t&&t.__esModule?t:{default:t}}var b=a.Common.Zondy;var x=function(){function t(){(0,i.default)(this,t)}(0,s.default)(t,null,[{key:"SUtil_smoothBezier",value:function e(r,n,i,o,s){if(!s||s!==2){s=[0,0]}var a=s;var u=[];var l=[];var c=[];var h=[];var f=!!o;var p,d;if(f){p=[Infinity,Infinity];d=[-Infinity,-Infinity];var y=r.length;for(var v=0;v<y;v++){t.Util_vector.min(p,p,[r[v][0]+a[0],r[v][1]+a[1]]);t.Util_vector.max(d,d,[r[v][0]+a[0],r[v][1]+a[1]])}t.Util_vector.min(p,p,o[0]);t.Util_vector.max(d,d,o[1])}var g=r.length;for(var m=0;m<g;m++){var _=[r[m][0]+a[0],r[m][1]+a[1]];var b=void 0;var x=void 0;if(i){b=[r[m?m-1:g-1][0]+a[0],r[m?m-1:g-1][1]+a[1]];x=[r[(m+1)%g][0]+a[0],r[(m+1)%g][1]+a[1]]}else{if(m===0||m===g-1){u.push([r[m][0]+a[0],r[m][1]+a[1]]);continue}else{b=[r[m-1][0]+a[0],r[m-1][1]+a[1]];x=[r[m+1][0]+a[0],r[m+1][1]+a[1]]}}t.Util_vector.sub(l,x,b);t.Util_vector.scale(l,l,n);var S=t.Util_vector.distance(_,b);var w=t.Util_vector.distance(_,x);var C=S+w;if(C!==0){S/=C;w/=C}t.Util_vector.scale(c,l,-S);t.Util_vector.scale(h,l,w);var I=t.Util_vector.add([],_,c);var E=t.Util_vector.add([],_,h);if(f){t.Util_vector.max(I,I,p);t.Util_vector.min(I,I,d);t.Util_vector.max(E,E,p);t.Util_vector.min(E,E,d)}u.push(I);u.push(E)}if(i){u.push(u.shift())}return u}},{key:"SUtil_smoothSpline",value:function e(r,n,i,o){if(!o||o!==2){o=[0,0]}var s=o;var a=r.length;var u=[];var l=0;for(var c=1;c<a;c++){l+=t.Util_vector.distance([r[c-1][0]+s[0],r[c-1][1]+s[1]],[r[c][0]+s[0],r[c][1]+s[1]])}var h=l/5;h=h<a?a:h;for(var f=0;f<h;f++){var p=f/(h-1)*(n?a:a-1);var d=Math.floor(p);var y=p-d;var v=void 0;var g=[r[d%a][0]+s[0],r[d%a][1]+s[1]];var m=void 0;var _=void 0;if(!n){v=[r[d===0?d:d-1][0]+s[0],r[d===0?d:d-1][1]+s[1]];m=[r[d>a-2?a-1:d+1][0]+s[0],r[d>a-2?a-1:d+1][1]+s[1]];_=[r[d>a-3?a-1:d+2][0]+s[0],r[d>a-3?a-1:d+2][1]+s[1]]}else{v=[r[(d-1+a)%a][0]+s[0],r[(d-1+a)%a][1]+s[1]];m=[r[(d+1)%a][0]+s[0],r[(d+1)%a][1]+s[1]];_=[r[(d+2)%a][0]+s[0],r[(d+2)%a][1]+s[1]]}var b=y*y;var x=y*b;u.push([S(v[0],g[0],m[0],_[0],y,b,x),S(v[1],g[1],m[1],_[1],y,b,x)])}return u;function S(t,e,r,n,i,o,s){var a=(r-t)*.5;var u=(n-e)*.5;return(2*(e-r)+a+u)*s+(-3*(e-r)-2*a-u)*o+a*i+e}}},{key:"SUtil_dashedLineTo",value:function t(e,r,n,i,o,s,a){var u=[5,5];s=typeof s!="number"?5:s;if(e.setLineDash){u[0]=s;u[1]=s;if(a&&a instanceof Array){e.setLineDash(a)}else{e.setLineDash(u)}e.moveTo(r,n);e.lineTo(i,o);return}var l=i-r;var c=o-n;var h=Math.floor(Math.sqrt(l*l+c*c)/s);l=l/h;c=c/h;var f=true;for(var p=0;p<h;++p){if(f){e.moveTo(r,n)}else{e.lineTo(r,n)}f=!f;r+=l;n+=c}e.lineTo(i,o)}}]);return t}();x.Util_area=new u.Area;x.Util_color=new l.Color;x.Util_computeBoundingBox=new c.ComputeBoundingBox;x.Util_curve=new h.Curve;x.Util_env=new f.Env;x.Util_event=new p.Event;x.Util_http=new d.Http;x.Util_math=new y.Math;x.Util_matrix=new v.Matrix;x.Util=new g.Util;x.Util_vector=new m.Vector;e.SUtil=x;b.LevelRenderer.SUtil=x},function(t,e,r){"use strict";var n=r(542);var i=r(552);var o=r(176);t.exports={formats:o,parse:i,stringify:n}},function(t,e,r){var n=r(20);var i=r(17);var o=r(71);var s=r(53);var a=r(54);var u="prototype";var l=function(t,e,r){var c=t&l.F;var h=t&l.G;var f=t&l.S;var p=t&l.P;var d=t&l.B;var y=t&l.W;var v=h?i:i[e]||(i[e]={});var g=v[u];var m=h?n:f?n[e]:(n[e]||{})[u];var _,b,x;if(h)r=e;for(_ in r){b=!c&&m&&m[_]!==undefined;if(b&&a(v,_))continue;x=b?m[_]:r[_];v[_]=h&&typeof m[_]!="function"?r[_]:d&&b?o(x,n):y&&m[_]==x?function(t){var e=function(e,r,n){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,r)}return new t(e,r,n)}return t.apply(this,arguments)};e[u]=t[u];return e}(x):p&&typeof x=="function"?o(Function.call,x):x;if(p){(v.virtual||(v.virtual={}))[_]=x;if(t&l.R&&g&&!g[_])s(g,_,x)}}};l.F=1;l.G=2;l.S=4;l.P=8;l.B=16;l.W=32;l.U=64;l.R=128;t.exports=l},function(t,e,r){var n=r(45);t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.notNULL=e.formatPoints=e.returnPoint=e.formatEdits=e.formatQuery=e.createCanvasContext2D=e.mixin=e.merge=e.DeepMerge=e.ChineseToUtf8=e.getTopAnalysisResult=e.bindAsEventListener=e.bind=e.newGuid=e.cloneObject=e.copyAttributesWithClip=e.copyAttributes=e.transformResult=e.toJSON=e.isInTheSameDomain=e.supportCanvas=e.isSupportCanvas=e.getBrowser=e.Browser=e.IS_GECKO=e.getParameters=e.urlAppend=e.getWFParameterString=e.getParameterString=e.applyDefaults=e.modifyDOMElement=e.indexOf=e.removeItem=e.isElement=e.getElement=e.reset=e.copyExcluce=e.copy=e.extendDeep=e.isArray=e.extend=e.WebGraphicsInfo=e.VectCls=e.Tangram=e.Rectangle=e.PolyLine=e.Polygon=e.Point2D=e.MultiPolygon=e.LablePntInfo=e.LabelRegInfo=e.LabelLinInfo=e.GRegion=e.GPoint=e.GLine=e.FeatureSet=e.FeatureGraphicBase=e.FeatureGeometry=e.Feature=e.LayerStatusType=e.MapType=e.CItemType=e.CLinStyleMakeType=e.CLinJointType=e.CLinHeadType=e.CLinAdjustType=e.NetElemType=e.NetAnalyType=e.ISShowArc=e.EightDirType=e.LineConstrain=e.LabelSpreadType=e.RepeatType=e.LabelPntType=e.LabelRegType=e.LabelLinType=e.FontShape=e.FeatureType=e.VectClsType=e.XClsType=e.DynShowStyle=e.DynNoteLableType=e.CRegionInfo=e.CPointInfo=e.CLineInfo=e.Circle=e.CGDBInfo=e.CDynNoteInfo=e.CDisplayStyleExtend=e.CDisplayStyle=e.CAttDataRow=e.CAttStruct=e.Zondy=e.Arc=e.AnyLine=undefined;var n=r(140);var i=r(373);var o=r(0);var s=r(96);var a=r(374);var u=r(375);var l=r(213);var c=r(208);var h=r(214);var f=r(377);var p=r(97);var d=r(141);var y=r(142);var v=r(209);var g=r(207);var m=r(25);var _=r(215);var b=r(217);var x=r(98);var S=r(219);var w=r(144);var C=r(143);var I=r(145);var E=r(211);var P=r(212);var M=r(210);var L=r(387);var N=r(33);var T=r(220);var O=r(388);var A=r(216);var R=r(56);var F=r(389);var D=r(218);var k=r(8);e.AnyLine=n.AnyLine;e.Arc=i.Arc;e.Zondy=o.Zondy;e.CAttStruct=s.CAttStruct;e.CAttDataRow=a.CAttDataRow;e.CDisplayStyle=u.CDisplayStyle;e.CDisplayStyleExtend=l.CDisplayStyleExtend;e.CDynNoteInfo=c.CDynNoteInfo;e.CGDBInfo=h.CGDBInfo;e.Circle=f.Circle;e.CLineInfo=p.CLineInfo;e.CPointInfo=d.CPointInfo;e.CRegionInfo=y.CRegionInfo;e.DynNoteLableType=v.DynNoteLableType;e.DynShowStyle=g.DynShowStyle;e.XClsType=m.XClsType;e.VectClsType=m.VectClsType;e.FeatureType=m.FeatureType;e.FontShape=m.FontShape;e.LabelLinType=m.LabelLinType;e.LabelRegType=m.LabelRegType;e.LabelPntType=m.LabelPntType;e.RepeatType=m.RepeatType;e.LabelSpreadType=m.LabelSpreadType;e.LineConstrain=m.LineConstrain;e.EightDirType=m.EightDirType;e.ISShowArc=m.ISShowArc;e.NetAnalyType=m.NetAnalyType;e.NetElemType=m.NetElemType;e.CLinAdjustType=m.CLinAdjustType;e.CLinHeadType=m.CLinHeadType;e.CLinJointType=m.CLinJointType;e.CLinStyleMakeType=m.CLinStyleMakeType;e.CItemType=m.CItemType;e.MapType=m.MapType;e.LayerStatusType=m.LayerStatusType;e.Feature=_.Feature;e.FeatureGeometry=b.FeatureGeometry;e.FeatureGraphicBase=x.FeatureGraphicBase;e.FeatureSet=S.FeatureSet;e.GLine=w.GLine;e.GPoint=C.GPoint;e.GRegion=I.GRegion;e.LabelLinInfo=E.LabelLinInfo;e.LabelRegInfo=P.LabelRegInfo;e.LablePntInfo=M.LablePntInfo;e.MultiPolygon=L.MultiPolygon;e.Point2D=N.Point2D;e.Polygon=T.Polygon;e.PolyLine=O.PolyLine;e.Rectangle=A.Rectangle;e.Tangram=R.Tangram;e.VectCls=F.VectCls;e.WebGraphicsInfo=D.WebGraphicsInfo;e.extend=k.extend;e.isArray=k.isArray;e.extendDeep=k.extendDeep;e.copy=k.copy;e.copyExcluce=k.copyExcluce;e.reset=k.reset;e.getElement=k.getElement;e.isElement=k.isElement;e.removeItem=k.removeItem;e.indexOf=k.indexOf;e.modifyDOMElement=k.modifyDOMElement;e.applyDefaults=k.applyDefaults;e.getParameterString=k.getParameterString;e.getWFParameterString=k.getWFParameterString;e.urlAppend=k.urlAppend;e.getParameters=k.getParameters;e.IS_GECKO=k.IS_GECKO;e.Browser=k.Browser;e.getBrowser=k.getBrowser;e.isSupportCanvas=k.isSupportCanvas;e.supportCanvas=k.supportCanvas;e.isInTheSameDomain=k.isInTheSameDomain;e.toJSON=k.toJSON;e.transformResult=k.transformResult;e.copyAttributes=k.copyAttributes;e.copyAttributesWithClip=k.copyAttributesWithClip;e.cloneObject=k.cloneObject;e.newGuid=k.newGuid;e.bind=k.bind;e.bindAsEventListener=k.bindAsEventListener;e.getTopAnalysisResult=k.getTopAnalysisResult;e.ChineseToUtf8=k.ChineseToUtf8;e.DeepMerge=k.DeepMerge;e.merge=k.merge;e.mixin=k.mixin;e.createCanvasContext2D=k.createCanvasContext2D;e.formatQuery=k.formatQuery;e.formatEdits=k.formatEdits;e.returnPoint=k.returnPoint;e.formatPoints=k.formatPoints;e.notNULL=k.notNULL},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Point2D=undefined;var n=r(2);var i=d(n);var o=r(1);var s=d(o);var a=r(9);var u=d(a);var l=r(3);var c=d(l);var h=r(4);var f=d(h);var p=r(56);function d(t){return t&&t.__esModule?t:{default:t}}var y=function(t){(0,f.default)(e,t);function e(t,r,n){(0,s.default)(this,e);var o=n?n:{};var a=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,o));a.x=t!==undefined?t:null;a.y=r!==undefined?r:null;a.nearDis=o.nearDis!==undefined?parseFloat(o.nearDis):null;a.CLASS_NAME="Zondy.Object.Point2D";return a}(0,u.default)(e,[{key:"getGeometryType",value:function t(){return"point"}},{key:"setByOL",value:function t(e){if(e!==undefined){var r=e.getCoordinates();this.x=r[0];this.y=r[1]}}},{key:"toString",value:function t(){if(this.x===null||this.y===null)return"";var e=this.x+","+this.y;if(this.nearDis!==undefined){e+=";"+this.nearDis}return e}}]);return e}(p.Tangram);e.Point2D=y;Zondy.Object.Point2D=y},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CTheme=undefined;var n=r(1);var i=a(n);var o=r(0);var s=r(8);function a(t){return t&&t.__esModule?t:{default:t}}var u=function t(e){(0,i.default)(this,t);var r=e!==undefined?e:{};(0,s.extend)(this,r);this.Name=r&&r.Name?r.Name:null;this.IsBaseTheme=r&&r.IsBaseTheme?r.IsBaseTheme:true;this.Visible=r&&r.Visible?r.Visible:true};e.CTheme=u;o.Zondy.Object.Theme.CTheme=u},function(t,e,r){t.exports=r(525)},function(t,e,r){"use strict";const n=r(515);const i=r(104);const o=r(104);const s=r(39).buildOptions;const a=r(518);e.parse=function(t,e={},r){if(r){if(r===true)r={};const e=a.validate(t,r);if(e!==true){throw Error(e.err.msg)}}if(e.parseTrueNumberOnly&&e.parseNodeValue!==false&&!e.numParseOptions){e.numParseOptions={leadingZeros:false}}let u=s(e,o.defaultOptions,o.props);const l=i.getTraversalObj(t,u);return n.convertToJson(l,u)};e.convertTonimn=r(519).convert2nimn;e.getTraversalObj=i.getTraversalObj;e.convertToJson=n.convertToJson;e.convertToJsonString=r(520).convertToJsonString;e.validate=a.validate;e.j2xParser=r(521);e.parseToNimn=function(t,r,n){return e.convertTonimn(e.getTraversalObj(t,n),r,n)};function u(t,e){if(t){console.log(e+"{");console.log(e+'  "tagName": "'+t.tagname+'", ');if(t.parent){console.log(e+'  "parent": "'+t.parent.tagname+'", ')}console.log(e+'  "val": "'+t.val+'", ');console.log(e+'  "attrs": '+JSON.stringify(t.attrsMap,null,4)+", ");if(t.child){console.log(e+'"child": {');const r=e+e;Object.keys(t.child).forEach(function(n){const i=t.child[n];if(Array.isArray(i)){console.log(e+'"'+n+'" :[');i.forEach(function(t,e){u(t,r)});console.log(e+"],")}else{console.log(e+' "'+n+'" : {');u(i,r);console.log(e+"},")}});console.log(e+"},")}console.log(e+"},")}}},function(t,e,r){t.exports=!r(62)(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.AnalysisBase=undefined;var n=r(16);var i=_(n);var o=r(2);var s=_(o);var a=r(1);var u=_(a);var l=r(9);var c=_(l);var h=r(3);var f=_(h);var p=r(4);var d=_(p);var y=r(0);var v=r(8);var g=r(27);var m=r(15);function _(t){return t&&t.__esModule?t:{default:t}}var b=function(t){(0,d.default)(e,t);function e(t){(0,u.default)(this,e);var r=t||{};r.baseUrl="igs/rest/mrfws";var n=(0,f.default)(this,(e.__proto__||(0,s.default)(e)).call(this,r));n.flowID=r.flowID!==undefined?r.flowID:null;return n}(0,c.default)(e,[{key:"execute",value:function t(e,r,n){var o={};(0,v.copyExcluce)(o,this,["port","ip","baseUrl","partUrl","flowID"]);if(!r){r="get"}if(r.toLowerCase()==="get"){this.partUrl="execute/"+this.flowID+"?isAsy=false&f=json";if(o!==null){var s=(0,v.getWFParameterString)(o);if(s!==null||s!==""){this.partUrl+="&paraValues="+s}}}if(r.toLowerCase()==="post"){this.partUrl="execute/"+this.flowID+"?isAsy=false&f=json";var a=new Array;if(o!==null){for(var u in o){if(o[u]!==null){var l={};l.Key=u;l.Value=o[u].toString();a.push(l)}}}o=a}var c=this.getFullUrl();var h=this;var f=new m.IgsServiceBase(c,{eventListeners:{scope:h,processCompleted:e,processFailed:n}});if(r.toLowerCase()==="post"){f.processAsync({method:"POST",data:(0,i.default)(o),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}else{f.processAsync()}}}]);return e}(g.ServiceBase);e.AnalysisBase=b;y.Zondy.Service.AnalysisBase=b},function(t,e,r){"use strict";const n=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD";const i=n+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040";const o="["+n+"]["+i+"]*";const s=new RegExp("^"+o+"$");const a=function(t,e){const r=[];let n=e.exec(t);while(n){const i=[];i.startIndex=e.lastIndex-n[0].length;const o=n.length;for(let t=0;t<o;t++){i.push(n[t])}r.push(i);n=e.exec(t)}return r};const u=function(t){const e=s.exec(t);return!(e===null||typeof e==="undefined")};e.isExist=function(t){return typeof t!=="undefined"};e.isEmptyObject=function(t){return Object.keys(t).length===0};e.merge=function(t,e,r){if(e){const n=Object.keys(e);const i=n.length;for(let o=0;o<i;o++){if(r==="strict"){t[n[o]]=[e[n[o]]]}else{t[n[o]]=e[n[o]]}}}};e.getValue=function(t){if(e.isExist(t)){return t}else{return""}};e.buildOptions=function(t,e,r){let n={};if(!t){return e}for(let i=0;i<r.length;i++){if(t[r[i]]!==undefined){n[r[i]]=t[r[i]]}else{n[r[i]]=e[r[i]]}}return n};e.isTagNameInArrayMode=function(t,e,r){if(e===false){return false}else if(e instanceof RegExp){return e.test(t)}else if(typeof e==="function"){return!!e(t,r)}return e==="strict"};e.isName=u;e.getAllMatches=a;e.nameRegexp=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ShapeParameters=undefined;var n=r(5);var i=u(n);var o=r(6);var s=u(o);var a=r(7);function u(t){return t&&t.__esModule?t:{default:t}}var l=a.Common.Zondy;var c=function(){function t(){(0,i.default)(this,t);this.refOriginalPosition=[0,0];this.refDataID=null;this.isHoverByRefDataID=false;this.refDataHoverGroup=null;this.dataInfo=null;this.clickable=true;this.hoverable=true;this.style=null;this.highlightStyle={};this.CLASS_NAME="Zondy.Feature.ShapeParameters"}(0,s.default)(t,[{key:"destroy",value:function t(){this.refOriginalPosition=null;this.refDataID=null;this.isHoverByRefDataID=null;this.refDataHoverGroup=null;this.dataInfo=null;this.clickable=null;this.hoverable=null;this.style=null;this.highlightStyle=null}}]);return t}();e.ShapeParameters=c;l.Feature.ShapeParameters=c},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.mapboxgl=e.Zondy=undefined;var n=r(19);var i=o(n);function o(t){return t&&t.__esModule?t:{default:t}}window.mapboxgl=i.default;i.default.Zondy=window.mapboxgl.Zondy||{};var s=window.mapboxgl.Zondy||{};s.Map=s.Map||{};e.Zondy=s;e.mapboxgl=i.default},function(t,e){var r=t.exports=typeof window!="undefined"&&window.Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")();if(typeof __g=="number")__g=r},function(t,e,r){var n=r(120)("wks");var i=r(86);var o=r(42).Symbol;var s=typeof o=="function";var a=t.exports=function(t){return n[t]||(n[t]=s&&o[t]||(s?o:i)("Symbol."+t))};a.store=n},function(t,e,r){var n=r(31);var i=r(196);var o=r(125);var s=Object.defineProperty;e.f=r(37)?Object.defineProperty:function t(e,r,a){n(e);r=o(r,true);n(a);if(i)try{return s(e,r,a)}catch(t){}if("get"in a||"set"in a)throw TypeError("Accessors not supported!");if("value"in a)e[r]=a.value;return e}},function(t,e){t.exports=function(t){return typeof t==="object"?t!==null:typeof t==="function"}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CThemeInfo=undefined;var n=r(1);var i=c(n);var o=r(0);var s=r(8);var a=r(102);var u=r(256);var l=r(257);function c(t){return t&&t.__esModule?t:{default:t}}var h=function t(e){(0,i.default)(this,t);var r=e!==undefined?e:{};(0,s.extend)(this,r);this.Caption=r.Caption!==undefined?r.Caption:null;this.IsVisible=r.IsVisible!==undefined?r.IsVisible:true;this.MaxScale=r.MaxScale!==undefined?parseFloat(r.MaxScale):0;this.MinScale=r.MinScale!==undefined?parseFloat(r.MinScale):0;this.RegInfo=r.RegInfo!==undefined?r.RegInfo:null;this.LinInfo=r.LinInfo!==undefined?r.LinInfo:null;this.PntInfo=r.PntInfo!==undefined?r.PntInfo:null};e.CThemeInfo=h;o.Zondy.Object.Theme.CThemeInfo=h},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Graph=undefined;var n=r(11);var i=m(n);var o=r(5);var s=m(o);var a=r(6);var u=m(a);var l=r(12);var c=m(l);var h=r(14);var f=m(h);var p=r(13);var d=m(p);var y=r(7);var v=r(68);var g=r(23);function m(t){return t&&t.__esModule?t:{default:t}}var _=y.Common.Zondy,b=y.Common.Rectangle;var x=function(t){(0,d.default)(e,t);function e(t,r,n,o,a,u){(0,s.default)(this,e);var l=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r,n,o,a,u));l.shapeFactory=new g.ShapeFactory;l.shapeParameters=null;l.RelativeCoordinate=false;l.setting=null;l.origonPoint=null;l.chartBox=null;l.chartBounds=null;l.width=null;l.height=null;l.XOffset=0;l.YOffset=0;l.DVBParameter=null;l.dataViewBox=null;l.DVBCodomain=null;l.DVBCenterPoint=null;l.DVBUnitValue=null;l.DVBOrigonPoint=null;l.DVBWidth=null;l.DVBHeight=null;l.origonPointOffset=null;l.fields=n||[];l.dataValues=null;if(a){l.lonlat=a}else{if(u&&u.calGravity){if(t.ftype===_.Enum.FeatureType.Pnt){var h=t.fGeom.PntGeom[0].Dot;l.lonlat=[h.x,h.y]}else if(t.ftype===_.Enum.FeatureType.Lin){var f=t.fGeom.LinGeom[0].Line.Arcs;var p=[];f.forEach(function(t){var e=t.Dots;p=[].concat(e)});var d=Math.ceil(p.length/2);var h=p[d-1];l.lonlat=[h.x,h.y]}else if(t.ftype===_.Enum.FeatureType.Reg){l.lonlat=l.getCenterOfGravityPoint(t)}else{var y=t.bound;l.lonlat=[(y.xmin+y.xmax)/2,(y.ymin+y.ymax)/2]}}else{var y=t.bound;l.lonlat=[(y.xmin+y.xmax)/2,(y.ymin+y.ymax)/2]}}if(o&&o.width&&o.height&&o.codomain){l.setting=o}l.CLASS_NAME="Zondy.Feature.Theme.Graph";return l}(0,u.default)(e,[{key:"destroy",value:function t(){this.shapeFactory=null;this.shapeParameters=null;this.width=null;this.height=null;this.origonPoint=null;this.chartBox=null;this.dataViewBox=null;this.chartBounds=null;this.DVBParameter=null;this.DVBOrigonPoint=null;this.DVBCenterPoint=null;this.DVBWidth=null;this.DVBHeight=null;this.DVBCodomain=null;this.DVBUnitValue=null;this.origonPointOffset=null;this.XOffset=null;this.YOffset=null;this.fields=null;this.dataValues=null;this.setting=null;(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}},{key:"initBaseParameter",value:function t(){var e=true;if(!this.setting){return false}var r=this.setting;if(!(r.width&&r.height&&r.codomain)){return false}var n=typeof r.decimalNumber!=="undefined"&&!isNaN(r.decimalNumber)?r.decimalNumber:-1;var i=v.Theme.getDataValues(this.data,this.fields,n);this.dataValues=i?i:[];this.width=parseFloat(r.width);this.height=parseFloat(r.height);this.DVBCodomain=r.codomain;this.XOffset=r.XOffset?r.XOffset:0;this.YOffset=r.YOffset?r.YOffset:0;this.origonPoint=[];this.chartBox=[];this.dataViewBox=[];this.DVBParameter=r.dataViewBoxParameter?r.dataViewBoxParameter:[0,0,0,0];this.DVBOrigonPoint=[];this.DVBCenterPoint=[];this.origonPointOffset=[];this.resetLocation();var o=this.width;var s=this.height;var a=this.location;this.origonPoint=[a[0]-o/2,a[1]-s/2];var u=this.origonPoint;this.chartBox=[u[0],u[1]+s,u[0]+o,u[1]];var l=this.chartBox;var c=this.DVBParameter;this.dataViewBox=[l[0]+c[0],l[1]-c[1],l[2]-c[2],l[3]+c[3]];var h=this.dataViewBox;if(h[0]>=h[2]||h[1]<=h[3]){return false}this.DVBOrigonPoint=[h[0],h[3]];this.DVBWidth=Math.abs(h[2]-h[0]);this.DVBHeight=Math.abs(h[1]-h[3]);this.DVBCenterPoint=[this.DVBOrigonPoint[0]+this.DVBWidth/2,this.DVBOrigonPoint[1]+this.DVBHeight/2];this.origonPointOffset=[this.DVBOrigonPoint[0]-u[0],this.DVBOrigonPoint[1]-u[1]];return e}},{key:"resetLocation",value:function t(e){if(e){this.lonlat=e}var r=this.getLocalXY(this.lonlat);r[0]+=this.XOffset;r[1]+=this.YOffset;this.location=r;var n=this.width;var i=this.height;var o=this.location;this.chartBounds=new b(o[0]-n/2,o[1]-i/2,o[0]+n/2,o[1]+i/2);this.resetLinearGradient();return o}},{key:"resetLinearGradient",value:function t(){}},{key:"shapesConvertToRelativeCoordinate",value:function t(){var e=this.shapes;var r=this.location;for(var n=0,i=e.length;n<i;n++){e[n].refOriginalPosition=r;var o=e[n].style;for(var s in o){switch(s){case"pointList":var a=o[s];for(var u=0,l=a.length;u<l;u++){a[u][0]-=r[0];a[u][1]-=r[1]}break;case"x":o[s]-=r[0];break;case"y":o[s]-=r[1];break;default:break}}}this.RelativeCoordinate=true}},{key:"assembleShapes",value:function t(){}},{key:"getLocalXY",value:function t(e){return this.layer.getLocalXY(e)}},{key:"getCenterOfGravityPoint",value:function t(e){var r=[];var n=0;var i=0,o=0;if(e.ftype===_.Enum.FeatureType.Reg){var s=e.fGeom.RegGeom;for(var a=0;a<s.length;a++){var u=s[a];if(u==null||u.Rings==null){continue}var l=u.Rings;for(var c=0;c<l.length;c++){var h=l[c];if(h==null||h.Arcs==null){continue}var f=h.Arcs;for(var p=0;p<f.length;p++){var d=f[p];if(d==null||d.Dots==null){continue}var y=d.Dots;for(var v=0;v<y.length;v++){r.push(y[v])}}}}}for(var c=1;c<=r.length;c++){var g=r[c%r.length].x;var m=r[c%r.length].y;var b=r[c-1].x;var x=r[c-1].y;var S=(g*x-m*b)/2;n+=S;i+=S*(g+b)/3;o+=S*(m+x)/3}i=i/n;o=o/n;return[i,o]}}]);return e}(v.Theme);v.Theme.getDataValues=function(t,e,r){if(!t.attributes){return false}var n=[];var i=t.attributes;for(var o=0;o<e.length;o++){for(var s in i){if(s!==e[o]){continue}if(i[s]===null||i[s]===undefined){continue}try{if(!isNaN(r)&&r>=0){n.push(parseFloat(i[s].toString()).toFixed(r))}else{n.push(parseFloat(i[s].toString()))}}catch(t){throw new Error("not a number")}}}if(n.length===e.length){return n}else{return false}};e.Graph=x;_.Theme.Graph=x},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.cancelFn=e.requestFn=e.emptyImageUrl=e.isArray=e.lastId=e.create=e.endsWith=e.extendFromArray=e.appendUrl=e.newGuid=e.extend=e.Util=undefined;var n=r(186);var i=u(n);var o=r(328);var s=u(o);e.bind=v;e.stamp=m;e.throttle=_;e.wrapNum=b;e.falseFn=x;e.formatNum=S;e.trim=w;e.splitWords=C;e.setOptions=I;e.getParamString=E;e.template=M;e.indexOf=N;e.requestAnimFrame=k;e.cancelAnimFrame=j;var a=r(70);function u(t){return t&&t.__esModule?t:{default:t}}var l=e.Util=a.Zondy.Util=a.Zondy.Util||{};var c=e.extend=function t(e,r){var n=e||{};if(r){for(var i in r){var o=r[i];if(o!==undefined){n[i]=o}}var s=typeof window.Event==="function"&&r instanceof window.Event;if(!s&&r.hasOwnProperty&&r.hasOwnProperty("toString")){n.toString=r.toString}}return n};var h=e.newGuid=function t(){var e="";for(var r=1;r<=32;r++){var n=Math.floor(Math.random()*16).toString(16);e+=n;if(r==8||r==12||r==16||r==20)e+="-"}return e};var f=e.appendUrl=function t(e,r){var n=e;if(r){var i=(e+" ").split(/[?&]/);n+=i.pop()===" "?r:i.length?"&"+r:"?"+r}return n};var p=e.extendFromArray=function t(e,r){var n=e;var i=true;var o=false;var a=undefined;try{for(var u=(0,s.default)(r),l;!(i=(l=u.next()).done);i=true){var c=l.value;for(var h in c){n[h]=c[h]}}}catch(t){o=true;a=t}finally{try{if(!i&&u.return){u.return()}}finally{if(o){throw a}}}return n};var d=e.endsWith=function t(e,r){return e.indexOf(r,e.length-r.length)!==-1};var y=e.create=i.default||function(){function t(){}return function(e){t.prototype=e;return new t}}();function v(t,e){var r=Array.prototype.slice;if(t.bind){return t.bind.apply(t,r.call(arguments,1))}var n=r.call(arguments,2);return function(){return t.apply(e,n.length?n.concat(r.call(arguments)):arguments)}}var g=e.lastId=0;function m(t){t._leaflet_id=t._leaflet_id||(e.lastId=g+=1);return t._leaflet_id}function _(t,e,r){var n,i,o,s;s=function t(){n=false;if(i){o.apply(r,i);i=false}};o=function o(){if(n){i=arguments}else{t.apply(r,arguments);setTimeout(s,e);n=true}};return o}function b(t,e,r){var n=e[1],i=e[0],o=n-i;return t===n&&r?t:((t-i)%o+o)%o+i}function x(){return false}function S(t,e){var r=Math.pow(10,e===undefined?6:e);return Math.round(t*r)/r}function w(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function C(t){return w(t).split(/\s+/)}function I(t,e){var r=t;if(!r.hasOwnProperty("options")){r.options=r.options?y(r.options):{}}for(var n in e){r.options[n]=e[n]}return r.options}function E(t,e,r){var n=[];for(var i in t){n.push(encodeURIComponent(r?i.toUpperCase():i)+"="+encodeURIComponent(t[i]))}return(!e||e.indexOf("?")===-1?"?":"&")+n.join("&")}var P=/\{ *([\w_-]+) *\}/g;function M(t,e){return t.replace(P,function(t,r){var n=e[r];if(n===undefined){throw new Error("No value provided for variable "+t)}else if(typeof n==="function"){n=n(e)}return n})}var L=e.isArray=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function N(t,e){for(var r=0;r<t.length;r++){if(t[r]===e){return r}}return-1}var T=e.emptyImageUrl="data:image/gifbase64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function O(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var A=0;function R(t){var e=+new Date,r=Math.max(0,16-(e-A));A=e+r;return window.setTimeout(t,r)}var F=e.requestFn=window.requestAnimationFrame||O("RequestAnimationFrame")||R;var D=e.cancelFn=window.cancelAnimationFrame||O("CancelAnimationFrame")||O("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function k(t,e,r){if(r&&F===R){t.call(e)}else{return F.call(window,v(t,e))}}function j(t){if(t){D.call(window,t)}}a.Zondy.Util.extend=c;a.Zondy.Util.appendUrl=f;a.Zondy.Util.endsWith=d;a.Zondy.Util.extendFromArray=p},function(t,e,r){var n=r(60);var i=r(188);var o=r(113);var s=Object.defineProperty;e.f=r(50)?Object.defineProperty:function t(e,r,a){n(e);r=o(r,true);n(a);if(i)try{return s(e,r,a)}catch(t){}if("get"in a||"set"in a)throw TypeError("Accessors not supported!");if("value"in a)e[r]=a.value;return e}},function(t,e,r){t.exports=!r(69)(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},function(t,e){var r={}.hasOwnProperty;t.exports=function(t,e){return r.call(t,e)}},function(t,e,r){var n=r(323);var i=r(117);t.exports=function(t){return n(i(t))}},function(t,e,r){var n=r(44);var i=r(90);t.exports=r(37)?function(t,e,r){return n.f(t,e,i(1,r))}:function(t,e,r){t[e]=r;return t}},function(t,e){var r={}.hasOwnProperty;t.exports=function(t,e){return r.call(t,e)}},function(t,e,r){var n=r(198);var i=r(127);t.exports=function(t){return n(i(t))}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Tangram=undefined;var n=r(1);var i=l(n);var o=r(9);var s=l(o);var a=r(0);var u=r(8);function l(t){return t&&t.__esModule?t:{default:t}}var c=function(){function t(e){(0,i.default)(this,t);var r=e?e:{};(0,u.extend)(this,r)}(0,s.default)(t,[{key:"setByOL",value:function t(e){return null}},{key:"toString",value:function t(){return""}},{key:"getGeometryType",value:function t(){return}},{key:"Trim",value:function t(e,r){var n;n=e.replace(/(^\s+)|(\s+$)/g,"");if(r.toLowerCase()==="g"){n=n.replace(/\s/g,"")}return n}}]);return t}();e.Tangram=c;a.Zondy.Object.Tangram=c},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.GeometryAnalysisBase=undefined;var n=r(2);var i=p(n);var o=r(1);var s=p(o);var a=r(3);var u=p(a);var l=r(4);var c=p(l);var h=r(0);var f=r(27);function p(t){return t&&t.__esModule?t:{default:t}}var d=function(t){(0,c.default)(e,t);function e(t){(0,s.default)(this,e);var r=t||{};r.baseUrl="igs/rest/mrgs";return(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r))}return e}(f.ServiceBase);e.GeometryAnalysisBase=d;h.Zondy.Service.GeometryAnalysisBase=d},function(t,e,r){var n=r(42);var i=r(21);var o=r(187);var s=r(59);var a=r(51);var u="prototype";var l=function(t,e,r){var c=t&l.F;var h=t&l.G;var f=t&l.S;var p=t&l.P;var d=t&l.B;var y=t&l.W;var v=h?i:i[e]||(i[e]={});var g=v[u];var m=h?n:f?n[e]:(n[e]||{})[u];var _,b,x;if(h)r=e;for(_ in r){b=!c&&m&&m[_]!==undefined;if(b&&a(v,_))continue;x=b?m[_]:r[_];v[_]=h&&typeof m[_]!="function"?r[_]:d&&b?o(x,n):y&&m[_]==x?function(t){var e=function(e,r,n){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,r)}return new t(e,r,n)}return t.apply(this,arguments)};e[u]=t[u];return e}(x):p&&typeof x=="function"?o(Function.call,x):x;if(p){(v.virtual||(v.virtual={}))[_]=x;if(t&l.R&&g&&!g[_])s(g,_,x)}}};l.F=1;l.G=2;l.S=4;l.P=8;l.B=16;l.W=32;l.U=64;l.R=128;t.exports=l},function(t,e,r){var n=r(49);var i=r(84);t.exports=r(50)?function(t,e,r){return n.f(t,e,i(1,r))}:function(t,e,r){t[e]=r;return t}},function(t,e,r){var n=r(61);t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports=function(t){return typeof t==="object"?t!==null:typeof t==="function"}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return true}}},function(t,e,r){"use strict";e.__esModule=true;var n=r(362);var i=u(n);var o=r(369);var s=u(o);var a=typeof s.default==="function"&&typeof i.default==="symbol"?function(t){return typeof t}:function(t){return t&&typeof s.default==="function"&&t.constructor===s.default&&t!==s.default.prototype?"symbol":typeof t};function u(t){return t&&t.__esModule?t:{default:t}}e.default=typeof s.default==="function"&&a(i.default)==="symbol"?function(t){return typeof t==="undefined"?"undefined":a(t)}:function(t){return t&&typeof s.default==="function"&&t.constructor===s.default&&t!==s.default.prototype?"symbol":typeof t==="undefined"?"undefined":a(t)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CatalogService=undefined;var n=r(2);var i=p(n);var o=r(1);var s=p(o);var a=r(3);var u=p(a);var l=r(4);var c=p(l);var h=r(0);var f=r(27);function p(t){return t&&t.__esModule?t:{default:t}}var d=function(t){(0,c.default)(e,t);function e(t){(0,s.default)(this,e);var r=t||{};r.baseUrl="igs/rest/mrcs";return(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r))}return e}(f.ServiceBase);e.CatalogService=d;h.Zondy.Catalog.CatalogService=d},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.BaseParameter=undefined;var n=r(126);var i=c(n);var o=r(1);var s=c(o);var a=r(9);var u=c(a);var l=r(32);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(){(0,u.default)(t,null,[{key:"formatParam",value:function t(e){var r=["IncludeAttribute","IncludeGeometry","IncludeWebGraphic","isAsc","compareRectOnly","enableDisplayCondition"];for(var n=0;n<r.length;n++){if(typeof e[r[n]]==="string"){e[r[n]]=e[r[n]]==="true"}}return e}}]);function t(){(0,s.default)(this,t);this.layers=[];this.pageIndex=0;this.pagination=100;this.resultFormat="json";this.IncludeAttribute=true;this.IncludeGeometry=true;this.IncludeWebGraphic=false;this.orderBy=undefined;this.isAsc=undefined;this.proj=undefined;this.fields=undefined;this.coordPrecision=undefined;this.cursorType="backward"}return t}();h.prototype.formatParameter=function(t,e){var r=void 0,n=this;n._crs=e;if(t==="typename"){r={layers:t,pagination:"maxfeatures",rectangle:"bbox",where:"filter",geometry:"filter",objectIds:"featureId"};if(this.where&&this.geometry){delete r.geometry}(0,i.default)(r).forEach(function(t){if(n.hasOwnProperty(t)&&n[t]){if(n[t]instanceof Array){r[r[t]]=n[t].join(",")}else{if(t==="where"||t==="geometry"){r[r[t]]=initFilter(n[t],n.geometry,n)}else{r[r[t]]=n[t]}}}delete r[t]});return r}else{r={layers:t,pageIndex:"Page",pagination:"pageCount",resultFormat:"f",includeAttribute:"IncludeAttribute",includeGeometry:"IncludeGeometry",includeWebGraphic:"IncludeWebGraphic",orderBy:"orderField"};(0,i.default)(r).forEach(function(t){if(n.hasOwnProperty(t)){n[r[t]]=n[t];delete n[t]}});return this}};e.BaseParameter=h;l.Zondy.Service.BaseParameter=h},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.MapServiceBase=undefined;var n=r(2);var i=p(n);var o=r(1);var s=p(o);var a=r(3);var u=p(a);var l=r(4);var c=p(l);var h=r(0);var f=r(27);function p(t){return t&&t.__esModule?t:{default:t}}var d=function(t){(0,c.default)(e,t);function e(t){(0,s.default)(this,e);var r=t||{};r.baseUrl="igs/rest/mrms";return(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r))}return e}(f.ServiceBase);e.MapServiceBase=d;h.Zondy.Service.MapServiceBase=d},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Util=undefined;var n=r(79);var i=c(n);var o=r(5);var s=c(o);var a=r(6);var u=c(a);var l=r(7);function c(t){return t&&t.__esModule?t:{default:t}}var h=l.Common.Zondy;var f=function(){function t(){(0,s.default)(this,t);this.BUILTIN_OBJECT={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1};this._ctx=null;this._canvas=null;this._pixelCtx=null;this._width=null;this._height=null;this._offsetX=0;this._offsetY=0;this.CLASS_NAME="Zondy.LevelRenderer.Tool.Util"}(0,u.default)(t,[{key:"clone",value:function t(e){var r=this.BUILTIN_OBJECT;if((typeof e==="undefined"?"undefined":(0,i.default)(e))=="object"&&e!==null){var n=e;if(e instanceof Array){n=[];for(var o=0,s=e.length;o<s;o++){n[o]=this.clone(e[o])}}else if(!r[Object.prototype.toString.call(e)]){n={};for(var a in e){if(e.hasOwnProperty(a)){n[a]=this.clone(e[a])}}}return n}return e}},{key:"mergeItem",value:function t(e,r,n,o){var s=this.BUILTIN_OBJECT;if(r.hasOwnProperty(n)){if((0,i.default)(e[n])=="object"&&!s[Object.prototype.toString.call(e[n])]){this.merge(e[n],r[n],o)}else if(o||!(n in e)){e[n]=r[n]}}}},{key:"merge",value:function t(e,r,n){for(var i in r){this.mergeItem(e,r,i,n)}return e}},{key:"getContext",value:function t(){if(!this._ctx){this._ctx=document.createElement("canvas").getContext("2d")}return this._ctx}},{key:"getPixelContext",value:function t(){if(!this._pixelCtx){this._canvas=document.createElement("canvas");this._width=this._canvas.width;this._height=this._canvas.height;this._pixelCtx=this._canvas.getContext("2d")}return this._pixelCtx}},{key:"adjustCanvasSize",value:function t(e,r){var n=this._canvas;var i=this._pixelCtx;var o=this._width;var s=this._height;var a=this._offsetX;var u=this._offsetY;var l=100;var c;if(e+a>o){o=e+a+l;n.width=o;c=true}if(r+u>s){s=r+u+l;n.height=s;c=true}if(e<-a){a=Math.ceil(-e/l)*l;o+=a;n.width=o;c=true}if(r<-u){u=Math.ceil(-r/l)*l;s+=u;n.height=s;c=true}if(c){i.translate(a,u)}}},{key:"getPixelOffset",value:function t(){return{x:this._offsetX,y:this._offsetY}}},{key:"indexOf",value:function t(e,r){if(e.indexOf){return e.indexOf(r)}for(var n=0,i=e.length;n<i;n++){if(e[n]===r){return n}}return-1}},{key:"inherits",value:function t(e,r){var n=e.prototype;function i(){}i.prototype=r.prototype;e.prototype=new i;for(var o in n){e.prototype[o]=n[o]}e.constructor=e}}]);return t}();e.Util=f;h.LevelRenderer.Tool.Util=f},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Theme=undefined;var n=r(5);var i=u(n);var o=r(6);var s=u(o);var a=r(7);function u(t){return t&&t.__esModule?t:{default:t}}var l=a.Common.newGuid,c=a.Common.Zondy;var h=function(){function t(e,r){(0,i.default)(this,t);if(!e){return}if(!r||!r.map||!r.renderer){return}this.id=l();this.lonlat=null;this.location=[];this.data=e;this.shapes=[];this.layer=r;this.CLASS_NAME="Zondy.Feature.Theme"}(0,s.default)(t,[{key:"destroy",value:function t(){this.data=null;this.id=null;this.lonlat=null;this.location=null;this.shapes=null;this.layer=null}}]);return t}();e.Theme=h;c.Theme=h},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return true}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.mapboxgl=e.Zondy=undefined;var n=r(19);var i=o(n);function o(t){return t&&t.__esModule?t:{default:t}}window.mapboxgl=i.default;i.default.zondy=window.mapboxgl.zondy||{};var s=window.mapboxgl.zondy||{};s.Map=s.Map||{};s.Util=s.Util||{};s.Network=s.Network||{};s.Event=s.Event||{};s.Socket=s.Socket||{};e.Zondy=s;e.mapboxgl=i.default},function(t,e,r){var n=r(89);t.exports=function(t,e,r){n(t);if(e===undefined)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,i){return t.call(e,r,n,i)}}return function(){return t.apply(e,arguments)}}},function(t,e,r){var n=r(127);t.exports=function(t){return Object(n(t))}},function(t,e,r){var n=r(197);var i=r(131);t.exports=Object.keys||function t(e){return n(e,i)}},function(t,e){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,e){t.exports=true},function(t,e){t.exports={}},function(t,e){var r;r=function(){return this}();try{r=r||Function("return this")()||(1,eval)("this")}catch(t){if(typeof window==="object")r=window}t.exports=r},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.QueryServiceBase=undefined;var n=r(16);var i=x(n);var o=r(2);var s=x(o);var a=r(1);var u=x(a);var l=r(9);var c=x(l);var h=r(3);var f=x(h);var p=r(4);var d=x(p);var y=r(0);var v=r(8);var g=r(27);var m=r(219);var _=r(100);var b=r(15);function x(t){return t&&t.__esModule?t:{default:t}}var S=function(t){(0,d.default)(e,t);function e(t){(0,u.default)(this,e);var r=t||{};r.baseUrl="igs/rest/mrfs";var n=(0,f.default)(this,(e.__proto__||(0,s.default)(e)).call(this,r));n.resultCallBack=r.resultCallBack!==undefined?r.resultCallBack:null;n.queryParam=r.queryParam!==undefined?r.queryParam:null;n.requestType=r.requestType!==undefined?r.requestType:"GET";return n}(0,c.default)(e,[{key:"processResult",value:function t(e){var r=new m.FeatureSet;(0,v.copyExcluce)(r,e,"succeed");this.resultCallBack(r)}},{key:"processGeoJsonResult",value:function t(e){var r={};(0,v.copyExcluce)(r,e,"succeed");this.resultCallBack(r)}},{key:"restQuery",value:function t(e,r,n,o,s,a){var u=this;u.resultCallBack=n;var l=new b.IgsServiceBase(e,{eventListeners:{scope:u,processCompleted:a!=="geojson"?u.processResult:u.processGeoJsonResult,processFailed:s}});if(o==="GET"){l.processAsync()}else{l.processAsync({method:"POST",data:(0,i.default)(r),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}},{key:"query",value:function t(e,r,n){if(this.queryParam===null){return}var i="";if(this.queryParam instanceof _.QueryParameter){i=this.getFullUrl()}else{return}var o="";var s=null;if(!n){if(!this.requestType){o="GET"}else{o=this.requestType}}else{o=n}if(o.toUpperCase()==="GET"){i+=encodeURI("?"+this.queryParam.getParameterURL())}else{s=this.queryParam.getParameterObject()}this.restQuery(i,s,e,o,r,this.queryParam.resultFormat.toLowerCase())}}]);return e}(g.ServiceBase);e.QueryServiceBase=S;y.Zondy.Service.QueryServiceBase=S},function(t,e,r){"use strict";e.__esModule=true;var n=r(500);var i=u(n);var o=r(502);var s=u(o);var a=typeof s.default==="function"&&typeof i.default==="symbol"?function(t){return typeof t}:function(t){return t&&typeof s.default==="function"&&t.constructor===s.default&&t!==s.default.prototype?"symbol":typeof t};function u(t){return t&&t.__esModule?t:{default:t}}e.default=typeof s.default==="function"&&a(i.default)==="symbol"?function(t){return typeof t==="undefined"?"undefined":a(t)}:function(t){return t&&typeof s.default==="function"&&t.constructor===s.default&&t!==s.default.prototype?"symbol":typeof t==="undefined"?"undefined":a(t)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Eventful=undefined;var n=r(5);var i=u(n);var o=r(6);var s=u(o);var a=r(7);function u(t){return t&&t.__esModule?t:{default:t}}var l=a.Common.Zondy;var c=function(){function t(){(0,i.default)(this,t);this._handlers={};this.CLASS_NAME="Zondy.LevelRenderer.Eventful"}(0,s.default)(t,[{key:"destroy",value:function t(){this._handlers=null}},{key:"one",value:function t(e,r,n){var i=this._handlers;if(!r||!e){return this}if(!i[e]){i[e]=[]}i[e].push({h:r,one:true,ctx:n||this});return this}},{key:"bind",value:function t(e,r,n){var i=this._handlers;if(!r||!e){return this}if(!i[e]){i[e]=[]}i[e].push({h:r,one:false,ctx:n||this});return this}},{key:"unbind",value:function t(e,r){var n=this._handlers;if(!e){this._handlers={};return this}if(r){if(n[e]){var i=[];for(var o=0,s=n[e].length;o<s;o++){if(n[e][o]["h"]!==r){i.push(n[e][o])}}n[e]=i}if(n[e]&&n[e].length===0){delete n[e]}}else{delete n[e]}return this}},{key:"dispatch",value:function t(e){if(this._handlers[e]){var r=arguments;var n=r.length;if(n>3){r=Array.prototype.slice.call(r,1)}var i=this._handlers[e];var o=i.length;for(var s=0;s<o;){switch(n){case 1:i[s]["h"].call(i[s]["ctx"]);break;case 2:i[s]["h"].call(i[s]["ctx"],r[1]);break;case 3:i[s]["h"].call(i[s]["ctx"],r[1],r[2]);break;default:i[s]["h"].apply(i[s]["ctx"],r);break}if(i[s]["one"]){i.splice(s,1);o--}else{s++}}}return this}},{key:"dispatchWithContext",value:function t(e){if(this._handlers[e]){var r=arguments;var n=r.length;if(n>4){r=Array.prototype.slice.call(r,1,r.length-1)}var i=r[r.length-1];var o=this._handlers[e];var s=o.length;for(var a=0;a<s;){switch(n){case 1:o[a]["h"].call(i);break;case 2:o[a]["h"].call(i,r[1]);break;case 3:o[a]["h"].call(i,r[1],r[2]);break;default:o[a]["h"].apply(i,r);break}if(o[a]["one"]){o.splice(a,1);s--}else{a++}}}return this}}]);return t}();e.Eventful=c;l.LevelRenderer.Eventful=c},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ThemeVector=undefined;var n=r(11);var i=b(n);var o=r(5);var s=b(o);var a=r(6);var u=b(a);var l=r(12);var c=b(l);var h=r(14);var f=b(h);var p=r(13);var d=b(p);var y=r(7);var v=r(68);var g=r(184);var m=r(183);var _=r(112);function b(t){return t&&t.__esModule?t:{default:t}}var x=y.Common.Zondy,S=y.Common.copyAttributesWithClip;var w=function(t){(0,d.default)(e,t);function e(t,r,n,o,a){(0,s.default)(this,e);var u=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r));if(!t.fGeom){return(0,c.default)(u)}u.dataBounds=t.bound;u.nodesClipPixel=2;u.isHoverAble=true;u.isMultiHover=true;u.isClickAble=true;u.highlightStyle=null;u.shapeOptions={};u.style=n||{};u.CLASS_NAME="Zondy.Theme.ThemeVector";u.style=n?n:{};if(o){S(u,o,["shapeOptions","dataBounds"])}if(a){S(u.shapeOptions,a)}var l=t.fGeom;u.lonlat=[(u.dataBounds.xmin+u.dataBounds.xmax)/2,(u.dataBounds.ymin+u.dataBounds.ymax)/2];u.location=u.getLocalXY(u.lonlat);switch(t.ftype){case 0:break;case 1:u.pointsToTF(t.fGeom.PntGeom);break;case 2:u.linesToTF(t.fGeom.LinGeom);break;case 3:u.regsToTF(t.fGeom.RegGeom);break}return u}(0,u.default)(e,[{key:"destroy",value:function t(){this.style=null;this.dataBounds=null;this.nodesClipPixel=null;this.isHoverAble=null;this.isMultiHover=null;this.isClickAble=null;this.highlightStyle=null;this.shapeOptions=null;(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}},{key:"pointsToTF",value:function t(e){if(e==null||e.length<=0){return}var r=e.components;var n=[];var i=[];var o=this.location;var s=[];var a=this.nodesClipPixel;for(var u=0;u<e.length;u++){var l=e[u];i=[];n=this.getLocalXY([l.Dot.x,l.Dot.y]);i[0]=n[0]-o[0];i[1]=n[1]-o[1];if(s.length>0){var c=s[s.length-1];if(Math.abs(c[0]-i[0])<=a&&Math.abs(c[1]-i[1])<=a){continue}}s.push(i);var h=new Object;h.r=6;h=S(h,this.style);h.x=i[0];h.y=i[1];var f=new m.SmicPoint({style:h,clickable:this.isClickAble,hoverable:this.isHoverAble});if(this.highlightStyle){f.highlightStyle=this.highlightStyle}f.refOriginalPosition=o;f.refDataID=this.data.FID;f.isHoverByRefDataID=this.isMultiHover;if(this.shapeOptions){S(f,this.shapeOptions)}this.shapes.push(f)}}},{key:"linesToTF",value:function t(e){if(e==null||e.length<=0){return}for(var r=0;r<e.length;r++){this.lineToTF(e[r])}}},{key:"lineToTF",value:function t(e){var r=[];if(e.Line!=null&&e.Line.Arcs!=null&&e.Line.Arcs.length>0){var n=e.Line.Arcs;for(var i=0;i<n.length;i++){var o=n[i].Dots;for(var s=0;s<o.length;s++){r.push([o[s].x,o[s].y])}}}if(r.length<=0){return}var a=[];var u=[];var l=this.location;var c=[];var h=this.nodesClipPixel;for(var i=0;i<r.length;i++){var f=r[i];u=[];a=this.getLocalXY(f);u[0]=a[0]-l[0];u[1]=a[1]-l[1];if(c.length>0){var p=c[c.length-1];if(Math.abs(p[0]-u[0])<=h&&Math.abs(p[1]-u[1])<=h){continue}}c.push(u)}if(c.length<2){return null}var d=new Object;d=S(d,this.style,["pointList"]);d.pointList=c;var y=new g.SmicBrokenLine({style:d,clickable:this.isClickAble,hoverable:this.isHoverAble});if(this.highlightStyle){y.highlightStyle=this.highlightStyle}y.refOriginalPosition=this.location;y.refDataID=this.data.FID;y.isHoverByRefDataID=this.isMultiHover;if(this.shapeOptions){S(y,this.shapeOptions)}this.shapes.push(y)}},{key:"regsToTF",value:function t(e){if(e==null||e.length<=0){return}for(var r=0;r<e.length;r++){this.regToTF(e[r])}}},{key:"regToTF",value:function t(e){var r=e.Rings;if(r==null||r.length<=0){return}var n=[];var i=[];var o=this.location;var s=[];var a=[];var u=[];var l=this.nodesClipPixel;for(var c=0;c<r.length;c++){if(c===0){s=[];if(r[c]!=null&&r[c].Arcs!=null&&r[c].Arcs.length>0){var h=r[c].Arcs;for(var f=0;f<h.length;f++){var p=h[f].Dots;for(var d=0;d<p.length;d++){i=[];n=this.getLocalXY([p[d].x,p[d].y]);i[0]=n[0]-o[0];i[1]=n[1]-o[1];if(s.length>0){var y=s[s.length-1];if(Math.abs(y[0]-i[0])<=l&&Math.abs(y[1]-i[1])<=l){continue}}s.push(i)}}}}else{a=[];if(r[c]!=null&&r[c].Arcs!=null&&r[c].Arcs.length>0){var h=r[c].Arcs;for(var f=0;f<h.length;f++){var p=h[f].Dots;for(var d=0;d<p.length;d++){i=[];n=this.getLocalXY([p[d].x,p[d].y]);i[0]=n[0]-o[0];i[1]=n[1]-o[1];if(a.length>0){var v=a[a.length-1];if(Math.abs(v[0]-i[0])<=l&&Math.abs(v[1]-i[1])<=l){continue}}a.push(i)}}}}if(a.length<2){continue}u.push(a)}if(s.length<2){return}var g={};g=S(g,this.style,["pointList"]);g.pointList=s;var m=new _.SmicPolygon({style:g,clickable:this.isClickAble,hoverable:this.isHoverAble});if(this.highlightStyle){m.highlightStyle=this.highlightStyle}m.refOriginalPosition=this.location;m.refDataID=this.data.FID;m.isHoverByRefDataID=this.isMultiHover;if(u.length>0){m.holePolygonPointLists=u}if(this.shapeOptions){S(m,this.shapeOptions)}this.shapes.push(m)}},{key:"updateAndAddShapes",value:function t(){var e=this.getLocalXY(this.lonlat);this.location=e;var r=this.layer.renderer;for(var n=0,i=this.shapes.length;n<i;n++){var o=this.shapes[n];o.refOriginalPosition=e;r.addShape(o)}}},{key:"getShapesCount",value:function t(){return this.shapes.length}},{key:"getLocalXY",value:function t(e){return this.layer.getLocalXY(e)}}]);return e}(v.Theme);e.ThemeVector=w;x.Theme.ThemeVector=w},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.DataStoreService=undefined;var n=r(16);var i=_(n);var o=r(2);var s=_(o);var a=r(1);var u=_(a);var l=r(9);var c=_(l);var h=r(3);var f=_(h);var p=r(4);var d=_(p);var y=r(164);var v=_(y);var g=r(27);var m=r(15);function _(t){return t&&t.__esModule?t:{default:t}}var b=e.DataStoreService=function(t){(0,d.default)(e,t);function e(t){(0,u.default)(this,e);var r=(0,f.default)(this,(e.__proto__||(0,s.default)(e)).call(this,t));r.fixParams(t);return r}(0,c.default)(e,[{key:"fixParams",value:function t(e){this.params=e;delete this.params.url;delete this.params.ip;delete this.params.port;delete this.params.domain;delete this.params.baseUrl;delete this.params.networkProtocol;delete this.params.partUrl}},{key:"getBaseUrl",value:function t(){var e="";var r=this.baseUrl,n=this.ip,i=this.port,o=this.domain,s=this.networkProtocol;if(r){e=r}else if(o){e=o}else if(s&&n&&i){e=s+"://"+n+":"+i}return e}},{key:"getFullUrl",value:function t(e,r){var n=this.getBaseUrl();var i=n+e+"?"+v.default.stringify(r);return i}},{key:"get",value:function t(e,r,n){var i=this;var o=new m.IgsServiceBase(e,{eventListeners:{scope:i,processCompleted:r,processFailed:n}});o.processAsync()}},{key:"post",value:function t(e,r,n,o){var s=this;var a=new m.IgsServiceBase(e,{eventListeners:{scope:s,processCompleted:n,processFailed:o}});a.processAsync({method:"POST",data:(0,i.default)(r),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}]);return e}(g.ServiceBase);e.default=b},function(t,e,r){t.exports={default:r(318),__esModule:true}},function(t,e){t.exports=function(t,e){return{enumerable:!(t&1),configurable:!(t&2),writable:!(t&4),value:e}}},function(t,e){t.exports=true},function(t,e){var r=0;var n=Math.random();t.exports=function(t){return"Symbol(".concat(t===undefined?"":t,")_",(++r+n).toString(36))}},function(t,e){t.exports={}},function(t,e,r){t.exports={default:r(344),__esModule:true}},function(t,e){t.exports=function(t){if(typeof t!="function")throw TypeError(t+" is not a function!");return t}},function(t,e){t.exports=function(t,e){return{enumerable:!(t&1),configurable:!(t&2),writable:!(t&4),value:e}}},function(t,e){var r=0;var n=Math.random();t.exports=function(t){return"Symbol(".concat(t===undefined?"":t,")_",(++r+n).toString(36))}},function(t,e,r){var n=r(30);var i=r(17);var o=r(62);t.exports=function(t,e){var r=(i.Object||{})[t]||Object[t];var s={};s[t]=e(r);n(n.S+n.F*o(function(){r(1)}),"Object",s)}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,r){var n=r(44).f;var i=r(54);var o=r(24)("toStringTag");t.exports=function(t,e,r){if(t&&!i(t=r?t:t.prototype,o))n(t,o,{configurable:true,value:e})}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CAttStruct=undefined;var n=r(0);var i=r(8);var o=function t(e){var r=e!==undefined?e:{};(0,i.extend)(this,r);this.FldNumber=r.FldNumber!==undefined?r.FldNumber:0;this.FldName=r.FldName!==undefined?r.FldName:null;this.FldType=r.FldType!==undefined?r.FldType:null};e.CAttStruct=o;n.Zondy.Object.CAttStruct=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CLineInfo=undefined;var n=r(0);var i=r(8);var o=function t(e){var r=e!==undefined?e:{};(0,i.extend)(this,r);this.Color=r.Color!==undefined&&r.Color!==null?r.Color:1;this.LinStyleID=r.LinStyleID!==undefined&&r.LinStyleID!==null?r.LinStyleID:1;this.LinStyleID2=r.LinStyleID2!==undefined&&r.LinStyleID2!==null?r.LinStyleID2:0;this.LinWidth=r.LinWidth!==undefined&&r.LinWidth!==null?r.LinWidth:1;this.Xscale=r.Xscale!==undefined&&r.Xscale!==null?r.Xscale:1;this.Yscale=r.Yscale!==undefined&&r.Yscale!==null?r.Yscale:1};e.CLineInfo=o;n.Zondy.Object.CLineInfo=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.FeatureGraphicBase=undefined;var n=r(1);var i=l(n);var o=r(9);var s=l(o);var a=r(0);var u=r(8);function l(t){return t&&t.__esModule?t:{default:t}}var c=function(){function t(e){(0,i.default)(this,t);var r=e!==undefined?e:{};(0,u.extend)(this,r);this.GID=r.GID!==undefined&&r.GID!==null?r.GID:0}(0,s.default)(t,[{key:"setGID",value:function t(e){if(e!==undefined&&e!==null){this.GID=e}}}]);return t}();e.FeatureGraphicBase=c;a.Zondy.Object.FeatureGraphicBase=c},function(t,e){var r=t.exports={};var n;var i;function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){n=setTimeout}else{n=o}}catch(t){n=o}try{if(typeof clearTimeout==="function"){i=clearTimeout}else{i=s}}catch(t){i=s}})();function a(t){if(n===setTimeout){return setTimeout(t,0)}if((n===o||!n)&&setTimeout){n=setTimeout;return setTimeout(t,0)}try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}function u(t){if(i===clearTimeout){return clearTimeout(t)}if((i===s||!i)&&clearTimeout){i=clearTimeout;return clearTimeout(t)}try{return i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}var l=[];var c=false;var h;var f=-1;function p(){if(!c||!h){return}c=false;if(h.length){l=h.concat(l)}else{f=-1}if(l.length){d()}}function d(){if(c){return}var t=a(p);c=true;var e=l.length;while(e){h=l;l=[];while(++f<e){if(h){h[f].run()}}f=-1;e=l.length}h=null;c=false;u(t)}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1){for(var r=1;r<arguments.length;r++){e[r-1]=arguments[r]}}l.push(new y(t,e));if(l.length===1&&!c){a(d)}};function y(t,e){this.fun=t;this.array=e}y.prototype.run=function(){this.fun.apply(null,this.array)};r.title="browser";r.browser=true;r.env={};r.argv=[];r.version="";r.versions={};function v(){}r.on=v;r.addListener=v;r.once=v;r.off=v;r.removeListener=v;r.removeAllListeners=v;r.emit=v;r.prependListener=v;r.prependOnceListener=v;r.listeners=function(t){return[]};r.binding=function(t){throw new Error("process.binding is not supported")};r.cwd=function(){return"/"};r.chdir=function(t){throw new Error("process.chdir is not supported")};r.umask=function(){return 0}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.QueryParameter=undefined;var n=r(2);var i=v(n);var o=r(1);var s=v(o);var a=r(9);var u=v(a);var l=r(3);var c=v(l);var h=r(4);var f=v(h);var p=r(0);var d=r(8);var y=r(243);function v(t){return t&&t.__esModule?t:{default:t}}var g=function(t){(0,f.default)(e,t);function e(t){(0,s.default)(this,e);var r=t?t:{};return(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r))}(0,u.default)(e,[{key:"getParameterURL",value:function t(){var e="page="+this.pageIndex.toString();e+="&pageCount="+this.recordNumber.toString();e+="&f="+this.resultFormat;if(this.geometry){e+="&geometry="+this.geometry.toString();e+="&geometryType="+this.geometry.getGeometryType()}if(this.struct){e+="&structs="+(0,d.toJSON)(this.struct)}if(this.where){e+="&where="+this.where}if(this.rule){e+="&rule="+(0,d.toJSON)(this.rule)}if(this.objectIds){e+="&objectIds="+this.objectIds}if(this.orderField){e+="&orderField="+this.orderField}if(this.rtnLabel!==undefined){e+="&rtnLabel="+this.rtnLabel}if(this.fields){e+="&fields="+this.fields}if(this.coordPrecision!==undefined){e+="&coordPrecision="+this.coordPrecision}if(this.isAsc){e+="&isAsc="+this.isAsc}if(this.proj){e+="&srsIds="+this.proj}if(this.guid){e+="&guid="+this.guid}e+="&cursorType="+this.cursorType;return e}},{key:"getParameterObject",value:function t(){var e={};e.f=this.resultFormat;if(this.struct!==null){e.structs=this.struct.toJSON()}if(this.objectIds!==null){e.objectIds=this.objectIds;return e}e.page=this.pageIndex.toString();e.pageCount=this.recordNumber.toString();if(this.geometry!==null){e.geometry=this.geometry.toString();e.geometryType=this.geometry.getGeometryType()}if(this.where!==null){e.where=this.where}if(this.rule!==null){e.rule=this.rule.toJSON()}if(this.orderField!==null){e.orderField=this.orderField}if(this.isAsc!==null){e.isAsc=this.isAsc}e.cursorType=this.cursorType;return e}}]);return e}(y.QueryParameterBase);e.QueryParameter=g;p.Zondy.Service.QueryParameter=g},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ClipBase=undefined;var n=r(2);var i=p(n);var o=r(1);var s=p(o);var a=r(3);var u=p(a);var l=r(4);var c=p(l);var h=r(0);var f=r(38);function p(t){return t&&t.__esModule?t:{default:t}}var d=function(t){(0,c.default)(e,t);function e(t){(0,s.default)(this,e);var r=t||{};var n=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));n.desInfo=r.desInfo!==undefined?r.desInfo:null;n.attOptType=r.attOptType!==undefined?r.attOptType:1;n.infoOptType=r.infoOptType!==undefined?r.infoOptType:1;n.overType=r.overType!==undefined?r.overType:3;n.tolerance=r.tolerance!==undefined?r.tolerance:1e-4;n.isCleanNode=r.isCleanNode!==undefined?r.isCleanNode:false;n.isLabelPnt=r.isLabelPnt!==undefined?r.isLabelPnt:false;n.isValidReg=r.isValidReg!==undefined?r.isValidReg:false;return n}return e}(f.AnalysisBase);e.ClipBase=d;h.Zondy.Service.ClipBase=d},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CPntInfo=undefined;var n=r(0);var i=r(8);var o=function t(e){var r=e!==undefined?e:{};(0,i.extend)(this,r);this.LibID=r.LibID!==undefined?r.LibID:0;this.Ovprnt=r.Ovprnt!==undefined?r.Ovprnt:false;this.Angle=r.Angle!==undefined?r.Angle:0;this.BackClr=r.BackClr!==undefined?r.BackClr:0;this.BackExp=r.BackExp!==undefined?r.BackExp:0;this.FillFlg=r.FillFlg!==undefined?r.FillFlg:0;this.Height=r.Height!==undefined?r.Height:0;this.Width=r.Width!==undefined?r.Width:0;this.OutClr=r.OutClr!==undefined?r.OutClr:[0,0,0];this.SymID=r.SymID!==undefined?r.SymID:0;this.OutPenW=r.OutPenW!==undefined?r.OutPenW:[.05,.05,.05]};e.CPntInfo=o;n.Zondy.Object.Theme.CPntInfo=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.GeoFeatureThemeLayer=undefined;var n=r(11);var i=_(n);var o=r(5);var s=_(o);var a=r(6);var u=_(a);var l=r(12);var c=_(l);var h=r(13);var f=_(h);var p=r(19);var d=_(p);var y=r(7);var v=r(177);var g=r(23);var m=r(81);function _(t){return t&&t.__esModule?t:{default:t}}var b=y.Common.extend,x=y.Common.copyAttributesWithClip,S=y.Common.FeatureSet,w=y.Common.Zondy;var C=function(t){(0,f.default)(e,t);function e(t,r){(0,s.default)(this,e);var n=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r));n.name=null;n.style=null;n.highlightStyle=null;n.nodesClipPixel=2;n.isHoverAble=false;n.isMultiHover=false;n.isClickAble=true;n.isAllowFeatureStyle=false;b(n,r);n.cache=r.cache||{};n.cacheFields=r.cacheFields||[];n.maxCacheCount=r.maxCacheCount||0;n.isCustomSetMaxCacheCount=r.isCustomSetMaxCacheCount===undefined?false:r.isCustomSetMaxCacheCount;return n}(0,u.default)(e,[{key:"addFeatures",value:function t(e){var r=this;d.default.Evented.prototype.fire("beforefeaturesadded",{features:e});if(e&&(true||e instanceof S)){var n=null;var i=e.LabelDots;var o=e.AttStruct;var s=e.SFEleArray;if(s!=null&&s.length>0){for(var a=0;a<s.length;a++){var u=s[a];if(u.AttValue!=null&&u.AttValue.length>0){var n={};for(var l=0;l<u.AttValue.length;l++){n[o.FldName[l]]=u.AttValue[l]}n["FID"]=u.FID}u.attributes=n;i&&i[a]&&(u.LabelDot=i[a]);r.features.push(u)}}}if(!this.isCustomSetMaxCacheCount){this.maxCacheCount=this.features.length*5}if(this.renderer){this.redrawThematicFeatures(this.map.getBounds())}}},{key:"removeFeatures",value:function t(e){this.clearCache();v.ThemeLayer.prototype.removeFeatures.apply(this,arguments)}},{key:"removeAllFeatures",value:function t(){this.clearCache();v.ThemeLayer.prototype.removeAllFeatures.apply(this,arguments)}},{key:"redrawThematicFeatures",value:function t(e){this.clearCache();var r=this.renderer.getHoverOne();var n=null;if(r&&r.refDataID){n=r.refDataID}this.renderer.clearAll();var i=this.features;var o=this.cache;var s=this.cacheFields;var a=this.map.getZoom();var u=this.maxCacheCount;for(var l=0,c=i.length;l<c;l++){var h=i[l];var f=h.FID+"_zoom_"+a.toString();var p;if(o[f]){o[f].updateAndAddShapes()}else{p=this.createThematicFeature(i[l]);if(p.getShapesCount()<1){continue}o[f]=p;s.push(f);if(s.length>u){var d=s[0];s.splice(0,1);delete o[d]}}}this.renderer.render();if(n&&this.isHoverAble&&this.isMultiHover){var y=this.getShapesByFeatureID(n);this.renderer.updateHoverShapes(y)}}},{key:"createThematicFeature",value:function t(e){var r=x(this.style);var n={};n.nodesClipPixel=this.nodesClipPixel;n.isHoverAble=this.isHoverAble;n.isMultiHover=this.isMultiHover;n.isClickAble=this.isClickAble;n.highlightStyle=g.ShapeFactory.transformStyle(this.highlightStyle);var i=new m.ThemeVector(e,this,g.ShapeFactory.transformStyle(r),n);for(var o=0;o<i.shapes.length;o++){this.renderer.addShape(i.shapes[o])}return i}},{key:"clearCache",value:function t(){this.cache={};this.cacheFields=[]}},{key:"clear",value:function t(){this.renderer.clearAll();this.renderer.refresh();this.removeAllFeatures();this.clearCache()}},{key:"getCacheCount",value:function t(){return this.cacheFields.length}},{key:"setMaxCacheCount",value:function t(e){if(!isNaN(e)){this.maxCacheCount=e;this.isCustomSetMaxCacheCount=true}}},{key:"getShapesByFeatureID",value:function t(e){var r=[];var n=this.renderer.getAllShapes();if(!e){return n}for(var i=0,o=n.length;i<o;i++){var s=n[i];if(s.refDataID&&e===s.refDataID){r.push(s)}}return r}}]);return e}(v.ThemeLayer);e.GeoFeatureThemeLayer=C;w.Map.GeoFeatureThemeLayer=C},function(t,e,r){"use strict";const n=r(39);const i=r(39).buildOptions;const o=r(516);const s=r(517);const a="<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,n.nameRegexp);if(!Number.parseInt&&window.parseInt){Number.parseInt=window.parseInt}if(!Number.parseFloat&&window.parseFloat){Number.parseFloat=window.parseFloat}const u={attributeNamePrefix:"@_",attrNodeName:false,textNodeName:"#text",ignoreAttributes:true,ignoreNameSpace:false,allowBooleanAttributes:false,parseNodeValue:true,parseAttributeValue:false,arrayMode:false,trimValues:true,cdataTagName:false,cdataPositionChar:"\\c",numParseOptions:{hex:true,leadingZeros:true},tagValueProcessor:function(t,e){return t},attrValueProcessor:function(t,e){return t},stopNodes:[],alwaysCreateTextNode:false};e.defaultOptions=u;const l=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","ignoreNameSpace","allowBooleanAttributes","parseNodeValue","parseAttributeValue","arrayMode","trimValues","cdataTagName","cdataPositionChar","tagValueProcessor","attrValueProcessor","parseTrueNumberOnly","numParseOptions","stopNodes","alwaysCreateTextNode"];e.props=l;function c(t,e,r){if(e){if(r.trimValues){e=e.trim()}e=r.tagValueProcessor(e,t);e=f(e,r.parseNodeValue,r.numParseOptions)}return e}function h(t,e){if(e.ignoreNameSpace){const e=t.split(":");const r=t.charAt(0)==="/"?"/":"";if(e[0]==="xmlns"){return""}if(e.length===2){t=r+e[1]}}return t}function f(t,e,r){if(e&&typeof t==="string"){const e=t.trim();if(e==="true")return true;else if(e==="false")return false;else return s(t,r)}else{if(n.isExist(t)){return t}else{return""}}}const p=new RegExp("([^\\s=]+)\\s*(=\\s*(['\"])(.*?)\\3)?","g");function d(t,e){if(!e.ignoreAttributes&&typeof t==="string"){t=t.replace(/\r?\n/g," ");const r=n.getAllMatches(t,p);const i=r.length;const o={};for(let t=0;t<i;t++){const n=h(r[t][1],e);if(n.length){if(r[t][4]!==undefined){if(e.trimValues){r[t][4]=r[t][4].trim()}r[t][4]=e.attrValueProcessor(r[t][4],n);o[e.attributeNamePrefix+n]=f(r[t][4],e.parseAttributeValue,e.numParseOptions)}else if(e.allowBooleanAttributes){o[e.attributeNamePrefix+n]=true}}}if(!Object.keys(o).length){return}if(e.attrNodeName){const t={};t[e.attrNodeName]=o;return t}return o}}const y=function(t,e){t=t.replace(/\r\n?/g,"\n");e=i(e,u,l);const r=new o("!xml");let s=r;let a="";for(let r=0;r<t.length;r++){const i=t[r];if(i==="<"){if(t[r+1]==="/"){const i=g(t,">",r,"Closing Tag is not closed.");let o=t.substring(r+2,i).trim();if(e.ignoreNameSpace){const t=o.indexOf(":");if(t!==-1){o=o.substr(t+1)}}if(s){if(s.val){s.val=n.getValue(s.val)+""+c(o,a,e)}else{s.val=c(o,a,e)}}if(e.stopNodes.length&&e.stopNodes.includes(s.tagname)){s.child=[];if(s.attrsMap==undefined){s.attrsMap={}}s.val=t.substr(s.startIndex+1,r-s.startIndex-1)}s=s.parent;a="";r=i}else if(t[r+1]==="?"){r=g(t,"?>",r,"Pi Tag is not closed.")}else if(t.substr(r+1,3)==="!--"){r=g(t,"--\x3e",r,"Comment is not closed.")}else if(t.substr(r+1,2)==="!D"){const e=g(t,">",r,"DOCTYPE is not closed.");const n=t.substring(r,e);if(n.indexOf("[")>=0){r=t.indexOf("]>",r)+1}else{r=e}}else if(t.substr(r+1,2)==="!["){const i=g(t,"]]>",r,"CDATA is not closed.")-2;const u=t.substring(r+9,i);if(a){s.val=n.getValue(s.val)+""+c(s.tagname,a,e);a=""}if(e.cdataTagName){const t=new o(e.cdataTagName,s,u);s.addChild(t);s.val=n.getValue(s.val)+e.cdataPositionChar;if(u){t.val=u}}else{s.val=(s.val||"")+(u||"")}r=i+2}else{const i=v(t,r+1);let u=i.data;const l=i.index;const h=u.indexOf(" ");let f=u;let p=true;if(h!==-1){f=u.substr(0,h).replace(/\s\s*$/,"");u=u.substr(h+1)}if(e.ignoreNameSpace){const t=f.indexOf(":");if(t!==-1){f=f.substr(t+1);p=f!==i.data.substr(t+1)}}if(s&&a){if(s.tagname!=="!xml"){s.val=n.getValue(s.val)+""+c(s.tagname,a,e)}}if(u.length>0&&u.lastIndexOf("/")===u.length-1){if(f[f.length-1]==="/"){f=f.substr(0,f.length-1);u=f}else{u=u.substr(0,u.length-1)}const t=new o(f,s,"");if(f!==u){t.attrsMap=d(u,e)}s.addChild(t)}else{const t=new o(f,s);if(e.stopNodes.length&&e.stopNodes.includes(t.tagname)){t.startIndex=l}if(f!==u&&p){t.attrsMap=d(u,e)}s.addChild(t);s=t}a="";r=l}}else{a+=t[r]}}return r};function v(t,e){let r;let n="";for(let i=e;i<t.length;i++){let e=t[i];if(r){if(e===r)r=""}else if(e==='"'||e==="'"){r=e}else if(e===">"){return{data:n,index:i}}else if(e==="\t"){e=" "}n+=e}}function g(t,e,r,n){const i=t.indexOf(e,r);if(i===-1){throw new Error(n)}else{return i+e.length-1}}e.getTraversalObj=y},function(t,e,r){"use strict";function n(t){this.message=t}n.prototype.toString=function t(){return"Cancel"+(this.message?": "+this.message:"")};n.prototype.__CANCEL__=true;t.exports=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Transformable=undefined;var n=r(5);var i=l(n);var o=r(6);var s=l(o);var a=r(7);var u=r(28);function l(t){return t&&t.__esModule?t:{default:t}}var c=a.Common.Zondy;var h=function(){function t(){(0,i.default)(this,t);this.position=[0,0];this.rotation=[0,0,0];this.scale=[1,1,0,0];this.needLocalTransform=false;this.needTransform=false;this.CLASS_NAME="Zondy.LevelRenderer.Transformable";this.lookAt=function(){var t=u.SUtil.Util_vector.create();return function(e){if(!this.transform){this.transform=u.SUtil.Util_matrix.create()}var r=this.transform;u.SUtil.Util_vector.sub(t,e,this.position);if(n(t[0])&&n(t[1])){return}u.SUtil.Util_vector.normalize(t,t);r[2]=t[0]*this.scale[1];r[3]=t[1]*this.scale[1];r[0]=t[1]*this.scale[0];r[1]=-t[0]*this.scale[0];r[4]=this.position[0];r[5]=this.position[1];this.decomposeTransform();function n(t){var e=5e-5;return t>-e&&t<e}}}()}(0,s.default)(t,[{key:"destroy",value:function t(){this.position=null;this.rotation=null;this.scale=null;this.needLocalTransform=null;this.needTransform=null}},{key:"updateNeedTransform",value:function t(){this.needLocalTransform=e(this.rotation[0])||e(this.position[0])||e(this.position[1])||e(this.scale[0]-1)||e(this.scale[1]-1);function e(t){var e=5e-5;return t>e||t<-e}}},{key:"updateTransform",value:function t(){this.updateNeedTransform();if(this.parent){this.needTransform=this.needLocalTransform||this.parent.needTransform}else{this.needTransform=this.needLocalTransform}if(!this.needTransform){return}var e=[0,0];var r=this.transform||u.SUtil.Util_matrix.create();u.SUtil.Util_matrix.identity(r);if(this.needLocalTransform){if(o(this.scale[0])||o(this.scale[1])){e[0]=-this.scale[2]||0;e[1]=-this.scale[3]||0;var n=o(e[0])||o(e[1]);if(n){u.SUtil.Util_matrix.translate(r,r,e)}u.SUtil.Util_matrix.scale(r,r,this.scale);if(n){e[0]=-e[0];e[1]=-e[1];u.SUtil.Util_matrix.translate(r,r,e)}}if(this.rotation instanceof Array){if(this.rotation[0]!==0){e[0]=-this.rotation[1]||0;e[1]=-this.rotation[2]||0;var i=o(e[0])||o(e[1]);if(i){u.SUtil.Util_matrix.translate(r,r,e)}u.SUtil.Util_matrix.rotate(r,r,this.rotation[0]);if(i){e[0]=-e[0];e[1]=-e[1];u.SUtil.Util_matrix.translate(r,r,e)}}}else{if(this.rotation!==0){u.SUtil.Util_matrix.rotate(r,r,this.rotation)}}if(o(this.position[0])||o(this.position[1])){u.SUtil.Util_matrix.translate(r,r,this.position)}}this.transform=r;if(this.parent&&this.parent.needTransform){if(this.needLocalTransform){u.SUtil.Util_matrix.mul(this.transform,this.parent.transform,this.transform)}else{u.SUtil.Util_matrix.copy(this.transform,this.parent.transform)}}function o(t){var e=5e-5;return t>e||t<-e}}},{key:"setTransform",value:function t(e){if(this.needTransform){var r=this.transform;e.transform(r[0],r[1],r[2],r[3],r[4],r[5])}}},{key:"decomposeTransform",value:function t(){if(!this.transform){return}var e=this.transform;var r=e[0]*e[0]+e[1]*e[1];var n=this.position;var i=this.scale;var o=this.rotation;if(a(r-1)){r=Math.sqrt(r)}var s=e[2]*e[2]+e[3]*e[3];if(a(s-1)){s=Math.sqrt(s)}n[0]=e[4];n[1]=e[5];i[0]=r;i[1]=s;i[2]=i[3]=0;o[0]=Math.atan2(-e[1]/s,e[0]/r);o[1]=o[2]=0;function a(t){var e=5e-5;return t>e||t<-e}}}]);return t}();e.Transformable=h;c.LevelRenderer.Transformable=h},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Curve=undefined;var n=r(5);var i=l(n);var o=r(6);var s=l(o);var a=r(7);var u=r(108);function l(t){return t&&t.__esModule?t:{default:t}}var c=a.Common.Zondy;var h=function(){function t(){(0,i.default)(this,t);this.vector=new u.Vector;this.EPSILON=1e-4;this.THREE_SQRT=Math.sqrt(3);this.ONE_THIRD=1/3;this.CLASS_NAME="Zondy.LevelRenderer.Tool.Curve"}(0,s.default)(t,[{key:"isAroundZero",value:function t(e){return e>-this.EPSILON&&e<this.EPSILON}},{key:"isNotAroundZero",value:function t(e){return e>this.EPSILON||e<-this.EPSILON}},{key:"cubicAt",value:function t(e,r,n,i,o){var s=1-o;return s*s*(s*e+3*o*r)+o*o*(o*i+3*s*n)}},{key:"cubicDerivativeAt",value:function t(e,r,n,i,o){var s=1-o;return 3*(((r-e)*s+2*(n-r)*o)*s+(i-n)*o*o)}},{key:"cubicRootAt",value:function t(e,r,n,i,o,s){var a=i+3*(r-n)-e;var u=3*(n-r*2+e);var l=3*(r-e);var c=e-o;var h=u*u-3*a*l;var f=u*l-9*a*c;var p=l*l-3*u*c;var d=0;if(this.isAroundZero(h)&&this.isAroundZero(f)){if(this.isAroundZero(u)){s[0]=0}else{var y=-l/u;if(y>=0&&y<=1){s[d++]=y}}}else{var v=f*f-4*h*p;if(this.isAroundZero(v)){var g=f/h;var m=-u/a+g;var _=-g/2;if(m>=0&&m<=1){s[d++]=m}if(_>=0&&_<=1){s[d++]=_}}else if(v>0){var b=Math.sqrt(v);var x=h*u+1.5*a*(-f+b);var S=h*u+1.5*a*(-f-b);if(x<0){x=-Math.pow(-x,this.ONE_THIRD)}else{x=Math.pow(x,this.ONE_THIRD)}if(S<0){S=-Math.pow(-S,this.ONE_THIRD)}else{S=Math.pow(S,this.ONE_THIRD)}var w=(-u-(x+S))/(3*a);if(w>=0&&w<=1){s[d++]=w}}else{var C=(2*h*u-3*a*f)/(2*Math.sqrt(h*h*h));var I=Math.acos(C)/3;var E=Math.sqrt(h);var P=Math.cos(I);var M=(-u-2*E*P)/(3*a);var L=(-u+E*(P+this.THREE_SQRT*Math.sin(I)))/(3*a);var N=(-u+E*(P-this.THREE_SQRT*Math.sin(I)))/(3*a);if(M>=0&&M<=1){s[d++]=M}if(L>=0&&L<=1){s[d++]=L}if(N>=0&&N<=1){s[d++]=N}}}return d}},{key:"cubicExtrema",value:function t(e,r,n,i,o){var s=6*n-12*r+6*e;var a=9*r+3*i-3*e-9*n;var u=3*r-3*e;var l=0;if(this.isAroundZero(a)){if(this.isNotAroundZero(s)){var c=-u/s;if(c>=0&&c<=1){o[l++]=c}}}else{var h=s*s-4*a*u;if(this.isAroundZero(h)){o[0]=-s/(2*a)}else if(h>0){var f=Math.sqrt(h);var p=(-s+f)/(2*a);var d=(-s-f)/(2*a);if(p>=0&&p<=1){o[l++]=p}if(d>=0&&d<=1){o[l++]=d}}}return l}},{key:"cubicSubdivide",value:function t(e,r,n,i,o,s){var a=(r-e)*o+e;var u=(n-r)*o+r;var l=(i-n)*o+n;var c=(u-a)*o+a;var h=(l-u)*o+u;var f=(h-c)*o+c;s[0]=e;s[1]=a;s[2]=c;s[3]=f;s[4]=f;s[5]=h;s[6]=l;s[7]=i}},{key:"cubicProjectPoint",value:function t(e,r,n,i,o,s,a,u,l,c,h){var f=this.vector.create();var p=this.vector.create();var d=this.vector.create();var y;var v=.005;var g=Infinity;f[0]=l;f[1]=c;for(var m=0;m<1;m+=.05){p[0]=this.cubicAt(e,n,o,a,m);p[1]=this.cubicAt(r,i,s,u,m);var _=this.vector.distSquare(f,p);if(_<g){y=m;g=_}}g=Infinity;for(var b=0;b<32;b++){if(v<this.EPSILON){break}var x=y-v;var S=y+v;p[0]=this.cubicAt(e,n,o,a,x);p[1]=this.cubicAt(r,i,s,u,x);var w=this.vector.distSquare(p,f);if(x>=0&&w<g){y=x;g=w}else{d[0]=this.cubicAt(e,n,o,a,S);d[1]=this.cubicAt(r,i,s,u,S);var C=this.vector.distSquare(d,f);if(S<=1&&C<g){y=S;g=C}else{v*=.5}}}if(h){h[0]=this.cubicAt(e,n,o,a,y);h[1]=this.cubicAt(r,i,s,u,y)}return Math.sqrt(g)}},{key:"quadraticAt",value:function t(e,r,n,i){var o=1-i;return o*(o*e+2*i*r)+i*i*n}},{key:"quadraticDerivativeAt",value:function t(e,r,n,i){return 2*((1-i)*(r-e)+i*(n-r))}},{key:"quadraticRootAt",value:function t(e,r,n,i,o){var s=e-2*r+n;var a=2*(r-e);var u=e-i;var l=0;if(this.isAroundZero(s)){if(this.isNotAroundZero(a)){var c=-u/a;if(c>=0&&c<=1){o[l++]=c}}}else{var h=a*a-4*s*u;if(this.isAroundZero(h)){var f=-a/(2*s);if(f>=0&&f<=1){o[l++]=f}}else if(h>0){var p=Math.sqrt(h);var d=(-a+p)/(2*s);var y=(-a-p)/(2*s);if(d>=0&&d<=1){o[l++]=d}if(y>=0&&y<=1){o[l++]=y}}}return l}},{key:"quadraticExtremum",value:function t(e,r,n){var i=e+n-2*r;if(i===0){return.5}else{return(e-r)/i}}},{key:"quadraticProjectPoint",value:function t(e,r,n,i,o,s,a,u,l){var c=this.vector.create();var h=this.vector.create();var f=this.vector.create();var p;var d=.005;var y=Infinity;c[0]=a;c[1]=u;for(var v=0;v<1;v+=.05){h[0]=this.quadraticAt(e,n,o,v);h[1]=this.quadraticAt(r,i,s,v);var g=this.vector.distSquare(c,h);if(g<y){p=v;y=g}}y=Infinity;for(var m=0;m<32;m++){if(d<this.EPSILON){break}var _=p-d;var b=p+d;h[0]=this.quadraticAt(e,n,o,_);h[1]=this.quadraticAt(r,i,s,_);var x=this.vector.distSquare(h,c);if(_>=0&&x<y){p=_;y=x}else{f[0]=this.quadraticAt(e,n,o,b);f[1]=this.quadraticAt(r,i,s,b);var S=this.vector.distSquare(f,c);if(b<=1&&S<y){p=b;y=S}else{d*=.5}}}if(l){l[0]=this.quadraticAt(e,n,o,p);l[1]=this.quadraticAt(r,i,s,p)}return Math.sqrt(y)}}]);return t}();e.Curve=h;c.LevelRenderer.Tool.Curve=h},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Vector=undefined;var n=r(5);var i=u(n);var o=r(6);var s=u(o);var a=r(7);function u(t){return t&&t.__esModule?t:{default:t}}var l=a.Common.Zondy;var c=function(){function t(){(0,i.default)(this,t);this.ArrayCtor=typeof Float32Array==="undefined"?Array:Float32Array;this.CLASS_NAME="Zondy.LevelRenderer.Tool.Vector"}(0,s.default)(t,[{key:"create",value:function t(e,r){var n=this.ArrayCtor;var i=new n(2);i[0]=e||0;i[1]=r||0;return i}},{key:"copy",value:function t(e,r){e[0]=r[0];e[1]=r[1];return e}},{key:"set",value:function t(e,r,n){e[0]=r;e[1]=n;return e}},{key:"add",value:function t(e,r,n){e[0]=r[0]+n[0];e[1]=r[1]+n[1];return e}},{key:"scaleAndAdd",value:function t(e,r,n,i){e[0]=r[0]+n[0]*i;e[1]=r[1]+n[1]*i;return e}},{key:"sub",value:function t(e,r,n){e[0]=r[0]-n[0];e[1]=r[1]-n[1];return e}},{key:"len",value:function t(e){return Math.sqrt(this.lenSquare(e))}},{key:"lenSquare",value:function t(e){return e[0]*e[0]+e[1]*e[1]}},{key:"mul",value:function t(e,r,n){e[0]=r[0]*n[0];e[1]=r[1]*n[1];return e}},{key:"div",value:function t(e,r,n){e[0]=r[0]/n[0];e[1]=r[1]/n[1];return e}},{key:"dot",value:function t(e,r){return e[0]*r[0]+e[1]*r[1]}},{key:"scale",value:function t(e,r,n){e[0]=r[0]*n;e[1]=r[1]*n;return e}},{key:"normalize",value:function t(e,r){var n=this.len(r);if(n===0){e[0]=0;e[1]=0}else{e[0]=r[0]/n;e[1]=r[1]/n}return e}},{key:"distance",value:function t(e,r){return Math.sqrt((e[0]-r[0])*(e[0]-r[0])+(e[1]-r[1])*(e[1]-r[1]))}},{key:"distanceSquare",value:function t(e,r){return(e[0]-r[0])*(e[0]-r[0])+(e[1]-r[1])*(e[1]-r[1])}},{key:"negate",value:function t(e,r){e[0]=-r[0];e[1]=-r[1];return e}},{key:"lerp",value:function t(e,r,n,i){e[0]=r[0]+i*(n[0]-r[0]);e[1]=r[1]+i*(n[1]-r[1]);return e}},{key:"applyTransform",value:function t(e,r,n){var i=r[0];var o=r[1];e[0]=n[0]*i+n[2]*o+n[4];e[1]=n[1]*i+n[3]*o+n[5];return e}},{key:"min",value:function t(e,r,n){e[0]=Math.min(r[0],n[0]);e[1]=Math.min(r[1],n[1]);return e}},{key:"max",value:function t(e,r,n){e[0]=Math.max(r[0],n[0]);e[1]=Math.max(r[1],n[1]);return e}},{key:"length",value:function t(e){return this.len(e)}},{key:"lengthSquare",value:function t(e){return this.lenSquare(e)}},{key:"dist",value:function t(e,r){return this.distance(e,r)}},{key:"distSquare",value:function t(e,r){return this.distanceSquare(e,r)}}]);return t}();e.Vector=c;l.LevelRenderer.Tool.Vector=c},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Point=undefined;var n=r(11);var i=g(n);var o=r(5);var s=g(o);var a=r(6);var u=g(a);var l=r(12);var c=g(l);var h=r(14);var f=g(h);var p=r(13);var d=g(p);var y=r(7);var v=r(40);function g(t){return t&&t.__esModule?t:{default:t}}var m=y.Common.Zondy;var _=function(t){(0,d.default)(e,t);function e(t,r){(0,s.default)(this,e);var n=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r));n.x=!isNaN(t)?t:0;n.y=!isNaN(r)?r:0;n.r=6;n.CLASS_NAME="Zondy.Feature.ShapeParameters.Point";return n}(0,u.default)(e,[{key:"destroy",value:function t(){this.x=null;this.y=null;this.r=null;(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}}]);return e}(v.ShapeParameters);e.Point=_;m.Feature.ShapeParameters.Point=_},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Polygon=undefined;var n=r(11);var i=g(n);var o=r(5);var s=g(o);var a=r(6);var u=g(a);var l=r(12);var c=g(l);var h=r(14);var f=g(h);var p=r(13);var d=g(p);var y=r(7);var v=r(40);function g(t){return t&&t.__esModule?t:{default:t}}var m=y.Common.Zondy;var _=function(t){(0,d.default)(e,t);function e(t){(0,s.default)(this,e);var r=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t));r.pointList=t;r.holePolygonPointLists=null;r.CLASS_NAME="Zondy.Feature.ShapeParameters.Polygon";return r}(0,u.default)(e,[{key:"destroy",value:function t(){this.pointList=null;this.holePolygonPointLists=null;(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}}]);return e}(v.ShapeParameters);e.Polygon=_;m.Feature.ShapeParameters.Polygon=_},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Sector=undefined;var n=r(11);var i=g(n);var o=r(5);var s=g(o);var a=r(6);var u=g(a);var l=r(12);var c=g(l);var h=r(14);var f=g(h);var p=r(13);var d=g(p);var y=r(7);var v=r(40);function g(t){return t&&t.__esModule?t:{default:t}}var m=y.Common.Zondy;var _=function(t){(0,d.default)(e,t);function e(t,r,n,o,a,u,l){(0,s.default)(this,e);var h=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r,n,o,a,u,l));h.x=!isNaN(t)?t:0;h.y=!isNaN(r)?r:0;h.r=!isNaN(n)?n:0;h.startAngle=!isNaN(o)?o:0;h.endAngle=!isNaN(a)?a:0;h.r0=!isNaN(u)?u:0;h.clockWise=l;h.CLASS_NAME="Zondy.Feature.ShapeParameters.Sector";return h}(0,u.default)(e,[{key:"destroy",value:function t(){this.x=null;this.y=null;this.r=null;this.startAngle=null;this.endAngle=null;this.r0=null;this.clockWise=null;(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}}]);return e}(v.ShapeParameters);e.Sector=_;m.Feature.ShapeParameters.Sector=_},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.SmicPolygon=undefined;var n=r(11);var i=m(n);var o=r(5);var s=m(o);var a=r(6);var u=m(a);var l=r(12);var c=m(l);var h=r(14);var f=m(h);var p=r(13);var d=m(p);var y=r(7);var v=r(26);var g=r(28);function m(t){return t&&t.__esModule?t:{default:t}}var _=y.Common.Zondy,b=y.Common.cloneObject;var x=function(t){(0,d.default)(e,t);function e(t){(0,s.default)(this,e);var r=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t));r.type="smicpolygon";r.holePolygonPointLists=null;if(!r.refOriginalPosition||r.refOriginalPosition.length!==2){r.refOriginalPosition=[0,0]}r.CLASS_NAME="Zondy.LevelRenderer.Shape.SmicPolygon";return r}(0,u.default)(e,[{key:"destroy",value:function t(){this.type=null;this.holePolygonPointLists=null;(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}},{key:"brush",value:function t(e,r){if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var n=this.style;if(r){n=this.getHighlightStyle(n,this.highlightStyle||{})}e.save();this.setContext(e,n);this.setTransform(e);var i=false;if(n.brushType==="fill"||n.brushType==="both"||typeof n.brushType==="undefined"){e.beginPath();if(n.lineType==="dashed"||n.lineType==="dotted"||n.lineType==="dot"||n.lineType==="dash"||n.lineType==="dashot"||n.lineType==="longdash"||n.lineType==="longdashdot"){this.buildPath(e,{lineType:"solid",lineWidth:n.lineWidth,pointList:n.pointList})}else{this.buildPath(e,n);i=true}e.closePath();this.setCtxGlobalAlpha(e,"fill",n);e.fill();this.setCtxGlobalAlpha(e,"reset",n)}if(n.lineWidth>0&&(n.brushType==="stroke"||n.brushType==="both")){if(!i){e.beginPath();this.buildPath(e,n)}this.setCtxGlobalAlpha(e,"stroke",n);e.stroke();this.setCtxGlobalAlpha(e,"reset",n)}this.drawText(e,n,this.style);var o=b(n);if(o.pointList){if(this.holePolygonPointLists&&this.holePolygonPointLists.length>0){var s=this.holePolygonPointLists;var a=s.length;for(var u=0;u<a;u++){var l=s[u];o.pointList=l;e.globalCompositeOperation="destination-out";i=false;if(o.brushType==="fill"||o.brushType==="both"||typeof o.brushType=="undefined"){e.beginPath();if(o.lineType==="dashed"||o.lineType==="dotted"||o.lineType==="dot"||o.lineType==="dash"||o.lineType==="dashot"||o.lineType==="longdash"||o.lineType==="longdashdot"){this.buildPath(e,{lineType:"solid",lineWidth:o.lineWidth,pointList:o.pointList})}else{this.buildPath(e,o);i=true}e.closePath();this.setCtxGlobalAlpha(e,"fill",o);e.fill();this.setCtxGlobalAlpha(e,"reset",o)}if(o.lineWidth>0&&(o.brushType==="stroke"||o.brushType==="both")){if(!i){e.beginPath();this.buildPath(e,o)}e.globalCompositeOperation="source-over";this.setCtxGlobalAlpha(e,"stroke",o);e.stroke();this.setCtxGlobalAlpha(e,"reset",o)}else{e.globalCompositeOperation="source-over"}}}}e.restore();return}},{key:"buildPath",value:function t(e,r){if(r.showShadow){e.shadowBlur=r.shadowBlur;e.shadowColor=r.shadowColor;e.shadowOffsetX=r.shadowOffsetX;e.shadowOffsetY=r.shadowOffsetY}if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var n=this.refOriginalPosition;var i=r.pointList;if(i.length<2){return}if(r.smooth&&r.smooth!=="spline"){var o=g.SUtil.SUtil_smoothBezier(i,r.smooth,true,r.smoothConstraint,n);e.moveTo(i[0][0]+n[0],i[0][1]+n[1]);var s;var a;var u;var l=i.length;for(var c=0;c<l;c++){s=o[c*2];a=o[c*2+1];u=[i[(c+1)%l][0]+n[0],i[(c+1)%l][1]+n[1]];e.bezierCurveTo(s[0],s[1],a[0],a[1],u[0],u[1])}}else{if(r.smooth==="spline"){i=g.SUtil.SUtil_smoothSpline(i,true,null,n)}if(!r.lineType||r.lineType==="solid"){e.moveTo(i[0][0]+n[0],i[0][1]+n[1]);for(var h=1;h<i.length;h++){e.lineTo(i[h][0]+n[0],i[h][1]+n[1])}e.lineTo(i[0][0]+n[0],i[0][1]+n[1])}else if(r.lineType==="dashed"||r.lineType==="dotted"||r.lineType==="dot"||r.lineType==="dash"||r.lineType==="longdash"){var f=r._dashLength||(r.lineWidth||1)*(r.lineType==="dashed"?5:1);r._dashLength=f;var p=r.lineWidth||1;var d=p;var y=p;if(r.lineType==="dashed"){d*=5;y*=5;if(r.lineCap&&r.lineCap!=="butt"){d-=p;y+=p}}if(r.lineType==="dotted"){if(r.lineCap&&r.lineCap!=="butt"){d=1;y+=p}}if(r.lineType==="dot"){y*=4;if(r.lineCap&&r.lineCap!=="butt"){d=1;y+=p}}if(r.lineType==="dash"){d*=4;y*=4;if(r.lineCap&&r.lineCap!=="butt"){d-=p;y+=p}}if(r.lineType==="longdash"){d*=8;y*=4;if(r.lineCap&&r.lineCap!=="butt"){d-=p;y+=p}}e.moveTo(i[0][0]+n[0],i[0][1]+n[1]);for(var v=1;v<i.length;v++){g.SUtil.SUtil_dashedLineTo(e,i[v-1][0]+n[0],i[v-1][1]+n[1],i[v][0]+n[0],i[v][1]+n[1],p,[d,y])}g.SUtil.SUtil_dashedLineTo(e,i[i.length-1][0]+n[0],i[i.length-1][1]+n[1],i[0][0]+n[0],i[0][1]+n[1],p,[d,y])}else if(r.lineType==="dashot"||r.lineType==="longdashdot"){var m=r._dashLength||(r.lineWidth||1)*(r.lineType==="dashed"?5:1);r._dashLength=m;var _=r.lineWidth||1;var b=_;var x=_;var S=_;var w=_;if(r.lineType==="dashot"){b*=4;x*=4;w*=4;if(r.lineCap&&r.lineCap!=="butt"){b-=_;x+=_;S=1;w+=_}}if(r.lineType==="longdashdot"){b*=8;x*=4;w*=4;if(r.lineCap&&r.lineCap!=="butt"){b-=_;x+=_;S=1;w+=_}}e.moveTo(i[0][0]+n[0],i[0][1]+n[1]);for(var C=1;C<i.length;C++){g.SUtil.SUtil_dashedLineTo(e,i[C-1][0]+n[0],i[C-1][1]+n[1],i[C][0]+n[0],i[C][1]+n[1],_,[b,x,S,w])}g.SUtil.SUtil_dashedLineTo(e,i[i.length-1][0]+n[0],i[i.length-1][1]+n[1],i[0][0]+n[0],i[0][1]+n[1],_,[b,x,S,w])}}return}},{key:"getRect",value:function t(e,r){var n;if(!r){if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}n=this.refOriginalPosition}else{n=r}if(e.__rect){return e.__rect}var i=Number.MAX_VALUE;var o=Number.MIN_VALUE;var s=Number.MAX_VALUE;var a=Number.MIN_VALUE;var u=e.pointList;for(var l=0,c=u.length;l<c;l++){if(u[l][0]+n[0]<i){i=u[l][0]+n[0]}if(u[l][0]+n[0]>o){o=u[l][0]+n[0]}if(u[l][1]+n[1]<s){s=u[l][1]+n[1]}if(u[l][1]+n[1]>a){a=u[l][1]+n[1]}}var h;if(e.brushType==="stroke"||e.brushType==="fill"){h=e.lineWidth||1}else{h=0}e.__rect={x:Math.round(i-h/2),y:Math.round(s-h/2),width:o-i+h,height:a-s+h};return e.__rect}}]);return e}(v.Shape);e.SmicPolygon=x;_.LevelRenderer.SmicPolygon=x},function(t,e,r){var n=r(61);t.exports=function(t,e){if(!n(t))return t;var r,i;if(e&&typeof(r=t.toString)=="function"&&!n(i=r.call(t)))return i;if(typeof(r=t.valueOf)=="function"&&!n(i=r.call(t)))return i;if(!e&&typeof(r=t.toString)=="function"&&!n(i=r.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e,r){var n=r(60);var i=r(322);var o=r(121);var s=r(119)("IE_PROTO");var a=function(){};var u="prototype";var l=function(){var t=r(189)("iframe");var e=o.length;var n="<";var i=">";var s;t.style.display="none";r(327).appendChild(t);t.src="javascript:";s=t.contentWindow.document;s.open();s.write(n+"script"+i+"document.F=Object"+n+"/script"+i);s.close();l=s.F;while(e--)delete l[u][o[e]];return l()};t.exports=Object.create||function t(e,r){var o;if(e!==null){a[u]=n(e);o=new a;a[u]=null;o[s]=e}else o=l();return r===undefined?o:i(o,r)}},function(t,e,r){var n=r(190);var i=r(121);t.exports=Object.keys||function t(e){return n(e,i)}},function(t,e){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,e){t.exports=function(t){if(t==undefined)throw TypeError("Can't call method on  "+t);return t}},function(t,e){var r=Math.ceil;var n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:r)(t)}},function(t,e,r){var n=r(120)("keys");var i=r(86);t.exports=function(t){return n[t]||(n[t]=i(t))}},function(t,e,r){var n=r(21);var i=r(42);var o="__core-js_shared__";var s=i[o]||(i[o]={});(t.exports=function(t,e){return s[t]||(s[t]=e!==undefined?e:{})})("versions",[]).push({version:n.version,mode:r(85)?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,r){var n=r(49).f;var i=r(51);var o=r(43)("toStringTag");t.exports=function(t,e,r){if(t&&!i(t=r?t:t.prototype,o))n(t,o,{configurable:true,value:e})}},function(t,e,r){var n=r(117);t.exports=function(t){return Object(n(t))}},function(t,e,r){var n=r(45);var i=r(20).document;var o=n(i)&&n(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e,r){var n=r(45);t.exports=function(t,e){if(!n(t))return t;var r,i;if(e&&typeof(r=t.toString)=="function"&&!n(i=r.call(t)))return i;if(typeof(r=t.valueOf)=="function"&&!n(i=r.call(t)))return i;if(!e&&typeof(r=t.toString)=="function"&&!n(i=r.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e,r){t.exports={default:r(347),__esModule:true}},function(t,e){t.exports=function(t){if(t==undefined)throw TypeError("Can't call method on  "+t);return t}},function(t,e){var r=Math.ceil;var n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:r)(t)}},function(t,e,r){var n=r(130)("keys");var i=r(91);t.exports=function(t){return n[t]||(n[t]=i(t))}},function(t,e,r){var n=r(17);var i=r(20);var o="__core-js_shared__";var s=i[o]||(i[o]={});(t.exports=function(t,e){return s[t]||(s[t]=e!==undefined?e:{})})("versions",[]).push({version:n.version,mode:r(75)?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,r){t.exports={default:r(351),__esModule:true}},function(t,e,r){var n=r(93);var i=r(90);var o=r(55);var s=r(125);var a=r(54);var u=r(196);var l=Object.getOwnPropertyDescriptor;e.f=r(37)?l:function t(e,r){e=o(e);r=s(r,true);if(u)try{return l(e,r)}catch(t){}if(a(e,r))return i(!n.f.call(e,r),e[r])}},function(t,e,r){e.f=r(24)},function(t,e,r){var n=r(20);var i=r(17);var o=r(75);var s=r(134);var a=r(44).f;t.exports=function(t){var e=i.Symbol||(i.Symbol=o?{}:n.Symbol||{});if(t.charAt(0)!="_"&&!(t in e))a(e,t,{value:s.f(t)})}},function(t,e,r){var n=r(31);var i=r(358);var o=r(131);var s=r(129)("IE_PROTO");var a=function(){};var u="prototype";var l=function(){var t=r(124)("iframe");var e=o.length;var n="<";var i=">";var s;t.style.display="none";r(202).appendChild(t);t.src="javascript:";s=t.contentWindow.document;s.open();s.write(n+"script"+i+"document.F=Object"+n+"/script"+i);s.close();l=s.F;while(e--)delete l[u][o[e]];return l()};t.exports=Object.create||function t(e,r){var o;if(e!==null){a[u]=n(e);o=new a;a[u]=null;o[s]=e}else o=l();return r===undefined?o:i(o,r)}},function(t,e,r){var n=r(197);var i=r(131).concat("length","prototype");e.f=Object.getOwnPropertyNames||function t(e){return n(e,i)}},function(t,e,r){"use strict";var n=r(364)(true);r(204)(String,"String",function(t){this._t=String(t);this._i=0},function(){var t=this._t;var e=this._i;var r;if(e>=t.length)return{value:undefined,done:true};r=n(t,e);this._i+=r.length;return{value:r,done:false}})},function(t,e,r){r(366);var n=r(20);var i=r(53);var o=r(76);var s=r(24)("toStringTag");var a=("CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,"+"DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,"+"MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,"+"SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,"+"TextTrackList,TouchList").split(",");for(var u=0;u<a.length;u++){var l=a[u];var c=n[l];var h=c&&c.prototype;if(h&&!h[s])i(h,s,l);o[l]=o.Array}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.AnyLine=undefined;var n=r(0);var i=r(8);var o=function t(e,r){var n=r!==undefined?r:{};(0,i.extend)(this,n);this.Arcs=e!==undefined&&e!==null?e:null};e.AnyLine=o;n.Zondy.Object.AnyLine=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CPointInfo=undefined;var n=r(0);var i=r(8);var o=function t(e){var r=e!==undefined?e:{};(0,i.extend)(this,r);this.Angle=r.Angle!==undefined&&r.Angle!==null?r.Angle:1;this.Color=r.Color!==undefined&&r.Color!==null?r.Color:1;this.SymHeight=r.SymHeight!==undefined&&r.SymHeight!==null?r.SymHeight:1;this.SymID=r.SymID!==undefined&&r.SymID!==null?r.SymID:1;this.SymWidth=r.SymWidth!==undefined&&r.SymWidth!==null?r.SymWidth:1};e.CPointInfo=o;n.Zondy.Object.CPointInfo=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CRegionInfo=undefined;var n=r(0);var i=r(8);var o=function t(e){var r=e!==undefined?e:{};(0,i.extend)(this,r);this.EndColor=r.EndColor!==undefined&&r.EndColor!==null?r.EndColor:1;this.FillColor=r.FillColor!==undefined&&r.FillColor!==null?r.FillColor:1;this.FillMode=r.FillMode!==undefined&&r.FillMode!==null?r.FillMode:0;this.OutPenWidth=r.OutPenWidth!==undefined&&r.OutPenWidth!==null?r.OutPenWidth:1;this.PatAngle=r.PatAngle!==undefined&&r.PatAngle!==null?r.PatAngle:1;this.PatColor=r.PatColor!==undefined&&r.PatColor!==null?r.PatColor:1;this.PatHeight=r.PatHeight!==undefined&&r.PatHeight!==null?r.PatHeight:1;this.PatID=r.PatID!==undefined&&r.PatID!==null?r.PatID:1;this.PatWidth=r.PatWidth!==undefined&&r.PatWidth!==null?r.PatWidth:1};e.CRegionInfo=o;n.Zondy.Object.CRegionInfo=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.GPoint=undefined;var n=r(2);var i=v(n);var o=r(1);var s=v(o);var a=r(9);var u=v(a);var l=r(3);var c=v(l);var h=r(4);var f=v(h);var p=r(0);var d=r(98);var y=r(33);function v(t){return t&&t.__esModule?t:{default:t}}var g=function(t){(0,f.default)(e,t);function e(t,r,n){(0,s.default)(this,e);var o=n?n:{};var a=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,o));if(t!==undefined&&t!==null&&r!==undefined&&r!==null){a.Dot=new y.Point2D(t,r)}return a}(0,u.default)(e,[{key:"setDot",value:function t(e){this.Dot=e!==undefined&&e!==null?e:null}}]);return e}(d.FeatureGraphicBase);e.GPoint=g;p.Zondy.Object.GPoint=g},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.GLine=undefined;var n=r(2);var i=v(n);var o=r(1);var s=v(o);var a=r(9);var u=v(a);var l=r(3);var c=v(l);var h=r(4);var f=v(h);var p=r(0);var d=r(98);var y=r(140);function v(t){return t&&t.__esModule?t:{default:t}}var g=function(t){(0,f.default)(e,t);function e(t,r){(0,s.default)(this,e);var n=r?r:{};var o=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,n));o.Line=t!==undefined&&t!==null?t:null;return o}(0,u.default)(e,[{key:"setLine",value:function t(e){this.Line=e!==undefined&&e!==null?e:null}}]);return e}(d.FeatureGraphicBase);e.GLine=g;p.Zondy.Object.GLine=g},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.GRegion=undefined;var n=r(2);var i=v(n);var o=r(1);var s=v(o);var a=r(9);var u=v(a);var l=r(3);var c=v(l);var h=r(4);var f=v(h);var p=r(0);var d=r(98);var y=r(140);function v(t){return t&&t.__esModule?t:{default:t}}var g=function(t){(0,f.default)(e,t);function e(t,r){(0,s.default)(this,e);var n=r?r:{};var o=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,n));o.Rings=t!==undefined&&t!==null&&Array.isArray(t)?t:null;return o}(0,u.default)(e,[{key:"setRings",value:function t(e){this.Rings=e!==undefined&&e!==null?e:null}}]);return e}(d.FeatureGraphicBase);e.GRegion=g;p.Zondy.Object.GRegion=g},function(t,e,r){"use strict";var n=r(89);function i(t){var e,r;this.promise=new t(function(t,n){if(e!==undefined||r!==undefined)throw TypeError("Bad Promise constructor");e=t;r=n});this.resolve=n(e);this.reject=n(r)}t.exports.f=function(t){return new i(t)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.EditServiceBase=undefined;var n=r(2);var i=d(n);var o=r(1);var s=d(o);var a=r(3);var u=d(a);var l=r(4);var c=d(l);var h=r(0);var f=r(27);var p=r(8);function d(t){return t&&t.__esModule?t:{default:t}}var y=function(t){(0,c.default)(e,t);function e(t){(0,s.default)(this,e);var r=t||{};var n=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));n.guid=r.guid!==undefined?r.guid:(0,p.newGuid)();n.baseUrl="igs/rest/mrfs";n.f=r.f!==undefined?r.f:"json";return n}return e}(f.ServiceBase);e.EditServiceBase=y;h.Zondy.Service.EditServiceBase=y},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.QueryFeatureStruct=undefined;var n=r(0);var i=r(8);var o=function t(e){var r=e?e:{};(0,i.extend)(this,r);this.IncludeAttribute=r.IncludeAttribute!==undefined&&typeof r.IncludeAttribute==="boolean"?r.IncludeAttribute:true;this.IncludeGeometry=r.IncludeGeometry!==undefined&&typeof r.IncludeGeometry==="boolean"?r.IncludeGeometry:false;this.IncludeWebGraphic=r.IncludeWebGraphic!==undefined&&typeof r.IncludeWebGraphic==="boolean"?r.IncludeWebGraphic:false};o.prototype.toJSON=function(){return(0,i.toJSON)(this)};e.QueryFeatureStruct=o;n.Zondy.Service.QueryFeatureStruct=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.VPoint=undefined;var n=r(2);var i=b(n);var o=r(1);var s=b(o);var a=r(3);var u=b(a);var l=r(9);var c=b(l);var h=r(4);var f=b(h);var p=r(150);var d=r(32);var y=r(151);var v=_(y);var g=r(152);var m=_(g);function _(t){if(t&&t.__esModule){return t}else{var e={};if(t!=null){for(var r in t){if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]}}e.default=t;return e}}function b(t){return t&&t.__esModule?t:{default:t}}var x=function(t){(0,f.default)(e,t);(0,c.default)(e,null,[{key:"getPointsCoordinates",value:function t(e){var r=[];for(var n=0;n<e.length;n++){for(var i=0;i<e[n].geometry.length;i++){r.push(e[n].geometry[i].coordinates)}}return r}},{key:"getPointsCenter",value:function t(e){var r=[],n=void 0;for(var i=0;i<e.length;i++){r.push(v.point(e[i]))}n=m.center(m.featureCollection(r));return n}}]);function e(t){(0,s.default)(this,e);var r=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this));r.type="Point";(0,d.extend)(r,t);return r}return e}(p.Geometry);e.VPoint=x;Zondy.Service.VPoint=x},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Geometry=undefined;var n=r(1);var i=o(n);function o(t){return t&&t.__esModule?t:{default:t}}var s=function t(){(0,i.default)(this,t);this.coordinates=[]};e.Geometry=s},function(t,e,r){"use strict";r.r(e);r.d(e,"earthRadius",function(){return n});r.d(e,"factors",function(){return i});r.d(e,"unitsFactors",function(){return o});r.d(e,"areaFactors",function(){return s});r.d(e,"feature",function(){return a});r.d(e,"geometry",function(){return u});r.d(e,"point",function(){return l});r.d(e,"points",function(){return c});r.d(e,"polygon",function(){return h});r.d(e,"polygons",function(){return f});r.d(e,"lineString",function(){return p});r.d(e,"lineStrings",function(){return d});r.d(e,"featureCollection",function(){return y});r.d(e,"multiLineString",function(){return v});r.d(e,"multiPoint",function(){return g});r.d(e,"multiPolygon",function(){return m});r.d(e,"geometryCollection",function(){return _});r.d(e,"round",function(){return b});r.d(e,"radiansToLength",function(){return x});r.d(e,"lengthToRadians",function(){return S});r.d(e,"lengthToDegrees",function(){return w});r.d(e,"bearingToAzimuth",function(){return C});r.d(e,"radiansToDegrees",function(){return I});r.d(e,"degreesToRadians",function(){return E});r.d(e,"convertLength",function(){return P});r.d(e,"convertArea",function(){return M});r.d(e,"isNumber",function(){return L});r.d(e,"isObject",function(){return N});r.d(e,"validateBBox",function(){return T});r.d(e,"validateId",function(){return O});var n=6371008.8;var i={centimeters:n*100,centimetres:n*100,degrees:n/111325,feet:n*3.28084,inches:n*39.37,kilometers:n/1e3,kilometres:n/1e3,meters:n,metres:n,miles:n/1609.344,millimeters:n*1e3,millimetres:n*1e3,nauticalmiles:n/1852,radians:1,yards:n*1.0936};var o={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/n,yards:1.0936133};var s={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:3.86e-7,millimeters:1e6,millimetres:1e6,yards:1.195990046};function a(t,e,r){if(r===void 0){r={}}var n={type:"Feature"};if(r.id===0||r.id){n.id=r.id}if(r.bbox){n.bbox=r.bbox}n.properties=e||{};n.geometry=t;return n}function u(t,e,r){if(r===void 0){r={}}switch(t){case"Point":return l(e).geometry;case"LineString":return p(e).geometry;case"Polygon":return h(e).geometry;case"MultiPoint":return g(e).geometry;case"MultiLineString":return v(e).geometry;case"MultiPolygon":return m(e).geometry;default:throw new Error(t+" is invalid")}}function l(t,e,r){if(r===void 0){r={}}if(!t){throw new Error("coordinates is required")}if(!Array.isArray(t)){throw new Error("coordinates must be an Array")}if(t.length<2){throw new Error("coordinates must be at least 2 numbers long")}if(!L(t[0])||!L(t[1])){throw new Error("coordinates must contain numbers")}var n={type:"Point",coordinates:t};return a(n,e,r)}function c(t,e,r){if(r===void 0){r={}}return y(t.map(function(t){return l(t,e)}),r)}function h(t,e,r){if(r===void 0){r={}}for(var n=0,i=t;n<i.length;n++){var o=i[n];if(o.length<4){throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.")}for(var s=0;s<o[o.length-1].length;s++){if(o[o.length-1][s]!==o[0][s]){throw new Error("First and last Position are not equivalent.")}}}var u={type:"Polygon",coordinates:t};return a(u,e,r)}function f(t,e,r){if(r===void 0){r={}}return y(t.map(function(t){return h(t,e)}),r)}function p(t,e,r){if(r===void 0){r={}}if(t.length<2){throw new Error("coordinates must be an array of two or more positions")}var n={type:"LineString",coordinates:t};return a(n,e,r)}function d(t,e,r){if(r===void 0){r={}}return y(t.map(function(t){return p(t,e)}),r)}function y(t,e){if(e===void 0){e={}}var r={type:"FeatureCollection"};if(e.id){r.id=e.id}if(e.bbox){r.bbox=e.bbox}r.features=t;return r}function v(t,e,r){if(r===void 0){r={}}var n={type:"MultiLineString",coordinates:t};return a(n,e,r)}function g(t,e,r){if(r===void 0){r={}}var n={type:"MultiPoint",coordinates:t};return a(n,e,r)}function m(t,e,r){if(r===void 0){r={}}var n={type:"MultiPolygon",coordinates:t};return a(n,e,r)}function _(t,e,r){if(r===void 0){r={}}var n={type:"GeometryCollection",geometries:t};return a(n,e,r)}function b(t,e){if(e===void 0){e=0}if(e&&!(e>=0)){throw new Error("precision must be a positive number")}var r=Math.pow(10,e||0);return Math.round(t*r)/r}function x(t,e){if(e===void 0){e="kilometers"}var r=i[e];if(!r){throw new Error(e+" units is invalid")}return t*r}function S(t,e){if(e===void 0){e="kilometers"}var r=i[e];if(!r){throw new Error(e+" units is invalid")}return t/r}function w(t,e){return I(S(t,e))}function C(t){var e=t%360;if(e<0){e+=360}return e}function I(t){var e=t%(2*Math.PI);return e*180/Math.PI}function E(t){var e=t%360;return e*Math.PI/180}function P(t,e,r){if(e===void 0){e="kilometers"}if(r===void 0){r="kilometers"}if(!(t>=0)){throw new Error("length must be a positive number")}return x(S(t,e),r)}function M(t,e,r){if(e===void 0){e="meters"}if(r===void 0){r="kilometers"}if(!(t>=0)){throw new Error("area must be a positive number")}var n=s[e];if(!n){throw new Error("invalid original units")}var i=s[r];if(!i){throw new Error("invalid final units")}return t/n*i}function L(t){return!isNaN(t)&&t!==null&&!Array.isArray(t)}function N(t){return!!t&&t.constructor===Object}function T(t){if(!t){throw new Error("bbox is required")}if(!Array.isArray(t)){throw new Error("bbox must be an Array")}if(t.length!==4&&t.length!==6){throw new Error("bbox must be an Array of 4 or 6 numbers")}t.forEach(function(t){if(!L(t)){throw new Error("bbox must only contain numbers")}})}function O(t){if(!t){throw new Error("id is required")}if(["string","number"].indexOf(typeof t)===-1){throw new Error("id must be a number or a string")}}},function(t,e,r){(function(t){!function(t,r){true?r(e):undefined}(this,function(e){"use strict";var r=6371008.8,n={centimeters:637100880,centimetres:637100880,degrees:57.22891354143274,feet:20902260.511392,inches:39.37*r,kilometers:6371.0088,kilometres:6371.0088,meters:r,metres:r,miles:3958.761333810546,millimeters:6371008800,millimetres:6371008800,nauticalmiles:r/1852,radians:1,yards:6967335.223679999},i={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/r,yards:1.0936133},o={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:3.86e-7,millimeters:1e6,millimetres:1e6,yards:1.195990046};function s(t,e,r){void 0===r&&(r={});var n={type:"Feature"};return(0===r.id||r.id)&&(n.id=r.id),r.bbox&&(n.bbox=r.bbox),n.properties=e||{},n.geometry=t,n}function a(t,e,r){switch(t){case"Point":return u(e).geometry;case"LineString":return f(e).geometry;case"Polygon":return c(e).geometry;case"MultiPoint":return v(e).geometry;case"MultiLineString":return y(e).geometry;case"MultiPolygon":return g(e).geometry;default:throw new Error(t+" is invalid")}}function u(t,e,r){if(void 0===r&&(r={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!M(t[0])||!M(t[1]))throw new Error("coordinates must contain numbers");return s({type:"Point",coordinates:t},e,r)}function l(t,e,r){return void 0===r&&(r={}),d(t.map(function(t){return u(t,e)}),r)}function c(t,e,r){void 0===r&&(r={});for(var n=0,i=t;n<i.length;n++){var o=i[n];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<o[o.length-1].length;a++)if(o[o.length-1][a]!==o[0][a])throw new Error("First and last Position are not equivalent.")}return s({type:"Polygon",coordinates:t},e,r)}function h(t,e,r){return void 0===r&&(r={}),d(t.map(function(t){return c(t,e)}),r)}function f(t,e,r){if(void 0===r&&(r={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return s({type:"LineString",coordinates:t},e,r)}function p(t,e,r){return void 0===r&&(r={}),d(t.map(function(t){return f(t,e)}),r)}function d(t,e){void 0===e&&(e={});var r={type:"FeatureCollection"};return e.id&&(r.id=e.id),e.bbox&&(r.bbox=e.bbox),r.features=t,r}function y(t,e,r){return void 0===r&&(r={}),s({type:"MultiLineString",coordinates:t},e,r)}function v(t,e,r){return void 0===r&&(r={}),s({type:"MultiPoint",coordinates:t},e,r)}function g(t,e,r){return void 0===r&&(r={}),s({type:"MultiPolygon",coordinates:t},e,r)}function m(t,e,r){return void 0===r&&(r={}),s({type:"GeometryCollection",geometries:t},e,r)}function _(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var r=Math.pow(10,e||0);return Math.round(t*r)/r}function b(t,e){void 0===e&&(e="kilometers");var r=n[e];if(!r)throw new Error(e+" units is invalid");return t*r}function x(t,e){void 0===e&&(e="kilometers");var r=n[e];if(!r)throw new Error(e+" units is invalid");return t/r}function S(t,e){return C(x(t,e))}function w(t){var e=t%360;return e<0&&(e+=360),e}function C(t){return 180*(t%(2*Math.PI))/Math.PI}function I(t){return t%360*Math.PI/180}function E(t,e,r){if(void 0===e&&(e="kilometers"),void 0===r&&(r="kilometers"),!(t>=0))throw new Error("length must be a positive number");return b(x(t,e),r)}function P(t,e,r){if(void 0===e&&(e="meters"),void 0===r&&(r="kilometers"),!(t>=0))throw new Error("area must be a positive number");var n=o[e];if(!n)throw new Error("invalid original units");var i=o[r];if(!i)throw new Error("invalid final units");return t/n*i}function M(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function L(t){return!!t&&t.constructor===Object}function N(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(t){if(!M(t))throw new Error("bbox must only contain numbers")})}function T(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}var O=Object.freeze({__proto__:null,earthRadius:r,factors:n,unitsFactors:i,areaFactors:o,feature:s,geometry:a,point:u,points:l,polygon:c,polygons:h,lineString:f,lineStrings:p,featureCollection:d,multiLineString:y,multiPoint:v,multiPolygon:g,geometryCollection:m,round:_,radiansToLength:b,lengthToRadians:x,lengthToDegrees:S,bearingToAzimuth:w,radiansToDegrees:C,degreesToRadians:I,convertLength:E,convertArea:P,isNumber:M,isObject:L,validateBBox:N,validateId:T});function A(t,e,r){if(null!==t)for(var n,i,o,s,a,u,l,c,h=0,f=0,p=t.type,d="FeatureCollection"===p,y="Feature"===p,v=d?t.features.length:1,g=0;g<v;g++){a=(c=!!(l=d?t.features[g].geometry:y?t.geometry:t)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var m=0;m<a;m++){var _=0,b=0;if(null!==(s=c?l.geometries[m]:l)){u=s.coordinates;var x=s.type;switch(h=!r||"Polygon"!==x&&"MultiPolygon"!==x?0:1,x){case null:break;case"Point":if(!1===e(u,f,g,_,b))return!1;f++,_++;break;case"LineString":case"MultiPoint":for(n=0;n<u.length;n++){if(!1===e(u[n],f,g,_,b))return!1;f++,"MultiPoint"===x&&_++}"LineString"===x&&_++;break;case"Polygon":case"MultiLineString":for(n=0;n<u.length;n++){for(i=0;i<u[n].length-h;i++){if(!1===e(u[n][i],f,g,_,b))return!1;f++}"MultiLineString"===x&&_++,"Polygon"===x&&b++}"Polygon"===x&&_++;break;case"MultiPolygon":for(n=0;n<u.length;n++){for(b=0,i=0;i<u[n].length;i++){for(o=0;o<u[n][i].length-h;o++){if(!1===e(u[n][i][o],f,g,_,b))return!1;f++}b++}_++}break;case"GeometryCollection":for(n=0;n<s.geometries.length;n++)if(!1===A(s.geometries[n],e,r))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function R(t,e,r,n){var i=r;return A(t,function(t,n,o,s,a){i=0===n&&void 0===r?t:e(i,t,n,o,s,a)},n),i}function F(t,e){var r;switch(t.type){case"FeatureCollection":for(r=0;r<t.features.length&&!1!==e(t.features[r].properties,r);r++);break;case"Feature":e(t.properties,0)}}function D(t,e,r){var n=r;return F(t,function(t,i){n=0===i&&void 0===r?t:e(n,t,i)}),n}function k(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var r=0;r<t.features.length&&!1!==e(t.features[r],r);r++);}function j(t,e,r){var n=r;return k(t,function(t,i){n=0===i&&void 0===r?t:e(n,t,i)}),n}function G(t){var e=[];return A(t,function(t){e.push(t)}),e}function B(t,e){var r,n,i,o,s,a,u,l,c,h,f=0,p="FeatureCollection"===t.type,d="Feature"===t.type,y=p?t.features.length:1;for(r=0;r<y;r++){for(a=p?t.features[r].geometry:d?t.geometry:t,l=p?t.features[r].properties:d?t.properties:{},c=p?t.features[r].bbox:d?t.bbox:void 0,h=p?t.features[r].id:d?t.id:void 0,s=(u=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,i=0;i<s;i++)if(null!==(o=u?a.geometries[i]:a))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,f,l,c,h))return!1;break;case"GeometryCollection":for(n=0;n<o.geometries.length;n++)if(!1===e(o.geometries[n],f,l,c,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,f,l,c,h))return!1;f++}}function U(t,e,r){var n=r;return B(t,function(t,i,o,s,a){n=0===i&&void 0===r?t:e(n,t,i,o,s,a)}),n}function q(t,e){B(t,function(t,r,n,i,o){var a,u=null===t?null:t.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return!1!==e(s(t,n,{bbox:i,id:o}),r,0)&&void 0}switch(u){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon"}for(var l=0;l<t.coordinates.length;l++){var c=t.coordinates[l];if(!1===e(s({type:a,coordinates:c},n),r,l))return!1}})}function z(t,e,r){var n=r;return q(t,function(t,i,o){n=0===i&&0===o&&void 0===r?t:e(n,t,i,o)}),n}function V(t,e){q(t,function(t,r,n){var i=0;if(t.geometry){var o=t.geometry.type;if("Point"!==o&&"MultiPoint"!==o){var s,a=0,u=0,l=0;return!1!==A(t,function(o,c,h,p,d){if(void 0===s||r>a||p>u||d>l)return s=o,a=r,u=p,l=d,void(i=0);var y=f([s,o],t.properties);if(!1===e(y,r,n,d,i))return!1;i++,s=o})&&void 0}}})}function W(t,e,r){var n=r,i=!1;return V(t,function(t,o,s,a,u){n=!1===i&&void 0===r?t:e(n,t,o,s,a,u),i=!0}),n}function H(t,e){if(!t)throw new Error("geojson is required");q(t,function(t,r,n){if(null!==t.geometry){var i=t.geometry.type,o=t.geometry.coordinates;switch(i){case"LineString":if(!1===e(t,r,n,0,0))return!1;break;case"Polygon":for(var s=0;s<o.length;s++)if(!1===e(f(o[s],t.properties),r,n,s))return!1}}})}function X(t,e,r){var n=r;return H(t,function(t,i,o,s){n=0===i&&void 0===r?t:e(n,t,i,o,s)}),n}function Z(t,e){if(!L(e=e||{}))throw new Error("options is invalid");var r,n=e.featureIndex||0,i=e.multiFeatureIndex||0,o=e.geometryIndex||0,s=e.segmentIndex||0,a=e.properties;switch(t.type){case"FeatureCollection":n<0&&(n=t.features.length+n),a=a||t.features[n].properties,r=t.features[n].geometry;break;case"Feature":a=a||t.properties,r=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=t;break;default:throw new Error("geojson is invalid")}if(null===r)return null;var u=r.coordinates;switch(r.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=u.length+s-1),f([u[s],u[s+1]],a,e);case"Polygon":return o<0&&(o=u.length+o),s<0&&(s=u[o].length+s-1),f([u[o][s],u[o][s+1]],a,e);case"MultiLineString":return i<0&&(i=u.length+i),s<0&&(s=u[i].length+s-1),f([u[i][s],u[i][s+1]],a,e);case"MultiPolygon":return i<0&&(i=u.length+i),o<0&&(o=u[i].length+o),s<0&&(s=u[i][o].length-s-1),f([u[i][o][s],u[i][o][s+1]],a,e)}throw new Error("geojson is invalid")}function Y(t,e){if(!L(e=e||{}))throw new Error("options is invalid");var r,n=e.featureIndex||0,i=e.multiFeatureIndex||0,o=e.geometryIndex||0,s=e.coordIndex||0,a=e.properties;switch(t.type){case"FeatureCollection":n<0&&(n=t.features.length+n),a=a||t.features[n].properties,r=t.features[n].geometry;break;case"Feature":a=a||t.properties,r=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=t;break;default:throw new Error("geojson is invalid")}if(null===r)return null;var l=r.coordinates;switch(r.type){case"Point":return u(l,a,e);case"MultiPoint":return i<0&&(i=l.length+i),u(l[i],a,e);case"LineString":return s<0&&(s=l.length+s),u(l[s],a,e);case"Polygon":return o<0&&(o=l.length+o),s<0&&(s=l[o].length+s),u(l[o][s],a,e);case"MultiLineString":return i<0&&(i=l.length+i),s<0&&(s=l[i].length+s),u(l[i][s],a,e);case"MultiPolygon":return i<0&&(i=l.length+i),o<0&&(o=l[i].length+o),s<0&&(s=l[i][o].length-s),u(l[i][o][s],a,e)}throw new Error("geojson is invalid")}var J=Object.freeze({__proto__:null,coordAll:G,coordEach:A,coordReduce:R,featureEach:k,featureReduce:j,findPoint:Y,findSegment:Z,flattenEach:q,flattenReduce:z,geomEach:B,geomReduce:U,lineEach:H,lineReduce:X,propEach:F,propReduce:D,segmentEach:V,segmentReduce:W});function Q(t){var e=[1/0,1/0,-1/0,-1/0];return A(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}function K(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function $(t){if(Array.isArray(t))return t;if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function tt(t){if(t.length>1&&M(t[0])&&M(t[1]))return!0;if(Array.isArray(t[0])&&t[0].length)return tt(t[0]);throw new Error("coordinates must only contain numbers")}function et(t,e,r){if(!e||!r)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+r+": must be a "+e+", given "+t.type)}function rt(t,e,r){if(!t)throw new Error("No feature passed");if(!r)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+r+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+r+": must be a "+e+", given "+t.geometry.type)}function nt(t,e,r){if(!t)throw new Error("No featureCollection passed");if(!r)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+r+", FeatureCollection required");for(var n=0,i=t.features;n<i.length;n++){var o=i[n];if(!o||"Feature"!==o.type||!o.geometry)throw new Error("Invalid input to "+r+", Feature with geometry required");if(!o.geometry||o.geometry.type!==e)throw new Error("Invalid input to "+r+": must be a "+e+", given "+o.geometry.type)}}function it(t){return"Feature"===t.type?t.geometry:t}function ot(t,e){return"FeatureCollection"===t.type?"FeatureCollection":"GeometryCollection"===t.type?"GeometryCollection":"Feature"===t.type&&null!==t.geometry?t.geometry.type:t.type}Q.default=Q;var st=Object.freeze({__proto__:null,getCoord:K,getCoords:$,containsNumber:tt,geojsonType:et,featureOf:rt,collectionOf:nt,getGeom:it,getType:ot}),at=Object.getOwnPropertySymbols,ut=Object.prototype.hasOwnProperty,lt=Object.prototype.propertyIsEnumerable;
/*
    object-assign
    (c) Sindre Sorhus
    @license MIT
    */function ct(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var ht=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(t){n[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var r,n,i=ct(t),o=1;o<arguments.length;o++){for(var s in r=Object(arguments[o]))ut.call(r,s)&&(i[s]=r[s]);if(at){n=at(r);for(var a=0;a<n.length;a++)lt.call(r,n[a])&&(i[n[a]]=r[n[a]])}}return i},ft={successCallback:null,verbose:!1},pt={};
/**
     * @license GNU Affero General Public License.
     * Copyright (c) 2015, 2015 Ronny Lorenz <ronny@tbi.univie.ac.at>
     * v. 1.2.0
     * https://github.com/RaumZeit/MarchingSquares.js
     *
     * MarchingSquaresJS is free software: you can redistribute it and/or modify
     * it under the terms of the GNU Affero General Public License as published by
     * the Free Software Foundation, either version 3 of the License, or
     * (at your option) any later version.
     *
     * MarchingSquaresJS is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     * GNU Affero General Public License for more details.
     *
     * As additional permission under GNU Affero General Public License version 3
     * section 7, third-party projects (personal or commercial) may distribute,
     * include, or link against UNMODIFIED VERSIONS of MarchingSquaresJS without the
     * requirement that said third-party project for that reason alone becomes
     * subject to any requirement of the GNU Affero General Public License version 3.
     * Any modifications to MarchingSquaresJS, however, must be shared with the public
     * and made available.
     *
     * In summary this:
     * - allows you to use MarchingSquaresJS at no cost
     * - allows you to use MarchingSquaresJS for both personal and commercial purposes
     * - allows you to distribute UNMODIFIED VERSIONS of MarchingSquaresJS under any
     *   license as long as this license notice is included
     * - enables you to keep the source code of your program that uses MarchingSquaresJS
     *   undisclosed
     * - forces you to share any modifications you have made to MarchingSquaresJS,
     *   e.g. bug-fixes
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with MarchingSquaresJS.  If not, see <http://www.gnu.org/licenses/>.
     */function dt(t,e,r){r=r||{};for(var n=Object.keys(ft),i=0;i<n.length;i++){var o=n[i],s=r[o];s=null!=s?s:ft[o],pt[o]=s}pt.verbose&&console.log("MarchingSquaresJS-isoContours: computing isocontour for "+e);var a=function(t){var e=[],r=0,n=1e-7;return t.cells.forEach(function(i,o){i.forEach(function(i,s){if(void 0!==i&&(5!==(p=i).cval&&10!==p.cval)&&!vt(i)){var a=function(t,e,r){var n,i,o=t.length,s=[],a=[0,0,1,1,0,0,0,0,-1,0,1,1,-1,0,-1,0],u=[0,-1,0,0,1,1,1,1,0,-1,0,0,0,-1,0,0],l=["none","left","bottom","left","right","none","bottom","left","top","top","none","top","right","right","bottom","none"],c=["none","bottom","right","right","top","top","top","top","left","bottom","right","right","left","bottom","left","none"],h=t[e][r],f=h.cval,p=l[f],d=mt(h,p);s.push([r+d[0],e+d[1]]),p=c[f],d=mt(h,p),s.push([r+d[0],e+d[1]]),gt(h);var y=r+a[f],v=e+u[f],g=f;for(;y>=0&&v>=0&&v<o&&(y!=r||v!=e)&&void 0!==(h=t[v][y]);){if(0===(f=h.cval)||15===f)return{path:s,info:"mergeable"};p=c[f],n=a[f],i=u[f],5!==f&&10!==f||(5===f?h.flipped?-1===u[g]?(p="left",n=-1,i=0):(p="right",n=1,i=0):-1===a[g]&&(p="bottom",n=0,i=-1):10===f&&(h.flipped?-1===a[g]?(p="top",n=0,i=1):(p="bottom",n=0,i=-1):1===u[g]&&(p="left",n=-1,i=0))),d=mt(h,p),s.push([y+d[0],v+d[1]]),gt(h),y+=n,v+=i,g=f}return{path:s,info:"closed"}}(t.cells,o,s),u=!1;if("mergeable"===a.info)for(var l=a.path[a.path.length-1][0],c=a.path[a.path.length-1][1],h=r-1;h>=0;h--)if(Math.abs(e[h][0][0]-l)<=n&&Math.abs(e[h][0][1]-c)<=n){for(var f=a.path.length-2;f>=0;--f)e[h].unshift(a.path[f]);u=!0;break}u||(e[r++]=a.path)}var p})}),e}(function(t,e){for(var r=t.length-1,n=t[0].length-1,i={rows:r,cols:n,cells:[]},o=0;o<r;++o){i.cells[o]=[];for(var s=0;s<n;++s){var a=0,u=t[o+1][s],l=t[o+1][s+1],c=t[o][s+1],h=t[o][s];if(!(isNaN(u)||isNaN(l)||isNaN(c)||isNaN(h))){a|=u>=e?8:0,a|=l>=e?4:0,a|=c>=e?2:0;var f,p,d,y,v=!1;if(5===(a|=h>=e?1:0)||10===a){var g=(u+l+c+h)/4;5===a&&g<e?(a=10,v=!0):10===a&&g<e&&(a=5,v=!0)}if(0!==a&&15!==a)f=p=d=y=.5,1===a?(d=1-yt(e,u,h),p=1-yt(e,c,h)):2===a?(p=yt(e,h,c),y=1-yt(e,l,c)):3===a?(d=1-yt(e,u,h),y=1-yt(e,l,c)):4===a?(f=yt(e,u,l),y=yt(e,c,l)):5===a?(f=yt(e,u,l),y=yt(e,c,l),p=1-yt(e,c,h),d=1-yt(e,u,h)):6===a?(p=yt(e,h,c),f=yt(e,u,l)):7===a?(d=1-yt(e,u,h),f=yt(e,u,l)):8===a?(d=yt(e,h,u),f=1-yt(e,l,u)):9===a?(p=1-yt(e,c,h),f=1-yt(e,l,u)):10===a?(f=1-yt(e,l,u),y=1-yt(e,l,c),p=yt(e,h,c),d=yt(e,h,u)):11===a?(f=1-yt(e,l,u),y=1-yt(e,l,c)):12===a?(d=yt(e,h,u),y=yt(e,c,l)):13===a?(p=1-yt(e,c,h),y=yt(e,c,l)):14===a?(d=yt(e,h,u),p=yt(e,h,c)):console.log("MarchingSquaresJS-isoContours: Illegal cval detected: "+a),i.cells[o][s]={cval:a,flipped:v,top:f,right:y,bottom:p,left:d}}}}return i}(t,e));return"function"==typeof pt.successCallback&&pt.successCallback(a),a}function yt(t,e,r){return(t-e)/(r-e)}function vt(t){return 0===t.cval||15===t.cval}function gt(t){vt(t)||5===t.cval||10===t.cval||(t.cval=15)}function mt(t,e){return"top"===e?[t.top,1]:"bottom"===e?[t.bottom,0]:"right"===e?[1,t.right]:"left"===e?[0,t.left]:void 0}function _t(t,e){if(!L(e=e||{}))throw new Error("options is invalid");var r=e.zProperty||"elevation",n=e.flip,i=e.flags;nt(t,"Point","input must contain Points");for(var o=function(t,e){var r={};return k(t,function(t){var e=$(t)[1];r[e]||(r[e]=[]),r[e].push(t)}),Object.keys(r).map(function(t){return r[t].sort(function(t,e){return $(t)[0]-$(e)[0]})}).sort(function(t,r){return e?$(t[0])[1]-$(r[0])[1]:$(r[0])[1]-$(t[0])[1]})}(t,n),s=[],a=0;a<o.length;a++){for(var u=o[a],l=[],c=0;c<u.length;c++){var h=u[c];h.properties[r]?l.push(h.properties[r]):l.push(0),!0===i&&(h.properties.matrixPosition=[a,c])}s.push(l)}return s}var bt=St,xt=St;function St(t,e,r,n,i){wt(t,e,r||0,n||t.length-1,i||It)}function wt(t,e,r,n,i){for(;n>r;){if(n-r>600){var o=n-r+1,s=e-r+1,a=Math.log(o),u=.5*Math.exp(2*a/3),l=.5*Math.sqrt(a*u*(o-u)/o)*(s-o/2<0?-1:1);wt(t,e,Math.max(r,Math.floor(e-s*u/o+l)),Math.min(n,Math.floor(e+(o-s)*u/o+l)),i)}var c=t[e],h=r,f=n;for(Ct(t,r,e),i(t[n],c)>0&&Ct(t,r,n);h<f;){for(Ct(t,h,f),h++,f--;i(t[h],c)<0;)h++;for(;i(t[f],c)>0;)f--}0===i(t[r],c)?Ct(t,r,f):Ct(t,++f,n),f<=e&&(r=f+1),e<=f&&(n=f-1)}}function Ct(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function It(t,e){return t<e?-1:t>e?1:0}bt.default=xt;var Et=Mt,Pt=Mt;function Mt(t,e){if(!(this instanceof Mt))return new Mt(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function Lt(t,e,r){if(!r)return e.indexOf(t);for(var n=0;n<e.length;n++)if(r(t,e[n]))return n;return-1}function Nt(t,e){Tt(t,0,t.children.length,e,t)}function Tt(t,e,r,n,i){i||(i=Gt(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o,s=e;s<r;s++)o=t.children[s],Ot(i,t.leaf?n(o):o);return i}function Ot(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function At(t,e){return t.minX-e.minX}function Rt(t,e){return t.minY-e.minY}function Ft(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function Dt(t){return t.maxX-t.minX+(t.maxY-t.minY)}function kt(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function jt(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function Gt(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Bt(t,e,r,n,i){for(var o,s=[e,r];s.length;)(r=s.pop())-(e=s.pop())<=n||(o=e+Math.ceil((r-e)/n/2)*n,bt(t,o,e,r,i),s.push(e,o,o,r))}function Ut(t){var e={exports:{}};return t(e,e.exports),e.exports}Mt.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,r=[],n=this.toBBox;if(!jt(t,e))return r;for(var i,o,s,a,u=[];e;){for(i=0,o=e.children.length;i<o;i++)s=e.children[i],jt(t,a=e.leaf?n(s):s)&&(e.leaf?r.push(s):kt(t,a)?this._all(s,r):u.push(s));e=u.pop()}return r},collides:function(t){var e=this.data,r=this.toBBox;if(!jt(t,e))return!1;for(var n,i,o,s,a=[];e;){for(n=0,i=e.children.length;n<i;n++)if(o=e.children[n],jt(t,s=e.leaf?r(o):o)){if(e.leaf||kt(t,s))return!0;a.push(o)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,r=t.length;e<r;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var i=this.data;this.data=n,n=i}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=Gt([]),this},remove:function(t,e){if(!t)return this;for(var r,n,i,o,s=this.data,a=this.toBBox(t),u=[],l=[];s||u.length;){if(s||(s=u.pop(),n=u[u.length-1],r=l.pop(),o=!0),s.leaf&&-1!==(i=Lt(t,s.children,e)))return s.children.splice(i,1),u.push(s),this._condense(u),this;o||s.leaf||!kt(s,a)?n?(r++,s=n.children[r],o=!1):s=null:(u.push(s),l.push(r),r=0,n=s,s=s.children[0])}return this},toBBox:function(t){return t},compareMinX:At,compareMinY:Rt,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var r=[];t;)t.leaf?e.push.apply(e,t.children):r.push.apply(r,t.children),t=r.pop();return e},_build:function(t,e,r,n){var i,o=r-e+1,s=this._maxEntries;if(o<=s)return Nt(i=Gt(t.slice(e,r+1)),this.toBBox),i;n||(n=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,n-1))),(i=Gt([])).leaf=!1,i.height=n;var a,u,l,c,h=Math.ceil(o/s),f=h*Math.ceil(Math.sqrt(s));for(Bt(t,e,r,f,this.compareMinX),a=e;a<=r;a+=f)for(Bt(t,a,l=Math.min(a+f-1,r),h,this.compareMinY),u=a;u<=l;u+=h)c=Math.min(u+h-1,l),i.children.push(this._build(t,u,c,n-1));return Nt(i,this.toBBox),i},_chooseSubtree:function(t,e,r,n){for(var i,o,s,a,u,l,c,h,f,p;n.push(e),!e.leaf&&n.length-1!==r;){for(c=h=1/0,i=0,o=e.children.length;i<o;i++)u=Ft(s=e.children[i]),f=t,p=s,(l=(Math.max(p.maxX,f.maxX)-Math.min(p.minX,f.minX))*(Math.max(p.maxY,f.maxY)-Math.min(p.minY,f.minY))-u)<h?(h=l,c=u<c?u:c,a=s):l===h&&u<c&&(c=u,a=s);e=a||e.children[0]}return e},_insert:function(t,e,r){var n=this.toBBox,i=r?t:n(t),o=[],s=this._chooseSubtree(i,this.data,e,o);for(s.children.push(t),Ot(s,i);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(i,o,e)},_split:function(t,e){var r=t[e],n=r.children.length,i=this._minEntries;this._chooseSplitAxis(r,i,n);var o=this._chooseSplitIndex(r,i,n),s=Gt(r.children.splice(o,r.children.length-o));s.height=r.height,s.leaf=r.leaf,Nt(r,this.toBBox),Nt(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(r,s)},_splitRoot:function(t,e){this.data=Gt([t,e]),this.data.height=t.height+1,this.data.leaf=!1,Nt(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,r){var n,i,o,s,a,u,l,c,h,f,p,d,y,v;for(u=l=1/0,n=e;n<=r-e;n++)i=Tt(t,0,n,this.toBBox),o=Tt(t,n,r,this.toBBox),h=i,f=o,p=void 0,d=void 0,y=void 0,v=void 0,p=Math.max(h.minX,f.minX),d=Math.max(h.minY,f.minY),y=Math.min(h.maxX,f.maxX),v=Math.min(h.maxY,f.maxY),s=Math.max(0,y-p)*Math.max(0,v-d),a=Ft(i)+Ft(o),s<u?(u=s,c=n,l=a<l?a:l):s===u&&a<l&&(l=a,c=n);return c},_chooseSplitAxis:function(t,e,r){var n=t.leaf?this.compareMinX:At,i=t.leaf?this.compareMinY:Rt;this._allDistMargin(t,e,r,n)<this._allDistMargin(t,e,r,i)&&t.children.sort(n)},_allDistMargin:function(t,e,r,n){t.children.sort(n);var i,o,s=this.toBBox,a=Tt(t,0,e,s),u=Tt(t,r-e,r,s),l=Dt(a)+Dt(u);for(i=e;i<r-e;i++)o=t.children[i],Ot(a,t.leaf?s(o):o),l+=Dt(a);for(i=r-e-1;i>=e;i--)o=t.children[i],Ot(u,t.leaf?s(o):o),l+=Dt(u);return l},_adjustParentBBoxes:function(t,e,r){for(var n=r;n>=0;n--)Ot(e[n],t)},_condense:function(t){for(var e,r=t.length-1;r>=0;r--)0===t[r].children.length?r>0?(e=t[r-1].children).splice(e.indexOf(t[r]),1):this.clear():Nt(t[r],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}},Et.default=Pt;var qt=function(t,e,r){var n=t*e,i=zt*t,o=i-(i-t),s=t-o,a=zt*e,u=a-(a-e),l=e-u,c=s*l-(n-o*u-s*u-o*l);if(r)return r[0]=c,r[1]=n,r;return[c,n]},zt=+(Math.pow(2,27)+1);var Vt=function(t,e){var r=0|t.length,n=0|e.length;if(1===r&&1===n)return function(t,e){var r=t+e,n=r-t,i=t-(r-n)+(e-n);if(i)return[i,r];return[r]}(t[0],e[0]);var i,o,s=new Array(r+n),a=0,u=0,l=0,c=Math.abs,h=t[u],f=c(h),p=e[l],d=c(p);f<d?(o=h,(u+=1)<r&&(h=t[u],f=c(h))):(o=p,(l+=1)<n&&(p=e[l],d=c(p)));u<r&&f<d||l>=n?(i=h,(u+=1)<r&&(h=t[u],f=c(h))):(i=p,(l+=1)<n&&(p=e[l],d=c(p)));var y,v,g=i+o,m=g-i,_=o-m,b=_,x=g;for(;u<r&&l<n;)f<d?(i=h,(u+=1)<r&&(h=t[u],f=c(h))):(i=p,(l+=1)<n&&(p=e[l],d=c(p))),(_=(o=b)-(m=(g=i+o)-i))&&(s[a++]=_),b=x-((y=x+g)-(v=y-x))+(g-v),x=y;for(;u<r;)(_=(o=b)-(m=(g=(i=h)+o)-i))&&(s[a++]=_),b=x-((y=x+g)-(v=y-x))+(g-v),x=y,(u+=1)<r&&(h=t[u]);for(;l<n;)(_=(o=b)-(m=(g=(i=p)+o)-i))&&(s[a++]=_),b=x-((y=x+g)-(v=y-x))+(g-v),x=y,(l+=1)<n&&(p=e[l]);b&&(s[a++]=b);x&&(s[a++]=x);a||(s[a++]=0);return s.length=a,s};var Wt=function(t,e,r){var n=t+e,i=n-t,o=e-i,s=t-(n-i);if(r)return r[0]=s+o,r[1]=n,r;return[s+o,n]};var Ht=function(t,e){var r=t.length;if(1===r){var n=qt(t[0],e);return n[0]?n:[n[1]]}var i=new Array(2*r),o=[.1,.1],s=[.1,.1],a=0;qt(t[0],e,o),o[0]&&(i[a++]=o[0]);for(var u=1;u<r;++u){qt(t[u],e,s);var l=o[1];Wt(l,s[0],o),o[0]&&(i[a++]=o[0]);var c=s[1],h=o[1],f=c+h,p=h-(f-c);o[1]=f,p&&(i[a++]=p)}o[1]&&(i[a++]=o[1]);0===a&&(i[a++]=0);return i.length=a,i};var Xt=function(t,e){var r=0|t.length,n=0|e.length;if(1===r&&1===n)return function(t,e){var r=t+e,n=r-t,i=t-(r-n)+(e-n);if(i)return[i,r];return[r]}(t[0],-e[0]);var i,o,s=new Array(r+n),a=0,u=0,l=0,c=Math.abs,h=t[u],f=c(h),p=-e[l],d=c(p);f<d?(o=h,(u+=1)<r&&(h=t[u],f=c(h))):(o=p,(l+=1)<n&&(p=-e[l],d=c(p)));u<r&&f<d||l>=n?(i=h,(u+=1)<r&&(h=t[u],f=c(h))):(i=p,(l+=1)<n&&(p=-e[l],d=c(p)));var y,v,g=i+o,m=g-i,_=o-m,b=_,x=g;for(;u<r&&l<n;)f<d?(i=h,(u+=1)<r&&(h=t[u],f=c(h))):(i=p,(l+=1)<n&&(p=-e[l],d=c(p))),(_=(o=b)-(m=(g=i+o)-i))&&(s[a++]=_),b=x-((y=x+g)-(v=y-x))+(g-v),x=y;for(;u<r;)(_=(o=b)-(m=(g=(i=h)+o)-i))&&(s[a++]=_),b=x-((y=x+g)-(v=y-x))+(g-v),x=y,(u+=1)<r&&(h=t[u]);for(;l<n;)(_=(o=b)-(m=(g=(i=p)+o)-i))&&(s[a++]=_),b=x-((y=x+g)-(v=y-x))+(g-v),x=y,(l+=1)<n&&(p=-e[l]);b&&(s[a++]=b);x&&(s[a++]=x);a||(s[a++]=0);return s.length=a,s};var Zt=Ut(function(t){function e(t,e){for(var r=new Array(t.length-1),n=1;n<t.length;++n)for(var i=r[n-1]=new Array(t.length-1),o=0,s=0;o<t.length;++o)o!==e&&(i[s++]=t[n][o]);return r}function r(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",r(t.slice(0,e)),",",r(t.slice(e)),")"].join("")}function n(t){if(2===t.length)return[["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("")];for(var i=[],o=0;o<t.length;++o)i.push(["scale(",r(n(e(t,o))),",",(s=o,1&s?"-":""),t[0][o],")"].join(""));return i;var s}function i(t){for(var i=[],o=[],s=function(t){for(var e=new Array(t),r=0;r<t;++r){e[r]=new Array(t);for(var n=0;n<t;++n)e[r][n]=["m",n,"[",t-r-1,"]"].join("")}return e}(t),a=[],u=0;u<t;++u)0==(1&u)?i.push.apply(i,n(e(s,u))):o.push.apply(o,n(e(s,u))),a.push("m"+u);var l=r(i),c=r(o),h="orientation"+t+"Exact",f=["function ",h,"(",a.join(),"){var p=",l,",n=",c,",d=sub(p,n);return d[d.length-1];};return ",h].join("");return new Function("sum","prod","scale","sub",f)(Vt,qt,Ht,Xt)}var o=i(3),s=i(4),a=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,r){var n,i=(t[1]-r[1])*(e[0]-r[0]),s=(t[0]-r[0])*(e[1]-r[1]),a=i-s;if(i>0){if(s<=0)return a;n=i+s}else{if(!(i<0))return a;if(s>=0)return a;n=-(i+s)}var u=3.3306690738754716e-16*n;return a>=u||a<=-u?a:o(t,e,r)},function(t,e,r,n){var i=t[0]-n[0],o=e[0]-n[0],a=r[0]-n[0],u=t[1]-n[1],l=e[1]-n[1],c=r[1]-n[1],h=t[2]-n[2],f=e[2]-n[2],p=r[2]-n[2],d=o*c,y=a*l,v=a*u,g=i*c,m=i*l,_=o*u,b=h*(d-y)+f*(v-g)+p*(m-_),x=7.771561172376103e-16*((Math.abs(d)+Math.abs(y))*Math.abs(h)+(Math.abs(v)+Math.abs(g))*Math.abs(f)+(Math.abs(m)+Math.abs(_))*Math.abs(p));return b>x||-b>x?b:s(t,e,r,n)}];function u(t){var e=a[t.length];return e||(e=a[t.length]=i(t.length)),e.apply(void 0,t)}!function(){for(;a.length<=5;)a.push(i(a.length));for(var e=[],r=["slow"],n=0;n<=5;++n)e.push("a"+n),r.push("o"+n);var o=["function getOrientation(",e.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(n=2;n<=5;++n)o.push("case ",n,":return o",n,"(",e.slice(0,n).join(),");");o.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),r.push(o.join(""));var s=Function.apply(void 0,r);for(t.exports=s.apply(void 0,[u].concat(a)),n=0;n<=5;++n)t.exports[n]=a[n]}()}),Yt=function(t){var e=t.length;if(e<3){for(var r=new Array(e),n=0;n<e;++n)r[n]=n;return 2===e&&t[0][0]===t[1][0]&&t[0][1]===t[1][1]?[0]:r}var i=new Array(e);for(n=0;n<e;++n)i[n]=n;i.sort(function(e,r){var n=t[e][0]-t[r][0];return n||t[e][1]-t[r][1]});var o=[i[0],i[1]],s=[i[0],i[1]];for(n=2;n<e;++n){for(var a=i[n],u=t[a],l=o.length;l>1&&Jt(t[o[l-2]],t[o[l-1]],u)<=0;)l-=1,o.pop();for(o.push(a),l=s.length;l>1&&Jt(t[s[l-2]],t[s[l-1]],u)>=0;)l-=1,s.pop();s.push(a)}r=new Array(s.length+o.length-2);for(var c=0,h=(n=0,o.length);n<h;++n)r[c++]=o[n];for(var f=s.length-2;f>0;--f)r[c++]=s[f];return r},Jt=Zt[3];var Qt=$t,Kt=$t;function $t(t,e){if(!(this instanceof $t))return new $t(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||te,this.length>0)for(var r=(this.length>>1)-1;r>=0;r--)this._down(r)}function te(t,e){return t<e?-1:t>e?1:0}$t.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,r=this.compare,n=e[t];t>0;){var i=t-1>>1,o=e[i];if(r(n,o)>=0)break;e[t]=o,t=i}e[t]=n},_down:function(t){for(var e=this.data,r=this.compare,n=this.length>>1,i=e[t];t<n;){var o=1+(t<<1),s=o+1,a=e[o];if(s<this.length&&r(e[s],a)<0&&(o=s,a=e[s]),r(a,i)>=0)break;e[t]=a,t=o}e[t]=i}},Qt.default=Kt;var ee=function(t,e){for(var r=t[0],n=t[1],i=!1,o=0,s=e.length-1;o<e.length;s=o++){var a=e[o][0],u=e[o][1],l=e[s][0],c=e[s][1];u>n!=c>n&&r<(l-a)*(n-u)/(c-u)+a&&(i=!i)}return i},re=Zt[3],ne=oe,ie=oe;function oe(t,e,r){e=Math.max(0,void 0===e?2:e),r=r||0;for(var n,i=function(t){for(var e=t[0],r=t[0],n=t[0],i=t[0],o=0;o<t.length;o++){var s=t[o];s[0]<e[0]&&(e=s),s[0]>n[0]&&(n=s),s[1]<r[1]&&(r=s),s[1]>i[1]&&(i=s)}var a=[e,r,n,i],u=a.slice();for(o=0;o<t.length;o++)ee(t[o],a)||u.push(t[o]);var l=Yt(u),c=[];for(o=0;o<l.length;o++)c.push(u[l[o]]);return c}(t),o=Et(16,["[0]","[1]","[0]","[1]"]).load(t),s=[],a=0;a<i.length;a++){var u=i[a];o.remove(u),n=fe(u,n),s.push(n)}var l=Et(16);for(a=0;a<s.length;a++)l.insert(he(s[a]));for(var c=e*e,h=r*r;s.length;){var f=s.shift(),p=f.p,d=f.next.p,y=pe(p,d);if(!(y<h)){var v=y/c;(u=se(o,f.prev.p,p,d,f.next.next.p,v,l))&&Math.min(pe(u,p),pe(u,d))<=v&&(s.push(f),s.push(fe(u,f)),o.remove(u),l.remove(f),l.insert(he(f)),l.insert(he(f.next)))}}f=n;var g=[];do{g.push(f.p),f=f.next}while(f!==n);return g.push(f.p),g}function se(t,e,r,n,i,o,s){for(var a=new Qt(null,ae),u=t.data;u;){for(var l=0;l<u.children.length;l++){var c=u.children[l],h=u.leaf?de(c,r,n):ue(r,n,c);h>o||a.push({node:c,dist:h})}for(;a.length&&!a.peek().node.children;){var f=a.pop(),p=f.node,d=de(p,e,r),y=de(p,n,i);if(f.dist<d&&f.dist<y&&ce(r,p,s)&&ce(n,p,s))return p}(u=a.pop())&&(u=u.node)}return null}function ae(t,e){return t.dist-e.dist}function ue(t,e,r){if(le(t,r)||le(e,r))return 0;var n=ye(t[0],t[1],e[0],e[1],r.minX,r.minY,r.maxX,r.minY);if(0===n)return 0;var i=ye(t[0],t[1],e[0],e[1],r.minX,r.minY,r.minX,r.maxY);if(0===i)return 0;var o=ye(t[0],t[1],e[0],e[1],r.maxX,r.minY,r.maxX,r.maxY);if(0===o)return 0;var s=ye(t[0],t[1],e[0],e[1],r.minX,r.maxY,r.maxX,r.maxY);return 0===s?0:Math.min(n,i,o,s)}function le(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function ce(t,e,r){for(var n,i,o,s,a=Math.min(t[0],e[0]),u=Math.min(t[1],e[1]),l=Math.max(t[0],e[0]),c=Math.max(t[1],e[1]),h=r.search({minX:a,minY:u,maxX:l,maxY:c}),f=0;f<h.length;f++)if(n=h[f].p,i=h[f].next.p,o=t,n!==(s=e)&&i!==o&&re(n,i,o)>0!=re(n,i,s)>0&&re(o,s,n)>0!=re(o,s,i)>0)return!1;return!0}function he(t){var e=t.p,r=t.next.p;return t.minX=Math.min(e[0],r[0]),t.minY=Math.min(e[1],r[1]),t.maxX=Math.max(e[0],r[0]),t.maxY=Math.max(e[1],r[1]),t}function fe(t,e){var r={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(r.next=e.next,r.prev=e,e.next.prev=r,e.next=r):(r.prev=r,r.next=r),r}function pe(t,e){var r=t[0]-e[0],n=t[1]-e[1];return r*r+n*n}function de(t,e,r){var n=e[0],i=e[1],o=r[0]-n,s=r[1]-i;if(0!==o||0!==s){var a=((t[0]-n)*o+(t[1]-i)*s)/(o*o+s*s);a>1?(n=r[0],i=r[1]):a>0&&(n+=o*a,i+=s*a)}return(o=t[0]-n)*o+(s=t[1]-i)*s}function ye(t,e,r,n,i,o,s,a){var u,l,c,h,f=r-t,p=n-e,d=s-i,y=a-o,v=t-i,g=e-o,m=f*f+p*p,_=f*d+p*y,b=d*d+y*y,x=f*v+p*g,S=d*v+y*g,w=m*b-_*_,C=w,I=w;0===w?(l=0,C=1,h=S,I=b):(h=m*S-_*x,(l=_*S-b*x)<0?(l=0,h=S,I=b):l>C&&(l=C,h=S+_,I=b)),h<0?(h=0,-x<0?l=0:-x>m?l=C:(l=-x,C=m)):h>I&&(h=I,-x+_<0?l=0:-x+_>m?l=C:(l=-x+_,C=m));var E=(1-(c=0===h?0:h/I))*i+c*s-((1-(u=0===l?0:l/C))*t+u*r),P=(1-c)*o+c*a-((1-u)*e+u*n);return E*E+P*P}function ve(t,e){void 0===e&&(e={}),e.concavity=e.concavity||1/0;var r=[];if(A(t,function(t){r.push([t[0],t[1]])}),!r.length)return null;var n=ne(r,e.concavity);return n.length>3?c([n]):null}function ge(t,e,r){if(void 0===r&&(r={}),!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var n=K(t),i=it(e),o=i.type,s=e.bbox,a=i.coordinates;if(s&&!1===function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(n,s))return!1;"Polygon"===o&&(a=[a]);for(var u=!1,l=0;l<a.length&&!u;l++)if(me(n,a[l][0],r.ignoreBoundary)){for(var c=!1,h=1;h<a[l].length&&!c;)me(n,a[l][h],!r.ignoreBoundary)&&(c=!0),h++;c||(u=!0)}return u}function me(t,e,r){var n=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var i=0,o=e.length-1;i<e.length;o=i++){var s=e[i][0],a=e[i][1],u=e[o][0],l=e[o][1];if(t[1]*(s-u)+a*(u-t[0])+l*(t[0]-s)==0&&(s-t[0])*(u-t[0])<=0&&(a-t[1])*(l-t[1])<=0)return!r;a>t[1]!=l>t[1]&&t[0]<(u-s)*(t[1]-a)/(l-a)+s&&(n=!n)}return n}function _e(t,e){var r=[];return k(t,function(t){var n=!1;if("Point"===t.geometry.type)B(e,function(e){ge(t,e)&&(n=!0)}),n&&r.push(t);else{if("MultiPoint"!==t.geometry.type)throw new Error("Input geometry must be a Point or MultiPoint");var i=[];B(e,function(e){A(t,function(t){ge(t,e)&&(n=!0,i.push(t))})}),n&&r.push(v(i))}}),d(r)}function be(t,e,r){void 0===r&&(r={});var n=K(t),i=K(e),o=I(i[1]-n[1]),s=I(i[0]-n[0]),a=I(n[1]),u=I(i[1]),l=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(s/2),2)*Math.cos(a)*Math.cos(u);return b(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)),r.units)}function xe(t,e){var r=!1;return d(function(t){if(t.length<3)return[];t.sort(we);var e,r,n,i,o,s,a=t.length-1,u=t[a].x,l=t[0].x,c=t[a].y,h=c,f=1e-12;for(;a--;)t[a].y<c&&(c=t[a].y),t[a].y>h&&(h=t[a].y);var p,d=l-u,y=h-c,v=d>y?d:y,g=.5*(l+u),m=.5*(h+c),_=[new Se({__sentinel:!0,x:g-20*v,y:m-v},{__sentinel:!0,x:g,y:m+20*v},{__sentinel:!0,x:g+20*v,y:m-v})],b=[],x=[];a=t.length;for(;a--;){for(x.length=0,p=_.length;p--;)(d=t[a].x-_[p].x)>0&&d*d>_[p].r?(b.push(_[p]),_.splice(p,1)):d*d+(y=t[a].y-_[p].y)*y>_[p].r||(x.push(_[p].a,_[p].b,_[p].b,_[p].c,_[p].c,_[p].a),_.splice(p,1));for(Ce(x),p=x.length;p;)r=x[--p],e=x[--p],n=t[a],i=r.x-e.x,o=r.y-e.y,s=2*(i*(n.y-r.y)-o*(n.x-r.x)),Math.abs(s)>f&&_.push(new Se(e,r,n))}Array.prototype.push.apply(b,_),a=b.length;for(;a--;)(b[a].a.__sentinel||b[a].b.__sentinel||b[a].c.__sentinel)&&b.splice(a,1);return b}(t.features.map(function(t){var n={x:t.geometry.coordinates[0],y:t.geometry.coordinates[1]};return e?n.z=t.properties[e]:3===t.geometry.coordinates.length&&(r=!0,n.z=t.geometry.coordinates[2]),n})).map(function(t){var e=[t.a.x,t.a.y],n=[t.b.x,t.b.y],i=[t.c.x,t.c.y],o={};return r?(e.push(t.a.z),n.push(t.b.z),i.push(t.c.z)):o={a:t.a.z,b:t.b.z,c:t.c.z},c([[e,n,i,e]],o)}))}ne.default=ie;var Se=function(t,e,r){this.a=t,this.b=e,this.c=r;var n,i,o=e.x-t.x,s=e.y-t.y,a=r.x-t.x,u=r.y-t.y,l=o*(t.x+e.x)+s*(t.y+e.y),c=a*(t.x+r.x)+u*(t.y+r.y),h=2*(o*(r.y-e.y)-s*(r.x-e.x));this.x=(u*l-s*c)/h,this.y=(o*c-a*l)/h,n=this.x-t.x,i=this.y-t.y,this.r=n*n+i*i};function we(t,e){return e.x-t.x}function Ce(t){var e,r,n,i,o,s=t.length;t:for(;s;)for(r=t[--s],e=t[--s],n=s;n;)if(o=t[--n],e===(i=t[--n])&&r===o||e===o&&r===i){t.splice(s,2),t.splice(n,2),s-=2;continue t}}function Ie(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return Ee(t);case"FeatureCollection":return function(t){var e={type:"FeatureCollection"};return Object.keys(t).forEach(function(r){switch(r){case"type":case"features":return;default:e[r]=t[r]}}),e.features=t.features.map(function(t){return Ee(t)}),e}(t);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return Me(t);default:throw new Error("unknown GeoJSON type")}}function Ee(t){var e={type:"Feature"};return Object.keys(t).forEach(function(r){switch(r){case"type":case"properties":case"geometry":return;default:e[r]=t[r]}}),e.properties=Pe(t.properties),e.geometry=Me(t.geometry),e}function Pe(t){var e={};return t?(Object.keys(t).forEach(function(r){var n=t[r];"object"==typeof n?null===n?e[r]=null:Array.isArray(n)?e[r]=n.map(function(t){return t}):e[r]=Pe(n):e[r]=n}),e):e}function Me(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?(e.geometries=t.geometries.map(function(t){return Me(t)}),e):(e.coordinates=Le(t.coordinates),e)}function Le(t){var e=t;return"object"!=typeof e[0]?e.slice():e.map(function(t){return Le(t)})}function Ne(t,e){if(void 0===e&&(e={}),!L(e=e||{}))throw new Error("options is invalid");var r=e.mutate;if("FeatureCollection"!==ot(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==r&&void 0!==r||(t=Ie(t));var n=[],i=X(t,function(t,e){var r=function(t,e){var r,n=t.geometry.coordinates,i=e.geometry.coordinates,o=Te(n[0]),s=Te(n[n.length-1]),a=Te(i[0]),u=Te(i[i.length-1]);if(o===u)r=i.concat(n.slice(1));else if(a===s)r=n.concat(i.slice(1));else if(o===a)r=n.slice(1).reverse().concat(i);else{if(s!==u)return null;r=n.concat(i.reverse().slice(1))}return f(r)}(t,e);return r||(n.push(t),e)});return i&&n.push(i),n.length?1===n.length?n[0]:y(n.map(function(t){return t.coordinates})):null}function Te(t){return t[0].toString()+","+t[1].toString()}function Oe(t){return t}function Ae(t,e){var r=function(t){if(null==t)return Oe;var e,r,n=t.scale[0],i=t.scale[1],o=t.translate[0],s=t.translate[1];return function(t,a){a||(e=r=0);var u=2,l=t.length,c=new Array(l);for(c[0]=(e+=t[0])*n+o,c[1]=(r+=t[1])*i+s;u<l;)c[u]=t[u],++u;return c}}(t.transform),n=t.arcs;function i(t,e){e.length&&e.pop();for(var i=n[t<0?~t:t],o=0,s=i.length;o<s;++o)e.push(r(i[o],o));t<0&&function(t,e){for(var r,n=t.length,i=n-e;i<--n;)r=t[i],t[i++]=t[n],t[n]=r}(e,s)}function o(t){return r(t)}function s(t){for(var e=[],r=0,n=t.length;r<n;++r)i(t[r],e);return e.length<2&&e.push(e[0]),e}function a(t){for(var e=s(t);e.length<4;)e.push(e[0]);return e}function u(t){return t.map(a)}return function t(e){var r,n=e.type;switch(n){case"GeometryCollection":return{type:n,geometries:e.geometries.map(t)};case"Point":r=o(e.coordinates);break;case"MultiPoint":r=e.coordinates.map(o);break;case"LineString":r=s(e.arcs);break;case"MultiLineString":r=e.arcs.map(s);break;case"Polygon":r=u(e.arcs);break;case"MultiPolygon":r=e.arcs.map(u);break;default:return null}return{type:n,coordinates:r}}(e)}function Re(t,e){var r={},n={},i={},o=[],s=-1;function a(t,e){for(var n in t){var i=t[n];delete e[i.start],delete i.start,delete i.end,i.forEach(function(t){r[t<0?~t:t]=1}),o.push(i)}}return e.forEach(function(r,n){var i,o=t.arcs[r<0?~r:r];o.length<3&&!o[1][0]&&!o[1][1]&&(i=e[++s],e[s]=r,e[n]=i)}),e.forEach(function(e){var r,o,s=function(e){var r,n=t.arcs[e<0?~e:e],i=n[0];t.transform?(r=[0,0],n.forEach(function(t){r[0]+=t[0],r[1]+=t[1]})):r=n[n.length-1];return e<0?[r,i]:[i,r]}(e),a=s[0],u=s[1];if(r=i[a])if(delete i[r.end],r.push(e),r.end=u,o=n[u]){delete n[o.start];var l=o===r?r:r.concat(o);n[l.start=r.start]=i[l.end=o.end]=l}else n[r.start]=i[r.end]=r;else if(r=n[u])if(delete n[r.start],r.unshift(e),r.start=a,o=i[a]){delete i[o.end];var c=o===r?r:o.concat(r);n[c.start=o.start]=i[c.end=r.end]=c}else n[r.start]=i[r.end]=r;else n[(r=[e]).start=a]=i[r.end=u]=r}),a(i,n),a(n,i),e.forEach(function(t){r[t<0?~t:t]||o.push([t])}),o}function Fe(t,e){var r={},n=[],i=[];function o(t){t.forEach(function(e){e.forEach(function(e){(r[e=e<0?~e:e]||(r[e]=[])).push(t)})}),n.push(t)}function s(e){return function(t){for(var e,r=-1,n=t.length,i=t[n-1],o=0;++r<n;)e=i,i=t[r],o+=e[0]*i[1]-e[1]*i[0];return Math.abs(o)}(Ae(t,{type:"Polygon",arcs:[e]}).coordinates[0])}return e.forEach(function t(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"Polygon":o(e.arcs);break;case"MultiPolygon":e.arcs.forEach(o)}}),n.forEach(function(t){if(!t._){var e=[],n=[t];for(t._=1,i.push(e);t=n.pop();)e.push(t),t.forEach(function(t){t.forEach(function(t){r[t<0?~t:t].forEach(function(t){t._||(t._=1,n.push(t))})})})}}),n.forEach(function(t){delete t._}),{type:"MultiPolygon",arcs:i.map(function(e){var n,i=[];if(e.forEach(function(t){t.forEach(function(t){t.forEach(function(t){r[t<0?~t:t].length<2&&i.push(t)})})}),(n=(i=Re(t,i)).length)>1)for(var o,a,u=1,l=s(i[0]);u<n;++u)(o=s(i[u]))>l&&(a=i[0],i[0]=i[u],i[u]=a,l=o);return i}).filter(function(t){return t.length>0})}}var De=Object.prototype.hasOwnProperty;function ke(t,e,r,n,i,o){3===arguments.length&&(n=o=Array,i=null);for(var s=new n(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),a=new o(t),u=t-1,l=0;l<t;++l)s[l]=i;function c(n,o){for(var l=e(n)&u,c=s[l],h=0;c!=i;){if(r(c,n))return a[l]=o;if(++h>=t)throw new Error("full hashmap");c=s[l=l+1&u]}return s[l]=n,a[l]=o,o}function h(n,o){for(var l=e(n)&u,c=s[l],h=0;c!=i;){if(r(c,n))return a[l];if(++h>=t)throw new Error("full hashmap");c=s[l=l+1&u]}return s[l]=n,a[l]=o,o}function f(n,o){for(var l=e(n)&u,c=s[l],h=0;c!=i;){if(r(c,n))return a[l];if(++h>=t)break;c=s[l=l+1&u]}return o}function p(){for(var t=[],e=0,r=s.length;e<r;++e){var n=s[e];n!=i&&t.push(n)}return t}return{set:c,maybeSet:h,get:f,keys:p}}function je(t,e){return t[0]===e[0]&&t[1]===e[1]}var Ge=new ArrayBuffer(16),Be=new Float64Array(Ge),Ue=new Uint32Array(Ge);function qe(t){Be[0]=t[0],Be[1]=t[1];var e=Ue[0]^Ue[1];return 2147483647&(e=e<<5^e>>7^Ue[2]^Ue[3])}function ze(t){var e,r,n,i,o=t.coordinates,s=t.lines,a=t.rings,u=function(){for(var t=ke(1.4*o.length,x,S,Int32Array,-1,Int32Array),e=new Int32Array(o.length),r=0,n=o.length;r<n;++r)e[r]=t.maybeSet(r,r);return e}(),l=new Int32Array(o.length),c=new Int32Array(o.length),h=new Int32Array(o.length),f=new Int8Array(o.length),p=0;for(e=0,r=o.length;e<r;++e)l[e]=c[e]=h[e]=-1;for(e=0,r=s.length;e<r;++e){var d=s[e],y=d[0],v=d[1];for(n=u[y],i=u[++y],++p,f[n]=1;++y<=v;)b(e,n,n=i,i=u[y]);++p,f[i]=1}for(e=0,r=o.length;e<r;++e)l[e]=-1;for(e=0,r=a.length;e<r;++e){var g=a[e],m=g[0]+1,_=g[1];for(b(e,u[_-1],n=u[m-1],i=u[m]);++m<=_;)b(e,n,n=i,i=u[m])}function b(t,e,r,n){if(l[r]!==t){l[r]=t;var i=c[r];if(i>=0){var o=h[r];i===e&&o===n||i===n&&o===e||(++p,f[r]=1)}else c[r]=e,h[r]=n}}function x(t){return qe(o[t])}function S(t,e){return je(o[t],o[e])}l=c=h=null;var w,C=function(t,e,r,n,i){3===arguments.length&&(n=Array,i=null);for(var o=new n(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),s=t-1,a=0;a<t;++a)o[a]=i;function u(n){for(var a=e(n)&s,u=o[a],l=0;u!=i;){if(r(u,n))return!0;if(++l>=t)throw new Error("full hashset");u=o[a=a+1&s]}return o[a]=n,!0}function l(n){for(var a=e(n)&s,u=o[a],l=0;u!=i;){if(r(u,n))return!0;if(++l>=t)break;u=o[a=a+1&s]}return!1}function c(){for(var t=[],e=0,r=o.length;e<r;++e){var n=o[e];n!=i&&t.push(n)}return t}return{add:u,has:l,values:c}}(1.4*p,qe,je);for(e=0,r=o.length;e<r;++e)f[w=u[e]]&&C.add(o[w]);return C}function Ve(t,e,r,n){We(t,e,r),We(t,e,e+n),We(t,e+n,r)}function We(t,e,r){for(var n,i=e+(r---e>>1);e<i;++e,--r)n=t[e],t[e]=t[r],t[r]=n}function He(t){var e,r,n={};for(e in t)n[e]=null==(r=t[e])?{type:null}:("FeatureCollection"===r.type?Xe:"Feature"===r.type?Ze:Ye)(r);return n}function Xe(t){var e={type:"GeometryCollection",geometries:t.features.map(Ze)};return null!=t.bbox&&(e.bbox=t.bbox),e}function Ze(t){var e,r=Ye(t.geometry);for(e in null!=t.id&&(r.id=t.id),null!=t.bbox&&(r.bbox=t.bbox),t.properties){r.properties=t.properties;break}return r}function Ye(t){if(null==t)return{type:null};var e="GeometryCollection"===t.type?{type:"GeometryCollection",geometries:t.geometries.map(Ye)}:"Point"===t.type||"MultiPoint"===t.type?{type:t.type,coordinates:t.coordinates}:{type:t.type,arcs:t.coordinates};return null!=t.bbox&&(e.bbox=t.bbox),e}function Je(t,e){var r=function(t){var e=1/0,r=1/0,n=-1/0,i=-1/0;function o(t){null!=t&&De.call(s,t.type)&&s[t.type](t)}var s={GeometryCollection:function(t){t.geometries.forEach(o)},Point:function(t){a(t.coordinates)},MultiPoint:function(t){t.coordinates.forEach(a)},LineString:function(t){u(t.arcs)},MultiLineString:function(t){t.arcs.forEach(u)},Polygon:function(t){t.arcs.forEach(u)},MultiPolygon:function(t){t.arcs.forEach(l)}};function a(t){var o=t[0],s=t[1];o<e&&(e=o),o>n&&(n=o),s<r&&(r=s),s>i&&(i=s)}function u(t){t.forEach(a)}function l(t){t.forEach(u)}for(var c in t)o(t[c]);return n>=e&&i>=r?[e,r,n,i]:void 0}(t=He(t)),n=e>0&&r&&function(t,e,r){var n=e[0],i=e[1],o=e[2],s=e[3],a=o-n?(r-1)/(o-n):1,u=s-i?(r-1)/(s-i):1;function l(t){return[Math.round((t[0]-n)*a),Math.round((t[1]-i)*u)]}function c(t,e){for(var r,o,s,l,c,h=-1,f=0,p=t.length,d=new Array(p);++h<p;)r=t[h],l=Math.round((r[0]-n)*a),c=Math.round((r[1]-i)*u),l===o&&c===s||(d[f++]=[o=l,s=c]);for(d.length=f;f<e;)f=d.push([d[0][0],d[0][1]]);return d}function h(t){return c(t,2)}function f(t){return c(t,4)}function p(t){return t.map(f)}function d(t){null!=t&&De.call(y,t.type)&&y[t.type](t)}var y={GeometryCollection:function(t){t.geometries.forEach(d)},Point:function(t){t.coordinates=l(t.coordinates)},MultiPoint:function(t){t.coordinates=t.coordinates.map(l)},LineString:function(t){t.arcs=h(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(h)},Polygon:function(t){t.arcs=p(t.arcs)},MultiPolygon:function(t){t.arcs=t.arcs.map(p)}};for(var v in t)d(t[v]);return{scale:[1/a,1/u],translate:[n,i]}}(t,r,e),i=function(t){var e,r,n,i,o=t.coordinates,s=t.lines,a=t.rings,u=s.length+a.length;for(delete t.lines,delete t.rings,n=0,i=s.length;n<i;++n)for(e=s[n];e=e.next;)++u;for(n=0,i=a.length;n<i;++n)for(r=a[n];r=r.next;)++u;var l=ke(2*u*1.4,qe,je),c=t.arcs=[];for(n=0,i=s.length;n<i;++n){e=s[n];do{h(e)}while(e=e.next)}for(n=0,i=a.length;n<i;++n)if((r=a[n]).next)do{h(r)}while(r=r.next);else f(r);function h(t){var e,r,n,i,s,a,u,h;if(n=l.get(e=o[t[0]]))for(u=0,h=n.length;u<h;++u)if(p(i=n[u],t))return t[0]=i[0],void(t[1]=i[1]);if(s=l.get(r=o[t[1]]))for(u=0,h=s.length;u<h;++u)if(d(a=s[u],t))return t[1]=a[0],void(t[0]=a[1]);n?n.push(t):l.set(e,[t]),s?s.push(t):l.set(r,[t]),c.push(t)}function f(t){var e,r,n,i,s;if(r=l.get(o[t[0]]))for(i=0,s=r.length;i<s;++i){if(y(n=r[i],t))return t[0]=n[0],void(t[1]=n[1]);if(v(n,t))return t[0]=n[1],void(t[1]=n[0])}if(r=l.get(e=o[t[0]+g(t)]))for(i=0,s=r.length;i<s;++i){if(y(n=r[i],t))return t[0]=n[0],void(t[1]=n[1]);if(v(n,t))return t[0]=n[1],void(t[1]=n[0])}r?r.push(t):l.set(e,[t]),c.push(t)}function p(t,e){var r=t[0],n=e[0],i=t[1];if(r-i!=n-e[1])return!1;for(;r<=i;++r,++n)if(!je(o[r],o[n]))return!1;return!0}function d(t,e){var r=t[0],n=e[0],i=t[1],s=e[1];if(r-i!=n-s)return!1;for(;r<=i;++r,--s)if(!je(o[r],o[s]))return!1;return!0}function y(t,e){var r=t[0],n=e[0],i=t[1]-r;if(i!==e[1]-n)return!1;for(var s=g(t),a=g(e),u=0;u<i;++u)if(!je(o[r+(u+s)%i],o[n+(u+a)%i]))return!1;return!0}function v(t,e){var r=t[0],n=e[0],i=t[1],s=e[1],a=i-r;if(a!==s-n)return!1;for(var u=g(t),l=a-g(e),c=0;c<a;++c)if(!je(o[r+(c+u)%a],o[s-(c+l)%a]))return!1;return!0}function g(t){for(var e=t[0],r=t[1],n=e,i=n,s=o[n];++n<r;){var a=o[n];(a[0]<s[0]||a[0]===s[0]&&a[1]<s[1])&&(i=n,s=a)}return i-e}return t}(function(t){var e,r,n,i=ze(t),o=t.coordinates,s=t.lines,a=t.rings;for(r=0,n=s.length;r<n;++r)for(var u=s[r],l=u[0],c=u[1];++l<c;)i.has(o[l])&&(e={0:l,1:u[1]},u[1]=l,u=u.next=e);for(r=0,n=a.length;r<n;++r)for(var h=a[r],f=h[0],p=f,d=h[1],y=i.has(o[f]);++p<d;)i.has(o[p])&&(y?(e={0:p,1:h[1]},h[1]=p,h=h.next=e):(Ve(o,f,d,d-p),o[d]=o[f],y=!0,p=f));return t}(function(t){var e=-1,r=[],n=[],i=[];function o(t){t&&De.call(s,t.type)&&s[t.type](t)}var s={GeometryCollection:function(t){t.geometries.forEach(o)},LineString:function(t){t.arcs=a(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(a)},Polygon:function(t){t.arcs=t.arcs.map(u)},MultiPolygon:function(t){t.arcs=t.arcs.map(l)}};function a(t){for(var n=0,o=t.length;n<o;++n)i[++e]=t[n];var s={0:e-o+1,1:e};return r.push(s),s}function u(t){for(var r=0,o=t.length;r<o;++r)i[++e]=t[r];var s={0:e-o+1,1:e};return n.push(s),s}function l(t){return t.map(u)}for(var c in t)o(t[c]);return{type:"Topology",coordinates:i,lines:r,rings:n,objects:t}}(t))),o=i.coordinates,s=ke(1.4*i.arcs.length,Qe,Ke);function a(t){t&&De.call(u,t.type)&&u[t.type](t)}t=i.objects,i.bbox=r,i.arcs=i.arcs.map(function(t,e){return s.set(t,e),o.slice(t[0],t[1]+1)}),delete i.coordinates,o=null;var u={GeometryCollection:function(t){t.geometries.forEach(a)},LineString:function(t){t.arcs=l(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(l)},Polygon:function(t){t.arcs=t.arcs.map(l)},MultiPolygon:function(t){t.arcs=t.arcs.map(c)}};function l(t){var e=[];do{var r=s.get(t);e.push(t[0]<t[1]?r:~r)}while(t=t.next);return e}function c(t){return t.map(l)}for(var h in t)a(t[h]);return n&&(i.transform=n,i.arcs=function(t){for(var e=-1,r=t.length;++e<r;){for(var n,i,o=t[e],s=0,a=1,u=o.length,l=o[0],c=l[0],h=l[1];++s<u;)n=(l=o[s])[0],i=l[1],n===c&&i===h||(o[a++]=[n-c,i-h],c=n,h=i);1===a&&(o[a++]=[0,0]),o.length=a}return t}(i.arcs)),i}function Qe(t){var e,r=t[0],n=t[1];return n<r&&(e=r,r=n,n=e),r+31*n}function Ke(t,e){var r,n=t[0],i=t[1],o=e[0],s=e[1];return i<n&&(r=n,n=i,i=r),s<o&&(r=o,o=s,s=r),n===o&&i===s}function $e(t,e){if(void 0===e&&(e={}),"FeatureCollection"!==ot(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==e.mutate&&void 0!==e.mutate||(t=Ie(t));var r=[];q(t,function(t){r.push(t.geometry)});var n=Je({geoms:m(r).geometry});return function(t){return Ae(t,Fe.apply(this,arguments))}(n,n.objects.geoms.geometries)}function tr(t,e){if(void 0===e&&(e={}),!L(e=e||{}))throw new Error("options is invalid");var r=e.mutate;if("FeatureCollection"!==ot(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==r&&void 0!==r||(t=Ie(t));var n=function(t){var e={};q(t,function(t){e[t.geometry.type]=!0});var r=Object.keys(e);if(1===r.length)return r[0];return null}(t);if(!n)throw new Error("geojson must be homogenous");var i=t;switch(n){case"LineString":return Ne(i,e);case"Polygon":return $e(i,e);default:throw new Error(n+" is not supported")}}function er(t,e){void 0===e&&(e={});var r="object"==typeof e?e.mutate:e;if(!t)throw new Error("geojson is required");var n=ot(t),i=[];switch(n){case"LineString":i=rr(t);break;case"MultiLineString":case"Polygon":$(t).forEach(function(t){i.push(rr(t))});break;case"MultiPolygon":$(t).forEach(function(t){var e=[];t.forEach(function(t){e.push(rr(t))}),i.push(e)});break;case"Point":return t;case"MultiPoint":var o={};$(t).forEach(function(t){var e=t.join("-");Object.prototype.hasOwnProperty.call(o,e)||(i.push(t),o[e]=!0)});break;default:throw new Error(n+" geometry not supported")}return t.coordinates?!0===r?(t.coordinates=i,t):{type:n,coordinates:i}:!0===r?(t.geometry.coordinates=i,t):s({type:n,coordinates:i},t.properties,{bbox:t.bbox,id:t.id})}function rr(t){var e=$(t);if(2===e.length&&!nr(e[0],e[1]))return e;var r=[],n=e.length-1,i=r.length;r.push(e[0]);for(var o=1;o<n;o++){var s=r[r.length-1];e[o][0]===s[0]&&e[o][1]===s[1]||(r.push(e[o]),(i=r.length)>2&&ir(r[i-3],r[i-1],r[i-2])&&r.splice(r.length-2,1))}if(r.push(e[e.length-1]),i=r.length,nr(e[0],e[e.length-1])&&i<4)throw new Error("invalid polygon");return ir(r[i-3],r[i-1],r[i-2])&&r.splice(r.length-2,1),r}function nr(t,e){return t[0]===e[0]&&t[1]===e[1]}function ir(t,e,r){var n=r[0],i=r[1],o=t[0],s=t[1],a=e[0],u=e[1],l=a-o,c=u-s;return 0===(n-o)*c-(i-s)*l&&(Math.abs(l)>=Math.abs(c)?l>0?o<=n&&n<=a:a<=n&&n<=o:c>0?s<=i&&i<=u:u<=i&&i<=s)}function or(t,e,r){var n=e.x,i=e.y,o=r.x-n,s=r.y-i;if(0!==o||0!==s){var a=((t.x-n)*o+(t.y-i)*s)/(o*o+s*s);a>1?(n=r.x,i=r.y):a>0&&(n+=o*a,i+=s*a)}return(o=t.x-n)*o+(s=t.y-i)*s}function sr(t,e,r,n,i){for(var o,s=n,a=e+1;a<r;a++){var u=or(t[a],t[e],t[r]);u>s&&(o=a,s=u)}s>n&&(o-e>1&&sr(t,e,o,n,i),i.push(t[o]),r-o>1&&sr(t,o,r,n,i))}function ar(t,e){var r=t.length-1,n=[t[0]];return sr(t,0,r,e,n),n.push(t[r]),n}function ur(t,e,r){if(t.length<=2)return t;var n=void 0!==e?e*e:1;return t=ar(t=r?t:function(t,e){for(var r,n,i,o,s,a=t[0],u=[a],l=1,c=t.length;l<c;l++)r=t[l],i=a,o=void 0,s=void 0,o=(n=r).x-i.x,s=n.y-i.y,o*o+s*s>e&&(u.push(r),a=r);return a!==r&&u.push(r),u}(t,n),n)}function lr(t,e,r){return ur(t.map(function(t){return{x:t[0],y:t[1],z:t[2]}}),e,r).map(function(t){return t.z?[t.x,t.y,t.z]:[t.x,t.y]})}function cr(t,e,r){return t.map(function(t){var n=t.map(function(t){return{x:t[0],y:t[1]}});if(n.length<4)throw new Error("invalid polygon");for(var i=ur(n,e,r).map(function(t){return[t.x,t.y]});!hr(i);)i=ur(n,e-=.01*e,r).map(function(t){return[t.x,t.y]});return i[i.length-1][0]===i[0][0]&&i[i.length-1][1]===i[0][1]||i.push(i[0]),i})}function hr(t){return!(t.length<3)&&!(3===t.length&&t[2][0]===t[0][0]&&t[2][1]===t[0][1])}var fr=function(){function t(t){this.points=t.points||[],this.duration=t.duration||1e4,this.sharpness=t.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=t.stepLength||60,this.length=this.points.length,this.delay=0;for(var e=0;e<this.length;e++)this.points[e].z=this.points[e].z||0;for(e=0;e<this.length-1;e++){var r=this.points[e],n=this.points[e+1];this.centers.push({x:(r.x+n.x)/2,y:(r.y+n.y)/2,z:(r.z+n.z)/2})}this.controls.push([this.points[0],this.points[0]]);for(e=0;e<this.centers.length-1;e++){var i=this.points[e+1].x-(this.centers[e].x+this.centers[e+1].x)/2,o=this.points[e+1].y-(this.centers[e].y+this.centers[e+1].y)/2,s=this.points[e+1].z-(this.centers[e].y+this.centers[e+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e].z+s)},{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e+1].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e+1].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e+1].z+s)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this}return t.prototype.cacheSteps=function(t){var e=[],r=this.pos(0);e.push(0);for(var n=0;n<this.duration;n+=10){var i=this.pos(n);Math.sqrt((i.x-r.x)*(i.x-r.x)+(i.y-r.y)*(i.y-r.y)+(i.z-r.z)*(i.z-r.z))>t&&(e.push(n),r=i)}return e},t.prototype.vector=function(t){var e=this.pos(t+10),r=this.pos(t-10);return{angle:180*Math.atan2(e.y-r.y,e.x-r.x)/3.14,speed:Math.sqrt((r.x-e.x)*(r.x-e.x)+(r.y-e.y)*(r.y-e.y)+(r.z-e.z)*(r.z-e.z))}},t.prototype.pos=function(t){var e=t-this.delay;e<0&&(e=0),e>this.duration&&(e=this.duration-1);var r=e/this.duration;if(r>=1)return this.points[this.length-1];var n=Math.floor((this.points.length-1)*r);return function(t,e,r,n,i){var o=function(t){var e=t*t;return[e*t,3*e*(1-t),3*t*(1-t)*(1-t),(1-t)*(1-t)*(1-t)]}(t);return{x:i.x*o[0]+n.x*o[1]+r.x*o[2]+e.x*o[3],y:i.y*o[0]+n.y*o[1]+r.y*o[2]+e.y*o[3],z:i.z*o[0]+n.z*o[1]+r.z*o[2]+e.z*o[3]}}((this.length-1)*r-n,this.points[n],this.controls[n][1],this.controls[n+1][0],this.points[n+1])},t}();function pr(t,e){void 0===e&&(e={});for(var r=e.resolution||1e4,n=e.sharpness||.85,i=[],o=it(t).coordinates.map(function(t){return{x:t[0],y:t[1]}}),s=new fr({duration:r,points:o,sharpness:n}),a=function(t){var e=s.pos(t);Math.floor(t/100)%2==0&&i.push([e.x,e.y])},u=0;u<s.duration;u+=10)a(u);return a(s.duration),f(i,e.properties)}function dr(t,e){void 0===e&&(e={});var r=Number(t[0]),n=Number(t[1]),i=Number(t[2]),o=Number(t[3]);if(6===t.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var s=[r,n];return c([[s,[i,n],[i,o],[r,o],s]],e.properties,{bbox:t,id:e.id})}function yr(t){return dr(Q(t))}function vr(t){var e=t[0],r=t[1],n=t[2],i=t[3];if(be(t.slice(0,2),[n,r])>=be(t.slice(0,2),[e,i])){var o=(r+i)/2;return[e,o-(n-e)/2,n,o+(n-e)/2]}var s=(e+n)/2;return[s-(i-r)/2,r,s+(i-r)/2,i]}function gr(t,e,r,n){void 0===n&&(n={});var i=K(t),o=I(i[0]),s=I(i[1]),a=I(r),l=x(e,n.units),c=Math.asin(Math.sin(s)*Math.cos(l)+Math.cos(s)*Math.sin(l)*Math.cos(a));return u([C(o+Math.atan2(Math.sin(a)*Math.sin(l)*Math.cos(s),Math.cos(l)-Math.sin(s)*Math.sin(c))),C(c)],n.properties)}function mr(t,e,r){void 0===r&&(r={});for(var n=r.steps||64,i=r.properties?r.properties:!Array.isArray(t)&&"Feature"===t.type&&t.properties?t.properties:{},o=[],s=0;s<n;s++)o.push(gr(t,e,-360*s/n,r).geometry.coordinates);return o.push(o[0]),c([o],i)}function _r(t,e,r){if(void 0===r&&(r={}),!0===r.final)return function(t,e){var r=_r(e,t);return r=(r+180)%360}(t,e);var n=K(t),i=K(e),o=I(n[0]),s=I(i[0]),a=I(n[1]),u=I(i[1]),l=Math.sin(s-o)*Math.cos(u),c=Math.cos(a)*Math.sin(u)-Math.sin(a)*Math.cos(u)*Math.cos(s-o);return C(Math.atan2(l,c))}function br(t,e){void 0===e&&(e={});var r=Q(t);return u([(r[0]+r[2])/2,(r[1]+r[3])/2],e.properties,e)}function xr(t,e){void 0===e&&(e={});var r=0,n=0,i=0;return A(t,function(t){r+=t[0],n+=t[1],i++},!0),u([r/i,n/i],e.properties)}function Sr(t){var e=[];return"FeatureCollection"===t.type?k(t,function(t){A(t,function(r){e.push(u(r,t.properties))})}):A(t,function(r){e.push(u(r,t.properties))}),d(e)}var wr=Ir,Cr=Ir;function Ir(t,e,r){r=r||2;var n,i,o,s,a,u,l,c=e&&e.length,h=c?e[0]*r:t.length,f=Er(t,0,h,r,!0),p=[];if(!f)return p;if(c&&(f=function(t,e,r,n){var i,o,s,a=[];for(i=0,o=e.length;i<o;i++)(s=Er(t,e[i]*n,i<o-1?e[i+1]*n:t.length,n,!1))===s.next&&(s.steiner=!0),a.push(Dr(s));for(a.sort(Ar),i=0;i<a.length;i++)Rr(a[i],r),r=Pr(r,r.next);return r}(t,e,f,r)),t.length>80*r){n=o=t[0],i=s=t[1];for(var d=r;d<h;d+=r)(a=t[d])<n&&(n=a),(u=t[d+1])<i&&(i=u),a>o&&(o=a),u>s&&(s=u);l=0!==(l=Math.max(o-n,s-i))?1/l:0}return Mr(f,p,r,n,i,l),p}function Er(t,e,r,n,i){var o,s;if(i===Xr(t,e,r,n)>0)for(o=e;o<r;o+=n)s=Vr(o,t[o],t[o+1],s);else for(o=r-n;o>=e;o-=n)s=Vr(o,t[o],t[o+1],s);return s&&Br(s,s.next)&&(Wr(s),s=s.next),s}function Pr(t,e){if(!t)return t;e||(e=t);var r,n=t;do{if(r=!1,n.steiner||!Br(n,n.next)&&0!==Gr(n.prev,n,n.next))n=n.next;else{if(Wr(n),(n=e=n.prev)===n.next)break;r=!0}}while(r||n!==e);return e}function Mr(t,e,r,n,i,o,s){if(t){!s&&o&&function(t,e,r,n){var i=t;do{null===i.z&&(i.z=Fr(i.x,i.y,e,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,r,n,i,o,s,a,u,l=1;do{for(r=t,t=null,o=null,s=0;r;){for(s++,n=r,a=0,e=0;e<l&&(a++,n=n.nextZ);e++);for(u=l;a>0||u>0&&n;)0!==a&&(0===u||!n||r.z<=n.z)?(i=r,r=r.nextZ,a--):(i=n,n=n.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;r=n}o.nextZ=null,l*=2}while(s>1)}(i)}(t,n,i,o);for(var a,u,l=t;t.prev!==t.next;)if(a=t.prev,u=t.next,o?Nr(t,n,i,o):Lr(t))e.push(a.i/r),e.push(t.i/r),e.push(u.i/r),Wr(t),t=u.next,l=u.next;else if((t=u)===l){s?1===s?Mr(t=Tr(t,e,r),e,r,n,i,o,2):2===s&&Or(t,e,r,n,i,o):Mr(Pr(t),e,r,n,i,o,1);break}}}function Lr(t){var e=t.prev,r=t,n=t.next;if(Gr(e,r,n)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(kr(e.x,e.y,r.x,r.y,n.x,n.y,i.x,i.y)&&Gr(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function Nr(t,e,r,n){var i=t.prev,o=t,s=t.next;if(Gr(i,o,s)>=0)return!1;for(var a=i.x<o.x?i.x<s.x?i.x:s.x:o.x<s.x?o.x:s.x,u=i.y<o.y?i.y<s.y?i.y:s.y:o.y<s.y?o.y:s.y,l=i.x>o.x?i.x>s.x?i.x:s.x:o.x>s.x?o.x:s.x,c=i.y>o.y?i.y>s.y?i.y:s.y:o.y>s.y?o.y:s.y,h=Fr(a,u,e,r,n),f=Fr(l,c,e,r,n),p=t.prevZ,d=t.nextZ;p&&p.z>=h&&d&&d.z<=f;){if(p!==t.prev&&p!==t.next&&kr(i.x,i.y,o.x,o.y,s.x,s.y,p.x,p.y)&&Gr(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,d!==t.prev&&d!==t.next&&kr(i.x,i.y,o.x,o.y,s.x,s.y,d.x,d.y)&&Gr(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;p&&p.z>=h;){if(p!==t.prev&&p!==t.next&&kr(i.x,i.y,o.x,o.y,s.x,s.y,p.x,p.y)&&Gr(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;d&&d.z<=f;){if(d!==t.prev&&d!==t.next&&kr(i.x,i.y,o.x,o.y,s.x,s.y,d.x,d.y)&&Gr(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function Tr(t,e,r){var n=t;do{var i=n.prev,o=n.next.next;!Br(i,o)&&Ur(i,n,n.next,o)&&qr(i,o)&&qr(o,i)&&(e.push(i.i/r),e.push(n.i/r),e.push(o.i/r),Wr(n),Wr(n.next),n=t=o),n=n.next}while(n!==t);return n}function Or(t,e,r,n,i,o){var s=t;do{for(var a=s.next.next;a!==s.prev;){if(s.i!==a.i&&jr(s,a)){var u=zr(s,a);return s=Pr(s,s.next),u=Pr(u,u.next),Mr(s,e,r,n,i,o),void Mr(u,e,r,n,i,o)}a=a.next}s=s.next}while(s!==t)}function Ar(t,e){return t.x-e.x}function Rr(t,e){if(e=function(t,e){var r,n=e,i=t.x,o=t.y,s=-1/0;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){var a=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(a<=i&&a>s){if(s=a,a===i){if(o===n.y)return n;if(o===n.next.y)return n.next}r=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!r)return null;if(i===s)return r.prev;var u,l=r,c=r.x,h=r.y,f=1/0;n=r.next;for(;n!==l;)i>=n.x&&n.x>=c&&i!==n.x&&kr(o<h?i:s,o,c,h,o<h?s:i,o,n.x,n.y)&&((u=Math.abs(o-n.y)/(i-n.x))<f||u===f&&n.x>r.x)&&qr(n,t)&&(r=n,f=u),n=n.next;return r}(t,e)){var r=zr(e,t);Pr(r,r.next)}}function Fr(t,e,r,n,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Dr(t){var e=t,r=t;do{e.x<r.x&&(r=e),e=e.next}while(e!==t);return r}function kr(t,e,r,n,i,o,s,a){return(i-s)*(e-a)-(t-s)*(o-a)>=0&&(t-s)*(n-a)-(r-s)*(e-a)>=0&&(r-s)*(o-a)-(i-s)*(n-a)>=0}function jr(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&Ur(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}(t,e)&&qr(t,e)&&qr(e,t)&&function(t,e){var r=t,n=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{r.y>o!=r.next.y>o&&r.next.y!==r.y&&i<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==t);return n}(t,e)}function Gr(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function Br(t,e){return t.x===e.x&&t.y===e.y}function Ur(t,e,r,n){return!!(Br(t,e)&&Br(r,n)||Br(t,n)&&Br(r,e))||Gr(t,e,r)>0!=Gr(t,e,n)>0&&Gr(r,n,t)>0!=Gr(r,n,e)>0}function qr(t,e){return Gr(t.prev,t,t.next)<0?Gr(t,e,t.next)>=0&&Gr(t,t.prev,e)>=0:Gr(t,e,t.prev)<0||Gr(t,t.next,e)<0}function zr(t,e){var r=new Hr(t.i,t.x,t.y),n=new Hr(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,r.next=i,i.prev=r,n.next=r,r.prev=n,o.next=n,n.prev=o,n}function Vr(t,e,r,n){var i=new Hr(t,e,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function Wr(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Hr(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Xr(t,e,r,n){for(var i=0,o=e,s=r-n;o<r;o+=n)i+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return i}function Zr(t){var e=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},n=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var s=0;s<e;s++)r.vertices.push(t[i][o][s]);i>0&&(n+=t[i-1].length,r.holes.push(n))}return r}(t),r=wr(e.vertices,e.holes,2),n=[],i=[];r.forEach(function(t,n){var o=r[n];i.push([e.vertices[2*o],e.vertices[2*o+1]])});for(var o=0;o<i.length;o+=3){var s=i.slice(o,o+3);s.push(i[o]),n.push(c([s]))}return n}function Yr(t,e){if(!t)throw new Error("targetPoint is required");if(!e)throw new Error("points is required");var r,n=1/0,i=0;return k(e,function(e,r){var o=be(t,e);o<n&&(i=r,n=o)}),(r=Ie(e.features[i])).properties.featureIndex=i,r.properties.distanceToPoint=n,r}function Jr(t){if(!t)throw new Error("geojson is required");var e=[];return q(t,function(t){!function(t,e){var r=[],n=t.geometry;if(null!==n){switch(n.type){case"Polygon":r=$(n);break;case"LineString":r=[$(n)]}r.forEach(function(r){(function(t,e){var r=[];return t.reduce(function(t,n){var i=f([t,n],e);return i.bbox=function(t,e){var r=t[0],n=t[1],i=e[0],o=e[1];return[r<i?r:i,n<o?n:o,r>i?r:i,n>o?n:o]}(t,n),r.push(i),n}),r})(r,t.properties).forEach(function(t){t.id=e.length,e.push(t)})})}}(t,e)}),d(e)}Ir.deviation=function(t,e,r,n){var i=e&&e.length,o=i?e[0]*r:t.length,s=Math.abs(Xr(t,0,o,r));if(i)for(var a=0,u=e.length;a<u;a++){var l=e[a]*r,c=a<u-1?e[a+1]*r:t.length;s-=Math.abs(Xr(t,l,c,r))}var h=0;for(a=0;a<n.length;a+=3){var f=n[a]*r,p=n[a+1]*r,d=n[a+2]*r;h+=Math.abs((t[f]-t[d])*(t[p+1]-t[f+1])-(t[f]-t[p])*(t[d+1]-t[f+1]))}return 0===s&&0===h?0:Math.abs((h-s)/s)},Ir.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},n=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var s=0;s<e;s++)r.vertices.push(t[i][o][s]);i>0&&(n+=t[i-1].length,r.holes.push(n))}return r},wr.default=Cr;var Qr=Ut(function(t,e){function r(t,e,r){void 0===r&&(r={});var n={type:"Feature"};return(0===r.id||r.id)&&(n.id=r.id),r.bbox&&(n.bbox=r.bbox),n.properties=e||{},n.geometry=t,n}function n(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!p(t[0])||!p(t[1]))throw new Error("coordinates must contain numbers");return r({type:"Point",coordinates:t},e,n)}function i(t,e,n){void 0===n&&(n={});for(var i=0,o=t;i<o.length;i++){var s=o[i];if(s.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<s[s.length-1].length;a++)if(s[s.length-1][a]!==s[0][a])throw new Error("First and last Position are not equivalent.")}return r({type:"Polygon",coordinates:t},e,n)}function o(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return r({type:"LineString",coordinates:t},e,n)}function s(t,e){void 0===e&&(e={});var r={type:"FeatureCollection"};return e.id&&(r.id=e.id),e.bbox&&(r.bbox=e.bbox),r.features=t,r}function a(t,e,n){return void 0===n&&(n={}),r({type:"MultiLineString",coordinates:t},e,n)}function u(t,e,n){return void 0===n&&(n={}),r({type:"MultiPoint",coordinates:t},e,n)}function l(t,e,n){return void 0===n&&(n={}),r({type:"MultiPolygon",coordinates:t},e,n)}function c(t,r){void 0===r&&(r="kilometers");var n=e.factors[r];if(!n)throw new Error(r+" units is invalid");return t*n}function h(t,r){void 0===r&&(r="kilometers");var n=e.factors[r];if(!n)throw new Error(r+" units is invalid");return t/n}function f(t){return 180*(t%(2*Math.PI))/Math.PI}function p(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.earthRadius=6371008.8,e.factors={centimeters:100*e.earthRadius,centimetres:100*e.earthRadius,degrees:e.earthRadius/111325,feet:3.28084*e.earthRadius,inches:39.37*e.earthRadius,kilometers:e.earthRadius/1e3,kilometres:e.earthRadius/1e3,meters:e.earthRadius,metres:e.earthRadius,miles:e.earthRadius/1609.344,millimeters:1e3*e.earthRadius,millimetres:1e3*e.earthRadius,nauticalmiles:e.earthRadius/1852,radians:1,yards:1.0936*e.earthRadius},e.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/e.earthRadius,yards:1.0936133},e.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:3.86e-7,millimeters:1e6,millimetres:1e6,yards:1.195990046},e.feature=r,e.geometry=function(t,e,r){switch(t){case"Point":return n(e).geometry;case"LineString":return o(e).geometry;case"Polygon":return i(e).geometry;case"MultiPoint":return u(e).geometry;case"MultiLineString":return a(e).geometry;case"MultiPolygon":return l(e).geometry;default:throw new Error(t+" is invalid")}},e.point=n,e.points=function(t,e,r){return void 0===r&&(r={}),s(t.map(function(t){return n(t,e)}),r)},e.polygon=i,e.polygons=function(t,e,r){return void 0===r&&(r={}),s(t.map(function(t){return i(t,e)}),r)},e.lineString=o,e.lineStrings=function(t,e,r){return void 0===r&&(r={}),s(t.map(function(t){return o(t,e)}),r)},e.featureCollection=s,e.multiLineString=a,e.multiPoint=u,e.multiPolygon=l,e.geometryCollection=function(t,e,n){return void 0===n&&(n={}),r({type:"GeometryCollection",geometries:t},e,n)},e.round=function(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var r=Math.pow(10,e||0);return Math.round(t*r)/r},e.radiansToLength=c,e.lengthToRadians=h,e.lengthToDegrees=function(t,e){return f(h(t,e))},e.bearingToAzimuth=function(t){var e=t%360;return e<0&&(e+=360),e},e.radiansToDegrees=f,e.degreesToRadians=function(t){return t%360*Math.PI/180},e.convertLength=function(t,e,r){if(void 0===e&&(e="kilometers"),void 0===r&&(r="kilometers"),!(t>=0))throw new Error("length must be a positive number");return c(h(t,e),r)},e.convertArea=function(t,r,n){if(void 0===r&&(r="meters"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("area must be a positive number");var i=e.areaFactors[r];if(!i)throw new Error("invalid original units");var o=e.areaFactors[n];if(!o)throw new Error("invalid final units");return t/i*o},e.isNumber=p,e.isObject=function(t){return!!t&&t.constructor===Object},e.validateBBox=function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(t){if(!p(t))throw new Error("bbox must only contain numbers")})},e.validateId=function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}});function Kr(t,e,r){if(null!==t)for(var n,i,o,s,a,u,l,c,h=0,f=0,p=t.type,d="FeatureCollection"===p,y="Feature"===p,v=d?t.features.length:1,g=0;g<v;g++){a=(c=!!(l=d?t.features[g].geometry:y?t.geometry:t)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var m=0;m<a;m++){var _=0,b=0;if(null!==(s=c?l.geometries[m]:l)){u=s.coordinates;var x=s.type;switch(h=!r||"Polygon"!==x&&"MultiPolygon"!==x?0:1,x){case null:break;case"Point":if(!1===e(u,f,g,_,b))return!1;f++,_++;break;case"LineString":case"MultiPoint":for(n=0;n<u.length;n++){if(!1===e(u[n],f,g,_,b))return!1;f++,"MultiPoint"===x&&_++}"LineString"===x&&_++;break;case"Polygon":case"MultiLineString":for(n=0;n<u.length;n++){for(i=0;i<u[n].length-h;i++){if(!1===e(u[n][i],f,g,_,b))return!1;f++}"MultiLineString"===x&&_++,"Polygon"===x&&b++}"Polygon"===x&&_++;break;case"MultiPolygon":for(n=0;n<u.length;n++){for(b=0,i=0;i<u[n].length;i++){for(o=0;o<u[n][i].length-h;o++){if(!1===e(u[n][i][o],f,g,_,b))return!1;f++}b++}_++}break;case"GeometryCollection":for(n=0;n<s.geometries.length;n++)if(!1===Kr(s.geometries[n],e,r))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function $r(t,e){var r;switch(t.type){case"FeatureCollection":for(r=0;r<t.features.length&&!1!==e(t.features[r].properties,r);r++);break;case"Feature":e(t.properties,0)}}function tn(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var r=0;r<t.features.length&&!1!==e(t.features[r],r);r++);}function en(t,e){var r,n,i,o,s,a,u,l,c,h,f=0,p="FeatureCollection"===t.type,d="Feature"===t.type,y=p?t.features.length:1;for(r=0;r<y;r++){for(a=p?t.features[r].geometry:d?t.geometry:t,l=p?t.features[r].properties:d?t.properties:{},c=p?t.features[r].bbox:d?t.bbox:void 0,h=p?t.features[r].id:d?t.id:void 0,s=(u=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,i=0;i<s;i++)if(null!==(o=u?a.geometries[i]:a))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,f,l,c,h))return!1;break;case"GeometryCollection":for(n=0;n<o.geometries.length;n++)if(!1===e(o.geometries[n],f,l,c,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,f,l,c,h))return!1;f++}}function rn(t,e){en(t,function(t,r,n,i,o){var s,a=null===t?null:t.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return!1!==e(Qr.feature(t,n,{bbox:i,id:o}),r,0)&&void 0}switch(a){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}for(var u=0;u<t.coordinates.length;u++){var l={type:s,coordinates:t.coordinates[u]};if(!1===e(Qr.feature(l,n),r,u))return!1}})}function nn(t,e){rn(t,function(t,r,n){var i=0;if(t.geometry){var o=t.geometry.type;if("Point"!==o&&"MultiPoint"!==o){var s,a=0,u=0,l=0;return!1!==Kr(t,function(o,c,h,f,p){if(void 0===s||r>a||f>u||p>l)return s=o,a=r,u=f,l=p,void(i=0);var d=Qr.lineString([s,o],t.properties);if(!1===e(d,r,n,p,i))return!1;i++,s=o})&&void 0}}})}function on(t,e){if(!t)throw new Error("geojson is required");rn(t,function(t,r,n){if(null!==t.geometry){var i=t.geometry.type,o=t.geometry.coordinates;switch(i){case"LineString":if(!1===e(t,r,n,0,0))return!1;break;case"Polygon":for(var s=0;s<o.length;s++)if(!1===e(Qr.lineString(o[s],t.properties),r,n,s))return!1}}})}var sn=function(t){var e=[];return Kr(t,function(t){e.push(t)}),e},an=Kr,un=function(t,e,r,n){var i=r;return Kr(t,function(t,n,o,s,a){i=0===n&&void 0===r?t:e(i,t,n,o,s,a)},n),i},ln=tn,cn=function(t,e,r){var n=r;return tn(t,function(t,i){n=0===i&&void 0===r?t:e(n,t,i)}),n},hn=function(t,e){if(e=e||{},!Qr.isObject(e))throw new Error("options is invalid");var r,n=e.featureIndex||0,i=e.multiFeatureIndex||0,o=e.geometryIndex||0,s=e.coordIndex||0,a=e.properties;switch(t.type){case"FeatureCollection":n<0&&(n=t.features.length+n),a=a||t.features[n].properties,r=t.features[n].geometry;break;case"Feature":a=a||t.properties,r=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=t;break;default:throw new Error("geojson is invalid")}if(null===r)return null;var u=r.coordinates;switch(r.type){case"Point":return Qr.point(u,a,e);case"MultiPoint":return i<0&&(i=u.length+i),Qr.point(u[i],a,e);case"LineString":return s<0&&(s=u.length+s),Qr.point(u[s],a,e);case"Polygon":return o<0&&(o=u.length+o),s<0&&(s=u[o].length+s),Qr.point(u[o][s],a,e);case"MultiLineString":return i<0&&(i=u.length+i),s<0&&(s=u[i].length+s),Qr.point(u[i][s],a,e);case"MultiPolygon":return i<0&&(i=u.length+i),o<0&&(o=u[i].length+o),s<0&&(s=u[i][o].length-s),Qr.point(u[i][o][s],a,e)}throw new Error("geojson is invalid")},fn=function(t,e){if(e=e||{},!Qr.isObject(e))throw new Error("options is invalid");var r,n=e.featureIndex||0,i=e.multiFeatureIndex||0,o=e.geometryIndex||0,s=e.segmentIndex||0,a=e.properties;switch(t.type){case"FeatureCollection":n<0&&(n=t.features.length+n),a=a||t.features[n].properties,r=t.features[n].geometry;break;case"Feature":a=a||t.properties,r=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=t;break;default:throw new Error("geojson is invalid")}if(null===r)return null;var u=r.coordinates;switch(r.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=u.length+s-1),Qr.lineString([u[s],u[s+1]],a,e);case"Polygon":return o<0&&(o=u.length+o),s<0&&(s=u[o].length+s-1),Qr.lineString([u[o][s],u[o][s+1]],a,e);case"MultiLineString":return i<0&&(i=u.length+i),s<0&&(s=u[i].length+s-1),Qr.lineString([u[i][s],u[i][s+1]],a,e);case"MultiPolygon":return i<0&&(i=u.length+i),o<0&&(o=u[i].length+o),s<0&&(s=u[i][o].length-s-1),Qr.lineString([u[i][o][s],u[i][o][s+1]],a,e)}throw new Error("geojson is invalid")},pn=rn,dn=function(t,e,r){var n=r;return rn(t,function(t,i,o){n=0===i&&0===o&&void 0===r?t:e(n,t,i,o)}),n},yn=en,vn=function(t,e,r){var n=r;return en(t,function(t,i,o,s,a){n=0===i&&void 0===r?t:e(n,t,i,o,s,a)}),n},gn=on,mn=function(t,e,r){var n=r;return on(t,function(t,i,o,s){n=0===i&&void 0===r?t:e(n,t,i,o,s)}),n},_n=$r,bn=function(t,e,r){var n=r;return $r(t,function(t,i){n=0===i&&void 0===r?t:e(n,t,i)}),n},xn=nn,Sn=function(t,e,r){var n=r,i=!1;return nn(t,function(t,o,s,a,u){n=!1===i&&void 0===r?t:e(n,t,o,s,a,u),i=!0}),n},wn=Object.defineProperty({coordAll:sn,coordEach:an,coordReduce:un,featureEach:ln,featureReduce:cn,findPoint:hn,findSegment:fn,flattenEach:pn,flattenReduce:dn,geomEach:yn,geomReduce:vn,lineEach:gn,lineReduce:mn,propEach:_n,propReduce:bn,segmentEach:xn,segmentReduce:Sn},"__esModule",{value:!0});function Cn(t){var e=[1/0,1/0,-1/0,-1/0];return wn.coordEach(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}Cn.default=Cn;var In=Cn,En=Object.defineProperty({default:In},"__esModule",{value:!0}).default,Pn=wn.featureEach,Mn=(wn.coordEach,Qr.polygon,Qr.featureCollection);function Ln(t){var e=Et(t);return e.insert=function(t){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:En(t),Et.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach(function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:En(t),e.push(t)}):Pn(t,function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:En(t),e.push(t)}),Et.prototype.load.call(this,e)},e.remove=function(t,e){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:En(t),Et.prototype.remove.call(this,t,e)},e.clear=function(){return Et.prototype.clear.call(this)},e.search=function(t){var e=Et.prototype.search.call(this,this.toBBox(t));return Mn(e)},e.collides=function(t){return Et.prototype.collides.call(this,this.toBBox(t))},e.all=function(){var t=Et.prototype.all.call(this);return Mn(t)},e.toJSON=function(){return Et.prototype.toJSON.call(this)},e.fromJSON=function(t){return Et.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;if(t.bbox)e=t.bbox;else if(Array.isArray(t)&&4===t.length)e=t;else if(Array.isArray(t)&&6===t.length)e=[t[0],t[1],t[3],t[4]];else if("Feature"===t.type)e=En(t);else{if("FeatureCollection"!==t.type)throw new Error("invalid geojson");e=En(t)}return{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}var Nn=Ln,Tn=Ln;function On(t,e){var r={},n=[];if("LineString"===t.type&&(t=s(t)),"LineString"===e.type&&(e=s(e)),"Feature"===t.type&&"Feature"===e.type&&null!==t.geometry&&null!==e.geometry&&"LineString"===t.geometry.type&&"LineString"===e.geometry.type&&2===t.geometry.coordinates.length&&2===e.geometry.coordinates.length){var i=An(t,e);return i&&n.push(i),d(n)}var o=Nn();return o.load(Jr(e)),k(Jr(t),function(t){k(o.search(t),function(e){var i=An(t,e);if(i){var o=$(i).join(",");r[o]||(r[o]=!0,n.push(i))}})}),d(n)}function An(t,e){var r=$(t),n=$(e);if(2!==r.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==n.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var i=r[0][0],o=r[0][1],s=r[1][0],a=r[1][1],l=n[0][0],c=n[0][1],h=n[1][0],f=n[1][1],p=(f-c)*(s-i)-(h-l)*(a-o),d=(h-l)*(o-c)-(f-c)*(i-l),y=(s-i)*(o-c)-(a-o)*(i-l);if(0===p)return null;var v=d/p,g=y/p;return v>=0&&v<=1&&g>=0&&g<=1?u([i+v*(s-i),o+v*(a-o)]):null}function Rn(t,e,r){void 0===r&&(r={});var n=u([1/0,1/0],{dist:1/0}),i=0;return q(t,function(t){for(var o=$(t),s=0;s<o.length-1;s++){var a=u(o[s]);a.properties.dist=be(e,a,r);var l=u(o[s+1]);l.properties.dist=be(e,l,r);var c=be(a,l,r),h=Math.max(a.properties.dist,l.properties.dist),p=_r(a,l),d=gr(e,h,p+90,r),y=gr(e,h,p-90,r),v=On(f([d.geometry.coordinates,y.geometry.coordinates]),f([a.geometry.coordinates,l.geometry.coordinates])),g=null;v.features.length>0&&((g=v.features[0]).properties.dist=be(e,g,r),g.properties.location=i+be(a,g,r)),a.properties.dist<n.properties.dist&&((n=a).properties.index=s,n.properties.location=i),l.properties.dist<n.properties.dist&&((n=l).properties.index=s+1,n.properties.location=i+c),g&&g.properties.dist<n.properties.dist&&((n=g).properties.index=s),i+=c}}),n}function Fn(t,e,n){void 0===n&&(n={});var i=K(t),o=K(e);return o[0]+=o[0]-i[0]>180?-360:i[0]-o[0]>180?360:0,E(function(t,e,n){var i=n=void 0===n?r:Number(n),o=t[1]*Math.PI/180,s=e[1]*Math.PI/180,a=s-o,u=Math.abs(e[0]-t[0])*Math.PI/180;u>Math.PI&&(u-=2*Math.PI);var l=Math.log(Math.tan(s/2+Math.PI/4)/Math.tan(o/2+Math.PI/4)),c=Math.abs(l)>1e-11?a/l:Math.cos(o);return Math.sqrt(a*a+c*c*u*u)*i}(i,o),"meters",n.units)}function Dn(t,e,r){if(void 0===r&&(r={}),r.method||(r.method="geodesic"),r.units||(r.units="kilometers"),!t)throw new Error("pt is required");if(Array.isArray(t)?t=u(t):"Point"===t.type?t=s(t):rt(t,"Point","point"),!e)throw new Error("line is required");Array.isArray(e)?e=f(e):"LineString"===e.type?e=s(e):rt(e,"LineString","line");var n=1/0,i=t.geometry.coordinates;return V(e,function(t){var e=t.geometry.coordinates[0],o=t.geometry.coordinates[1],s=function(t,e,r,n){var i=[r[0]-e[0],r[1]-e[1]],o=kn([t[0]-e[0],t[1]-e[1]],i);if(o<=0)return jn(t,e,{method:n.method,units:"degrees"});var s=kn(i,i);if(s<=o)return jn(t,r,{method:n.method,units:"degrees"});var a=o/s,u=[e[0]+a*i[0],e[1]+a*i[1]];return jn(t,u,{method:n.method,units:"degrees"})}(i,e,o,r);s<n&&(n=s)}),E(n,"degrees",r.units)}function kn(t,e){return t[0]*e[0]+t[1]*e[1]}function jn(t,e,r){return"planar"===r.method?Fn(t,e,r):be(t,e,r)}function Gn(t,e,r,n,i,o,s,a){var u,l,c,h,f={x:null,y:null,onLine1:!1,onLine2:!1};return 0===(u=(a-o)*(r-t)-(s-i)*(n-e))?null!==f.x&&null!==f.y&&f:(h=(r-t)*(l=e-o)-(n-e)*(c=t-i),l=((s-i)*l-(a-o)*c)/u,c=h/u,f.x=t+l*(r-t),f.y=e+l*(n-e),l>=0&&l<=1&&(f.onLine1=!0),c>=0&&c<=1&&(f.onLine2=!0),!(!f.onLine1||!f.onLine2)&&[f.x,f.y])}function Bn(t){for(var e=function(t){if("FeatureCollection"!==t.type)return"Feature"!==t.type?d([s(t)]):d([t]);return t}(t),r=br(e),n=!1,i=0;!n&&i<e.features.length;){var o,a=e.features[i].geometry,l=!1;if("Point"===a.type)r.geometry.coordinates[0]===a.coordinates[0]&&r.geometry.coordinates[1]===a.coordinates[1]&&(n=!0);else if("MultiPoint"===a.type){var c=!1;for(o=0;!c&&o<a.coordinates.length;)r.geometry.coordinates[0]===a.coordinates[o][0]&&r.geometry.coordinates[1]===a.coordinates[o][1]&&(n=!0,c=!0),o++}else if("LineString"===a.type)for(o=0;!l&&o<a.coordinates.length-1;)Un(r.geometry.coordinates[0],r.geometry.coordinates[1],a.coordinates[o][0],a.coordinates[o][1],a.coordinates[o+1][0],a.coordinates[o+1][1])&&(l=!0,n=!0),o++;else if("MultiLineString"===a.type)for(var h=0;h<a.coordinates.length;){l=!1,o=0;for(var f=a.coordinates[h];!l&&o<f.length-1;)Un(r.geometry.coordinates[0],r.geometry.coordinates[1],f[o][0],f[o][1],f[o+1][0],f[o+1][1])&&(l=!0,n=!0),o++;h++}else"Polygon"!==a.type&&"MultiPolygon"!==a.type||ge(r,a)&&(n=!0);i++}if(n)return r;var p=d([]);for(i=0;i<e.features.length;i++)p.features=p.features.concat(Sr(e.features[i]).features);return u(Yr(r,p).geometry.coordinates)}function Un(t,e,r,n,i,o){return Math.sqrt((i-r)*(i-r)+(o-n)*(o-n))===Math.sqrt((t-r)*(t-r)+(e-n)*(e-n))+Math.sqrt((i-t)*(i-t)+(o-e)*(o-e))}Nn.default=Tn;var qn=6378137;function zn(t){return U(t,function(t,e){return t+function(t){var e,r=0;switch(t.type){case"Polygon":return Vn(t.coordinates);case"MultiPolygon":for(e=0;e<t.coordinates.length;e++)r+=Vn(t.coordinates[e]);return r;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(e)},0)}function Vn(t){var e=0;if(t&&t.length>0){e+=Math.abs(Wn(t[0]));for(var r=1;r<t.length;r++)e-=Math.abs(Wn(t[r]))}return e}function Wn(t){var e,r,n,i,o,s,a=0,u=t.length;if(u>2){for(s=0;s<u;s++)s===u-2?(n=u-2,i=u-1,o=0):s===u-1?(n=u-1,i=0,o=1):(n=s,i=s+1,o=s+2),e=t[n],r=t[i],a+=(Hn(t[o][0])-Hn(e[0]))*Math.sin(Hn(r[1]));a=a*qn*qn/2}return a}function Hn(t){return t*Math.PI/180}function Xn(t,e){return void 0===e&&(e={}),W(t,function(t,r){var n=r.geometry.coordinates;return t+be(n[0],n[1],e)},0)}function Zn(t,e,r,n){if(!L(n=n||{}))throw new Error("options is invalid");var i,o=[];if("Feature"===t.type)i=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");i=t.coordinates}for(var s,a,u,l=i.length,c=0,h=0;h<i.length&&!(e>=c&&h===i.length-1);h++){if(c>e&&0===o.length){if(!(s=e-c))return o.push(i[h]),f(o);a=_r(i[h],i[h-1])-180,u=gr(i[h],s,a,n),o.push(u.geometry.coordinates)}if(c>=r)return(s=r-c)?(a=_r(i[h],i[h-1])-180,u=gr(i[h],s,a,n),o.push(u.geometry.coordinates),f(o)):(o.push(i[h]),f(o));if(c>=e&&o.push(i[h]),h===i.length-1)return f(o);c+=be(i[h],i[h+1],n)}if(c<e&&i.length===l)throw new Error("Start position is beyond line");var p=i[i.length-1];return f([p,p])}function Yn(t,e,r){void 0===r&&(r={});for(var n=K(t),i=$(e),o=0;o<i.length-1;o++){var s=!1;if(r.ignoreEndVertices&&(0===o&&(s="start"),o===i.length-2&&(s="end"),0===o&&o+1===i.length-1&&(s="both")),Jn(i[o],i[o+1],n,s,void 0===r.epsilon?null:r.epsilon))return!0}return!1}function Jn(t,e,r,n,i){var o=r[0],s=r[1],a=t[0],u=t[1],l=e[0],c=e[1],h=l-a,f=c-u,p=(r[0]-a)*f-(r[1]-u)*h;if(null!==i){if(Math.abs(p)>i)return!1}else if(0!==p)return!1;return n?"start"===n?Math.abs(h)>=Math.abs(f)?h>0?a<o&&o<=l:l<=o&&o<a:f>0?u<s&&s<=c:c<=s&&s<u:"end"===n?Math.abs(h)>=Math.abs(f)?h>0?a<=o&&o<l:l<o&&o<=a:f>0?u<=s&&s<c:c<s&&s<=u:"both"===n&&(Math.abs(h)>=Math.abs(f)?h>0?a<o&&o<l:l<o&&o<a:f>0?u<s&&s<c:c<s&&s<u):Math.abs(h)>=Math.abs(f)?h>0?a<=o&&o<=l:l<=o&&o<=a:f>0?u<=s&&s<=c:c<=s&&s<=u}function Qn(t,e){var r=it(t),n=it(e),i=r.type,o=n.type;switch(i){case"Point":switch(o){case"MultiPoint":return function(t,e){var r,n=!1;for(r=0;r<e.coordinates.length;r++)if($n(e.coordinates[r],t.coordinates)){n=!0;break}return n}(r,n);case"LineString":return Yn(r,n,{ignoreEndVertices:!0});case"Polygon":case"MultiPolygon":return ge(r,n,{ignoreBoundary:!0});default:throw new Error("feature2 "+o+" geometry not supported")}case"MultiPoint":switch(o){case"MultiPoint":return function(t,e){for(var r=0;r<t.coordinates.length;r++){for(var n=!1,i=0;i<e.coordinates.length;i++)$n(t.coordinates[r],e.coordinates[i])&&(n=!0);if(!n)return!1}return!0}(r,n);case"LineString":return function(t,e){for(var r=!1,n=0;n<t.coordinates.length;n++){if(!Yn(t.coordinates[n],e))return!1;r||(r=Yn(t.coordinates[n],e,{ignoreEndVertices:!0}))}return r}(r,n);case"Polygon":case"MultiPolygon":return function(t,e){for(var r=!0,n=!1,i=0;i<t.coordinates.length;i++){if(!(n=ge(t.coordinates[1],e))){r=!1;break}n=ge(t.coordinates[1],e,{ignoreBoundary:!0})}return r&&n}(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"LineString":return function(t,e){for(var r=0;r<t.coordinates.length;r++)if(!Yn(t.coordinates[r],e))return!1;return!0}(r,n);case"Polygon":case"MultiPolygon":return function(t,e){var r=Q(e),n=Q(t);if(!Kn(r,n))return!1;for(var i=!1,o=0;o<t.coordinates.length-1;o++){if(!ge(t.coordinates[o],e))return!1;if(i||(i=ge(t.coordinates[o],e,{ignoreBoundary:!0})),!i)i=ge(ti(t.coordinates[o],t.coordinates[o+1]),e,{ignoreBoundary:!0})}return i}(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Polygon":case"MultiPolygon":return function(t,e){var r=Q(t);if(!Kn(Q(e),r))return!1;for(var n=0;n<t.coordinates[0].length;n++)if(!ge(t.coordinates[0][n],e))return!1;return!0}(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}}function Kn(t,e){return!(t[0]>e[0])&&(!(t[2]<e[2])&&(!(t[1]>e[1])&&!(t[3]<e[3])))}function $n(t,e){return t[0]===e[0]&&t[1]===e[1]}function ti(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}function ei(t,e,r){void 0===r&&(r={}),r.mask&&!r.units&&(r.units="kilometers");for(var n=[],i=t[0],o=t[1],s=t[2],a=t[3],l=e/be([i,o],[s,o],r)*(s-i),c=e/be([i,o],[i,a],r)*(a-o),h=s-i,f=a-o,p=Math.floor(h/l),y=(f-Math.floor(f/c)*c)/2,v=i+(h-p*l)/2;v<=s;){for(var g=o+y;g<=a;){var m=u([v,g],r.properties);r.mask?Qn(m,r.mask)&&n.push(m):n.push(m),g+=c}v+=l}return d(n)}function ri(t,e){void 0===e&&(e={});var r=e.precision,n=e.coordinates,i=e.mutate;if(r=null==r||isNaN(r)?6:r,n=null==n||isNaN(n)?3:n,!t)throw new Error("<geojson> is required");if("number"!=typeof r)throw new Error("<precision> must be a number");if("number"!=typeof n)throw new Error("<coordinates> must be a number");!1!==i&&void 0!==i||(t=JSON.parse(JSON.stringify(t)));var o=Math.pow(10,r);return A(t,function(t){!function(t,e,r){t.length>r&&t.splice(r,t.length);for(var n=0;n<t.length;n++)t[n]=Math.round(t[n]*e)/e}(t,o,n)}),t}function ni(t){if(!t)throw new Error("geojson is required");var e=[];return q(t,function(t){e.push(t)}),d(e)}function ii(t,e,r){if("Polygon"!==t.geometry.type)throw new Error("The input feature must be a Polygon");void 0===r&&(r=1);var n=t.geometry.coordinates,i=[],o={};if(r){for(var s=[],a=0;a<n.length;a++)for(var u=0;u<n[a].length-1;u++)s.push(y(a,u));var l=Et();l.load(s)}for(var c=0;c<n.length;c++)for(var h=0;h<n[c].length-1;h++){if(r)l.search(y(c,h)).forEach(function(t){var e=t.ring,r=t.edge;d(c,h,e,r)});else for(var f=0;f<n.length;f++)for(var p=0;p<n[f].length-1;p++)d(c,h,f,p)}return e||(i={type:"Feature",geometry:{type:"MultiPoint",coordinates:i}}),i;function d(t,r,s,a){var u,l,c=n[t][r],h=n[t][r+1],f=n[s][a],p=n[s][a+1],d=function(t,e,r,n){if(oi(t,r)||oi(t,n)||oi(e,r)||oi(n,r))return null;var i=t[0],o=t[1],s=e[0],a=e[1],u=r[0],l=r[1],c=n[0],h=n[1],f=(i-s)*(l-h)-(o-a)*(u-c);return 0===f?null:[((i*a-o*s)*(u-c)-(i-s)*(u*h-l*c))/f,((i*a-o*s)*(l-h)-(o-a)*(u*h-l*c))/f]}(c,h,f,p);if(null!==d&&(u=h[0]!==c[0]?(d[0]-c[0])/(h[0]-c[0]):(d[1]-c[1])/(h[1]-c[1]),l=p[0]!==f[0]?(d[0]-f[0])/(p[0]-f[0]):(d[1]-f[1])/(p[1]-f[1]),!(u>=1||u<=0||l>=1||l<=0))){var y=d,v=!o[y];v&&(o[y]=!0),e?i.push(e(d,t,r,c,h,u,s,a,f,p,l,v)):i.push(d)}}function y(t,e){var r,i,o,s,a=n[t][e],u=n[t][e+1];return a[0]<u[0]?(r=a[0],i=u[0]):(r=u[0],i=a[0]),a[1]<u[1]?(o=a[1],s=u[1]):(o=u[1],s=a[1]),{minX:r,minY:o,maxX:i,maxY:s,ring:t,edge:e}}}function oi(t,e){if(!t||!e)return!1;if(t.length!==e.length)return!1;for(var r=0,n=t.length;r<n;r++)if(t[r]instanceof Array&&e[r]instanceof Array){if(!oi(t[r],e[r]))return!1}else if(t[r]!==e[r])return!1;return!0}function si(t){if("Feature"!=t.type)throw new Error("The input must a geojson object of type Feature");if(void 0===t.geometry||null==t.geometry)throw new Error("The input must a geojson object with a non-empty geometry");if("Polygon"!=t.geometry.type)throw new Error("The input must be a geojson Polygon");for(var e=t.geometry.coordinates.length,r=[],n=0;n<e;n++){var i=t.geometry.coordinates[n];hi(i[0],i[i.length-1])||i.push(i[0]),r.push.apply(r,i.slice(0,i.length-1))}if(!function(t){for(var e={},r=1,n=0,i=t.length;n<i;++n){if(Object.prototype.hasOwnProperty.call(e,t[n])){r=0;break}e[t[n]]=1}return r}(r))throw new Error("The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)");var o=r.length,s=ii(t,function(t,e,r,n,i,o,s,a,u,l,c,h){return[t,e,r,n,i,o,s,a,u,l,c,h]}),a=s.length;if(0==a){var u=[];for(n=0;n<e;n++)u.push(c([t.geometry.coordinates[n]],{parent:-1,winding:ci(t.geometry.coordinates[n])}));var l=d(u);return j(),G(),l}var h=[],f=[];for(n=0;n<e;n++){h.push([]);for(var p=0;p<t.geometry.coordinates[n].length-1;p++)h[n].push([new ai(t.geometry.coordinates[n][fi(p+1,t.geometry.coordinates[n].length-1)],1,[n,p],[n,fi(p+1,t.geometry.coordinates[n].length-1)],void 0)]),f.push(new ui(t.geometry.coordinates[n][p],[n,fi(p-1,t.geometry.coordinates[n].length-1)],[n,p],void 0,void 0,!1,!0))}for(n=0;n<a;n++)h[s[n][1]][s[n][2]].push(new ai(s[n][0],s[n][5],[s[n][1],s[n][2]],[s[n][6],s[n][7]],void 0)),s[n][11]&&f.push(new ui(s[n][0],[s[n][1],s[n][2]],[s[n][6],s[n][7]],void 0,void 0,!0,!0));var y=f.length;for(n=0;n<h.length;n++)for(p=0;p<h[n].length;p++)h[n][p].sort(function(t,e){return t.param<e.param?-1:1});var v=[];for(n=0;n<y;n++)v.push({minX:f[n].coord[0],minY:f[n].coord[1],maxX:f[n].coord[0],maxY:f[n].coord[1],index:n});var g=Et();g.load(v);for(n=0;n<h.length;n++)for(p=0;p<h[n].length;p++)for(var m=0;m<h[n][p].length;m++){b=m==h[n][p].length-1?h[n][fi(p+1,t.geometry.coordinates[n].length-1)][0].coord:h[n][p][m+1].coord;var _=g.search({minX:b[0],minY:b[1],maxX:b[0],maxY:b[1]})[0];h[n][p][m].nxtIsectAlongEdgeIn=_.index}for(n=0;n<h.length;n++)for(p=0;p<h[n].length;p++)for(m=0;m<h[n][p].length;m++){var b=h[n][p][m].coord,x=(_=g.search({minX:b[0],minY:b[1],maxX:b[0],maxY:b[1]})[0]).index;x<o?f[x].nxtIsectAlongRingAndEdge2=h[n][p][m].nxtIsectAlongEdgeIn:hi(f[x].ringAndEdge1,h[n][p][m].ringAndEdgeIn)?f[x].nxtIsectAlongRingAndEdge1=h[n][p][m].nxtIsectAlongEdgeIn:f[x].nxtIsectAlongRingAndEdge2=h[n][p][m].nxtIsectAlongEdgeIn}var S=[];for(n=0,p=0;p<e;p++){var w=n;for(m=0;m<t.geometry.coordinates[p].length-1;m++)f[n].coord[0]<f[w].coord[0]&&(w=n),n++;var C=f[w].nxtIsectAlongRingAndEdge2;for(m=0;m<f.length;m++)if(f[m].nxtIsectAlongRingAndEdge1==w||f[m].nxtIsectAlongRingAndEdge2==w){var I=m;break}var E=li([f[I].coord,f[w].coord,f[C].coord],!0)?1:-1;S.push({isect:w,parent:-1,winding:E})}S.sort(function(t,e){return f[t.isect].coord>f[e.isect].coord?-1:1});for(u=[];S.length>0;){var P=S.pop(),M=P.isect,L=P.parent,N=P.winding,T=u.length,O=[f[M].coord],A=M;if(f[M].ringAndEdge1Walkable)var R=f[M].ringAndEdge1,F=f[M].nxtIsectAlongRingAndEdge1;else R=f[M].ringAndEdge2,F=f[M].nxtIsectAlongRingAndEdge2;for(;!hi(f[M].coord,f[F].coord);){O.push(f[F].coord);var D=void 0;for(n=0;n<S.length;n++)if(S[n].isect==F){D=n;break}if(null!=D&&S.splice(D,1),hi(R,f[F].ringAndEdge1)){if(R=f[F].ringAndEdge2,f[F].ringAndEdge2Walkable=!1,f[F].ringAndEdge1Walkable){var k={isect:F};li([f[A].coord,f[F].coord,f[f[F].nxtIsectAlongRingAndEdge2].coord],1==N)?(k.parent=L,k.winding=-N):(k.parent=T,k.winding=N),S.push(k)}A=F,F=f[F].nxtIsectAlongRingAndEdge2}else{if(R=f[F].ringAndEdge1,f[F].ringAndEdge1Walkable=!1,f[F].ringAndEdge2Walkable){k={isect:F};li([f[A].coord,f[F].coord,f[f[F].nxtIsectAlongRingAndEdge1].coord],1==N)?(k.parent=L,k.winding=-N):(k.parent=T,k.winding=N),S.push(k)}A=F,F=f[F].nxtIsectAlongRingAndEdge1}}O.push(f[F].coord),u.push(c([O],{index:T,parent:L,winding:N,netWinding:void 0}))}l=d(u);function j(){for(var t=[],e=0;e<l.features.length;e++)-1==l.features[e].properties.parent&&t.push(e);if(t.length>1)for(e=0;e<t.length;e++){for(var r=-1,n=0;n<l.features.length;n++)t[e]!=n&&ge(l.features[t[e]].geometry.coordinates[0][0],l.features[n],{ignoreBoundary:!0})&&zn(l.features[n])<Infinity&&(r=n);l.features[t[e]].properties.parent=r}}function G(){for(var t=0;t<l.features.length;t++)if(-1==l.features[t].properties.parent){var e=l.features[t].properties.winding;l.features[t].properties.netWinding=e,B(t,e)}}function B(t,e){for(var r=0;r<l.features.length;r++)if(l.features[r].properties.parent==t){var n=e+l.features[r].properties.winding;l.features[r].properties.netWinding=n,B(r,n)}}return j(),G(),l}var ai=function(t,e,r,n,i){this.coord=t,this.param=e,this.ringAndEdgeIn=r,this.ringAndEdgeOut=n,this.nxtIsectAlongEdgeIn=i},ui=function(t,e,r,n,i,o,s){this.coord=t,this.ringAndEdge1=e,this.ringAndEdge2=r,this.nxtIsectAlongRingAndEdge1=n,this.nxtIsectAlongRingAndEdge2=i,this.ringAndEdge1Walkable=o,this.ringAndEdge2Walkable=s};function li(t,e){if(void 0===e&&(e=!0),3!=t.length)throw new Error("This function requires an array of three points [x,y]");return(t[1][0]-t[0][0])*(t[2][1]-t[0][1])-(t[1][1]-t[0][1])*(t[2][0]-t[0][0])>=0==e}function ci(t){for(var e=0,r=0;r<t.length-1;r++)t[r][0]<t[e][0]&&(e=r);if(li([t[fi(e-1,t.length-1)],t[e],t[fi(e+1,t.length-1)]],!0))var n=1;else n=-1;return n}function hi(t,e){if(!t||!e)return!1;if(t.length!=e.length)return!1;for(var r=0,n=t.length;r<n;r++)if(t[r]instanceof Array&&e[r]instanceof Array){if(!hi(t[r],e[r]))return!1}else if(t[r]!=e[r])return!1;return!0}function fi(t,e){return(t%e+e)%e}var pi=Math.PI/180,di=180/Math.PI,yi=function(t,e){this.lon=t,this.lat=e,this.x=pi*t,this.y=pi*e};yi.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},yi.prototype.antipode=function(){var t=-1*this.lat,e=this.lon<0?180+this.lon:-1*(180-this.lon);return new yi(e,t)};var vi=function(){this.coords=[],this.length=0};vi.prototype.move_to=function(t){this.length++,this.coords.push(t)};var gi=function(t){this.properties=t||{},this.geometries=[]};gi.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var t=[],e=0;e<this.geometries.length;e++)t.push(this.geometries[e].coords);return{geometry:{type:"MultiLineString",coordinates:t},type:"Feature",properties:this.properties}},gi.prototype.wkt=function(){for(var t="",e="LINESTRING(",r=function(t){e+=t[0]+" "+t[1]+","},n=0;n<this.geometries.length;n++){if(0===this.geometries[n].coords.length)return"LINESTRING(empty)";this.geometries[n].coords.forEach(r),t+=e.substring(0,e.length-1)+")"}return t};var mi=function(t,e,r){if(!t||void 0===t.x||void 0===t.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!e||void 0===e.x||void 0===e.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new yi(t.x,t.y),this.end=new yi(e.x,e.y),this.properties=r||{};var n=this.start.x-this.end.x,i=this.start.y-this.end.y,o=Math.pow(Math.sin(i/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(n/2),2);if(this.g=2*Math.asin(Math.sqrt(o)),this.g===Math.PI)throw new Error("it appears "+t.view()+" and "+e.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+t+" and "+e)};function _i(t,e){var r=[],n=Nn();return q(e,function(e){if(r.forEach(function(t,e){t.id=e}),r.length){var i=n.search(e);if(i.features.length){var o=xi(e,i);r=r.filter(function(t){return t.id!==o.id}),n.remove(o),k(bi(o,e),function(t){r.push(t),n.insert(t)})}}else(r=bi(t,e).features).forEach(function(t){t.bbox||(t.bbox=vr(Q(t)))}),n.load(d(r))}),d(r)}function bi(t,e){var r=[],n=$(t)[0],i=$(t)[t.geometry.coordinates.length-1];if(Si(n,K(e))||Si(i,K(e)))return d([t]);var o=Nn(),s=Jr(t);o.load(s);var a=o.search(e);if(!a.features.length)return d([t]);var u=xi(e,a),l=j(s,function(t,n,i){var o=$(n)[1],s=K(e);return i===u.id?(t.push(s),r.push(f(t)),Si(s,o)?[s]:[s,o]):(t.push(o),t)},[n]);return l.length>1&&r.push(f(l)),d(r)}function xi(t,e){if(!e.features.length)throw new Error("lines must contain features");if(1===e.features.length)return e.features[0];var r,n=1/0;return k(e,function(e){var i=Rn(e,t).properties.dist;i<n&&(r=e,n=i)}),r}function Si(t,e){return t[0]===e[0]&&t[1]===e[1]}function wi(t,e,r,n,i){void 0===i&&(i={});var o=i.steps||64,s=Ci(r),a=Ci(n),u=Array.isArray(t)||"Feature"!==t.type?{}:t.properties;if(s===a)return f(mr(t,e,i).geometry.coordinates[0],u);for(var l=s,c=s<a?a:a+360,h=l,p=[],d=0;h<c;)p.push(gr(t,e,h,i).geometry.coordinates),h=l+360*++d/o;return h>c&&p.push(gr(t,e,c,i).geometry.coordinates),f(p,u)}function Ci(t){var e=t%360;return e<0&&(e+=360),e}function Ii(t,e){void 0===e&&(e={});var r=it(t);switch(e.properties||"Feature"!==t.type||(e.properties=t.properties),r.type){case"Polygon":return Ei(r,e);case"MultiPolygon":return function(t,e){void 0===e&&(e={});var r=it(t).coordinates,n=e.properties?e.properties:"Feature"===t.type?t.properties:{},i=[];return r.forEach(function(t){i.push(Pi(t,n))}),d(i)}(r,e);default:throw new Error("invalid poly")}}function Ei(t,e){return void 0===e&&(e={}),Pi(it(t).coordinates,e.properties?e.properties:"Feature"===t.type?t.properties:{})}function Pi(t,e){return t.length>1?y(t,e):f(t[0],e)}function Mi(t,e){var r,n,i;void 0===e&&(e={});var o=e.properties,s=null===(r=e.autoComplete)||void 0===r||r,a=null===(n=e.orderCoords)||void 0===n||n;switch(null!==(i=e.mutate)&&void 0!==i&&i||(t=Ie(t)),t.type){case"FeatureCollection":var u=[];return t.features.forEach(function(t){u.push($(Li(t,{},s,a)))}),g(u,o);default:return Li(t,o,s,a)}}function Li(t,e,r,n){e=e||("Feature"===t.type?t.properties:{});var i=it(t),o=i.coordinates,s=i.type;if(!o.length)throw new Error("line must contain coordinates");switch(s){case"LineString":return r&&(o=Ni(o)),c([o],e);case"MultiLineString":var a=[],u=0;return o.forEach(function(t){if(r&&(t=Ni(t)),n){var e=function(t){var e=t[0],r=t[1],n=t[2],i=t[3];return Math.abs(e-n)*Math.abs(r-i)}(Q(f(t)));e>u?(a.unshift(t),u=e):a.push(t)}else a.push(t)}),c(a,e);default:throw new Error("geometry type "+s+" is not supported")}}function Ni(t){var e=t[0],r=e[0],n=e[1],i=t[t.length-1],o=i[0],s=i[1];return r===o&&n===s||t.push(e),t}function Ti(t,e){var r,n,i,o,s,a,u;for(n=1;n<=8;n*=2){for(r=[],o=!(Ai(i=t[t.length-1],e)&n),s=0;s<t.length;s++)(u=!(Ai(a=t[s],e)&n))!==o&&r.push(Oi(i,a,n,e)),u&&r.push(a),i=a,o=u;if(!(t=r).length)break}return r}function Oi(t,e,r,n){return 8&r?[t[0]+(e[0]-t[0])*(n[3]-t[1])/(e[1]-t[1]),n[3]]:4&r?[t[0]+(e[0]-t[0])*(n[1]-t[1])/(e[1]-t[1]),n[1]]:2&r?[n[2],t[1]+(e[1]-t[1])*(n[2]-t[0])/(e[0]-t[0])]:1&r?[n[0],t[1]+(e[1]-t[1])*(n[0]-t[0])/(e[0]-t[0])]:null}function Ai(t,e){var r=0;return t[0]<e[0]?r|=1:t[0]>e[2]&&(r|=2),t[1]<e[1]?r|=4:t[1]>e[3]&&(r|=8),r}function Ri(t,e){for(var r=[],n=0,i=t;n<i.length;n++){var o=Ti(i[n],e);o.length>0&&(o[0][0]===o[o.length-1][0]&&o[0][1]===o[o.length-1][1]||o.push(o[0]),o.length>=4&&r.push(o))}return r}mi.prototype.interpolate=function(t){var e=Math.sin((1-t)*this.g)/Math.sin(this.g),r=Math.sin(t*this.g)/Math.sin(this.g),n=e*Math.cos(this.start.y)*Math.cos(this.start.x)+r*Math.cos(this.end.y)*Math.cos(this.end.x),i=e*Math.cos(this.start.y)*Math.sin(this.start.x)+r*Math.cos(this.end.y)*Math.sin(this.end.x),o=e*Math.sin(this.start.y)+r*Math.sin(this.end.y),s=di*Math.atan2(o,Math.sqrt(Math.pow(n,2)+Math.pow(i,2)));return[di*Math.atan2(i,n),s]},mi.prototype.Arc=function(t,e){var r=[];if(!t||t<=2)r.push([this.start.lon,this.start.lat]),r.push([this.end.lon,this.end.lat]);else for(var n=1/(t-1),i=0;i<t;++i){var o=n*i,s=this.interpolate(o);r.push(s)}for(var a=!1,u=0,l=e&&e.offset?e.offset:10,c=180-l,h=-180+l,f=360-l,p=1;p<r.length;++p){var d=r[p-1][0],y=r[p][0],v=Math.abs(y-d);v>f&&(y>c&&d<h||d>c&&y<h)?a=!0:v>u&&(u=v)}var g=[];if(a&&u<l){var m=[];g.push(m);for(var _=0;_<r.length;++_){var b=parseFloat(r[_][0]);if(_>0&&Math.abs(b-r[_-1][0])>f){var x=parseFloat(r[_-1][0]),S=parseFloat(r[_-1][1]),w=parseFloat(r[_][0]),C=parseFloat(r[_][1]);if(x>-180&&x<h&&180===w&&_+1<r.length&&r[_-1][0]>-180&&r[_-1][0]<h){m.push([-180,r[_][1]]),_++,m.push([r[_][0],r[_][1]]);continue}if(x>c&&x<180&&-180===w&&_+1<r.length&&r[_-1][0]>c&&r[_-1][0]<180){m.push([180,r[_][1]]),_++,m.push([r[_][0],r[_][1]]);continue}if(x<h&&w>c){var I=x;x=w,w=I;var E=S;S=C,C=E}if(x>c&&w<h&&(w+=360),x<=180&&w>=180&&x<w){var P=(180-x)/(w-x),M=P*C+(1-P)*S;m.push([r[_-1][0]>c?180:-180,M]),(m=[]).push([r[_-1][0]>c?-180:180,M]),g.push(m)}else m=[],g.push(m);m.push([b,r[_][1]])}else m.push([r[_][0],r[_][1]])}}else{var L=[];g.push(L);for(var N=0;N<r.length;++N)L.push([r[N][0],r[N][1]])}for(var T=new gi(this.properties),O=0;O<g.length;++O){var A=new vi;T.geometries.push(A);for(var R=g[O],F=0;F<R.length;++F)A.move_to(R[F])}return T};var Fi=Ut(function(t,e){function r(t){var e=[];for(var r in t)e.push(r);return e}(t.exports="function"==typeof Object.keys?Object.keys:r).shim=r}),Di=Ut(function(t,e){var r="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function n(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function i(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}(e=t.exports=r?n:i).supported=n,e.unsupported=i}),ki=Ut(function(t){var e=Array.prototype.slice,r=t.exports=function(t,o,s){return s||(s={}),t===o||(t instanceof Date&&o instanceof Date?t.getTime()===o.getTime():!t||!o||"object"!=typeof t&&"object"!=typeof o?s.strict?t===o:t==o:function(t,o,s){var a,u;if(n(t)||n(o))return!1;if(t.prototype!==o.prototype)return!1;if(Di(t))return!!Di(o)&&(t=e.call(t),o=e.call(o),r(t,o,s));if(i(t)){if(!i(o))return!1;if(t.length!==o.length)return!1;for(a=0;a<t.length;a++)if(t[a]!==o[a])return!1;return!0}try{var l=Fi(t),c=Fi(o)}catch(t){return!1}if(l.length!=c.length)return!1;for(l.sort(),c.sort(),a=l.length-1;a>=0;a--)if(l[a]!=c[a])return!1;for(a=l.length-1;a>=0;a--)if(u=l[a],!r(t[u],o[u],s))return!1;return typeof t==typeof o}(t,o,s))};function n(t){return null==t}function i(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length)&&("function"==typeof t.copy&&"function"==typeof t.slice&&!(t.length>0&&"number"!=typeof t[0]))}});function ji(t,e,r){if(void 0===r&&(r={}),!L(r=r||{}))throw new Error("options is invalid");var n,i=r.tolerance||0,o=[],s=Nn(),a=Jr(t);return s.load(a),V(e,function(t){var e=!1;t&&(k(s.search(t),function(r){if(!1===e){var o=$(t).sort(),s=$(r).sort();ki(o,s)||(0===i?Yn(o[0],r)&&Yn(o[1],r):Rn(r,o[0]).properties.dist<=i&&Rn(r,o[1]).properties.dist<=i)?(e=!0,n=n?Gi(n,t):t):(0===i?Yn(s[0],t)&&Yn(s[1],t):Rn(t,s[0]).properties.dist<=i&&Rn(t,s[1]).properties.dist<=i)&&(n=n?Gi(n,r):r)}}),!1===e&&n&&(o.push(n),n=void 0))}),n&&o.push(n),d(o)}function Gi(t,e){var r=$(e),n=$(t),i=n[0],o=n[n.length-1],s=t.geometry.coordinates;return ki(r[0],i)?s.unshift(r[1]):ki(r[0],o)?s.push(r[1]):ki(r[1],i)?s.unshift(r[0]):ki(r[1],o)&&s.push(r[0]),t}function Bi(t){var e=t%360;return e<0&&(e+=360),e}function Ui(t,e,r){var n;return void 0===r&&(r={}),(n=r.final?qi(K(e),K(t)):qi(K(t),K(e)))>180?-(360-n):n}function qi(t,e){var r=I(t[1]),n=I(e[1]),i=I(e[0]-t[0]);i>Math.PI&&(i-=2*Math.PI),i<-Math.PI&&(i+=2*Math.PI);var o=Math.log(Math.tan(n/2+Math.PI/4)/Math.tan(r/2+Math.PI/4));return(C(Math.atan2(i,o))+360)%360}function zi(t,e,n,i){void 0===i&&(i={});var o=e<0,s=E(Math.abs(e),i.units,"meters");o&&(s=-Math.abs(s));var a=K(t),l=function(t,e,n,i){i=void 0===i?r:Number(i);var o=e/i,s=t[0]*Math.PI/180,a=I(t[1]),u=I(n),l=o*Math.cos(u),c=a+l;Math.abs(c)>Math.PI/2&&(c=c>0?Math.PI-c:-Math.PI-c);var h=Math.log(Math.tan(c/2+Math.PI/4)/Math.tan(a/2+Math.PI/4)),f=Math.abs(h)>1e-11?l/h:Math.cos(a),p=o*Math.sin(u)/f;return[(180*(s+p)/Math.PI+540)%360-180,180*c/Math.PI]}(a,s,n);return l[0]+=l[0]-a[0]>180?-360:a[0]-l[0]>180?360:0,u(l,i.properties)}function Vi(t,e,r,n,i,o){for(var s=0;s<t.length;s++){var a=t[s],u=t[s+1];s===t.length-1&&(u=t[0]),n=Hi(a,u,e),r<=0&&n>0?Hi(e,a,i)<0||(i=a):r>0&&n<=0&&(Wi(e,a,o)||(o=a)),r=n}return[i,o]}function Wi(t,e,r){return Hi(t,e,r)>0}function Hi(t,e,r){return(e[0]-t[0])*(r[1]-t[1])-(r[0]-t[0])*(e[1]-t[1])}function Xi(t){for(var e,r,n=$(t),i=0,o=1;o<n.length;)e=r||n[0],i+=((r=n[o])[0]-e[0])*(r[1]+e[1]),o++;return i>0}function Zi(t,e){switch("Feature"===t.type?t.geometry.type:t.type){case"GeometryCollection":return B(t,function(t){Zi(t,e)}),t;case"LineString":return Yi($(t),e),t;case"Polygon":return Ji($(t),e),t;case"MultiLineString":return $(t).forEach(function(t){Yi(t,e)}),t;case"MultiPolygon":return $(t).forEach(function(t){Ji(t,e)}),t;case"Point":case"MultiPoint":return t}}function Yi(t,e){Xi(t)===e&&t.reverse()}function Ji(t,e){Xi(t[0])!==e&&t[0].reverse();for(var r=1;r<t.length;r++)Xi(t[r])===e&&t[r].reverse()}function Qi(t,e){if(!L(e=e||{}))throw new Error("options is invalid");var r=e.zProperty||"elevation",n=e.flip,i=e.flags;nt(t,"Point","input must contain Points");for(var o=function(t,e){var r={};return k(t,function(t){var e=$(t)[1];r[e]||(r[e]=[]),r[e].push(t)}),Object.keys(r).map(function(t){return r[t].sort(function(t,e){return $(t)[0]-$(e)[0]})}).sort(function(t,r){return e?$(t[0])[1]-$(r[0])[1]:$(r[0])[1]-$(t[0])[1]})}
/*!
     * @license GNU Affero General Public License.
     * Copyright (c) 2015, 2015 Ronny Lorenz <ronny@tbi.univie.ac.at>
     * v. 1.2.0
     * https://github.com/RaumZeit/MarchingSquares.js
     *
     * MarchingSquaresJS is free software: you can redistribute it and/or modify
     * it under the terms of the GNU Affero General Public License as published by
     * the Free Software Foundation, either version 3 of the License, or
     * (at your option) any later version.
     *
     * MarchingSquaresJS is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     * GNU Affero General Public License for more details.
     *
     * As additional permission under GNU Affero General Public License version 3
     * section 7, third-party projects (personal or commercial) may distribute,
     * include, or link against UNMODIFIED VERSIONS of MarchingSquaresJS without the
     * requirement that said third-party project for that reason alone becomes
     * subject to any requirement of the GNU Affero General Public License version 3.
     * Any modifications to MarchingSquaresJS, however, must be shared with the public
     * and made available.
     *
     * In summary this:
     * - allows you to use MarchingSquaresJS at no cost
     * - allows you to use MarchingSquaresJS for both personal and commercial purposes
     * - allows you to distribute UNMODIFIED VERSIONS of MarchingSquaresJS under any
     *   license as long as this license notice is included
     * - enables you to keep the source code of your program that uses MarchingSquaresJS
     *   undisclosed
     * - forces you to share any modifications you have made to MarchingSquaresJS,
     *   e.g. bug-fixes
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with MarchingSquaresJS.  If not, see <http://www.gnu.org/licenses/>.
     */(t,n),s=[],a=0;a<o.length;a++){for(var u=o[a],l=[],c=0;c<u.length;c++){var h=u[c];h.properties[r]?l.push(h.properties[r]):l.push(0),!0===i&&(h.properties.matrixPosition=[a,c])}s.push(l)}return s}var Ki={successCallback:null,verbose:!1,polygons:!1},$i={};function to(t,e,r,n){n=n||{};for(var i=Object.keys(Ki),o=0;o<i.length;o++){var s=i[o],a=n[s];a=null!=a?a:Ki[s],$i[s]=a}$i.verbose&&console.log("MarchingSquaresJS-isoBands: computing isobands for ["+e+":"+(e+r)+"]");var u,l=function(t,e,r){for(var n=t.length-1,i=t[0].length-1,o={rows:n,cols:i,cells:[]},s=e+Math.abs(r),a=0;a<n;++a){o.cells[a]=[];for(var u=0;u<i;++u){var l=0,c=t[a+1][u],h=t[a+1][u+1],f=t[a][u+1],p=t[a][u];if(!(isNaN(c)||isNaN(h)||isNaN(f)||isNaN(p))){l|=c<e?0:c>s?128:64,l|=h<e?0:h>s?32:16,l|=f<e?0:f>s?8:4;var d=+(l|=p<e?0:p>s?2:1),y=0;if(17===l||18===l||33===l||34===l||38===l||68===l||72===l||98===l||102===l||132===l||136===l||137===l||152===l||153===l){var v=(c+h+f+p)/4;y=v>s?2:v<e?0:1,34===l?1===y?l=35:0===y&&(l=136):136===l?1===y?(l=35,y=4):0===y&&(l=34):17===l?1===y?(l=155,y=4):0===y&&(l=153):68===l?1===y?(l=103,y=4):0===y&&(l=102):153===l?1===y&&(l=155):102===l?1===y&&(l=103):152===l?y<2&&(l=156,y=1):137===l?y<2&&(l=139,y=1):98===l?y<2&&(l=99,y=1):38===l?y<2&&(l=39,y=1):18===l?y>0?(l=156,y=4):l=152:33===l?y>0?(l=139,y=4):l=137:72===l?y>0?(l=99,y=4):l=98:132===l&&(y>0?(l=39,y=4):l=38)}if(0!=l&&170!=l){var g,m,_,b,x,S,w,C;g=m=_=b=x=S=w=C=.5;var I=[];1===l?(_=1-Wo(e,f,p),C=1-Wo(e,c,p),I.push(Go[l])):169===l?(_=Wo(s,p,f),C=Wo(s,p,c),I.push(Go[l])):4===l?(S=1-Wo(e,h,f),b=Wo(e,p,f),I.push(ko[l])):166===l?(S=Wo(s,f,h),b=1-Wo(s,f,p),I.push(ko[l])):16===l?(x=Wo(e,f,h),m=Wo(e,c,h),I.push(Do[l])):154===l?(x=1-Wo(s,h,f),m=1-Wo(s,h,c),I.push(Do[l])):64===l?(w=Wo(e,p,c),g=1-Wo(e,h,c),I.push(Uo[l])):106===l?(w=1-Wo(s,c,p),g=Wo(s,c,h),I.push(Uo[l])):168===l?(b=Wo(s,p,f),_=Wo(e,p,f),C=Wo(e,p,c),w=Wo(s,p,c),I.push(jo[l]),I.push(Go[l])):2===l?(b=1-Wo(e,f,p),_=1-Wo(s,f,p),C=1-Wo(s,c,p),w=1-Wo(e,c,p),I.push(jo[l]),I.push(Go[l])):162===l?(x=Wo(s,f,h),S=Wo(e,f,h),b=1-Wo(e,f,p),_=1-Wo(s,f,p),I.push(jo[l]),I.push(Go[l])):8===l?(x=1-Wo(e,h,f),S=1-Wo(s,h,f),b=Wo(s,p,f),_=Wo(e,p,f),I.push(Do[l]),I.push(ko[l])):138===l?(x=1-Wo(e,h,f),S=1-Wo(s,h,f),g=1-Wo(s,h,c),m=1-Wo(e,h,c),I.push(Do[l]),I.push(ko[l])):32===l?(x=Wo(s,f,h),S=Wo(e,f,h),g=Wo(e,c,h),m=Wo(s,c,h),I.push(Do[l]),I.push(ko[l])):42===l?(C=1-Wo(s,c,p),w=1-Wo(e,c,p),g=Wo(e,c,h),m=Wo(s,c,h),I.push(Bo[l]),I.push(Uo[l])):128===l&&(C=Wo(e,p,c),w=Wo(s,p,c),g=1-Wo(s,h,c),m=1-Wo(e,h,c),I.push(Bo[l]),I.push(Uo[l])),5===l?(S=1-Wo(e,h,f),C=1-Wo(e,c,p),I.push(ko[l])):165===l?(S=Wo(s,f,h),C=Wo(s,p,c),I.push(ko[l])):20===l?(b=Wo(e,p,f),m=Wo(e,c,h),I.push(jo[l])):150===l?(b=1-Wo(s,f,p),m=1-Wo(s,h,c),I.push(jo[l])):80===l?(x=Wo(e,f,h),w=Wo(e,p,c),I.push(Do[l])):90===l?(x=1-Wo(s,h,f),w=1-Wo(s,c,p),I.push(Do[l])):65===l?(_=1-Wo(e,f,p),g=1-Wo(e,h,c),I.push(Go[l])):105===l?(_=Wo(s,p,f),g=Wo(s,c,h),I.push(Go[l])):160===l?(x=Wo(s,f,h),S=Wo(e,f,h),C=Wo(e,p,c),w=Wo(s,p,c),I.push(Do[l]),I.push(ko[l])):10===l?(x=1-Wo(e,h,f),S=1-Wo(s,h,f),C=1-Wo(s,c,p),w=1-Wo(e,c,p),I.push(Do[l]),I.push(ko[l])):130===l?(b=1-Wo(e,f,p),_=1-Wo(s,f,p),g=1-Wo(s,h,c),m=1-Wo(e,h,c),I.push(jo[l]),I.push(Go[l])):40===l?(b=Wo(s,p,f),_=Wo(e,p,f),g=Wo(e,c,h),m=Wo(s,c,h),I.push(jo[l]),I.push(Go[l])):101===l?(S=Wo(s,f,h),g=Wo(s,c,h),I.push(ko[l])):69===l?(S=1-Wo(e,h,f),g=1-Wo(e,h,c),I.push(ko[l])):149===l?(C=Wo(s,p,c),m=1-Wo(s,h,c),I.push(Bo[l])):21===l?(C=1-Wo(e,c,p),m=Wo(e,c,h),I.push(Bo[l])):86===l?(b=1-Wo(s,f,p),w=1-Wo(s,c,p),I.push(jo[l])):84===l?(b=Wo(e,p,f),w=Wo(e,p,c),I.push(jo[l])):89===l?(x=1-Wo(s,h,f),_=Wo(s,p,f),I.push(Go[l])):81===l?(x=Wo(e,f,h),_=1-Wo(e,f,p),I.push(Go[l])):96===l?(x=Wo(s,f,h),S=Wo(e,f,h),w=Wo(e,p,c),g=Wo(s,c,h),I.push(Do[l]),I.push(ko[l])):74===l?(x=1-Wo(e,h,f),S=1-Wo(s,h,f),w=1-Wo(s,c,p),g=1-Wo(e,h,c),I.push(Do[l]),I.push(ko[l])):24===l?(x=1-Wo(s,h,f),b=Wo(s,p,f),_=Wo(e,p,f),m=Wo(e,c,h),I.push(Do[l]),I.push(Go[l])):146===l?(x=Wo(e,f,h),b=1-Wo(e,f,p),_=1-Wo(s,f,p),m=1-Wo(s,h,c),I.push(Do[l]),I.push(Go[l])):6===l?(S=1-Wo(e,h,f),b=1-Wo(s,f,p),C=1-Wo(s,c,p),w=1-Wo(e,c,p),I.push(ko[l]),I.push(jo[l])):164===l?(S=Wo(s,f,h),b=Wo(e,p,f),C=Wo(e,p,c),w=Wo(s,p,c),I.push(ko[l]),I.push(jo[l])):129===l?(_=1-Wo(e,f,p),C=Wo(s,p,c),g=1-Wo(s,h,c),m=1-Wo(e,h,c),I.push(Go[l]),I.push(Bo[l])):41===l?(_=Wo(s,p,f),C=1-Wo(e,c,p),g=Wo(e,c,h),m=Wo(s,c,h),I.push(Go[l]),I.push(Bo[l])):66===l?(b=1-Wo(e,f,p),_=1-Wo(s,f,p),w=1-Wo(s,c,p),g=1-Wo(e,h,c),I.push(jo[l]),I.push(Go[l])):104===l?(b=Wo(s,p,f),_=Wo(e,p,f),w=Wo(e,p,c),g=Wo(s,c,h),I.push(Go[l]),I.push(qo[l])):144===l?(x=Wo(e,f,h),C=Wo(e,p,c),w=Wo(s,p,c),m=1-Wo(s,h,c),I.push(Do[l]),I.push(Uo[l])):26===l?(x=1-Wo(s,h,f),C=1-Wo(s,c,p),w=1-Wo(e,c,p),m=Wo(e,c,h),I.push(Do[l]),I.push(Uo[l])):36===l?(S=Wo(s,f,h),b=Wo(e,p,f),g=Wo(e,c,h),m=Wo(s,c,h),I.push(ko[l]),I.push(jo[l])):134===l?(S=1-Wo(e,h,f),b=1-Wo(s,f,p),g=1-Wo(s,h,c),m=1-Wo(e,h,c),I.push(ko[l]),I.push(jo[l])):9===l?(x=1-Wo(e,h,f),S=1-Wo(s,h,f),_=Wo(s,p,f),C=1-Wo(e,c,p),I.push(Do[l]),I.push(ko[l])):161===l?(x=Wo(s,f,h),S=Wo(e,f,h),_=1-Wo(e,f,p),C=Wo(s,p,c),I.push(Do[l]),I.push(ko[l])):37===l?(S=Wo(s,f,h),C=1-Wo(e,c,p),g=Wo(e,c,h),m=Wo(s,c,h),I.push(ko[l]),I.push(Bo[l])):133===l?(S=1-Wo(e,h,f),C=Wo(s,p,c),g=1-Wo(s,h,c),m=1-Wo(e,h,c),I.push(ko[l]),I.push(Bo[l])):148===l?(b=Wo(e,p,f),C=Wo(e,p,c),w=Wo(s,p,c),m=1-Wo(s,h,c),I.push(jo[l]),I.push(Uo[l])):22===l?(b=1-Wo(s,f,p),C=1-Wo(s,c,p),w=1-Wo(e,c,p),m=Wo(e,c,h),I.push(jo[l]),I.push(Uo[l])):82===l?(x=Wo(e,f,h),b=1-Wo(e,f,p),_=1-Wo(s,f,p),w=1-Wo(s,c,p),I.push(Do[l]),I.push(Go[l])):88===l?(x=1-Wo(s,h,f),b=Wo(s,p,f),_=Wo(e,p,f),w=Wo(e,p,c),I.push(Do[l]),I.push(Go[l])):73===l?(x=1-Wo(e,h,f),S=1-Wo(s,h,f),_=Wo(s,p,f),g=1-Wo(e,h,c),I.push(Do[l]),I.push(ko[l])):97===l?(x=Wo(s,f,h),S=Wo(e,f,h),_=1-Wo(e,f,p),g=Wo(s,c,h),I.push(Do[l]),I.push(ko[l])):145===l?(x=Wo(e,f,h),_=1-Wo(e,f,p),C=Wo(s,p,c),m=1-Wo(s,h,c),I.push(Do[l]),I.push(Bo[l])):25===l?(x=1-Wo(s,h,f),_=Wo(s,p,f),C=1-Wo(e,c,p),m=Wo(e,c,h),I.push(Do[l]),I.push(Bo[l])):70===l?(S=1-Wo(e,h,f),b=1-Wo(s,f,p),w=1-Wo(s,c,p),g=1-Wo(e,h,c),I.push(ko[l]),I.push(jo[l])):100===l?(S=Wo(s,f,h),b=Wo(e,p,f),w=Wo(e,p,c),g=Wo(s,c,h),I.push(ko[l]),I.push(jo[l])):34===l?(0===y?(x=1-Wo(e,h,f),S=1-Wo(s,h,f),b=Wo(s,p,f),_=Wo(e,p,f),C=Wo(e,p,c),w=Wo(s,p,c),g=1-Wo(s,h,c),m=1-Wo(e,h,c)):(x=Wo(s,f,h),S=Wo(e,f,h),b=1-Wo(e,f,p),_=1-Wo(s,f,p),C=1-Wo(s,c,p),w=1-Wo(e,c,p),g=Wo(e,c,h),m=Wo(s,c,h)),I.push(Do[l]),I.push(ko[l]),I.push(Bo[l]),I.push(Uo[l])):35===l?(4===y?(x=1-Wo(e,h,f),S=1-Wo(s,h,f),b=Wo(s,p,f),_=Wo(e,p,f),C=Wo(e,p,c),w=Wo(s,p,c),g=1-Wo(s,h,c),m=1-Wo(e,h,c)):(x=Wo(s,f,h),S=Wo(e,f,h),b=1-Wo(e,f,p),_=1-Wo(s,f,p),C=1-Wo(s,c,p),w=1-Wo(e,c,p),g=Wo(e,c,h),m=Wo(s,c,h)),I.push(Do[l]),I.push(ko[l]),I.push(Go[l]),I.push(Uo[l])):136===l?(0===y?(x=Wo(s,f,h),S=Wo(e,f,h),b=1-Wo(e,f,p),_=1-Wo(s,f,p),C=1-Wo(s,c,p),w=1-Wo(e,c,p),g=Wo(e,c,h),m=Wo(s,c,h)):(x=1-Wo(e,h,f),S=1-Wo(s,h,f),b=Wo(s,p,f),_=Wo(e,p,f),C=Wo(e,p,c),w=Wo(s,p,c),g=1-Wo(s,h,c),m=1-Wo(e,h,c)),I.push(Do[l]),I.push(ko[l]),I.push(Bo[l]),I.push(Uo[l])):153===l?(0===y?(x=Wo(e,f,h),_=1-Wo(e,f,p),C=1-Wo(e,c,p),m=Wo(e,c,h)):(x=1-Wo(s,h,f),_=Wo(s,p,f),C=Wo(s,p,c),m=1-Wo(s,h,c)),I.push(Do[l]),I.push(Go[l])):102===l?(0===y?(S=1-Wo(e,h,f),b=Wo(e,p,f),w=Wo(e,p,c),g=1-Wo(e,h,c)):(S=Wo(s,f,h),b=1-Wo(s,f,p),w=1-Wo(s,c,p),g=Wo(s,c,h)),I.push(ko[l]),I.push(Uo[l])):155===l?(4===y?(x=Wo(e,f,h),_=1-Wo(e,f,p),C=1-Wo(e,c,p),m=Wo(e,c,h)):(x=1-Wo(s,h,f),_=Wo(s,p,f),C=Wo(s,p,c),m=1-Wo(s,h,c)),I.push(Do[l]),I.push(Bo[l])):103===l?(4===y?(S=1-Wo(e,h,f),b=Wo(e,p,f),w=Wo(e,p,c),g=1-Wo(e,h,c)):(S=Wo(s,f,h),b=1-Wo(s,f,p),w=1-Wo(s,c,p),g=Wo(s,c,h)),I.push(ko[l]),I.push(jo[l])):152===l?(0===y?(x=Wo(e,f,h),b=1-Wo(e,f,p),_=1-Wo(s,f,p),C=1-Wo(s,c,p),w=1-Wo(e,c,p),m=Wo(e,c,h)):(x=1-Wo(s,h,f),b=Wo(s,p,f),_=Wo(e,p,f),C=Wo(e,p,c),w=Wo(s,p,c),m=1-Wo(s,h,c)),I.push(Do[l]),I.push(jo[l]),I.push(Go[l])):156===l?(4===y?(x=Wo(e,f,h),b=1-Wo(e,f,p),_=1-Wo(s,f,p),C=1-Wo(s,c,p),w=1-Wo(e,c,p),m=Wo(e,c,h)):(x=1-Wo(s,h,f),b=Wo(s,p,f),_=Wo(e,p,f),C=Wo(e,p,c),w=Wo(s,p,c),m=1-Wo(s,h,c)),I.push(Do[l]),I.push(Go[l]),I.push(Uo[l])):137===l?(0===y?(x=Wo(s,f,h),S=Wo(e,f,h),_=1-Wo(e,f,p),C=1-Wo(e,c,p),g=Wo(e,c,h),m=Wo(s,c,h)):(x=1-Wo(e,h,f),S=1-Wo(s,h,f),_=Wo(s,p,f),C=Wo(s,p,c),g=1-Wo(s,h,c),m=1-Wo(e,h,c)),I.push(Do[l]),I.push(ko[l]),I.push(Go[l])):139===l?(4===y?(x=Wo(s,f,h),S=Wo(e,f,h),_=1-Wo(e,f,p),C=1-Wo(e,c,p),g=Wo(e,c,h),m=Wo(s,c,h)):(x=1-Wo(e,h,f),S=1-Wo(s,h,f),_=Wo(s,p,f),C=Wo(s,p,c),g=1-Wo(s,h,c),m=1-Wo(e,h,c)),I.push(Do[l]),I.push(ko[l]),I.push(Bo[l])):98===l?(0===y?(x=1-Wo(e,h,f),S=1-Wo(s,h,f),b=Wo(s,p,f),_=Wo(e,p,f),w=Wo(e,p,c),g=1-Wo(e,h,c)):(x=Wo(s,f,h),S=Wo(e,f,h),b=1-Wo(e,f,p),_=1-Wo(s,f,p),w=1-Wo(s,c,p),g=Wo(s,c,h)),I.push(Do[l]),I.push(ko[l]),I.push(Uo[l])):99===l?(4===y?(x=1-Wo(e,h,f),S=1-Wo(s,h,f),b=Wo(s,p,f),_=Wo(e,p,f),w=Wo(e,p,c),g=1-Wo(e,h,c)):(x=Wo(s,f,h),S=Wo(e,f,h),b=1-Wo(e,f,p),_=1-Wo(s,f,p),w=1-Wo(s,c,p),g=Wo(s,c,h)),I.push(Do[l]),I.push(ko[l]),I.push(Go[l])):38===l?(0===y?(S=1-Wo(e,h,f),b=Wo(e,p,f),C=Wo(e,p,c),w=Wo(s,p,c),g=1-Wo(s,h,c),m=1-Wo(e,h,c)):(S=Wo(s,f,h),b=1-Wo(s,f,p),C=1-Wo(s,c,p),w=1-Wo(e,c,p),g=Wo(e,c,h),m=Wo(s,c,h)),I.push(ko[l]),I.push(Bo[l]),I.push(Uo[l])):39===l?(4===y?(S=1-Wo(e,h,f),b=Wo(e,p,f),C=Wo(e,p,c),w=Wo(s,p,c),g=1-Wo(s,h,c),m=1-Wo(e,h,c)):(S=Wo(s,f,h),b=1-Wo(s,f,p),C=1-Wo(s,c,p),w=1-Wo(e,c,p),g=Wo(e,c,h),m=Wo(s,c,h)),I.push(ko[l]),I.push(jo[l]),I.push(Uo[l])):85===l&&(x=1,S=0,b=1,_=0,C=0,w=1,g=0,m=1),(g<0||g>1||m<0||m>1||x<0||x>1||b<0||b>1||C<0||C>1||w<0||w>1)&&console.log("MarchingSquaresJS-isoBands: "+l+" "+d+" "+c+","+h+","+f+","+p+" "+y+" "+g+" "+m+" "+x+" "+S+" "+b+" "+_+" "+C+" "+w),o.cells[a][u]={cval:l,cval_real:d,flipped:y,topleft:g,topright:m,righttop:x,rightbottom:S,bottomright:b,bottomleft:_,leftbottom:C,lefttop:w,edges:I}}}}}return o}(t,e,r);return $i.polygons?($i.verbose&&console.log("MarchingSquaresJS-isoBands: returning single polygons for each grid cell"),u=function(t){var e=[],r=0;return t.cells.forEach(function(t,n){t.forEach(function(t,i){if(void 0!==t){var o=Vo[t.cval](t);"object"==typeof o&&Ho(o)?"object"==typeof o[0]&&Ho(o[0])?"object"==typeof o[0][0]&&Ho(o[0][0])?o.forEach(function(t){t.forEach(function(t){t[0]+=i,t[1]+=n}),e[r++]=t}):(o.forEach(function(t){t[0]+=i,t[1]+=n}),e[r++]=o):console.log("MarchingSquaresJS-isoBands: bandcell polygon with malformed coordinates"):console.log("MarchingSquaresJS-isoBands: bandcell polygon with null coordinates")}})}),e}(l)):($i.verbose&&console.log("MarchingSquaresJS-isoBands: returning polygon paths for entire data grid"),u=function(t){for(var e=[],r=t.rows,n=t.cols,i=[],o=0;o<r;o++)for(var s=0;s<n;s++)if(void 0!==t.cells[o][s]&&t.cells[o][s].edges.length>0){var a=Zo(t.cells[o][s]),u=null,l=s,c=o;null!==a&&i.push([a.p[0]+l,a.p[1]+c]);do{if(null===(u=Yo(t.cells[c][l],a.x,a.y,a.o)))break;if(i.push([u.p[0]+l,u.p[1]+c]),l+=u.x,a=u,(c+=u.y)<0||c>=r||l<0||l>=n||void 0===t.cells[c][l]){var h=Xo(t,l-=u.x,c-=u.y,u.x,u.y,u.o);if(null===h)break;h.path.forEach(function(t){i.push(t)}),l=h.i,c=h.j,a=h}}while(void 0!==t.cells[c][l]&&t.cells[c][l].edges.length>0);e.push(i),i=[],t.cells[o][s].edges.length>0&&s--}return e}(l)),"function"==typeof $i.successCallback&&$i.successCallback(u),u}var eo=64,ro=16,no=[],io=[],oo=[],so=[],ao=[],uo=[],lo=[],co=[],ho=[],fo=[],po=[],yo=[],vo=[],go=[],mo=[],_o=[],bo=[],xo=[],So=[],wo=[],Co=[],Io=[],Eo=[],Po=[];lo[85]=fo[85]=-1,co[85]=po[85]=0,ho[85]=yo[85]=1,So[85]=Io[85]=1,wo[85]=Eo[85]=0,Co[85]=Po[85]=1,no[85]=so[85]=0,io[85]=ao[85]=-1,oo[85]=mo[85]=0,_o[85]=vo[85]=0,bo[85]=go[85]=1,uo[85]=xo[85]=1,Io[1]=Io[169]=0,Eo[1]=Eo[169]=-1,Po[1]=Po[169]=0,vo[1]=vo[169]=-1,go[1]=go[169]=0,mo[1]=mo[169]=0,fo[4]=fo[166]=0,po[4]=po[166]=-1,yo[4]=yo[166]=1,_o[4]=_o[166]=1,bo[4]=bo[166]=0,xo[4]=xo[166]=0,lo[16]=lo[154]=0,co[16]=co[154]=1,ho[16]=ho[154]=1,so[16]=so[154]=1,ao[16]=ao[154]=0,uo[16]=uo[154]=1,So[64]=So[106]=0,wo[64]=wo[106]=1,Co[64]=Co[106]=0,no[64]=no[106]=-1,io[64]=io[106]=0,oo[64]=oo[106]=1,So[2]=So[168]=0,wo[2]=wo[168]=-1,Co[2]=Co[168]=1,Io[2]=Io[168]=0,Eo[2]=Eo[168]=-1,Po[2]=Po[168]=0,vo[2]=vo[168]=-1,go[2]=go[168]=0,mo[2]=mo[168]=0,_o[2]=_o[168]=-1,bo[2]=bo[168]=0,xo[2]=xo[168]=1,lo[8]=lo[162]=0,co[8]=co[162]=-1,ho[8]=ho[162]=0,fo[8]=fo[162]=0,po[8]=po[162]=-1,yo[8]=yo[162]=1,vo[8]=vo[162]=1,go[8]=go[162]=0,mo[8]=mo[162]=1,_o[8]=_o[162]=1,bo[8]=bo[162]=0,xo[8]=xo[162]=0,lo[32]=lo[138]=0,co[32]=co[138]=1,ho[32]=ho[138]=1,fo[32]=fo[138]=0,po[32]=po[138]=1,yo[32]=yo[138]=0,no[32]=no[138]=1,io[32]=io[138]=0,oo[32]=oo[138]=0,so[32]=so[138]=1,ao[32]=ao[138]=0,uo[32]=uo[138]=1,Io[128]=Io[42]=0,Eo[128]=Eo[42]=1,Po[128]=Po[42]=1,So[128]=So[42]=0,wo[128]=wo[42]=1,Co[128]=Co[42]=0,no[128]=no[42]=-1,io[128]=io[42]=0,oo[128]=oo[42]=1,so[128]=so[42]=-1,ao[128]=ao[42]=0,uo[128]=uo[42]=0,fo[5]=fo[165]=-1,po[5]=po[165]=0,yo[5]=yo[165]=0,Io[5]=Io[165]=1,Eo[5]=Eo[165]=0,Po[5]=Po[165]=0,_o[20]=_o[150]=0,bo[20]=bo[150]=1,xo[20]=xo[150]=1,so[20]=so[150]=0,ao[20]=ao[150]=-1,uo[20]=uo[150]=1,lo[80]=lo[90]=-1,co[80]=co[90]=0,ho[80]=ho[90]=1,So[80]=So[90]=1,wo[80]=wo[90]=0,Co[80]=Co[90]=1,vo[65]=vo[105]=0,go[65]=go[105]=1,mo[65]=mo[105]=0,no[65]=no[105]=0,io[65]=io[105]=-1,oo[65]=oo[105]=0,lo[160]=lo[10]=-1,co[160]=co[10]=0,ho[160]=ho[10]=1,fo[160]=fo[10]=-1,po[160]=po[10]=0,yo[160]=yo[10]=0,Io[160]=Io[10]=1,Eo[160]=Eo[10]=0,Po[160]=Po[10]=0,So[160]=So[10]=1,wo[160]=wo[10]=0,Co[160]=Co[10]=1,_o[130]=_o[40]=0,bo[130]=bo[40]=1,xo[130]=xo[40]=1,vo[130]=vo[40]=0,go[130]=go[40]=1,mo[130]=mo[40]=0,no[130]=no[40]=0,io[130]=io[40]=-1,oo[130]=oo[40]=0,so[130]=so[40]=0,ao[130]=ao[40]=-1,uo[130]=uo[40]=1,fo[37]=fo[133]=0,po[37]=po[133]=1,yo[37]=yo[133]=1,Io[37]=Io[133]=0,Eo[37]=Eo[133]=1,Po[37]=Po[133]=0,no[37]=no[133]=-1,io[37]=io[133]=0,oo[37]=oo[133]=0,so[37]=so[133]=1,ao[37]=ao[133]=0,uo[37]=uo[133]=0,_o[148]=_o[22]=-1,bo[148]=bo[22]=0,xo[148]=xo[22]=0,Io[148]=Io[22]=0,Eo[148]=Eo[22]=-1,Po[148]=Po[22]=1,So[148]=So[22]=0,wo[148]=wo[22]=1,Co[148]=Co[22]=1,so[148]=so[22]=-1,ao[148]=ao[22]=0,uo[148]=uo[22]=1,lo[82]=lo[88]=0,co[82]=co[88]=-1,ho[82]=ho[88]=1,_o[82]=_o[88]=1,bo[82]=bo[88]=0,xo[82]=xo[88]=1,vo[82]=vo[88]=-1,go[82]=go[88]=0,mo[82]=mo[88]=1,So[82]=So[88]=0,wo[82]=wo[88]=-1,Co[82]=Co[88]=0,lo[73]=lo[97]=0,co[73]=co[97]=1,ho[73]=ho[97]=0,fo[73]=fo[97]=0,po[73]=po[97]=-1,yo[73]=yo[97]=0,vo[73]=vo[97]=1,go[73]=go[97]=0,mo[73]=mo[97]=0,no[73]=no[97]=1,io[73]=io[97]=0,oo[73]=oo[97]=1,lo[145]=lo[25]=0,co[145]=co[25]=-1,ho[145]=ho[25]=0,vo[145]=vo[25]=1,go[145]=go[25]=0,mo[145]=mo[25]=1,Io[145]=Io[25]=0,Eo[145]=Eo[25]=1,Po[145]=Po[25]=1,so[145]=so[25]=-1,ao[145]=ao[25]=0,uo[145]=uo[25]=0,fo[70]=fo[100]=0,po[70]=po[100]=1,yo[70]=yo[100]=0,_o[70]=_o[100]=-1,bo[70]=bo[100]=0,xo[70]=xo[100]=1,So[70]=So[100]=0,wo[70]=wo[100]=-1,Co[70]=Co[100]=1,no[70]=no[100]=1,io[70]=io[100]=0,oo[70]=oo[100]=0,fo[101]=fo[69]=0,po[101]=po[69]=1,yo[101]=yo[69]=0,no[101]=no[69]=1,io[101]=io[69]=0,oo[101]=oo[69]=0,Io[149]=Io[21]=0,Eo[149]=Eo[21]=1,Po[149]=Po[21]=1,so[149]=so[21]=-1,ao[149]=ao[21]=0,uo[149]=uo[21]=0,_o[86]=_o[84]=-1,bo[86]=bo[84]=0,xo[86]=xo[84]=1,So[86]=So[84]=0,wo[86]=wo[84]=-1,Co[86]=Co[84]=1,lo[89]=lo[81]=0,co[89]=co[81]=-1,ho[89]=ho[81]=0,vo[89]=vo[81]=1,go[89]=go[81]=0,mo[89]=mo[81]=1,lo[96]=lo[74]=0,co[96]=co[74]=1,ho[96]=ho[74]=0,fo[96]=fo[74]=-1,po[96]=po[74]=0,yo[96]=yo[74]=1,So[96]=So[74]=1,wo[96]=wo[74]=0,Co[96]=Co[74]=0,no[96]=no[74]=1,io[96]=io[74]=0,oo[96]=oo[74]=1,lo[24]=lo[146]=0,co[24]=co[146]=-1,ho[24]=ho[146]=1,_o[24]=_o[146]=1,bo[24]=bo[146]=0,xo[24]=xo[146]=1,vo[24]=vo[146]=0,go[24]=go[146]=1,mo[24]=mo[146]=1,so[24]=so[146]=0,ao[24]=ao[146]=-1,uo[24]=uo[146]=0,fo[6]=fo[164]=-1,po[6]=po[164]=0,yo[6]=yo[164]=1,_o[6]=_o[164]=-1,bo[6]=bo[164]=0,xo[6]=xo[164]=0,Io[6]=Io[164]=0,Eo[6]=Eo[164]=-1,Po[6]=Po[164]=1,So[6]=So[164]=1,wo[6]=wo[164]=0,Co[6]=Co[164]=0,vo[129]=vo[41]=0,go[129]=go[41]=1,mo[129]=mo[41]=1,Io[129]=Io[41]=0,Eo[129]=Eo[41]=1,Po[129]=Po[41]=0,no[129]=no[41]=-1,io[129]=io[41]=0,oo[129]=oo[41]=0,so[129]=so[41]=0,ao[129]=ao[41]=-1,uo[129]=uo[41]=0,_o[66]=_o[104]=0,bo[66]=bo[104]=1,xo[66]=xo[104]=0,vo[66]=vo[104]=-1,go[66]=go[104]=0,mo[66]=mo[104]=1,So[66]=So[104]=0,wo[66]=wo[104]=-1,Co[66]=Co[104]=0,no[66]=no[104]=0,io[66]=io[104]=-1,oo[66]=oo[104]=1,lo[144]=lo[26]=-1,co[144]=co[26]=0,ho[144]=ho[26]=0,Io[144]=Io[26]=1,Eo[144]=Eo[26]=0,Po[144]=Po[26]=1,So[144]=So[26]=0,wo[144]=wo[26]=1,Co[144]=Co[26]=1,so[144]=so[26]=-1,ao[144]=ao[26]=0,uo[144]=uo[26]=1,fo[36]=fo[134]=0,po[36]=po[134]=1,yo[36]=yo[134]=1,_o[36]=_o[134]=0,bo[36]=bo[134]=1,xo[36]=xo[134]=0,no[36]=no[134]=0,io[36]=io[134]=-1,oo[36]=oo[134]=1,so[36]=so[134]=1,ao[36]=ao[134]=0,uo[36]=uo[134]=0,lo[9]=lo[161]=-1,co[9]=co[161]=0,ho[9]=ho[161]=0,fo[9]=fo[161]=0,po[9]=po[161]=-1,yo[9]=yo[161]=0,vo[9]=vo[161]=1,go[9]=go[161]=0,mo[9]=mo[161]=0,Io[9]=Io[161]=1,Eo[9]=Eo[161]=0,Po[9]=Po[161]=1,lo[136]=0,co[136]=1,ho[136]=1,fo[136]=0,po[136]=1,yo[136]=0,_o[136]=-1,bo[136]=0,xo[136]=1,vo[136]=-1,go[136]=0,mo[136]=0,Io[136]=0,Eo[136]=-1,Po[136]=0,So[136]=0,wo[136]=-1,Co[136]=1,no[136]=1,io[136]=0,oo[136]=0,so[136]=1,ao[136]=0,uo[136]=1,lo[34]=0,co[34]=-1,ho[34]=0,fo[34]=0,po[34]=-1,yo[34]=1,_o[34]=1,bo[34]=0,xo[34]=0,vo[34]=1,go[34]=0,mo[34]=1,Io[34]=0,Eo[34]=1,Po[34]=1,So[34]=0,wo[34]=1,Co[34]=0,no[34]=-1,io[34]=0,oo[34]=1,so[34]=-1,ao[34]=0,uo[34]=0,lo[35]=0,co[35]=1,ho[35]=1,fo[35]=0,po[35]=-1,yo[35]=1,_o[35]=1,bo[35]=0,xo[35]=0,vo[35]=-1,go[35]=0,mo[35]=0,Io[35]=0,Eo[35]=-1,Po[35]=0,So[35]=0,wo[35]=1,Co[35]=0,no[35]=-1,io[35]=0,oo[35]=1,so[35]=1,ao[35]=0,uo[35]=1,lo[153]=0,co[153]=1,ho[153]=1,vo[153]=-1,go[153]=0,mo[153]=0,Io[153]=0,Eo[153]=-1,Po[153]=0,so[153]=1,ao[153]=0,uo[153]=1,fo[102]=0,po[102]=-1,yo[102]=1,_o[102]=1,bo[102]=0,xo[102]=0,So[102]=0,wo[102]=1,Co[102]=0,no[102]=-1,io[102]=0,oo[102]=1,lo[155]=0,co[155]=-1,ho[155]=0,vo[155]=1,go[155]=0,mo[155]=1,Io[155]=0,Eo[155]=1,Po[155]=1,so[155]=-1,ao[155]=0,uo[155]=0,fo[103]=0,po[103]=1,yo[103]=0,_o[103]=-1,bo[103]=0,xo[103]=1,So[103]=0,wo[103]=-1,Co[103]=1,no[103]=1,io[103]=0,oo[103]=0,lo[152]=0,co[152]=1,ho[152]=1,_o[152]=-1,bo[152]=0,xo[152]=1,vo[152]=-1,go[152]=0,mo[152]=0,Io[152]=0,Eo[152]=-1,Po[152]=0,So[152]=0,wo[152]=-1,Co[152]=1,so[152]=1,ao[152]=0,uo[152]=1,lo[156]=0,co[156]=-1,ho[156]=1,_o[156]=1,bo[156]=0,xo[156]=1,vo[156]=-1,go[156]=0,mo[156]=0,Io[156]=0,Eo[156]=-1,Po[156]=0,So[156]=0,wo[156]=1,Co[156]=1,so[156]=-1,ao[156]=0,uo[156]=1,lo[137]=0,co[137]=1,ho[137]=1,fo[137]=0,po[137]=1,yo[137]=0,vo[137]=-1,go[137]=0,mo[137]=0,Io[137]=0,Eo[137]=-1,Po[137]=0,no[137]=1,io[137]=0,oo[137]=0,so[137]=1,ao[137]=0,uo[137]=1,lo[139]=0,co[139]=1,ho[139]=1,fo[139]=0,po[139]=-1,yo[139]=0,vo[139]=1,go[139]=0,mo[139]=0,Io[139]=0,Eo[139]=1,Po[139]=0,no[139]=-1,io[139]=0,oo[139]=0,so[139]=1,ao[139]=0,uo[139]=1,lo[98]=0,co[98]=-1,ho[98]=0,fo[98]=0,po[98]=-1,yo[98]=1,_o[98]=1,bo[98]=0,xo[98]=0,vo[98]=1,go[98]=0,mo[98]=1,So[98]=0,wo[98]=1,Co[98]=0,no[98]=-1,io[98]=0,oo[98]=1,lo[99]=0,co[99]=1,ho[99]=0,fo[99]=0,po[99]=-1,yo[99]=1,_o[99]=1,bo[99]=0,xo[99]=0,vo[99]=-1,go[99]=0,mo[99]=1,So[99]=0,wo[99]=-1,Co[99]=0,no[99]=1,io[99]=0,oo[99]=1,fo[38]=0,po[38]=-1,yo[38]=1,_o[38]=1,bo[38]=0,xo[38]=0,Io[38]=0,Eo[38]=1,Po[38]=1,So[38]=0,wo[38]=1,Co[38]=0,no[38]=-1,io[38]=0,oo[38]=1,so[38]=-1,ao[38]=0,uo[38]=0,fo[39]=0,po[39]=1,yo[39]=1,_o[39]=-1,bo[39]=0,xo[39]=0,Io[39]=0,Eo[39]=-1,Po[39]=1,So[39]=0,wo[39]=1,Co[39]=0,no[39]=-1,io[39]=0,oo[39]=1,so[39]=1,ao[39]=0,uo[39]=0;var Mo=function(t){return[[t.bottomleft,0],[0,0],[0,t.leftbottom]]},Lo=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0]]},No=function(t){return[[t.topright,1],[1,1],[1,t.righttop]]},To=function(t){return[[0,t.lefttop],[0,1],[t.topleft,1]]},Oo=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop]]},Ao=function(t){return[[t.bottomright,0],[t.bottomleft,0],[1,t.righttop],[1,t.rightbottom]]},Ro=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.topleft,1],[t.topright,1]]},Fo=function(t){return[[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},Do=[],ko=[],jo=[],Go=[],Bo=[],Uo=[],qo=[],zo=[];Go[1]=Bo[1]=18,Go[169]=Bo[169]=18,jo[4]=ko[4]=12,jo[166]=ko[166]=12,Do[16]=zo[16]=4,Do[154]=zo[154]=4,Uo[64]=qo[64]=22,Uo[106]=qo[106]=22,jo[2]=Uo[2]=17,Go[2]=Bo[2]=18,jo[168]=Uo[168]=17,Go[168]=Bo[168]=18,Do[8]=Go[8]=9,ko[8]=jo[8]=12,Do[162]=Go[162]=9,ko[162]=jo[162]=12,Do[32]=zo[32]=4,ko[32]=qo[32]=1,Do[138]=zo[138]=4,ko[138]=qo[138]=1,Bo[128]=zo[128]=21,Uo[128]=qo[128]=22,Bo[42]=zo[42]=21,Uo[42]=qo[42]=22,ko[5]=Bo[5]=14,ko[165]=Bo[165]=14,jo[20]=zo[20]=6,jo[150]=zo[150]=6,Do[80]=Uo[80]=11,Do[90]=Uo[90]=11,Go[65]=qo[65]=3,Go[105]=qo[105]=3,Do[160]=Uo[160]=11,ko[160]=Bo[160]=14,Do[10]=Uo[10]=11,ko[10]=Bo[10]=14,jo[130]=zo[130]=6,Go[130]=qo[130]=3,jo[40]=zo[40]=6,Go[40]=qo[40]=3,ko[101]=qo[101]=1,ko[69]=qo[69]=1,Bo[149]=zo[149]=21,Bo[21]=zo[21]=21,jo[86]=Uo[86]=17,jo[84]=Uo[84]=17,Do[89]=Go[89]=9,Do[81]=Go[81]=9,Do[96]=qo[96]=0,ko[96]=Uo[96]=15,Do[74]=qo[74]=0,ko[74]=Uo[74]=15,Do[24]=jo[24]=8,Go[24]=zo[24]=7,Do[146]=jo[146]=8,Go[146]=zo[146]=7,ko[6]=Uo[6]=15,jo[6]=Bo[6]=16,ko[164]=Uo[164]=15,jo[164]=Bo[164]=16,Go[129]=zo[129]=7,Bo[129]=qo[129]=20,Go[41]=zo[41]=7,Bo[41]=qo[41]=20,jo[66]=qo[66]=2,Go[66]=Uo[66]=19,jo[104]=qo[104]=2,Go[104]=Uo[104]=19,Do[144]=Bo[144]=10,Uo[144]=zo[144]=23,Do[26]=Bo[26]=10,Uo[26]=zo[26]=23,ko[36]=zo[36]=5,jo[36]=qo[36]=2,ko[134]=zo[134]=5,jo[134]=qo[134]=2,Do[9]=Bo[9]=10,ko[9]=Go[9]=13,Do[161]=Bo[161]=10,ko[161]=Go[161]=13,ko[37]=zo[37]=5,Bo[37]=qo[37]=20,ko[133]=zo[133]=5,Bo[133]=qo[133]=20,jo[148]=Bo[148]=16,Uo[148]=zo[148]=23,jo[22]=Bo[22]=16,Uo[22]=zo[22]=23,Do[82]=jo[82]=8,Go[82]=Uo[82]=19,Do[88]=jo[88]=8,Go[88]=Uo[88]=19,Do[73]=qo[73]=0,ko[73]=Go[73]=13,Do[97]=qo[97]=0,ko[97]=Go[97]=13,Do[145]=Go[145]=9,Bo[145]=zo[145]=21,Do[25]=Go[25]=9,Bo[25]=zo[25]=21,ko[70]=qo[70]=1,jo[70]=Uo[70]=17,ko[100]=qo[100]=1,jo[100]=Uo[100]=17,Do[34]=Go[34]=9,ko[34]=jo[34]=12,Bo[34]=zo[34]=21,Uo[34]=qo[34]=22,Do[136]=zo[136]=4,ko[136]=qo[136]=1,jo[136]=Uo[136]=17,Go[136]=Bo[136]=18,Do[35]=zo[35]=4,ko[35]=jo[35]=12,Go[35]=Bo[35]=18,Uo[35]=qo[35]=22,Do[153]=zo[153]=4,Go[153]=Bo[153]=18,ko[102]=jo[102]=12,Uo[102]=qo[102]=22,Do[155]=Go[155]=9,Bo[155]=zo[155]=23,ko[103]=qo[103]=1,jo[103]=Uo[103]=17,Do[152]=zo[152]=4,jo[152]=Uo[152]=17,Go[152]=Bo[152]=18,Do[156]=jo[156]=8,Go[156]=Bo[156]=18,Uo[156]=zo[156]=23,Do[137]=zo[137]=4,ko[137]=qo[137]=1,Go[137]=Bo[137]=18,Do[139]=zo[139]=4,ko[139]=Go[139]=13,Bo[139]=qo[139]=20,Do[98]=Go[98]=9,ko[98]=jo[98]=12,Uo[98]=qo[98]=22,Do[99]=qo[99]=0,ko[99]=jo[99]=12,Go[99]=Uo[99]=19,ko[38]=jo[38]=12,Bo[38]=zo[38]=21,Uo[38]=qo[38]=22,ko[39]=zo[39]=5,jo[39]=Bo[39]=16,Uo[39]=qo[39]=22;var Vo=[];function Wo(t,e,r){return(t-e)/(r-e)}function Ho(t){return t.constructor.toString().indexOf("Array")>-1}function Xo(t,e,r,n,i,o){for(var s=t.cells[r][e],a=s.cval_real,u=e+n,l=r+i,c=[],h=!1;!h;){if(void 0===t.cells[l]||void 0===t.cells[l][u])if(l-=i,u-=n,a=(s=t.cells[l][u]).cval_real,-1===i)if(0===o)if(1&a)c.push([u,l]),n=-1,i=0,o=0;else{if(!(4&a)){c.push([u+s.bottomright,l]),n=0,i=1,o=1,h=!0;break}c.push([u+1,l]),n=1,i=0,o=0}else{if(!(1&a)){if(4&a){c.push([u+s.bottomright,l]),n=0,i=1,o=1,h=!0;break}c.push([u+s.bottomleft,l]),n=0,i=1,o=0,h=!0;break}c.push([u,l]),n=-1,i=0,o=0}else if(1===i)if(0===o){if(!(a&ro)){if(a&eo){c.push([u+s.topleft,l+1]),n=0,i=-1,o=0,h=!0;break}c.push([u+s.topright,l+1]),n=0,i=-1,o=1,h=!0;break}c.push([u+1,l+1]),n=1,i=0,o=1}else c.push([u+1,l+1]),n=1,i=0,o=1;else if(-1===n)if(0===o){if(!(a&eo)){if(1&a){c.push([u,l+s.leftbottom]),n=1,i=0,o=0,h=!0;break}c.push([u,l+s.lefttop]),n=1,i=0,o=1,h=!0;break}c.push([u,l+1]),n=0,i=1,o=0}else{if(!(a&eo)){console.log("MarchingSquaresJS-isoBands: wtf");break}c.push([u,l+1]),n=0,i=1,o=0}else{if(1!==n){console.log("MarchingSquaresJS-isoBands: we came from nowhere!");break}if(0===o){if(!(4&a)){c.push([u+1,l+s.rightbottom]),n=-1,i=0,o=0,h=!0;break}c.push([u+1,l]),n=0,i=-1,o=1}else{if(!(4&a)){if(a&ro){c.push([u+1,l+s.righttop]),n=-1,i=0,o=1;break}c.push([u+1,l+s.rightbottom]),n=-1,i=0,o=0,h=!0;break}c.push([u+1,l]),n=0,i=-1,o=1}}else if(a=(s=t.cells[l][u]).cval_real,-1===n)if(0===o)if(void 0!==t.cells[l-1]&&void 0!==t.cells[l-1][u])n=0,i=-1,o=1;else{if(!(1&a)){c.push([u+s.bottomright,l]),n=0,i=1,o=1,h=!0;break}c.push([u,l])}else{if(!(a&eo)){console.log("MarchingSquaresJS-isoBands: found entry from top at "+u+","+l);break}console.log("MarchingSquaresJS-isoBands: proceeding in x-direction!")}else if(1===n){if(0===o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[l+1]&&void 0!==t.cells[l+1][u])n=0,i=1,o=0;else{if(!(a&ro)){c.push([u+s.topleft,l+1]),n=0,i=-1,o=0,h=!0;break}c.push([u+1,l+1]),n=1,i=0,o=1}}else if(-1===i){if(1!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[l][u+1])n=1,i=0,o=1;else{if(!(4&a)){c.push([u+1,l+s.righttop]),n=-1,i=0,o=1,h=!0;break}c.push([u+1,l]),n=0,i=-1,o=1}}else{if(1!==i){console.log("MarchingSquaresJS-isoBands: where did we came from???");break}if(0!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[l][u-1])n=-1,i=0,o=0;else{if(!(a&eo)){c.push([u,l+s.leftbottom]),n=1,i=0,o=0,h=!0;break}c.push([u,l+1]),n=0,i=1,o=0}}if(l+=i,(u+=n)===e&&l===r)break}return{path:c,i:u,j:l,x:n,y:i,o:o}}function Zo(t){if(t.edges.length>0){var e=t.edges[t.edges.length-1],r=t.cval_real;switch(e){case 0:return r&ro?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 1:return 4&r?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 2:return 4&r?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 3:return 1&r?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 4:return r&ro?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 5:return 4&r?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 6:return 4&r?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 7:return 1&r?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 8:return 4&r?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.righttop],x:-1,y:0,o:1};case 9:return 1&r?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 10:return 1&r?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.righttop],x:-1,y:0,o:1};case 11:return r&eo?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 12:return 4&r?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 13:return 1&r?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 14:return 1&r?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 15:return r&eo?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 16:return 4&r?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 17:return r&eo?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 18:return 1&r?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 19:return r&eo?{p:[t.bottomleft,0],x:0,y:1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 20:return r&eo?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 21:return r&ro?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.topright,1],x:0,y:-1,o:1};case 22:return r&eo?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 23:return r&ro?{p:[0,t.lefttop],x:1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};default:console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t)}}return null}function Yo(t,e,r,n){var i,o,s,a,u,l=t.cval;switch(e){case-1:switch(n){case 0:i=ko[l],s=fo[l],a=po[l],u=yo[l];break;default:i=Do[l],s=lo[l],a=co[l],u=ho[l]}break;case 1:switch(n){case 0:i=Bo[l],s=Io[l],a=Eo[l],u=Po[l];break;default:i=Uo[l],s=So[l],a=wo[l],u=Co[l]}break;default:switch(r){case-1:switch(n){case 0:i=qo[l],s=no[l],a=io[l],u=oo[l];break;default:i=zo[l],s=so[l],a=ao[l],u=uo[l]}break;case 1:switch(n){case 0:i=Go[l],s=vo[l],a=go[l],u=mo[l];break;default:i=jo[l],s=_o[l],a=bo[l],u=xo[l]}}}if(o=t.edges.indexOf(i),void 0===t.edges[o])return null;switch(function(t,e){delete t.edges[e];for(var r=e+1;r<t.edges.length;r++)t.edges[r-1]=t.edges[r];t.edges.pop()}(t,o),l=t.cval_real,i){case 0:l&ro?(e=t.topleft,r=1):(e=1,r=t.righttop);break;case 1:4&l?(e=1,r=t.rightbottom):(e=t.topleft,r=1);break;case 2:4&l?(e=t.topleft,r=1):(e=t.bottomright,r=0);break;case 3:1&l?(e=t.bottomleft,r=0):(e=t.topleft,r=1);break;case 4:l&ro?(e=t.topright,r=1):(e=1,r=t.righttop);break;case 5:4&l?(e=1,r=t.rightbottom):(e=t.topright,r=1);break;case 6:4&l?(e=t.topright,r=1):(e=t.bottomright,r=0);break;case 7:1&l?(e=t.bottomleft,r=0):(e=t.topright,r=1);break;case 8:4&l?(e=1,r=t.righttop):(e=t.bottomright,r=0);break;case 9:1&l?(e=t.bottomleft,r=0):(e=1,r=t.righttop);break;case 10:1&l?(e=1,r=t.righttop):(e=0,r=t.leftbottom);break;case 11:l&eo?(e=0,r=t.lefttop):(e=1,r=t.righttop);break;case 12:4&l?(e=1,r=t.rightbottom):(e=t.bottomright,r=0);break;case 13:1&l?(e=t.bottomleft,r=0):(e=1,r=t.rightbottom);break;case 14:1&l?(e=1,r=t.rightbottom):(e=0,r=t.leftbottom);break;case 15:l&eo?(e=0,r=t.lefttop):(e=1,r=t.rightbottom);break;case 16:4&l?(e=0,r=t.leftbottom):(e=t.bottomright,r=0);break;case 17:l&eo?(e=0,r=t.lefttop):(e=t.bottomright,r=0);break;case 18:1&l?(e=t.bottomleft,r=0):(e=0,r=t.leftbottom);break;case 19:l&eo?(e=0,r=t.lefttop):(e=t.bottomleft,r=0);break;case 20:l&eo?(e=0,r=t.leftbottom):(e=t.topleft,r=1);break;case 21:l&ro?(e=t.topright,r=1):(e=0,r=t.leftbottom);break;case 22:l&eo?(e=0,r=t.lefttop):(e=t.topleft,r=1);break;case 23:l&ro?(e=t.topright,r=1):(e=0,r=t.lefttop);break;default:return console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t),null}return void 0!==e&&void 0!==r&&void 0!==s&&void 0!==a&&void 0!==u||(console.log("MarchingSquaresJS-isoBands: undefined value!"),console.log(t),console.log(e+" "+r+" "+s+" "+a+" "+u)),{p:[e,r],x:s,y:a,o:u}}function Jo(t){var e=[],r=[];t.forEach(function(t){var n=zn(c([t]));r.push(n),e.push({ring:t,area:n})}),r.sort(function(t,e){return e-t});var n=[];return r.forEach(function(t){for(var r=0;r<e.length;r++)if(e[r].area===t){n.push(e[r].ring),e.splice(r,1);break}}),n}function Qo(t){for(var e=t.map(function(t){return{lrCoordinates:t,grouped:!1}}),r=[];!$o(e);)for(var n=0;n<e.length;n++)if(!e[n].grouped){var i=[];i.push(e[n].lrCoordinates),e[n].grouped=!0;for(var o=c([e[n].lrCoordinates]),s=n+1;s<e.length;s++){if(!e[s].grouped)Ko(c([e[s].lrCoordinates]),o)&&(i.push(e[s].lrCoordinates),e[s].grouped=!0)}r.push(i)}return r}function Ko(t,e){for(var r=Sr(t),n=0;n<r.features.length;n++)if(!ge(r.features[n],e))return!1;return!0}function $o(t){for(var e=0;e<t.length;e++)if(!1===t[e].grouped)return!1;return!0}function ts(t,e,r){if(!L(r=r||{}))throw new Error("options is invalid");var n=r.pivot,i=r.mutate;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("angle is required");return 0===e||(n||(n=xr(t)),!1!==i&&void 0!==i||(t=Ie(t)),A(t,function(t){var r=Ui(n,t)+e,i=Fn(n,t),o=$(zi(n,i,r));t[0]=o[0],t[1]=o[1]})),t}function es(t,e,r){if(!L(r=r||{}))throw new Error("options is invalid");var n=r.origin,i=r.mutate;if(!t)throw new Error("geojson required");if("number"!=typeof e||0===e)throw new Error("invalid factor");var o=Array.isArray(n)||"object"==typeof n;return!0!==i&&(t=Ie(t)),"FeatureCollection"!==t.type||o?rs(t,e,n):(k(t,function(r,i){t.features[i]=rs(r,e,n)}),t)}function rs(t,e,r){var n="Point"===ot(t);return r=function(t,e){null==e&&(e="centroid");if(Array.isArray(e)||"object"==typeof e)return K(e);var r=t.bbox?t.bbox:Q(t),n=r[0],i=r[1],o=r[2],s=r[3];switch(e){case"sw":case"southwest":case"westsouth":case"bottomleft":return u([n,i]);case"se":case"southeast":case"eastsouth":case"bottomright":return u([o,i]);case"nw":case"northwest":case"westnorth":case"topleft":return u([n,s]);case"ne":case"northeast":case"eastnorth":case"topright":return u([o,s]);case"center":return br(t);case void 0:case null:case"centroid":return xr(t);default:throw new Error("invalid origin")}}(t,r),1===e||n||A(t,function(t){var n=Fn(r,t),i=Ui(r,t),o=$(zi(r,n*e,i));t[0]=o[0],t[1]=o[1],3===t.length&&(t[2]*=e)}),t}function ns(t){var e=t[0],r=t[1];return[r[0]-e[0],r[1]-e[1]]}function is(t,e){return t[0]*e[1]-e[0]*t[1]}function os(t,e){return!function(t,e){return 0===is(ns(t),ns(e))}(t,e)&&function(t,e){var r,n,i=t[0],o=ns(t),s=e[0],a=ns(e),u=is(o,a);return function(t,e){return[t[0]+e[0],t[1]+e[1]]}(i,function(t,e){return[t*e[0],t*e[1]]}(is((n=i,[(r=s)[0]-n[0],r[1]-n[1]]),a)/u,o))}(t,e)}function ss(t,e,r){var n=[],i=S(e,r),o=$(t),s=[];return o.forEach(function(t,e){if(e!==o.length-1){var r=(l=t,c=o[e+1],h=i,f=Math.sqrt((l[0]-c[0])*(l[0]-c[0])+(l[1]-c[1])*(l[1]-c[1])),p=l[0]+h*(c[1]-l[1])/f,d=c[0]+h*(c[1]-l[1])/f,y=l[1]+h*(l[0]-c[0])/f,v=c[1]+h*(l[0]-c[0])/f,[[p,y],[d,v]]);if(n.push(r),e>0){var a=n[e-1],u=os(r,a);!1!==u&&(a[1]=u,r[0]=u),s.push(a[0]),e===o.length-2&&(s.push(r[0]),s.push(r[1]))}2===o.length&&(s.push(r[0]),s.push(r[1]))}var l,c,h,f,p,d,y,v}),f(s,t.properties)}function as(t,e,r){var n=e[0]-t[0],i=e[1]-t[1],o=r[0]-e[0];return function(t){return(t>0)-(t<0)||+t}(n*(r[1]-e[1])-o*i)}function us(t,e){return e.geometry.coordinates[0].every(function(e){return ge(u(e),t)})}Vo[1]=Vo[169]=Mo,Vo[4]=Vo[166]=Lo,Vo[16]=Vo[154]=No,Vo[64]=Vo[106]=To,Vo[168]=Vo[2]=Oo,Vo[162]=Vo[8]=Ao,Vo[138]=Vo[32]=Ro,Vo[42]=Vo[128]=Fo,Vo[5]=Vo[165]=function(t){return[[0,0],[0,t.leftbottom],[1,t.rightbottom],[1,0]]},Vo[20]=Vo[150]=function(t){return[[1,0],[t.bottomright,0],[t.topright,1],[1,1]]},Vo[80]=Vo[90]=function(t){return[[1,1],[1,t.righttop],[0,t.lefttop],[0,1]]},Vo[65]=Vo[105]=function(t){return[[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},Vo[160]=Vo[10]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.leftbottom],[0,t.lefttop]]},Vo[130]=Vo[40]=function(t){return[[t.topleft,1],[t.topright,1],[t.bottomright,0],[t.bottomleft,0]]},Vo[85]=function(){return[[0,0],[0,1],[1,1],[1,0]]},Vo[101]=Vo[69]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,1],[t.topleft,1]]},Vo[149]=Vo[21]=function(t){return[[t.topright,1],[1,1],[1,0],[0,0],[0,t.leftbottom]]},Vo[86]=Vo[84]=function(t){return[[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[1,1]]},Vo[89]=Vo[81]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,1]]},Vo[96]=Vo[74]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.lefttop],[0,1],[t.topleft,1]]},Vo[24]=Vo[146]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[t.topright,1]]},Vo[6]=Vo[164]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop]]},Vo[129]=Vo[41]=function(t){return[[t.topright,1],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1]]},Vo[66]=Vo[104]=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Vo[144]=Vo[26]=function(t){return[[1,1],[1,t.righttop],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},Vo[36]=Vo[134]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[t.topleft,1],[t.topright,1]]},Vo[9]=Vo[161]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom]]},Vo[37]=Vo[133]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},Vo[148]=Vo[22]=function(t){return[[1,1],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},Vo[82]=Vo[88]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1]]},Vo[73]=Vo[97]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},Vo[145]=Vo[25]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},Vo[70]=Vo[100]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Vo[34]=function(t){return[Fo(t),Ao(t)]},Vo[35]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},Vo[136]=function(t){return[Ro(t),Oo(t)]},Vo[153]=function(t){return[No(t),Mo(t)]},Vo[102]=function(t){return[Lo(t),To(t)]},Vo[155]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},Vo[103]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Vo[152]=function(t){return[No(t),Oo(t)]},Vo[156]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},Vo[137]=function(t){return[Ro(t),Mo(t)]},Vo[139]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},Vo[98]=function(t){return[Ao(t),To(t)]},Vo[99]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Vo[38]=function(t){return[Lo(t),Fo(t)]},Vo[39]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]};var ls=function(){function t(e){this.id=t.buildId(e),this.coordinates=e,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1}return t.buildId=function(t){return t.join(",")},t.prototype.removeInnerEdge=function(t){this.innerEdges=this.innerEdges.filter(function(e){return e.from.id!==t.from.id})},t.prototype.removeOuterEdge=function(t){this.outerEdges=this.outerEdges.filter(function(e){return e.to.id!==t.to.id})},t.prototype.addOuterEdge=function(t){this.outerEdges.push(t),this.outerEdgesSorted=!1},t.prototype.sortOuterEdges=function(){var t=this;this.outerEdgesSorted||(this.outerEdges.sort(function(e,r){var n=e.to,i=r.to;if(n.coordinates[0]-t.coordinates[0]>=0&&i.coordinates[0]-t.coordinates[0]<0)return 1;if(n.coordinates[0]-t.coordinates[0]<0&&i.coordinates[0]-t.coordinates[0]>=0)return-1;if(n.coordinates[0]-t.coordinates[0]==0&&i.coordinates[0]-t.coordinates[0]==0)return n.coordinates[1]-t.coordinates[1]>=0||i.coordinates[1]-t.coordinates[1]>=0?n.coordinates[1]-i.coordinates[1]:i.coordinates[1]-n.coordinates[1];var o=as(t.coordinates,n.coordinates,i.coordinates);return o<0?1:o>0?-1:Math.pow(n.coordinates[0]-t.coordinates[0],2)+Math.pow(n.coordinates[1]-t.coordinates[1],2)-(Math.pow(i.coordinates[0]-t.coordinates[0],2)+Math.pow(i.coordinates[1]-t.coordinates[1],2))}),this.outerEdgesSorted=!0)},t.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},t.prototype.getOuterEdge=function(t){return this.sortOuterEdges(),this.outerEdges[t]},t.prototype.addInnerEdge=function(t){this.innerEdges.push(t)},t}(),cs=function(){function t(t,e){this.from=t,this.to=e,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)}return t.prototype.getSymetric=function(){return this.symetric||(this.symetric=new t(this.to,this.from),this.symetric.symetric=this),this.symetric},t.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},t.prototype.isEqual=function(t){return this.from.id===t.from.id&&this.to.id===t.to.id},t.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},t.prototype.toLineString=function(){return f([this.from.coordinates,this.to.coordinates])},t.prototype.compareTo=function(t){return as(t.from.coordinates,t.to.coordinates,this.to.coordinates)},t}(),hs=function(){function t(){this.edges=[],this.polygon=void 0,this.envelope=void 0}return t.prototype.push=function(t){this.edges.push(t),this.polygon=this.envelope=void 0},t.prototype.get=function(t){return this.edges[t]},Object.defineProperty(t.prototype,"length",{get:function(){return this.edges.length},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t){this.edges.forEach(t)},t.prototype.map=function(t){return this.edges.map(t)},t.prototype.some=function(t){return this.edges.some(t)},t.prototype.isValid=function(){return!0},t.prototype.isHole=function(){var t=this,e=this.edges.reduce(function(e,r,n){return r.from.coordinates[1]>t.edges[e].from.coordinates[1]&&(e=n),e},0),r=(0===e?this.length:e)-1,n=(e+1)%this.length,i=as(this.edges[r].from.coordinates,this.edges[e].from.coordinates,this.edges[n].from.coordinates);return 0===i?this.edges[r].from.coordinates[0]>this.edges[n].from.coordinates[0]:i>0},t.prototype.toMultiPoint=function(){return v(this.edges.map(function(t){return t.from.coordinates}))},t.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var t=this.edges.map(function(t){return t.from.coordinates});return t.push(this.edges[0].from.coordinates),this.polygon=c([t])},t.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=yr(this.toPolygon())},t.findEdgeRingContaining=function(t,e){var r,n,i=t.getEnvelope();return e.forEach(function(e){var o,s,a,l,c,h,f=e.getEnvelope();if((n&&(r=n.getEnvelope()),s=i,a=(o=f).geometry.coordinates[0].map(function(t){return t[0]}),l=o.geometry.coordinates[0].map(function(t){return t[1]}),c=s.geometry.coordinates[0].map(function(t){return t[0]}),h=s.geometry.coordinates[0].map(function(t){return t[1]}),Math.max.apply(null,a)!==Math.max.apply(null,c)||Math.max.apply(null,l)!==Math.max.apply(null,h)||Math.min.apply(null,a)!==Math.min.apply(null,c)||Math.min.apply(null,l)!==Math.min.apply(null,h))&&us(f,i)){for(var p=t.map(function(t){return t.from.coordinates}),d=void 0,y=function(t){e.some(function(e){return r=t,n=e.from.coordinates,r[0]===n[0]&&r[1]===n[1];var r,n})||(d=t)},v=0,g=p;v<g.length;v++){y(g[v])}d&&e.inside(u(d))&&(n&&!us(r,f)||(n=e))}}),n},t.prototype.inside=function(t){return ge(t,this.toPolygon())},t}();var fs=function(){function t(){this.edges=[],this.nodes={}}return t.fromGeoJson=function(e){!function(t){if(!t)throw new Error("No geojson passed");if("FeatureCollection"!==t.type&&"GeometryCollection"!==t.type&&"MultiLineString"!==t.type&&"LineString"!==t.type&&"Feature"!==t.type)throw new Error("Invalid input type '"+t.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}(e);var r=new t;return q(e,function(t){rt(t,"LineString","Graph::fromGeoJson"),R(t,function(t,e){if(t){var n=r.getNode(t),i=r.getNode(e);r.addEdge(n,i)}return e})}),r},t.prototype.getNode=function(t){var e=ls.buildId(t),r=this.nodes[e];return r||(r=this.nodes[e]=new ls(t)),r},t.prototype.addEdge=function(t,e){var r=new cs(t,e),n=r.getSymetric();this.edges.push(r),this.edges.push(n)},t.prototype.deleteDangles=function(){var t=this;Object.keys(this.nodes).map(function(e){return t.nodes[e]}).forEach(function(e){return t._removeIfDangle(e)})},t.prototype._removeIfDangle=function(t){var e=this;if(t.innerEdges.length<=1){var r=t.getOuterEdges().map(function(t){return t.to});this.removeNode(t),r.forEach(function(t){return e._removeIfDangle(t)})}},t.prototype.deleteCutEdges=function(){var t=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach(function(e){e.label===e.symetric.label&&(t.removeEdge(e.symetric),t.removeEdge(e))})},t.prototype._computeNextCWEdges=function(t){var e=this;void 0===t?Object.keys(this.nodes).forEach(function(t){return e._computeNextCWEdges(e.nodes[t])}):t.getOuterEdges().forEach(function(e,r){t.getOuterEdge((0===r?t.getOuterEdges().length:r)-1).symetric.next=e})},t.prototype._computeNextCCWEdges=function(t,e){for(var r,n,i=t.getOuterEdges(),o=i.length-1;o>=0;--o){var s=i[o],a=s.symetric,u=void 0,l=void 0;s.label===e&&(u=s),a.label===e&&(l=a),u&&l&&(l&&(n=l),u&&(n&&(n.next=u,n=void 0),r||(r=u)))}n&&(n.next=r)},t.prototype._findLabeledEdgeRings=function(){var t=[],e=0;return this.edges.forEach(function(r){if(!(r.label>=0)){t.push(r);var n=r;do{n.label=e,n=n.next}while(!r.isEqual(n));e++}}),t},t.prototype.getEdgeRings=function(){var t=this;this._computeNextCWEdges(),this.edges.forEach(function(t){t.label=void 0}),this._findLabeledEdgeRings().forEach(function(e){t._findIntersectionNodes(e).forEach(function(r){t._computeNextCCWEdges(r,e.label)})});var e=[];return this.edges.forEach(function(r){r.ring||e.push(t._findEdgeRing(r))}),e},t.prototype._findIntersectionNodes=function(t){var e=[],r=t,n=function(){var n=0;r.from.getOuterEdges().forEach(function(e){e.label===t.label&&++n}),n>1&&e.push(r.from),r=r.next};do{n()}while(!t.isEqual(r));return e},t.prototype._findEdgeRing=function(t){var e=t,r=new hs;do{r.push(e),e.ring=r,e=e.next}while(!t.isEqual(e));return r},t.prototype.removeNode=function(t){var e=this;t.getOuterEdges().forEach(function(t){return e.removeEdge(t)}),t.innerEdges.forEach(function(t){return e.removeEdge(t)}),delete this.nodes[t.id]},t.prototype.removeEdge=function(t){this.edges=this.edges.filter(function(e){return!e.isEqual(t)}),t.deleteEdge()},t}();function ps(t,e){var r=!0;return q(t,function(t){q(e,function(e){if(!1===r)return!1;r=function(t,e){switch(t.type){case"Point":switch(e.type){case"Point":return r=t.coordinates,n=e.coordinates,!(r[0]===n[0]&&r[1]===n[1]);case"LineString":return!ds(e,t);case"Polygon":return!ge(t,e)}break;case"LineString":switch(e.type){case"Point":return!ds(t,e);case"LineString":return!function(t,e){if(On(t,e).features.length>0)return!0;return!1}(t,e);case"Polygon":return!ys(e,t)}break;case"Polygon":switch(e.type){case"Point":return!ge(e,t);case"LineString":return!ys(t,e);case"Polygon":return!function(t,e){for(var r=0,n=t.coordinates[0];r<n.length;r++){if(ge(n[r],e))return!0}for(var i=0,o=e.coordinates[0];i<o.length;i++){if(ge(o[i],t))return!0}if(On(Ii(t),Ii(e)).features.length>0)return!0;return!1}(e,t)}}var r,n;return!1}(t.geometry,e.geometry)})}),r}function ds(t,e){for(var r=0;r<t.coordinates.length-1;r++)if(vs(t.coordinates[r],t.coordinates[r+1],e.coordinates))return!0;return!1}function ys(t,e){for(var r=0,n=e.coordinates;r<n.length;r++){if(ge(n[r],t))return!0}return On(e,Ii(t)).features.length>0}function vs(t,e,r){var n=r[0]-t[0],i=r[1]-t[1],o=e[0]-t[0],s=e[1]-t[1];return 0==n*s-i*o&&(Math.abs(o)>=Math.abs(s)?o>0?t[0]<=r[0]&&r[0]<=e[0]:e[0]<=r[0]&&r[0]<=t[0]:s>0?t[1]<=r[1]&&r[1]<=e[1]:e[1]<=r[1]&&r[1]<=t[1])}function gs(t,e){return!(t[0]>e[0])&&(!(t[2]<e[2])&&(!(t[1]>e[1])&&!(t[3]<e[3])))}function ms(t,e){return t[0]===e[0]&&t[1]===e[1]}function _s(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}function bs(t,e){for(var r=!1,n=!1,i=t.coordinates.length,o=0;o<i&&!r&&!n;){for(var s=0;s<e.coordinates.length-1;s++){var a=!0;0!==s&&s!==e.coordinates.length-2||(a=!1),ws(e.coordinates[s],e.coordinates[s+1],t.coordinates[o],a)?r=!0:n=!0}o++}return r&&n}function xs(t,e){return On(t,Ei(e)).features.length>0}function Ss(t,e){for(var r=!1,n=!1,i=t.coordinates.length,o=0;o<i&&(!r||!n);o++)ge(u(t.coordinates[o]),e)?r=!0:n=!0;return n&&r}function ws(t,e,r,n){var i=r[0]-t[0],o=r[1]-t[1],s=e[0]-t[0],a=e[1]-t[1];return 0==i*a-o*s&&(n?Math.abs(s)>=Math.abs(a)?s>0?t[0]<=r[0]&&r[0]<=e[0]:e[0]<=r[0]&&r[0]<=t[0]:a>0?t[1]<=r[1]&&r[1]<=e[1]:e[1]<=r[1]&&r[1]<=t[1]:Math.abs(s)>=Math.abs(a)?s>0?t[0]<r[0]&&r[0]<e[0]:e[0]<r[0]&&r[0]<t[0]:a>0?t[1]<r[1]&&r[1]<e[1]:e[1]<r[1]&&r[1]<t[1])}var Cs=function(t){this.precision=t&&t.precision?t.precision:17,this.direction=!(!t||!t.direction)&&t.direction,this.pseudoNode=!(!t||!t.pseudoNode)&&t.pseudoNode,this.objectComparator=t&&t.objectComparator?t.objectComparator:Ps};function Is(t){return t.coordinates.map(function(e){return{type:t.type.replace("Multi",""),coordinates:e}})}function Es(t,e){return t.hasOwnProperty("coordinates")?t.coordinates.length===e.coordinates.length:t.length===e.length}function Ps(t,e){return ki(t,e,{strict:!0})}Cs.prototype.compare=function(t,e){if(t.type!==e.type||!Es(t,e))return!1;switch(t.type){case"Point":return this.compareCoord(t.coordinates,e.coordinates);case"LineString":return this.compareLine(t.coordinates,e.coordinates,0,!1);case"Polygon":return this.comparePolygon(t,e);case"Feature":return this.compareFeature(t,e);default:if(0===t.type.indexOf("Multi")){var r=this,n=Is(t),i=Is(e);return n.every(function(t){return this.some(function(e){return r.compare(t,e)})},i)}}return!1},Cs.prototype.compareCoord=function(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(t[r].toFixed(this.precision)!==e[r].toFixed(this.precision))return!1;return!0},Cs.prototype.compareLine=function(t,e,r,n){if(!Es(t,e))return!1;var i=this.pseudoNode?t:this.removePseudo(t),o=this.pseudoNode?e:this.removePseudo(e);if(!n||this.compareCoord(i[0],o[0])||(o=this.fixStartIndex(o,i))){var s=this.compareCoord(i[r],o[r]);return this.direction||s?this.comparePath(i,o):!!this.compareCoord(i[r],o[o.length-(1+r)])&&this.comparePath(i.slice().reverse(),o)}},Cs.prototype.fixStartIndex=function(t,e){for(var r,n=-1,i=0;i<t.length;i++)if(this.compareCoord(t[i],e[0])){n=i;break}return n>=0&&(r=[].concat(t.slice(n,t.length),t.slice(1,n+1))),r},Cs.prototype.comparePath=function(t,e){var r=this;return t.every(function(t,e){return r.compareCoord(t,this[e])},e)},Cs.prototype.comparePolygon=function(t,e){if(this.compareLine(t.coordinates[0],e.coordinates[0],1,!0)){var r=t.coordinates.slice(1,t.coordinates.length),n=e.coordinates.slice(1,e.coordinates.length),i=this;return r.every(function(t){return this.some(function(e){return i.compareLine(t,e,1,!0)})},n)}return!1},Cs.prototype.compareFeature=function(t,e){return!(t.id!==e.id||!this.objectComparator(t.properties,e.properties)||!this.compareBBox(t,e))&&this.compare(t.geometry,e.geometry)},Cs.prototype.compareBBox=function(t,e){return!!(!t.bbox&&!e.bbox||t.bbox&&e.bbox&&this.compareCoord(t.bbox,e.bbox))},Cs.prototype.removePseudo=function(t){return t};var Ms=Cs;function Ls(t,e){var r=!1;return q(t,function(t){q(e,function(e){if(!0===r)return!0;r=!ps(t.geometry,e.geometry)})}),r}var Ns=Ut(function(t){function e(t,e,r,n){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(t,e,r,n)}e.prototype.run=function(t,e,r,n){this._init(t,e,r,n);for(var i=0;i<this._datasetLength;i++)if(1!==this._visited[i]){this._visited[i]=1;var o=this._regionQuery(i);if(o.length<this.minPts)this.noise.push(i);else{var s=this.clusters.length;this.clusters.push([]),this._addToCluster(i,s),this._expandCluster(s,o)}}return this.clusters},e.prototype._init=function(t,e,r,n){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this.noise=[],this._datasetLength=t.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}e&&(this.epsilon=e),r&&(this.minPts=r),n&&(this.distance=n)},e.prototype._expandCluster=function(t,e){for(var r=0;r<e.length;r++){var n=e[r];if(1!==this._visited[n]){this._visited[n]=1;var i=this._regionQuery(n);i.length>=this.minPts&&(e=this._mergeArrays(e,i))}1!==this._assigned[n]&&this._addToCluster(n,t)}},e.prototype._addToCluster=function(t,e){this.clusters[e].push(t),this._assigned[t]=1},e.prototype._regionQuery=function(t){for(var e=[],r=0;r<this._datasetLength;r++){this.distance(this.dataset[t],this.dataset[r])<this.epsilon&&e.push(r)}return e},e.prototype._mergeArrays=function(t,e){for(var r=e.length,n=0;n<r;n++){var i=e[n];t.indexOf(i)<0&&t.push(i)}return t},e.prototype._euclideanDistance=function(t,e){for(var r=0,n=Math.min(t.length,e.length);n--;)r+=(t[n]-e[n])*(t[n]-e[n]);return Math.sqrt(r)},t.exports&&(t.exports=e)}),Ts=Ut(function(t){function e(t,e,r){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(t,e,r)}e.prototype.init=function(t,e,r){this.assignments=[],this.centroids=[],void 0!==t&&(this.dataset=t),void 0!==e&&(this.k=e),void 0!==r&&(this.distance=r)},e.prototype.run=function(t,e){this.init(t,e);for(var r=this.dataset.length,n=0;n<this.k;n++)this.centroids[n]=this.randomCentroid();for(var i=!0;i;){i=this.assign();for(var o=0;o<this.k;o++){for(var s=new Array(c),a=0,u=0;u<c;u++)s[u]=0;for(var l=0;l<r;l++){var c=this.dataset[l].length;if(o===this.assignments[l]){for(u=0;u<c;u++)s[u]+=this.dataset[l][u];a++}}if(a>0){for(u=0;u<c;u++)s[u]/=a;this.centroids[o]=s}else this.centroids[o]=this.randomCentroid(),i=!0}}return this.getClusters()},e.prototype.randomCentroid=function(){var t,e,r=this.dataset.length-1;do{e=Math.round(Math.random()*r),t=this.dataset[e]}while(this.centroids.indexOf(t)>=0);return t},e.prototype.assign=function(){for(var t,e=!1,r=this.dataset.length,n=0;n<r;n++)(t=this.argmin(this.dataset[n],this.centroids,this.distance))!=this.assignments[n]&&(this.assignments[n]=t,e=!0);return e},e.prototype.getClusters=function(){for(var t,e=new Array(this.k),r=0;r<this.assignments.length;r++)void 0===e[t=this.assignments[r]]&&(e[t]=[]),e[t].push(r);return e},e.prototype.argmin=function(t,e,r){for(var n,i=Number.MAX_VALUE,o=0,s=e.length,a=0;a<s;a++)(n=r(t,e[a]))<i&&(i=n,o=a);return o},e.prototype.distance=function(t,e){for(var r=0,n=Math.min(t.length,e.length);n--;){var i=t[n]-e[n];r+=i*i}return Math.sqrt(r)},t.exports&&(t.exports=e)}),Os=Ut(function(t){function e(t,e,r){this._queue=[],this._priorities=[],this._sorting="desc",this._init(t,e,r)}e.prototype.insert=function(t,e){for(var r=this._queue.length,n=r;n--;){var i=this._priorities[n];"desc"===this._sorting?e>i&&(r=n):e<i&&(r=n)}this._insertAt(t,e,r)},e.prototype.remove=function(t){for(var e=this._queue.length;e--;){if(t===this._queue[e]){this._queue.splice(e,1),this._priorities.splice(e,1);break}}},e.prototype.forEach=function(t){this._queue.forEach(t)},e.prototype.getElements=function(){return this._queue},e.prototype.getElementPriority=function(t){return this._priorities[t]},e.prototype.getPriorities=function(){return this._priorities},e.prototype.getElementsWithPriorities=function(){for(var t=[],e=0,r=this._queue.length;e<r;e++)t.push([this._queue[e],this._priorities[e]]);return t},e.prototype._init=function(t,e,r){if(t&&e){if(this._queue=[],this._priorities=[],t.length!==e.length)throw new Error("Arrays must have the same length");for(var n=0;n<t.length;n++)this.insert(t[n],e[n])}r&&(this._sorting=r)},e.prototype._insertAt=function(t,e,r){this._queue.length===r?(this._queue.push(t),this._priorities.push(e)):(this._queue.splice(r,0,t),this._priorities.splice(r,0,e))},t.exports&&(t.exports=e)}),As=Ut(function(t){if(t.exports)var e=Os;function r(t,e,r,n){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(t,e,r,n)}r.prototype.run=function(t,r,n,i){this._init(t,r,n,i);for(var o=0,s=this.dataset.length;o<s;o++)if(1!==this._processed[o]){this._processed[o]=1,this.clusters.push([o]);var a=this.clusters.length-1;this._orderedList.push(o);var u=new e(null,null,"asc"),l=this._regionQuery(o);void 0!==this._distanceToCore(o)&&(this._updateQueue(o,l,u),this._expandCluster(a,u))}return this.clusters},r.prototype.getReachabilityPlot=function(){for(var t=[],e=0,r=this._orderedList.length;e<r;e++){var n=this._orderedList[e],i=this._reachability[n];t.push([n,i])}return t},r.prototype._init=function(t,e,r,n){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}e&&(this.epsilon=e),r&&(this.minPts=r),n&&(this.distance=n)},r.prototype._updateQueue=function(t,e,r){var n=this;this._coreDistance=this._distanceToCore(t),e.forEach(function(e){if(void 0===n._processed[e]){var i=n.distance(n.dataset[t],n.dataset[e]),o=Math.max(n._coreDistance,i);void 0===n._reachability[e]?(n._reachability[e]=o,r.insert(e,o)):o<n._reachability[e]&&(n._reachability[e]=o,r.remove(e),r.insert(e,o))}})},r.prototype._expandCluster=function(t,e){for(var r=e.getElements(),n=0,i=r.length;n<i;n++){var o=r[n];if(void 0===this._processed[o]){var s=this._regionQuery(o);this._processed[o]=1,this.clusters[t].push(o),this._orderedList.push(o),void 0!==this._distanceToCore(o)&&(this._updateQueue(o,s,e),this._expandCluster(t,e))}}},r.prototype._distanceToCore=function(t){for(var e=this.epsilon,r=0;r<e;r++){if(this._regionQuery(t,r).length>=this.minPts)return r}},r.prototype._regionQuery=function(t,e){e=e||this.epsilon;for(var r=[],n=0,i=this.dataset.length;n<i;n++)this.distance(this.dataset[t],this.dataset[n])<e&&r.push(n);return r},r.prototype._euclideanDistance=function(t,e){for(var r=0,n=Math.min(t.length,e.length);n--;)r+=(t[n]-e[n])*(t[n]-e[n]);return Math.sqrt(r)},t.exports&&(t.exports=r)}),Rs=Ut(function(t){t.exports&&(t.exports={DBSCAN:Ns,KMEANS:Ts,OPTICS:As,PriorityQueue:Os})});var Fs=function(t,e,r){for(var n=t.length,i=0,o=0;o<n;o++){var s=(t[o]||0)-(e[o]||0);i+=s*s}return r?Math.sqrt(i):i},Ds=Fs,ks=function(t,e,r){var n=Math.abs(t-e);return r?n:n*n},js=Fs,Gs=function(t,e){for(var r={},n=[],i=e<<2,o=t.length,s=t[0].length>0;n.length<e&&i-- >0;){var a=t[Math.floor(Math.random()*o)],u=s?a.join("_"):""+a;r[u]||(r[u]=!0,n.push(a))}if(n.length<e)throw new Error("Error initializating clusters");return n},Bs=function(t,e){var r=t[0].length?Ds:ks,n=[],i=t.length,o=t[0].length>0,s=t[Math.floor(Math.random()*i)];o&&s.join("_");for(n.push(s);n.length<e;){for(var a=[],u=n.length,l=0,c=[],h=0;h<i;h++){for(var f=1/0,p=0;p<u;p++){var d=r(t[h],n[p]);d<=f&&(f=d)}a[h]=f}for(var y=0;y<i;y++)l+=a[y];for(var v=0;v<i;v++)c[v]={i:v,v:t[v],pr:a[v]/l,cs:0};c.sort(function(t,e){return t.pr-e.pr}),c[0].cs=c[0].pr;for(var g=1;g<i;g++)c[g].cs=c[g-1].cs+c[g].pr;for(var m=Math.random(),_=0;_<i-1&&c[_++].cs<m;);n.push(c[_-1].v)}return n};function Us(t,e,r){r=r||[];for(var n=0;n<t;n++)r[n]=e;return r}var qs=function(t,e,r,n){var i=[],o=[],s=[],a=[],u=!1,l=n||1e4,c=t.length,h=t[0].length,f=h>0,p=[];if(r)i="kmrand"==r?Gs(t,e):"kmpp"==r?Bs(t,e):r;else for(var d={};i.length<e;){var y=Math.floor(Math.random()*c);d[y]||(d[y]=!0,i.push(t[y]))}do{Us(e,0,p);for(var v=0;v<c;v++){for(var g=1/0,m=0,_=0;_<e;_++){(a=f?js(t[v],i[_]):Math.abs(t[v]-i[_]))<=g&&(g=a,m=_)}s[v]=m,p[m]++}for(var b=[],x=(o=[],0);x<e;x++)b[x]=f?Us(h,0,b[x]):0,o[x]=i[x];if(f){for(var S=0;S<e;S++)i[S]=[];for(var w=0;w<c;w++)for(var C=b[s[w]],I=t[w],E=0;E<h;E++)C[E]+=I[E];u=!0;for(var P=0;P<e;P++){for(var M=i[P],L=b[P],N=o[P],T=p[P],O=0;O<h;O++)M[O]=L[O]/T||0;if(u)for(var A=0;A<h;A++)if(N[A]!=M[A]){u=!1;break}}}else{for(var R=0;R<c;R++){b[s[R]]+=t[R]}for(var F=0;F<e;F++)i[F]=b[F]/p[F]||0;u=!0;for(var D=0;D<e;D++)if(o[D]!=i[D]){u=!1;break}}u=u||--l<=0}while(!u);return{it:1e4-l,k:e,idxs:s,centroids:i}};function zs(t,e){return w(Ui(t[0],t[1]))===w(Ui(e[0],e[1]))}function Vs(t,e){if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error("Invalid GeoJSON object for "+e)}function Ws(t){for(var e=t,r=[];e.parent;)r.unshift(e),e=e.parent;return r}var Hs={search:function(t,e,r,n){t.cleanDirty();var i=(n=n||{}).heuristic||Hs.heuristics.manhattan,o=n.closest||!1,s=new Ys(function(t){return t.f}),a=e;for(e.h=i(e,r),s.push(e);s.size()>0;){var u=s.pop();if(u===r)return Ws(u);u.closed=!0;for(var l=t.neighbors(u),c=0,h=l.length;c<h;++c){var f=l[c];if(!f.closed&&!f.isWall()){var p=u.g+f.getCost(u),d=f.visited;(!d||p<f.g)&&(f.visited=!0,f.parent=u,f.h=f.h||i(f,r),f.g=p,f.f=f.g+f.h,t.markDirty(f),o&&(f.h<a.h||f.h===a.h&&f.g<a.g)&&(a=f),d?s.rescoreElement(f):s.push(f))}}}return o?Ws(a):[]},heuristics:{manhattan:function(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},diagonal:function(t,e){var r=Math.sqrt(2),n=Math.abs(e.x-t.x),i=Math.abs(e.y-t.y);return 1*(n+i)+(r-2)*Math.min(n,i)}},cleanNode:function(t){t.f=0,t.g=0,t.h=0,t.visited=!1,t.closed=!1,t.parent=null}};function Xs(t,e){e=e||{},this.nodes=[],this.diagonal=!!e.diagonal,this.grid=[];for(var r=0;r<t.length;r++){this.grid[r]=[];for(var n=0,i=t[r];n<i.length;n++){var o=new Zs(r,n,i[n]);this.grid[r][n]=o,this.nodes.push(o)}}this.init()}function Zs(t,e,r){this.x=t,this.y=e,this.weight=r}function Ys(t){this.content=[],this.scoreFunction=t}function Js(t,e){for(var r=0;r<e.features.length;r++)if(ge(t,e.features[r]))return!0;return!1}function Qs(t){return function(){return t}}function Ks(t){return t[0]}function $s(t){return t[1]}function ta(){this._=null}function ea(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function ra(t,e){var r=e,n=e.R,i=r.U;i?i.L===r?i.L=n:i.R=n:t._=n,n.U=i,r.U=n,r.R=n.L,r.R&&(r.R.U=r),n.L=r}function na(t,e){var r=e,n=e.L,i=r.U;i?i.L===r?i.L=n:i.R=n:t._=n,n.U=i,r.U=n,r.L=n.R,r.L&&(r.L.U=r),n.R=r}function ia(t){for(;t.L;)t=t.L;return t}function oa(t,e,r,n){var i=[null,null],o=La.push(i)-1;return i.left=t,i.right=e,r&&aa(i,t,e,r),n&&aa(i,e,t,n),Pa[t.index].halfedges.push(o),Pa[e.index].halfedges.push(o),i}function sa(t,e,r){var n=[e,r];return n.left=t,n}function aa(t,e,r,n){t[0]||t[1]?t.left===r?t[1]=n:t[0]=n:(t[0]=n,t.left=e,t.right=r)}function ua(t,e,r,n,i){var o,s=t[0],a=t[1],u=s[0],l=s[1],c=0,h=1,f=a[0]-u,p=a[1]-l;if(o=e-u,f||!(o>0)){if(o/=f,f<0){if(o<c)return;o<h&&(h=o)}else if(f>0){if(o>h)return;o>c&&(c=o)}if(o=n-u,f||!(o<0)){if(o/=f,f<0){if(o>h)return;o>c&&(c=o)}else if(f>0){if(o<c)return;o<h&&(h=o)}if(o=r-l,p||!(o>0)){if(o/=p,p<0){if(o<c)return;o<h&&(h=o)}else if(p>0){if(o>h)return;o>c&&(c=o)}if(o=i-l,p||!(o<0)){if(o/=p,p<0){if(o>h)return;o>c&&(c=o)}else if(p>0){if(o<c)return;o<h&&(h=o)}return!(c>0||h<1)||(c>0&&(t[0]=[u+c*f,l+c*p]),h<1&&(t[1]=[u+h*f,l+h*p]),!0)}}}}}function la(t,e,r,n,i){var o=t[1];if(o)return!0;var s,a,u=t[0],l=t.left,c=t.right,h=l[0],f=l[1],p=c[0],d=c[1],y=(h+p)/2,v=(f+d)/2;if(d===f){if(y<e||y>=n)return;if(h>p){if(u){if(u[1]>=i)return}else u=[y,r];o=[y,i]}else{if(u){if(u[1]<r)return}else u=[y,i];o=[y,r]}}else if(a=v-(s=(h-p)/(d-f))*y,s<-1||s>1)if(h>p){if(u){if(u[1]>=i)return}else u=[(r-a)/s,r];o=[(i-a)/s,i]}else{if(u){if(u[1]<r)return}else u=[(i-a)/s,i];o=[(r-a)/s,r]}else if(f<d){if(u){if(u[0]>=n)return}else u=[e,s*e+a];o=[n,s*n+a]}else{if(u){if(u[0]<e)return}else u=[n,s*n+a];o=[e,s*e+a]}return t[0]=u,t[1]=o,!0}function ca(t,e){var r=t.site,n=e.left,i=e.right;return r===i&&(i=n,n=r),i?Math.atan2(i[1]-n[1],i[0]-n[0]):(r===n?(n=e[1],i=e[0]):(n=e[0],i=e[1]),Math.atan2(n[0]-i[0],i[1]-n[1]))}function ha(t,e){return e[+(e.left!==t.site)]}function fa(t,e){return e[+(e.left===t.site)]}Xs.prototype.init=function(){this.dirtyNodes=[];for(var t=0;t<this.nodes.length;t++)Hs.cleanNode(this.nodes[t])},Xs.prototype.cleanDirty=function(){for(var t=0;t<this.dirtyNodes.length;t++)Hs.cleanNode(this.dirtyNodes[t]);this.dirtyNodes=[]},Xs.prototype.markDirty=function(t){this.dirtyNodes.push(t)},Xs.prototype.neighbors=function(t){var e=[],r=t.x,n=t.y,i=this.grid;return i[r-1]&&i[r-1][n]&&e.push(i[r-1][n]),i[r+1]&&i[r+1][n]&&e.push(i[r+1][n]),i[r]&&i[r][n-1]&&e.push(i[r][n-1]),i[r]&&i[r][n+1]&&e.push(i[r][n+1]),this.diagonal&&(i[r-1]&&i[r-1][n-1]&&e.push(i[r-1][n-1]),i[r+1]&&i[r+1][n-1]&&e.push(i[r+1][n-1]),i[r-1]&&i[r-1][n+1]&&e.push(i[r-1][n+1]),i[r+1]&&i[r+1][n+1]&&e.push(i[r+1][n+1])),e},Xs.prototype.toString=function(){for(var t,e,r,n,i=[],o=this.grid,s=0,a=o.length;s<a;s++){for(t=[],r=0,n=(e=o[s]).length;r<n;r++)t.push(e[r].weight);i.push(t.join(" "))}return i.join("\n")},Zs.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},Zs.prototype.getCost=function(t){return t&&t.x!==this.x&&t.y!==this.y?1.41421*this.weight:this.weight},Zs.prototype.isWall=function(){return 0===this.weight},Ys.prototype={push:function(t){this.content.push(t),this.sinkDown(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),t},remove:function(t){var e=this.content.indexOf(t),r=this.content.pop();e!==this.content.length-1&&(this.content[e]=r,this.scoreFunction(r)<this.scoreFunction(t)?this.sinkDown(e):this.bubbleUp(e))},size:function(){return this.content.length},rescoreElement:function(t){this.sinkDown(this.content.indexOf(t))},sinkDown:function(t){for(var e=this.content[t];t>0;){var r=(t+1>>1)-1,n=this.content[r];if(!(this.scoreFunction(e)<this.scoreFunction(n)))break;this.content[r]=e,this.content[t]=n,t=r}},bubbleUp:function(t){for(var e=this.content.length,r=this.content[t],n=this.scoreFunction(r);;){var i,o=t+1<<1,s=o-1,a=null;if(s<e){var u=this.content[s];(i=this.scoreFunction(u))<n&&(a=s)}if(o<e){var l=this.content[o];this.scoreFunction(l)<(null===a?n:i)&&(a=o)}if(null===a)break;this.content[t]=this.content[a],this.content[a]=r,t=a}}},ta.prototype={constructor:ta,insert:function(t,e){var r,n,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;r=t}else this._?(t=ia(this._),e.P=null,e.N=t,t.P=t.L=e,r=t):(e.P=e.N=null,this._=e,r=null);for(e.L=e.R=null,e.U=r,e.C=!0,t=e;r&&r.C;)r===(n=r.U).L?(i=n.R)&&i.C?(r.C=i.C=!1,n.C=!0,t=n):(t===r.R&&(ra(this,r),r=(t=r).U),r.C=!1,n.C=!0,na(this,n)):(i=n.L)&&i.C?(r.C=i.C=!1,n.C=!0,t=n):(t===r.L&&(na(this,r),r=(t=r).U),r.C=!1,n.C=!0,ra(this,n)),r=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,r,n,i=t.U,o=t.L,s=t.R;if(r=o?s?ia(s):o:s,i?i.L===t?i.L=r:i.R=r:this._=r,o&&s?(n=r.C,r.C=t.C,r.L=o,o.U=r,r!==s?(i=r.U,r.U=t.U,t=r.R,i.L=t,r.R=s,s.U=r):(r.U=i,i=r,t=r.R)):(n=t.C,t=r),t&&(t.U=i),!n)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,ra(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,na(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,ra(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,na(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,ra(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,na(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}};var pa,da=[];function ya(){ea(this),this.x=this.y=this.arc=this.site=this.cy=null}function va(t){var e=t.P,r=t.N;if(e&&r){var n=e.site,i=t.site,o=r.site;if(n!==o){var s=i[0],a=i[1],u=n[0]-s,l=n[1]-a,c=o[0]-s,h=o[1]-a,f=2*(u*h-l*c);if(!(f>=-Ta)){var p=u*u+l*l,d=c*c+h*h,y=(h*p-l*d)/f,v=(u*d-c*p)/f,g=da.pop()||new ya;g.arc=t,g.site=i,g.x=y+s,g.y=(g.cy=v+a)+Math.sqrt(y*y+v*v),t.circle=g;for(var m=null,_=Ma._;_;)if(g.y<_.y||g.y===_.y&&g.x<=_.x){if(!_.L){m=_.P;break}_=_.L}else{if(!_.R){m=_;break}_=_.R}Ma.insert(m,g),m||(pa=g)}}}}function ga(t){var e=t.circle;e&&(e.P||(pa=e.N),Ma.remove(e),da.push(e),ea(e),t.circle=null)}var ma=[];function _a(){ea(this),this.edge=this.site=this.circle=null}function ba(t){var e=ma.pop()||new _a;return e.site=t,e}function xa(t){ga(t),Ea.remove(t),ma.push(t),ea(t)}function Sa(t){var e=t.circle,r=e.x,n=e.cy,i=[r,n],o=t.P,s=t.N,a=[t];xa(t);for(var u=o;u.circle&&Math.abs(r-u.circle.x)<Na&&Math.abs(n-u.circle.cy)<Na;)o=u.P,a.unshift(u),xa(u),u=o;a.unshift(u),ga(u);for(var l=s;l.circle&&Math.abs(r-l.circle.x)<Na&&Math.abs(n-l.circle.cy)<Na;)s=l.N,a.push(l),xa(l),l=s;a.push(l),ga(l);var c,h=a.length;for(c=1;c<h;++c)l=a[c],u=a[c-1],aa(l.edge,u.site,l.site,i);u=a[0],(l=a[h-1]).edge=oa(u.site,l.site,null,i),va(u),va(l)}function wa(t){for(var e,r,n,i,o=t[0],s=t[1],a=Ea._;a;)if((n=Ca(a,s)-o)>Na)a=a.L;else{if(!((i=o-Ia(a,s))>Na)){n>-Na?(e=a.P,r=a):i>-Na?(e=a,r=a.N):e=r=a;break}if(!a.R){e=a;break}a=a.R}!function(t){Pa[t.index]={site:t,halfedges:[]}}(t);var u=ba(t);if(Ea.insert(e,u),e||r){if(e===r)return ga(e),r=ba(e.site),Ea.insert(u,r),u.edge=r.edge=oa(e.site,u.site),va(e),void va(r);if(r){ga(e),ga(r);var l=e.site,c=l[0],h=l[1],f=t[0]-c,p=t[1]-h,d=r.site,y=d[0]-c,v=d[1]-h,g=2*(f*v-p*y),m=f*f+p*p,_=y*y+v*v,b=[(v*m-p*_)/g+c,(f*_-y*m)/g+h];aa(r.edge,l,d,b),u.edge=oa(l,t,null,b),r.edge=oa(t,d,null,b),va(e),va(r)}else u.edge=oa(e.site,u.site)}}function Ca(t,e){var r=t.site,n=r[0],i=r[1],o=i-e;if(!o)return n;var s=t.P;if(!s)return-1/0;var a=(r=s.site)[0],u=r[1],l=u-e;if(!l)return a;var c=a-n,h=1/o-1/l,f=c/l;return h?(-f+Math.sqrt(f*f-2*h*(c*c/(-2*l)-u+l/2+i-o/2)))/h+n:(n+a)/2}function Ia(t,e){var r=t.N;if(r)return Ca(r,e);var n=t.site;return n[1]===e?n[0]:1/0}var Ea,Pa,Ma,La,Na=1e-6,Ta=1e-12;function Oa(t,e){return e[1]-t[1]||e[0]-t[0]}function Aa(t,e){var r,n,i,o=t.sort(Oa).pop();for(La=[],Pa=new Array(t.length),Ea=new ta,Ma=new ta;;)if(i=pa,o&&(!i||o[1]<i.y||o[1]===i.y&&o[0]<i.x))o[0]===r&&o[1]===n||(wa(o),r=o[0],n=o[1]),o=t.pop();else{if(!i)break;Sa(i.arc)}if(function(){for(var t,e,r,n,i=0,o=Pa.length;i<o;++i)if((t=Pa[i])&&(n=(e=t.halfedges).length)){var s=new Array(n),a=new Array(n);for(r=0;r<n;++r)s[r]=r,a[r]=ca(t,La[e[r]]);for(s.sort(function(t,e){return a[e]-a[t]}),r=0;r<n;++r)a[r]=e[s[r]];for(r=0;r<n;++r)e[r]=a[r]}}(),e){var s=+e[0][0],a=+e[0][1],u=+e[1][0],l=+e[1][1];!function(t,e,r,n){for(var i,o=La.length;o--;)la(i=La[o],t,e,r,n)&&ua(i,t,e,r,n)&&(Math.abs(i[0][0]-i[1][0])>Na||Math.abs(i[0][1]-i[1][1])>Na)||delete La[o]}(s,a,u,l),function(t,e,r,n){var i,o,s,a,u,l,c,h,f,p,d,y,v=Pa.length,g=!0;for(i=0;i<v;++i)if(o=Pa[i]){for(s=o.site,a=(u=o.halfedges).length;a--;)La[u[a]]||u.splice(a,1);for(a=0,l=u.length;a<l;)d=(p=fa(o,La[u[a]]))[0],y=p[1],h=(c=ha(o,La[u[++a%l]]))[0],f=c[1],(Math.abs(d-h)>Na||Math.abs(y-f)>Na)&&(u.splice(a,0,La.push(sa(s,p,Math.abs(d-t)<Na&&n-y>Na?[t,Math.abs(h-t)<Na?f:n]:Math.abs(y-n)<Na&&r-d>Na?[Math.abs(f-n)<Na?h:r,n]:Math.abs(d-r)<Na&&y-e>Na?[r,Math.abs(h-r)<Na?f:e]:Math.abs(y-e)<Na&&d-t>Na?[Math.abs(f-e)<Na?h:t,e]:null))-1),++l);l&&(g=!1)}if(g){var m,_,b,x=1/0;for(i=0,g=null;i<v;++i)(o=Pa[i])&&(b=(m=(s=o.site)[0]-t)*m+(_=s[1]-e)*_)<x&&(x=b,g=o);if(g){var S=[t,e],w=[t,n],C=[r,n],I=[r,e];g.halfedges.push(La.push(sa(s=g.site,S,w))-1,La.push(sa(s,w,C))-1,La.push(sa(s,C,I))-1,La.push(sa(s,I,S))-1)}}for(i=0;i<v;++i)(o=Pa[i])&&(o.halfedges.length||delete Pa[i])}(s,a,u,l)}this.edges=La,this.cells=Pa,Ea=Ma=La=Pa=null}function Ra(t){return(t=t.slice()).push(t[0]),c([t])}function Fa(t,e,r,n){var i=(n=n||{}).steps||64,o=n.units||"kilometers",s=n.angle||0,a=n.pivot||t,u=n.properties||t.properties||{};if(!t)throw new Error("center is required");if(!e)throw new Error("xSemiAxis is required");if(!r)throw new Error("ySemiAxis is required");if(!L(n))throw new Error("options must be an object");if(!M(i))throw new Error("steps must be a number");if(!M(s))throw new Error("angle must be a number");var l=K(t);if("degrees"===o)var h=I(s);else e=zi(t,e,90,{units:o}),r=zi(t,r,0,{units:o}),e=K(e)[0]-l[0],r=K(r)[1]-l[1];for(var f=[],p=0;p<i;p+=1){var d=-360*p/i,y=e*r/Math.sqrt(Math.pow(r,2)+Math.pow(e,2)*Math.pow(Da(d),2)),v=e*r/Math.sqrt(Math.pow(e,2)+Math.pow(r,2)/Math.pow(Da(d),2));if(d<-90&&d>=-270&&(y=-y),d<-180&&d>=-360&&(v=-v),"degrees"===o){var g=y*Math.cos(h)+v*Math.sin(h),m=v*Math.cos(h)-y*Math.sin(h);y=g,v=m}f.push([y+l[0],v+l[1]])}return f.push(f[0]),"degrees"===o?c([f],u):ts(c([f],u),s,{pivot:a})}function Da(t){var e=t*Math.PI/180;return Math.tan(e)}function ka(t,e){void 0===e&&(e={});var r=0,n=0,i=0;return B(t,function(t,o,s){var a=e.weight?null==s?void 0:s[e.weight]:void 0;if(!M(a=null==a?1:a))throw new Error("weight value must be a number for feature index "+o);(a=Number(a))>0&&A(t,function(t){r+=t[0]*a,n+=t[1]*a,i+=a})}),u([r/i,n/i],e.properties,e)}function ja(t,e,r,n,i){var o=n.tolerance||.001,s=0,a=0,l=0,c=0;if(k(r,function(e){var r,n=null===(r=e.properties)||void 0===r?void 0:r.weight,i=null==n?1:n;if(!M(i=Number(i)))throw new Error("weight value must be a number");if(i>0){c+=1;var o=i*be(e,t);0===o&&(o=1);var u=i/o;s+=e.geometry.coordinates[0]*u,a+=e.geometry.coordinates[1]*u,l+=u}}),c<1)throw new Error("no features to measure");var h=s/l,f=a/l;return 1===c||0===i||Math.abs(h-e[0])<o&&Math.abs(f-e[1])<o?u([h,f],{medianCandidates:n.medianCandidates}):(n.medianCandidates.push([h,f]),ja([h,f],t,r,n,i-1))}function Ga(t,e){return{x:t[0]-e[0],y:t[1]-e[1]}}function Ba(t,e){var r=0,n=0;A(t,function(i,o,s,a,u){u>r&&(r=u,n=o,e.push([]));var l=o-n,c=t.coordinates[u][l+1],h=i[0],f=i[1],p=c[0],d=c[1];e[u].push([.75*h+.25*p,.75*f+.25*d]),e[u].push([.25*h+.75*p,.25*f+.75*d])},!0),e.forEach(function(t){t.push(t[0])})}function Ua(t,e){var r=0,n=0,i=0;A(t,function(o,s,a,u,l){u>i&&(i=u,n=s,e.push([[]])),l>r&&(r=l,n=s,e[u].push([]));var c=s-n,h=t.coordinates[u][l][c+1],f=o[0],p=o[1],d=h[0],y=h[1];e[u][l].push([.75*f+.25*d,.75*p+.25*y]),e[u][l].push([.25*f+.75*d,.25*p+.75*y])},!0),e.forEach(function(t){t.forEach(function(t){t.push(t[0])})})}function qa(t,e,r){void 0===r&&(r=2);var n=K(t),i=K(e),o=n[0]-i[0],s=n[1]-i[1];return 1===r?Math.abs(o)+Math.abs(s):Math.pow(Math.pow(o,r)+Math.pow(s,r),1/r)}function za(t,e){var r=(e=e||{}).threshold||1e4,n=e.p||2,i=e.binary||!1,o=e.alpha||-1,s=e.standardization||!1,a=[];k(t,function(t){a.push(xr(t))});for(var u=[],l=0;l<a.length;l++)u[l]=[];for(l=0;l<a.length;l++)for(var c=l;c<a.length;c++){l===c&&(u[l][c]=0);var h=qa(a[l],a[c],n);u[l][c]=h,u[c][l]=h}for(l=0;l<a.length;l++)for(c=0;c<a.length;c++){0!==(h=u[l][c])&&(u[l][c]=i?h<=r?1:0:h<=r?Math.pow(h,o):0)}if(s)for(l=0;l<a.length;l++){var f=u[l].reduce(function(t,e){return t+e},0);for(c=0;c<a.length;c++)u[l][c]=u[l][c]/f}return u}function Va(t){for(var e=0,r=0,n=t;r<n.length;r++){e+=n[r]}return e/t.length}function Wa(t,e){return void 0===e&&(e={}),Xa(t,"mercator",e)}function Ha(t,e){return void 0===e&&(e={}),Xa(t,"wgs84",e)}function Xa(t,e,r){void 0===r&&(r={});var n=(r=r||{}).mutate;if(!t)throw new Error("geojson is required");return Array.isArray(t)&&M(t[0])?t="mercator"===e?Za(t):Ya(t):(!0!==n&&(t=Ie(t)),A(t,function(t){var r="mercator"===e?Za(t):Ya(t);t[0]=r[0],t[1]=r[1]})),t}function Za(t){var e=Math.PI/180,r=6378137,n=20037508.342789244,i=[r*(Math.abs(t[0])<=180?t[0]:t[0]-360*function(t){return t<0?-1:t>0?1:0}(t[0]))*e,r*Math.log(Math.tan(.25*Math.PI+.5*t[1]*e))];return i[0]>n&&(i[0]=n),i[0]<-n&&(i[0]=-n),i[1]>n&&(i[1]=n),i[1]<-n&&(i[1]=-n),i}function Ya(t){var e=180/Math.PI,r=6378137;return[t[0]*e/r,(.5*Math.PI-2*Math.atan(Math.exp(-t[1]/r)))*e]}Aa.prototype={constructor:Aa,polygons:function(){var t=this.edges;return this.cells.map(function(e){var r=e.halfedges.map(function(r){return ha(e,t[r])});return r.data=e.site.data,r})},triangles:function(){var t=[],e=this.edges;return this.cells.forEach(function(r,n){if(o=(i=r.halfedges).length)for(var i,o,s,a,u,l,c=r.site,h=-1,f=e[i[o-1]],p=f.left===c?f.right:f.left;++h<o;)s=p,p=(f=e[i[h]]).left===c?f.right:f.left,s&&p&&n<s.index&&n<p.index&&(u=s,l=p,((a=c)[0]-l[0])*(u[1]-a[1])-(a[0]-u[0])*(l[1]-a[1])<0)&&t.push([c.data,s.data,p.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,e,r){for(var n,i,o=this,s=o._found||0,a=o.cells.length;!(i=o.cells[s]);)if(++s>=a)return null;var u=t-i.site[0],l=e-i.site[1],c=u*u+l*l;do{i=o.cells[n=s],s=null,i.halfedges.forEach(function(r){var n=o.edges[r],a=n.left;if(a!==i.site&&a||(a=n.right)){var u=t-a[0],l=e-a[1],h=u*u+l*l;h<c&&(c=h,s=a.index)}})}while(null!==s);return o._found=n,null==r||c<=r*r?i.site:null}};var Ja=Object.freeze({__proto__:null,toMercator:Wa,toWgs84:Ha}),Qa=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var n=Array(t),i=0;for(e=0;e<r;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n};function Ka(t){return Array.isArray(t)?nu(t):t&&t.bbox?nu(t.bbox):[360*ru(),180*ru()]}function $a(t,e){void 0===e&&(e={}),null==t&&(t=1);for(var r=[],n=0;n<t;n++)r.push(u(Ka(e.bbox)));return d(r)}function tu(t,e){void 0===e&&(e={}),null==t&&(t=1),M(e.num_vertices)&&void 0!==e.num_vertices||(e.num_vertices=10),M(e.max_radial_length)&&void 0!==e.max_radial_length||(e.max_radial_length=10);for(var r=[],n=function(t){var n,i=[],o=Qa(Array(e.num_vertices+1)).map(Math.random);o.forEach(function(t,e,r){r[e]=e>0?t+r[e-1]:t}),o.forEach(function(t){t=2*t*Math.PI/o[o.length-1];var r=Math.random();i.push([r*(e.max_radial_length||10)*Math.sin(t),r*(e.max_radial_length||10)*Math.cos(t)])}),i[i.length-1]=i[0],i=i.map((n=Ka(e.bbox),function(t){return[t[0]+n[0],t[1]+n[1]]})),r.push(c([i]))},i=0;i<t;i++)n();return d(r)}function eu(t,e){if(void 0===e&&(e={}),!L(e=e||{}))throw new Error("options is invalid");var r=e.bbox,n=e.num_vertices,i=e.max_length,o=e.max_rotation;null==t&&(t=1),(!M(n)||void 0===n||n<2)&&(n=10),M(i)&&void 0!==i||(i=1e-4),M(o)&&void 0!==o||(o=Math.PI/8);for(var s=[],a=0;a<t;a++){for(var u=[Ka(r)],l=0;l<n-1;l++){var c=(0===l?2*Math.random()*Math.PI:Math.tan((u[l][1]-u[l-1][1])/(u[l][0]-u[l-1][0])))+(Math.random()-.5)*o*2,h=Math.random()*i;u.push([u[l][0]+h*Math.cos(c),u[l][1]+h*Math.sin(c)])}s.push(f(u))}return d(s)}function ru(){return Math.random()-.5}function nu(t){return[Math.random()*(t[2]-t[0])+t[0],Math.random()*(t[3]-t[1])+t[1]]}var iu=Object.freeze({__proto__:null,randomPosition:Ka,randomPoint:$a,randomPolygon:tu,randomLineString:eu});function ou(t,e){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(null==e)throw new Error("filter is required");var r=[];return k(t,function(t){lu(t.properties,e)&&r.push(t)}),d(r)}function su(t,e,r){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(null==e)throw new Error("property is required");for(var n=uu(t,e),i=Object.keys(n),o=0;o<i.length;o++){for(var s=i[o],a=n[s],u=[],l=0;l<a.length;l++)u.push(t.features[a[l]]);r(d(u),s,o)}}function au(t,e,r,n){var i=n;return su(t,e,function(t,e,o){i=0===o&&void 0===n?t:r(i,t,e,o)}),i}function uu(t,e){var r={};return k(t,function(t,n){var i=t.properties||{};if(Object.prototype.hasOwnProperty.call(i,String(e))){var o=i[e];Object.prototype.hasOwnProperty.call(r,o)?r[o].push(n):r[o]=[n]}}),r}function lu(t,e){if(void 0===t)return!1;var r=typeof e;if("number"===r||"string"===r)return Object.prototype.hasOwnProperty.call(t,e);if(Array.isArray(e)){for(var n=0;n<e.length;n++)if(!lu(t,e[n]))return!1;return!0}return cu(t,e)}function cu(t,e){for(var r=Object.keys(e),n=0;n<r.length;n++){var i=r[n];if(t[i]!==e[i])return!1}return!0}function hu(t,e){if(!e)return{};if(!e.length)return{};for(var r={},n=0;n<e.length;n++){var i=e[n];Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r}var fu=Object.freeze({__proto__:null,getCluster:ou,clusterEach:su,clusterReduce:au,createBins:uu,applyFilter:lu,propertiesContainsFilter:cu,filterProperties:hu}),pu=function(t,e){this.next=null,this.key=t,this.data=e,this.left=null,this.right=null
/**
     * splaytree v3.1.0
     * Fast Splay tree for Node and browser
     *
     * @author Alexander Milevski <info@w8r.name>
     * @license MIT
     * @preserve
     */};function du(t,e){return t>e?1:t<e?-1:0}function yu(t,e,r){for(var n=new pu(null,null),i=n,o=n;;){var s=r(t,e.key);if(s<0){if(null===e.left)break;if(r(t,e.left.key)<0){var a=e.left;if(e.left=a.right,a.right=e,null===(e=a).left)break}o.left=e,o=e,e=e.left}else{if(!(s>0))break;if(null===e.right)break;if(r(t,e.right.key)>0){a=e.right;if(e.right=a.left,a.left=e,null===(e=a).right)break}i.right=e,i=e,e=e.right}}return i.right=e.left,o.left=e.right,e.left=n.right,e.right=n.left,e}function vu(t,e,r,n){var i=new pu(t,e);if(null===r)return i.left=i.right=null,i;var o=n(t,(r=yu(t,r,n)).key);return o<0?(i.left=r.left,i.right=r,r.left=null):o>=0&&(i.right=r.right,i.left=r,r.right=null),i}function gu(t,e,r){var n=null,i=null;if(e){var o=r((e=yu(t,e,r)).key,t);0===o?(n=e.left,i=e.right):o<0?(i=e.right,e.right=null,n=e):(n=e.left,e.left=null,i=e)}return{left:n,right:i}}function mu(t,e,r,n,i){if(t){n(e+(r?"└── ":"├── ")+i(t)+"\n");var o=e+(r?"    ":"│   ");t.left&&mu(t.left,o,!1,n,i),t.right&&mu(t.right,o,!0,n,i)}}var _u=function(){function t(t){void 0===t&&(t=du),this._root=null,this._size=0,this._comparator=t}return t.prototype.insert=function(t,e){return this._size++,this._root=vu(t,e,this._root,this._comparator)},t.prototype.add=function(t,e){var r=new pu(t,e);null===this._root&&(r.left=r.right=null,this._size++,this._root=r);var n=this._comparator,i=yu(t,this._root,n),o=n(t,i.key);return 0===o?this._root=i:(o<0?(r.left=i.left,r.right=i,i.left=null):o>0&&(r.right=i.right,r.left=i,i.right=null),this._size++,this._root=r),this._root},t.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},t.prototype._remove=function(t,e,r){var n;return null===e?null:0===r(t,(e=yu(t,e,r)).key)?(null===e.left?n=e.right:(n=yu(t,e.left,r)).right=e.right,this._size--,n):e},t.prototype.pop=function(){var t=this._root;if(t){for(;t.left;)t=t.left;return this._root=yu(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},t.prototype.findStatic=function(t){for(var e=this._root,r=this._comparator;e;){var n=r(t,e.key);if(0===n)return e;e=n<0?e.left:e.right}return null},t.prototype.find=function(t){return this._root&&(this._root=yu(t,this._root,this._comparator),0!==this._comparator(t,this._root.key))?null:this._root},t.prototype.contains=function(t){for(var e=this._root,r=this._comparator;e;){var n=r(t,e.key);if(0===n)return!0;e=n<0?e.left:e.right}return!1},t.prototype.forEach=function(t,e){for(var r=this._root,n=[],i=!1;!i;)null!==r?(n.push(r),r=r.left):0!==n.length?(r=n.pop(),t.call(e,r),r=r.right):i=!0;return this},t.prototype.range=function(t,e,r,n){for(var i=[],o=this._comparator,s=this._root;0!==i.length||s;)if(s)i.push(s),s=s.left;else{if(o((s=i.pop()).key,e)>0)break;if(o(s.key,t)>=0&&r.call(n,s))return this;s=s.right}return this},t.prototype.keys=function(){var t=[];return this.forEach(function(e){var r=e.key;return t.push(r)}),t},t.prototype.values=function(){var t=[];return this.forEach(function(e){var r=e.data;return t.push(r)}),t},t.prototype.min=function(){return this._root?this.minNode(this._root).key:null},t.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},t.prototype.minNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.left;)t=t.left;return t},t.prototype.maxNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.right;)t=t.right;return t},t.prototype.at=function(t){for(var e=this._root,r=!1,n=0,i=[];!r;)if(e)i.push(e),e=e.left;else if(i.length>0){if(e=i.pop(),n===t)return e;n++,e=e.right}else r=!0;return null},t.prototype.next=function(t){var e=this._root,r=null;if(t.right){for(r=t.right;r.left;)r=r.left;return r}for(var n=this._comparator;e;){var i=n(t.key,e.key);if(0===i)break;i<0?(r=e,e=e.left):e=e.right}return r},t.prototype.prev=function(t){var e=this._root,r=null;if(null!==t.left){for(r=t.left;r.right;)r=r.right;return r}for(var n=this._comparator;e;){var i=n(t.key,e.key);if(0===i)break;i<0?e=e.left:(r=e,e=e.right)}return r},t.prototype.clear=function(){return this._root=null,this._size=0,this},t.prototype.toList=function(){return function(t){var e=t,r=[],n=!1,i=new pu(null,null),o=i;for(;!n;)e?(r.push(e),e=e.left):r.length>0?e=(e=o=o.next=r.pop()).right:n=!0;return o.next=null,i.next}(this._root)},t.prototype.load=function(t,e,r){void 0===e&&(e=[]),void 0===r&&(r=!1);var n=t.length,i=this._comparator;if(r&&Su(t,e,0,n-1,i),null===this._root)this._root=bu(t,e,0,n),this._size=n;else{var o=function(t,e,r){var n=new pu(null,null),i=n,o=t,s=e;for(;null!==o&&null!==s;)r(o.key,s.key)<0?(i.next=o,o=o.next):(i.next=s,s=s.next),i=i.next;null!==o?i.next=o:null!==s&&(i.next=s);return n.next}(this.toList(),function(t,e){for(var r=new pu(null,null),n=r,i=0;i<t.length;i++)n=n.next=new pu(t[i],e[i]);return n.next=null,r.next}(t,e),i);n=this._size+n,this._root=xu({head:o},0,n)}return this},t.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),t.prototype.toString=function(t){void 0===t&&(t=function(t){return String(t.key)});var e=[];return mu(this._root,"",!0,function(t){return e.push(t)},t),e.join("")},t.prototype.update=function(t,e,r){var n=this._comparator,i=gu(t,this._root,n),o=i.left,s=i.right;n(t,e)<0?s=vu(e,r,s,n):o=vu(e,r,o,n),this._root=function(t,e,r){return null===e?t:(null===t||((e=yu(t.key,e,r)).left=t),e)}(o,s,n)},t.prototype.split=function(t){return gu(t,this._root,this._comparator)},t}();function bu(t,e,r,n){var i=n-r;if(i>0){var o=r+Math.floor(i/2),s=t[o],a=e[o],u=new pu(s,a);return u.left=bu(t,e,r,o),u.right=bu(t,e,o+1,n),u}return null}function xu(t,e,r){var n=r-e;if(n>0){var i=e+Math.floor(n/2),o=xu(t,e,i),s=t.head;return s.left=o,t.head=t.head.next,s.right=xu(t,i+1,r),s}return null}function Su(t,e,r,n,i){if(!(r>=n)){for(var o=t[r+n>>1],s=r-1,a=n+1;;){do{s++}while(i(t[s],o)<0);do{a--}while(i(t[a],o)>0);if(s>=a)break;var u=t[s];t[s]=t[a],t[a]=u,u=e[s],e[s]=e[a],e[a]=u}Su(t,e,r,a,i),Su(t,e,a+1,n,i)}}function wu(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Cu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Iu(t,e,r){return e&&Cu(t.prototype,e),r&&Cu(t,r),t}var Eu=function(t,e){return t.ll.x<=e.x&&e.x<=t.ur.x&&t.ll.y<=e.y&&e.y<=t.ur.y},Pu=function(t,e){if(e.ur.x<t.ll.x||t.ur.x<e.ll.x||e.ur.y<t.ll.y||t.ur.y<e.ll.y)return null;var r=t.ll.x<e.ll.x?e.ll.x:t.ll.x,n=t.ur.x<e.ur.x?t.ur.x:e.ur.x;return{ll:{x:r,y:t.ll.y<e.ll.y?e.ll.y:t.ll.y},ur:{x:n,y:t.ur.y<e.ur.y?t.ur.y:e.ur.y}}},Mu=Number.EPSILON;void 0===Mu&&(Mu=Math.pow(2,-52));var Lu=Mu*Mu,Nu=function(t,e){if(-Mu<t&&t<Mu&&-Mu<e&&e<Mu)return 0;var r=t-e;return r*r<Lu*t*e?0:t<e?-1:1},Tu=function(){function t(){wu(this,t),this.reset()}return Iu(t,[{key:"reset",value:function(){this.xRounder=new Ou,this.yRounder=new Ou}},{key:"round",value:function(t,e){return{x:this.xRounder.round(t),y:this.yRounder.round(e)}}}]),t}(),Ou=function(){function t(){wu(this,t),this.tree=new _u,this.round(0)}return Iu(t,[{key:"round",value:function(t){var e=this.tree.add(t),r=this.tree.prev(e);if(null!==r&&0===Nu(e.key,r.key))return this.tree.remove(t),r.key;var n=this.tree.next(e);return null!==n&&0===Nu(e.key,n.key)?(this.tree.remove(t),n.key):t}}]),t}(),Au=new Tu,Ru=function(t,e){return t.x*e.y-t.y*e.x},Fu=function(t,e){return t.x*e.x+t.y*e.y},Du=function(t,e,r){var n={x:e.x-t.x,y:e.y-t.y},i={x:r.x-t.x,y:r.y-t.y},o=Ru(n,i);return Nu(o,0)},ku=function(t){return Math.sqrt(Fu(t,t))},ju=function(t,e,r){var n={x:e.x-t.x,y:e.y-t.y},i={x:r.x-t.x,y:r.y-t.y};return Fu(i,n)/ku(i)/ku(n)},Gu=function(t,e,r){return 0===e.y?null:{x:t.x+e.x/e.y*(r-t.y),y:r}},Bu=function(t,e,r){return 0===e.x?null:{x:r,y:t.y+e.y/e.x*(r-t.x)}},Uu=function(){function t(e,r){wu(this,t),void 0===e.events?e.events=[this]:e.events.push(this),this.point=e,this.isLeft=r}return Iu(t,null,[{key:"compare",value:function(e,r){var n=t.comparePoints(e.point,r.point);return 0!==n?n:(e.point!==r.point&&e.link(r),e.isLeft!==r.isLeft?e.isLeft?1:-1:zu.compare(e.segment,r.segment))}},{key:"comparePoints",value:function(t,e){return t.x<e.x?-1:t.x>e.x?1:t.y<e.y?-1:t.y>e.y?1:0}}]),Iu(t,[{key:"link",value:function(t){if(t.point===this.point)throw new Error("Tried to link already linked events");for(var e=t.point.events,r=0,n=e.length;r<n;r++){var i=e[r];this.point.events.push(i),i.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var t=this.point.events.length,e=0;e<t;e++){var r=this.point.events[e];if(void 0===r.segment.consumedBy)for(var n=e+1;n<t;n++){var i=this.point.events[n];void 0===i.consumedBy&&(r.otherSE.point.events===i.otherSE.point.events&&r.segment.consume(i.segment))}}}},{key:"getAvailableLinkedEvents",value:function(){for(var t=[],e=0,r=this.point.events.length;e<r;e++){var n=this.point.events[e];n!==this&&!n.segment.ringOut&&n.segment.isInResult()&&t.push(n)}return t}},{key:"getLeftmostComparator",value:function(t){var e=this,r=new Map,n=function(n){var i,o,s,a,u,l=n.otherSE;r.set(n,{sine:(i=e.point,o=t.point,s=l.point,a={x:o.x-i.x,y:o.y-i.y},u={x:s.x-i.x,y:s.y-i.y},Ru(u,a)/ku(u)/ku(a)),cosine:ju(e.point,t.point,l.point)})};return function(t,e){r.has(t)||n(t),r.has(e)||n(e);var i=r.get(t),o=i.sine,s=i.cosine,a=r.get(e),u=a.sine,l=a.cosine;return o>=0&&u>=0?s<l?1:s>l?-1:0:o<0&&u<0?s<l?-1:s>l?1:0:u<o?-1:u>o?1:0}}}]),t}(),qu=0,zu=function(){function t(e,r,n,i){wu(this,t),this.id=++qu,this.leftSE=e,e.segment=this,e.otherSE=r,this.rightSE=r,r.segment=this,r.otherSE=e,this.rings=n,this.windings=i}return Iu(t,null,[{key:"compare",value:function(t,e){var r=t.leftSE.point.x,n=e.leftSE.point.x,i=t.rightSE.point.x,o=e.rightSE.point.x;if(o<r)return 1;if(i<n)return-1;var s=t.leftSE.point.y,a=e.leftSE.point.y,u=t.rightSE.point.y,l=e.rightSE.point.y;if(r<n){if(a<s&&a<u)return 1;if(a>s&&a>u)return-1;var c=t.comparePoint(e.leftSE.point);if(c<0)return 1;if(c>0)return-1;var h=e.comparePoint(t.rightSE.point);return 0!==h?h:-1}if(r>n){if(s<a&&s<l)return-1;if(s>a&&s>l)return 1;var f=e.comparePoint(t.leftSE.point);if(0!==f)return f;var p=t.comparePoint(e.rightSE.point);return p<0?1:p>0?-1:1}if(s<a)return-1;if(s>a)return 1;if(i<o){var d=e.comparePoint(t.rightSE.point);if(0!==d)return d}if(i>o){var y=t.comparePoint(e.rightSE.point);if(y<0)return 1;if(y>0)return-1}if(i!==o){var v=u-s,g=i-r,m=l-a,_=o-n;if(v>g&&m<_)return 1;if(v<g&&m>_)return-1}return i>o?1:i<o||u<l?-1:u>l?1:t.id<e.id?-1:t.id>e.id?1:0}}]),Iu(t,[{key:"replaceRightSE",value:function(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var t=this.leftSE.point.y,e=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<e?t:e},ur:{x:this.rightSE.point.x,y:t>e?t:e}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}},{key:"comparePoint",value:function(t){if(this.isAnEndpoint(t))return 0;var e=this.leftSE.point,r=this.rightSE.point,n=this.vector();if(e.x===r.x)return t.x===e.x?0:t.x<e.x?1:-1;var i=(t.y-e.y)/n.y,o=e.x+i*n.x;if(t.x===o)return 0;var s=(t.x-e.x)/n.x,a=e.y+s*n.y;return t.y===a?0:t.y<a?-1:1}},{key:"getIntersection",value:function(t){var e=this.bbox(),r=t.bbox(),n=Pu(e,r);if(null===n)return null;var i=this.leftSE.point,o=this.rightSE.point,s=t.leftSE.point,a=t.rightSE.point,u=Eu(e,s)&&0===this.comparePoint(s),l=Eu(r,i)&&0===t.comparePoint(i),c=Eu(e,a)&&0===this.comparePoint(a),h=Eu(r,o)&&0===t.comparePoint(o);if(l&&u)return h&&!c?o:!h&&c?a:null;if(l)return c&&i.x===a.x&&i.y===a.y?null:i;if(u)return h&&o.x===s.x&&o.y===s.y?null:s;if(h&&c)return null;if(h)return o;if(c)return a;var f=function(t,e,r,n){if(0===e.x)return Bu(r,n,t.x);if(0===n.x)return Bu(t,e,r.x);if(0===e.y)return Gu(r,n,t.y);if(0===n.y)return Gu(t,e,r.y);var i=Ru(e,n);if(0==i)return null;var o={x:r.x-t.x,y:r.y-t.y},s=Ru(o,e)/i,a=Ru(o,n)/i;return{x:(t.x+a*e.x+(r.x+s*n.x))/2,y:(t.y+a*e.y+(r.y+s*n.y))/2}}(i,this.vector(),s,t.vector());return null===f?null:Eu(n,f)?Au.round(f.x,f.y):null}},{key:"split",value:function(e){var r=[],n=void 0!==e.events,i=new Uu(e,!0),o=new Uu(e,!1),s=this.rightSE;this.replaceRightSE(o),r.push(o),r.push(i);var a=new t(i,s,this.rings.slice(),this.windings.slice());return Uu.comparePoints(a.leftSE.point,a.rightSE.point)>0&&a.swapEvents(),Uu.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),n&&(i.checkForConsuming(),o.checkForConsuming()),r}},{key:"swapEvents",value:function(){var t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var e=0,r=this.windings.length;e<r;e++)this.windings[e]*=-1}},{key:"consume",value:function(e){for(var r=this,n=e;r.consumedBy;)r=r.consumedBy;for(;n.consumedBy;)n=n.consumedBy;var i=t.compare(r,n);if(0!==i){if(i>0){var o=r;r=n,n=o}if(r.prev===n){var s=r;r=n,n=s}for(var a=0,u=n.rings.length;a<u;a++){var l=n.rings[a],c=n.windings[a],h=r.rings.indexOf(l);-1===h?(r.rings.push(l),r.windings.push(c)):r.windings[h]+=c}n.rings=null,n.windings=null,n.consumedBy=r,n.leftSE.consumedBy=r.leftSE,n.rightSE.consumedBy=r.rightSE}}},{key:"prevInResult",value:function(){return void 0!==this._prevInResult||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}},{key:"beforeState",value:function(){if(void 0!==this._beforeState)return this._beforeState;if(this.prev){var t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}},{key:"afterState",value:function(){if(void 0!==this._afterState)return this._afterState;var t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};for(var e=this._afterState.rings,r=this._afterState.windings,n=this._afterState.multiPolys,i=0,o=this.rings.length;i<o;i++){var s=this.rings[i],a=this.windings[i],u=e.indexOf(s);-1===u?(e.push(s),r.push(a)):r[u]+=a}for(var l=[],c=[],h=0,f=e.length;h<f;h++)if(0!==r[h]){var p=e[h],d=p.poly;if(-1===c.indexOf(d))if(p.isExterior)l.push(d);else{-1===c.indexOf(d)&&c.push(d);var y=l.indexOf(p.poly);-1!==y&&l.splice(y,1)}}for(var v=0,g=l.length;v<g;v++){var m=l[v].multiPoly;-1===n.indexOf(m)&&n.push(m)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var t=this.beforeState().multiPolys,e=this.afterState().multiPolys;switch($u.type){case"union":var r=0===t.length,n=0===e.length;this._isInResult=r!==n;break;case"intersection":var i,o;t.length<e.length?(i=t.length,o=e.length):(i=e.length,o=t.length),this._isInResult=o===$u.numMultiPolys&&i<o;break;case"xor":var s=Math.abs(t.length-e.length);this._isInResult=s%2==1;break;case"difference":var a=function(t){return 1===t.length&&t[0].isSubject};this._isInResult=a(t)!==a(e);break;default:throw new Error("Unrecognized operation type found ".concat($u.type))}return this._isInResult}}],[{key:"fromRing",value:function(e,r,n){var i,o,s,a=Uu.comparePoints(e,r);if(a<0)i=e,o=r,s=1;else{if(!(a>0))throw new Error("Tried to create degenerate segment at [".concat(e.x,", ").concat(e.y,"]"));i=r,o=e,s=-1}return new t(new Uu(i,!0),new Uu(o,!1),[n],[s])}}]),t}(),Vu=function(){function t(e,r,n){if(wu(this,t),!Array.isArray(e)||0===e.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=r,this.isExterior=n,this.segments=[],"number"!=typeof e[0][0]||"number"!=typeof e[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var i=Au.round(e[0][0],e[0][1]);this.bbox={ll:{x:i.x,y:i.y},ur:{x:i.x,y:i.y}};for(var o=i,s=1,a=e.length;s<a;s++){if("number"!=typeof e[s][0]||"number"!=typeof e[s][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var u=Au.round(e[s][0],e[s][1]);u.x===o.x&&u.y===o.y||(this.segments.push(zu.fromRing(o,u,this)),u.x<this.bbox.ll.x&&(this.bbox.ll.x=u.x),u.y<this.bbox.ll.y&&(this.bbox.ll.y=u.y),u.x>this.bbox.ur.x&&(this.bbox.ur.x=u.x),u.y>this.bbox.ur.y&&(this.bbox.ur.y=u.y),o=u)}i.x===o.x&&i.y===o.y||this.segments.push(zu.fromRing(o,i,this))}return Iu(t,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,r=this.segments.length;e<r;e++){var n=this.segments[e];t.push(n.leftSE),t.push(n.rightSE)}return t}}]),t}(),Wu=function(){function t(e,r){if(wu(this,t),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Vu(e[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var n=1,i=e.length;n<i;n++){var o=new Vu(e[n],this,!1);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.interiorRings.push(o)}this.multiPoly=r}return Iu(t,[{key:"getSweepEvents",value:function(){for(var t=this.exteriorRing.getSweepEvents(),e=0,r=this.interiorRings.length;e<r;e++)for(var n=this.interiorRings[e].getSweepEvents(),i=0,o=n.length;i<o;i++)t.push(n[i]);return t}}]),t}(),Hu=function(){function t(e,r){if(wu(this,t),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"==typeof e[0][0][0]&&(e=[e])}catch(t){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var n=0,i=e.length;n<i;n++){var o=new Wu(e[n],this);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.polys.push(o)}this.isSubject=r}return Iu(t,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,r=this.polys.length;e<r;e++)for(var n=this.polys[e].getSweepEvents(),i=0,o=n.length;i<o;i++)t.push(n[i]);return t}}]),t}(),Xu=function(){function t(e){wu(this,t),this.events=e;for(var r=0,n=e.length;r<n;r++)e[r].segment.ringOut=this;this.poly=null}return Iu(t,null,[{key:"factory",value:function(e){for(var r=[],n=0,i=e.length;n<i;n++){var o=e[n];if(o.isInResult()&&!o.ringOut){for(var s=null,a=o.leftSE,u=o.rightSE,l=[a],c=a.point,h=[];s=a,a=u,l.push(a),a.point!==c;)for(;;){var f=a.getAvailableLinkedEvents();if(0===f.length){var p=l[0].point,d=l[l.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(p.x,",")+" ".concat(p.y,"]. Last matching segment found ends at")+" [".concat(d.x,", ").concat(d.y,"]."))}if(1===f.length){u=f[0].otherSE;break}for(var y=null,v=0,g=h.length;v<g;v++)if(h[v].point===a.point){y=v;break}if(null===y){h.push({index:l.length,point:a.point});var m=a.getLeftmostComparator(s);u=f.sort(m)[0].otherSE;break}var _=h.splice(y)[0],b=l.splice(_.index);b.unshift(b[0].otherSE),r.push(new t(b.reverse()))}r.push(new t(l))}}return r}}]),Iu(t,[{key:"getGeom",value:function(){for(var t=this.events[0].point,e=[t],r=1,n=this.events.length-1;r<n;r++){var i=this.events[r].point,o=this.events[r+1].point;0!==Du(i,t,o)&&(e.push(i),t=i)}if(1===e.length)return null;var s=e[0],a=e[1];0===Du(s,t,a)&&e.shift(),e.push(e[0]);for(var u=this.isExteriorRing()?1:-1,l=this.isExteriorRing()?0:e.length-1,c=this.isExteriorRing()?e.length:-1,h=[],f=l;f!=c;f+=u)h.push([e[f].x,e[f].y]);return h}},{key:"isExteriorRing",value:function(){if(void 0===this._isExteriorRing){var t=this.enclosingRing();this._isExteriorRing=!t||!t.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var t=this.events[0],e=1,r=this.events.length;e<r;e++){var n=this.events[e];Uu.compare(t,n)>0&&(t=n)}for(var i=t.segment.prevInResult(),o=i?i.prevInResult():null;;){if(!i)return null;if(!o)return i.ringOut;if(o.ringOut!==i.ringOut)return o.ringOut.enclosingRing()!==i.ringOut?i.ringOut:i.ringOut.enclosingRing();i=o.prevInResult(),o=i?i.prevInResult():null}}}]),t}(),Zu=function(){function t(e){wu(this,t),this.exteriorRing=e,e.poly=this,this.interiorRings=[]}return Iu(t,[{key:"addInterior",value:function(t){this.interiorRings.push(t),t.poly=this}},{key:"getGeom",value:function(){var t=[this.exteriorRing.getGeom()];if(null===t[0])return null;for(var e=0,r=this.interiorRings.length;e<r;e++){var n=this.interiorRings[e].getGeom();null!==n&&t.push(n)}return t}}]),t}(),Yu=function(){function t(e){wu(this,t),this.rings=e,this.polys=this._composePolys(e)}return Iu(t,[{key:"getGeom",value:function(){for(var t=[],e=0,r=this.polys.length;e<r;e++){var n=this.polys[e].getGeom();null!==n&&t.push(n)}return t}},{key:"_composePolys",value:function(t){for(var e=[],r=0,n=t.length;r<n;r++){var i=t[r];if(!i.poly)if(i.isExteriorRing())e.push(new Zu(i));else{var o=i.enclosingRing();o.poly||e.push(new Zu(o)),o.poly.addInterior(i)}}return e}}]),t}(),Ju=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:zu.compare;wu(this,t),this.queue=e,this.tree=new _u(r),this.segments=[]}return Iu(t,[{key:"process",value:function(t){var e=t.segment,r=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(e),r;var n=t.isLeft?this.tree.insert(e):this.tree.find(e);if(!n)throw new Error("Unable to find segment #".concat(e.id," ")+"[".concat(e.leftSE.point.x,", ").concat(e.leftSE.point.y,"] -> ")+"[".concat(e.rightSE.point.x,", ").concat(e.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var i=n,o=n,s=void 0,a=void 0;void 0===s;)null===(i=this.tree.prev(i))?s=null:void 0===i.key.consumedBy&&(s=i.key);for(;void 0===a;)null===(o=this.tree.next(o))?a=null:void 0===o.key.consumedBy&&(a=o.key);if(t.isLeft){var u=null;if(s){var l=s.getIntersection(e);if(null!==l&&(e.isAnEndpoint(l)||(u=l),!s.isAnEndpoint(l)))for(var c=this._splitSafely(s,l),h=0,f=c.length;h<f;h++)r.push(c[h])}var p=null;if(a){var d=a.getIntersection(e);if(null!==d&&(e.isAnEndpoint(d)||(p=d),!a.isAnEndpoint(d)))for(var y=this._splitSafely(a,d),v=0,g=y.length;v<g;v++)r.push(y[v])}if(null!==u||null!==p){var m=null;if(null===u)m=p;else if(null===p)m=u;else{m=Uu.comparePoints(u,p)<=0?u:p}this.queue.remove(e.rightSE),r.push(e.rightSE);for(var _=e.split(m),b=0,x=_.length;b<x;b++)r.push(_[b])}r.length>0?(this.tree.remove(e),r.push(t)):(this.segments.push(e),e.prev=s)}else{if(s&&a){var S=s.getIntersection(a);if(null!==S){if(!s.isAnEndpoint(S))for(var w=this._splitSafely(s,S),C=0,I=w.length;C<I;C++)r.push(w[C]);if(!a.isAnEndpoint(S))for(var E=this._splitSafely(a,S),P=0,M=E.length;P<M;P++)r.push(E[P])}}this.tree.remove(e)}return r}},{key:"_splitSafely",value:function(t,e){this.tree.remove(t);var r=t.rightSE;this.queue.remove(r);var n=t.split(e);return n.push(r),void 0===t.consumedBy&&this.tree.insert(t),n}}]),t}(),Qu="undefined"!=typeof t&&Object({NODE_ENV:undefined}).POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,Ku="undefined"!=typeof t&&Object({NODE_ENV:undefined}).POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,$u=new(function(){function t(){wu(this,t)}return Iu(t,[{key:"run",value:function(t,e,r){$u.type=t,Au.reset();for(var n=[new Hu(e,!0)],i=0,o=r.length;i<o;i++)n.push(new Hu(r[i],!1));if($u.numMultiPolys=n.length,"difference"===$u.type)for(var s=n[0],a=1;a<n.length;)null!==Pu(n[a].bbox,s.bbox)?a++:n.splice(a,1);if("intersection"===$u.type)for(var u=0,l=n.length;u<l;u++)for(var c=n[u],h=u+1,f=n.length;h<f;h++)if(null===Pu(c.bbox,n[h].bbox))return[];for(var p=new _u(Uu.compare),d=0,y=n.length;d<y;d++)for(var v=n[d].getSweepEvents(),g=0,m=v.length;g<m;g++)if(p.insert(v[g]),p.size>Qu)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var _=new Ju(p),b=p.size,x=p.pop();x;){var S=x.key;if(p.size===b){var w=S.segment;throw new Error("Unable to pop() ".concat(S.isLeft?"left":"right"," SweepEvent ")+"[".concat(S.point.x,", ").concat(S.point.y,"] from segment #").concat(w.id," ")+"[".concat(w.leftSE.point.x,", ").concat(w.leftSE.point.y,"] -> ")+"[".concat(w.rightSE.point.x,", ").concat(w.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(p.size>Qu)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(_.segments.length>Ku)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var C=_.process(S),I=0,E=C.length;I<E;I++){var P=C[I];void 0===P.consumedBy&&p.insert(P)}b=p.size,x=p.pop()}Au.reset();var M=Xu.factory(_.segments);return new Yu(M).getGeom()}}]),t}()),tl={union:function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return $u.run("union",t,r)},intersection:function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return $u.run("intersection",t,r)},xor:function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return $u.run("xor",t,r)},difference:function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return $u.run("difference",t,r)}};"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(null==this)throw new TypeError(this+" is not an object");var e=Object(this),r=Math.max(Math.min(e.length,9007199254740991),0)||0,n=1 in arguments&&parseInt(Number(arguments[1]),10)||0;n=n<0?Math.max(r+n,0):Math.min(n,r);var i=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:r;for(i=i<0?Math.max(r+arguments[2],0):Math.min(i,r);n<i;)e[n]=t,++n;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var el=function(){};el.prototype.interfaces_=function(){return[]},el.prototype.getClass=function(){return el},el.prototype.equalsWithTolerance=function(t,e,r){return Math.abs(t-e)<=r};var rl=function(t){function e(e){t.call(this,e),this.name="IllegalArgumentException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),nl=function(){},il={MAX_VALUE:{configurable:!0}};nl.isNaN=function(t){return Number.isNaN(t)},nl.doubleToLongBits=function(t){return t},nl.longBitsToDouble=function(t){return t},nl.isInfinite=function(t){return!Number.isFinite(t)},il.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(nl,il);var ol=function(){},sl=function(){},al=function(){};function ul(){}var ll=function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},cl={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};ll.prototype.setOrdinate=function(t,e){switch(t){case ll.X:this.x=e;break;case ll.Y:this.y=e;break;case ll.Z:this.z=e;break;default:throw new rl("Invalid ordinate index: "+t)}},ll.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],r=arguments[1];return!!el.equalsWithTolerance(this.x,e.x,r)&&!!el.equalsWithTolerance(this.y,e.y,r)}},ll.prototype.getOrdinate=function(t){switch(t){case ll.X:return this.x;case ll.Y:return this.y;case ll.Z:return this.z}throw new rl("Invalid ordinate index: "+t)},ll.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||nl.isNaN(this.z))&&nl.isNaN(t.z)},ll.prototype.equals=function(t){return t instanceof ll&&this.equals2D(t)},ll.prototype.equalInZ=function(t,e){return el.equalsWithTolerance(this.z,t.z,e)},ll.prototype.compareTo=function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},ll.prototype.clone=function(){},ll.prototype.copy=function(){return new ll(this)},ll.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},ll.prototype.distance3D=function(t){var e=this.x-t.x,r=this.y-t.y,n=this.z-t.z;return Math.sqrt(e*e+r*r+n*n)},ll.prototype.distance=function(t){var e=this.x-t.x,r=this.y-t.y;return Math.sqrt(e*e+r*r)},ll.prototype.hashCode=function(){var t=17;return t=37*(t=37*t+ll.hashCode(this.x))+ll.hashCode(this.y)},ll.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},ll.prototype.interfaces_=function(){return[ol,sl,ul]},ll.prototype.getClass=function(){return ll},ll.hashCode=function(){if(1===arguments.length){var t=arguments[0],e=nl.doubleToLongBits(t);return Math.trunc((e^e)>>>32)}},cl.DimensionalComparator.get=function(){return hl},cl.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},cl.NULL_ORDINATE.get=function(){return nl.NaN},cl.X.get=function(){return 0},cl.Y.get=function(){return 1},cl.Z.get=function(){return 2},Object.defineProperties(ll,cl);var hl=function(t){if(this._dimensionsToTest=2,0===arguments.length);else if(1===arguments.length){var e=arguments[0];if(2!==e&&3!==e)throw new rl("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}};hl.prototype.compare=function(t,e){var r=t,n=e,i=hl.compare(r.x,n.x);if(0!==i)return i;var o=hl.compare(r.y,n.y);return 0!==o?o:this._dimensionsToTest<=2?0:hl.compare(r.z,n.z)},hl.prototype.interfaces_=function(){return[al]},hl.prototype.getClass=function(){return hl},hl.compare=function(t,e){return t<e?-1:t>e?1:nl.isNaN(t)?nl.isNaN(e)?0:-1:nl.isNaN(e)?1:0};var fl=function(){};fl.prototype.create=function(){},fl.prototype.interfaces_=function(){return[]},fl.prototype.getClass=function(){return fl};var pl=function(){},dl={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};pl.prototype.interfaces_=function(){return[]},pl.prototype.getClass=function(){return pl},pl.toLocationSymbol=function(t){switch(t){case pl.EXTERIOR:return"e";case pl.BOUNDARY:return"b";case pl.INTERIOR:return"i";case pl.NONE:return"-"}throw new rl("Unknown location value: "+t)},dl.INTERIOR.get=function(){return 0},dl.BOUNDARY.get=function(){return 1},dl.EXTERIOR.get=function(){return 2},dl.NONE.get=function(){return-1},Object.defineProperties(pl,dl);var yl=function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1},vl=function(){},gl={LOG_10:{configurable:!0}};vl.prototype.interfaces_=function(){return[]},vl.prototype.getClass=function(){return vl},vl.log10=function(t){var e=Math.log(t);return nl.isInfinite(e)||nl.isNaN(e)?e:e/vl.LOG_10},vl.min=function(t,e,r,n){var i=t;return e<i&&(i=e),r<i&&(i=r),n<i&&(i=n),i},vl.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],r=arguments[2];return t<e?e:t>r?r:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var n=arguments[0],i=arguments[1],o=arguments[2];return n<i?i:n>o?o:n}},vl.wrap=function(t,e){return t<0?e- -t%e:t%e},vl.max=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],r=arguments[2],n=t;return e>n&&(n=e),r>n&&(n=r),n}if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],u=i;return o>u&&(u=o),s>u&&(u=s),a>u&&(u=a),u}},vl.average=function(t,e){return(t+e)/2},gl.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(vl,gl);var ml=function(t){this.str=t};ml.prototype.append=function(t){this.str+=t},ml.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},ml.prototype.toString=function(t){return this.str};var _l=function(t){this.value=t};_l.prototype.intValue=function(){return this.value},_l.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},_l.isNaN=function(t){return Number.isNaN(t)};var bl=function(){};bl.isWhitespace=function(t){return t<=32&&t>=0||127===t},bl.toUpperCase=function(t){return t.toUpperCase()};var xl=function t(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length){if("number"==typeof arguments[0]){var e=arguments[0];this.init(e)}else if(arguments[0]instanceof t){var r=arguments[0];this.init(r)}else if("string"==typeof arguments[0]){var n=arguments[0];t.call(this,t.parse(n))}}else if(2===arguments.length){var i=arguments[0],o=arguments[1];this.init(i,o)}},Sl={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};xl.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},xl.prototype.extractSignificantDigits=function(t,e){var r=this.abs(),n=xl.magnitude(r._hi),i=xl.TEN.pow(n);(r=r.divide(i)).gt(xl.TEN)?(r=r.divide(xl.TEN),n+=1):r.lt(xl.ONE)&&(r=r.multiply(xl.TEN),n-=1);for(var o=n+1,s=new ml,a=xl.MAX_PRINT_DIGITS-1,u=0;u<=a;u++){t&&u===o&&s.append(".");var l=Math.trunc(r._hi);if(l<0)break;var c=!1,h=0;l>9?(c=!0,h="9"):h="0"+l,s.append(h),r=r.subtract(xl.valueOf(l)).multiply(xl.TEN),c&&r.selfAdd(xl.TEN);var f=!0,p=xl.magnitude(r._hi);if(p<0&&Math.abs(p)>=a-u&&(f=!1),!f)break}return e[0]=n,s.toString()},xl.prototype.sqr=function(){return this.multiply(this)},xl.prototype.doubleValue=function(){return this._hi+this._lo},xl.prototype.subtract=function(){if(arguments[0]instanceof xl){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},xl.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},xl.prototype.isZero=function(){return 0===this._hi&&0===this._lo},xl.prototype.selfSubtract=function(){if(arguments[0]instanceof xl){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},xl.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},xl.prototype.min=function(t){return this.le(t)?this:t},xl.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof xl){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var r=arguments[0],n=arguments[1],i=null,o=null,s=null,a=null,u=null,l=null,c=null,h=null;return u=this._hi/r,h=(i=(l=xl.SPLIT*u)-(i=l-u))*(s=(h=xl.SPLIT*r)-(s=h-r))-(c=u*r)+i*(a=r-s)+(o=u-i)*s+o*a,h=u+(l=(this._hi-c-h+this._lo-u*n)/r),this._hi=h,this._lo=u-h+l,this}},xl.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},xl.prototype.divide=function(){if(arguments[0]instanceof xl){var t=arguments[0],e=null,r=null,n=null,i=null,o=null,s=null,a=null,u=null;r=(o=this._hi/t._hi)-(e=(s=xl.SPLIT*o)-(e=s-o)),u=e*(n=(u=xl.SPLIT*t._hi)-(n=u-t._hi))-(a=o*t._hi)+e*(i=t._hi-n)+r*n+r*i;var l=u=o+(s=(this._hi-a-u+this._lo-o*t._lo)/t._hi),c=o-u+s;return new xl(l,c)}if("number"==typeof arguments[0]){var h=arguments[0];return nl.isNaN(h)?xl.createNaN():xl.copy(this).selfDivide(h,0)}},xl.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},xl.prototype.pow=function(t){if(0===t)return xl.valueOf(1);var e=new xl(this),r=xl.valueOf(1),n=Math.abs(t);if(n>1)for(;n>0;)n%2==1&&r.selfMultiply(e),(n/=2)>0&&(e=e.sqr());else r=e;return t<0?r.reciprocal():r},xl.prototype.ceil=function(){if(this.isNaN())return xl.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new xl(t,e)},xl.prototype.compareTo=function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0},xl.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},xl.prototype.setValue=function(){if(arguments[0]instanceof xl){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},xl.prototype.max=function(t){return this.ge(t)?this:t},xl.prototype.sqrt=function(){if(this.isZero())return xl.valueOf(0);if(this.isNegative())return xl.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,r=xl.valueOf(e),n=this.subtract(r.sqr())._hi*(.5*t);return r.add(n)},xl.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof xl){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0],r=null,n=null,i=null,o=null,s=null,a=null;return o=(i=this._hi+e)-(s=i-this._hi),n=(a=(o=e-s+(this._hi-o))+this._lo)+(i-(r=i+a)),this._hi=r+n,this._lo=n+(r-this._hi),this}}else if(2===arguments.length){var u=arguments[0],l=arguments[1],c=null,h=null,f=null,p=null,d=null,y=null,v=null;p=this._hi+u,h=this._lo+l,d=p-(y=p-this._hi),f=h-(v=h-this._lo);var g=(c=p+(y=(d=u-y+(this._hi-d))+h))+(y=(f=l-v+(this._lo-f))+(y+(p-c))),m=y+(c-g);return this._hi=g,this._lo=m,this}},xl.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof xl){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var r=arguments[0],n=arguments[1],i=null,o=null,s=null,a=null,u=null,l=null;i=(u=xl.SPLIT*this._hi)-this._hi,l=xl.SPLIT*r,i=u-i,o=this._hi-i,s=l-r;var c=(u=this._hi*r)+(l=i*(s=l-s)-u+i*(a=r-s)+o*s+o*a+(this._hi*n+this._lo*r)),h=l+(i=u-c);return this._hi=c,this._lo=h,this}},xl.prototype.selfSqr=function(){return this.selfMultiply(this)},xl.prototype.floor=function(){if(this.isNaN())return xl.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new xl(t,e)},xl.prototype.negate=function(){return this.isNaN()?this:new xl(-this._hi,-this._lo)},xl.prototype.clone=function(){},xl.prototype.multiply=function(){if(arguments[0]instanceof xl){var t=arguments[0];return t.isNaN()?xl.createNaN():xl.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return nl.isNaN(e)?xl.createNaN():xl.copy(this).selfMultiply(e,0)}},xl.prototype.isNaN=function(){return nl.isNaN(this._hi)},xl.prototype.intValue=function(){return Math.trunc(this._hi)},xl.prototype.toString=function(){var t=xl.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},xl.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),r=this.extractSignificantDigits(!0,e),n=e[0]+1,i=r;if("."===r.charAt(0))i="0"+r;else if(n<0)i="0."+xl.stringOfChar("0",-n)+r;else if(-1===r.indexOf(".")){var o=n-r.length;i=r+xl.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+i:i},xl.prototype.reciprocal=function(){var t,e,r,n,i=null,o=null,s=null,a=null;t=(r=1/this._hi)-(i=(s=xl.SPLIT*r)-(i=s-r)),o=(a=xl.SPLIT*this._hi)-this._hi;var u=r+(s=(1-(n=r*this._hi)-(a=i*(o=a-o)-n+i*(e=this._hi-o)+t*o+t*e)-r*this._lo)/this._hi);return new xl(u,r-u+s)},xl.prototype.toSciNotation=function(){if(this.isZero())return xl.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),r=this.extractSignificantDigits(!1,e),n=xl.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===r.charAt(0))throw new Error("Found leading zero: "+r);var i="";r.length>1&&(i=r.substring(1));var o=r.charAt(0)+"."+i;return this.isNegative()?"-"+o+n:o+n},xl.prototype.abs=function(){return this.isNaN()?xl.NaN:this.isNegative()?this.negate():new xl(this)},xl.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},xl.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},xl.prototype.add=function(){if(arguments[0]instanceof xl){var t=arguments[0];return xl.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return xl.copy(this).selfAdd(e)}},xl.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof xl){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var r=arguments[0],n=arguments[1];this._hi=r,this._lo=n}},xl.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},xl.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},xl.prototype.trunc=function(){return this.isNaN()?xl.NaN:this.isPositive()?this.floor():this.ceil()},xl.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},xl.prototype.interfaces_=function(){return[ul,ol,sl]},xl.prototype.getClass=function(){return xl},xl.sqr=function(t){return xl.valueOf(t).selfMultiply(t)},xl.valueOf=function(){if("string"==typeof arguments[0]){var t=arguments[0];return xl.parse(t)}if("number"==typeof arguments[0]){var e=arguments[0];return new xl(e)}},xl.sqrt=function(t){return xl.valueOf(t).sqrt()},xl.parse=function(t){for(var e=0,r=t.length;bl.isWhitespace(t.charAt(e));)e++;var n=!1;if(e<r){var i=t.charAt(e);"-"!==i&&"+"!==i||(e++,"-"===i&&(n=!0))}for(var o=new xl,s=0,a=0,u=0;!(e>=r);){var l=t.charAt(e);if(e++,bl.isDigit(l)){var c=l-"0";o.selfMultiply(xl.TEN),o.selfAdd(c),s++}else{if("."!==l){if("e"===l||"E"===l){var h=t.substring(e);try{u=_l.parseInt(h)}catch(e){throw e instanceof Error?new Error("Invalid exponent "+h+" in string "+t):e}break}throw new Error("Unexpected character '"+l+"' at position "+e+" in string "+t)}a=s}}var f=o,p=s-a-u;if(0===p)f=o;else if(p>0){var d=xl.TEN.pow(p);f=o.divide(d)}else if(p<0){var y=xl.TEN.pow(-p);f=o.multiply(y)}return n?f.negate():f},xl.createNaN=function(){return new xl(nl.NaN,nl.NaN)},xl.copy=function(t){return new xl(t)},xl.magnitude=function(t){var e=Math.abs(t),r=Math.log(e)/Math.log(10),n=Math.trunc(Math.floor(r));return 10*Math.pow(10,n)<=e&&(n+=1),n},xl.stringOfChar=function(t,e){for(var r=new ml,n=0;n<e;n++)r.append(t);return r.toString()},Sl.PI.get=function(){return new xl(3.141592653589793,1.2246467991473532e-16)},Sl.TWO_PI.get=function(){return new xl(6.283185307179586,2.4492935982947064e-16)},Sl.PI_2.get=function(){return new xl(1.5707963267948966,6.123233995736766e-17)},Sl.E.get=function(){return new xl(2.718281828459045,1.4456468917292502e-16)},Sl.NaN.get=function(){return new xl(nl.NaN,nl.NaN)},Sl.EPS.get=function(){return 1.23259516440783e-32},Sl.SPLIT.get=function(){return 134217729},Sl.MAX_PRINT_DIGITS.get=function(){return 32},Sl.TEN.get=function(){return xl.valueOf(10)},Sl.ONE.get=function(){return xl.valueOf(1)},Sl.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},Sl.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(xl,Sl);var wl=function(){},Cl={DP_SAFE_EPSILON:{configurable:!0}};wl.prototype.interfaces_=function(){return[]},wl.prototype.getClass=function(){return wl},wl.orientationIndex=function(t,e,r){var n=wl.orientationIndexFilter(t,e,r);if(n<=1)return n;var i=xl.valueOf(e.x).selfAdd(-t.x),o=xl.valueOf(e.y).selfAdd(-t.y),s=xl.valueOf(r.x).selfAdd(-e.x),a=xl.valueOf(r.y).selfAdd(-e.y);return i.selfMultiply(a).selfSubtract(o.selfMultiply(s)).signum()},wl.signOfDet2x2=function(t,e,r,n){return t.multiply(n).selfSubtract(e.multiply(r)).signum()},wl.intersection=function(t,e,r,n){var i=xl.valueOf(n.y).selfSubtract(r.y).selfMultiply(xl.valueOf(e.x).selfSubtract(t.x)),o=xl.valueOf(n.x).selfSubtract(r.x).selfMultiply(xl.valueOf(e.y).selfSubtract(t.y)),s=i.subtract(o),a=xl.valueOf(n.x).selfSubtract(r.x).selfMultiply(xl.valueOf(t.y).selfSubtract(r.y)),u=xl.valueOf(n.y).selfSubtract(r.y).selfMultiply(xl.valueOf(t.x).selfSubtract(r.x)),l=a.subtract(u).selfDivide(s).doubleValue(),c=xl.valueOf(t.x).selfAdd(xl.valueOf(e.x).selfSubtract(t.x).selfMultiply(l)).doubleValue(),h=xl.valueOf(e.x).selfSubtract(t.x).selfMultiply(xl.valueOf(t.y).selfSubtract(r.y)),f=xl.valueOf(e.y).selfSubtract(t.y).selfMultiply(xl.valueOf(t.x).selfSubtract(r.x)),p=h.subtract(f).selfDivide(s).doubleValue(),d=xl.valueOf(r.y).selfAdd(xl.valueOf(n.y).selfSubtract(r.y).selfMultiply(p)).doubleValue();return new ll(c,d)},wl.orientationIndexFilter=function(t,e,r){var n=null,i=(t.x-r.x)*(e.y-r.y),o=(t.y-r.y)*(e.x-r.x),s=i-o;if(i>0){if(o<=0)return wl.signum(s);n=i+o}else{if(!(i<0))return wl.signum(s);if(o>=0)return wl.signum(s);n=-i-o}var a=wl.DP_SAFE_EPSILON*n;return s>=a||-s>=a?wl.signum(s):2},wl.signum=function(t){return t>0?1:t<0?-1:0},Cl.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(wl,Cl);var Il=function(){},El={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};El.X.get=function(){return 0},El.Y.get=function(){return 1},El.Z.get=function(){return 2},El.M.get=function(){return 3},Il.prototype.setOrdinate=function(t,e,r){},Il.prototype.size=function(){},Il.prototype.getOrdinate=function(t,e){},Il.prototype.getCoordinate=function(){},Il.prototype.getCoordinateCopy=function(t){},Il.prototype.getDimension=function(){},Il.prototype.getX=function(t){},Il.prototype.clone=function(){},Il.prototype.expandEnvelope=function(t){},Il.prototype.copy=function(){},Il.prototype.getY=function(t){},Il.prototype.toCoordinateArray=function(){},Il.prototype.interfaces_=function(){return[sl]},Il.prototype.getClass=function(){return Il},Object.defineProperties(Il,El);var Pl=function(){},Ml=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Pl),Ll=function(){};Ll.arraycopy=function(t,e,r,n,i){for(var o=0,s=e;s<e+i;s++)r[n+o]=t[s],o++},Ll.getProperty=function(t){return{"line.separator":"\n"}[t]};var Nl=function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var r=arguments[0],n=arguments[1];this.x=r,this.y=n,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var i=arguments[0],o=arguments[1];this.x=i.y*o.w-o.y*i.w,this.y=o.x*i.w-i.x*o.w,this.w=i.x*o.y-o.x*i.y}else if(arguments[0]instanceof ll&&arguments[1]instanceof ll){var s=arguments[0],a=arguments[1];this.x=s.y-a.y,this.y=a.x-s.x,this.w=s.x*a.y-a.x*s.y}}else if(3===arguments.length){var u=arguments[0],l=arguments[1],c=arguments[2];this.x=u,this.y=l,this.w=c}else if(4===arguments.length){var h=arguments[0],f=arguments[1],p=arguments[2],d=arguments[3],y=h.y-f.y,v=f.x-h.x,g=h.x*f.y-f.x*h.y,m=p.y-d.y,_=d.x-p.x,b=p.x*d.y-d.x*p.y;this.x=v*b-_*g,this.y=m*g-y*b,this.w=y*_-m*v}};Nl.prototype.getY=function(){var t=this.y/this.w;if(nl.isNaN(t)||nl.isInfinite(t))throw new Ml;return t},Nl.prototype.getX=function(){var t=this.x/this.w;if(nl.isNaN(t)||nl.isInfinite(t))throw new Ml;return t},Nl.prototype.getCoordinate=function(){var t=new ll;return t.x=this.getX(),t.y=this.getY(),t},Nl.prototype.interfaces_=function(){return[]},Nl.prototype.getClass=function(){return Nl},Nl.intersection=function(t,e,r,n){var i=t.y-e.y,o=e.x-t.x,s=t.x*e.y-e.x*t.y,a=r.y-n.y,u=n.x-r.x,l=r.x*n.y-n.x*r.y,c=i*u-a*o,h=(o*l-u*s)/c,f=(a*s-i*l)/c;if(nl.isNaN(h)||nl.isInfinite(h)||nl.isNaN(f)||nl.isInfinite(f))throw new Ml;return new ll(h,f)};var Tl=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof ll){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof t){var r=arguments[0];this.init(r)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.init(n.x,i.x,n.y,i.y)}else if(4===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3];this.init(o,s,a,u)}},Ol={serialVersionUID:{configurable:!0}};Tl.prototype.getArea=function(){return this.getWidth()*this.getHeight()},Tl.prototype.equals=function(t){if(!(t instanceof Tl))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},Tl.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new Tl;var e=this._minx>t._minx?this._minx:t._minx,r=this._miny>t._miny?this._miny:t._miny,n=this._maxx<t._maxx?this._maxx:t._maxx,i=this._maxy<t._maxy?this._maxy:t._maxy;return new Tl(e,n,r,i)},Tl.prototype.isNull=function(){return this._maxx<this._minx},Tl.prototype.getMaxX=function(){return this._maxx},Tl.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof ll){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof Tl){var e=arguments[0];return!this.isNull()&&!e.isNull()&&(e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy)}}else if(2===arguments.length){var r=arguments[0],n=arguments[1];return!this.isNull()&&(r>=this._minx&&r<=this._maxx&&n>=this._miny&&n<=this._maxy)}},Tl.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof Tl){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof ll){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var r=arguments[0],n=arguments[1];return!this.isNull()&&!(r>this._maxx||r<this._minx||n>this._maxy||n<this._miny)}},Tl.prototype.getMinY=function(){return this._miny},Tl.prototype.getMinX=function(){return this._minx},Tl.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof ll){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof Tl){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var r=arguments[0],n=arguments[1];this.isNull()?(this._minx=r,this._maxx=r,this._miny=n,this._maxy=n):(r<this._minx&&(this._minx=r),r>this._maxx&&(this._maxx=r),n<this._miny&&(this._miny=n),n>this._maxy&&(this._maxy=n))}},Tl.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},Tl.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},Tl.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},Tl.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},Tl.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},Tl.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},Tl.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},Tl.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},Tl.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],r=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=r,this._maxy+=r,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},Tl.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof Tl){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof ll){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var r=arguments[0],n=arguments[1];return this.covers(r,n)}},Tl.prototype.centre=function(){return this.isNull()?null:new ll((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},Tl.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof ll){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof Tl){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var r=arguments[0],n=arguments[1];this.init(r.x,n.x,r.y,n.y)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];i<o?(this._minx=i,this._maxx=o):(this._minx=o,this._maxx=i),s<a?(this._miny=s,this._maxy=a):(this._miny=a,this._maxy=s)}},Tl.prototype.getMaxY=function(){return this._maxy},Tl.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var r=0;return this._maxy<t._miny?r=t._miny-this._maxy:this._miny>t._maxy&&(r=this._miny-t._maxy),0===e?r:0===r?e:Math.sqrt(e*e+r*r)},Tl.prototype.hashCode=function(){var t=17;return t=37*(t=37*(t=37*(t=37*t+ll.hashCode(this._minx))+ll.hashCode(this._maxx))+ll.hashCode(this._miny))+ll.hashCode(this._maxy)},Tl.prototype.interfaces_=function(){return[ol,ul]},Tl.prototype.getClass=function(){return Tl},Tl.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],r=arguments[2];return r.x>=(t.x<e.x?t.x:e.x)&&r.x<=(t.x>e.x?t.x:e.x)&&r.y>=(t.y<e.y?t.y:e.y)&&r.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var n=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3],a=Math.min(o.x,s.x),u=Math.max(o.x,s.x),l=Math.min(n.x,i.x),c=Math.max(n.x,i.x);return!(l>u)&&(!(c<a)&&(a=Math.min(o.y,s.y),u=Math.max(o.y,s.y),l=Math.min(n.y,i.y),c=Math.max(n.y,i.y),!(l>u)&&!(c<a)))}},Ol.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(Tl,Ol);var Al={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},Rl=function(t){this.geometryFactory=t||new _h};Rl.prototype.read=function(t){var e,r,n;t=t.replace(/[\n\r]/g," ");var i=Al.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((i=Al.emptyTypeStr.exec(t))[2]=void 0),i&&(r=i[1].toLowerCase(),n=i[2],Dl[r]&&(e=Dl[r].apply(this,[n]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},Rl.prototype.write=function(t){return this.extractGeometry(t)},Rl.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!Fl[e])return null;var r=e.toUpperCase();return t.isEmpty()?r+" EMPTY":r+"("+Fl[e].apply(this,[t])+")"};var Fl={coordinate:function(t){return t.x+" "+t.y},point:function(t){return Fl.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],r=0,n=t._geometries.length;r<n;++r)e.push("("+Fl.point.apply(this,[t._geometries[r]])+")");return e.join(",")},linestring:function(t){for(var e=[],r=0,n=t._points._coordinates.length;r<n;++r)e.push(Fl.coordinate.apply(this,[t._points._coordinates[r]]));return e.join(",")},linearring:function(t){for(var e=[],r=0,n=t._points._coordinates.length;r<n;++r)e.push(Fl.coordinate.apply(this,[t._points._coordinates[r]]));return e.join(",")},multilinestring:function(t){for(var e=[],r=0,n=t._geometries.length;r<n;++r)e.push("("+Fl.linestring.apply(this,[t._geometries[r]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+Fl.linestring.apply(this,[t._shell])+")");for(var r=0,n=t._holes.length;r<n;++r)e.push("("+Fl.linestring.apply(this,[t._holes[r]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],r=0,n=t._geometries.length;r<n;++r)e.push("("+Fl.polygon.apply(this,[t._geometries[r]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],r=0,n=t._geometries.length;r<n;++r)e.push(this.extractGeometry(t._geometries[r]));return e.join(",")}},Dl={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(Al.spaces);return this.geometryFactory.createPoint(new ll(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){var e;if(void 0===t)return this.geometryFactory.createMultiPoint();for(var r=t.trim().split(","),n=[],i=0,o=r.length;i<o;++i)e=r[i].replace(Al.trimParens,"$1"),n.push(Dl.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(n)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,r=t.trim().split(","),n=[],i=0,o=r.length;i<o;++i)e=r[i].trim().split(Al.spaces),n.push(new ll(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(n)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,r=t.trim().split(","),n=[],i=0,o=r.length;i<o;++i)e=r[i].trim().split(Al.spaces),n.push(new ll(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(n)},multilinestring:function(t){var e;if(void 0===t)return this.geometryFactory.createMultiLineString();for(var r=t.trim().split(Al.parenComma),n=[],i=0,o=r.length;i<o;++i)e=r[i].replace(Al.trimParens,"$1"),n.push(Dl.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(n)},polygon:function(t){var e,r,n;if(void 0===t)return this.geometryFactory.createPolygon();for(var i,o=t.trim().split(Al.parenComma),s=[],a=0,u=o.length;a<u;++a)e=o[a].replace(Al.trimParens,"$1"),r=Dl.linestring.apply(this,[e]),n=this.geometryFactory.createLinearRing(r._points),0===a?i=n:s.push(n);return this.geometryFactory.createPolygon(i,s)},multipolygon:function(t){var e;if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var r=t.trim().split(Al.doubleParenComma),n=[],i=0,o=r.length;i<o;++i)e=r[i].replace(Al.trimParens,"$1"),n.push(Dl.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(n)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),r=[],n=0,i=e.length;n<i;++n)r.push(this.read(e[n]));return this.geometryFactory.createGeometryCollection(r)}},kl=function(t){this.parser=new Rl(t)};kl.prototype.write=function(t){return this.parser.write(t)},kl.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};var jl=function(t){function e(e){t.call(this,e),this.name="RuntimeException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),Gl=function(t){function e(){if(t.call(this),0===arguments.length)t.call(this);else if(1===arguments.length){var e=arguments[0];t.call(this,e)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(jl),Bl=function(){};Bl.prototype.interfaces_=function(){return[]},Bl.prototype.getClass=function(){return Bl},Bl.shouldNeverReachHere=function(){if(0===arguments.length)Bl.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new Gl("Should never reach here"+(null!==t?": "+t:""))}},Bl.isTrue=function(){var t;if(1===arguments.length)Bl.isTrue(arguments[0],null);else if(2===arguments.length&&(t=arguments[1],!arguments[0]))throw null===t?new Gl:new Gl(t)},Bl.equals=function(){var t,e,r;if(2===arguments.length)Bl.equals(t=arguments[0],e=arguments[1],null);else if(3===arguments.length&&(t=arguments[0],r=arguments[2],!(e=arguments[1]).equals(t)))throw new Gl("Expected "+t+" but encountered "+e+(null!==r?": "+r:""))};var Ul=function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new ll,this._intPt[1]=new ll,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},ql={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};Ul.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},Ul.prototype.getTopologySummary=function(){var t=new ml;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},Ul.prototype.computeIntersection=function(t,e,r,n){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=r,this._inputLines[1][1]=n,this._result=this.computeIntersect(t,e,r,n)},Ul.prototype.getIntersectionNum=function(){return this._result},Ul.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0],e=this.getEdgeDistance(t,0),r=this.getEdgeDistance(t,1);e>r?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},Ul.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},Ul.prototype.setPrecisionModel=function(t){this._precisionModel=t},Ul.prototype.isInteriorIntersection=function(){var t=this;if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var e=arguments[0],r=0;r<this._result;r++)if(!t._intPt[r].equals2D(t._inputLines[e][0])&&!t._intPt[r].equals2D(t._inputLines[e][1]))return!0;return!1}},Ul.prototype.getIntersection=function(t){return this._intPt[t]},Ul.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},Ul.prototype.hasIntersection=function(){return this._result!==Ul.NO_INTERSECTION},Ul.prototype.getEdgeDistance=function(t,e){return Ul.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},Ul.prototype.isCollinear=function(){return this._result===Ul.COLLINEAR_INTERSECTION},Ul.prototype.toString=function(){return kl.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+kl.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},Ul.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},Ul.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},Ul.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},Ul.prototype.interfaces_=function(){return[]},Ul.prototype.getClass=function(){return Ul},Ul.computeEdgeDistance=function(t,e,r){var n=Math.abs(r.x-e.x),i=Math.abs(r.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(r))o=n>i?n:i;else{var s=Math.abs(t.x-e.x),a=Math.abs(t.y-e.y);0!==(o=n>i?s:a)||t.equals(e)||(o=Math.max(s,a))}return Bl.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},Ul.nonRobustComputeEdgeDistance=function(t,e,r){var n=t.x-e.x,i=t.y-e.y,o=Math.sqrt(n*n+i*i);return Bl.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},ql.DONT_INTERSECT.get=function(){return 0},ql.DO_INTERSECT.get=function(){return 1},ql.COLLINEAR.get=function(){return 2},ql.NO_INTERSECTION.get=function(){return 0},ql.POINT_INTERSECTION.get=function(){return 1},ql.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(Ul,ql);var zl=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isInSegmentEnvelopes=function(t){var e=new Tl(this._inputLines[0][0],this._inputLines[0][1]),r=new Tl(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&r.contains(t)},e.prototype.computeIntersection=function(){if(3!==arguments.length)return t.prototype.computeIntersection.apply(this,arguments);var e=arguments[0],r=arguments[1],n=arguments[2];if(this._isProper=!1,Tl.intersects(r,n,e)&&0===Hl.orientationIndex(r,n,e)&&0===Hl.orientationIndex(n,r,e))return this._isProper=!0,(e.equals(r)||e.equals(n))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null;this._result=t.NO_INTERSECTION},e.prototype.normalizeToMinimum=function(t,e,r,n,i){i.x=this.smallestInAbsValue(t.x,e.x,r.x,n.x),i.y=this.smallestInAbsValue(t.y,e.y,r.y,n.y),t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,r.x-=i.x,r.y-=i.y,n.x-=i.x,n.y-=i.y},e.prototype.safeHCoordinateIntersection=function(t,r,n,i){var o=null;try{o=Nl.intersection(t,r,n,i)}catch(s){if(!(s instanceof Ml))throw s;o=e.nearestEndpoint(t,r,n,i)}return o},e.prototype.intersection=function(t,r,n,i){var o=this.intersectionWithNormalization(t,r,n,i);return this.isInSegmentEnvelopes(o)||(o=new ll(e.nearestEndpoint(t,r,n,i))),null!==this._precisionModel&&this._precisionModel.makePrecise(o),o},e.prototype.smallestInAbsValue=function(t,e,r,n){var i=t,o=Math.abs(i);return Math.abs(e)<o&&(i=e,o=Math.abs(e)),Math.abs(r)<o&&(i=r,o=Math.abs(r)),Math.abs(n)<o&&(i=n),i},e.prototype.checkDD=function(t,e,r,n,i){var o=wl.intersection(t,e,r,n),s=this.isInSegmentEnvelopes(o);Ll.out.println("DD in env = "+s+"  --------------------- "+o),i.distance(o)>1e-4&&Ll.out.println("Distance = "+i.distance(o))},e.prototype.intersectionWithNormalization=function(t,e,r,n){var i=new ll(t),o=new ll(e),s=new ll(r),a=new ll(n),u=new ll;this.normalizeToEnvCentre(i,o,s,a,u);var l=this.safeHCoordinateIntersection(i,o,s,a);return l.x+=u.x,l.y+=u.y,l},e.prototype.computeCollinearIntersection=function(e,r,n,i){var o=Tl.intersects(e,r,n),s=Tl.intersects(e,r,i),a=Tl.intersects(n,i,e),u=Tl.intersects(n,i,r);return o&&s?(this._intPt[0]=n,this._intPt[1]=i,t.COLLINEAR_INTERSECTION):a&&u?(this._intPt[0]=e,this._intPt[1]=r,t.COLLINEAR_INTERSECTION):o&&a?(this._intPt[0]=n,this._intPt[1]=e,!n.equals(e)||s||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):o&&u?(this._intPt[0]=n,this._intPt[1]=r,!n.equals(r)||s||a?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):s&&a?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||o||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):s&&u?(this._intPt[0]=i,this._intPt[1]=r,!i.equals(r)||o||a?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):t.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(t,e,r,n,i){var o=t.x<e.x?t.x:e.x,s=t.y<e.y?t.y:e.y,a=t.x>e.x?t.x:e.x,u=t.y>e.y?t.y:e.y,l=r.x<n.x?r.x:n.x,c=r.y<n.y?r.y:n.y,h=r.x>n.x?r.x:n.x,f=r.y>n.y?r.y:n.y,p=((o>l?o:l)+(a<h?a:h))/2,d=((s>c?s:c)+(u<f?u:f))/2;i.x=p,i.y=d,t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,r.x-=i.x,r.y-=i.y,n.x-=i.x,n.y-=i.y},e.prototype.computeIntersect=function(e,r,n,i){if(this._isProper=!1,!Tl.intersects(e,r,n,i))return t.NO_INTERSECTION;var o=Hl.orientationIndex(e,r,n),s=Hl.orientationIndex(e,r,i);if(o>0&&s>0||o<0&&s<0)return t.NO_INTERSECTION;var a=Hl.orientationIndex(n,i,e),u=Hl.orientationIndex(n,i,r);return a>0&&u>0||a<0&&u<0?t.NO_INTERSECTION:0===o&&0===s&&0===a&&0===u?this.computeCollinearIntersection(e,r,n,i):(0===o||0===s||0===a||0===u?(this._isProper=!1,e.equals2D(n)||e.equals2D(i)?this._intPt[0]=e:r.equals2D(n)||r.equals2D(i)?this._intPt[0]=r:0===o?this._intPt[0]=new ll(n):0===s?this._intPt[0]=new ll(i):0===a?this._intPt[0]=new ll(e):0===u&&(this._intPt[0]=new ll(r))):(this._isProper=!0,this._intPt[0]=this.intersection(e,r,n,i)),t.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(t,e,r,n){var i=t,o=Hl.distancePointLine(t,r,n),s=Hl.distancePointLine(e,r,n);return s<o&&(o=s,i=e),(s=Hl.distancePointLine(r,t,e))<o&&(o=s,i=r),(s=Hl.distancePointLine(n,t,e))<o&&(o=s,i=n),i},e}(Ul),Vl=function(){};Vl.prototype.interfaces_=function(){return[]},Vl.prototype.getClass=function(){return Vl},Vl.orientationIndex=function(t,e,r){var n=e.x-t.x,i=e.y-t.y,o=r.x-e.x,s=r.y-e.y;return Vl.signOfDet2x2(n,i,o,s)},Vl.signOfDet2x2=function(t,e,r,n){var i=null,o=null,s=null;if(i=1,0===t||0===n)return 0===e||0===r?0:e>0?r>0?-i:i:r>0?i:-i;if(0===e||0===r)return n>0?t>0?i:-i:t>0?-i:i;if(e>0?n>0?e<=n||(i=-i,o=t,t=r,r=o,o=e,e=n,n=o):e<=-n?(i=-i,r=-r,n=-n):(o=t,t=-r,r=o,o=e,e=-n,n=o):n>0?-e<=n?(i=-i,t=-t,e=-e):(o=-t,t=r,r=o,o=-e,e=n,n=o):e>=n?(t=-t,e=-e,r=-r,n=-n):(i=-i,o=-t,t=-r,r=o,o=-e,e=-n,n=o),t>0){if(!(r>0))return i;if(!(t<=r))return i}else{if(r>0)return-i;if(!(t>=r))return-i;i=-i,t=-t,r=-r}for(;;){if((n-=(s=Math.floor(r/t))*e)<0)return-i;if(n>e)return i;if(t>(r-=s*t)+r){if(e<n+n)return i}else{if(e>n+n)return-i;r=t-r,n=e-n,i=-i}if(0===n)return 0===r?0:-i;if(0===r)return i;if((e-=(s=Math.floor(t/r))*n)<0)return i;if(e>n)return-i;if(r>(t-=s*r)+t){if(n<e+e)return-i}else{if(n>e+e)return i;t=r-t,e=n-e,i=-i}if(0===e)return 0===t?0:i;if(0===t)return-i}};var Wl=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t};Wl.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var r=t.x,n=e.x;return r>n&&(r=e.x,n=t.x),this._p.x>=r&&this._p.x<=n&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var i=t.x-this._p.x,o=t.y-this._p.y,s=e.x-this._p.x,a=e.y-this._p.y,u=Vl.signOfDet2x2(i,o,s,a);if(0===u)return this._isPointOnSegment=!0,null;a<o&&(u=-u),u>0&&this._crossingCount++}},Wl.prototype.isPointInPolygon=function(){return this.getLocation()!==pl.EXTERIOR},Wl.prototype.getLocation=function(){return this._isPointOnSegment?pl.BOUNDARY:this._crossingCount%2==1?pl.INTERIOR:pl.EXTERIOR},Wl.prototype.isOnSegment=function(){return this._isPointOnSegment},Wl.prototype.interfaces_=function(){return[]},Wl.prototype.getClass=function(){return Wl},Wl.locatePointInRing=function(){if(arguments[0]instanceof ll&&yl(arguments[1],Il)){for(var t=arguments[0],e=arguments[1],r=new Wl(t),n=new ll,i=new ll,o=1;o<e.size();o++)if(e.getCoordinate(o,n),e.getCoordinate(o-1,i),r.countSegment(n,i),r.isOnSegment())return r.getLocation();return r.getLocation()}if(arguments[0]instanceof ll&&arguments[1]instanceof Array){for(var s=arguments[0],a=arguments[1],u=new Wl(s),l=1;l<a.length;l++){var c=a[l],h=a[l-1];if(u.countSegment(c,h),u.isOnSegment())return u.getLocation()}return u.getLocation()}};var Hl=function(){},Xl={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};Hl.prototype.interfaces_=function(){return[]},Hl.prototype.getClass=function(){return Hl},Hl.orientationIndex=function(t,e,r){return wl.orientationIndex(t,e,r)},Hl.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,r=t[0].x,n=1;n<t.length-1;n++){var i=t[n].x-r,o=t[n+1].y,s=t[n-1].y;e+=i*(s-o)}return e/2}if(yl(arguments[0],Il)){var a=arguments[0],u=a.size();if(u<3)return 0;var l=new ll,c=new ll,h=new ll;a.getCoordinate(0,c),a.getCoordinate(1,h);var f=c.x;h.x-=f;for(var p=0,d=1;d<u-1;d++)l.y=c.y,c.x=h.x,c.y=h.y,a.getCoordinate(d+1,h),h.x-=f,p+=c.x*(l.y-h.y);return p/2}},Hl.distanceLineLine=function(t,e,r,n){if(t.equals(e))return Hl.distancePointLine(t,r,n);if(r.equals(n))return Hl.distancePointLine(n,t,e);var i=!1;if(Tl.intersects(t,e,r,n)){var o=(e.x-t.x)*(n.y-r.y)-(e.y-t.y)*(n.x-r.x);if(0===o)i=!0;else{var s=(t.y-r.y)*(n.x-r.x)-(t.x-r.x)*(n.y-r.y),a=((t.y-r.y)*(e.x-t.x)-(t.x-r.x)*(e.y-t.y))/o,u=s/o;(u<0||u>1||a<0||a>1)&&(i=!0)}}else i=!0;return i?vl.min(Hl.distancePointLine(t,r,n),Hl.distancePointLine(e,r,n),Hl.distancePointLine(r,t,e),Hl.distancePointLine(n,t,e)):0},Hl.isPointInRing=function(t,e){return Hl.locatePointInRing(t,e)!==pl.EXTERIOR},Hl.computeLength=function(t){var e=t.size();if(e<=1)return 0;var r=0,n=new ll;t.getCoordinate(0,n);for(var i=n.x,o=n.y,s=1;s<e;s++){t.getCoordinate(s,n);var a=n.x,u=n.y,l=a-i,c=u-o;r+=Math.sqrt(l*l+c*c),i=a,o=u}return r},Hl.isCCW=function(t){var e=t.length-1;if(e<3)throw new rl("Ring has fewer than 4 points, so orientation cannot be determined");for(var r=t[0],n=0,i=1;i<=e;i++){var o=t[i];o.y>r.y&&(r=o,n=i)}var s=n;do{(s-=1)<0&&(s=e)}while(t[s].equals2D(r)&&s!==n);var a=n;do{a=(a+1)%e}while(t[a].equals2D(r)&&a!==n);var u=t[s],l=t[a];if(u.equals2D(r)||l.equals2D(r)||u.equals2D(l))return!1;var c=Hl.computeOrientation(u,r,l),h=!1;return h=0===c?u.x>l.x:c>0,h},Hl.locatePointInRing=function(t,e){return Wl.locatePointInRing(t,e)},Hl.distancePointLinePerpendicular=function(t,e,r){var n=(r.x-e.x)*(r.x-e.x)+(r.y-e.y)*(r.y-e.y),i=((e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y))/n;return Math.abs(i)*Math.sqrt(n)},Hl.computeOrientation=function(t,e,r){return Hl.orientationIndex(t,e,r)},Hl.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new rl("Line array must contain at least one vertex");for(var r=t.distance(e[0]),n=0;n<e.length-1;n++){var i=Hl.distancePointLine(t,e[n],e[n+1]);i<r&&(r=i)}return r}if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];if(s.x===a.x&&s.y===a.y)return o.distance(s);var u=(a.x-s.x)*(a.x-s.x)+(a.y-s.y)*(a.y-s.y),l=((o.x-s.x)*(a.x-s.x)+(o.y-s.y)*(a.y-s.y))/u;if(l<=0)return o.distance(s);if(l>=1)return o.distance(a);var c=((s.y-o.y)*(a.x-s.x)-(s.x-o.x)*(a.y-s.y))/u;return Math.abs(c)*Math.sqrt(u)}},Hl.isOnLine=function(t,e){for(var r=new zl,n=1;n<e.length;n++){var i=e[n-1],o=e[n];if(r.computeIntersection(t,i,o),r.hasIntersection())return!0}return!1},Xl.CLOCKWISE.get=function(){return-1},Xl.RIGHT.get=function(){return Hl.CLOCKWISE},Xl.COUNTERCLOCKWISE.get=function(){return 1},Xl.LEFT.get=function(){return Hl.COUNTERCLOCKWISE},Xl.COLLINEAR.get=function(){return 0},Xl.STRAIGHT.get=function(){return Hl.COLLINEAR},Object.defineProperties(Hl,Xl);var Zl=function(){};Zl.prototype.filter=function(t){},Zl.prototype.interfaces_=function(){return[]},Zl.prototype.getClass=function(){return Zl};var Yl=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},Jl={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};Yl.prototype.isGeometryCollection=function(){return this.getSortIndex()===Yl.SORTINDEX_GEOMETRYCOLLECTION},Yl.prototype.getFactory=function(){return this._factory},Yl.prototype.getGeometryN=function(t){return this},Yl.prototype.getArea=function(){return 0},Yl.prototype.isRectangle=function(){return!1},Yl.prototype.equals=function(){if(arguments[0]instanceof Yl){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof Yl))return!1;var r=e;return this.equalsExact(r)}},Yl.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},Yl.prototype.geometryChanged=function(){this.apply(Yl.geometryChangedFilter)},Yl.prototype.geometryChangedAction=function(){this._envelope=null},Yl.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},Yl.prototype.getLength=function(){return 0},Yl.prototype.getNumGeometries=function(){return 1},Yl.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var r=arguments[0],n=arguments[1];return this.getSortIndex()!==r.getSortIndex()?this.getSortIndex()-r.getSortIndex():this.isEmpty()&&r.isEmpty()?0:this.isEmpty()?-1:r.isEmpty()?1:this.compareToSameClass(r,n)}},Yl.prototype.getUserData=function(){return this._userData},Yl.prototype.getSRID=function(){return this._SRID},Yl.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},Yl.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===Yl.SORTINDEX_GEOMETRYCOLLECTION)throw new rl("This method does not support GeometryCollection arguments")},Yl.prototype.equal=function(t,e,r){return 0===r?t.equals(e):t.distance(e)<=r},Yl.prototype.norm=function(){var t=this.copy();return t.normalize(),t},Yl.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},Yl.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new Tl(this._envelope)},Yl.prototype.setSRID=function(t){this._SRID=t},Yl.prototype.setUserData=function(t){this._userData=t},Yl.prototype.compare=function(t,e){for(var r=t.iterator(),n=e.iterator();r.hasNext()&&n.hasNext();){var i=r.next(),o=n.next(),s=i.compareTo(o);if(0!==s)return s}return r.hasNext()?1:n.hasNext()?-1:0},Yl.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},Yl.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===Yl.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===Yl.SORTINDEX_MULTIPOINT||this.getSortIndex()===Yl.SORTINDEX_MULTILINESTRING||this.getSortIndex()===Yl.SORTINDEX_MULTIPOLYGON},Yl.prototype.interfaces_=function(){return[sl,ol,ul]},Yl.prototype.getClass=function(){return Yl},Yl.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},Yl.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},Jl.serialVersionUID.get=function(){return 0x799ea46522854c00},Jl.SORTINDEX_POINT.get=function(){return 0},Jl.SORTINDEX_MULTIPOINT.get=function(){return 1},Jl.SORTINDEX_LINESTRING.get=function(){return 2},Jl.SORTINDEX_LINEARRING.get=function(){return 3},Jl.SORTINDEX_MULTILINESTRING.get=function(){return 4},Jl.SORTINDEX_POLYGON.get=function(){return 5},Jl.SORTINDEX_MULTIPOLYGON.get=function(){return 6},Jl.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},Jl.geometryChangedFilter.get=function(){return Ql},Object.defineProperties(Yl,Jl);var Ql=function(){};Ql.interfaces_=function(){return[Zl]},Ql.filter=function(t){t.geometryChangedAction()};var Kl=function(){};Kl.prototype.filter=function(t){},Kl.prototype.interfaces_=function(){return[]},Kl.prototype.getClass=function(){return Kl};var $l=function(){},tc={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};$l.prototype.isInBoundary=function(t){},$l.prototype.interfaces_=function(){return[]},$l.prototype.getClass=function(){return $l},tc.Mod2BoundaryNodeRule.get=function(){return ec},tc.EndPointBoundaryNodeRule.get=function(){return rc},tc.MultiValentEndPointBoundaryNodeRule.get=function(){return nc},tc.MonoValentEndPointBoundaryNodeRule.get=function(){return ic},tc.MOD2_BOUNDARY_RULE.get=function(){return new ec},tc.ENDPOINT_BOUNDARY_RULE.get=function(){return new rc},tc.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new nc},tc.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new ic},tc.OGC_SFS_BOUNDARY_RULE.get=function(){return $l.MOD2_BOUNDARY_RULE},Object.defineProperties($l,tc);var ec=function(){};ec.prototype.isInBoundary=function(t){return t%2==1},ec.prototype.interfaces_=function(){return[$l]},ec.prototype.getClass=function(){return ec};var rc=function(){};rc.prototype.isInBoundary=function(t){return t>0},rc.prototype.interfaces_=function(){return[$l]},rc.prototype.getClass=function(){return rc};var nc=function(){};nc.prototype.isInBoundary=function(t){return t>1},nc.prototype.interfaces_=function(){return[$l]},nc.prototype.getClass=function(){return nc};var ic=function(){};ic.prototype.isInBoundary=function(t){return 1===t},ic.prototype.interfaces_=function(){return[$l]},ic.prototype.getClass=function(){return ic};var oc=function(){};function sc(t){this.message=t||""}oc.prototype.add=function(){},oc.prototype.addAll=function(){},oc.prototype.isEmpty=function(){},oc.prototype.iterator=function(){},oc.prototype.size=function(){},oc.prototype.toArray=function(){},oc.prototype.remove=function(){},sc.prototype=new Error,sc.prototype.name="IndexOutOfBoundsException";var ac=function(){};ac.prototype.hasNext=function(){},ac.prototype.next=function(){},ac.prototype.remove=function(){};var uc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(oc);function lc(t){this.message=t||""}lc.prototype=new Error,lc.prototype.name="NoSuchElementException";var cc=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof oc&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,oc]},e.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.set=function(t,e){var r=this.array_[t];return this.array_[t]=e,r},e.prototype.iterator=function(){return new hc(this)},e.prototype.get=function(t){if(t<0||t>=this.size())throw new sc;return this.array_[t]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,r=this.array_.length;e<r;e++)t.push(this.array_[e]);return t},e.prototype.remove=function(t){for(var e=!1,r=0,n=this.array_.length;r<n;r++)if(this.array_[r]===t){this.array_.splice(r,1),e=!0;break}return e},e}(uc),hc=function(t){function e(e){t.call(this),this.arrayList_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new lc;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(ac),fc=function(t){function e(){if(t.call(this),0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){var r=arguments[0],n=arguments[1];this.ensureCapacity(r.length),this.add(r,n)}}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={coordArrayType:{configurable:!0}};return r.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(t){return this.get(t)},e.prototype.addAll=function(){var e=this;if(2===arguments.length){for(var r=arguments[0],n=arguments[1],i=!1,o=r.iterator();o.hasNext();)e.add(o.next(),n),i=!0;return i}return t.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),r=0;r<this.size();r++)e.add(r,this.get(r).copy());return e},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){var e=this;if(1===arguments.length){var r=arguments[0];t.prototype.add.call(this,r)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var n=arguments[0],i=arguments[1];return this.add(n,i,!0),!0}if(arguments[0]instanceof ll&&"boolean"==typeof arguments[1]){var o=arguments[0],s=arguments[1];if(!s&&this.size()>=1){var a=this.get(this.size()-1);if(a.equals2D(o))return null}t.prototype.add.call(this,o)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var u=arguments[0],l=arguments[1];return this.add(u,l),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var c=arguments[0],h=arguments[1],f=arguments[2];if(f)for(var p=0;p<c.length;p++)e.add(c[p],h);else for(var d=c.length-1;d>=0;d--)e.add(c[d],h);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof ll){var y=arguments[0],v=arguments[1],g=arguments[2];if(!g){var m=this.size();if(m>0){if(y>0){var _=this.get(y-1);if(_.equals2D(v))return null}if(y<m){var b=this.get(y);if(b.equals2D(v))return null}}}t.prototype.add.call(this,y,v)}}else if(4===arguments.length){var x=arguments[0],S=arguments[1],w=arguments[2],C=arguments[3],I=1;w>C&&(I=-1);for(var E=w;E!==C;E+=I)e.add(x[E],S);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new ll(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,r),e}(cc),pc=function(){},dc={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};dc.ForwardComparator.get=function(){return yc},dc.BidirectionalComparator.get=function(){return vc},dc.coordArrayType.get=function(){return new Array(0).fill(null)},pc.prototype.interfaces_=function(){return[]},pc.prototype.getClass=function(){return pc},pc.isRing=function(t){return!(t.length<4)&&!!t[0].equals2D(t[t.length-1])},pc.ptNotInList=function(t,e){for(var r=0;r<t.length;r++){var n=t[r];if(pc.indexOf(n,e)<0)return n}return null},pc.scroll=function(t,e){var r=pc.indexOf(e,t);if(r<0)return null;var n=new Array(t.length).fill(null);Ll.arraycopy(t,r,n,0,t.length-r),Ll.arraycopy(t,0,n,t.length-r,r),Ll.arraycopy(n,0,t,0,t.length)},pc.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(!t[r].equals(e[r]))return!1;return!0}if(3===arguments.length){var n=arguments[0],i=arguments[1],o=arguments[2];if(n===i)return!0;if(null===n||null===i)return!1;if(n.length!==i.length)return!1;for(var s=0;s<n.length;s++)if(0!==o.compare(n[s],i[s]))return!1;return!0}},pc.intersection=function(t,e){for(var r=new fc,n=0;n<t.length;n++)e.intersects(t[n])&&r.add(t[n],!0);return r.toCoordinateArray()},pc.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},pc.removeRepeatedPoints=function(t){return pc.hasRepeatedPoints(t)?new fc(t,!1).toCoordinateArray():t},pc.reverse=function(t){for(var e=t.length-1,r=Math.trunc(e/2),n=0;n<=r;n++){var i=t[n];t[n]=t[e-n],t[e-n]=i}},pc.removeNull=function(t){for(var e=0,r=0;r<t.length;r++)null!==t[r]&&e++;var n=new Array(e).fill(null);if(0===e)return n;for(var i=0,o=0;o<t.length;o++)null!==t[o]&&(n[i++]=t[o]);return n},pc.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),r=0;r<t.length;r++)e[r]=new ll(t[r]);return e}if(5===arguments.length)for(var n=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3],a=arguments[4],u=0;u<a;u++)o[s+u]=new ll(n[i+u])},pc.isEqualReversed=function(t,e){for(var r=0;r<t.length;r++){var n=t[r],i=e[t.length-r-1];if(0!==n.compareTo(i))return!1}return!0},pc.envelope=function(t){for(var e=new Tl,r=0;r<t.length;r++)e.expandToInclude(t[r]);return e},pc.toCoordinateArray=function(t){return t.toArray(pc.coordArrayType)},pc.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},pc.indexOf=function(t,e){for(var r=0;r<e.length;r++)if(t.equals(e[r]))return r;return-1},pc.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var r=t.length-1-e,n=t[e].compareTo(t[r]);if(0!==n)return n}return 1},pc.compare=function(t,e){for(var r=0;r<t.length&&r<e.length;){var n=t[r].compareTo(e[r]);if(0!==n)return n;r++}return r<e.length?-1:r<t.length?1:0},pc.minCoordinate=function(t){for(var e=null,r=0;r<t.length;r++)(null===e||e.compareTo(t[r])>0)&&(e=t[r]);return e},pc.extract=function(t,e,r){e=vl.clamp(e,0,t.length);var n=(r=vl.clamp(r,-1,t.length))-e+1;r<0&&(n=0),e>=t.length&&(n=0),r<e&&(n=0);var i=new Array(n).fill(null);if(0===n)return i;for(var o=0,s=e;s<=r;s++)i[o++]=t[s];return i},Object.defineProperties(pc,dc);var yc=function(){};yc.prototype.compare=function(t,e){return pc.compare(t,e)},yc.prototype.interfaces_=function(){return[al]},yc.prototype.getClass=function(){return yc};var vc=function(){};vc.prototype.compare=function(t,e){var r=t,n=e;if(r.length<n.length)return-1;if(r.length>n.length)return 1;if(0===r.length)return 0;var i=pc.compare(r,n);return pc.isEqualReversed(r,n)?0:i},vc.prototype.OLDcompare=function(t,e){var r=t,n=e;if(r.length<n.length)return-1;if(r.length>n.length)return 1;if(0===r.length)return 0;for(var i=pc.increasingDirection(r),o=pc.increasingDirection(n),s=i>0?0:r.length-1,a=o>0?0:r.length-1,u=0;u<r.length;u++){var l=r[s].compareTo(n[a]);if(0!==l)return l;s+=i,a+=o}return 0},vc.prototype.interfaces_=function(){return[al]},vc.prototype.getClass=function(){return vc};var gc=function(){};gc.prototype.get=function(){},gc.prototype.put=function(){},gc.prototype.size=function(){},gc.prototype.values=function(){},gc.prototype.entrySet=function(){};var mc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(gc);function _c(t){this.message=t||""}function bc(){}_c.prototype=new Error,_c.prototype.name="OperationNotSupported",bc.prototype=new oc,bc.prototype.contains=function(){};var xc=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof oc&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contains=function(t){for(var e=0,r=this.array_.length;e<r;e++){if(this.array_[e]===t)return!0}return!1},e.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.remove=function(t){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,r=this.array_.length;e<r;e++)t.push(this.array_[e]);return t},e.prototype.iterator=function(){return new Sc(this)},e}(bc),Sc=function(t){function e(e){t.call(this),this.hashSet_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new lc;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new _c},e}(ac);function wc(t){return null===t?0:t.color}function Cc(t){return null===t?null:t.parent}function Ic(t,e){null!==t&&(t.color=e)}function Ec(t){return null===t?null:t.left}function Pc(t){return null===t?null:t.right}function Mc(){this.root_=null,this.size_=0}Mc.prototype=new mc,Mc.prototype.get=function(t){for(var e=this.root_;null!==e;){var r=t.compareTo(e.key);if(r<0)e=e.left;else{if(!(r>0))return e.value;e=e.right}}return null},Mc.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:0,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var r,n,i=this.root_;do{if(r=i,(n=t.compareTo(i.key))<0)i=i.left;else{if(!(n>0)){var o=i.value;return i.value=e,o}i=i.right}}while(null!==i);var s={key:t,left:null,right:null,value:e,parent:r,color:0,getValue:function(){return this.value},getKey:function(){return this.key}};return n<0?r.left=s:r.right=s,this.fixAfterInsertion(s),this.size_++,null},Mc.prototype.fixAfterInsertion=function(t){var e=this;for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(Cc(t)===Ec(Cc(Cc(t)))){var r=Pc(Cc(Cc(t)));1===wc(r)?(Ic(Cc(t),0),Ic(r,0),Ic(Cc(Cc(t)),1),t=Cc(Cc(t))):(t===Pc(Cc(t))&&(t=Cc(t),e.rotateLeft(t)),Ic(Cc(t),0),Ic(Cc(Cc(t)),1),e.rotateRight(Cc(Cc(t))))}else{var n=Ec(Cc(Cc(t)));1===wc(n)?(Ic(Cc(t),0),Ic(n,0),Ic(Cc(Cc(t)),1),t=Cc(Cc(t))):(t===Ec(Cc(t))&&(t=Cc(t),e.rotateRight(t)),Ic(Cc(t),0),Ic(Cc(Cc(t)),1),e.rotateLeft(Cc(Cc(t))))}this.root_.color=0},Mc.prototype.values=function(){var t=new cc,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=Mc.successor(e));)t.add(e.value);return t},Mc.prototype.entrySet=function(){var t=new xc,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=Mc.successor(e));)t.add(e);return t},Mc.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},Mc.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},Mc.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},Mc.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var r=t.parent,n=t;null!==r&&n===r.right;)n=r,r=r.parent;return r},Mc.prototype.size=function(){return this.size_};var Lc=function(){};function Nc(){}function Tc(){this.array_=[],arguments[0]instanceof oc&&this.addAll(arguments[0])}Lc.prototype.interfaces_=function(){return[]},Lc.prototype.getClass=function(){return Lc},Nc.prototype=new bc,Tc.prototype=new Nc,Tc.prototype.contains=function(t){for(var e=0,r=this.array_.length;e<r;e++){if(0===this.array_[e].compareTo(t))return!0}return!1},Tc.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,r=this.array_.length;e<r;e++){if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0}return this.array_.push(t),!0},Tc.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},Tc.prototype.remove=function(t){throw new _c},Tc.prototype.size=function(){return this.array_.length},Tc.prototype.isEmpty=function(){return 0===this.array_.length},Tc.prototype.toArray=function(){for(var t=[],e=0,r=this.array_.length;e<r;e++)t.push(this.array_[e]);return t},Tc.prototype.iterator=function(){return new Oc(this)};var Oc=function(t){this.treeSet_=t,this.position_=0};Oc.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new lc;return this.treeSet_.array_[this.position_++]},Oc.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},Oc.prototype.remove=function(){throw new _c};var Ac=function(){};Ac.sort=function(){var t,e,r,n,i=arguments[0];if(1===arguments.length)n=function(t,e){return t.compareTo(e)},i.sort(n);else if(2===arguments.length)r=arguments[1],n=function(t,e){return r.compare(t,e)},i.sort(n);else if(3===arguments.length){(e=i.slice(arguments[1],arguments[2])).sort();var o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length));for(i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])}else if(4===arguments.length)for(e=i.slice(arguments[1],arguments[2]),r=arguments[3],n=function(t,e){return r.compare(t,e)},e.sort(n),o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length)),i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])},Ac.asList=function(t){for(var e=new cc,r=0,n=t.length;r<n;r++)e.add(t[r]);return e};var Rc=function(){},Fc={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};Fc.P.get=function(){return 0},Fc.L.get=function(){return 1},Fc.A.get=function(){return 2},Fc.FALSE.get=function(){return-1},Fc.TRUE.get=function(){return-2},Fc.DONTCARE.get=function(){return-3},Fc.SYM_FALSE.get=function(){return"F"},Fc.SYM_TRUE.get=function(){return"T"},Fc.SYM_DONTCARE.get=function(){return"*"},Fc.SYM_P.get=function(){return"0"},Fc.SYM_L.get=function(){return"1"},Fc.SYM_A.get=function(){return"2"},Rc.prototype.interfaces_=function(){return[]},Rc.prototype.getClass=function(){return Rc},Rc.toDimensionSymbol=function(t){switch(t){case Rc.FALSE:return Rc.SYM_FALSE;case Rc.TRUE:return Rc.SYM_TRUE;case Rc.DONTCARE:return Rc.SYM_DONTCARE;case Rc.P:return Rc.SYM_P;case Rc.L:return Rc.SYM_L;case Rc.A:return Rc.SYM_A}throw new rl("Unknown dimension value: "+t)},Rc.toDimensionValue=function(t){switch(bl.toUpperCase(t)){case Rc.SYM_FALSE:return Rc.FALSE;case Rc.SYM_TRUE:return Rc.TRUE;case Rc.SYM_DONTCARE:return Rc.DONTCARE;case Rc.SYM_P:return Rc.P;case Rc.SYM_L:return Rc.L;case Rc.SYM_A:return Rc.A}throw new rl("Unknown dimension symbol: "+t)},Object.defineProperties(Rc,Fc);var Dc=function(){};Dc.prototype.filter=function(t){},Dc.prototype.interfaces_=function(){return[]},Dc.prototype.getClass=function(){return Dc};var kc=function(){};kc.prototype.filter=function(t,e){},kc.prototype.isDone=function(){},kc.prototype.isGeometryChanged=function(){},kc.prototype.interfaces_=function(){return[]},kc.prototype.getClass=function(){return kc};var jc=function(t){function e(e,r){if(t.call(this,r),this._geometries=e||[],t.hasNullElements(this._geometries))throw new rl("geometries must not contain null elements")}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var t=new Tl,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t},e.prototype.getGeometryN=function(t){return this._geometries[t]},e.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,r=0;r<this._geometries.length;r++)for(var n=this._geometries[r].getCoordinates(),i=0;i<n.length;i++)t[++e]=n[i];return t},e.prototype.getArea=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t},e.prototype.equalsExact=function(){var e=this;if(2===arguments.length){var r=arguments[0],n=arguments[1];if(!this.isEquivalentClass(r))return!1;var i=r;if(this._geometries.length!==i._geometries.length)return!1;for(var o=0;o<this._geometries.length;o++)if(!e._geometries[o].equalsExact(i._geometries[o],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();Ac.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var t=Rc.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t},e.prototype.getDimension=function(){for(var t=Rc.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t},e.prototype.getLength=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),r=0;r<this._geometries.length;r++)e[r]=this._geometries[r].reverse();return this.getFactory().createGeometryCollection(e)},e.prototype.compareToSameClass=function(){var t=this;if(1===arguments.length){var e=arguments[0],r=new Tc(Ac.asList(this._geometries)),n=new Tc(Ac.asList(e._geometries));return this.compare(r,n)}if(2===arguments.length){for(var i=arguments[0],o=arguments[1],s=i,a=this.getNumGeometries(),u=s.getNumGeometries(),l=0;l<a&&l<u;){var c=t.getGeometryN(l),h=s.getGeometryN(l),f=c.compareToSameClass(h,o);if(0!==f)return f;l++}return l<a?1:l<u?-1:0}},e.prototype.apply=function(){var t=this;if(yl(arguments[0],Kl))for(var e=arguments[0],r=0;r<this._geometries.length;r++)t._geometries[r].apply(e);else if(yl(arguments[0],kc)){var n=arguments[0];if(0===this._geometries.length)return null;for(var i=0;i<this._geometries.length&&(t._geometries[i].apply(n),!n.isDone());i++);n.isGeometryChanged()&&this.geometryChanged()}else if(yl(arguments[0],Dc)){var o=arguments[0];o.filter(this);for(var s=0;s<this._geometries.length;s++)t._geometries[s].apply(o)}else if(yl(arguments[0],Zl)){var a=arguments[0];a.filter(this);for(var u=0;u<this._geometries.length;u++)t._geometries[u].apply(a)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),Bl.shouldNeverReachHere(),null},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._geometries=new Array(this._geometries.length).fill(null);for(var r=0;r<this._geometries.length;r++)e._geometries[r]=this._geometries[r].clone();return e},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),r=0;r<t.length;r++)t[r]=this._geometries[r].copy();return new e(t,this._factory)},e.prototype.isEmpty=function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},r.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(e,r),e}(Yl),Gc=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Yl.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],r=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,r)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Rc.FALSE:0},e.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),r=0;r<this._geometries.length;r++)e[t-1-r]=this._geometries[r].reverse();return this.getFactory().createMultiLineString(e)},e.prototype.getBoundary=function(){return new Bc(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),r=0;r<t.length;r++)t[r]=this._geometries[r].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Lc]},e.prototype.getClass=function(){return e},r.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(e,r),e}(jc),Bc=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],e=$l.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(2===arguments.length){var r=arguments[0],n=arguments[1];this._geom=r,this._geomFact=r.getFactory(),this._bnRule=n}};Bc.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},Bc.prototype.getBoundary=function(){return this._geom instanceof Qc?this.boundaryLineString(this._geom):this._geom instanceof Gc?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},Bc.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},Bc.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},Bc.prototype.computeBoundaryCoordinates=function(t){var e=this,r=new cc;this._endpointMap=new Mc;for(var n=0;n<t.getNumGeometries();n++){var i=t.getGeometryN(n);0!==i.getNumPoints()&&(e.addEndpoint(i.getCoordinateN(0)),e.addEndpoint(i.getCoordinateN(i.getNumPoints()-1)))}for(var o=this._endpointMap.entrySet().iterator();o.hasNext();){var s=o.next(),a=s.getValue().count;e._bnRule.isInBoundary(a)&&r.add(s.getKey())}return pc.toCoordinateArray(r)},Bc.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new Uc,this._endpointMap.put(t,e)),e.count++},Bc.prototype.interfaces_=function(){return[]},Bc.prototype.getClass=function(){return Bc},Bc.getBoundary=function(){if(1===arguments.length){var t=arguments[0],e=new Bc(t);return e.getBoundary()}if(2===arguments.length){var r=arguments[0],n=arguments[1],i=new Bc(r,n);return i.getBoundary()}};var Uc=function(){this.count=null};function qc(){}function zc(){}Uc.prototype.interfaces_=function(){return[]},Uc.prototype.getClass=function(){return Uc};var Vc=function(){};function Wc(){}function Hc(){}function Xc(){}var Zc=function(){},Yc={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};Zc.prototype.interfaces_=function(){return[]},Zc.prototype.getClass=function(){return Zc},Zc.chars=function(t,e){for(var r=new Array(e).fill(null),n=0;n<e;n++)r[n]=t;return String(r)},Zc.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new Wc,r=new qc(e);return t.printStackTrace(r),e.toString()}if(2===arguments.length){for(var n=arguments[0],i=arguments[1],o="",s=new zc(Zc.getStackTrace(n)),a=new Xc(s),u=0;u<i;u++)try{o+=a.readLine()+Zc.NEWLINE}catch(t){if(!(t instanceof Hc))throw t;Bl.shouldNeverReachHere()}return o}},Zc.split=function(t,e){for(var r=e.length,n=new cc,i=""+t,o=i.indexOf(e);o>=0;){var s=i.substring(0,o);n.add(s),o=(i=i.substring(o+r)).indexOf(e)}i.length>0&&n.add(i);for(var a=new Array(n.size()).fill(null),u=0;u<a.length;u++)a[u]=n.get(u);return a},Zc.toString=function(){if(1===arguments.length){var t=arguments[0];return Zc.SIMPLE_ORDINATE_FORMAT.format(t)}},Zc.spaces=function(t){return Zc.chars(" ",t)},Yc.NEWLINE.get=function(){return Ll.getProperty("line.separator")},Yc.SIMPLE_ORDINATE_FORMAT.get=function(){return new Vc("0.#")},Object.defineProperties(Zc,Yc);var Jc=function(){};Jc.prototype.interfaces_=function(){return[]},Jc.prototype.getClass=function(){return Jc},Jc.copyCoord=function(t,e,r,n){for(var i=Math.min(t.getDimension(),r.getDimension()),o=0;o<i;o++)r.setOrdinate(n,o,t.getOrdinate(e,o))},Jc.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&(t.getOrdinate(0,Il.X)===t.getOrdinate(e-1,Il.X)&&t.getOrdinate(0,Il.Y)===t.getOrdinate(e-1,Il.Y))},Jc.isEqual=function(t,e){var r=t.size();if(r!==e.size())return!1;for(var n=Math.min(t.getDimension(),e.getDimension()),i=0;i<r;i++)for(var o=0;o<n;o++){var s=t.getOrdinate(i,o),a=e.getOrdinate(i,o);if(t.getOrdinate(i,o)!==e.getOrdinate(i,o)&&(!nl.isNaN(s)||!nl.isNaN(a)))return!1}return!0},Jc.extend=function(t,e,r){var n=t.create(r,e.getDimension()),i=e.size();if(Jc.copy(e,0,n,0,i),i>0)for(var o=i;o<r;o++)Jc.copy(e,i-1,n,o,1);return n},Jc.reverse=function(t){for(var e=t.size()-1,r=Math.trunc(e/2),n=0;n<=r;n++)Jc.swap(t,n,e-n)},Jc.swap=function(t,e,r){if(e===r)return null;for(var n=0;n<t.getDimension();n++){var i=t.getOrdinate(e,n);t.setOrdinate(e,n,t.getOrdinate(r,n)),t.setOrdinate(r,n,i)}},Jc.copy=function(t,e,r,n,i){for(var o=0;o<i;o++)Jc.copyCoord(t,e+o,r,n+o)},Jc.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var r=t.getDimension(),n=new ml;n.append("(");for(var i=0;i<e;i++){i>0&&n.append(" ");for(var o=0;o<r;o++)o>0&&n.append(","),n.append(Zc.toString(t.getOrdinate(i,o)))}return n.append(")"),n.toString()}},Jc.ensureValidRing=function(t,e){var r=e.size();return 0===r?e:r<=3?Jc.createClosedRing(t,e,4):e.getOrdinate(0,Il.X)===e.getOrdinate(r-1,Il.X)&&e.getOrdinate(0,Il.Y)===e.getOrdinate(r-1,Il.Y)?e:Jc.createClosedRing(t,e,r+1)},Jc.createClosedRing=function(t,e,r){var n=t.create(r,e.getDimension()),i=e.size();Jc.copy(e,0,n,0,i);for(var o=i;o<r;o++)Jc.copy(e,0,n,o,1);return n};var Qc=function(t){function e(e,r){t.call(this,r),this._points=null,this.init(e)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new Tl:this._points.expandEnvelope(new Tl)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){var e=this;if(2===arguments.length){var r=arguments[0],n=arguments[1];if(!this.isEquivalentClass(r))return!1;var i=r;if(this._points.size()!==i._points.size())return!1;for(var o=0;o<this._points.size();o++)if(!e.equal(e._points.getCoordinate(o),i._points.getCoordinate(o),n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=this,e=0;e<Math.trunc(this._points.size()/2);e++){var r=t._points.size()-1-e;if(!t._points.getCoordinate(e).equals(t._points.getCoordinate(r)))return t._points.getCoordinate(e).compareTo(t._points.getCoordinate(r))>0&&Jc.reverse(t._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Rc.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return Hl.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var t=this._points.copy();return Jc.reverse(t),this.getFactory().createLineString(t)},e.prototype.compareToSameClass=function(){var t=this;if(1===arguments.length){for(var e=arguments[0],r=e,n=0,i=0;n<this._points.size()&&i<r._points.size();){var o=t._points.getCoordinate(n).compareTo(r._points.getCoordinate(i));if(0!==o)return o;n++,i++}return n<this._points.size()?1:i<r._points.size()?-1:0}if(2===arguments.length){var s=arguments[0],a=arguments[1],u=s;return a.compare(this._points,u._points)}},e.prototype.apply=function(){var t=this;if(yl(arguments[0],Kl))for(var e=arguments[0],r=0;r<this._points.size();r++)e.filter(t._points.getCoordinate(r));else if(yl(arguments[0],kc)){var n=arguments[0];if(0===this._points.size())return null;for(var i=0;i<this._points.size()&&(n.filter(t._points,i),!n.isDone());i++);n.isGeometryChanged()&&this.geometryChanged()}else if(yl(arguments[0],Dc)){var o=arguments[0];o.filter(this)}else if(yl(arguments[0],Zl)){var s=arguments[0];s.filter(this)}},e.prototype.getBoundary=function(){return new Bc(this).getBoundary()},e.prototype.isEquivalentClass=function(t){return t instanceof e},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._points=this._points.clone(),e},e.prototype.getCoordinateN=function(t){return this._points.getCoordinate(t)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new rl("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t},e.prototype.isCoordinate=function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},e.prototype.interfaces_=function(){return[Lc]},e.prototype.getClass=function(){return e},r.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,r),e}(Yl),Kc=function(){};Kc.prototype.interfaces_=function(){return[]},Kc.prototype.getClass=function(){return Kc};var $c=function(t){function e(e,r){t.call(this,r),this._coordinates=e||null,this.init(this._coordinates)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new Tl;var t=new Tl;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},e.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],r=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),r))}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return Rc.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getCoordinate().compareTo(e.getCoordinate())}if(2===arguments.length){var r=arguments[0],n=arguments[1],i=r;return n.compare(this._coordinates,i._coordinates)}},e.prototype.apply=function(){if(yl(arguments[0],Kl)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(yl(arguments[0],kc)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else if(yl(arguments[0],Dc)){var r=arguments[0];r.filter(this)}else if(yl(arguments[0],Zl)){var n=arguments[0];n.filter(this)}},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._coordinates=this._coordinates.clone(),e},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),Bl.isTrue(t.size()<=1),this._coordinates=t},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[Kc]},e.prototype.getClass=function(){return e},r.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,r),e}(Yl),th=function(){};th.prototype.interfaces_=function(){return[]},th.prototype.getClass=function(){return th};var eh=function(t){function e(e,r,n){if(t.call(this,n),this._shell=null,this._holes=null,null===e&&(e=this.getFactory().createLinearRing()),null===r&&(r=[]),t.hasNullElements(r))throw new rl("holes must not contain null elements");if(e.isEmpty()&&t.hasNonEmptyElements(r))throw new rl("shell is empty but holes are not");this._shell=e,this._holes=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,r=this._shell.getCoordinates(),n=0;n<r.length;n++)t[++e]=r[n];for(var i=0;i<this._holes.length;i++)for(var o=this._holes[i].getCoordinates(),s=0;s<o.length;s++)t[++e]=o[s];return t},e.prototype.getArea=function(){var t=0;t+=Math.abs(Hl.signedArea(this._shell.getCoordinateSequence()));for(var e=0;e<this._holes.length;e++)t-=Math.abs(Hl.signedArea(this._holes[e].getCoordinateSequence()));return t},e.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),r=0;r<5;r++){var n=t.getX(r);if(n!==e.getMinX()&&n!==e.getMaxX())return!1;var i=t.getY(r);if(i!==e.getMinY()&&i!==e.getMaxY())return!1}for(var o=t.getX(0),s=t.getY(0),a=1;a<=4;a++){var u=t.getX(a),l=t.getY(a);if(u!==o===(l!==s))return!1;o=u,s=l}return!0},e.prototype.equalsExact=function(){var e=this;if(2===arguments.length){var r=arguments[0],n=arguments[1];if(!this.isEquivalentClass(r))return!1;var i=r,o=this._shell,s=i._shell;if(!o.equalsExact(s,n))return!1;if(this._holes.length!==i._holes.length)return!1;for(var a=0;a<this._holes.length;a++)if(!e._holes[a].equalsExact(i._holes[a],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){var t=this;if(0===arguments.length){this.normalize(this._shell,!0);for(var e=0;e<this._holes.length;e++)t.normalize(t._holes[e],!1);Ac.sort(this._holes)}else if(2===arguments.length){var r=arguments[0],n=arguments[1];if(r.isEmpty())return null;var i=new Array(r.getCoordinates().length-1).fill(null);Ll.arraycopy(r.getCoordinates(),0,i,0,i.length);var o=pc.minCoordinate(r.getCoordinates());pc.scroll(i,o),Ll.arraycopy(i,0,r.getCoordinates(),0,i.length),r.getCoordinates()[i.length]=i[0],Hl.isCCW(r.getCoordinates())===n&&pc.reverse(r.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t},e.prototype.reverse=function(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){var t=this;if(1===arguments.length){var e=arguments[0],r=this._shell,n=e._shell;return r.compareToSameClass(n)}if(2===arguments.length){var i=arguments[0],o=arguments[1],s=i,a=this._shell,u=s._shell,l=a.compareToSameClass(u,o);if(0!==l)return l;for(var c=this.getNumInteriorRing(),h=s.getNumInteriorRing(),f=0;f<c&&f<h;){var p=t.getInteriorRingN(f),d=s.getInteriorRingN(f),y=p.compareToSameClass(d,o);if(0!==y)return y;f++}return f<c?1:f<h?-1:0}},e.prototype.apply=function(t){var e=this;if(yl(t,Kl)){this._shell.apply(t);for(var r=0;r<this._holes.length;r++)e._holes[r].apply(t)}else if(yl(t,kc)){if(this._shell.apply(t),!t.isDone())for(var n=0;n<this._holes.length&&(e._holes[n].apply(t),!t.isDone());n++);t.isGeometryChanged()&&this.geometryChanged()}else if(yl(t,Dc))t.filter(this);else if(yl(t,Zl)){t.filter(this),this._shell.apply(t);for(var i=0;i<this._holes.length;i++)e._holes[i].apply(t)}},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._shell=this._shell.clone(),e._holes=new Array(this._holes.length).fill(null);for(var r=0;r<this._holes.length;r++)e._holes[r]=this._holes[r].clone();return e},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var t=this._shell.copy(),r=new Array(this._holes.length).fill(null),n=0;n<r.length;n++)r[n]=this._holes[n].copy();return new e(t,r,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(t){return this._holes[t]},e.prototype.interfaces_=function(){return[th]},e.prototype.getClass=function(){return e},r.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,r),e}(Yl),rh=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Yl.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],r=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,r)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){if(1===arguments.length){var e=arguments[0];return this._geometries[e].getCoordinate()}return t.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return Rc.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),r=0;r<t.length;r++)t[r]=this._geometries[r].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Kc]},e.prototype.getClass=function(){return e},r.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(e,r),e}(jc),nh=function(t){function e(e,r){e instanceof ll&&r instanceof _h&&(e=r.getCoordinateSequenceFactory().create(e)),t.call(this,e,r),this.validateConstruction()}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Yl.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return Rc.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||t.prototype.isClosed.call(this)},e.prototype.reverse=function(){var t=this._points.copy();return Jc.reverse(t),this.getFactory().createLinearRing(t)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new rl("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new rl("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},r.MINIMUM_VALID_SIZE.get=function(){return 4},r.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,r),e}(Qc),ih=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Yl.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],r=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,r)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),r=0;r<this._geometries.length;r++)e[r]=this._geometries[r].reverse();return this.getFactory().createMultiPolygon(e)},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new cc,e=0;e<this._geometries.length;e++)for(var r=this._geometries[e].getBoundary(),n=0;n<r.getNumGeometries();n++)t.add(r.getGeometryN(n));var i=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(i))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),r=0;r<t.length;r++)t[r]=this._geometries[r].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[th]},e.prototype.getClass=function(){return e},r.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,r),e}(jc),oh=function(t){this._factory=t||null,this._isUserDataCopied=!1},sh={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};oh.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},oh.prototype.edit=function(t,e){if(null===t)return null;var r=this.editInternal(t,e);return this._isUserDataCopied&&r.setUserData(t.getUserData()),r},oh.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof jc?this.editGeometryCollection(t,e):t instanceof eh?this.editPolygon(t,e):t instanceof $c||t instanceof Qc?e.edit(t,this._factory):(Bl.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},oh.prototype.editGeometryCollection=function(t,e){for(var r=e.edit(t,this._factory),n=new cc,i=0;i<r.getNumGeometries();i++){var o=this.edit(r.getGeometryN(i),e);null===o||o.isEmpty()||n.add(o)}return r.getClass()===rh?this._factory.createMultiPoint(n.toArray([])):r.getClass()===Gc?this._factory.createMultiLineString(n.toArray([])):r.getClass()===ih?this._factory.createMultiPolygon(n.toArray([])):this._factory.createGeometryCollection(n.toArray([]))},oh.prototype.editPolygon=function(t,e){var r=e.edit(t,this._factory);if(null===r&&(r=this._factory.createPolygon(null)),r.isEmpty())return r;var n=this.edit(r.getExteriorRing(),e);if(null===n||n.isEmpty())return this._factory.createPolygon();for(var i=new cc,o=0;o<r.getNumInteriorRing();o++){var s=this.edit(r.getInteriorRingN(o),e);null===s||s.isEmpty()||i.add(s)}return this._factory.createPolygon(n,i.toArray([]))},oh.prototype.interfaces_=function(){return[]},oh.prototype.getClass=function(){return oh},oh.GeometryEditorOperation=function(){},sh.NoOpGeometryOperation.get=function(){return ah},sh.CoordinateOperation.get=function(){return uh},sh.CoordinateSequenceOperation.get=function(){return lh},Object.defineProperties(oh,sh);var ah=function(){};ah.prototype.edit=function(t,e){return t},ah.prototype.interfaces_=function(){return[oh.GeometryEditorOperation]},ah.prototype.getClass=function(){return ah};var uh=function(){};uh.prototype.edit=function(t,e){var r=this.editCoordinates(t.getCoordinates(),t);return null===r?t:t instanceof nh?e.createLinearRing(r):t instanceof Qc?e.createLineString(r):t instanceof $c?r.length>0?e.createPoint(r[0]):e.createPoint():t},uh.prototype.interfaces_=function(){return[oh.GeometryEditorOperation]},uh.prototype.getClass=function(){return uh};var lh=function(){};lh.prototype.edit=function(t,e){return t instanceof nh?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof Qc?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof $c?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},lh.prototype.interfaces_=function(){return[oh.GeometryEditorOperation]},lh.prototype.getClass=function(){return lh};var ch=function(){var t=this;if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var e=arguments[0];this._coordinates=new Array(e).fill(null);for(var r=0;r<e;r++)t._coordinates[r]=new ll}else if(yl(arguments[0],Il)){var n=arguments[0];if(null===n)return this._coordinates=new Array(0).fill(null),null;this._dimension=n.getDimension(),this._coordinates=new Array(n.size()).fill(null);for(var i=0;i<this._coordinates.length;i++)t._coordinates[i]=n.getCoordinateCopy(i)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var o=arguments[0],s=arguments[1];this._coordinates=o,this._dimension=s,null===o&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var a=arguments[0],u=arguments[1];this._coordinates=new Array(a).fill(null),this._dimension=u;for(var l=0;l<a;l++)t._coordinates[l]=new ll}},hh={serialVersionUID:{configurable:!0}};ch.prototype.setOrdinate=function(t,e,r){switch(e){case Il.X:this._coordinates[t].x=r;break;case Il.Y:this._coordinates[t].y=r;break;case Il.Z:this._coordinates[t].z=r;break;default:throw new rl("invalid ordinateIndex")}},ch.prototype.size=function(){return this._coordinates.length},ch.prototype.getOrdinate=function(t,e){switch(e){case Il.X:return this._coordinates[t].x;case Il.Y:return this._coordinates[t].y;case Il.Z:return this._coordinates[t].z}return nl.NaN},ch.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}if(2===arguments.length){var e=arguments[0],r=arguments[1];r.x=this._coordinates[e].x,r.y=this._coordinates[e].y,r.z=this._coordinates[e].z}},ch.prototype.getCoordinateCopy=function(t){return new ll(this._coordinates[t])},ch.prototype.getDimension=function(){return this._dimension},ch.prototype.getX=function(t){return this._coordinates[t].x},ch.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new ch(t,this._dimension)},ch.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},ch.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new ch(t,this._dimension)},ch.prototype.toString=function(){if(this._coordinates.length>0){var t=new ml(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},ch.prototype.getY=function(t){return this._coordinates[t].y},ch.prototype.toCoordinateArray=function(){return this._coordinates},ch.prototype.interfaces_=function(){return[Il,ul]},ch.prototype.getClass=function(){return ch},hh.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(ch,hh);var fh=function(){},ph={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};fh.prototype.readResolve=function(){return fh.instance()},fh.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return new ch(t)}if(yl(arguments[0],Il)){var e=arguments[0];return new ch(e)}}else if(2===arguments.length){var r=arguments[0],n=arguments[1];return n>3&&(n=3),n<2?new ch(r):new ch(r,n)}},fh.prototype.interfaces_=function(){return[fl,ul]},fh.prototype.getClass=function(){return fh},fh.instance=function(){return fh.instanceObject},ph.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},ph.instanceObject.get=function(){return new fh},Object.defineProperties(fh,ph);var dh=function(t){function e(){t.call(this),this.map_=new Map}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return this.map_.get(t)||null},e.prototype.put=function(t,e){return this.map_.set(t,e),e},e.prototype.values=function(){for(var t=new cc,e=this.map_.values(),r=e.next();!r.done;)t.add(r.value),r=e.next();return t},e.prototype.entrySet=function(){var t=new xc;return this.map_.entries().forEach(function(e){return t.add(e)}),t},e.prototype.size=function(){return this.map_.size()},e}(gc),yh=function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof gh){var e=arguments[0];this._modelType=e,e===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var r=arguments[0];this._modelType=t.FIXED,this.setScale(r)}else if(arguments[0]instanceof t){var n=arguments[0];this._modelType=n._modelType,this._scale=n._scale}},vh={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};yh.prototype.equals=function(t){if(!(t instanceof yh))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale},yh.prototype.compareTo=function(t){var e=t,r=this.getMaximumSignificantDigits(),n=e.getMaximumSignificantDigits();return new _l(r).compareTo(new _l(n))},yh.prototype.getScale=function(){return this._scale},yh.prototype.isFloating=function(){return this._modelType===yh.FLOATING||this._modelType===yh.FLOATING_SINGLE},yh.prototype.getType=function(){return this._modelType},yh.prototype.toString=function(){var t="UNKNOWN";return this._modelType===yh.FLOATING?t="Floating":this._modelType===yh.FLOATING_SINGLE?t="Floating-Single":this._modelType===yh.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},yh.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];if(nl.isNaN(t))return t;if(this._modelType===yh.FLOATING_SINGLE){return t}return this._modelType===yh.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof ll){var e=arguments[0];if(this._modelType===yh.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},yh.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===yh.FLOATING?t=16:this._modelType===yh.FLOATING_SINGLE?t=6:this._modelType===yh.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},yh.prototype.setScale=function(t){this._scale=Math.abs(t)},yh.prototype.interfaces_=function(){return[ul,ol]},yh.prototype.getClass=function(){return yh},yh.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},vh.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},vh.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(yh,vh);var gh=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},mh={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};gh.prototype.readResolve=function(){return gh.nameToTypeMap.get(this._name)},gh.prototype.toString=function(){return this._name},gh.prototype.interfaces_=function(){return[ul]},gh.prototype.getClass=function(){return gh},mh.serialVersionUID.get=function(){return-552860263173159e4},mh.nameToTypeMap.get=function(){return new dh},Object.defineProperties(gh,mh),yh.Type=gh,yh.FIXED=new gh("FIXED"),yh.FLOATING=new gh("FLOATING"),yh.FLOATING_SINGLE=new gh("FLOATING SINGLE");var _h=function t(){this._precisionModel=new yh,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?yl(arguments[0],fl)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof yh&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},bh={serialVersionUID:{configurable:!0}};_h.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new ll(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new ll(t.getMinX(),t.getMinY()),new ll(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new ll(t.getMinX(),t.getMinY()),new ll(t.getMinX(),t.getMaxY()),new ll(t.getMaxX(),t.getMaxY()),new ll(t.getMaxX(),t.getMinY()),new ll(t.getMinX(),t.getMinY())]),null)},_h.prototype.createLineString=function(t){return t?t instanceof Array?new Qc(this.getCoordinateSequenceFactory().create(t),this):yl(t,Il)?new Qc(t,this):void 0:new Qc(this.getCoordinateSequenceFactory().create([]),this)},_h.prototype.createMultiLineString=function(){if(0===arguments.length)return new Gc(null,this);if(1===arguments.length){var t=arguments[0];return new Gc(t,this)}},_h.prototype.buildGeometry=function(t){for(var e=null,r=!1,n=!1,i=t.iterator();i.hasNext();){var o=i.next(),s=o.getClass();null===e&&(e=s),s!==e&&(r=!0),o.isGeometryCollectionOrDerived()&&(n=!0)}if(null===e)return this.createGeometryCollection();if(r||n)return this.createGeometryCollection(_h.toGeometryArray(t));var a=t.iterator().next();if(t.size()>1){if(a instanceof eh)return this.createMultiPolygon(_h.toPolygonArray(t));if(a instanceof Qc)return this.createMultiLineString(_h.toLineStringArray(t));if(a instanceof $c)return this.createMultiPoint(_h.toPointArray(t));Bl.shouldNeverReachHere("Unhandled class: "+a.getClass().getName())}return a},_h.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},_h.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof ll){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(yl(arguments[0],Il)){var e=arguments[0];return new $c(e,this)}}},_h.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},_h.prototype.createPolygon=function(){if(0===arguments.length)return new eh(null,null,this);if(1===arguments.length){if(yl(arguments[0],Il)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof nh){var r=arguments[0];return this.createPolygon(r,null)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return new eh(n,i,this)}},_h.prototype.getSRID=function(){return this._SRID},_h.prototype.createGeometryCollection=function(){if(0===arguments.length)return new jc(null,this);if(1===arguments.length){var t=arguments[0];return new jc(t,this)}},_h.prototype.createGeometry=function(t){return new oh(this).edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return this._coordinateSequenceFactory.create(t)}}})},_h.prototype.getPrecisionModel=function(){return this._precisionModel},_h.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(yl(arguments[0],Il)){var e=arguments[0];return new nh(e,this)}}},_h.prototype.createMultiPolygon=function(){if(0===arguments.length)return new ih(null,this);if(1===arguments.length){var t=arguments[0];return new ih(t,this)}},_h.prototype.createMultiPoint=function(){var t=this;if(0===arguments.length)return new rh(null,this);if(1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];return new rh(e,this)}if(arguments[0]instanceof Array){var r=arguments[0];return this.createMultiPoint(null!==r?this.getCoordinateSequenceFactory().create(r):null)}if(yl(arguments[0],Il)){var n=arguments[0];if(null===n)return this.createMultiPoint(new Array(0).fill(null));for(var i=new Array(n.size()).fill(null),o=0;o<n.size();o++){var s=t.getCoordinateSequenceFactory().create(1,n.getDimension());Jc.copy(n,o,s,0,1),i[o]=t.createPoint(s)}return this.createMultiPoint(i)}}},_h.prototype.interfaces_=function(){return[ul]},_h.prototype.getClass=function(){return _h},_h.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_h.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},_h.getDefaultCoordinateSequenceFactory=function(){return fh.instance()},_h.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_h.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_h.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_h.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_h.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_h.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_h.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},bh.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(_h,bh);var xh=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],Sh=function(t){this.geometryFactory=t||new _h};Sh.prototype.read=function(t){var e,r=(e="string"==typeof t?JSON.parse(t):t).type;if(!wh[r])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==xh.indexOf(r)?wh[r].apply(this,[e.coordinates]):"GeometryCollection"===r?wh[r].apply(this,[e.geometries]):wh[r].apply(this,[e])},Sh.prototype.write=function(t){var e=t.getGeometryType();if(!Ch[e])throw new Error("Geometry is not supported");return Ch[e].apply(this,[t])};var wh={Feature:function(t){var e={};for(var r in t)e[r]=t[r];if(t.geometry){var n=t.geometry.type;if(!wh[n])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=wh.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var r=0;r<t.features.length;++r)e.features.push(this.read(t.features[r]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],r=0;r<t.length;++r){var n=t[r];e.push(new ll(n[0],n[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new ll(t[0],t[1]),new ll(t[2],t[1]),new ll(t[2],t[3]),new ll(t[0],t[3]),new ll(t[0],t[1])])},Point:function(t){var e=new ll(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],r=0;r<t.length;++r)e.push(wh.Point.apply(this,[t[r]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=wh.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],r=0;r<t.length;++r)e.push(wh.LineString.apply(this,[t[r]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=wh.coordinates.apply(this,[t[0]]),r=this.geometryFactory.createLinearRing(e),n=[],i=1;i<t.length;++i){var o=t[i],s=wh.coordinates.apply(this,[o]),a=this.geometryFactory.createLinearRing(s);n.push(a)}return this.geometryFactory.createPolygon(r,n)},MultiPolygon:function(t){for(var e=[],r=0;r<t.length;++r){var n=t[r];e.push(wh.Polygon.apply(this,[n]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],r=0;r<t.length;++r){var n=t[r];e.push(this.read(n))}return this.geometryFactory.createGeometryCollection(e)}},Ch={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:Ch.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],r=0;r<t._geometries.length;++r){var n=t._geometries[r],i=Ch.Point.apply(this,[n]);e.push(i.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],r=t.getCoordinates(),n=0;n<r.length;++n){var i=r[n];e.push(Ch.coordinate.apply(this,[i]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],r=0;r<t._geometries.length;++r){var n=t._geometries[r],i=Ch.LineString.apply(this,[n]);e.push(i.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],r=Ch.LineString.apply(this,[t._shell]);e.push(r.coordinates);for(var n=0;n<t._holes.length;++n){var i=t._holes[n],o=Ch.LineString.apply(this,[i]);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],r=0;r<t._geometries.length;++r){var n=t._geometries[r],i=Ch.Polygon.apply(this,[n]);e.push(i.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],r=0;r<t._geometries.length;++r){var n=t._geometries[r],i=n.getGeometryType();e.push(Ch[i].apply(this,[n]))}return{type:"GeometryCollection",geometries:e}}},Ih=function(t){this.geometryFactory=t||new _h,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new Sh(this.geometryFactory)};Ih.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===yh.FIXED&&this.reducePrecision(e),e},Ih.prototype.reducePrecision=function(t){var e,r;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,r=t.points.length;e<r;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,r=t.geometries.length;e<r;e++)this.reducePrecision(t.geometries[e])};var Eh=function(){this.parser=new Sh(this.geometryFactory)};Eh.prototype.write=function(t){return this.parser.write(t)};var Ph=function(){},Mh={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};function Lh(t){this.message=t||""}function Nh(){this.array_=[]}Ph.prototype.interfaces_=function(){return[]},Ph.prototype.getClass=function(){return Ph},Ph.opposite=function(t){return t===Ph.LEFT?Ph.RIGHT:t===Ph.RIGHT?Ph.LEFT:t},Mh.ON.get=function(){return 0},Mh.LEFT.get=function(){return 1},Mh.RIGHT.get=function(){return 2},Object.defineProperties(Ph,Mh),Lh.prototype=new Error,Lh.prototype.name="EmptyStackException",Nh.prototype=new uc,Nh.prototype.add=function(t){return this.array_.push(t),!0},Nh.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},Nh.prototype.push=function(t){return this.array_.push(t),t},Nh.prototype.pop=function(t){if(0===this.array_.length)throw new Lh;return this.array_.pop()},Nh.prototype.peek=function(){if(0===this.array_.length)throw new Lh;return this.array_[this.array_.length-1]},Nh.prototype.empty=function(){return 0===this.array_.length},Nh.prototype.isEmpty=function(){return this.empty()},Nh.prototype.search=function(t){return this.array_.indexOf(t)},Nh.prototype.size=function(){return this.array_.length},Nh.prototype.toArray=function(){for(var t=[],e=0,r=this.array_.length;e<r;e++)t.push(this.array_[e]);return t};var Th=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};Th.prototype.getCoordinate=function(){return this._minCoord},Th.prototype.getRightmostSide=function(t,e){var r=this.getRightmostSideOfSegment(t,e);return r<0&&(r=this.getRightmostSideOfSegment(t,e-1)),r<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),r},Th.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();Bl.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],r=t[this._minIndex+1],n=Hl.computeOrientation(this._minCoord,r,e),i=!1;(e.y<this._minCoord.y&&r.y<this._minCoord.y&&n===Hl.COUNTERCLOCKWISE||e.y>this._minCoord.y&&r.y>this._minCoord.y&&n===Hl.CLOCKWISE)&&(i=!0),i&&(this._minIndex=this._minIndex-1)},Th.prototype.getRightmostSideOfSegment=function(t,e){var r=t.getEdge().getCoordinates();if(e<0||e+1>=r.length)return-1;if(r[e].y===r[e+1].y)return-1;var n=Ph.LEFT;return r[e].y<r[e+1].y&&(n=Ph.RIGHT),n},Th.prototype.getEdge=function(){return this._orientedDe},Th.prototype.checkForRightmostCoordinate=function(t){for(var e=this,r=t.getEdge().getCoordinates(),n=0;n<r.length-1;n++)(null===e._minCoord||r[n].x>e._minCoord.x)&&(e._minDe=t,e._minIndex=n,e._minCoord=r[n])},Th.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},Th.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var r=e.next();r.isForward()&&this.checkForRightmostCoordinate(r)}Bl.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Ph.LEFT&&(this._orientedDe=this._minDe.getSym())},Th.prototype.interfaces_=function(){return[]},Th.prototype.getClass=function(){return Th};var Oh=function(t){function e(r,n){t.call(this,e.msgWithCoord(r,n)),this.pt=n?new ll(n):null,this.name="TopologyException"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(t,e){return e?t:t+" [ "+e+" ]"},e}(jl),Ah=function(){this.array_=[]};Ah.prototype.addLast=function(t){this.array_.push(t)},Ah.prototype.removeFirst=function(){return this.array_.shift()},Ah.prototype.isEmpty=function(){return 0===this.array_.length};var Rh=function(){this._finder=null,this._dirEdgeList=new cc,this._nodes=new cc,this._rightMostCoord=null,this._env=null,this._finder=new Th};Rh.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){t.next().setVisited(!1)}},Rh.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},Rh.prototype.computeNodeDepth=function(t){for(var e=null,r=t.getEdges().iterator();r.hasNext();){var n=r.next();if(n.isVisited()||n.getSym().isVisited()){e=n;break}}if(null===e)throw new Oh("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var i=t.getEdges().iterator();i.hasNext();){var o=i.next();o.setVisited(!0),this.copySymDepths(o)}},Rh.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(Ph.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},Rh.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},Rh.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(Ph.RIGHT)>=1&&e.getDepth(Ph.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},Rh.prototype.computeDepths=function(t){var e=new xc,r=new Ah,n=t.getNode();for(r.addLast(n),e.add(n),t.setVisited(!0);!r.isEmpty();){var i=r.removeFirst();e.add(i),this.computeNodeDepth(i);for(var o=i.getEdges().iterator();o.hasNext();){var s=o.next().getSym();if(!s.isVisited()){var a=s.getNode();e.contains(a)||(r.addLast(a),e.add(a))}}}},Rh.prototype.compareTo=function(t){var e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0},Rh.prototype.getEnvelope=function(){if(null===this._env){for(var t=new Tl,e=this._dirEdgeList.iterator();e.hasNext();)for(var r=e.next().getEdge().getCoordinates(),n=0;n<r.length-1;n++)t.expandToInclude(r[n]);this._env=t}return this._env},Rh.prototype.addReachable=function(t){var e=new Nh;for(e.add(t);!e.empty();){var r=e.pop();this.add(r,e)}},Rh.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(Ph.LEFT,t.getDepth(Ph.RIGHT)),e.setDepth(Ph.RIGHT,t.getDepth(Ph.LEFT))},Rh.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var r=t.getEdges().iterator();r.hasNext();){var n=r.next();this._dirEdgeList.add(n);var i=n.getSym().getNode();i.isVisited()||e.push(i)}},Rh.prototype.getNodes=function(){return this._nodes},Rh.prototype.getDirectedEdges=function(){return this._dirEdgeList},Rh.prototype.interfaces_=function(){return[ol]},Rh.prototype.getClass=function(){return Rh};var Fh=function t(){var e=this;if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var r=arguments[0];this.init(r.length)}else if(Number.isInteger(arguments[0])){var n=arguments[0];this.init(1),this.location[Ph.ON]=n}else if(arguments[0]instanceof t){var i=arguments[0];if(this.init(i.location.length),null!==i)for(var o=0;o<this.location.length;o++)e.location[o]=i.location[o]}}else if(3===arguments.length){var s=arguments[0],a=arguments[1],u=arguments[2];this.init(3),this.location[Ph.ON]=s,this.location[Ph.LEFT]=a,this.location[Ph.RIGHT]=u}};Fh.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},Fh.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==pl.NONE)return!1;return!0},Fh.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===pl.NONE&&(this.location[e]=t)},Fh.prototype.isLine=function(){return 1===this.location.length},Fh.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[Ph.ON]=this.location[Ph.ON],e[Ph.LEFT]=pl.NONE,e[Ph.RIGHT]=pl.NONE,this.location=e}for(var r=0;r<this.location.length;r++)this.location[r]===pl.NONE&&r<t.location.length&&(this.location[r]=t.location[r])},Fh.prototype.getLocations=function(){return this.location},Fh.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[Ph.LEFT];this.location[Ph.LEFT]=this.location[Ph.RIGHT],this.location[Ph.RIGHT]=t},Fh.prototype.toString=function(){var t=new ml;return this.location.length>1&&t.append(pl.toLocationSymbol(this.location[Ph.LEFT])),t.append(pl.toLocationSymbol(this.location[Ph.ON])),this.location.length>1&&t.append(pl.toLocationSymbol(this.location[Ph.RIGHT])),t.toString()},Fh.prototype.setLocations=function(t,e,r){this.location[Ph.ON]=t,this.location[Ph.LEFT]=e,this.location[Ph.RIGHT]=r},Fh.prototype.get=function(t){return t<this.location.length?this.location[t]:pl.NONE},Fh.prototype.isArea=function(){return this.location.length>1},Fh.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===pl.NONE)return!0;return!1},Fh.prototype.setLocation=function(){if(1===arguments.length){var t=arguments[0];this.setLocation(Ph.ON,t)}else if(2===arguments.length){var e=arguments[0],r=arguments[1];this.location[e]=r}},Fh.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(pl.NONE)},Fh.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},Fh.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},Fh.prototype.interfaces_=function(){return[]},Fh.prototype.getClass=function(){return Fh};var Dh=function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new Fh(e),this.elt[1]=new Fh(e)}else if(arguments[0]instanceof t){var r=arguments[0];this.elt[0]=new Fh(r.elt[0]),this.elt[1]=new Fh(r.elt[1])}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.elt[0]=new Fh(pl.NONE),this.elt[1]=new Fh(pl.NONE),this.elt[n].setLocation(i)}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];this.elt[0]=new Fh(o,s,a),this.elt[1]=new Fh(o,s,a)}else if(4===arguments.length){var u=arguments[0],l=arguments[1],c=arguments[2],h=arguments[3];this.elt[0]=new Fh(pl.NONE,pl.NONE,pl.NONE),this.elt[1]=new Fh(pl.NONE,pl.NONE,pl.NONE),this.elt[u].setLocations(l,c,h)}};Dh.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},Dh.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},Dh.prototype.isNull=function(t){return this.elt[t].isNull()},Dh.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],r=arguments[1];this.elt[e].setAllLocationsIfNull(r)}},Dh.prototype.isLine=function(t){return this.elt[t].isLine()},Dh.prototype.merge=function(t){for(var e=this,r=0;r<2;r++)null===e.elt[r]&&null!==t.elt[r]?e.elt[r]=new Fh(t.elt[r]):e.elt[r].merge(t.elt[r])},Dh.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},Dh.prototype.getLocation=function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(Ph.ON)}if(2===arguments.length){var e=arguments[0],r=arguments[1];return this.elt[e].get(r)}},Dh.prototype.toString=function(){var t=new ml;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},Dh.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},Dh.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},Dh.prototype.setLocation=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(Ph.ON,e)}else if(3===arguments.length){var r=arguments[0],n=arguments[1],i=arguments[2];this.elt[r].setLocation(n,i)}},Dh.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},Dh.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},Dh.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new Fh(this.elt[t].location[0]))},Dh.prototype.interfaces_=function(){return[]},Dh.prototype.getClass=function(){return Dh},Dh.toLineLabel=function(t){for(var e=new Dh(pl.NONE),r=0;r<2;r++)e.setLocation(r,t.getLocation(r));return e};var kh=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new cc,this._pts=new cc,this._label=new Dh(pl.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new cc,this._geometryFactory=null;var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()};kh.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=Hl.isCCW(this._ring.getCoordinates())},kh.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},kh.prototype.computePoints=function(t){var e=this;this._startDe=t;var r=t,n=!0;do{if(null===r)throw new Oh("Found null DirectedEdge");if(r.getEdgeRing()===e)throw new Oh("Directed Edge visited twice during ring-building at "+r.getCoordinate());e._edges.add(r);var i=r.getLabel();Bl.isTrue(i.isArea()),e.mergeLabel(i),e.addPoints(r.getEdge(),r.isForward(),n),n=!1,e.setEdgeRing(r,e),r=e.getNext(r)}while(r!==this._startDe)},kh.prototype.getLinearRing=function(){return this._ring},kh.prototype.getCoordinate=function(t){return this._pts.get(t)},kh.prototype.computeMaxNodeDegree=function(){var t=this;this._maxNodeDegree=0;var e=this._startDe;do{var r=e.getNode().getEdges().getOutgoingDegree(t);r>t._maxNodeDegree&&(t._maxNodeDegree=r),e=t.getNext(e)}while(e!==this._startDe);this._maxNodeDegree*=2},kh.prototype.addPoints=function(t,e,r){var n=t.getCoordinates();if(e){var i=1;r&&(i=0);for(var o=i;o<n.length;o++)this._pts.add(n[o])}else{var s=n.length-2;r&&(s=n.length-1);for(var a=s;a>=0;a--)this._pts.add(n[a])}},kh.prototype.isHole=function(){return this._isHole},kh.prototype.setInResult=function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)},kh.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!Hl.isPointInRing(t,e.getCoordinates()))return!1;for(var r=this._holes.iterator();r.hasNext();){if(r.next().containsPoint(t))return!1}return!0},kh.prototype.addHole=function(t){this._holes.add(t)},kh.prototype.isShell=function(){return null===this._shell},kh.prototype.getLabel=function(){return this._label},kh.prototype.getEdges=function(){return this._edges},kh.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},kh.prototype.getShell=function(){return this._shell},kh.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[0],r=arguments[1],n=e.getLocation(r,Ph.RIGHT);if(n===pl.NONE)return null;if(this._label.getLocation(r)===pl.NONE)return this._label.setLocation(r,n),null}},kh.prototype.setShell=function(t){this._shell=t,null!==t&&t.addHole(this)},kh.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),r=0;r<this._holes.size();r++)e[r]=this._holes.get(r).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},kh.prototype.interfaces_=function(){return[]},kh.prototype.getClass=function(){return kh};var jh=function(t){function e(){var e=arguments[0],r=arguments[1];t.call(this,e,r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},e.prototype.getNext=function(t){return t.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(kh),Gh=function(t){function e(){var e=arguments[0],r=arguments[1];t.call(this,e,r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildMinimalRings=function(){var t=new cc,e=this._startDe;do{if(null===e.getMinEdgeRing()){var r=new jh(e,this._geometryFactory);t.add(r)}e=e.getNext()}while(e!==this._startDe);return t},e.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)},e.prototype.getNext=function(t){return t.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(kh),Bh=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._label=t}};Bh.prototype.setVisited=function(t){this._isVisited=t},Bh.prototype.setInResult=function(t){this._isInResult=t},Bh.prototype.isCovered=function(){return this._isCovered},Bh.prototype.isCoveredSet=function(){return this._isCoveredSet},Bh.prototype.setLabel=function(t){this._label=t},Bh.prototype.getLabel=function(){return this._label},Bh.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},Bh.prototype.updateIM=function(t){Bl.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},Bh.prototype.isInResult=function(){return this._isInResult},Bh.prototype.isVisited=function(){return this._isVisited},Bh.prototype.interfaces_=function(){return[]},Bh.prototype.getClass=function(){return Bh};var Uh=function(t){function e(){t.call(this),this._coord=null,this._edges=null;var e=arguments[0],r=arguments[1];this._coord=e,this._edges=r,this._label=new Dh(0,pl.NONE)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();){if(t.next().getEdge().isInResult())return!0}return!1},e.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(t){t.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(t){},e.prototype.computeMergedLocation=function(t,e){var r=pl.NONE;if(r=this._label.getLocation(e),!t.isNull(e)){var n=t.getLocation(e);r!==pl.BOUNDARY&&(r=n)}return r},e.prototype.setLabel=function(){if(2!==arguments.length)return t.prototype.setLabel.apply(this,arguments);var e=arguments[0],r=arguments[1];null===this._label?this._label=new Dh(e,r):this._label.setLocation(e,r)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){var t=this;if(arguments[0]instanceof e){var r=arguments[0];this.mergeLabel(r._label)}else if(arguments[0]instanceof Dh)for(var n=arguments[0],i=0;i<2;i++){var o=t.computeMergedLocation(n,i),s=t._label.getLocation(i);s===pl.NONE&&t._label.setLocation(i,o)}},e.prototype.add=function(t){this._edges.insert(t),t.setNode(this)},e.prototype.setLabelBoundary=function(t){if(null===this._label)return null;var e=pl.NONE;null!==this._label&&(e=this._label.getLocation(t));var r=null;switch(e){case pl.BOUNDARY:r=pl.INTERIOR;break;case pl.INTERIOR:default:r=pl.BOUNDARY}this._label.setLocation(t,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Bh),qh=function(){this.nodeMap=new Mc,this.nodeFact=null;var t=arguments[0];this.nodeFact=t};qh.prototype.find=function(t){return this.nodeMap.get(t)},qh.prototype.addNode=function(){if(arguments[0]instanceof ll){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof Uh){var r=arguments[0],n=this.nodeMap.get(r.getCoordinate());return null===n?(this.nodeMap.put(r.getCoordinate(),r),r):(n.mergeLabel(r),n)}},qh.prototype.print=function(t){for(var e=this.iterator();e.hasNext();){e.next().print(t)}},qh.prototype.iterator=function(){return this.nodeMap.values().iterator()},qh.prototype.values=function(){return this.nodeMap.values()},qh.prototype.getBoundaryNodes=function(t){for(var e=new cc,r=this.iterator();r.hasNext();){var n=r.next();n.getLabel().getLocation(t)===pl.BOUNDARY&&e.add(n)}return e},qh.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},qh.prototype.interfaces_=function(){return[]},qh.prototype.getClass=function(){return qh};var zh=function(){},Vh={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};zh.prototype.interfaces_=function(){return[]},zh.prototype.getClass=function(){return zh},zh.isNorthern=function(t){return t===zh.NE||t===zh.NW},zh.isOpposite=function(t,e){return t!==e&&2===(t-e+4)%4},zh.commonHalfPlane=function(t,e){if(t===e)return t;if(2===(t-e+4)%4)return-1;var r=t<e?t:e;return 0===r&&3===(t>e?t:e)?3:r},zh.isInHalfPlane=function(t,e){return e===zh.SE?t===zh.SE||t===zh.SW:t===e||t===e+1},zh.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new rl("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?zh.NE:zh.SE:e>=0?zh.NW:zh.SW}if(arguments[0]instanceof ll&&arguments[1]instanceof ll){var r=arguments[0],n=arguments[1];if(n.x===r.x&&n.y===r.y)throw new rl("Cannot compute the quadrant for two identical points "+r);return n.x>=r.x?n.y>=r.y?zh.NE:zh.SE:n.y>=r.y?zh.NW:zh.SW}},Vh.NE.get=function(){return 0},Vh.NW.get=function(){return 1},Vh.SW.get=function(){return 2},Vh.SE.get=function(){return 3},Object.defineProperties(zh,Vh);var Wh=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0];this._edge=t}else if(3===arguments.length){var e=arguments[0],r=arguments[1],n=arguments[2],i=null;this._edge=e,this.init(r,n),this._label=i}else if(4===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3];this._edge=o,this.init(s,a),this._label=u}};Wh.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:Hl.computeOrientation(t._p0,t._p1,this._p1)},Wh.prototype.getDy=function(){return this._dy},Wh.prototype.getCoordinate=function(){return this._p0},Wh.prototype.setNode=function(t){this._node=t},Wh.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),r=this.getClass().getName(),n=r.lastIndexOf("."),i=r.substring(n+1);t.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},Wh.prototype.compareTo=function(t){var e=t;return this.compareDirection(e)},Wh.prototype.getDirectedCoordinate=function(){return this._p1},Wh.prototype.getDx=function(){return this._dx},Wh.prototype.getLabel=function(){return this._label},Wh.prototype.getEdge=function(){return this._edge},Wh.prototype.getQuadrant=function(){return this._quadrant},Wh.prototype.getNode=function(){return this._node},Wh.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),r=e.lastIndexOf(".");return"  "+e.substring(r+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},Wh.prototype.computeLabel=function(t){},Wh.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=zh.quadrant(this._dx,this._dy),Bl.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},Wh.prototype.interfaces_=function(){return[ol]},Wh.prototype.getClass=function(){return Wh};var Hh=function(t){function e(){var e=arguments[0],r=arguments[1];if(t.call(this,e),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=r,r)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var n=e.getNumPoints()-1;this.init(e.getCoordinate(n),e.getCoordinate(n-1))}this.computeDirectedLabel()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(t){return this._depth[t]},e.prototype.setVisited=function(t){this._isVisited=t},e.prototype.computeDirectedLabel=function(){this._label=new Dh(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new Oh("assigned depths do not match",this.getCoordinate());this._depth[t]=e},e.prototype.isInteriorAreaEdge=function(){for(var t=this,e=!0,r=0;r<2;r++)t._label.isArea(r)&&t._label.getLocation(r,Ph.LEFT)===pl.INTERIOR&&t._label.getLocation(r,Ph.RIGHT)===pl.INTERIOR||(e=!1);return e},e.prototype.setNextMin=function(t){this._nextMin=t},e.prototype.print=function(e){t.prototype.print.call(this,e),e.print(" "+this._depth[Ph.LEFT]+"/"+this._depth[Ph.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")},e.prototype.setMinEdgeRing=function(t){this._minEdgeRing=t},e.prototype.isLineEdge=function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,pl.EXTERIOR),r=!this._label.isArea(1)||this._label.allPositionsEqual(1,pl.EXTERIOR);return t&&e&&r},e.prototype.setEdgeRing=function(t){this._edgeRing=t},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t},e.prototype.setInResult=function(t){this._isInResult=t},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)},e.prototype.setSym=function(t){this._sym=t},e.prototype.setVisitedEdge=function(t){this.setVisited(t),this._sym.setVisited(t)},e.prototype.setEdgeDepths=function(t,e){var r=this.getEdge().getDepthDelta();this._isForward||(r=-r);var n=1;t===Ph.LEFT&&(n=-1);var i=Ph.opposite(t),o=e+r*n;this.setDepth(t,e),this.setDepth(i,o)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(t){this._next=t},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(t,e){return t===pl.EXTERIOR&&e===pl.INTERIOR?1:t===pl.INTERIOR&&e===pl.EXTERIOR?-1:0},e}(Wh),Xh=function(){};Xh.prototype.createNode=function(t){return new Uh(t,null)},Xh.prototype.interfaces_=function(){return[]},Xh.prototype.getClass=function(){return Xh};var Zh=function(){if(this._edges=new cc,this._nodes=null,this._edgeEndList=new cc,0===arguments.length)this._nodes=new qh(new Xh);else if(1===arguments.length){var t=arguments[0];this._nodes=new qh(t)}};Zh.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var r=this._edges.get(e);r.print(t),r.eiList.print(t)}},Zh.prototype.find=function(t){return this._nodes.find(t)},Zh.prototype.addNode=function(){if(arguments[0]instanceof Uh){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof ll){var e=arguments[0];return this._nodes.addNode(e)}},Zh.prototype.getNodeIterator=function(){return this._nodes.iterator()},Zh.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();){t.next().getEdges().linkResultDirectedEdges()}},Zh.prototype.debugPrintln=function(t){Ll.out.println(t)},Zh.prototype.isBoundaryNode=function(t,e){var r=this._nodes.find(e);if(null===r)return!1;var n=r.getLabel();return null!==n&&n.getLocation(t)===pl.BOUNDARY},Zh.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();){t.next().getEdges().linkAllDirectedEdges()}},Zh.prototype.matchInSameDirection=function(t,e,r,n){return!!t.equals(r)&&(Hl.computeOrientation(t,e,n)===Hl.COLLINEAR&&zh.quadrant(t,e)===zh.quadrant(r,n))},Zh.prototype.getEdgeEnds=function(){return this._edgeEndList},Zh.prototype.debugPrint=function(t){Ll.out.print(t)},Zh.prototype.getEdgeIterator=function(){return this._edges.iterator()},Zh.prototype.findEdgeInSameDirection=function(t,e){for(var r=this,n=0;n<this._edges.size();n++){var i=r._edges.get(n),o=i.getCoordinates();if(r.matchInSameDirection(t,e,o[0],o[1]))return i;if(r.matchInSameDirection(t,e,o[o.length-1],o[o.length-2]))return i}return null},Zh.prototype.insertEdge=function(t){this._edges.add(t)},Zh.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var r=e.next();if(r.getEdge()===t)return r}return null},Zh.prototype.addEdges=function(t){for(var e=this,r=t.iterator();r.hasNext();){var n=r.next();e._edges.add(n);var i=new Hh(n,!0),o=new Hh(n,!1);i.setSym(o),o.setSym(i),e.add(i),e.add(o)}},Zh.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},Zh.prototype.getNodes=function(){return this._nodes.values()},Zh.prototype.findEdge=function(t,e){for(var r=0;r<this._edges.size();r++){var n=this._edges.get(r),i=n.getCoordinates();if(t.equals(i[0])&&e.equals(i[1]))return n}return null},Zh.prototype.interfaces_=function(){return[]},Zh.prototype.getClass=function(){return Zh},Zh.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();){e.next().getEdges().linkResultDirectedEdges()}};var Yh=function(){this._geometryFactory=null,this._shellList=new cc;var t=arguments[0];this._geometryFactory=t};Yh.prototype.sortShellsAndHoles=function(t,e,r){for(var n=t.iterator();n.hasNext();){var i=n.next();i.isHole()?r.add(i):e.add(i)}},Yh.prototype.computePolygons=function(t){for(var e=new cc,r=t.iterator();r.hasNext();){var n=r.next().toPolygon(this._geometryFactory);e.add(n)}return e},Yh.prototype.placeFreeHoles=function(t,e){for(var r=e.iterator();r.hasNext();){var n=r.next();if(null===n.getShell()){var i=this.findEdgeRingContaining(n,t);if(null===i)throw new Oh("unable to assign hole to a shell",n.getCoordinate(0));n.setShell(i)}}},Yh.prototype.buildMinimalEdgeRings=function(t,e,r){for(var n=new cc,i=t.iterator();i.hasNext();){var o=i.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var s=o.buildMinimalRings(),a=this.findShell(s);null!==a?(this.placePolygonHoles(a,s),e.add(a)):r.addAll(s)}else n.add(o)}return n},Yh.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();){if(e.next().containsPoint(t))return!0}return!1},Yh.prototype.buildMaximalEdgeRings=function(t){for(var e=new cc,r=t.iterator();r.hasNext();){var n=r.next();if(n.isInResult()&&n.getLabel().isArea()&&null===n.getEdgeRing()){var i=new Gh(n,this._geometryFactory);e.add(i),i.setInResult()}}return e},Yh.prototype.placePolygonHoles=function(t,e){for(var r=e.iterator();r.hasNext();){var n=r.next();n.isHole()&&n.setShell(t)}},Yh.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},Yh.prototype.findEdgeRingContaining=function(t,e){for(var r=t.getLinearRing(),n=r.getEnvelopeInternal(),i=r.getCoordinateN(0),o=null,s=null,a=e.iterator();a.hasNext();){var u=a.next(),l=u.getLinearRing(),c=l.getEnvelopeInternal();null!==o&&(s=o.getLinearRing().getEnvelopeInternal());var h=!1;c.contains(n)&&Hl.isPointInRing(i,l.getCoordinates())&&(h=!0),h&&(null===o||s.contains(c))&&(o=u)}return o},Yh.prototype.findShell=function(t){for(var e=0,r=null,n=t.iterator();n.hasNext();){var i=n.next();i.isHole()||(r=i,e++)}return Bl.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),r},Yh.prototype.add=function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],r=arguments[1];Zh.linkResultDirectedEdges(r);var n=this.buildMaximalEdgeRings(e),i=new cc,o=this.buildMinimalEdgeRings(n,this._shellList,i);this.sortShellsAndHoles(o,this._shellList,i),this.placeFreeHoles(this._shellList,i)}},Yh.prototype.interfaces_=function(){return[]},Yh.prototype.getClass=function(){return Yh};var Jh=function(){};Jh.prototype.getBounds=function(){},Jh.prototype.interfaces_=function(){return[]},Jh.prototype.getClass=function(){return Jh};var Qh=function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e};Qh.prototype.getItem=function(){return this._item},Qh.prototype.getBounds=function(){return this._bounds},Qh.prototype.interfaces_=function(){return[Jh,ul]},Qh.prototype.getClass=function(){return Qh};var Kh=function(){this._size=null,this._items=null,this._size=0,this._items=new cc,this._items.add(null)};Kh.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},Kh.prototype.size=function(){return this._size},Kh.prototype.reorder=function(t){for(var e=this,r=null,n=this._items.get(t);2*t<=this._size&&((r=2*t)!==e._size&&e._items.get(r+1).compareTo(e._items.get(r))<0&&r++,e._items.get(r).compareTo(n)<0);t=r)e._items.set(t,e._items.get(r));this._items.set(t,n)},Kh.prototype.clear=function(){this._size=0,this._items.clear()},Kh.prototype.isEmpty=function(){return 0===this._size},Kh.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},Kh.prototype.interfaces_=function(){return[]},Kh.prototype.getClass=function(){return Kh};var $h=function(){};$h.prototype.visitItem=function(t){},$h.prototype.interfaces_=function(){return[]},$h.prototype.getClass=function(){return $h};var tf=function(){};tf.prototype.insert=function(t,e){},tf.prototype.remove=function(t,e){},tf.prototype.query=function(){},tf.prototype.interfaces_=function(){return[]},tf.prototype.getClass=function(){return tf};var ef=function(){if(this._childBoundables=new cc,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._level=t}},rf={serialVersionUID:{configurable:!0}};ef.prototype.getLevel=function(){return this._level},ef.prototype.size=function(){return this._childBoundables.size()},ef.prototype.getChildBoundables=function(){return this._childBoundables},ef.prototype.addChildBoundable=function(t){Bl.isTrue(null===this._bounds),this._childBoundables.add(t)},ef.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},ef.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},ef.prototype.interfaces_=function(){return[Jh,ul]},ef.prototype.getClass=function(){return ef},rf.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(ef,rf);var nf=function(){};nf.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},nf.min=function(t){return nf.sort(t),t.get(0)},nf.sort=function(t,e){var r=t.toArray();e?Ac.sort(r,e):Ac.sort(r);for(var n=t.iterator(),i=0,o=r.length;i<o;i++)n.next(),n.set(r[i])},nf.singletonList=function(t){var e=new cc;return e.add(t),e};var of=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],r=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=r,this._distance=this.distance()};of.prototype.expandToQueue=function(t,e){var r=of.isComposite(this._boundable1),n=of.isComposite(this._boundable2);if(r&&n)return of.area(this._boundable1)>of.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null);if(r)return this.expand(this._boundable1,this._boundable2,t,e),null;if(n)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new rl("neither boundable is composite")},of.prototype.isLeaves=function(){return!(of.isComposite(this._boundable1)||of.isComposite(this._boundable2))},of.prototype.compareTo=function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},of.prototype.expand=function(t,e,r,n){for(var i=t.getChildBoundables().iterator();i.hasNext();){var o=i.next(),s=new of(o,e,this._itemDistance);s.getDistance()<n&&r.add(s)}},of.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},of.prototype.getDistance=function(){return this._distance},of.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},of.prototype.interfaces_=function(){return[ol]},of.prototype.getClass=function(){return of},of.area=function(t){return t.getBounds().getArea()},of.isComposite=function(t){return t instanceof ef};var sf=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new cc,this._nodeCapacity=null,0===arguments.length){var e=t.DEFAULT_NODE_CAPACITY;this._nodeCapacity=e}else if(1===arguments.length){var r=arguments[0];Bl.isTrue(r>1,"Node capacity must be greater than 1"),this._nodeCapacity=r}},af={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};sf.prototype.getNodeCapacity=function(){return this._nodeCapacity},sf.prototype.lastNode=function(t){return t.get(t.size()-1)},sf.prototype.size=function(){var t=this;if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var e=arguments[0],r=0,n=e.getChildBoundables().iterator();n.hasNext();){var i=n.next();i instanceof ef?r+=t.size(i):i instanceof Qh&&(r+=1)}return r}},sf.prototype.removeItem=function(t,e){for(var r=null,n=t.getChildBoundables().iterator();n.hasNext();){var i=n.next();i instanceof Qh&&i.getItem()===e&&(r=i)}return null!==r&&(t.getChildBoundables().remove(r),!0)},sf.prototype.itemsTree=function(){var t=this;if(0===arguments.length){this.build();var e=this.itemsTree(this._root);return null===e?new cc:e}if(1===arguments.length){for(var r=arguments[0],n=new cc,i=r.getChildBoundables().iterator();i.hasNext();){var o=i.next();if(o instanceof ef){var s=t.itemsTree(o);null!==s&&n.add(s)}else o instanceof Qh?n.add(o.getItem()):Bl.shouldNeverReachHere()}return n.size()<=0?null:n}},sf.prototype.insert=function(t,e){Bl.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Qh(t,e))},sf.prototype.boundablesAtLevel=function(){var t=this;if(1===arguments.length){var e=arguments[0],r=new cc;return this.boundablesAtLevel(e,this._root,r),r}if(3===arguments.length){var n=arguments[0],i=arguments[1],o=arguments[2];if(Bl.isTrue(n>-2),i.getLevel()===n)return o.add(i),null;for(var s=i.getChildBoundables().iterator();s.hasNext();){var a=s.next();a instanceof ef?t.boundablesAtLevel(n,a,o):(Bl.isTrue(a instanceof Qh),-1===n&&o.add(a))}return null}},sf.prototype.query=function(){var t=this;if(1===arguments.length){var e=arguments[0];this.build();var r=new cc;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),e)&&this.query(e,this._root,r),r}if(2===arguments.length){var n=arguments[0],i=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.query(n,this._root,i)}else if(3===arguments.length)if(yl(arguments[2],$h)&&arguments[0]instanceof Object&&arguments[1]instanceof ef)for(var o=arguments[0],s=arguments[1],a=arguments[2],u=s.getChildBoundables(),l=0;l<u.size();l++){var c=u.get(l);t.getIntersectsOp().intersects(c.getBounds(),o)&&(c instanceof ef?t.query(o,c,a):c instanceof Qh?a.visitItem(c.getItem()):Bl.shouldNeverReachHere())}else if(yl(arguments[2],uc)&&arguments[0]instanceof Object&&arguments[1]instanceof ef)for(var h=arguments[0],f=arguments[1],p=arguments[2],d=f.getChildBoundables(),y=0;y<d.size();y++){var v=d.get(y);t.getIntersectsOp().intersects(v.getBounds(),h)&&(v instanceof ef?t.query(h,v,p):v instanceof Qh?p.add(v.getItem()):Bl.shouldNeverReachHere())}},sf.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},sf.prototype.getRoot=function(){return this.build(),this._root},sf.prototype.remove=function(){var t=this;if(2===arguments.length){var e=arguments[0],r=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),e)&&this.remove(e,this._root,r)}if(3===arguments.length){var n=arguments[0],i=arguments[1],o=arguments[2],s=this.removeItem(i,o);if(s)return!0;for(var a=null,u=i.getChildBoundables().iterator();u.hasNext();){var l=u.next();if(t.getIntersectsOp().intersects(l.getBounds(),n)&&(l instanceof ef&&(s=t.remove(n,l,o)))){a=l;break}}return null!==a&&a.getChildBoundables().isEmpty()&&i.getChildBoundables().remove(a),s}},sf.prototype.createHigherLevels=function(t,e){Bl.isTrue(!t.isEmpty());var r=this.createParentBoundables(t,e+1);return 1===r.size()?r.get(0):this.createHigherLevels(r,e+1)},sf.prototype.depth=function(){var t=this;if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var e=arguments[0],r=0,n=e.getChildBoundables().iterator();n.hasNext();){var i=n.next();if(i instanceof ef){var o=t.depth(i);o>r&&(r=o)}}return r+1}},sf.prototype.createParentBoundables=function(t,e){var r=this;Bl.isTrue(!t.isEmpty());var n=new cc;n.add(this.createNode(e));var i=new cc(t);nf.sort(i,this.getComparator());for(var o=i.iterator();o.hasNext();){var s=o.next();r.lastNode(n).getChildBoundables().size()===r.getNodeCapacity()&&n.add(r.createNode(e)),r.lastNode(n).addChildBoundable(s)}return n},sf.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},sf.prototype.interfaces_=function(){return[ul]},sf.prototype.getClass=function(){return sf},sf.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},af.IntersectsOp.get=function(){return uf},af.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},af.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(sf,af);var uf=function(){},lf=function(){};lf.prototype.distance=function(t,e){},lf.prototype.interfaces_=function(){return[]},lf.prototype.getClass=function(){return lf};var cf=function(t){function e(r){r=r||e.DEFAULT_NODE_CAPACITY,t.call(this,r)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return e.prototype.createParentBoundablesFromVerticalSlices=function(t,e){Bl.isTrue(t.length>0);for(var r=new cc,n=0;n<t.length;n++)r.addAll(this.createParentBoundablesFromVerticalSlice(t[n],e));return r},e.prototype.createNode=function(t){return new hf(t)},e.prototype.size=function(){return 0===arguments.length?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},e.prototype.insert=function(){if(2!==arguments.length)return t.prototype.insert.apply(this,arguments);var e=arguments[0],r=arguments[1];if(e.isNull())return null;t.prototype.insert.call(this,e,r)},e.prototype.getIntersectsOp=function(){return e.intersectsOp},e.prototype.verticalSlices=function(t,e){for(var r=Math.trunc(Math.ceil(t.size()/e)),n=new Array(e).fill(null),i=t.iterator(),o=0;o<e;o++){n[o]=new cc;for(var s=0;i.hasNext()&&s<r;){var a=i.next();n[o].add(a),s++}}return n},e.prototype.query=function(){if(1===arguments.length){var e=arguments[0];return t.prototype.query.call(this,e)}if(2===arguments.length){var r=arguments[0],n=arguments[1];t.prototype.query.call(this,r,n)}else if(3===arguments.length)if(yl(arguments[2],$h)&&arguments[0]instanceof Object&&arguments[1]instanceof ef){var i=arguments[0],o=arguments[1],s=arguments[2];t.prototype.query.call(this,i,o,s)}else if(yl(arguments[2],uc)&&arguments[0]instanceof Object&&arguments[1]instanceof ef){var a=arguments[0],u=arguments[1],l=arguments[2];t.prototype.query.call(this,a,u,l)}},e.prototype.getComparator=function(){return e.yComparator},e.prototype.createParentBoundablesFromVerticalSlice=function(e,r){return t.prototype.createParentBoundables.call(this,e,r)},e.prototype.remove=function(){if(2===arguments.length){var e=arguments[0],r=arguments[1];return t.prototype.remove.call(this,e,r)}return t.prototype.remove.apply(this,arguments)},e.prototype.depth=function(){return 0===arguments.length?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},e.prototype.createParentBoundables=function(t,r){Bl.isTrue(!t.isEmpty());var n=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),i=new cc(t);nf.sort(i,e.xComparator);var o=this.verticalSlices(i,Math.trunc(Math.ceil(Math.sqrt(n))));return this.createParentBoundablesFromVerticalSlices(o,r)},e.prototype.nearestNeighbour=function(){if(1===arguments.length){if(yl(arguments[0],lf)){var t=arguments[0],r=new of(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(r)}if(arguments[0]instanceof of){var n=arguments[0];return this.nearestNeighbour(n,nl.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof e&&yl(arguments[1],lf)){var i=arguments[0],o=arguments[1],s=new of(this.getRoot(),i.getRoot(),o);return this.nearestNeighbour(s)}if(arguments[0]instanceof of&&"number"==typeof arguments[1]){var a=arguments[0],u=arguments[1],l=u,c=null,h=new Kh;for(h.add(a);!h.isEmpty()&&l>0;){var f=h.poll(),p=f.getDistance();if(p>=l)break;f.isLeaves()?(l=p,c=f):f.expandToQueue(h,l)}return[c.getBoundable(0).getItem(),c.getBoundable(1).getItem()]}}else if(3===arguments.length){var d=arguments[0],y=arguments[1],v=arguments[2],g=new Qh(d,y),m=new of(this.getRoot(),g,v);return this.nearestNeighbour(m)[0]}},e.prototype.interfaces_=function(){return[tf,ul]},e.prototype.getClass=function(){return e},e.centreX=function(t){return e.avg(t.getMinX(),t.getMaxX())},e.avg=function(t,e){return(t+e)/2},e.centreY=function(t){return e.avg(t.getMinY(),t.getMaxY())},r.STRtreeNode.get=function(){return hf},r.serialVersionUID.get=function(){return 0x39920f7d5f261e0},r.xComparator.get=function(){return{interfaces_:function(){return[al]},compare:function(r,n){return t.compareDoubles(e.centreX(r.getBounds()),e.centreX(n.getBounds()))}}},r.yComparator.get=function(){return{interfaces_:function(){return[al]},compare:function(r,n){return t.compareDoubles(e.centreY(r.getBounds()),e.centreY(n.getBounds()))}}},r.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(t,e){return t.intersects(e)}}},r.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(e,r),e}(sf),hf=function(t){function e(){var e=arguments[0];t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.computeBounds=function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var r=e.next();null===t?t=new Tl(r.getBounds()):t.expandToInclude(r.getBounds())}return t},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ef),ff=function(){};ff.prototype.interfaces_=function(){return[]},ff.prototype.getClass=function(){return ff},ff.relativeSign=function(t,e){return t<e?-1:t>e?1:0},ff.compare=function(t,e,r){if(e.equals2D(r))return 0;var n=ff.relativeSign(e.x,r.x),i=ff.relativeSign(e.y,r.y);switch(t){case 0:return ff.compareValue(n,i);case 1:return ff.compareValue(i,n);case 2:return ff.compareValue(i,-n);case 3:return ff.compareValue(-n,i);case 4:return ff.compareValue(-n,-i);case 5:return ff.compareValue(-i,-n);case 6:return ff.compareValue(-i,n);case 7:return ff.compareValue(n,-i)}return Bl.shouldNeverReachHere("invalid octant value"),0},ff.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0};var pf=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3];this._segString=t,this.coord=new ll(e),this.segmentIndex=r,this._segmentOctant=n,this._isInterior=!e.equals2D(t.getCoordinate(r))};pf.prototype.getCoordinate=function(){return this.coord},pf.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},pf.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:ff.compare(this._segmentOctant,this.coord,e.coord)},pf.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},pf.prototype.isInterior=function(){return this._isInterior},pf.prototype.interfaces_=function(){return[ol]},pf.prototype.getClass=function(){return pf};var df=function(){this._nodeMap=new Mc,this._edge=null;var t=arguments[0];this._edge=t};df.prototype.getSplitCoordinates=function(){var t=new fc;this.addEndpoints();for(var e=this.iterator(),r=e.next();e.hasNext();){var n=e.next();this.addEdgeCoordinates(r,n,t),r=n}return t.toCoordinateArray()},df.prototype.addCollapsedNodes=function(){var t=new cc;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var r=e.next().intValue();this.add(this._edge.getCoordinate(r),r)}},df.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();){e.next().print(t)}},df.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var r=this._edge.getCoordinate(e),n=this._edge.getCoordinate(e+2);r.equals2D(n)&&t.add(new _l(e+1))}},df.prototype.addEdgeCoordinates=function(t,e,r){var n=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(n);r.add(new ll(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)r.add(this._edge.getCoordinate(o));i&&r.add(new ll(e.coord))},df.prototype.iterator=function(){return this._nodeMap.values().iterator()},df.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),r=e.next();e.hasNext();){var n=e.next(),i=this.createSplitEdge(r,n);t.add(i),r=n}},df.prototype.findCollapseIndex=function(t,e,r){if(!t.coord.equals2D(e.coord))return!1;var n=e.segmentIndex-t.segmentIndex;return e.isInterior()||n--,1===n&&(r[0]=t.segmentIndex+1,!0)},df.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),r=this.iterator(),n=r.next();r.hasNext();){var i=r.next();this.findCollapseIndex(n,i,e)&&t.add(new _l(e[0])),n=i}},df.prototype.getEdge=function(){return this._edge},df.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},df.prototype.createSplitEdge=function(t,e){var r=e.segmentIndex-t.segmentIndex+2,n=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(n);i||r--;var o=new Array(r).fill(null),s=0;o[s++]=new ll(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this._edge.getCoordinate(a);return i&&(o[s]=new ll(e.coord)),new mf(o,this._edge.getData())},df.prototype.add=function(t,e){var r=new pf(this._edge,t,e,this._edge.getSegmentOctant(e)),n=this._nodeMap.get(r);return null!==n?(Bl.isTrue(n.coord.equals2D(t),"Found equal nodes with different coordinates"),n):(this._nodeMap.put(r,r),r)},df.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),r=t.get(0).getCoordinate(0);if(!r.equals2D(e[0]))throw new jl("bad split edge start point at "+r);var n=t.get(t.size()-1).getCoordinates(),i=n[n.length-1];if(!i.equals2D(e[e.length-1]))throw new jl("bad split edge end point at "+i)},df.prototype.interfaces_=function(){return[]},df.prototype.getClass=function(){return df};var yf=function(){};yf.prototype.interfaces_=function(){return[]},yf.prototype.getClass=function(){return yf},yf.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new rl("Cannot compute the octant for point ( "+t+", "+e+" )");var r=Math.abs(t),n=Math.abs(e);return t>=0?e>=0?r>=n?0:1:r>=n?7:6:e>=0?r>=n?3:2:r>=n?4:5}if(arguments[0]instanceof ll&&arguments[1]instanceof ll){var i=arguments[0],o=arguments[1],s=o.x-i.x,a=o.y-i.y;if(0===s&&0===a)throw new rl("Cannot compute the octant for two identical points "+i);return yf.octant(s,a)}};var vf=function(){};vf.prototype.getCoordinates=function(){},vf.prototype.size=function(){},vf.prototype.getCoordinate=function(t){},vf.prototype.isClosed=function(){},vf.prototype.setData=function(t){},vf.prototype.getData=function(){},vf.prototype.interfaces_=function(){return[]},vf.prototype.getClass=function(){return vf};var gf=function(){};gf.prototype.addIntersection=function(t,e){},gf.prototype.interfaces_=function(){return[vf]},gf.prototype.getClass=function(){return gf};var mf=function(){this._nodeList=new df(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};mf.prototype.getCoordinates=function(){return this._pts},mf.prototype.size=function(){return this._pts.length},mf.prototype.getCoordinate=function(t){return this._pts[t]},mf.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},mf.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},mf.prototype.setData=function(t){this._data=t},mf.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:yf.octant(t,e)},mf.prototype.getData=function(){return this._data},mf.prototype.addIntersection=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var r=arguments[0],n=arguments[1],i=arguments[3],o=new ll(r.getIntersection(i));this.addIntersection(o,n)}},mf.prototype.toString=function(){return kl.toLineString(new ch(this._pts))},mf.prototype.getNodeList=function(){return this._nodeList},mf.prototype.addIntersectionNode=function(t,e){var r=e,n=r+1;if(n<this._pts.length){var i=this._pts[n];t.equals2D(i)&&(r=n)}return this._nodeList.add(t,r)},mf.prototype.addIntersections=function(t,e,r){for(var n=0;n<t.getIntersectionNum();n++)this.addIntersection(t,e,r,n)},mf.prototype.interfaces_=function(){return[gf]},mf.prototype.getClass=function(){return mf},mf.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new cc;return mf.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var r=arguments[0],n=arguments[1],i=r.iterator();i.hasNext();){var o=i.next();o.getNodeList().addSplitEdges(n)}};var _f=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new ll,this.p1=new ll;else if(1===arguments.length){var t=arguments[0];this.p0=new ll(t.p0),this.p1=new ll(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var e=arguments[0],r=arguments[1],n=arguments[2],i=arguments[3];this.p0=new ll(e,r),this.p1=new ll(n,i)}},bf={serialVersionUID:{configurable:!0}};_f.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},_f.prototype.orientationIndex=function(){if(arguments[0]instanceof _f){var t=arguments[0],e=Hl.orientationIndex(this.p0,this.p1,t.p0),r=Hl.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&r>=0||e<=0&&r<=0?Math.max(e,r):0}if(arguments[0]instanceof ll){var n=arguments[0];return Hl.orientationIndex(this.p0,this.p1,n)}},_f.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},_f.prototype.isVertical=function(){return this.p0.x===this.p1.x},_f.prototype.equals=function(t){if(!(t instanceof _f))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},_f.prototype.intersection=function(t){var e=new zl;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},_f.prototype.project=function(){if(arguments[0]instanceof ll){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new ll(t);var e=this.projectionFactor(t),r=new ll;return r.x=this.p0.x+e*(this.p1.x-this.p0.x),r.y=this.p0.y+e*(this.p1.y-this.p0.y),r}if(arguments[0]instanceof _f){var n=arguments[0],i=this.projectionFactor(n.p0),o=this.projectionFactor(n.p1);if(i>=1&&o>=1)return null;if(i<=0&&o<=0)return null;var s=this.project(n.p0);i<0&&(s=this.p0),i>1&&(s=this.p1);var a=this.project(n.p1);return o<0&&(a=this.p0),o>1&&(a=this.p1),new _f(s,a)}},_f.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},_f.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},_f.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},_f.prototype.distancePerpendicular=function(t){return Hl.distancePointLinePerpendicular(t,this.p0,this.p1)},_f.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},_f.prototype.midPoint=function(){return _f.midPoint(this.p0,this.p1)},_f.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,r=this.p1.y-this.p0.y,n=e*e+r*r;return n<=0?nl.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*r)/n},_f.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var r=new Array(2).fill(null),n=nl.MAX_VALUE,i=null,o=this.closestPoint(t.p0);n=o.distance(t.p0),r[0]=o,r[1]=t.p0;var s=this.closestPoint(t.p1);(i=s.distance(t.p1))<n&&(n=i,r[0]=s,r[1]=t.p1);var a=t.closestPoint(this.p0);(i=a.distance(this.p0))<n&&(n=i,r[0]=this.p0,r[1]=a);var u=t.closestPoint(this.p1);return(i=u.distance(this.p1))<n&&(n=i,r[0]=this.p1,r[1]=u),r},_f.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},_f.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},_f.prototype.getLength=function(){return this.p0.distance(this.p1)},_f.prototype.compareTo=function(t){var e=t,r=this.p0.compareTo(e.p0);return 0!==r?r:this.p1.compareTo(e.p1)},_f.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},_f.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},_f.prototype.lineIntersection=function(t){try{return Nl.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof Ml))throw t}return null},_f.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},_f.prototype.pointAlongOffset=function(t,e){var r=this.p0.x+t*(this.p1.x-this.p0.x),n=this.p0.y+t*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,s=Math.sqrt(i*i+o*o),a=0,u=0;if(0!==e){if(s<=0)throw new Error("Cannot compute offset from zero-length line segment");a=e*i/s,u=e*o/s}return new ll(r-u,n+a)},_f.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],r=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=r.x,this.p1.y=r.y}},_f.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||nl.isNaN(e))&&(e=1),e},_f.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},_f.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},_f.prototype.distance=function(){if(arguments[0]instanceof _f){var t=arguments[0];return Hl.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof ll){var e=arguments[0];return Hl.distancePointLine(e,this.p0,this.p1)}},_f.prototype.pointAlong=function(t){var e=new ll;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},_f.prototype.hashCode=function(){var t=nl.doubleToLongBits(this.p0.x);t^=31*nl.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),r=nl.doubleToLongBits(this.p1.x);return r^=31*nl.doubleToLongBits(this.p1.y),e^(Math.trunc(r)^Math.trunc(r>>32))},_f.prototype.interfaces_=function(){return[ol,ul]},_f.prototype.getClass=function(){return _f},_f.midPoint=function(t,e){return new ll((t.x+e.x)/2,(t.y+e.y)/2)},bf.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(_f,bf);var xf=function(){this.tempEnv1=new Tl,this.tempEnv2=new Tl,this._overlapSeg1=new _f,this._overlapSeg2=new _f};xf.prototype.overlap=function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3];t.getLineSegment(e,this._overlapSeg1),r.getLineSegment(n,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},xf.prototype.interfaces_=function(){return[]},xf.prototype.getClass=function(){return xf};var Sf=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3];this._pts=t,this._start=e,this._end=r,this._context=n};Sf.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},Sf.prototype.computeSelect=function(t,e,r,n){var i=this._pts[e],o=this._pts[r];if(n.tempEnv1.init(i,o),r-e==1)return n.select(this,e),null;if(!t.intersects(n.tempEnv1))return null;var s=Math.trunc((e+r)/2);e<s&&this.computeSelect(t,e,s,n),s<r&&this.computeSelect(t,s,r,n)},Sf.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,r=this._start;r<=this._end;r++)t[e++]=this._pts[r];return t},Sf.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},Sf.prototype.setId=function(t){this._id=t},Sf.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},Sf.prototype.getEnvelope=function(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end];this._env=new Tl(t,e)}return this._env},Sf.prototype.getEndIndex=function(){return this._end},Sf.prototype.getStartIndex=function(){return this._start},Sf.prototype.getContext=function(){return this._context},Sf.prototype.getId=function(){return this._id},Sf.prototype.computeOverlapsInternal=function(t,e,r,n,i,o){var s=this._pts[t],a=this._pts[e],u=r._pts[n],l=r._pts[i];if(e-t==1&&i-n==1)return o.overlap(this,t,r,n),null;if(o.tempEnv1.init(s,a),o.tempEnv2.init(u,l),!o.tempEnv1.intersects(o.tempEnv2))return null;var c=Math.trunc((t+e)/2),h=Math.trunc((n+i)/2);t<c&&(n<h&&this.computeOverlapsInternal(t,c,r,n,h,o),h<i&&this.computeOverlapsInternal(t,c,r,h,i,o)),c<e&&(n<h&&this.computeOverlapsInternal(c,e,r,n,h,o),h<i&&this.computeOverlapsInternal(c,e,r,h,i,o))},Sf.prototype.interfaces_=function(){return[]},Sf.prototype.getClass=function(){return Sf};var wf=function(){};wf.prototype.interfaces_=function(){return[]},wf.prototype.getClass=function(){return wf},wf.getChainStartIndices=function(t){var e=0,r=new cc;r.add(new _l(e));do{var n=wf.findChainEnd(t,e);r.add(new _l(n)),e=n}while(e<t.length-1);return wf.toIntArray(r)},wf.findChainEnd=function(t,e){for(var r=e;r<t.length-1&&t[r].equals2D(t[r+1]);)r++;if(r>=t.length-1)return t.length-1;for(var n=zh.quadrant(t[r],t[r+1]),i=e+1;i<t.length;){if(!t[i-1].equals2D(t[i]))if(zh.quadrant(t[i-1],t[i])!==n)break;i++}return i-1},wf.getChains=function(){if(1===arguments.length){var t=arguments[0];return wf.getChains(t,null)}if(2===arguments.length){for(var e=arguments[0],r=arguments[1],n=new cc,i=wf.getChainStartIndices(e),o=0;o<i.length-1;o++){var s=new Sf(e,i[o],i[o+1],r);n.add(s)}return n}},wf.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),r=0;r<e.length;r++)e[r]=t.get(r).intValue();return e};var Cf=function(){};Cf.prototype.computeNodes=function(t){},Cf.prototype.getNodedSubstrings=function(){},Cf.prototype.interfaces_=function(){return[]},Cf.prototype.getClass=function(){return Cf};var If=function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}};If.prototype.setSegmentIntersector=function(t){this._segInt=t},If.prototype.interfaces_=function(){return[Cf]},If.prototype.getClass=function(){return If};var Ef=function(t){function e(e){e?t.call(this,e):t.call(this),this._monoChains=new cc,this._index=new cf,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return mf.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(t){for(var e=this,r=wf.getChains(t.getCoordinates(),t).iterator();r.hasNext();){var n=r.next();n.setId(e._idCounter++),e._index.insert(n.getEnvelope(),n),e._monoChains.add(n)}},e.prototype.computeNodes=function(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var t=this,e=new Pf(this._segInt),r=this._monoChains.iterator();r.hasNext();)for(var n=r.next(),i=t._index.query(n.getEnvelope()).iterator();i.hasNext();){var o=i.next();if(o.getId()>n.getId()&&(n.computeOverlaps(o,e),t._nOverlaps++),t._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},r.SegmentOverlapAction.get=function(){return Pf},Object.defineProperties(e,r),e}(If),Pf=function(t){function e(){t.call(this),this._si=null;var e=arguments[0];this._si=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.overlap=function(){if(4!==arguments.length)return t.prototype.overlap.apply(this,arguments);var e=arguments[0],r=arguments[1],n=arguments[2],i=arguments[3],o=e.getContext(),s=n.getContext();this._si.processIntersections(o,r,s,i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(xf),Mf=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.setQuadrantSegments(e)}else if(2===arguments.length){var r=arguments[0],n=arguments[1];this.setQuadrantSegments(r),this.setEndCapStyle(n)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(o),this.setJoinStyle(s),this.setMitreLimit(a)}},Lf={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};Mf.prototype.getEndCapStyle=function(){return this._endCapStyle},Mf.prototype.isSingleSided=function(){return this._isSingleSided},Mf.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=Mf.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=Mf.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==Mf.JOIN_ROUND&&(this._quadrantSegments=Mf.DEFAULT_QUADRANT_SEGMENTS)},Mf.prototype.getJoinStyle=function(){return this._joinStyle},Mf.prototype.setJoinStyle=function(t){this._joinStyle=t},Mf.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},Mf.prototype.getSimplifyFactor=function(){return this._simplifyFactor},Mf.prototype.getQuadrantSegments=function(){return this._quadrantSegments},Mf.prototype.setEndCapStyle=function(t){this._endCapStyle=t},Mf.prototype.getMitreLimit=function(){return this._mitreLimit},Mf.prototype.setMitreLimit=function(t){this._mitreLimit=t},Mf.prototype.setSingleSided=function(t){this._isSingleSided=t},Mf.prototype.interfaces_=function(){return[]},Mf.prototype.getClass=function(){return Mf},Mf.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},Lf.CAP_ROUND.get=function(){return 1},Lf.CAP_FLAT.get=function(){return 2},Lf.CAP_SQUARE.get=function(){return 3},Lf.JOIN_ROUND.get=function(){return 1},Lf.JOIN_MITRE.get=function(){return 2},Lf.JOIN_BEVEL.get=function(){return 3},Lf.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},Lf.DEFAULT_MITRE_LIMIT.get=function(){return 5},Lf.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(Mf,Lf);var Nf=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=Hl.COUNTERCLOCKWISE,this._inputLine=t||null},Tf={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Nf.prototype.isDeletable=function(t,e,r,n){var i=this._inputLine[t],o=this._inputLine[e],s=this._inputLine[r];return!!this.isConcave(i,o,s)&&(!!this.isShallow(i,o,s,n)&&this.isShallowSampled(i,o,t,r,n))},Nf.prototype.deleteShallowConcavities=function(){for(var t=this,e=1,r=this.findNextNonDeletedIndex(e),n=this.findNextNonDeletedIndex(r),i=!1;n<this._inputLine.length;){var o=!1;t.isDeletable(e,r,n,t._distanceTol)&&(t._isDeleted[r]=Nf.DELETE,o=!0,i=!0),e=o?n:r,r=t.findNextNonDeletedIndex(e),n=t.findNextNonDeletedIndex(r)}return i},Nf.prototype.isShallowConcavity=function(t,e,r,n){return Hl.computeOrientation(t,e,r)===this._angleOrientation&&Hl.distancePointLine(e,t,r)<n},Nf.prototype.isShallowSampled=function(t,e,r,n,i){var o=Math.trunc((n-r)/Nf.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var s=r;s<n;s+=o)if(!this.isShallow(t,e,this._inputLine[s],i))return!1;return!0},Nf.prototype.isConcave=function(t,e,r){var n=Hl.computeOrientation(t,e,r)===this._angleOrientation;return n},Nf.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=Hl.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()},Nf.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===Nf.DELETE;)e++;return e},Nf.prototype.isShallow=function(t,e,r,n){return Hl.distancePointLine(e,t,r)<n},Nf.prototype.collapseLine=function(){for(var t=new fc,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==Nf.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},Nf.prototype.interfaces_=function(){return[]},Nf.prototype.getClass=function(){return Nf},Nf.simplify=function(t,e){return new Nf(t).simplify(e)},Tf.INIT.get=function(){return 0},Tf.DELETE.get=function(){return 1},Tf.KEEP.get=function(){return 1},Tf.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(Nf,Tf);var Of=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new cc},Af={COORDINATE_ARRAY_TYPE:{configurable:!0}};Of.prototype.getCoordinates=function(){return this._ptList.toArray(Of.COORDINATE_ARRAY_TYPE)},Of.prototype.setPrecisionModel=function(t){this._precisionModel=t},Of.prototype.addPt=function(t){var e=new ll(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},Of.prototype.revere=function(){},Of.prototype.addPts=function(t,e){if(e)for(var r=0;r<t.length;r++)this.addPt(t[r]);else for(var n=t.length-1;n>=0;n--)this.addPt(t[n])},Of.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},Of.prototype.toString=function(){return(new _h).createLineString(this.getCoordinates()).toString()},Of.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new ll(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},Of.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},Of.prototype.interfaces_=function(){return[]},Of.prototype.getClass=function(){return Of},Af.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(Of,Af);var Rf=function(){},Ff={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};Rf.prototype.interfaces_=function(){return[]},Rf.prototype.getClass=function(){return Rf},Rf.toDegrees=function(t){return 180*t/Math.PI},Rf.normalize=function(t){for(;t>Math.PI;)t-=Rf.PI_TIMES_2;for(;t<=-Math.PI;)t+=Rf.PI_TIMES_2;return t},Rf.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],r=arguments[1],n=r.x-e.x,i=r.y-e.y;return Math.atan2(i,n)}},Rf.isAcute=function(t,e,r){var n=t.x-e.x,i=t.y-e.y;return n*(r.x-e.x)+i*(r.y-e.y)>0},Rf.isObtuse=function(t,e,r){var n=t.x-e.x,i=t.y-e.y;return n*(r.x-e.x)+i*(r.y-e.y)<0},Rf.interiorAngle=function(t,e,r){var n=Rf.angle(e,t),i=Rf.angle(e,r);return Math.abs(i-n)},Rf.normalizePositive=function(t){if(t<0){for(;t<0;)t+=Rf.PI_TIMES_2;t>=Rf.PI_TIMES_2&&(t=0)}else{for(;t>=Rf.PI_TIMES_2;)t-=Rf.PI_TIMES_2;t<0&&(t=0)}return t},Rf.angleBetween=function(t,e,r){var n=Rf.angle(e,t),i=Rf.angle(e,r);return Rf.diff(n,i)},Rf.diff=function(t,e){var r=null;return(r=t<e?e-t:t-e)>Math.PI&&(r=2*Math.PI-r),r},Rf.toRadians=function(t){return t*Math.PI/180},Rf.getTurn=function(t,e){var r=Math.sin(e-t);return r>0?Rf.COUNTERCLOCKWISE:r<0?Rf.CLOCKWISE:Rf.NONE},Rf.angleBetweenOriented=function(t,e,r){var n=Rf.angle(e,t),i=Rf.angle(e,r)-n;return i<=-Math.PI?i+Rf.PI_TIMES_2:i>Math.PI?i-Rf.PI_TIMES_2:i},Ff.PI_TIMES_2.get=function(){return 2*Math.PI},Ff.PI_OVER_2.get=function(){return Math.PI/2},Ff.PI_OVER_4.get=function(){return Math.PI/4},Ff.COUNTERCLOCKWISE.get=function(){return Hl.COUNTERCLOCKWISE},Ff.CLOCKWISE.get=function(){return Hl.CLOCKWISE},Ff.NONE.get=function(){return Hl.COLLINEAR},Object.defineProperties(Rf,Ff);var Df=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new _f,this._seg1=new _f,this._offset0=new _f,this._offset1=new _f,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[0],r=arguments[1],n=arguments[2];this._precisionModel=e,this._bufParams=r,this._li=new zl,this._filletAngleQuantum=Math.PI/2/r.getQuadrantSegments(),r.getQuadrantSegments()>=8&&r.getJoinStyle()===Mf.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(n)},kf={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};Df.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var r=Hl.computeOrientation(this._s0,this._s1,this._s2),n=r===Hl.CLOCKWISE&&this._side===Ph.LEFT||r===Hl.COUNTERCLOCKWISE&&this._side===Ph.RIGHT;0===r?this.addCollinear(e):n?this.addOutsideTurn(r,e):this.addInsideTurn(r,e)},Df.prototype.addLineEndCap=function(t,e){var r=new _f(t,e),n=new _f;this.computeOffsetSegment(r,Ph.LEFT,this._distance,n);var i=new _f;this.computeOffsetSegment(r,Ph.RIGHT,this._distance,i);var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o);switch(this._bufParams.getEndCapStyle()){case Mf.CAP_ROUND:this._segList.addPt(n.p1),this.addFilletArc(e,a+Math.PI/2,a-Math.PI/2,Hl.CLOCKWISE,this._distance),this._segList.addPt(i.p1);break;case Mf.CAP_FLAT:this._segList.addPt(n.p1),this._segList.addPt(i.p1);break;case Mf.CAP_SQUARE:var u=new ll;u.x=Math.abs(this._distance)*Math.cos(a),u.y=Math.abs(this._distance)*Math.sin(a);var l=new ll(n.p1.x+u.x,n.p1.y+u.y),c=new ll(i.p1.x+u.x,i.p1.y+u.y);this._segList.addPt(l),this._segList.addPt(c)}},Df.prototype.getCoordinates=function(){return this._segList.getCoordinates()},Df.prototype.addMitreJoin=function(t,e,r,n){var i=!0,o=null;try{o=Nl.intersection(e.p0,e.p1,r.p0,r.p1),(n<=0?1:o.distance(t)/Math.abs(n))>this._bufParams.getMitreLimit()&&(i=!1)}catch(t){if(!(t instanceof Ml))throw t;o=new ll(0,0),i=!1}i?this._segList.addPt(o):this.addLimitedMitreJoin(e,r,n,this._bufParams.getMitreLimit())},Df.prototype.addFilletCorner=function(t,e,r,n,i){var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o),u=r.x-t.x,l=r.y-t.y,c=Math.atan2(l,u);n===Hl.CLOCKWISE?a<=c&&(a+=2*Math.PI):a>=c&&(a-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,a,c,n,i),this._segList.addPt(r)},Df.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*Df.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===Mf.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Mf.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},Df.prototype.createSquare=function(t){this._segList.addPt(new ll(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new ll(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new ll(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new ll(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},Df.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},Df.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},Df.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},Df.prototype.initSideSegments=function(t,e,r){this._s1=t,this._s2=e,this._side=r,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,r,this._distance,this._offset1)},Df.prototype.addLimitedMitreJoin=function(t,e,r,n){var i=this._seg0.p1,o=Rf.angle(i,this._seg0.p0),s=Rf.angleBetweenOriented(this._seg0.p0,i,this._seg1.p1)/2,a=Rf.normalize(o+s),u=Rf.normalize(a+Math.PI),l=n*r,c=r-l*Math.abs(Math.sin(s)),h=i.x+l*Math.cos(u),f=i.y+l*Math.sin(u),p=new ll(h,f),d=new _f(i,p),y=d.pointAlongOffset(1,c),v=d.pointAlongOffset(1,-c);this._side===Ph.LEFT?(this._segList.addPt(y),this._segList.addPt(v)):(this._segList.addPt(v),this._segList.addPt(y))},Df.prototype.computeOffsetSegment=function(t,e,r,n){var i=e===Ph.LEFT?1:-1,o=t.p1.x-t.p0.x,s=t.p1.y-t.p0.y,a=Math.sqrt(o*o+s*s),u=i*r*o/a,l=i*r*s/a;n.p0.x=t.p0.x-l,n.p0.y=t.p0.y+u,n.p1.x=t.p1.x-l,n.p1.y=t.p1.y+u},Df.prototype.addFilletArc=function(t,e,r,n,i){var o=n===Hl.CLOCKWISE?-1:1,s=Math.abs(e-r),a=Math.trunc(s/this._filletAngleQuantum+.5);if(a<1)return null;for(var u=s/a,l=0,c=new ll;l<s;){var h=e+o*l;c.x=t.x+i*Math.cos(h),c.y=t.y+i*Math.sin(h),this._segList.addPt(c),l+=u}},Df.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*Df.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var r=new ll((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r);var n=new ll((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},Df.prototype.createCircle=function(t){var e=new ll(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},Df.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},Df.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Of,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*Df.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},Df.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===Mf.JOIN_BEVEL||this._bufParams.getJoinStyle()===Mf.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,Hl.CLOCKWISE,this._distance))},Df.prototype.closeRing=function(){this._segList.closeRing()},Df.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},Df.prototype.interfaces_=function(){return[]},Df.prototype.getClass=function(){return Df},kf.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},kf.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},kf.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},kf.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(Df,kf);var jf=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e};jf.prototype.getOffsetCurve=function(t,e){if(this._distance=e,0===e)return null;var r=e<0,n=Math.abs(e),i=this.getSegGen(n);t.length<=1?this.computePointCurve(t[0],i):this.computeOffsetCurve(t,r,i);var o=i.getCoordinates();return r&&pc.reverse(o),o},jf.prototype.computeSingleSidedBufferCurve=function(t,e,r){var n=this.simplifyTolerance(this._distance);if(e){r.addSegments(t,!0);var i=Nf.simplify(t,-n),o=i.length-1;r.initSideSegments(i[o],i[o-1],Ph.LEFT),r.addFirstSegment();for(var s=o-2;s>=0;s--)r.addNextSegment(i[s],!0)}else{r.addSegments(t,!1);var a=Nf.simplify(t,n),u=a.length-1;r.initSideSegments(a[0],a[1],Ph.LEFT),r.addFirstSegment();for(var l=2;l<=u;l++)r.addNextSegment(a[l],!0)}r.addLastSegment(),r.closeRing()},jf.prototype.computeRingBufferCurve=function(t,e,r){var n=this.simplifyTolerance(this._distance);e===Ph.RIGHT&&(n=-n);var i=Nf.simplify(t,n),o=i.length-1;r.initSideSegments(i[o-1],i[0],e);for(var s=1;s<=o;s++){var a=1!==s;r.addNextSegment(i[s],a)}r.closeRing()},jf.prototype.computeLineBufferCurve=function(t,e){var r=this.simplifyTolerance(this._distance),n=Nf.simplify(t,r),i=n.length-1;e.initSideSegments(n[0],n[1],Ph.LEFT);for(var o=2;o<=i;o++)e.addNextSegment(n[o],!0);e.addLastSegment(),e.addLineEndCap(n[i-1],n[i]);var s=Nf.simplify(t,-r),a=s.length-1;e.initSideSegments(s[a],s[a-1],Ph.LEFT);for(var u=a-2;u>=0;u--)e.addNextSegment(s[u],!0);e.addLastSegment(),e.addLineEndCap(s[1],s[0]),e.closeRing()},jf.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case Mf.CAP_ROUND:e.createCircle(t);break;case Mf.CAP_SQUARE:e.createSquare(t)}},jf.prototype.getLineCurve=function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided())return null;if(0===e)return null;var r=Math.abs(e),n=this.getSegGen(r);if(t.length<=1)this.computePointCurve(t[0],n);else if(this._bufParams.isSingleSided()){var i=e<0;this.computeSingleSidedBufferCurve(t,i,n)}else this.computeLineBufferCurve(t,n);return n.getCoordinates()},jf.prototype.getBufferParameters=function(){return this._bufParams},jf.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},jf.prototype.getRingCurve=function(t,e,r){if(this._distance=r,t.length<=2)return this.getLineCurve(t,r);if(0===r)return jf.copyCoordinates(t);var n=this.getSegGen(r);return this.computeRingBufferCurve(t,e,n),n.getCoordinates()},jf.prototype.computeOffsetCurve=function(t,e,r){var n=this.simplifyTolerance(this._distance);if(e){var i=Nf.simplify(t,-n),o=i.length-1;r.initSideSegments(i[o],i[o-1],Ph.LEFT),r.addFirstSegment();for(var s=o-2;s>=0;s--)r.addNextSegment(i[s],!0)}else{var a=Nf.simplify(t,n),u=a.length-1;r.initSideSegments(a[0],a[1],Ph.LEFT),r.addFirstSegment();for(var l=2;l<=u;l++)r.addNextSegment(a[l],!0)}r.addLastSegment()},jf.prototype.getSegGen=function(t){return new Df(this._precisionModel,this._bufParams,t)},jf.prototype.interfaces_=function(){return[]},jf.prototype.getClass=function(){return jf},jf.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),r=0;r<e.length;r++)e[r]=new ll(t[r]);return e};var Gf=function(){this._subgraphs=null,this._seg=new _f,this._cga=new Hl;var t=arguments[0];this._subgraphs=t},Bf={DepthSegment:{configurable:!0}};Gf.prototype.findStabbedSegments=function(){var t=this;if(1===arguments.length){for(var e=arguments[0],r=new cc,n=this._subgraphs.iterator();n.hasNext();){var i=n.next(),o=i.getEnvelope();e.y<o.getMinY()||e.y>o.getMaxY()||t.findStabbedSegments(e,i.getDirectedEdges(),r)}return r}if(3===arguments.length)if(yl(arguments[2],uc)&&arguments[0]instanceof ll&&arguments[1]instanceof Hh)for(var s=arguments[0],a=arguments[1],u=arguments[2],l=a.getEdge().getCoordinates(),c=0;c<l.length-1;c++){t._seg.p0=l[c],t._seg.p1=l[c+1],t._seg.p0.y>t._seg.p1.y&&t._seg.reverse();var h=Math.max(t._seg.p0.x,t._seg.p1.x);if(!(h<s.x)&&!(t._seg.isHorizontal()||s.y<t._seg.p0.y||s.y>t._seg.p1.y||Hl.computeOrientation(t._seg.p0,t._seg.p1,s)===Hl.RIGHT)){var f=a.getDepth(Ph.LEFT);t._seg.p0.equals(l[c])||(f=a.getDepth(Ph.RIGHT));var p=new Uf(t._seg,f);u.add(p)}}else if(yl(arguments[2],uc)&&arguments[0]instanceof ll&&yl(arguments[1],uc))for(var d=arguments[0],y=arguments[1],v=arguments[2],g=y.iterator();g.hasNext();){var m=g.next();m.isForward()&&t.findStabbedSegments(d,m,v)}},Gf.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:nf.min(e)._leftDepth},Gf.prototype.interfaces_=function(){return[]},Gf.prototype.getClass=function(){return Gf},Bf.DepthSegment.get=function(){return Uf},Object.defineProperties(Gf,Bf);var Uf=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new _f(t),this._leftDepth=e};Uf.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var r=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==r||0!==(r=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?r:this._upwardSeg.compareTo(e._upwardSeg)},Uf.prototype.compareX=function(t,e){var r=t.p0.compareTo(e.p0);return 0!==r?r:t.p1.compareTo(e.p1)},Uf.prototype.toString=function(){return this._upwardSeg.toString()},Uf.prototype.interfaces_=function(){return[ol]},Uf.prototype.getClass=function(){return Uf};var qf=function(t,e,r){this.p0=t||null,this.p1=e||null,this.p2=r||null};qf.prototype.area=function(){return qf.area(this.p0,this.p1,this.p2)},qf.prototype.signedArea=function(){return qf.signedArea(this.p0,this.p1,this.p2)},qf.prototype.interpolateZ=function(t){if(null===t)throw new rl("Supplied point is null.");return qf.interpolateZ(t,this.p0,this.p1,this.p2)},qf.prototype.longestSideLength=function(){return qf.longestSideLength(this.p0,this.p1,this.p2)},qf.prototype.isAcute=function(){return qf.isAcute(this.p0,this.p1,this.p2)},qf.prototype.circumcentre=function(){return qf.circumcentre(this.p0,this.p1,this.p2)},qf.prototype.area3D=function(){return qf.area3D(this.p0,this.p1,this.p2)},qf.prototype.centroid=function(){return qf.centroid(this.p0,this.p1,this.p2)},qf.prototype.inCentre=function(){return qf.inCentre(this.p0,this.p1,this.p2)},qf.prototype.interfaces_=function(){return[]},qf.prototype.getClass=function(){return qf},qf.area=function(t,e,r){return Math.abs(((r.x-t.x)*(e.y-t.y)-(e.x-t.x)*(r.y-t.y))/2)},qf.signedArea=function(t,e,r){return((r.x-t.x)*(e.y-t.y)-(e.x-t.x)*(r.y-t.y))/2},qf.det=function(t,e,r,n){return t*n-e*r},qf.interpolateZ=function(t,e,r,n){var i=e.x,o=e.y,s=r.x-i,a=n.x-i,u=r.y-o,l=n.y-o,c=s*l-a*u,h=t.x-i,f=t.y-o,p=(l*h-a*f)/c,d=(-u*h+s*f)/c;return e.z+p*(r.z-e.z)+d*(n.z-e.z)},qf.longestSideLength=function(t,e,r){var n=t.distance(e),i=e.distance(r),o=r.distance(t),s=n;return i>s&&(s=i),o>s&&(s=o),s},qf.isAcute=function(t,e,r){return!!Rf.isAcute(t,e,r)&&(!!Rf.isAcute(e,r,t)&&!!Rf.isAcute(r,t,e))},qf.circumcentre=function(t,e,r){var n=r.x,i=r.y,o=t.x-n,s=t.y-i,a=e.x-n,u=e.y-i,l=2*qf.det(o,s,a,u),c=qf.det(s,o*o+s*s,u,a*a+u*u),h=qf.det(o,o*o+s*s,a,a*a+u*u);return new ll(n-c/l,i+h/l)},qf.perpendicularBisector=function(t,e){var r=e.x-t.x,n=e.y-t.y,i=new Nl(t.x+r/2,t.y+n/2,1),o=new Nl(t.x-n+r/2,t.y+r+n/2,1);return new Nl(i,o)},qf.angleBisector=function(t,e,r){var n=e.distance(t),i=n/(n+e.distance(r)),o=r.x-t.x,s=r.y-t.y;return new ll(t.x+i*o,t.y+i*s)},qf.area3D=function(t,e,r){var n=e.x-t.x,i=e.y-t.y,o=e.z-t.z,s=r.x-t.x,a=r.y-t.y,u=r.z-t.z,l=i*u-o*a,c=o*s-n*u,h=n*a-i*s,f=l*l+c*c+h*h,p=Math.sqrt(f)/2;return p},qf.centroid=function(t,e,r){var n=(t.x+e.x+r.x)/3,i=(t.y+e.y+r.y)/3;return new ll(n,i)},qf.inCentre=function(t,e,r){var n=e.distance(r),i=t.distance(r),o=t.distance(e),s=n+i+o,a=(n*t.x+i*e.x+o*r.x)/s,u=(n*t.y+i*e.y+o*r.y)/s;return new ll(a,u)};var zf=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new cc;var t=arguments[0],e=arguments[1],r=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=r};zf.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),r=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(r,pl.EXTERIOR,pl.INTERIOR)},zf.prototype.addPolygon=function(t){var e=this,r=this._distance,n=Ph.LEFT;this._distance<0&&(r=-this._distance,n=Ph.RIGHT);var i=t.getExteriorRing(),o=pc.removeRepeatedPoints(i.getCoordinates());if(this._distance<0&&this.isErodedCompletely(i,this._distance))return null;if(this._distance<=0&&o.length<3)return null;this.addPolygonRing(o,r,n,pl.EXTERIOR,pl.INTERIOR);for(var s=0;s<t.getNumInteriorRing();s++){var a=t.getInteriorRingN(s),u=pc.removeRepeatedPoints(a.getCoordinates());e._distance>0&&e.isErodedCompletely(a,-e._distance)||e.addPolygonRing(u,r,Ph.opposite(n),pl.INTERIOR,pl.EXTERIOR)}},zf.prototype.isTriangleErodedCompletely=function(t,e){var r=new qf(t[0],t[1],t[2]),n=r.inCentre();return Hl.distancePointLine(n,r.p0,r.p1)<Math.abs(e)},zf.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=pc.removeRepeatedPoints(t.getCoordinates()),r=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(r,pl.EXTERIOR,pl.INTERIOR)},zf.prototype.addCurve=function(t,e,r){if(null===t||t.length<2)return null;var n=new mf(t,new Dh(0,pl.BOUNDARY,e,r));this._curveList.add(n)},zf.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},zf.prototype.addPolygonRing=function(t,e,r,n,i){if(0===e&&t.length<nh.MINIMUM_VALID_SIZE)return null;var o=n,s=i;t.length>=nh.MINIMUM_VALID_SIZE&&Hl.isCCW(t)&&(o=i,s=n,r=Ph.opposite(r));var a=this._curveBuilder.getRingCurve(t,r,e);this.addCurve(a,o,s)},zf.prototype.add=function(t){if(t.isEmpty())return null;t instanceof eh?this.addPolygon(t):t instanceof Qc?this.addLineString(t):t instanceof $c?this.addPoint(t):(t instanceof rh||t instanceof Gc||t instanceof ih||t instanceof jc)&&this.addCollection(t)},zf.prototype.isErodedCompletely=function(t,e){var r=t.getCoordinates();if(r.length<4)return e<0;if(4===r.length)return this.isTriangleErodedCompletely(r,e);var n=t.getEnvelopeInternal(),i=Math.min(n.getHeight(),n.getWidth());return e<0&&2*Math.abs(e)>i},zf.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var r=t.getGeometryN(e);this.add(r)}},zf.prototype.interfaces_=function(){return[]},zf.prototype.getClass=function(){return zf};var Vf=function(){};Vf.prototype.locate=function(t){},Vf.prototype.interfaces_=function(){return[]},Vf.prototype.getClass=function(){return Vf};var Wf=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};Wf.prototype.next=function(){if(this._atStart)return this._atStart=!1,Wf.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new lc;var t=this._parent.getGeometryN(this._index++);return t instanceof jc?(this._subcollectionIterator=new Wf(t),this._subcollectionIterator.next()):t},Wf.prototype.remove=function(){throw new Error(this.getClass().getName())},Wf.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},Wf.prototype.interfaces_=function(){return[ac]},Wf.prototype.getClass=function(){return Wf},Wf.isAtomic=function(t){return!(t instanceof jc)};var Hf=function(){this._geom=null;var t=arguments[0];this._geom=t};Hf.prototype.locate=function(t){return Hf.locate(t,this._geom)},Hf.prototype.interfaces_=function(){return[Vf]},Hf.prototype.getClass=function(){return Hf},Hf.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&Hl.isPointInRing(t,e.getCoordinates())},Hf.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var r=e.getExteriorRing();if(!Hf.isPointInRing(t,r))return!1;for(var n=0;n<e.getNumInteriorRing();n++){var i=e.getInteriorRingN(n);if(Hf.isPointInRing(t,i))return!1}return!0},Hf.containsPoint=function(t,e){if(e instanceof eh)return Hf.containsPointInPolygon(t,e);if(e instanceof jc)for(var r=new Wf(e);r.hasNext();){var n=r.next();if(n!==e&&Hf.containsPoint(t,n))return!0}return!1},Hf.locate=function(t,e){return e.isEmpty()?pl.EXTERIOR:Hf.containsPoint(t,e)?pl.INTERIOR:pl.EXTERIOR};var Xf=function(){this._edgeMap=new Mc,this._edgeList=null,this._ptInAreaLocation=[pl.NONE,pl.NONE]};Xf.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),r=e-1;return 0===e&&(r=this._edgeList.size()-1),this._edgeList.get(r)},Xf.prototype.propagateSideLabels=function(t){for(var e=pl.NONE,r=this.iterator();r.hasNext();){var n=r.next().getLabel();n.isArea(t)&&n.getLocation(t,Ph.LEFT)!==pl.NONE&&(e=n.getLocation(t,Ph.LEFT))}if(e===pl.NONE)return null;for(var i=e,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getLabel();if(a.getLocation(t,Ph.ON)===pl.NONE&&a.setLocation(t,Ph.ON,i),a.isArea(t)){var u=a.getLocation(t,Ph.LEFT),l=a.getLocation(t,Ph.RIGHT);if(l!==pl.NONE){if(l!==i)throw new Oh("side location conflict",s.getCoordinate());u===pl.NONE&&Bl.shouldNeverReachHere("found single null side (at "+s.getCoordinate()+")"),i=u}else Bl.isTrue(a.getLocation(t,Ph.LEFT)===pl.NONE,"found single null side"),a.setLocation(t,Ph.RIGHT,i),a.setLocation(t,Ph.LEFT,i)}}},Xf.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},Xf.prototype.print=function(t){Ll.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){e.next().print(t)}},Xf.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},Xf.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var r=e.size()-1,n=e.get(r).getLabel().getLocation(t,Ph.LEFT);Bl.isTrue(n!==pl.NONE,"Found unlabelled area edge");for(var i=n,o=this.iterator();o.hasNext();){var s=o.next().getLabel();Bl.isTrue(s.isArea(t),"Found non-area edge");var a=s.getLocation(t,Ph.LEFT),u=s.getLocation(t,Ph.RIGHT);if(a===u)return!1;if(u!==i)return!1;i=a}return!0},Xf.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++){if(this._edgeList.get(e)===t)return e}return-1},Xf.prototype.iterator=function(){return this.getEdges().iterator()},Xf.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new cc(this._edgeMap.values())),this._edgeList},Xf.prototype.getLocation=function(t,e,r){return this._ptInAreaLocation[t]===pl.NONE&&(this._ptInAreaLocation[t]=Hf.locate(e,r[t].getGeometry())),this._ptInAreaLocation[t]},Xf.prototype.toString=function(){var t=new ml;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var r=e.next();t.append(r),t.append("\n")}return t.toString()},Xf.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();){e.next().computeLabel(t)}},Xf.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],r=this.iterator();r.hasNext();)for(var n=r.next().getLabel(),i=0;i<2;i++)n.isLine(i)&&n.getLocation(i)===pl.BOUNDARY&&(e[i]=!0);for(var o=this.iterator();o.hasNext();)for(var s=o.next(),a=s.getLabel(),u=0;u<2;u++)if(a.isAnyNull(u)){var l=pl.NONE;if(e[u])l=pl.EXTERIOR;else{var c=s.getCoordinate();l=this.getLocation(u,c,t)}a.setAllLocationsIfNull(u,l)}},Xf.prototype.getDegree=function(){return this._edgeMap.size()},Xf.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},Xf.prototype.interfaces_=function(){return[]},Xf.prototype.getClass=function(){return Xf};var Zf=function(t){function e(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.linkResultDirectedEdges=function(){var t=this;this.getResultAreaEdges();for(var e=null,r=null,n=this._SCANNING_FOR_INCOMING,i=0;i<this._resultAreaEdgeList.size();i++){var o=t._resultAreaEdgeList.get(i),s=o.getSym();if(o.getLabel().isArea())switch(null===e&&o.isInResult()&&(e=o),n){case t._SCANNING_FOR_INCOMING:if(!s.isInResult())continue;r=s,n=t._LINKING_TO_OUTGOING;break;case t._LINKING_TO_OUTGOING:if(!o.isInResult())continue;r.setNext(o),n=t._SCANNING_FOR_INCOMING}}if(n===this._LINKING_TO_OUTGOING){if(null===e)throw new Oh("no outgoing dirEdge found",this.getCoordinate());Bl.isTrue(e.isInResult(),"unable to link last incoming dirEdge"),r.setNext(e)}},e.prototype.insert=function(t){var e=t;this.insertEdgeEnd(e,e)},e.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var r=t.get(0);if(1===e)return r;var n=t.get(e-1),i=r.getQuadrant(),o=n.getQuadrant();return zh.isNorthern(i)&&zh.isNorthern(o)?r:zh.isNorthern(i)||zh.isNorthern(o)?0!==r.getDy()?r:0!==n.getDy()?n:(Bl.shouldNeverReachHere("found two horizontal edges incident on node"),null):n},e.prototype.print=function(t){Ll.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var r=e.next();t.print("out "),r.print(t),t.println(),t.print("in "),r.getSym().print(t),t.println()}},e.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new cc;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var r=e.next().getLabel();r.setAllLocationsIfNull(0,t.getLocation(0)),r.setAllLocationsIfNull(1,t.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,r=this._edgeList.size()-1;r>=0;r--){var n=this._edgeList.get(r),i=n.getSym();null===e&&(e=i),null!==t&&i.setNext(t),t=n}e.setNext(t)},e.prototype.computeDepths=function(){var t=this;if(1===arguments.length){var e=arguments[0],r=this.findIndex(e),n=e.getDepth(Ph.LEFT),i=e.getDepth(Ph.RIGHT),o=this.computeDepths(r+1,this._edgeList.size(),n),s=this.computeDepths(0,r,o);if(s!==i)throw new Oh("depth mismatch at "+e.getCoordinate())}else if(3===arguments.length){for(var a=arguments[0],u=arguments[1],l=arguments[2],c=l,h=a;h<u;h++){var f=t._edgeList.get(h);f.setEdgeDepths(Ph.RIGHT,c),c=f.getDepth(Ph.LEFT)}return c}},e.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(t){for(var e=this,r=null,n=null,i=this._SCANNING_FOR_INCOMING,o=this._resultAreaEdgeList.size()-1;o>=0;o--){var s=e._resultAreaEdgeList.get(o),a=s.getSym();switch(null===r&&s.getEdgeRing()===t&&(r=s),i){case e._SCANNING_FOR_INCOMING:if(a.getEdgeRing()!==t)continue;n=a,i=e._LINKING_TO_OUTGOING;break;case e._LINKING_TO_OUTGOING:if(s.getEdgeRing()!==t)continue;n.setNextMin(s),i=e._SCANNING_FOR_INCOMING}}i===this._LINKING_TO_OUTGOING&&(Bl.isTrue(null!==r,"found null for first outgoing dirEdge"),Bl.isTrue(r.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(r))},e.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();){var r=e.next();r.isInResult()&&t++}return t}if(1===arguments.length){for(var n=arguments[0],i=0,o=this.iterator();o.hasNext();){var s=o.next();s.getEdgeRing()===n&&i++}return i}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var t=pl.NONE,e=this.iterator();e.hasNext();){var r=e.next(),n=r.getSym();if(!r.isLineEdge()){if(r.isInResult()){t=pl.INTERIOR;break}if(n.isInResult()){t=pl.EXTERIOR;break}}}if(t===pl.NONE)return null;for(var i=t,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getSym();s.isLineEdge()?s.getEdge().setCovered(i===pl.INTERIOR):(s.isInResult()&&(i=pl.EXTERIOR),a.isInResult()&&(i=pl.INTERIOR))}},e.prototype.computeLabelling=function(e){t.prototype.computeLabelling.call(this,e),this._label=new Dh(pl.NONE);for(var r=this.iterator();r.hasNext();)for(var n=r.next().getEdge().getLabel(),i=0;i<2;i++){var o=n.getLocation(i);o!==pl.INTERIOR&&o!==pl.BOUNDARY||this._label.setLocation(i,pl.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Xf),Yf=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createNode=function(t){return new Uh(t,new Zf)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Xh),Jf=function t(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)};Jf.prototype.compareTo=function(t){var e=t;return Jf.compareOriented(this._pts,this._orientation,e._pts,e._orientation)},Jf.prototype.interfaces_=function(){return[ol]},Jf.prototype.getClass=function(){return Jf},Jf.orientation=function(t){return 1===pc.increasingDirection(t)},Jf.compareOriented=function(t,e,r,n){for(var i=e?1:-1,o=n?1:-1,s=e?t.length:-1,a=n?r.length:-1,u=e?0:t.length-1,l=n?0:r.length-1;;){var c=t[u].compareTo(r[l]);if(0!==c)return c;var h=(u+=i)===s,f=(l+=o)===a;if(h&&!f)return-1;if(!h&&f)return 1;if(h&&f)return 0}};var Qf=function(){this._edges=new cc,this._ocaMap=new Mc};Qf.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var r=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var n=r.getCoordinates(),i=0;i<n.length;i++)i>0&&t.print(","),t.print(n[i].x+" "+n[i].y);t.println(")")}t.print(")  ")},Qf.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},Qf.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},Qf.prototype.iterator=function(){return this._edges.iterator()},Qf.prototype.getEdges=function(){return this._edges},Qf.prototype.get=function(t){return this._edges.get(t)},Qf.prototype.findEqualEdge=function(t){var e=new Jf(t.getCoordinates());return this._ocaMap.get(e)},Qf.prototype.add=function(t){this._edges.add(t);var e=new Jf(t.getCoordinates());this._ocaMap.put(e,t)},Qf.prototype.interfaces_=function(){return[]},Qf.prototype.getClass=function(){return Qf};var Kf=function(){};Kf.prototype.processIntersections=function(t,e,r,n){},Kf.prototype.isDone=function(){},Kf.prototype.interfaces_=function(){return[]},Kf.prototype.getClass=function(){return Kf};var $f=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t};$f.prototype.isTrivialIntersection=function(t,e,r,n){if(t===r&&1===this._li.getIntersectionNum()){if($f.isAdjacentSegments(e,n))return!0;if(t.isClosed()){var i=t.size()-1;if(0===e&&n===i||0===n&&e===i)return!0}}return!1},$f.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},$f.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},$f.prototype.getLineIntersector=function(){return this._li},$f.prototype.hasProperIntersection=function(){return this._hasProper},$f.prototype.processIntersections=function(t,e,r,n){if(t===r&&e===n)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=r.getCoordinates()[n],a=r.getCoordinates()[n+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,r,n)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),r.addIntersections(this._li,n,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},$f.prototype.hasIntersection=function(){return this._hasIntersection},$f.prototype.isDone=function(){return!1},$f.prototype.hasInteriorIntersection=function(){return this._hasInterior},$f.prototype.interfaces_=function(){return[Kf]},$f.prototype.getClass=function(){return $f},$f.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var tp=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],r=arguments[2];this.coord=new ll(t),this.segmentIndex=e,this.dist=r};tp.prototype.getSegmentIndex=function(){return this.segmentIndex},tp.prototype.getCoordinate=function(){return this.coord},tp.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},tp.prototype.compareTo=function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},tp.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},tp.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},tp.prototype.getDistance=function(){return this.dist},tp.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},tp.prototype.interfaces_=function(){return[ol]},tp.prototype.getClass=function(){return tp};var ep=function(){this._nodeMap=new Mc,this.edge=null;var t=arguments[0];this.edge=t};ep.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();){e.next().print(t)}},ep.prototype.iterator=function(){return this._nodeMap.values().iterator()},ep.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),r=e.next();e.hasNext();){var n=e.next(),i=this.createSplitEdge(r,n);t.add(i),r=n}},ep.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},ep.prototype.createSplitEdge=function(t,e){var r=e.segmentIndex-t.segmentIndex+2,n=this.edge.pts[e.segmentIndex],i=e.dist>0||!e.coord.equals2D(n);i||r--;var o=new Array(r).fill(null),s=0;o[s++]=new ll(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this.edge.pts[a];return i&&(o[s]=e.coord),new sp(o,new Dh(this.edge._label))},ep.prototype.add=function(t,e,r){var n=new tp(t,e,r),i=this._nodeMap.get(n);return null!==i?i:(this._nodeMap.put(n,n),n)},ep.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();){if(e.next().coord.equals(t))return!0}return!1},ep.prototype.interfaces_=function(){return[]},ep.prototype.getClass=function(){return ep};var rp=function(){};rp.prototype.getChainStartIndices=function(t){var e=0,r=new cc;r.add(new _l(e));do{var n=this.findChainEnd(t,e);r.add(new _l(n)),e=n}while(e<t.length-1);return rp.toIntArray(r)},rp.prototype.findChainEnd=function(t,e){for(var r=zh.quadrant(t[e],t[e+1]),n=e+1;n<t.length;){if(zh.quadrant(t[n-1],t[n])!==r)break;n++}return n-1},rp.prototype.interfaces_=function(){return[]},rp.prototype.getClass=function(){return rp},rp.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),r=0;r<e.length;r++)e[r]=t.get(r).intValue();return e};var np=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new Tl,this.env2=new Tl;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new rp;this.startIndex=e.getChainStartIndices(this.pts)};np.prototype.getCoordinates=function(){return this.pts},np.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,r=this.pts[this.startIndex[t+1]].x;return e>r?e:r},np.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,r=this.pts[this.startIndex[t+1]].x;return e<r?e:r},np.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[r],e.startIndex[r+1],n)}else if(6===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],u=arguments[4],l=arguments[5],c=this.pts[i],h=this.pts[o],f=s.pts[a],p=s.pts[u];if(o-i==1&&u-a==1)return l.addIntersections(this.e,i,s.e,a),null;if(this.env1.init(c,h),this.env2.init(f,p),!this.env1.intersects(this.env2))return null;var d=Math.trunc((i+o)/2),y=Math.trunc((a+u)/2);i<d&&(a<y&&this.computeIntersectsForChain(i,d,s,a,y,l),y<u&&this.computeIntersectsForChain(i,d,s,y,u,l)),d<o&&(a<y&&this.computeIntersectsForChain(d,o,s,a,y,l),y<u&&this.computeIntersectsForChain(d,o,s,y,u,l))}},np.prototype.getStartIndexes=function(){return this.startIndex},np.prototype.computeIntersects=function(t,e){for(var r=0;r<this.startIndex.length-1;r++)for(var n=0;n<t.startIndex.length-1;n++)this.computeIntersectsForChain(r,t,n,e)},np.prototype.interfaces_=function(){return[]},np.prototype.getClass=function(){return np};var ip=function t(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var e=0;e<2;e++)for(var r=0;r<3;r++)this._depth[e][r]=t.NULL_VALUE},op={NULL_VALUE:{configurable:!0}};ip.prototype.getDepth=function(t,e){return this._depth[t][e]},ip.prototype.setDepth=function(t,e,r){this._depth[t][e]=r},ip.prototype.isNull=function(){var t=this;if(0===arguments.length){for(var e=0;e<2;e++)for(var r=0;r<3;r++)if(t._depth[e][r]!==ip.NULL_VALUE)return!1;return!0}if(1===arguments.length){var n=arguments[0];return this._depth[n][1]===ip.NULL_VALUE}if(2===arguments.length){var i=arguments[0],o=arguments[1];return this._depth[i][o]===ip.NULL_VALUE}},ip.prototype.normalize=function(){for(var t=this,e=0;e<2;e++)if(!t.isNull(e)){var r=t._depth[e][1];t._depth[e][2]<r&&(r=t._depth[e][2]),r<0&&(r=0);for(var n=1;n<3;n++){var i=0;t._depth[e][n]>r&&(i=1),t._depth[e][n]=i}}},ip.prototype.getDelta=function(t){return this._depth[t][Ph.RIGHT]-this._depth[t][Ph.LEFT]},ip.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?pl.EXTERIOR:pl.INTERIOR},ip.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},ip.prototype.add=function(){var t=this;if(1===arguments.length)for(var e=arguments[0],r=0;r<2;r++)for(var n=1;n<3;n++){var i=e.getLocation(r,n);i!==pl.EXTERIOR&&i!==pl.INTERIOR||(t.isNull(r,n)?t._depth[r][n]=ip.depthAtLocation(i):t._depth[r][n]+=ip.depthAtLocation(i))}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];a===pl.INTERIOR&&this._depth[o][s]++}},ip.prototype.interfaces_=function(){return[]},ip.prototype.getClass=function(){return ip},ip.depthAtLocation=function(t){return t===pl.EXTERIOR?0:t===pl.INTERIOR?1:ip.NULL_VALUE},op.NULL_VALUE.get=function(){return-1},Object.defineProperties(ip,op);var sp=function(t){function e(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new ep(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new ip,this._depthDelta=0,1===arguments.length){var r=arguments[0];e.call(this,r,null)}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.pts=n,this._label=i}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new e(t,Dh.toLineLabel(this._label))},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(t){this._isIsolated=t},e.prototype.setName=function(t){this._name=t},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var r=t;if(this.pts.length!==r.pts.length)return!1;for(var n=!0,i=!0,o=this.pts.length,s=0;s<this.pts.length;s++)if(this.pts[s].equals2D(r.pts[s])||(n=!1),this.pts[s].equals2D(r.pts[--o])||(i=!1),!n&&!i)return!1;return!0},e.prototype.getCoordinate=function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},e.prototype.print=function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(t){e.updateIM(this._label,t)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&(3===this.pts.length&&!!this.pts[0].equals(this.pts[2]))},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},e.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new np(this)),this._mce},e.prototype.getEnvelope=function(){if(null===this._env){this._env=new Tl;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},e.prototype.addIntersection=function(t,e,r,n){var i=new ll(t.getIntersection(n)),o=e,s=t.getEdgeDistance(r,n),a=o+1;if(a<this.pts.length){var u=this.pts[a];i.equals2D(u)&&(o=a,s=0)}this.eiList.add(i,o,s)},e.prototype.toString=function(){var t=new ml;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()},e.prototype.isPointwiseEqual=function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},e.prototype.setDepthDelta=function(t){this._depthDelta=t},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(t,e,r){for(var n=0;n<t.getIntersectionNum();n++)this.addIntersection(t,e,r,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(2!==arguments.length)return t.prototype.updateIM.apply(this,arguments);var e=arguments[0],r=arguments[1];r.setAtLeastIfValid(e.getLocation(0,Ph.ON),e.getLocation(1,Ph.ON),1),e.isArea()&&(r.setAtLeastIfValid(e.getLocation(0,Ph.LEFT),e.getLocation(1,Ph.LEFT),2),r.setAtLeastIfValid(e.getLocation(0,Ph.RIGHT),e.getLocation(1,Ph.RIGHT),2))},e}(Bh),ap=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Qf,this._bufParams=t||null};ap.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},ap.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var r=e.getLabel(),n=t.getLabel();e.isPointwiseEqual(t)||(n=new Dh(t.getLabel())).flip(),r.merge(n);var i=ap.depthDelta(n),o=e.getDepthDelta()+i;e.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(ap.depthDelta(t.getLabel()))},ap.prototype.buildSubgraphs=function(t,e){for(var r=new cc,n=t.iterator();n.hasNext();){var i=n.next(),o=i.getRightmostCoordinate(),s=new Gf(r).getDepth(o);i.computeDepth(s),i.findResultEdges(),r.add(i),e.add(i.getDirectedEdges(),i.getNodes())}},ap.prototype.createSubgraphs=function(t){for(var e=new cc,r=t.getNodes().iterator();r.hasNext();){var n=r.next();if(!n.isVisited()){var i=new Rh;i.create(n),e.add(i)}}return nf.sort(e,nf.reverseOrder()),e},ap.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},ap.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new Ef,r=new zl;return r.setPrecisionModel(t),e.setSegmentIntersector(new $f(r)),e},ap.prototype.buffer=function(t,e){var r=this._workingPrecisionModel;null===r&&(r=t.getPrecisionModel()),this._geomFact=t.getFactory();var n=new jf(r,this._bufParams),i=new zf(t,e,n).getCurves();if(i.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(i,r),this._graph=new Zh(new Yf),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),s=new Yh(this._geomFact);this.buildSubgraphs(o,s);var a=s.getPolygons();return a.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(a)},ap.prototype.computeNodedEdges=function(t,e){var r=this.getNoder(e);r.computeNodes(t);for(var n=r.getNodedSubstrings().iterator();n.hasNext();){var i=n.next(),o=i.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var s=i.getData(),a=new sp(i.getCoordinates(),new Dh(s));this.insertUniqueEdge(a)}}},ap.prototype.setNoder=function(t){this._workingNoder=t},ap.prototype.interfaces_=function(){return[]},ap.prototype.getClass=function(){return ap},ap.depthDelta=function(t){var e=t.getLocation(0,Ph.LEFT),r=t.getLocation(0,Ph.RIGHT);return e===pl.INTERIOR&&r===pl.EXTERIOR?1:e===pl.EXTERIOR&&r===pl.INTERIOR?-1:0},ap.convertSegStrings=function(t){for(var e=new _h,r=new cc;t.hasNext();){var n=t.next(),i=e.createLineString(n.getCoordinates());r.add(i)}return e.buildGeometry(r)};var up=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this._noder=t,this._scaleFactor=e,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var r=arguments[0],n=arguments[1],i=arguments[2],o=arguments[3];this._noder=r,this._scaleFactor=n,this._offsetX=i,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};up.prototype.rescale=function(){var t=this;if(yl(arguments[0],oc))for(var e=arguments[0],r=e.iterator();r.hasNext();){var n=r.next();t.rescale(n.getCoordinates())}else if(arguments[0]instanceof Array){for(var i=arguments[0],o=0;o<i.length;o++)i[o].x=i[o].x/t._scaleFactor+t._offsetX,i[o].y=i[o].y/t._scaleFactor+t._offsetY;2===i.length&&i[0].equals2D(i[1])&&Ll.out.println(i)}},up.prototype.scale=function(){var t=this;if(yl(arguments[0],oc)){for(var e=arguments[0],r=new cc,n=e.iterator();n.hasNext();){var i=n.next();r.add(new mf(t.scale(i.getCoordinates()),i.getData()))}return r}if(arguments[0]instanceof Array){for(var o=arguments[0],s=new Array(o.length).fill(null),a=0;a<o.length;a++)s[a]=new ll(Math.round((o[a].x-t._offsetX)*t._scaleFactor),Math.round((o[a].y-t._offsetY)*t._scaleFactor),o[a].z);var u=pc.removeRepeatedPoints(s);return u}},up.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},up.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},up.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},up.prototype.interfaces_=function(){return[Cf]},up.prototype.getClass=function(){return up};var lp=function(){this._li=new zl,this._segStrings=null;var t=arguments[0];this._segStrings=t},cp={fact:{configurable:!0}};lp.prototype.checkEndPtVertexIntersections=function(){var t=this;if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();){var r=e.next(),n=r.getCoordinates();t.checkEndPtVertexIntersections(n[0],t._segStrings),t.checkEndPtVertexIntersections(n[n.length-1],t._segStrings)}else if(2===arguments.length)for(var i=arguments[0],o=arguments[1],s=o.iterator();s.hasNext();)for(var a=s.next(),u=a.getCoordinates(),l=1;l<u.length-1;l++)if(u[l].equals(i))throw new jl("found endpt/interior pt intersection at index "+l+" :pt "+i)},lp.prototype.checkInteriorIntersections=function(){var t=this;if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();)for(var r=e.next(),n=this._segStrings.iterator();n.hasNext();){var i=n.next();t.checkInteriorIntersections(r,i)}else if(2===arguments.length)for(var o=arguments[0],s=arguments[1],a=o.getCoordinates(),u=s.getCoordinates(),l=0;l<a.length-1;l++)for(var c=0;c<u.length-1;c++)t.checkInteriorIntersections(o,l,s,c);else if(4===arguments.length){var h=arguments[0],f=arguments[1],p=arguments[2],d=arguments[3];if(h===p&&f===d)return null;var y=h.getCoordinates()[f],v=h.getCoordinates()[f+1],g=p.getCoordinates()[d],m=p.getCoordinates()[d+1];if(this._li.computeIntersection(y,v,g,m),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,y,v)||this.hasInteriorIntersection(this._li,g,m)))throw new jl("found non-noded intersection at "+y+"-"+v+" and "+g+"-"+m)}},lp.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},lp.prototype.checkCollapses=function(){var t=this;if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();){var r=e.next();t.checkCollapses(r)}else if(1===arguments.length)for(var n=arguments[0],i=n.getCoordinates(),o=0;o<i.length-2;o++)t.checkCollapse(i[o],i[o+1],i[o+2])},lp.prototype.hasInteriorIntersection=function(t,e,r){for(var n=0;n<t.getIntersectionNum();n++){var i=t.getIntersection(n);if(!i.equals(e)&&!i.equals(r))return!0}return!1},lp.prototype.checkCollapse=function(t,e,r){if(t.equals(r))throw new jl("found non-noded collapse at "+lp.fact.createLineString([t,e,r]))},lp.prototype.interfaces_=function(){return[]},lp.prototype.getClass=function(){return lp},cp.fact.get=function(){return new _h},Object.defineProperties(lp,cp);var hp=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],r=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=r,e<=0)throw new rl("Scale factor must be non-zero");1!==e&&(this._pt=new ll(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new ll,this._p1Scaled=new ll),this.initCorners(this._pt)},fp={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};hp.prototype.intersectsScaled=function(t,e){var r=Math.min(t.x,e.x),n=Math.max(t.x,e.x),i=Math.min(t.y,e.y),o=Math.max(t.y,e.y),s=this._maxx<r||this._minx>n||this._maxy<i||this._miny>o;if(s)return!1;var a=this.intersectsToleranceSquare(t,e);return Bl.isTrue(!(s&&a),"Found bad envelope test"),a},hp.prototype.initCorners=function(t){var e=.5;this._minx=t.x-e,this._maxx=t.x+e,this._miny=t.y-e,this._maxy=t.y+e,this._corner[0]=new ll(this._maxx,this._maxy),this._corner[1]=new ll(this._minx,this._maxy),this._corner[2]=new ll(this._minx,this._miny),this._corner[3]=new ll(this._maxx,this._miny)},hp.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},hp.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},hp.prototype.getCoordinate=function(){return this._originalPt},hp.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},hp.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=hp.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new Tl(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},hp.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),!!this._li.hasIntersection())))},hp.prototype.intersectsToleranceSquare=function(t,e){var r=!1,n=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),!!this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),!!this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),!!this._li.isProper()||(!(!r||!n)||(!!t.equals(this._pt)||!!e.equals(this._pt))))))},hp.prototype.addSnappedNode=function(t,e){var r=t.getCoordinate(e),n=t.getCoordinate(e+1);return!!this.intersects(r,n)&&(t.addIntersection(this.getCoordinate(),e),!0)},hp.prototype.interfaces_=function(){return[]},hp.prototype.getClass=function(){return hp},fp.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(hp,fp);var pp=function(){this.tempEnv1=new Tl,this.selectedSegment=new _f};pp.prototype.select=function(){if(1===arguments.length);else if(2===arguments.length){var t=arguments[0],e=arguments[1];t.getLineSegment(e,this.selectedSegment),this.select(this.selectedSegment)}},pp.prototype.interfaces_=function(){return[]},pp.prototype.getClass=function(){return pp};var dp=function(){this._index=null;var t=arguments[0];this._index=t},yp={HotPixelSnapAction:{configurable:!0}};dp.prototype.snap=function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],r=arguments[1],n=arguments[2],i=e.getSafeEnvelope(),o=new vp(e,r,n);return this._index.query(i,{interfaces_:function(){return[$h]},visitItem:function(t){t.select(i,o)}}),o.isNodeAdded()}},dp.prototype.interfaces_=function(){return[]},dp.prototype.getClass=function(){return dp},yp.HotPixelSnapAction.get=function(){return vp},Object.defineProperties(dp,yp);var vp=function(t){function e(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[0],r=arguments[1],n=arguments[2];this._hotPixel=e,this._parentEdge=r,this._hotPixelVertexIndex=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!==arguments.length)return t.prototype.select.apply(this,arguments);var e=arguments[0],r=arguments[1],n=e.getContext();if(null!==this._parentEdge&&n===this._parentEdge&&r===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(n,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(pp),gp=function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new cc};gp.prototype.processIntersections=function(t,e,r,n){if(t===r&&e===n)return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=r.getCoordinates()[n],a=r.getCoordinates()[n+1];if(this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var u=0;u<this._li.getIntersectionNum();u++)this._interiorIntersections.add(this._li.getIntersection(u));t.addIntersections(this._li,e,0),r.addIntersections(this._li,n,1)}},gp.prototype.isDone=function(){return!1},gp.prototype.getInteriorIntersections=function(){return this._interiorIntersections},gp.prototype.interfaces_=function(){return[Kf]},gp.prototype.getClass=function(){return gp};var mp=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new zl,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};mp.prototype.checkCorrectness=function(t){var e=mf.getNodedSubstrings(t),r=new lp(e);try{r.checkValid()}catch(t){if(!(t instanceof Pl))throw t;t.printStackTrace()}},mp.prototype.getNodedSubstrings=function(){return mf.getNodedSubstrings(this._nodedSegStrings)},mp.prototype.snapRound=function(t,e){var r=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(r),this.computeVertexSnaps(t)},mp.prototype.findInteriorIntersections=function(t,e){var r=new gp(e);return this._noder.setSegmentIntersector(r),this._noder.computeNodes(t),r.getInteriorIntersections()},mp.prototype.computeVertexSnaps=function(){var t=this;if(yl(arguments[0],oc))for(var e=arguments[0],r=e.iterator();r.hasNext();){var n=r.next();t.computeVertexSnaps(n)}else if(arguments[0]instanceof mf)for(var i=arguments[0],o=i.getCoordinates(),s=0;s<o.length;s++){var a=new hp(o[s],t._scaleFactor,t._li),u=t._pointSnapper.snap(a,i,s);u&&i.addIntersection(o[s],s)}},mp.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new Ef,this._pointSnapper=new dp(this._noder.getIndex()),this.snapRound(t,this._li)},mp.prototype.computeIntersectionSnaps=function(t){for(var e=this,r=t.iterator();r.hasNext();){var n=r.next(),i=new hp(n,e._scaleFactor,e._li);e._pointSnapper.snap(i)}},mp.prototype.interfaces_=function(){return[Cf]},mp.prototype.getClass=function(){return mp};var _p=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new Mf,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0];this._argGeom=t}else if(2===arguments.length){var e=arguments[0],r=arguments[1];this._argGeom=e,this._bufParams=r}},bp={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};_p.prototype.bufferFixedPrecision=function(t){var e=new up(new mp(new yh(1)),t.getScale()),r=new ap(this._bufParams);r.setWorkingPrecisionModel(t),r.setNoder(e),this._resultGeometry=r.buffer(this._argGeom,this._distance)},_p.prototype.bufferReducedPrecision=function(){var t=this;if(0===arguments.length){for(var e=_p.MAX_PRECISION_DIGITS;e>=0;e--){try{t.bufferReducedPrecision(e)}catch(e){if(!(e instanceof Oh))throw e;t._saveException=e}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var r=arguments[0],n=_p.precisionScaleFactor(this._argGeom,this._distance,r),i=new yh(n);this.bufferFixedPrecision(i)}},_p.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===yh.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},_p.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},_p.prototype.bufferOriginalPrecision=function(){try{var t=new ap(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof jl))throw t;this._saveException=t}},_p.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},_p.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},_p.prototype.interfaces_=function(){return[]},_p.prototype.getClass=function(){return _p},_p.bufferOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],r=new _p(t),n=r.getResultGeometry(e);return n}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Yl&&"number"==typeof arguments[1]){var i=arguments[0],o=arguments[1],s=arguments[2],a=new _p(i);a.setQuadrantSegments(s);var u=a.getResultGeometry(o);return u}if(arguments[2]instanceof Mf&&arguments[0]instanceof Yl&&"number"==typeof arguments[1]){var l=arguments[0],c=arguments[1],h=arguments[2],f=new _p(l,h),p=f.getResultGeometry(c);return p}}else if(4===arguments.length){var d=arguments[0],y=arguments[1],v=arguments[2],g=arguments[3],m=new _p(d);m.setQuadrantSegments(v),m.setEndCapStyle(g);var _=m.getResultGeometry(y);return _}},_p.precisionScaleFactor=function(t,e,r){var n=t.getEnvelopeInternal(),i=vl.max(Math.abs(n.getMaxX()),Math.abs(n.getMaxY()),Math.abs(n.getMinX()),Math.abs(n.getMinY()))+2*(e>0?e:0),o=r-Math.trunc(Math.log(i)/Math.log(10)+1);return Math.pow(10,o)},bp.CAP_ROUND.get=function(){return Mf.CAP_ROUND},bp.CAP_BUTT.get=function(){return Mf.CAP_FLAT},bp.CAP_FLAT.get=function(){return Mf.CAP_FLAT},bp.CAP_SQUARE.get=function(){return Mf.CAP_SQUARE},bp.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(_p,bp);var xp=function(){this._pt=[new ll,new ll],this._distance=nl.NaN,this._isNull=!0};xp.prototype.getCoordinates=function(){return this._pt},xp.prototype.getCoordinate=function(t){return this._pt[t]},xp.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],r=arguments[1];if(this._isNull)return this.initialize(e,r),null;var n=e.distance(r);n<this._distance&&this.initialize(e,r,n)}},xp.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var r=arguments[0],n=arguments[1],i=arguments[2];this._pt[0].setCoordinate(r),this._pt[1].setCoordinate(n),this._distance=i,this._isNull=!1}},xp.prototype.getDistance=function(){return this._distance},xp.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],r=arguments[1];if(this._isNull)return this.initialize(e,r),null;var n=e.distance(r);n>this._distance&&this.initialize(e,r,n)}},xp.prototype.interfaces_=function(){return[]},xp.prototype.getClass=function(){return xp};var Sp=function(){};Sp.prototype.interfaces_=function(){return[]},Sp.prototype.getClass=function(){return Sp},Sp.computeDistance=function(){if(arguments[2]instanceof xp&&arguments[0]instanceof Qc&&arguments[1]instanceof ll)for(var t=arguments[0],e=arguments[1],r=arguments[2],n=t.getCoordinates(),i=new _f,o=0;o<n.length-1;o++){i.setCoordinates(n[o],n[o+1]);var s=i.closestPoint(e);r.setMinimum(s,e)}else if(arguments[2]instanceof xp&&arguments[0]instanceof eh&&arguments[1]instanceof ll){var a=arguments[0],u=arguments[1],l=arguments[2];Sp.computeDistance(a.getExteriorRing(),u,l);for(var c=0;c<a.getNumInteriorRing();c++)Sp.computeDistance(a.getInteriorRingN(c),u,l)}else if(arguments[2]instanceof xp&&arguments[0]instanceof Yl&&arguments[1]instanceof ll){var h=arguments[0],f=arguments[1],p=arguments[2];if(h instanceof Qc)Sp.computeDistance(h,f,p);else if(h instanceof eh)Sp.computeDistance(h,f,p);else if(h instanceof jc)for(var d=h,y=0;y<d.getNumGeometries();y++){var v=d.getGeometryN(y);Sp.computeDistance(v,f,p)}else p.setMinimum(h.getCoordinate(),f)}else if(arguments[2]instanceof xp&&arguments[0]instanceof _f&&arguments[1]instanceof ll){var g=arguments[0],m=arguments[1],_=arguments[2],b=g.closestPoint(m);_.setMinimum(b,m)}};var wp=function(t){this._maxPtDist=new xp,this._inputGeom=t||null},Cp={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};wp.prototype.computeMaxMidpointDistance=function(t){var e=new Ep(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},wp.prototype.computeMaxVertexDistance=function(t){var e=new Ip(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},wp.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},wp.prototype.getDistancePoints=function(){return this._maxPtDist},wp.prototype.interfaces_=function(){return[]},wp.prototype.getClass=function(){return wp},Cp.MaxPointDistanceFilter.get=function(){return Ip},Cp.MaxMidpointDistanceFilter.get=function(){return Ep},Object.defineProperties(wp,Cp);var Ip=function(t){this._maxPtDist=new xp,this._minPtDist=new xp,this._geom=t||null};Ip.prototype.filter=function(t){this._minPtDist.initialize(),Sp.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Ip.prototype.getMaxPointDistance=function(){return this._maxPtDist},Ip.prototype.interfaces_=function(){return[Kl]},Ip.prototype.getClass=function(){return Ip};var Ep=function(t){this._maxPtDist=new xp,this._minPtDist=new xp,this._geom=t||null};Ep.prototype.filter=function(t,e){if(0===e)return null;var r=t.getCoordinate(e-1),n=t.getCoordinate(e),i=new ll((r.x+n.x)/2,(r.y+n.y)/2);this._minPtDist.initialize(),Sp.computeDistance(this._geom,i,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Ep.prototype.isDone=function(){return!1},Ep.prototype.isGeometryChanged=function(){return!1},Ep.prototype.getMaxPointDistance=function(){return this._maxPtDist},Ep.prototype.interfaces_=function(){return[kc]},Ep.prototype.getClass=function(){return Ep};var Pp=function(t){this._comps=t||null};Pp.prototype.filter=function(t){t instanceof eh&&this._comps.add(t)},Pp.prototype.interfaces_=function(){return[Dc]},Pp.prototype.getClass=function(){return Pp},Pp.getPolygons=function(){if(1===arguments.length){var t=arguments[0];return Pp.getPolygons(t,new cc)}if(2===arguments.length){var e=arguments[0],r=arguments[1];return e instanceof eh?r.add(e):e instanceof jc&&e.apply(new Pp(r)),r}};var Mp=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this._lines=t}else if(2===arguments.length){var e=arguments[0],r=arguments[1];this._lines=e,this._isForcedToLineString=r}};Mp.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof nh){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof Qc&&this._lines.add(t)},Mp.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},Mp.prototype.interfaces_=function(){return[Zl]},Mp.prototype.getClass=function(){return Mp},Mp.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(Mp.getLines(t))}if(2===arguments.length){var e=arguments[0],r=arguments[1];return e.getFactory().buildGeometry(Mp.getLines(e,r))}},Mp.getLines=function(){if(1===arguments.length){var t=arguments[0];return Mp.getLines(t,!1)}if(2===arguments.length){if(yl(arguments[0],oc)&&yl(arguments[1],oc)){for(var e=arguments[0],r=arguments[1],n=e.iterator();n.hasNext();){var i=n.next();Mp.getLines(i,r)}return r}if(arguments[0]instanceof Yl&&"boolean"==typeof arguments[1]){var o=arguments[0],s=arguments[1],a=new cc;return o.apply(new Mp(a,s)),a}if(arguments[0]instanceof Yl&&yl(arguments[1],oc)){var u=arguments[0],l=arguments[1];return u instanceof Qc?l.add(u):u.apply(new Mp(l)),l}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&yl(arguments[0],oc)&&yl(arguments[1],oc)){for(var c=arguments[0],h=arguments[1],f=arguments[2],p=c.iterator();p.hasNext();){var d=p.next();Mp.getLines(d,h,f)}return h}if("boolean"==typeof arguments[2]&&arguments[0]instanceof Yl&&yl(arguments[1],oc)){var y=arguments[0],v=arguments[1],g=arguments[2];return y.apply(new Mp(v,g)),v}}};var Lp=function(){if(this._boundaryRule=$l.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new rl("Rule must be non-null");this._boundaryRule=t}};Lp.prototype.locateInternal=function(){var t=this;if(arguments[0]instanceof ll&&arguments[1]instanceof eh){var e=arguments[0],r=arguments[1];if(r.isEmpty())return pl.EXTERIOR;var n=r.getExteriorRing(),i=this.locateInPolygonRing(e,n);if(i===pl.EXTERIOR)return pl.EXTERIOR;if(i===pl.BOUNDARY)return pl.BOUNDARY;for(var o=0;o<r.getNumInteriorRing();o++){var s=r.getInteriorRingN(o),a=t.locateInPolygonRing(e,s);if(a===pl.INTERIOR)return pl.EXTERIOR;if(a===pl.BOUNDARY)return pl.BOUNDARY}return pl.INTERIOR}if(arguments[0]instanceof ll&&arguments[1]instanceof Qc){var u=arguments[0],l=arguments[1];if(!l.getEnvelopeInternal().intersects(u))return pl.EXTERIOR;var c=l.getCoordinates();return l.isClosed()||!u.equals(c[0])&&!u.equals(c[c.length-1])?Hl.isOnLine(u,c)?pl.INTERIOR:pl.EXTERIOR:pl.BOUNDARY}if(arguments[0]instanceof ll&&arguments[1]instanceof $c){var h=arguments[0],f=arguments[1],p=f.getCoordinate();return p.equals2D(h)?pl.INTERIOR:pl.EXTERIOR}},Lp.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?Hl.locatePointInRing(t,e.getCoordinates()):pl.EXTERIOR},Lp.prototype.intersects=function(t,e){return this.locate(t,e)!==pl.EXTERIOR},Lp.prototype.updateLocationInfo=function(t){t===pl.INTERIOR&&(this._isIn=!0),t===pl.BOUNDARY&&this._numBoundaries++},Lp.prototype.computeLocation=function(t,e){var r=this;if(e instanceof $c&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof Qc)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof eh)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Gc)for(var n=e,i=0;i<n.getNumGeometries();i++){var o=n.getGeometryN(i);r.updateLocationInfo(r.locateInternal(t,o))}else if(e instanceof ih)for(var s=e,a=0;a<s.getNumGeometries();a++){var u=s.getGeometryN(a);r.updateLocationInfo(r.locateInternal(t,u))}else if(e instanceof jc)for(var l=new Wf(e);l.hasNext();){var c=l.next();c!==e&&r.computeLocation(t,c)}},Lp.prototype.locate=function(t,e){return e.isEmpty()?pl.EXTERIOR:e instanceof Qc||e instanceof eh?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?pl.BOUNDARY:this._numBoundaries>0||this._isIn?pl.INTERIOR:pl.EXTERIOR)},Lp.prototype.interfaces_=function(){return[]},Lp.prototype.getClass=function(){return Lp};var Np=function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length){var e=arguments[0],r=arguments[1];t.call(this,e,t.INSIDE_AREA,r)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],o=arguments[2];this._component=n,this._segIndex=i,this._pt=o}},Tp={INSIDE_AREA:{configurable:!0}};Np.prototype.isInsideArea=function(){return this._segIndex===Np.INSIDE_AREA},Np.prototype.getCoordinate=function(){return this._pt},Np.prototype.getGeometryComponent=function(){return this._component},Np.prototype.getSegmentIndex=function(){return this._segIndex},Np.prototype.interfaces_=function(){return[]},Np.prototype.getClass=function(){return Np},Tp.INSIDE_AREA.get=function(){return-1},Object.defineProperties(Np,Tp);var Op=function(t){this._pts=t||null};Op.prototype.filter=function(t){t instanceof $c&&this._pts.add(t)},Op.prototype.interfaces_=function(){return[Dc]},Op.prototype.getClass=function(){return Op},Op.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof $c?nf.singletonList(t):Op.getPoints(t,new cc)}if(2===arguments.length){var e=arguments[0],r=arguments[1];return e instanceof $c?r.add(e):e instanceof jc&&e.apply(new Op(r)),r}};var Ap=function(){this._locations=null;var t=arguments[0];this._locations=t};Ap.prototype.filter=function(t){(t instanceof $c||t instanceof Qc||t instanceof eh)&&this._locations.add(new Np(t,0,t.getCoordinate()))},Ap.prototype.interfaces_=function(){return[Dc]},Ap.prototype.getClass=function(){return Ap},Ap.getLocations=function(t){var e=new cc;return t.apply(new Ap(e)),e};var Rp=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Lp,this._minDistanceLocation=null,this._minDistance=nl.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];this._geom=[t,e],this._terminateDistance=0}else if(3===arguments.length){var r=arguments[0],n=arguments[1],i=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=r,this._geom[1]=n,this._terminateDistance=i}};Rp.prototype.computeContainmentDistance=function(){var t=this;if(0===arguments.length){var e=new Array(2).fill(null);if(this.computeContainmentDistance(0,e),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,e)}else if(2===arguments.length){var r=arguments[0],n=arguments[1],i=1-r,o=Pp.getPolygons(this._geom[r]);if(o.size()>0){var s=Ap.getLocations(this._geom[i]);if(this.computeContainmentDistance(s,o,n),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[i]=n[0],this._minDistanceLocation[r]=n[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&yl(arguments[0],uc)&&yl(arguments[1],uc)){for(var a=arguments[0],u=arguments[1],l=arguments[2],c=0;c<a.size();c++)for(var h=a.get(c),f=0;f<u.size();f++)if(t.computeContainmentDistance(h,u.get(f),l),t._minDistance<=t._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Np&&arguments[1]instanceof eh){var p=arguments[0],d=arguments[1],y=arguments[2],v=p.getCoordinate();if(pl.EXTERIOR!==this._ptLocator.locate(v,d))return this._minDistance=0,y[0]=p,y[1]=new Np(d,v),null}},Rp.prototype.computeMinDistanceLinesPoints=function(t,e,r){for(var n=this,i=0;i<t.size();i++)for(var o=t.get(i),s=0;s<e.size();s++){var a=e.get(s);if(n.computeMinDistance(o,a,r),n._minDistance<=n._terminateDistance)return null}},Rp.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=Mp.getLines(this._geom[0]),r=Mp.getLines(this._geom[1]),n=Op.getPoints(this._geom[0]),i=Op.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,r,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,i,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(r,n,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(n,i,t),void this.updateMinDistance(t,!1))))},Rp.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},Rp.prototype.updateMinDistance=function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},Rp.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},Rp.prototype.computeMinDistance=function(){var t=this;if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof Qc&&arguments[1]instanceof $c){var e=arguments[0],r=arguments[1],n=arguments[2];if(e.getEnvelopeInternal().distance(r.getEnvelopeInternal())>this._minDistance)return null;for(var i=e.getCoordinates(),o=r.getCoordinate(),s=0;s<i.length-1;s++){var a=Hl.distancePointLine(o,i[s],i[s+1]);if(a<t._minDistance){t._minDistance=a;var u=new _f(i[s],i[s+1]),l=u.closestPoint(o);n[0]=new Np(e,s,l),n[1]=new Np(r,0,o)}if(t._minDistance<=t._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof Qc&&arguments[1]instanceof Qc){var c=arguments[0],h=arguments[1],f=arguments[2];if(c.getEnvelopeInternal().distance(h.getEnvelopeInternal())>this._minDistance)return null;for(var p=c.getCoordinates(),d=h.getCoordinates(),y=0;y<p.length-1;y++)for(var v=0;v<d.length-1;v++){var g=Hl.distanceLineLine(p[y],p[y+1],d[v],d[v+1]);if(g<t._minDistance){t._minDistance=g;var m=new _f(p[y],p[y+1]),_=new _f(d[v],d[v+1]),b=m.closestPoints(_);f[0]=new Np(c,y,b[0]),f[1]=new Np(h,v,b[1])}if(t._minDistance<=t._terminateDistance)return null}}},Rp.prototype.computeMinDistancePoints=function(t,e,r){for(var n=this,i=0;i<t.size();i++)for(var o=t.get(i),s=0;s<e.size();s++){var a=e.get(s),u=o.getCoordinate().distance(a.getCoordinate());if(u<n._minDistance&&(n._minDistance=u,r[0]=new Np(o,0,o.getCoordinate()),r[1]=new Np(a,0,a.getCoordinate())),n._minDistance<=n._terminateDistance)return null}},Rp.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new rl("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},Rp.prototype.computeMinDistanceLines=function(t,e,r){for(var n=this,i=0;i<t.size();i++)for(var o=t.get(i),s=0;s<e.size();s++){var a=e.get(s);if(n.computeMinDistance(o,a,r),n._minDistance<=n._terminateDistance)return null}},Rp.prototype.interfaces_=function(){return[]},Rp.prototype.getClass=function(){return Rp},Rp.distance=function(t,e){return new Rp(t,e).distance()},Rp.isWithinDistance=function(t,e,r){return new Rp(t,e,r).distance()<=r},Rp.nearestPoints=function(t,e){return new Rp(t,e).nearestPoints()};var Fp=function(){this._pt=[new ll,new ll],this._distance=nl.NaN,this._isNull=!0};Fp.prototype.getCoordinates=function(){return this._pt},Fp.prototype.getCoordinate=function(t){return this._pt[t]},Fp.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],r=arguments[1];if(this._isNull)return this.initialize(e,r),null;var n=e.distance(r);n<this._distance&&this.initialize(e,r,n)}},Fp.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var r=arguments[0],n=arguments[1],i=arguments[2];this._pt[0].setCoordinate(r),this._pt[1].setCoordinate(n),this._distance=i,this._isNull=!1}},Fp.prototype.toString=function(){return kl.toLineString(this._pt[0],this._pt[1])},Fp.prototype.getDistance=function(){return this._distance},Fp.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],r=arguments[1];if(this._isNull)return this.initialize(e,r),null;var n=e.distance(r);n>this._distance&&this.initialize(e,r,n)}},Fp.prototype.interfaces_=function(){return[]},Fp.prototype.getClass=function(){return Fp};var Dp=function(){};Dp.prototype.interfaces_=function(){return[]},Dp.prototype.getClass=function(){return Dp},Dp.computeDistance=function(){if(arguments[2]instanceof Fp&&arguments[0]instanceof Qc&&arguments[1]instanceof ll)for(var t=arguments[0],e=arguments[1],r=arguments[2],n=new _f,i=t.getCoordinates(),o=0;o<i.length-1;o++){n.setCoordinates(i[o],i[o+1]);var s=n.closestPoint(e);r.setMinimum(s,e)}else if(arguments[2]instanceof Fp&&arguments[0]instanceof eh&&arguments[1]instanceof ll){var a=arguments[0],u=arguments[1],l=arguments[2];Dp.computeDistance(a.getExteriorRing(),u,l);for(var c=0;c<a.getNumInteriorRing();c++)Dp.computeDistance(a.getInteriorRingN(c),u,l)}else if(arguments[2]instanceof Fp&&arguments[0]instanceof Yl&&arguments[1]instanceof ll){var h=arguments[0],f=arguments[1],p=arguments[2];if(h instanceof Qc)Dp.computeDistance(h,f,p);else if(h instanceof eh)Dp.computeDistance(h,f,p);else if(h instanceof jc)for(var d=h,y=0;y<d.getNumGeometries();y++){var v=d.getGeometryN(y);Dp.computeDistance(v,f,p)}else p.setMinimum(h.getCoordinate(),f)}else if(arguments[2]instanceof Fp&&arguments[0]instanceof _f&&arguments[1]instanceof ll){var g=arguments[0],m=arguments[1],_=arguments[2],b=g.closestPoint(m);_.setMinimum(b,m)}};var kp=function(){this._g0=null,this._g1=null,this._ptDist=new Fp,this._densifyFrac=0;var t=arguments[0],e=arguments[1];this._g0=t,this._g1=e},jp={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};kp.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},kp.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new rl("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},kp.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},kp.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},kp.prototype.computeOrientedDistance=function(t,e,r){var n=new Gp(e);if(t.apply(n),r.setMaximum(n.getMaxPointDistance()),this._densifyFrac>0){var i=new Bp(e,this._densifyFrac);t.apply(i),r.setMaximum(i.getMaxPointDistance())}},kp.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},kp.prototype.interfaces_=function(){return[]},kp.prototype.getClass=function(){return kp},kp.distance=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],r=new kp(t,e);return r.distance()}if(3===arguments.length){var n=arguments[0],i=arguments[1],o=arguments[2],s=new kp(n,i);return s.setDensifyFraction(o),s.distance()}},jp.MaxPointDistanceFilter.get=function(){return Gp},jp.MaxDensifiedByFractionDistanceFilter.get=function(){return Bp},Object.defineProperties(kp,jp);var Gp=function(){this._maxPtDist=new Fp,this._minPtDist=new Fp,this._euclideanDist=new Dp,this._geom=null;var t=arguments[0];this._geom=t};Gp.prototype.filter=function(t){this._minPtDist.initialize(),Dp.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Gp.prototype.getMaxPointDistance=function(){return this._maxPtDist},Gp.prototype.interfaces_=function(){return[Kl]},Gp.prototype.getClass=function(){return Gp};var Bp=function(){this._maxPtDist=new Fp,this._minPtDist=new Fp,this._geom=null,this._numSubSegs=0;var t=arguments[0],e=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))};Bp.prototype.filter=function(t,e){var r=this;if(0===e)return null;for(var n=t.getCoordinate(e-1),i=t.getCoordinate(e),o=(i.x-n.x)/this._numSubSegs,s=(i.y-n.y)/this._numSubSegs,a=0;a<this._numSubSegs;a++){var u=n.x+a*o,l=n.y+a*s,c=new ll(u,l);r._minPtDist.initialize(),Dp.computeDistance(r._geom,c,r._minPtDist),r._maxPtDist.setMaximum(r._minPtDist)}},Bp.prototype.isDone=function(){return!1},Bp.prototype.isGeometryChanged=function(){return!1},Bp.prototype.getMaxPointDistance=function(){return this._maxPtDist},Bp.prototype.interfaces_=function(){return[kc]},Bp.prototype.getClass=function(){return Bp};var Up=function(t,e,r){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=r||null},qp={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};Up.prototype.checkMaximumDistance=function(t,e,r){var n=new kp(e,t);if(n.setDensifyFraction(.25),this._maxDistanceFound=n.orientedDistance(),this._maxDistanceFound>r){this._isValid=!1;var i=n.getCoordinates();this._errorLocation=i[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+kl.toLineString(i[0],i[1])+")"}},Up.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=Up.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),Up.VERBOSE&&Ll.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},Up.prototype.checkNegativeValid=function(){if(!(this._input instanceof eh||this._input instanceof ih||this._input instanceof jc))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},Up.prototype.getErrorIndicator=function(){return this._errorIndicator},Up.prototype.checkMinimumDistance=function(t,e,r){var n=new Rp(t,e,r);if(this._minDistanceFound=n.distance(),this._minDistanceFound<r){this._isValid=!1;var i=n.nearestPoints();this._errorLocation=n.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+kl.toLineString(i[0],i[1])+" )"}},Up.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},Up.prototype.getErrorLocation=function(){return this._errorLocation},Up.prototype.getPolygonLines=function(t){for(var e=new cc,r=new Mp(e),n=Pp.getPolygons(t).iterator();n.hasNext();){n.next().apply(r)}return t.getFactory().buildGeometry(e)},Up.prototype.getErrorMessage=function(){return this._errMsg},Up.prototype.interfaces_=function(){return[]},Up.prototype.getClass=function(){return Up},qp.VERBOSE.get=function(){return!1},qp.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Up,qp);var zp=function(t,e,r){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=r||null},Vp={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};zp.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},zp.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*zp.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new Tl(this._input.getEnvelopeInternal());e.expandBy(this._distance);var r=new Tl(this._result.getEnvelopeInternal());r.expandBy(t),r.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(r)),this.report("Envelope")},zp.prototype.checkDistance=function(){var t=new Up(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},zp.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();this._distance>0&&t>e&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},zp.prototype.checkPolygonal=function(){this._result instanceof eh||this._result instanceof ih||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},zp.prototype.getErrorIndicator=function(){return this._errorIndicator},zp.prototype.getErrorLocation=function(){return this._errorLocation},zp.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},zp.prototype.report=function(t){if(!zp.VERBOSE)return null;Ll.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},zp.prototype.getErrorMessage=function(){return this._errorMsg},zp.prototype.interfaces_=function(){return[]},zp.prototype.getClass=function(){return zp},zp.isValidMsg=function(t,e,r){var n=new zp(t,e,r);return n.isValid()?null:n.getErrorMessage()},zp.isValid=function(t,e,r){return!!new zp(t,e,r).isValid()},Vp.VERBOSE.get=function(){return!1},Vp.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(zp,Vp);var Wp=function(){this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};Wp.prototype.getCoordinates=function(){return this._pts},Wp.prototype.size=function(){return this._pts.length},Wp.prototype.getCoordinate=function(t){return this._pts[t]},Wp.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Wp.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:yf.octant(this.getCoordinate(t),this.getCoordinate(t+1))},Wp.prototype.setData=function(t){this._data=t},Wp.prototype.getData=function(){return this._data},Wp.prototype.toString=function(){return kl.toLineString(new ch(this._pts))},Wp.prototype.interfaces_=function(){return[vf]},Wp.prototype.getClass=function(){return Wp};var Hp=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new cc,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null};Hp.prototype.getInteriorIntersection=function(){return this._interiorIntersection},Hp.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},Hp.prototype.getIntersectionSegments=function(){return this._intSegments},Hp.prototype.count=function(){return this._intersectionCount},Hp.prototype.getIntersections=function(){return this._intersections},Hp.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Hp.prototype.setKeepIntersections=function(t){this._keepIntersections=t},Hp.prototype.processIntersections=function(t,e,r,n){if(!this._findAllIntersections&&this.hasIntersection())return null;if(t===r&&e===n)return null;if(this._isCheckEndSegmentsOnly&&!(this.isEndSegment(t,e)||this.isEndSegment(r,n)))return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=r.getCoordinates()[n],a=r.getCoordinates()[n+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=i,this._intSegments[1]=o,this._intSegments[2]=s,this._intSegments[3]=a,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},Hp.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},Hp.prototype.hasIntersection=function(){return null!==this._interiorIntersection},Hp.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},Hp.prototype.interfaces_=function(){return[Kf]},Hp.prototype.getClass=function(){return Hp},Hp.createAllIntersectionsFinder=function(t){var e=new Hp(t);return e.setFindAllIntersections(!0),e},Hp.createAnyIntersectionFinder=function(t){return new Hp(t)},Hp.createIntersectionCounter=function(t){var e=new Hp(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var Xp=function(){this._li=new zl,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t};Xp.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},Xp.prototype.getIntersections=function(){return this._segInt.getIntersections()},Xp.prototype.isValid=function(){return this.execute(),this._isValid},Xp.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Xp.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new Hp(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new Ef;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},Xp.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new Oh(this.getErrorMessage(),this._segInt.getInteriorIntersection())},Xp.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+kl.toLineString(t[0],t[1])+" and "+kl.toLineString(t[2],t[3])},Xp.prototype.interfaces_=function(){return[]},Xp.prototype.getClass=function(){return Xp},Xp.computeIntersections=function(t){var e=new Xp(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var Zp=function t(){this._nv=null;var e=arguments[0];this._nv=new Xp(t.toSegmentStrings(e))};Zp.prototype.checkValid=function(){this._nv.checkValid()},Zp.prototype.interfaces_=function(){return[]},Zp.prototype.getClass=function(){return Zp},Zp.toSegmentStrings=function(t){for(var e=new cc,r=t.iterator();r.hasNext();){var n=r.next();e.add(new Wp(n.getCoordinates(),n))}return e},Zp.checkValid=function(t){new Zp(t).checkValid()};var Yp=function(t){this._mapOp=t};Yp.prototype.map=function(t){for(var e=new cc,r=0;r<t.getNumGeometries();r++){var n=this._mapOp.map(t.getGeometryN(r));n.isEmpty()||e.add(n)}return t.getFactory().createGeometryCollection(_h.toGeometryArray(e))},Yp.prototype.interfaces_=function(){return[]},Yp.prototype.getClass=function(){return Yp},Yp.map=function(t,e){return new Yp(e).map(t)};var Jp=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new cc,this._resultLineList=new cc;var t=arguments[0],e=arguments[1],r=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=r};Jp.prototype.collectLines=function(t){for(var e=this,r=this._op.getGraph().getEdgeEnds().iterator();r.hasNext();){var n=r.next();e.collectLineEdge(n,t,e._lineEdgesList),e.collectBoundaryTouchEdge(n,t,e._lineEdgesList)}},Jp.prototype.labelIsolatedLine=function(t,e){var r=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,r)},Jp.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},Jp.prototype.collectLineEdge=function(t,e,r){var n=t.getLabel(),i=t.getEdge();t.isLineEdge()&&(t.isVisited()||!Nd.isResultOfOp(n,e)||i.isCovered()||(r.add(i),t.setVisitedEdge(!0)))},Jp.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();){t.next().getEdges().findCoveredLineEdges()}for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var r=e.next(),n=r.getEdge();if(r.isLineEdge()&&!n.isCoveredSet()){var i=this._op.isCoveredByA(r.getCoordinate());n.setCovered(i)}}},Jp.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var r=e.next(),n=r.getLabel();r.isIsolated()&&(n.isNull(0)?this.labelIsolatedLine(r,0):this.labelIsolatedLine(r,1))}},Jp.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var r=e.next(),n=this._geometryFactory.createLineString(r.getCoordinates());this._resultLineList.add(n),r.setInResult(!0)}},Jp.prototype.collectBoundaryTouchEdge=function(t,e,r){var n=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(Bl.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(Nd.isResultOfOp(n,e)&&e===Nd.INTERSECTION&&(r.add(t.getEdge()),t.setVisitedEdge(!0))))},Jp.prototype.interfaces_=function(){return[]},Jp.prototype.getClass=function(){return Jp};var Qp=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new cc;var t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e};Qp.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var r=this._geometryFactory.createPoint(e);this._resultPointList.add(r)}},Qp.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var r=e.next();if(!r.isInResult()&&(!r.isIncidentEdgeInResult()&&(0===r.getEdges().getDegree()||t===Nd.INTERSECTION))){var n=r.getLabel();Nd.isResultOfOp(n,t)&&this.filterCoveredNodeToPoint(r)}}},Qp.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},Qp.prototype.interfaces_=function(){return[]},Qp.prototype.getClass=function(){return Qp};var Kp=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};Kp.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},Kp.prototype.transformPolygon=function(t,e){var r=!0,n=this.transformLinearRing(t.getExteriorRing(),t);null!==n&&n instanceof nh&&!n.isEmpty()||(r=!1);for(var i=new cc,o=0;o<t.getNumInteriorRing();o++){var s=this.transformLinearRing(t.getInteriorRingN(o),t);null===s||s.isEmpty()||(s instanceof nh||(r=!1),i.add(s))}if(r)return this._factory.createPolygon(n,i.toArray([]));var a=new cc;return null!==n&&a.add(n),a.addAll(i),this._factory.buildGeometry(a)},Kp.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},Kp.prototype.getInputGeometry=function(){return this._inputGeom},Kp.prototype.transformMultiLineString=function(t,e){for(var r=new cc,n=0;n<t.getNumGeometries();n++){var i=this.transformLineString(t.getGeometryN(n),t);null!==i&&(i.isEmpty()||r.add(i))}return this._factory.buildGeometry(r)},Kp.prototype.transformCoordinates=function(t,e){return this.copy(t)},Kp.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},Kp.prototype.transformMultiPoint=function(t,e){for(var r=new cc,n=0;n<t.getNumGeometries();n++){var i=this.transformPoint(t.getGeometryN(n),t);null!==i&&(i.isEmpty()||r.add(i))}return this._factory.buildGeometry(r)},Kp.prototype.transformMultiPolygon=function(t,e){for(var r=new cc,n=0;n<t.getNumGeometries();n++){var i=this.transformPolygon(t.getGeometryN(n),t);null!==i&&(i.isEmpty()||r.add(i))}return this._factory.buildGeometry(r)},Kp.prototype.copy=function(t){return t.copy()},Kp.prototype.transformGeometryCollection=function(t,e){for(var r=new cc,n=0;n<t.getNumGeometries();n++){var i=this.transform(t.getGeometryN(n));null!==i&&(this._pruneEmptyGeometry&&i.isEmpty()||r.add(i))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(_h.toGeometryArray(r)):this._factory.buildGeometry(r)},Kp.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof $c)return this.transformPoint(t,null);if(t instanceof rh)return this.transformMultiPoint(t,null);if(t instanceof nh)return this.transformLinearRing(t,null);if(t instanceof Qc)return this.transformLineString(t,null);if(t instanceof Gc)return this.transformMultiLineString(t,null);if(t instanceof eh)return this.transformPolygon(t,null);if(t instanceof ih)return this.transformMultiPolygon(t,null);if(t instanceof jc)return this.transformGeometryCollection(t,null);throw new rl("Unknown Geometry subtype: "+t.getClass().getName())},Kp.prototype.transformLinearRing=function(t,e){var r=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===r)return this._factory.createLinearRing(null);var n=r.size();return n>0&&n<4&&!this._preserveType?this._factory.createLineString(r):this._factory.createLinearRing(r)},Kp.prototype.interfaces_=function(){return[]},Kp.prototype.getClass=function(){return Kp};var $p=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new _f,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof Qc&&"number"==typeof arguments[1]){var e=arguments[0],r=arguments[1];t.call(this,e.getCoordinates(),r)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var n=arguments[0],i=arguments[1];this._srcPts=n,this._isClosed=t.isClosed(n),this._snapTolerance=i}};$p.prototype.snapVertices=function(t,e){for(var r=this._isClosed?t.size()-1:t.size(),n=0;n<r;n++){var i=t.get(n),o=this.findSnapForVertex(i,e);null!==o&&(t.set(n,new ll(o)),0===n&&this._isClosed&&t.set(t.size()-1,new ll(o)))}},$p.prototype.findSnapForVertex=function(t,e){for(var r=0;r<e.length;r++){if(t.equals2D(e[r]))return null;if(t.distance(e[r])<this._snapTolerance)return e[r]}return null},$p.prototype.snapTo=function(t){var e=new fc(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},$p.prototype.snapSegments=function(t,e){if(0===e.length)return null;var r=e.length;e[0].equals2D(e[e.length-1])&&(r=e.length-1);for(var n=0;n<r;n++){var i=e[n],o=this.findSegmentIndexToSnap(i,t);o>=0&&t.add(o+1,new ll(i),!1)}},$p.prototype.findSegmentIndexToSnap=function(t,e){for(var r=this,n=nl.MAX_VALUE,i=-1,o=0;o<e.size()-1;o++){if(r._seg.p0=e.get(o),r._seg.p1=e.get(o+1),r._seg.p0.equals2D(t)||r._seg.p1.equals2D(t)){if(r._allowSnappingToSourceVertices)continue;return-1}var s=r._seg.distance(t);s<r._snapTolerance&&s<n&&(n=s,i=o)}return i},$p.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},$p.prototype.interfaces_=function(){return[]},$p.prototype.getClass=function(){return $p},$p.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var td=function(t){this._srcGeom=t||null},ed={SNAP_PRECISION_FACTOR:{configurable:!0}};td.prototype.snapTo=function(t,e){var r=this.extractTargetCoordinates(t);return new rd(e,r).transform(this._srcGeom)},td.prototype.snapToSelf=function(t,e){var r=this.extractTargetCoordinates(this._srcGeom),n=new rd(t,r,!0).transform(this._srcGeom),i=n;return e&&yl(i,th)&&(i=n.buffer(0)),i},td.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},td.prototype.extractTargetCoordinates=function(t){for(var e=new Tc,r=t.getCoordinates(),n=0;n<r.length;n++)e.add(r[n]);return e.toArray(new Array(0).fill(null))},td.prototype.computeMinimumSegmentLength=function(t){for(var e=nl.MAX_VALUE,r=0;r<t.length-1;r++){var n=t[r].distance(t[r+1]);n<e&&(e=n)}return e},td.prototype.interfaces_=function(){return[]},td.prototype.getClass=function(){return td},td.snap=function(t,e,r){var n=new Array(2).fill(null),i=new td(t);n[0]=i.snapTo(e,r);var o=new td(e);return n[1]=o.snapTo(n[0],r),n},td.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=td.computeSizeBasedSnapTolerance(t),r=t.getPrecisionModel();if(r.getType()===yh.FIXED){var n=1/r.getScale()*2/1.415;n>e&&(e=n)}return e}if(2===arguments.length){var i=arguments[0],o=arguments[1];return Math.min(td.computeOverlaySnapTolerance(i),td.computeOverlaySnapTolerance(o))}},td.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*td.SNAP_PRECISION_FACTOR},td.snapToSelf=function(t,e,r){return new td(t).snapToSelf(e,r)},ed.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(td,ed);var rd=function(t){function e(e,r,n){t.call(this),this._snapTolerance=e||null,this._snapPts=r||null,this._isSelfSnap=void 0!==n&&n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.snapLine=function(t,e){var r=new $p(t,this._snapTolerance);return r.setAllowSnappingToSourceVertices(this._isSelfSnap),r.snapTo(e)},e.prototype.transformCoordinates=function(t,e){var r=t.toCoordinateArray(),n=this.snapLine(r,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Kp),nd=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};nd.prototype.getCommon=function(){return nl.longBitsToDouble(this._commonBits)},nd.prototype.add=function(t){var e=nl.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=nd.signExpBits(this._commonBits),this._isFirst=!1,null):nd.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=nd.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=nd.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},nd.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=nl.longBitsToDouble(t),r=nl.toBinaryString(t),n="0000000000000000000000000000000000000000000000000000000000000000"+r,i=n.substring(n.length-64),o=i.substring(0,1)+"  "+i.substring(1,12)+"(exp) "+i.substring(12)+" [ "+e+" ]";return o}},nd.prototype.interfaces_=function(){return[]},nd.prototype.getClass=function(){return nd},nd.getBit=function(t,e){return 0!=(t&1<<e)?1:0},nd.signExpBits=function(t){return t>>52},nd.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},nd.numCommonMostSigMantissaBits=function(t,e){for(var r=0,n=52;n>=0;n--){if(nd.getBit(t,n)!==nd.getBit(e,n))return r;r++}return 52};var id=function(){this._commonCoord=null,this._ccFilter=new sd},od={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};id.prototype.addCommonBits=function(t){var e=new ad(this._commonCoord);t.apply(e),t.geometryChanged()},id.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new ll(this._commonCoord);e.x=-e.x,e.y=-e.y;var r=new ad(e);return t.apply(r),t.geometryChanged(),t},id.prototype.getCommonCoordinate=function(){return this._commonCoord},id.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},id.prototype.interfaces_=function(){return[]},id.prototype.getClass=function(){return id},od.CommonCoordinateFilter.get=function(){return sd},od.Translater.get=function(){return ad},Object.defineProperties(id,od);var sd=function(){this._commonBitsX=new nd,this._commonBitsY=new nd};sd.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},sd.prototype.getCommonCoordinate=function(){return new ll(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},sd.prototype.interfaces_=function(){return[Kl]},sd.prototype.getClass=function(){return sd};var ad=function(){this.trans=null;var t=arguments[0];this.trans=t};ad.prototype.filter=function(t,e){var r=t.getOrdinate(e,0)+this.trans.x,n=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,r),t.setOrdinate(e,1,n)},ad.prototype.isDone=function(){return!1},ad.prototype.isGeometryChanged=function(){return!0},ad.prototype.interfaces_=function(){return[kc]},ad.prototype.getClass=function(){return ad};var ud=function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};ud.prototype.selfSnap=function(t){return new td(t).snapTo(t,this._snapTolerance)},ud.prototype.removeCommonBits=function(t){this._cbr=new id,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},ud.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},ud.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),r=Nd.overlayOp(e[0],e[1],t);return this.prepareResult(r)},ud.prototype.checkValid=function(t){t.isValid()||Ll.out.println("Snapped geometry is invalid")},ud.prototype.computeSnapTolerance=function(){this._snapTolerance=td.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},ud.prototype.snap=function(t){var e=this.removeCommonBits(t);return td.snap(e[0],e[1],this._snapTolerance)},ud.prototype.interfaces_=function(){return[]},ud.prototype.getClass=function(){return ud},ud.overlayOp=function(t,e,r){return new ud(t,e).getResultGeometry(r)},ud.union=function(t,e){return ud.overlayOp(t,e,Nd.UNION)},ud.intersection=function(t,e){return ud.overlayOp(t,e,Nd.INTERSECTION)},ud.symDifference=function(t,e){return ud.overlayOp(t,e,Nd.SYMDIFFERENCE)},ud.difference=function(t,e){return ud.overlayOp(t,e,Nd.DIFFERENCE)};var ld=function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e};ld.prototype.getResultGeometry=function(t){var e=null,r=!1,n=null;try{e=Nd.overlayOp(this._geom[0],this._geom[1],t);r=!0}catch(t){if(!(t instanceof jl))throw t;n=t}if(!r)try{e=ud.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof jl?n:t}return e},ld.prototype.interfaces_=function(){return[]},ld.prototype.getClass=function(){return ld},ld.overlayOp=function(t,e,r){return new ld(t,e).getResultGeometry(r)},ld.union=function(t,e){return ld.overlayOp(t,e,Nd.UNION)},ld.intersection=function(t,e){return ld.overlayOp(t,e,Nd.INTERSECTION)},ld.symDifference=function(t,e){return ld.overlayOp(t,e,Nd.SYMDIFFERENCE)},ld.difference=function(t,e){return ld.overlayOp(t,e,Nd.DIFFERENCE)};var cd=function(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e};cd.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},cd.prototype.interfaces_=function(){return[]},cd.prototype.getClass=function(){return cd};var hd=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var e=arguments[0],r=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=r}else if(3===arguments.length){var n=arguments[0],i=arguments[1],o=arguments[2];this._eventType=t.INSERT,this._label=n,this._xValue=i,this._obj=o}},fd={INSERT:{configurable:!0},DELETE:{configurable:!0}};hd.prototype.isDelete=function(){return this._eventType===hd.DELETE},hd.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},hd.prototype.getObject=function(){return this._obj},hd.prototype.compareTo=function(t){var e=t;return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0},hd.prototype.getInsertEvent=function(){return this._insertEvent},hd.prototype.isInsert=function(){return this._eventType===hd.INSERT},hd.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},hd.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},hd.prototype.interfaces_=function(){return[ol]},hd.prototype.getClass=function(){return hd},fd.INSERT.get=function(){return 1},fd.DELETE.get=function(){return 2},Object.defineProperties(hd,fd);var pd=function(){};pd.prototype.interfaces_=function(){return[]},pd.prototype.getClass=function(){return pd};var dd=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],r=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=r};dd.prototype.isTrivialIntersection=function(t,e,r,n){if(t===r&&1===this._li.getIntersectionNum()){if(dd.isAdjacentSegments(e,n))return!0;if(t.isClosed()){var i=t.getNumPoints()-1;if(0===e&&n===i||0===n&&e===i)return!0}}return!1},dd.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},dd.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},dd.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},dd.prototype.isBoundaryPointInternal=function(t,e){for(var r=e.iterator();r.hasNext();){var n=r.next().getCoordinate();if(t.isIntersection(n))return!0}return!1},dd.prototype.hasProperIntersection=function(){return this._hasProper},dd.prototype.hasIntersection=function(){return this._hasIntersection},dd.prototype.isDone=function(){return this._isDone},dd.prototype.isBoundaryPoint=function(t,e){return null!==e&&(!!this.isBoundaryPointInternal(t,e[0])||!!this.isBoundaryPointInternal(t,e[1]))},dd.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},dd.prototype.addIntersections=function(t,e,r,n){if(t===r&&e===n)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=r.getCoordinates()[n],a=r.getCoordinates()[n+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),r.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,r,n)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),r.addIntersections(this._li,n,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},dd.prototype.interfaces_=function(){return[]},dd.prototype.getClass=function(){return dd},dd.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var yd=function(t){function e(){t.call(this),this.events=new cc,this.nOverlaps=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvents=function(){nf.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},e.prototype.computeIntersections=function(){var t=this;if(1===arguments.length){var e=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var r=0;r<this.events.size();r++){var n=t.events.get(r);if(n.isInsert()&&t.processOverlaps(r,n.getDeleteEventIndex(),n,e),e.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof dd&&yl(arguments[0],uc)&&yl(arguments[1],uc)){var i=arguments[0],o=arguments[1],s=arguments[2];this.addEdges(i,i),this.addEdges(o,o),this.computeIntersections(s)}else if("boolean"==typeof arguments[2]&&yl(arguments[0],uc)&&arguments[1]instanceof dd){var a=arguments[0],u=arguments[1],l=arguments[2];l?this.addEdges(a,null):this.addEdges(a),this.computeIntersections(u)}},e.prototype.addEdge=function(t,e){for(var r=t.getMonotoneChainEdge(),n=r.getStartIndexes(),i=0;i<n.length-1;i++){var o=new cd(r,i),s=new hd(e,r.getMinX(i),o);this.events.add(s),this.events.add(new hd(r.getMaxX(i),s))}},e.prototype.processOverlaps=function(t,e,r,n){for(var i=r.getObject(),o=t;o<e;o++){var s=this.events.get(o);if(s.isInsert()){var a=s.getObject();r.isSameLabel(s)||(i.computeIntersections(a,n),this.nOverlaps++)}}},e.prototype.addEdges=function(){var t=this;if(1===arguments.length)for(var e=arguments[0],r=e.iterator();r.hasNext();){var n=r.next();t.addEdge(n,n)}else if(2===arguments.length)for(var i=arguments[0],o=arguments[1],s=i.iterator();s.hasNext();){var a=s.next();t.addEdge(a,o)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(pd),vd=function(){this._min=nl.POSITIVE_INFINITY,this._max=nl.NEGATIVE_INFINITY},gd={NodeComparator:{configurable:!0}};vd.prototype.getMin=function(){return this._min},vd.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},vd.prototype.getMax=function(){return this._max},vd.prototype.toString=function(){return kl.toLineString(new ll(this._min,0),new ll(this._max,0))},vd.prototype.interfaces_=function(){return[]},vd.prototype.getClass=function(){return vd},gd.NodeComparator.get=function(){return md},Object.defineProperties(vd,gd);var md=function(){};md.prototype.compare=function(t,e){var r=t,n=e,i=(r._min+r._max)/2,o=(n._min+n._max)/2;return i<o?-1:i>o?1:0},md.prototype.interfaces_=function(){return[al]},md.prototype.getClass=function(){return md};var _d=function(t){function e(){t.call(this),this._item=null;var e=arguments[0],r=arguments[1],n=arguments[2];this._min=e,this._max=r,this._item=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.query=function(t,e,r){if(!this.intersects(t,e))return null;r.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(vd),bd=function(t){function e(){t.call(this),this._node1=null,this._node2=null;var e=arguments[0],r=arguments[1];this._node1=e,this._node2=r,this.buildExtent(this._node1,this._node2)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},e.prototype.query=function(t,e,r){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,r),null!==this._node2&&this._node2.query(t,e,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(vd),xd=function(){this._leaves=new cc,this._root=null,this._level=0};xd.prototype.buildTree=function(){nf.sort(this._leaves,new vd.NodeComparator);for(var t=this._leaves,e=null,r=new cc;;){if(this.buildLevel(t,r),1===r.size())return r.get(0);e=t,t=r,r=e}},xd.prototype.insert=function(t,e,r){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new _d(t,e,r))},xd.prototype.query=function(t,e,r){this.init(),this._root.query(t,e,r)},xd.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},xd.prototype.printNode=function(t){Ll.out.println(kl.toLineString(new ll(t._min,this._level),new ll(t._max,this._level)))},xd.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},xd.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var r=0;r<t.size();r+=2){var n=t.get(r);if(null===(r+1<t.size()?t.get(r):null))e.add(n);else{var i=new bd(t.get(r),t.get(r+1));e.add(i)}}},xd.prototype.interfaces_=function(){return[]},xd.prototype.getClass=function(){return xd};var Sd=function(){this._items=new cc};Sd.prototype.visitItem=function(t){this._items.add(t)},Sd.prototype.getItems=function(){return this._items},Sd.prototype.interfaces_=function(){return[$h]},Sd.prototype.getClass=function(){return Sd};var wd=function(){this._index=null;var t=arguments[0];if(!yl(t,th))throw new rl("Argument must be Polygonal");this._index=new Ed(t)},Cd={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};wd.prototype.locate=function(t){var e=new Wl(t),r=new Id(e);return this._index.query(t.y,t.y,r),e.getLocation()},wd.prototype.interfaces_=function(){return[Vf]},wd.prototype.getClass=function(){return wd},Cd.SegmentVisitor.get=function(){return Id},Cd.IntervalIndexedGeometry.get=function(){return Ed},Object.defineProperties(wd,Cd);var Id=function(){this._counter=null;var t=arguments[0];this._counter=t};Id.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},Id.prototype.interfaces_=function(){return[$h]},Id.prototype.getClass=function(){return Id};var Ed=function(){this._index=new xd;var t=arguments[0];this.init(t)};Ed.prototype.init=function(t){for(var e=Mp.getLines(t).iterator();e.hasNext();){var r=e.next().getCoordinates();this.addLine(r)}},Ed.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var r=new _f(t[e-1],t[e]),n=Math.min(r.p0.y,r.p1.y),i=Math.max(r.p0.y,r.p1.y);this._index.insert(n,i,r)}},Ed.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],r=new Sd;return this._index.query(t,e,r),r.getItems()}if(3===arguments.length){var n=arguments[0],i=arguments[1],o=arguments[2];this._index.query(n,i,o)}},Ed.prototype.interfaces_=function(){return[]},Ed.prototype.getClass=function(){return Ed};var Pd=function(t){function e(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new dh,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Lp,2===arguments.length){var e=arguments[0],r=arguments[1],n=$l.OGC_SFS_BOUNDARY_RULE;this._argIndex=e,this._parentGeom=r,this._boundaryNodeRule=n,null!==r&&this.add(r)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];this._argIndex=i,this._parentGeom=o,this._boundaryNodeRule=s,null!==o&&this.add(o)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertBoundaryPoint=function(t,r){var n=this._nodes.addNode(r).getLabel(),i=1;n.getLocation(t,Ph.ON)===pl.BOUNDARY&&i++;var o=e.determineBoundary(this._boundaryNodeRule,i);n.setLocation(t,o)},e.prototype.computeSelfNodes=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var r=arguments[0],n=arguments[1],i=arguments[2],o=new dd(r,!0,!1);o.setIsDoneIfProperInt(i);var s=this.createEdgeSetIntersector(),a=this._parentGeom instanceof nh||this._parentGeom instanceof eh||this._parentGeom instanceof ih,u=n||!a;return s.computeIntersections(this._edges,o,u),this.addSelfIntersectionNodes(this._argIndex),o}},e.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();){e.next().eiList.addSplitEdges(t)}},e.prototype.computeEdgeIntersections=function(t,e,r){var n=new dd(e,r,!0);return n.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,n),n},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof $c){var t=arguments[0],e=t.getCoordinate();this.insertPoint(this._argIndex,e,pl.INTERIOR)}else if(arguments[0]instanceof ll){var r=arguments[0];this.insertPoint(this._argIndex,r,pl.INTERIOR)}},e.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),pl.EXTERIOR,pl.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var r=t.getInteriorRingN(e);this.addPolygonRing(r,pl.INTERIOR,pl.EXTERIOR)}},e.prototype.addEdge=function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],pl.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],pl.BOUNDARY)},e.prototype.addLineString=function(t){var e=pc.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var r=new sp(e,new Dh(this._argIndex,pl.INTERIOR));this._lineEdgeMap.put(t,r),this.insertEdge(r),Bl.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),r=0,n=t.iterator();n.hasNext();){var i=n.next();e[r++]=i.getCoordinate().copy()}return e},e.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(t,e,r){if(this.isBoundaryNode(t,e))return null;r===pl.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,r)},e.prototype.addPolygonRing=function(t,e,r){if(t.isEmpty())return null;var n=pc.removeRepeatedPoints(t.getCoordinates());if(n.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=n[0],null;var i=e,o=r;Hl.isCCW(n)&&(i=r,o=e);var s=new sp(n,new Dh(this._argIndex,pl.BOUNDARY,i,o));this._lineEdgeMap.put(t,s),this.insertEdge(s),this.insertPoint(this._argIndex,n[0],pl.BOUNDARY)},e.prototype.insertPoint=function(t,e,r){var n=this._nodes.addNode(e),i=n.getLabel();null===i?n._label=new Dh(t,r):i.setLocation(t,r)},e.prototype.createEdgeSetIntersector=function(){return new yd},e.prototype.addSelfIntersectionNodes=function(t){for(var e=this._edges.iterator();e.hasNext();)for(var r=e.next(),n=r.getLabel().getLocation(t),i=r.eiList.iterator();i.hasNext();){var o=i.next();this.addSelfIntersectionNode(t,o.coord,n)}},e.prototype.add=function(){if(1!==arguments.length)return t.prototype.add.apply(this,arguments);var e=arguments[0];if(e.isEmpty())return null;if(e instanceof ih&&(this._useBoundaryDeterminationRule=!1),e instanceof eh)this.addPolygon(e);else if(e instanceof Qc)this.addLineString(e);else if(e instanceof $c)this.addPoint(e);else if(e instanceof rh)this.addCollection(e);else if(e instanceof Gc)this.addCollection(e);else if(e instanceof ih)this.addCollection(e);else{if(!(e instanceof jc))throw new Error(e.getClass().getName());this.addCollection(e)}},e.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var r=t.getGeometryN(e);this.add(r)}},e.prototype.locate=function(t){return yl(this._parentGeom,th)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new wd(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},e.prototype.findEdge=function(){if(1===arguments.length){var e=arguments[0];return this._lineEdgeMap.get(e)}return t.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(t,e){return t.isInBoundary(e)?pl.BOUNDARY:pl.INTERIOR},e}(Zh),Md=function(){if(this._li=new zl,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new Pd(0,t)}else if(2===arguments.length){var e=arguments[0],r=arguments[1],n=$l.OGC_SFS_BOUNDARY_RULE;e.getPrecisionModel().compareTo(r.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(r.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Pd(0,e,n),this._arg[1]=new Pd(1,r,n)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];i.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Pd(0,i,s),this._arg[1]=new Pd(1,o,s)}};Md.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},Md.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},Md.prototype.interfaces_=function(){return[]},Md.prototype.getClass=function(){return Md};var Ld=function(){};Ld.prototype.interfaces_=function(){return[]},Ld.prototype.getClass=function(){return Ld},Ld.map=function(){if(arguments[0]instanceof Yl&&yl(arguments[1],Ld.MapOp)){for(var t=arguments[0],e=arguments[1],r=new cc,n=0;n<t.getNumGeometries();n++){var i=e.map(t.getGeometryN(n));null!==i&&r.add(i)}return t.getFactory().buildGeometry(r)}if(yl(arguments[0],oc)&&yl(arguments[1],Ld.MapOp)){for(var o=arguments[0],s=arguments[1],a=new cc,u=o.iterator();u.hasNext();){var l=u.next(),c=s.map(l);null!==c&&a.add(c)}return a}},Ld.MapOp=function(){};var Nd=function(t){function e(){var e=arguments[0],r=arguments[1];t.call(this,e,r),this._ptLocator=new Lp,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Qf,this._resultPolyList=new cc,this._resultLineList=new cc,this._resultPointList=new cc,this._graph=new Zh(new Yf),this._geomFact=e.getFactory()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var r=e.getLabel(),n=t.getLabel();e.isPointwiseEqual(t)||(n=new Dh(t.getLabel())).flip();var i=e.getDepth();i.isNull()&&i.add(r),i.add(n),r.merge(n)}else this._edgeList.add(t)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),r=e.getSym();e.isInResult()&&r.isInResult()&&(e.setInResult(!1),r.setInResult(!1))}},e.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},e.prototype.computeGeometry=function(t,r,n,i){var o=new cc;return o.addAll(t),o.addAll(r),o.addAll(n),o.isEmpty()?e.createEmptyResult(i,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(o)},e.prototype.mergeSymLabels=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){t.next().getEdges().mergeSymLabels()}},e.prototype.isCovered=function(t,e){for(var r=e.iterator();r.hasNext();){var n=r.next();if(this._ptLocator.locate(t,n)!==pl.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var t=new cc,e=this._edgeList.iterator();e.hasNext();){var r=e.next();r.isCollapsed()&&(e.remove(),t.add(r.getCollapsedEdge()))}this._edgeList.addAll(t)},e.prototype.updateNodeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),r=e.getEdges().getLabel();e.getLabel().merge(r)}},e.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this._resultGeom},e.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var r=e.next();this.insertUniqueEdge(r)}},e.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new cc;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),Zp.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var r=new Yh(this._geomFact);r.add(this._graph),this._resultPolyList=r.getPolygons();var n=new Jp(this,this._geomFact,this._ptLocator);this._resultLineList=n.build(t);var i=new Qp(this,this._geomFact,this._ptLocator);this._resultPointList=i.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},e.prototype.labelIncompleteNode=function(t,e){var r=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,r)},e.prototype.copyPoints=function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var r=e.next();this._graph.addNode(r.getCoordinate()).setLabel(t,r.getLabel().getLocation(t))}},e.prototype.findResultAreaEdges=function(t){for(var r=this._graph.getEdgeEnds().iterator();r.hasNext();){var n=r.next(),i=n.getLabel();i.isArea()&&!n.isInteriorAreaEdge()&&e.isResultOfOp(i.getLocation(0,Ph.RIGHT),i.getLocation(1,Ph.RIGHT),t)&&n.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),r=e.getLabel(),n=e.getDepth();if(!n.isNull()){n.normalize();for(var i=0;i<2;i++)r.isNull(i)||!r.isArea()||n.isNull(i)||(0===n.getDelta(i)?r.toLine(i):(Bl.isTrue(!n.isNull(i,Ph.LEFT),"depth of LEFT side has not been initialized"),r.setLocation(i,Ph.LEFT,n.getLocation(i,Ph.LEFT)),Bl.isTrue(!n.isNull(i,Ph.RIGHT),"depth of RIGHT side has not been initialized"),r.setLocation(i,Ph.RIGHT,n.getLocation(i,Ph.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){t.next().getEdges().computeLabelling(this._arg)}this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),r=e.getLabel();e.isIsolated()&&(r.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(r)}},e.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Md);Nd.overlayOp=function(t,e,r){return new Nd(t,e).getResultGeometry(r)},Nd.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return Nd.createEmptyResult(Nd.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var r=e;return Yp.map(t,{interfaces_:function(){return[Ld.MapOp]},map:function(t){return t.intersection(r)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),ld.overlayOp(t,e,Nd.INTERSECTION)},Nd.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Nd.createEmptyResult(Nd.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),ld.overlayOp(t,e,Nd.SYMDIFFERENCE)},Nd.resultDimension=function(t,e,r){var n=e.getDimension(),i=r.getDimension(),o=-1;switch(t){case Nd.INTERSECTION:o=Math.min(n,i);break;case Nd.UNION:o=Math.max(n,i);break;case Nd.DIFFERENCE:o=n;break;case Nd.SYMDIFFERENCE:o=Math.max(n,i)}return o},Nd.createEmptyResult=function(t,e,r,n){var i=null;switch(Nd.resultDimension(t,e,r)){case-1:i=n.createGeometryCollection(new Array(0).fill(null));break;case 0:i=n.createPoint();break;case 1:i=n.createLineString();break;case 2:i=n.createPolygon()}return i},Nd.difference=function(t,e){return t.isEmpty()?Nd.createEmptyResult(Nd.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),ld.overlayOp(t,e,Nd.DIFFERENCE))},Nd.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],r=t.getLocation(0),n=t.getLocation(1);return Nd.isResultOfOp(r,n,e)}if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];switch(i===pl.BOUNDARY&&(i=pl.INTERIOR),o===pl.BOUNDARY&&(o=pl.INTERIOR),s){case Nd.INTERSECTION:return i===pl.INTERIOR&&o===pl.INTERIOR;case Nd.UNION:return i===pl.INTERIOR||o===pl.INTERIOR;case Nd.DIFFERENCE:return i===pl.INTERIOR&&o!==pl.INTERIOR;case Nd.SYMDIFFERENCE:return i===pl.INTERIOR&&o!==pl.INTERIOR||i!==pl.INTERIOR&&o===pl.INTERIOR}return!1}},Nd.INTERSECTION=1,Nd.UNION=2,Nd.DIFFERENCE=3,Nd.SYMDIFFERENCE=4;var Td=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Lp,this._seg=new _f;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)};Td.prototype.isWithinToleranceOfBoundary=function(t){for(var e=this,r=0;r<this._linework.getNumGeometries();r++)for(var n=e._linework.getGeometryN(r).getCoordinateSequence(),i=0;i<n.size()-1;i++){if(n.getCoordinate(i,e._seg.p0),n.getCoordinate(i+1,e._seg.p1),e._seg.distance(t)<=e._boundaryDistanceTolerance)return!0}return!1},Td.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?pl.BOUNDARY:this._ptLocator.locate(t,this._g)},Td.prototype.extractLinework=function(t){var e=new Od;t.apply(e);var r=e.getLinework(),n=_h.toLineStringArray(r);return t.getFactory().createMultiLineString(n)},Td.prototype.interfaces_=function(){return[]},Td.prototype.getClass=function(){return Td};var Od=function(){this._linework=null,this._linework=new cc};Od.prototype.getLinework=function(){return this._linework},Od.prototype.filter=function(t){if(t instanceof eh){var e=t;this._linework.add(e.getExteriorRing());for(var r=0;r<e.getNumInteriorRing();r++)this._linework.add(e.getInteriorRingN(r))}},Od.prototype.interfaces_=function(){return[Dc]},Od.prototype.getClass=function(){return Od};var Ad=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var t=arguments[0];this._g=t};Ad.prototype.extractPoints=function(t,e,r){for(var n=t.getCoordinates(),i=0;i<n.length-1;i++)this.computeOffsetPoints(n[i],n[i+1],e,r)},Ad.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},Ad.prototype.getPoints=function(t){for(var e=new cc,r=Mp.getLines(this._g).iterator();r.hasNext();){var n=r.next();this.extractPoints(n,t,e)}return e},Ad.prototype.computeOffsetPoints=function(t,e,r,n){var i=e.x-t.x,o=e.y-t.y,s=Math.sqrt(i*i+o*o),a=r*i/s,u=r*o/s,l=(e.x+t.x)/2,c=(e.y+t.y)/2;if(this._doLeft){var h=new ll(l-u,c+a);n.add(h)}if(this._doRight){var f=new ll(l+u,c-a);n.add(f)}},Ad.prototype.interfaces_=function(){return[]},Ad.prototype.getClass=function(){return Ad};var Rd=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new cc;var e=arguments[0],r=arguments[1],n=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,r),this._geom=[e,r,n],this._locFinder=[new Td(this._geom[0],this._boundaryDistanceTolerance),new Td(this._geom[1],this._boundaryDistanceTolerance),new Td(this._geom[2],this._boundaryDistanceTolerance)]},Fd={TOLERANCE:{configurable:!0}};Rd.prototype.reportResult=function(t,e,r){Ll.out.println("Overlay result invalid - A:"+pl.toLocationSymbol(e[0])+" B:"+pl.toLocationSymbol(e[1])+" expected:"+(r?"i":"e")+" actual:"+pl.toLocationSymbol(e[2]))},Rd.prototype.isValid=function(t){this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]);var e=this.checkValid(t);return e},Rd.prototype.checkValid=function(){var t=this;if(1===arguments.length){for(var e=arguments[0],r=0;r<this._testCoords.size();r++){var n=t._testCoords.get(r);if(!t.checkValid(e,n))return t._invalidLocation=n,!1}return!0}if(2===arguments.length){var i=arguments[0],o=arguments[1];return this._location[0]=this._locFinder[0].getLocation(o),this._location[1]=this._locFinder[1].getLocation(o),this._location[2]=this._locFinder[2].getLocation(o),!!Rd.hasLocation(this._location,pl.BOUNDARY)||this.isValidResult(i,this._location)}},Rd.prototype.addTestPts=function(t){var e=new Ad(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},Rd.prototype.isValidResult=function(t,e){var r=Nd.isResultOfOp(e[0],e[1],t),n=!(r^e[2]===pl.INTERIOR);return n||this.reportResult(t,e,r),n},Rd.prototype.getInvalidLocation=function(){return this._invalidLocation},Rd.prototype.interfaces_=function(){return[]},Rd.prototype.getClass=function(){return Rd},Rd.hasLocation=function(t,e){for(var r=0;r<3;r++)if(t[r]===e)return!0;return!1},Rd.computeBoundaryDistanceTolerance=function(t,e){return Math.min(td.computeSizeBasedSnapTolerance(t),td.computeSizeBasedSnapTolerance(e))},Rd.isValid=function(t,e,r,n){return new Rd(t,e,n).isValid(r)},Fd.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(Rd,Fd);var Dd=function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e};Dd.prototype.extractElements=function(t,e){if(null===t)return null;for(var r=0;r<t.getNumGeometries();r++){var n=t.getGeometryN(r);this._skipEmpty&&n.isEmpty()||e.add(n)}},Dd.prototype.combine=function(){for(var t=new cc,e=this._inputGeoms.iterator();e.hasNext();){var r=e.next();this.extractElements(r,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},Dd.prototype.interfaces_=function(){return[]},Dd.prototype.getClass=function(){return Dd},Dd.combine=function(){if(1===arguments.length){var t=arguments[0],e=new Dd(t);return e.combine()}if(2===arguments.length){var r=arguments[0],n=arguments[1],i=new Dd(Dd.createList(r,n));return i.combine()}if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2],u=new Dd(Dd.createList(o,s,a));return u.combine()}},Dd.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},Dd.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],r=new cc;return r.add(t),r.add(e),r}if(3===arguments.length){var n=arguments[0],i=arguments[1],o=arguments[2],s=new cc;return s.add(n),s.add(i),s.add(o),s}};var kd=function(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new cc)},jd={STRTREE_NODE_CAPACITY:{configurable:!0}};kd.prototype.reduceToGeometries=function(t){for(var e=new cc,r=t.iterator();r.hasNext();){var n=r.next(),i=null;yl(n,uc)?i=this.unionTree(n):n instanceof Yl&&(i=n),e.add(i)}return e},kd.prototype.extractByEnvelope=function(t,e,r){for(var n=new cc,i=0;i<e.getNumGeometries();i++){var o=e.getGeometryN(i);o.getEnvelopeInternal().intersects(t)?n.add(o):r.add(o)}return this._geomFactory.buildGeometry(n)},kd.prototype.unionOptimized=function(t,e){var r=t.getEnvelopeInternal(),n=e.getEnvelopeInternal();if(!r.intersects(n))return Dd.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var i=r.intersection(n);return this.unionUsingEnvelopeIntersection(t,e,i)},kd.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new cf(kd.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var r=e.next();t.insert(r.getEnvelopeInternal(),r)}this._inputPolys=null;var n=t.itemsTree();return this.unionTree(n)},kd.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],r=arguments[1],n=arguments[2];if(n-r<=1){var i=kd.getGeometry(e,r);return this.unionSafe(i,null)}if(n-r==2)return this.unionSafe(kd.getGeometry(e,r),kd.getGeometry(e,r+1));var o=Math.trunc((n+r)/2),s=this.binaryUnion(e,r,o),a=this.binaryUnion(e,o,n);return this.unionSafe(s,a)}},kd.prototype.repeatedUnion=function(t){for(var e=null,r=t.iterator();r.hasNext();){var n=r.next();e=null===e?n.copy():e.union(n)}return e},kd.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},kd.prototype.unionActual=function(t,e){return kd.restrictToPolygons(t.union(e))},kd.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},kd.prototype.unionUsingEnvelopeIntersection=function(t,e,r){var n=new cc,i=this.extractByEnvelope(r,t,n),o=this.extractByEnvelope(r,e,n),s=this.unionActual(i,o);return n.add(s),Dd.combine(n)},kd.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0],e=t.get(0).getFactory(),r=e.buildGeometry(t),n=r.buffer(0);return n}if(2===arguments.length){var i=arguments[0],o=arguments[1],s=i.getFactory(),a=s.createGeometryCollection([i,o]),u=a.buffer(0);return u}},kd.prototype.interfaces_=function(){return[]},kd.prototype.getClass=function(){return kd},kd.restrictToPolygons=function(t){if(yl(t,th))return t;var e=Pp.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(_h.toPolygonArray(e))},kd.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},kd.union=function(t){return new kd(t).union()},jd.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(kd,jd);var Gd=function(){};function Bd(){return new Ud}function Ud(){this.reset()}Gd.prototype.interfaces_=function(){return[]},Gd.prototype.getClass=function(){return Gd},Gd.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Nd.createEmptyResult(Nd.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),ld.overlayOp(t,e,Nd.UNION)},Ud.prototype={constructor:Ud,reset:function(){this.s=this.t=0},add:function(t){zd(qd,t,this.t),zd(this,qd.s,this.s),this.s?this.t+=qd.t:this.s=qd.t},valueOf:function(){return this.s}};var qd=new Ud;function zd(t,e,r){var n=t.s=e+r,i=n-e,o=n-i;t.t=e-o+(r-i)}var Vd=1e-6,Wd=Math.PI,Hd=Wd/2,Xd=Wd/4,Zd=2*Wd,Yd=180/Wd,Jd=Wd/180,Qd=Math.abs,Kd=Math.atan,$d=Math.atan2,ty=Math.cos,ey=Math.sin,ry=Math.sqrt;function ny(t){return t>1?0:t<-1?Wd:Math.acos(t)}function iy(t){return t>1?Hd:t<-1?-Hd:Math.asin(t)}function oy(){}function sy(t,e){t&&uy.hasOwnProperty(t.type)&&uy[t.type](t,e)}var ay={Feature:function(t,e){sy(t.geometry,e)},FeatureCollection:function(t,e){for(var r=t.features,n=-1,i=r.length;++n<i;)sy(r[n].geometry,e)}},uy={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var r=t.coordinates,n=-1,i=r.length;++n<i;)t=r[n],e.point(t[0],t[1],t[2])},LineString:function(t,e){ly(t.coordinates,e,0)},MultiLineString:function(t,e){for(var r=t.coordinates,n=-1,i=r.length;++n<i;)ly(r[n],e,0)},Polygon:function(t,e){cy(t.coordinates,e)},MultiPolygon:function(t,e){for(var r=t.coordinates,n=-1,i=r.length;++n<i;)cy(r[n],e)},GeometryCollection:function(t,e){for(var r=t.geometries,n=-1,i=r.length;++n<i;)sy(r[n],e)}};function ly(t,e,r){var n,i=-1,o=t.length-r;for(e.lineStart();++i<o;)n=t[i],e.point(n[0],n[1],n[2]);e.lineEnd()}function cy(t,e){var r=-1,n=t.length;for(e.polygonStart();++r<n;)ly(t[r],e,1);e.polygonEnd()}Bd(),Bd();function hy(t){return[$d(t[1],t[0]),iy(t[2])]}function fy(t){var e=t[0],r=t[1],n=ty(r);return[n*ty(e),n*ey(e),ey(r)]}function py(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function dy(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function yy(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function vy(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function gy(t){var e=ry(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}Bd();function my(t,e){function r(r,n){return r=t(r,n),e(r[0],r[1])}return t.invert&&e.invert&&(r.invert=function(r,n){return(r=e.invert(r,n))&&t.invert(r[0],r[1])}),r}function _y(t,e){return[t>Wd?t-Zd:t<-Wd?t+Zd:t,e]}function by(t){return function(e,r){return[(e+=t)>Wd?e-Zd:e<-Wd?e+Zd:e,r]}}function xy(t){var e=by(t);return e.invert=by(-t),e}function Sy(t,e){var r=ty(t),n=ey(t),i=ty(e),o=ey(e);function s(t,e){var s=ty(e),a=ty(t)*s,u=ey(t)*s,l=ey(e),c=l*r+a*n;return[$d(u*i-c*o,a*r-l*n),iy(c*i+u*o)]}return s.invert=function(t,e){var s=ty(e),a=ty(t)*s,u=ey(t)*s,l=ey(e),c=l*i-u*o;return[$d(u*i+l*o,a*r+c*n),iy(c*r-a*n)]},s}function wy(t,e){(e=fy(e))[0]-=t,gy(e);var r=ny(-e[1]);return((-e[2]<0?-r:r)+Zd-Vd)%Zd}function Cy(){var t,e=[];return{point:function(e,r){t.push([e,r])},lineStart:function(){e.push(t=[])},lineEnd:oy,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var r=e;return e=[],t=null,r}}}function Iy(t,e){return Qd(t[0]-e[0])<Vd&&Qd(t[1]-e[1])<Vd}function Ey(t,e,r,n){this.x=t,this.z=e,this.o=r,this.e=n,this.v=!1,this.n=this.p=null}function Py(t,e,r,n,i){var o,s,a=[],u=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,r,n=t[0],s=t[e];if(Iy(n,s)){for(i.lineStart(),o=0;o<e;++o)i.point((n=t[o])[0],n[1]);i.lineEnd()}else a.push(r=new Ey(n,t,null,!0)),u.push(r.o=new Ey(n,null,r,!1)),a.push(r=new Ey(s,t,null,!1)),u.push(r.o=new Ey(s,null,r,!0))}}),a.length){for(u.sort(e),My(a),My(u),o=0,s=u.length;o<s;++o)u[o].e=r=!r;for(var l,c,h=a[0];;){for(var f=h,p=!0;f.v;)if((f=f.n)===h)return;l=f.z,i.lineStart();do{if(f.v=f.o.v=!0,f.e){if(p)for(o=0,s=l.length;o<s;++o)i.point((c=l[o])[0],c[1]);else n(f.x,f.n.x,1,i);f=f.n}else{if(p)for(l=f.p.z,o=l.length-1;o>=0;--o)i.point((c=l[o])[0],c[1]);else n(f.x,f.p.x,-1,i);f=f.p}l=(f=f.o).z,p=!p}while(!f.v);i.lineEnd()}}}function My(t){if(e=t.length){for(var e,r,n=0,i=t[0];++n<e;)i.n=r=t[n],r.p=i,i=r;i.n=r=t[0],r.p=i}}function Ly(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}_y.invert=_y;var Ny,Ty;1===(Ny=Ly).length&&(Ty=Ny,Ny=function(t,e){return Ly(Ty(t),e)});function Oy(t){for(var e,r,n,i=t.length,o=-1,s=0;++o<i;)s+=t[o].length;for(r=new Array(s);--i>=0;)for(e=(n=t[i]).length;--e>=0;)r[--s]=n[e];return r}var Ay=1e9,Ry=-Ay;function Fy(t,e,r,n){function i(i,o){return t<=i&&i<=r&&e<=o&&o<=n}function o(i,o,a,l){var c=0,h=0;if(null==i||(c=s(i,a))!==(h=s(o,a))||u(i,o)<0^a>0)do{l.point(0===c||3===c?t:r,c>1?n:e)}while((c=(c+a+4)%4)!==h);else l.point(o[0],o[1])}function s(n,i){return Qd(n[0]-t)<Vd?i>0?0:3:Qd(n[0]-r)<Vd?i>0?2:1:Qd(n[1]-e)<Vd?i>0?1:0:i>0?3:2}function a(t,e){return u(t.x,e.x)}function u(t,e){var r=s(t,1),n=s(e,1);return r!==n?r-n:0===r?e[1]-t[1]:1===r?t[0]-e[0]:2===r?t[1]-e[1]:e[0]-t[0]}return function(s){var u,l,c,h,f,p,d,y,v,g,m,_=s,b=Cy(),x={point:S,lineStart:function(){x.point=w,l&&l.push(c=[]);g=!0,v=!1,d=y=NaN},lineEnd:function(){u&&(w(h,f),p&&v&&b.rejoin(),u.push(b.result()));x.point=S,v&&_.lineEnd()},polygonStart:function(){_=b,u=[],l=[],m=!0},polygonEnd:function(){var e=function(){for(var e=0,r=0,i=l.length;r<i;++r)for(var o,s,a=l[r],u=1,c=a.length,h=a[0],f=h[0],p=h[1];u<c;++u)o=f,s=p,f=(h=a[u])[0],p=h[1],s<=n?p>n&&(f-o)*(n-s)>(p-s)*(t-o)&&++e:p<=n&&(f-o)*(n-s)<(p-s)*(t-o)&&--e;return e}(),r=m&&e,i=(u=Oy(u)).length;(r||i)&&(s.polygonStart(),r&&(s.lineStart(),o(null,null,1,s),s.lineEnd()),i&&Py(u,a,e,o,s),s.polygonEnd());_=s,u=l=c=null}};function S(t,e){i(t,e)&&_.point(t,e)}function w(o,s){var a=i(o,s);if(l&&c.push([o,s]),g)h=o,f=s,p=a,g=!1,a&&(_.lineStart(),_.point(o,s));else if(a&&v)_.point(o,s);else{var u=[d=Math.max(Ry,Math.min(Ay,d)),y=Math.max(Ry,Math.min(Ay,y))],b=[o=Math.max(Ry,Math.min(Ay,o)),s=Math.max(Ry,Math.min(Ay,s))];!function(t,e,r,n,i,o){var s,a=t[0],u=t[1],l=0,c=1,h=e[0]-a,f=e[1]-u;if(s=r-a,h||!(s>0)){if(s/=h,h<0){if(s<l)return;s<c&&(c=s)}else if(h>0){if(s>c)return;s>l&&(l=s)}if(s=i-a,h||!(s<0)){if(s/=h,h<0){if(s>c)return;s>l&&(l=s)}else if(h>0){if(s<l)return;s<c&&(c=s)}if(s=n-u,f||!(s>0)){if(s/=f,f<0){if(s<l)return;s<c&&(c=s)}else if(f>0){if(s>c)return;s>l&&(l=s)}if(s=o-u,f||!(s<0)){if(s/=f,f<0){if(s>c)return;s>l&&(l=s)}else if(f>0){if(s<l)return;s<c&&(c=s)}return l>0&&(t[0]=a+l*h,t[1]=u+l*f),c<1&&(e[0]=a+c*h,e[1]=u+c*f),!0}}}}}(u,b,t,e,r,n)?a&&(_.lineStart(),_.point(o,s),m=!1):(v||(_.lineStart(),_.point(u[0],u[1])),_.point(b[0],b[1]),a||_.lineEnd(),m=!1)}d=o,y=s,v=a}return x}}var Dy=Bd();Bd();function ky(t){return t}Bd(),Bd();var jy=1/0,Gy=jy,By=-jy,Uy=By,qy={point:function(t,e){t<jy&&(jy=t);t>By&&(By=t);e<Gy&&(Gy=e);e>Uy&&(Uy=e)},lineStart:oy,lineEnd:oy,polygonStart:oy,polygonEnd:oy,result:function(){var t=[[jy,Gy],[By,Uy]];return By=Uy=-(Gy=jy=1/0),t}};Bd();function zy(t,e,r,n){return function(i,o){var s,a,u,l=e(o),c=i.invert(n[0],n[1]),h=Cy(),f=e(h),p=!1,d={point:y,lineStart:g,lineEnd:m,polygonStart:function(){d.point=_,d.lineStart=b,d.lineEnd=x,a=[],s=[]},polygonEnd:function(){d.point=y,d.lineStart=g,d.lineEnd=m,a=Oy(a);var t=function(t,e){var r=e[0],n=e[1],i=[ey(r),-ty(r),0],o=0,s=0;Dy.reset();for(var a=0,u=t.length;a<u;++a)if(c=(l=t[a]).length)for(var l,c,h=l[c-1],f=h[0],p=h[1]/2+Xd,d=ey(p),y=ty(p),v=0;v<c;++v,f=m,d=b,y=x,h=g){var g=l[v],m=g[0],_=g[1]/2+Xd,b=ey(_),x=ty(_),S=m-f,w=S>=0?1:-1,C=w*S,I=C>Wd,E=d*b;if(Dy.add($d(E*w*ey(C),y*x+E*ty(C))),o+=I?S+w*Zd:S,I^f>=r^m>=r){var P=dy(fy(h),fy(g));gy(P);var M=dy(i,P);gy(M);var L=(I^S>=0?-1:1)*iy(M[2]);(n>L||n===L&&(P[0]||P[1]))&&(s+=I^S>=0?1:-1)}}return(o<-1e-6||o<Vd&&Dy<-1e-6)^1&s}(s,c);a.length?(p||(o.polygonStart(),p=!0),Py(a,Wy,t,r,o)):t&&(p||(o.polygonStart(),p=!0),o.lineStart(),r(null,null,1,o),o.lineEnd()),p&&(o.polygonEnd(),p=!1),a=s=null},sphere:function(){o.polygonStart(),o.lineStart(),r(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function y(e,r){var n=i(e,r);t(e=n[0],r=n[1])&&o.point(e,r)}function v(t,e){var r=i(t,e);l.point(r[0],r[1])}function g(){d.point=v,l.lineStart()}function m(){d.point=y,l.lineEnd()}function _(t,e){u.push([t,e]);var r=i(t,e);f.point(r[0],r[1])}function b(){f.lineStart(),u=[]}function x(){_(u[0][0],u[0][1]),f.lineEnd();var t,e,r,n,i=f.clean(),l=h.result(),c=l.length;if(u.pop(),s.push(u),u=null,c)if(1&i){if((e=(r=l[0]).length-1)>0){for(p||(o.polygonStart(),p=!0),o.lineStart(),t=0;t<e;++t)o.point((n=r[t])[0],n[1]);o.lineEnd()}}else c>1&&2&i&&l.push(l.pop().concat(l.shift())),a.push(l.filter(Vy))}return d}}function Vy(t){return t.length>1}function Wy(t,e){return((t=t.x)[0]<0?t[1]-Hd-Vd:Hd-t[1])-((e=e.x)[0]<0?e[1]-Hd-Vd:Hd-e[1])}var Hy=zy(function(){return!0},function(t){var e,r=NaN,n=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,s){var a=o>0?Wd:-Wd,u=Qd(o-r);Qd(u-Wd)<Vd?(t.point(r,n=(n+s)/2>0?Hd:-Hd),t.point(i,n),t.lineEnd(),t.lineStart(),t.point(a,n),t.point(o,n),e=0):i!==a&&u>=Wd&&(Qd(r-i)<Vd&&(r-=i*Vd),Qd(o-a)<Vd&&(o-=a*Vd),n=function(t,e,r,n){var i,o,s=ey(t-r);return Qd(s)>Vd?Kd((ey(e)*(o=ty(n))*ey(r)-ey(n)*(i=ty(e))*ey(t))/(i*o*s)):(e+n)/2}(r,n,o,s),t.point(i,n),t.lineEnd(),t.lineStart(),t.point(a,n),e=0),t.point(r=o,n=s),i=a},lineEnd:function(){t.lineEnd(),r=n=NaN},clean:function(){return 2-e}}},function(t,e,r,n){var i;if(null==t)i=r*Hd,n.point(-Wd,i),n.point(0,i),n.point(Wd,i),n.point(Wd,0),n.point(Wd,-i),n.point(0,-i),n.point(-Wd,-i),n.point(-Wd,0),n.point(-Wd,i);else if(Qd(t[0]-e[0])>Vd){var o=t[0]<e[0]?Wd:-Wd;i=r*o/2,n.point(-o,i),n.point(0,i),n.point(o,i)}else n.point(e[0],e[1])},[-Wd,-Hd]);function Xy(t,e){var r=ty(t),n=r>0,i=Qd(r)>Vd;function o(t,e){return ty(t)*ty(e)>r}function s(t,e,n){var i=[1,0,0],o=dy(fy(t),fy(e)),s=py(o,o),a=o[0],u=s-a*a;if(!u)return!n&&t;var l=r*s/u,c=-r*a/u,h=dy(i,o),f=vy(i,l);yy(f,vy(o,c));var p=h,d=py(f,p),y=py(p,p),v=d*d-y*(py(f,f)-1);if(!(v<0)){var g=ry(v),m=vy(p,(-d-g)/y);if(yy(m,f),m=hy(m),!n)return m;var _,b=t[0],x=e[0],S=t[1],w=e[1];x<b&&(_=b,b=x,x=_);var C=x-b,I=Qd(C-Wd)<Vd;if(!I&&w<S&&(_=S,S=w,w=_),I||C<Vd?I?S+w>0^m[1]<(Qd(m[0]-b)<Vd?S:w):S<=m[1]&&m[1]<=w:C>Wd^(b<=m[0]&&m[0]<=x)){var E=vy(p,(-d+g)/y);return yy(E,f),[m,hy(E)]}}}function a(e,r){var i=n?t:Wd-t,o=0;return e<-i?o|=1:e>i&&(o|=2),r<-i?o|=4:r>i&&(o|=8),o}return zy(o,function(t){var e,r,u,l,c;return{lineStart:function(){l=u=!1,c=1},point:function(h,f){var p,d=[h,f],y=o(h,f),v=n?y?0:a(h,f):y?a(h+(h<0?Wd:-Wd),f):0;if(!e&&(l=u=y)&&t.lineStart(),y!==u&&(!(p=s(e,d))||Iy(e,p)||Iy(d,p))&&(d[0]+=Vd,d[1]+=Vd,y=o(d[0],d[1])),y!==u)c=0,y?(t.lineStart(),p=s(d,e),t.point(p[0],p[1])):(p=s(e,d),t.point(p[0],p[1]),t.lineEnd()),e=p;else if(i&&e&&n^y){var g;v&r||!(g=s(d,e,!0))||(c=0,n?(t.lineStart(),t.point(g[0][0],g[0][1]),t.point(g[1][0],g[1][1]),t.lineEnd()):(t.point(g[1][0],g[1][1]),t.lineEnd(),t.lineStart(),t.point(g[0][0],g[0][1])))}!y||e&&Iy(e,d)||t.point(d[0],d[1]),e=d,u=y,r=v},lineEnd:function(){u&&t.lineEnd(),e=null},clean:function(){return c|(l&&u)<<1}}},function(r,n,i,o){!function(t,e,r,n,i,o){if(r){var s=ty(e),a=ey(e),u=n*r;null==i?(i=e+n*Zd,o=e-u/2):(i=wy(s,i),o=wy(s,o),(n>0?i<o:i>o)&&(i+=n*Zd));for(var l,c=i;n>0?c>o:c<o;c-=u)l=hy([s,-a*ty(c),-a*ey(c)]),t.point(l[0],l[1])}}(o,t,e,i,r,n)},n?[0,-t]:[-Wd,t-Wd])}function Zy(t){return function(e){var r=new Yy;for(var n in t)r[n]=t[n];return r.stream=e,r}}function Yy(){}function Jy(t,e,r){var n=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=o&&t.clipExtent(null),function(t,e){t&&ay.hasOwnProperty(t.type)?ay[t.type](t,e):sy(t,e)}(r,t.stream(qy));var s=qy.result(),a=Math.min(n/(s[1][0]-s[0][0]),i/(s[1][1]-s[0][1])),u=+e[0][0]+(n-a*(s[1][0]+s[0][0]))/2,l=+e[0][1]+(i-a*(s[1][1]+s[0][1]))/2;return null!=o&&t.clipExtent(o),t.scale(150*a).translate([u,l])}Yy.prototype={constructor:Yy,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Qy=ty(30*Jd);function Ky(t,e){return+e?function(t,e){function r(n,i,o,s,a,u,l,c,h,f,p,d,y,v){var g=l-n,m=c-i,_=g*g+m*m;if(_>4*e&&y--){var b=s+f,x=a+p,S=u+d,w=ry(b*b+x*x+S*S),C=iy(S/=w),I=Qd(Qd(S)-1)<Vd||Qd(o-h)<Vd?(o+h)/2:$d(x,b),E=t(I,C),P=E[0],M=E[1],L=P-n,N=M-i,T=m*L-g*N;(T*T/_>e||Qd((g*L+m*N)/_-.5)>.3||s*f+a*p+u*d<Qy)&&(r(n,i,o,s,a,u,P,M,I,b/=w,x/=w,S,y,v),v.point(P,M),r(P,M,I,b,x,S,l,c,h,f,p,d,y,v))}}return function(e){var n,i,o,s,a,u,l,c,h,f,p,d,y={point:v,lineStart:g,lineEnd:_,polygonStart:function(){e.polygonStart(),y.lineStart=b},polygonEnd:function(){e.polygonEnd(),y.lineStart=g}};function v(r,n){r=t(r,n),e.point(r[0],r[1])}function g(){c=NaN,y.point=m,e.lineStart()}function m(n,i){var o=fy([n,i]),s=t(n,i);r(c,h,l,f,p,d,c=s[0],h=s[1],l=n,f=o[0],p=o[1],d=o[2],16,e),e.point(c,h)}function _(){y.point=v,e.lineEnd()}function b(){g(),y.point=x,y.lineEnd=S}function x(t,e){m(n=t,e),i=c,o=h,s=f,a=p,u=d,y.point=m}function S(){r(c,h,l,f,p,d,i,o,n,s,a,u,16,e),y.lineEnd=_,_()}return y}}(t,e):function(t){return Zy({point:function(e,r){e=t(e,r),this.stream.point(e[0],e[1])}})}(t)}var $y=Zy({point:function(t,e){this.stream.point(t*Jd,e*Jd)}});function tv(t){return function(t){var e,r,n,i,o,s,a,u,l,c,h=150,f=480,p=250,d=0,y=0,v=0,g=0,m=0,_=null,b=Hy,x=null,S=ky,w=.5,C=Ky(P,w);function I(t){return[(t=o(t[0]*Jd,t[1]*Jd))[0]*h+r,n-t[1]*h]}function E(t){return(t=o.invert((t[0]-r)/h,(n-t[1])/h))&&[t[0]*Yd,t[1]*Yd]}function P(t,i){return[(t=e(t,i))[0]*h+r,n-t[1]*h]}function M(){o=my(i=function(t,e,r){return(t%=Zd)?e||r?my(xy(t),Sy(e,r)):xy(t):e||r?Sy(e,r):_y}(v,g,m),e);var t=e(d,y);return r=f-t[0]*h,n=p+t[1]*h,L()}function L(){return l=c=null,I}return I.stream=function(t){return l&&c===t?l:l=$y(b(i,C(S(c=t))))},I.clipAngle=function(t){return arguments.length?(b=+t?Xy(_=t*Jd,6*Jd):(_=null,Hy),L()):_*Yd},I.clipExtent=function(t){return arguments.length?(S=null==t?(x=s=a=u=null,ky):Fy(x=+t[0][0],s=+t[0][1],a=+t[1][0],u=+t[1][1]),L()):null==x?null:[[x,s],[a,u]]},I.scale=function(t){return arguments.length?(h=+t,M()):h},I.translate=function(t){return arguments.length?(f=+t[0],p=+t[1],M()):[f,p]},I.center=function(t){return arguments.length?(d=t[0]%360*Jd,y=t[1]%360*Jd,M()):[d*Yd,y*Yd]},I.rotate=function(t){return arguments.length?(v=t[0]%360*Jd,g=t[1]%360*Jd,m=t.length>2?t[2]%360*Jd:0,M()):[v*Yd,g*Yd,m*Yd]},I.precision=function(t){return arguments.length?(C=Ky(P,w=t*t),L()):ry(w)},I.fitExtent=function(t,e){return Jy(I,t,e)},I.fitSize=function(t,e){return function(t,e,r){return Jy(t,[[0,0],e],r)}(I,t,e)},function(){return e=t.apply(this,arguments),I.invert=e.invert&&E,M()}}(function(){return t})()}var ev=function(t){return function(e,r){var n=ty(e),i=ty(r),o=t(n*i);return[o*i*ey(e),o*ey(r)]}}(function(t){return(t=ny(t))&&t/ey(t)});function rv(){return tv(ev).scale(79.4188).clipAngle(179.999)}function nv(t,e,n,i){var o=t.properties||{},a="Feature"===t.type?t.geometry:t;if("GeometryCollection"===a.type){var u=[];return B(t,function(t){var r=nv(t,e,n,i);r&&u.push(r)}),d(u)}var l=function(t){var e=br(t).geometry.coordinates,n=[-e[0],-e[1]];return rv().rotate(n).scale(r)}(a),c={type:a.type,coordinates:ov(a.coordinates,l)},h=(new Ih).read(c),f=b(x(e,n),"meters"),p=_p.bufferOp(h,f,i);if(!iv((p=(new Eh).write(p)).coordinates))return s({type:p.type,coordinates:sv(p.coordinates,l)},o)}function iv(t){return Array.isArray(t[0])?iv(t[0]):isNaN(t[0])}function ov(t,e){return"object"!=typeof t[0]?e(t):t.map(function(t){return ov(t,e)})}function sv(t,e){return"object"!=typeof t[0]?e.invert(t):t.map(function(t){return sv(t,e)})}function av(t,e,r){void 0===r&&(r={});var n=it(t),i=it(e),o=tl.intersection(n.coordinates,i.coordinates);return 0===o.length?null:1===o.length?c(o[0],r.properties):g(o,r.properties)}function uv(t,e,r){void 0===r&&(r={});var n=JSON.stringify(r.properties||{}),i=t[0],o=t[1],s=t[2],a=t[3],u=(o+a)/2,l=(i+s)/2,c=2*e/be([i,u],[s,u],r)*(s-i),h=2*e/be([l,o],[l,a],r)*(a-o),f=c/2,p=2*f,y=Math.sqrt(3)/2*h,v=s-i,g=a-o,m=3/4*p,_=y,b=(v-p)/(p-f/2),x=Math.floor(b),S=(x*m-f/2-v)/2-f/2+m/2,w=Math.floor((g-y)/y),C=(g-w*y)/2,I=w*y-g>y/2;I&&(C-=y/4);for(var E=[],P=[],M=0;M<6;M++){var L=2*Math.PI/6*M;E.push(Math.cos(L)),P.push(Math.sin(L))}for(var N=[],T=0;T<=x;T++)for(var O=0;O<=w;O++){var A=T%2==1;if((0!==O||!A)&&(0!==O||!I)){var R=T*m+i-S,F=O*_+o+C;if(A&&(F-=y/2),!0===r.triangles)cv([R,F],c/2,h/2,JSON.parse(n),E,P).forEach(function(t){r.mask?av(r.mask,t)&&N.push(t):N.push(t)});else{var D=lv([R,F],c/2,h/2,JSON.parse(n),E,P);r.mask?av(r.mask,D)&&N.push(D):N.push(D)}}}return d(N)}function lv(t,e,r,n,i,o){for(var s=[],a=0;a<6;a++){var u=t[0]+e*i[a],l=t[1]+r*o[a];s.push([u,l])}return s.push(s[0].slice()),c([s],n)}function cv(t,e,r,n,i,o){for(var s=[],a=0;a<6;a++){var u=[];u.push(t),u.push([t[0]+e*i[a],t[1]+r*o[a]]),u.push([t[0]+e*i[(a+1)%6],t[1]+r*o[(a+1)%6]]),u.push(t),s.push(c([u],n))}return s}function hv(t){return g(t)}function fv(t){return c(t&&t.geometry.coordinates||[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]])}function pv(t,e,r){return void 0===r&&(r={}),function(t,e,r,n){void 0===n&&(n={});for(var i=[],o=t[0],s=t[1],a=t[2],u=t[3],l=e/be([o,s],[a,s],n)*(a-o),h=r/be([o,s],[o,u],n)*(u-s),f=a-o,p=u-s,y=Math.floor(f/l),v=Math.floor(p/h),g=(p-v*h)/2,m=o+(f-y*l)/2,_=0;_<y;_++){for(var b=s+g,x=0;x<v;x++){var S=c([[[m,b],[m,b+h],[m+l,b+h],[m+l,b],[m,b]]],n.properties);n.mask?Ls(n.mask,S)&&i.push(S):i.push(S),b+=h}m+=l}return d(i)}(t,e,e,r)}function dv(t,e,r){void 0===r&&(r={});for(var n=[],i=e/be([t[0],t[1]],[t[2],t[1]],r)*(t[2]-t[0]),o=e/be([t[0],t[1]],[t[0],t[3]],r)*(t[3]-t[1]),s=0,a=t[0];a<=t[2];){for(var u=0,l=t[1];l<=t[3];){var h=null,f=null;s%2==0&&u%2==0?(h=c([[[a,l],[a,l+o],[a+i,l],[a,l]]],r.properties),f=c([[[a,l+o],[a+i,l+o],[a+i,l],[a,l+o]]],r.properties)):s%2==0&&u%2==1?(h=c([[[a,l],[a+i,l+o],[a+i,l],[a,l]]],r.properties),f=c([[[a,l],[a,l+o],[a+i,l+o],[a,l]]],r.properties)):u%2==0&&s%2==1?(h=c([[[a,l],[a,l+o],[a+i,l+o],[a,l]]],r.properties),f=c([[[a,l],[a+i,l+o],[a+i,l],[a,l]]],r.properties)):u%2==1&&s%2==1&&(h=c([[[a,l],[a,l+o],[a+i,l],[a,l]]],r.properties),f=c([[[a,l+o],[a+i,l+o],[a+i,l],[a,l+o]]],r.properties)),r.mask?(av(r.mask,h)&&n.push(h),av(r.mask,f)&&n.push(f)):(n.push(h),n.push(f)),l+=o,u++}s++,a+=i}return d(n)}ev.invert=function(t){return function(e,r){var n=ry(e*e+r*r),i=t(n),o=ey(i),s=ty(i);return[$d(e*o,n*s),iy(n&&r*o/n)]}}(function(t){return t}),e.along=function(t,e,r){void 0===r&&(r={});for(var n=it(t).coordinates,i=0,o=0;o<n.length&&!(e>=i&&o===n.length-1);o++){if(i>=e){var s=e-i;if(s){var a=_r(n[o],n[o-1])-180;return gr(n[o],s,a,r)}return u(n[o])}i+=be(n[o],n[o+1],r)}return u(n[n.length-1])},e.angle=function(t,e,r,n){if(void 0===n&&(n={}),!L(n))throw new Error("options is invalid");if(!t)throw new Error("startPoint is required");if(!e)throw new Error("midPoint is required");if(!r)throw new Error("endPoint is required");var i=t,o=e,s=r,a=w(!0!==n.mercator?_r(i,o):Ui(i,o)),u=w(!0!==n.mercator?_r(s,o):Ui(s,o)),l=Math.abs(a-u);return!0===n.explementary?360-l:l},e.applyFilter=lu,e.area=zn,e.areaFactors=o,e.bbox=Q,e.bboxClip=function(t,e){var r=it(t),n=r.type,i="Feature"===t.type?t.properties:{},o=r.coordinates;switch(n){case"LineString":case"MultiLineString":var s=[];return"LineString"===n&&(o=[o]),o.forEach(function(t){!function(t,e,r){var n,i,o,s,a,u=t.length,l=Ai(t[0],e),c=[];for(r||(r=[]),n=1;n<u;n++){for(s=t[n-1],i=o=Ai(a=t[n],e);;){if(!(l|i)){c.push(s),i!==o?(c.push(a),n<u-1&&(r.push(c),c=[])):n===u-1&&c.push(a);break}if(l&i)break;l?l=Ai(s=Oi(s,a,l,e),e):i=Ai(a=Oi(s,a,i,e),e)}l=o}c.length&&r.push(c)}(t,e,s)}),1===s.length?f(s[0],i):y(s,i);case"Polygon":return c(Ri(o,e),i);case"MultiPolygon":return g(o.map(function(t){return Ri(t,e)}),i);default:throw new Error("geometry "+n+" not supported")}},e.bboxPolygon=dr,e.bearing=_r,e.bearingToAngle=w,e.bearingToAzimuth=w,e.bezier=pr,e.bezierSpline=pr,e.booleanClockwise=Xi,e.booleanContains=function(t,e){var r=it(t),n=it(e),i=r.type,o=n.type,s=r.coordinates,a=n.coordinates;switch(i){case"Point":switch(o){case"Point":return ms(s,a);default:throw new Error("feature2 "+o+" geometry not supported")}case"MultiPoint":switch(o){case"Point":return function(t,e){var r,n=!1;for(r=0;r<t.coordinates.length;r++)if(ms(t.coordinates[r],e.coordinates)){n=!0;break}return n}(r,n);case"MultiPoint":return function(t,e){for(var r=0,n=e.coordinates;r<n.length;r++){for(var i=n[r],o=!1,s=0,a=t.coordinates;s<a.length;s++){if(ms(i,a[s])){o=!0;break}}if(!o)return!1}return!0}(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"Point":return Yn(n,r,{ignoreEndVertices:!0});case"LineString":return function(t,e){for(var r=!1,n=0,i=e.coordinates;n<i.length;n++){var o=i[n];if(Yn({type:"Point",coordinates:o},t,{ignoreEndVertices:!0})&&(r=!0),!Yn({type:"Point",coordinates:o},t,{ignoreEndVertices:!1}))return!1}return r}(r,n);case"MultiPoint":return function(t,e){for(var r=!1,n=0,i=e.coordinates;n<i.length;n++){var o=i[n];if(Yn(o,t,{ignoreEndVertices:!0})&&(r=!0),!Yn(o,t))return!1}if(r)return!0;return!1}(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Point":return ge(n,r,{ignoreBoundary:!0});case"LineString":return function(t,e){var r=!1,n=0,i=Q(t),o=Q(e);if(!gs(i,o))return!1;for(;n<e.coordinates.length-1;n++){if(ge({type:"Point",coordinates:_s(e.coordinates[n],e.coordinates[n+1])},t,{ignoreBoundary:!0})){r=!0;break}}return r}(r,n);case"Polygon":return function(t,e){if("Feature"===t.type&&null===t.geometry)return!1;if("Feature"===e.type&&null===e.geometry)return!1;var r=Q(t),n=Q(e);if(!gs(r,n))return!1;for(var i=it(e).coordinates,o=0,s=i;o<s.length;o++)for(var a=0,u=s[o];a<u.length;a++){if(!ge(u[a],t))return!1}return!0}(r,n);case"MultiPoint":return function(t,e){for(var r=0,n=e.coordinates;r<n.length;r++){if(!ge(n[r],t,{ignoreBoundary:!0}))return!1}return!0}(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}},e.booleanCrosses=function(t,e){var r=it(t),n=it(e),i=r.type,o=n.type;switch(i){case"MultiPoint":switch(o){case"LineString":return bs(r,n);case"Polygon":return Ss(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"MultiPoint":return bs(n,r);case"LineString":return function(t,e){if(On(t,e).features.length>0)for(var r=0;r<t.coordinates.length-1;r++)for(var n=0;n<e.coordinates.length-1;n++){var i=!0;if(0!==n&&n!==e.coordinates.length-2||(i=!1),ws(t.coordinates[r],t.coordinates[r+1],e.coordinates[n],i))return!0}return!1}(r,n);case"Polygon":return xs(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"MultiPoint":return Ss(n,r);case"LineString":return xs(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}},e.booleanDisjoint=ps,e.booleanEqual=function(t,e){return it(t).type===it(e).type&&new Ms({precision:6}).compare(er(t),er(e))},e.booleanIntersects=Ls,e.booleanOverlap=function(t,e){var r=it(t),n=it(e),i=r.type,o=n.type;if("MultiPoint"===i&&"MultiPoint"!==o||("LineString"===i||"MultiLineString"===i)&&"LineString"!==o&&"MultiLineString"!==o||("Polygon"===i||"MultiPolygon"===i)&&"Polygon"!==o&&"MultiPolygon"!==o)throw new Error("features must be of the same type");if("Point"===i)throw new Error("Point geometry not supported");if(new Ms({precision:6}).compare(t,e))return!1;var s=0;switch(i){case"MultiPoint":for(var a=0;a<r.coordinates.length;a++)for(var u=0;u<n.coordinates.length;u++){var l=r.coordinates[a],c=n.coordinates[u];if(l[0]===c[0]&&l[1]===c[1])return!0}return!1;case"LineString":case"MultiLineString":V(t,function(t){V(e,function(e){ji(t,e).features.length&&s++})});break;case"Polygon":case"MultiPolygon":V(t,function(t){V(e,function(e){On(t,e).features.length&&s++})})}return s>0},e.booleanParallel=function(t,e){if(!t)throw new Error("line1 is required");if(!e)throw new Error("line2 is required");if("LineString"!==Vs(t,"line1"))throw new Error("line1 must be a LineString");if("LineString"!==Vs(e,"line2"))throw new Error("line2 must be a LineString");for(var r=Jr(er(t)).features,n=Jr(er(e)).features,i=0;i<r.length;i++){var o=r[i].geometry.coordinates;if(!n[i])break;if(!zs(o,n[i].geometry.coordinates))return!1}return!0},e.booleanPointInPolygon=ge,e.booleanPointOnLine=Yn,e.booleanWithin=Qn,e.buffer=function(t,e,r){var n=(r=r||{}).units||"kilometers",i=r.steps||8;if(!t)throw new Error("geojson is required");if("object"!=typeof r)throw new Error("options must be an object");if("number"!=typeof i)throw new Error("steps must be an number");if(void 0===e)throw new Error("radius is required");if(i<=0)throw new Error("steps must be greater than 0");var o=[];switch(t.type){case"GeometryCollection":return B(t,function(t){var r=nv(t,e,n,i);r&&o.push(r)}),d(o);case"FeatureCollection":return k(t,function(t){var r=nv(t,e,n,i);r&&k(r,function(t){t&&o.push(t)})}),d(o)}return nv(t,e,n,i)},e.center=br,e.centerMean=ka,e.centerMedian=function(t,e){if(void 0===e&&(e={}),!L(e=e||{}))throw new Error("options is invalid");var r=e.counter||10;if(!M(r))throw new Error("counter must be a number");var n=e.weight,i=ka(t,{weight:e.weight}),o=d([]);k(t,function(t){var e;o.features.push(xr(t,{properties:{weight:null===(e=t.properties)||void 0===e?void 0:e[n]}}))});var s={tolerance:e.tolerance,medianCandidates:[]};return ja(i.geometry.coordinates,[0,0],o,s,r)},e.centerOfMass=function t(e,r){switch(void 0===r&&(r={}),ot(e)){case"Point":return u(K(e),r.properties);case"Polygon":var n=[];A(e,function(t){n.push(t)});var i,o,s,a,l,c,h,f,p=xr(e,{properties:r.properties}),d=p.geometry.coordinates,y=0,v=0,g=0,m=n.map(function(t){return[t[0]-d[0],t[1]-d[1]]});for(i=0;i<n.length-1;i++)a=(o=m[i])[0],c=o[1],l=(s=m[i+1])[0],g+=f=a*(h=s[1])-l*c,y+=(a+l)*f,v+=(c+h)*f;if(0===g)return p;var _=1/(6*(.5*g));return u([d[0]+_*y,d[1]+_*v],r.properties);default:var b=ve(e);return b?t(b,{properties:r.properties}):xr(e,{properties:r.properties})}},e.centroid=xr,e.circle=mr,e.cleanCoords=er,e.clone=Ie,e.clusterEach=su,e.clusterReduce=au,e.clusters=fu,e.clustersDbscan=function(t,e,r){void 0===r&&(r={}),!0!==r.mutate&&(t=Ie(t)),r.minPoints=r.minPoints||3;var n=new Rs.DBSCAN,i=n.run(G(t),E(e,r.units),r.minPoints,be),o=-1;return i.forEach(function(e){o++,e.forEach(function(e){var r=t.features[e];r.properties||(r.properties={}),r.properties.cluster=o,r.properties.dbscan="core"})}),n.noise.forEach(function(e){var r=t.features[e];r.properties||(r.properties={}),r.properties.cluster?r.properties.dbscan="edge":r.properties.dbscan="noise"}),t},e.clustersKmeans=function(t,e){void 0===e&&(e={});var r=t.features.length;e.numberOfClusters=e.numberOfClusters||Math.round(Math.sqrt(r/2)),e.numberOfClusters>r&&(e.numberOfClusters=r),!0!==e.mutate&&(t=Ie(t));var n=G(t),i=n.slice(0,e.numberOfClusters),o=qs(n,e.numberOfClusters,i),s={};return o.centroids.forEach(function(t,e){s[e]=t}),k(t,function(t,e){var r=o.idxs[e];t.properties.cluster=r,t.properties.centroid=s[r]}),t},e.collect=function(t,e,r,n){var i=Et(6),o=e.features.map(function(t){var e;return{minX:t.geometry.coordinates[0],minY:t.geometry.coordinates[1],maxX:t.geometry.coordinates[0],maxY:t.geometry.coordinates[1],property:null===(e=t.properties)||void 0===e?void 0:e[r]}});return i.load(o),t.features.forEach(function(t){t.properties||(t.properties={});var e=Q(t),r=i.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}),o=[];r.forEach(function(e){ge([e.minX,e.minY],t)&&o.push(e.property)}),t.properties[n]=o}),t},e.collectionOf=nt,e.combine=function(t){var e={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}};return k(t,function(t){var r,n,i,o;switch(null===(o=t.geometry)||void 0===o?void 0:o.type){case"Point":e.MultiPoint.coordinates.push(t.geometry.coordinates),e.MultiPoint.properties.push(t.properties);break;case"MultiPoint":(r=e.MultiPoint.coordinates).push.apply(r,t.geometry.coordinates),e.MultiPoint.properties.push(t.properties);break;case"LineString":e.MultiLineString.coordinates.push(t.geometry.coordinates),e.MultiLineString.properties.push(t.properties);break;case"MultiLineString":(n=e.MultiLineString.coordinates).push.apply(n,t.geometry.coordinates),e.MultiLineString.properties.push(t.properties);break;case"Polygon":e.MultiPolygon.coordinates.push(t.geometry.coordinates),e.MultiPolygon.properties.push(t.properties);break;case"MultiPolygon":(i=e.MultiPolygon.coordinates).push.apply(i,t.geometry.coordinates),e.MultiPolygon.properties.push(t.properties)}}),d(Object.keys(e).filter(function(t){return e[t].coordinates.length}).sort().map(function(t){return s({type:t,coordinates:e[t].coordinates},{collectedProperties:e[t].properties})}))},e.concave=function(t,e){void 0===e&&(e={});var r=e.maxEdge||1/0,n=xe(function(t){var e=[],r={};return k(t,function(t){if(t.geometry){var n=t.geometry.coordinates.join("-");Object.prototype.hasOwnProperty.call(r,n)||(e.push(t),r[n]=!0)}}),d(e)}(t));if(n.features=n.features.filter(function(t){var n=t.geometry.coordinates[0][0],i=t.geometry.coordinates[0][1],o=t.geometry.coordinates[0][2],s=be(n,i,e),a=be(i,o,e),u=be(n,o,e);return s<=r&&a<=r&&u<=r}),n.features.length<1)return null;var i=tr(n);return 1===i.coordinates.length&&(i.coordinates=i.coordinates[0],i.type="Polygon"),s(i)},e.containsNumber=tt,e.convertArea=P,e.convertDistance=E,e.convertLength=E,e.convex=ve,e.coordAll=G,e.coordEach=A,e.coordReduce=R,e.createBins=uu,e.degrees2radians=I,e.degreesToRadians=I,e.destination=gr,e.difference=function(t,e){var r=it(t),n=it(e),i=t.properties||{},o=tl.difference(r.coordinates,n.coordinates);return 0===o.length?null:1===o.length?c(o[0],i):g(o,i)},e.dissolve=function(t,e){if(!L(e=e||{}))throw new Error("options is invalid");var r=e.propertyName;nt(t,"Polygon","dissolve");var n=[];if(!e.propertyName)return ni(g(tl.union.apply(null,t.features.map(function(t){return t.geometry.coordinates}))));var i={};k(t,function(t){Object.prototype.hasOwnProperty.call(i,t.properties[r])||(i[t.properties[r]]=[]),i[t.properties[r]].push(t)});for(var o=Object.keys(i),s=0;s<o.length;s++){var a=g(tl.union.apply(null,i[o[s]].map(function(t){return t.geometry.coordinates})));a.properties[r]=o[s],n.push(a)}return ni(d(n))},e.distance=be,e.distanceToDegrees=S,e.distanceToRadians=x,e.distanceWeight=za,e.earthRadius=r,e.ellipse=Fa,e.envelope=yr,e.explode=Sr,e.factors=n,e.feature=s,e.featureCollection=d,e.featureEach=k,e.featureOf=rt,e.featureReduce=j,e.filterProperties=hu,e.findPoint=Y,e.findSegment=Z,e.flatten=ni,e.flattenEach=q,e.flattenReduce=z,e.flip=function(t,e){if(!L(e=e||{}))throw new Error("options is invalid");var r=e.mutate;if(!t)throw new Error("geojson is required");return!1!==r&&void 0!==r||(t=Ie(t)),A(t,function(t){var e=t[0],r=t[1];t[0]=r,t[1]=e}),t},e.geojsonType=et,e.geomEach=B,e.geomReduce=U,e.geometry=a,e.geometryCollection=m,e.getCluster=ou,e.getCoord=K,e.getCoords=$,e.getGeom=it,e.getType=ot,e.greatCircle=function(t,e,r){if("object"!=typeof(r=r||{}))throw new Error("options is invalid");var n=r.properties,i=r.npoints,o=r.offset;return t=K(t),e=K(e),n=n||{},i=i||100,o=o||10,new mi({x:t[0],y:t[1]},{x:e[0],y:e[1]},n).Arc(i,{offset:o}).json()},e.helpers=O,e.hexGrid=uv,e.inside=ge,e.interpolate=function(t,e,r){if("object"!=typeof(r=r||{}))throw new Error("options is invalid");var n=r.gridType,i=r.property,o=r.weight;if(!t)throw new Error("points is required");if(nt(t,"Point","input must contain Points"),!e)throw new Error("cellSize is required");if(void 0!==o&&"number"!=typeof o)throw new Error("weight must be a number");i=i||"elevation",n=n||"square",o=o||1;var s,a=Q(t);switch(n){case"point":case"points":s=ei(a,e,r);break;case"square":case"squares":s=pv(a,e,r);break;case"hex":case"hexes":s=uv(a,e,r);break;case"triangle":case"triangles":s=dv(a,e,r);break;default:throw new Error("invalid gridType")}var u=[];return k(s,function(e){var s=0,a=0;k(t,function(t){var u,l=be("point"===n?e:xr(e),t,r);if(void 0!==i&&(u=t.properties[i]),void 0===u&&(u=t.geometry.coordinates[2]),void 0===u)throw new Error("zValue is missing");0===l&&(s=u);var c=1/Math.pow(l,o);a+=c,s+=c*u});var l=Ie(e);l.properties[i]=s/a,u.push(l)}),d(u)},e.intersect=av,e.invariant=st,e.isNumber=M,e.isObject=L,e.isobands=function(t,e,r){if(!L(r=r||{}))throw new Error("options is invalid");var n=r.zProperty||"elevation",i=r.commonProperties||{},o=r.breaksProperties||[];if(nt(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks is not an Array");if(!L(i))throw new Error("commonProperties is not an Object");if(!Array.isArray(o))throw new Error("breaksProperties is not an Array");var s=Qi(t,{zProperty:n,flip:!0}),a=function(t,e,r){for(var n=[],i=1;i<e.length;i++){var o=+e[i-1],s=+e[i],a=Qo(Jo(to(t,o,s-o))),u={};u.groupedRings=a,u[r]=o+"-"+s,n.push(u)}return n}(s,e,n);return d((a=function(t,e,r){var n=Q(r),i=n[2]-n[0],o=n[3]-n[1],s=n[0],a=n[1],u=e[0].length-1,l=e.length-1,c=i/u,h=o/l,f=function(t){t[0]=t[0]*c+s,t[1]=t[1]*h+a};return t.forEach(function(t){t.groupedRings.forEach(function(t){t.forEach(function(t){t.forEach(f)})})}),t}(a,s,t)).map(function(t,e){if(o[e]&&!L(o[e]))throw new Error("Each mappedProperty is required to be an Object");var r=ht({},i,o[e]);return r[n]=t[n],g(t.groupedRings,r)}))},e.isolines=function(t,e,r){if(!L(r=r||{}))throw new Error("options is invalid");var n=r.zProperty||"elevation",i=r.commonProperties||{},o=r.breaksProperties||[];if(nt(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks must be an Array");if(!L(i))throw new Error("commonProperties must be an Object");if(!Array.isArray(o))throw new Error("breaksProperties must be an Array");var s=_t(t,{zProperty:n,flip:!0});return d(function(t,e,r){var n=Q(r),i=n[2]-n[0],o=n[3]-n[1],s=n[0],a=n[1],u=e[0].length-1,l=e.length-1,c=i/u,h=o/l,f=function(t){t[0]=t[0]*c+s,t[1]=t[1]*h+a};return t.forEach(function(t){A(t,f)}),t}(function(t,e,r,n,i){for(var o=[],s=1;s<e.length;s++){var a=+e[s],u=ht({},n,i[s]);u[r]=a;var l=y(dt(t,a),u);o.push(l)}return o}(s,e,n,i,o),s,t))},e.kinks=function(t){var e,r,n={type:"FeatureCollection",features:[]};if("LineString"===(r="Feature"===t.type?t.geometry:t).type)e=[r.coordinates];else if("MultiLineString"===r.type)e=r.coordinates;else if("MultiPolygon"===r.type)e=[].concat.apply([],r.coordinates);else{if("Polygon"!==r.type)throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");e=r.coordinates}return e.forEach(function(t){e.forEach(function(e){for(var r=0;r<t.length-1;r++)for(var i=r;i<e.length-1;i++){if(t===e){if(1===Math.abs(r-i))continue;if(0===r&&i===t.length-2&&t[r][0]===t[t.length-1][0]&&t[r][1]===t[t.length-1][1])continue}var o=Gn(t[r][0],t[r][1],t[r+1][0],t[r+1][1],e[i][0],e[i][1],e[i+1][0],e[i+1][1]);o&&n.features.push(u([o[0],o[1]]))}})}),n},e.length=Xn,e.lengthToDegrees=S,e.lengthToRadians=x,e.lineArc=wi,e.lineChunk=function(t,e,r){if(!L(r=r||{}))throw new Error("options is invalid");var n=r.units,i=r.reverse;if(!t)throw new Error("geojson is required");if(e<=0)throw new Error("segmentLength must be greater than 0");var o=[];return q(t,function(t){i&&(t.geometry.coordinates=t.geometry.coordinates.reverse()),function(t,e,r,n){var i=Xn(t,{units:r});if(i<=e)return n(t);var o=i/e;Number.isInteger(o)||(o=Math.floor(o)+1);for(var s=0;s<o;s++){n(Zn(t,e*s,e*(s+1),{units:r}),s)}}(t,e,n,function(t){o.push(t)})}),d(o)},e.lineDistance=Xn,e.lineEach=H,e.lineIntersect=On,e.lineOffset=function(t,e,r){if(!L(r=r||{}))throw new Error("options is invalid");var n=r.units;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("distance is required");var i=ot(t),o=t.properties;switch(i){case"LineString":return ss(t,e,n);case"MultiLineString":var s=[];return q(t,function(t){s.push(ss(t,e,n).geometry.coordinates)}),y(s,o);default:throw new Error("geometry "+i+" is not supported")}},e.lineOverlap=ji,e.lineReduce=X,e.lineSegment=Jr,e.lineSlice=function(t,e,r){var n=$(r);if("LineString"!==ot(r))throw new Error("line must be a LineString");for(var i,o=Rn(r,t),s=Rn(r,e),a=[(i=o.properties.index<=s.properties.index?[o,s]:[s,o])[0].geometry.coordinates],u=i[0].properties.index+1;u<i[1].properties.index+1;u++)a.push(n[u]);return a.push(i[1].geometry.coordinates),f(a,r.properties)},e.lineSliceAlong=Zn,e.lineSplit=function(t,e){if(!t)throw new Error("line is required");if(!e)throw new Error("splitter is required");var r=ot(t),n=ot(e);if("LineString"!==r)throw new Error("line must be LineString");if("FeatureCollection"===n)throw new Error("splitter cannot be a FeatureCollection");if("GeometryCollection"===n)throw new Error("splitter cannot be a GeometryCollection");var i=ri(e,{precision:7});switch(n){case"Point":return bi(t,i);case"MultiPoint":return _i(t,i);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return _i(t,On(t,i))}},e.lineString=f,e.lineStringToPolygon=Mi,e.lineStrings=p,e.lineToPolygon=Mi,e.mask=function(t,e){var r,n=fv(e),i=null;return"FeatureCollection"===t.type?i=hv(2===(r=t).features.length?tl.union(r.features[0].geometry.coordinates,r.features[1].geometry.coordinates):tl.union.apply(tl,r.features.map(function(t){return t.geometry.coordinates}))):i=hv(tl.union(t.geometry.coordinates)),i.geometry.coordinates.forEach(function(t){n.geometry.coordinates.push(t[0])}),n},e.meta=J,e.midpoint=function(t,e){return gr(t,be(t,e)/2,_r(t,e))},e.moranIndex=function(t,e){var r=e.inputField,n=e.threshold||1e5,i=e.p||2,o=e.binary||!1,s=za(t,{alpha:e.alpha||-1,binary:o,p:i,standardization:e.standardization||!0,threshold:n}),a=[];k(t,function(t){var e=t.properties||{};a.push(e[r])});for(var u=Va(a),l=function(t){for(var e=Va(t),r=0,n=0,i=t;n<i.length;n++){var o=i[n];r+=Math.pow(o-e,2)}return r/t.length}(a),c=0,h=0,f=0,p=0,d=s.length,y=0;y<d;y++){for(var v=0,g=0;g<d;g++)c+=s[y][g]*(a[y]-u)*(a[g]-u),h+=s[y][g],f+=Math.pow(s[y][g]+s[g][y],2),v+=s[y][g]+s[g][y];p+=Math.pow(v,2)}var m=c/h/l,_=-1/(d-1),b=(d*d*(f*=.5)-d*p+h*h*3)/((d-1)*(d+1)*(h*h))-_*_,x=Math.sqrt(b);return{expectedMoranIndex:_,moranIndex:m,stdNorm:x,zNorm:(m-_)/x}},e.multiLineString=y,e.multiPoint=v,e.multiPolygon=g,e.nearest=Yr,e.nearestPoint=Yr,e.nearestPointOnLine=Rn,e.nearestPointToLine=function(t,e,r){void 0===r&&(r={});var n=r.units,i=r.properties||{},o=function(t){var e=[];switch(t.geometry?t.geometry.type:t.type){case"GeometryCollection":return B(t,function(t){"Point"===t.type&&e.push({type:"Feature",properties:{},geometry:t})}),{type:"FeatureCollection",features:e};case"FeatureCollection":return t.features=t.features.filter(function(t){return"Point"===t.geometry.type}),t;default:throw new Error("points must be a Point Collection")}}(t);if(!o.features.length)throw new Error("points must contain features");if(!e)throw new Error("line is required");if("LineString"!==ot(e))throw new Error("line must be a LineString");var s=1/0,a=null;return k(o,function(t){var r=Dn(t,e,{units:n});r<s&&(s=r,a=t)}),a&&(a.properties=ht({dist:s},a.properties,i)),a},e.planepoint=function(t,e){var r=K(t),n=it(e).coordinates[0];if(n.length<4)throw new Error("OuterRing of a Polygon must have 4 or more Positions.");var i=e.properties||{},o=i.a,s=i.b,a=i.c,u=r[0],l=r[1],c=n[0][0],h=n[0][1],f=void 0!==o?o:n[0][2],p=n[1][0],d=n[1][1],y=void 0!==s?s:n[1][2],v=n[2][0],g=n[2][1],m=void 0!==a?a:n[2][2];return(m*(u-c)*(l-d)+f*(u-p)*(l-g)+y*(u-v)*(l-h)-y*(u-c)*(l-g)-m*(u-p)*(l-h)-f*(u-v)*(l-d))/((u-c)*(l-d)+(u-p)*(l-g)+(u-v)*(l-h)-(u-c)*(l-g)-(u-p)*(l-h)-(u-v)*(l-d))},e.point=u,e.pointGrid=ei,e.pointOnFeature=Bn,e.pointOnLine=Rn,e.pointOnSurface=Bn,e.pointToLineDistance=Dn,e.points=l,e.pointsWithinPolygon=_e,e.polygon=c,e.polygonSmooth=function(t,e){var r=[],n=e.iterations||1;if(!t)throw new Error("inputPolys is required");return B(t,function(t,e,i){var o,s,a;switch(t.type){case"Polygon":o=[[]];for(var u=0;u<n;u++)a=[[]],s=t,u>0&&(s=c(o).geometry),Ba(s,a),o=a.slice(0);r.push(c(o,i));break;case"MultiPolygon":o=[[[]]];for(var l=0;l<n;l++)a=[[[]]],s=t,l>0&&(s=g(o).geometry),Ua(s,a),o=a.slice(0);r.push(g(o,i));break;default:throw new Error("geometry is invalid, must be Polygon or MultiPolygon")}}),d(r)},e.polygonTangents=function(t,e){var r,n,i,o,s=$(t),a=$(e),l=Q(e),c=0,h=null;switch(s[0]>l[0]&&s[0]<l[2]&&s[1]>l[1]&&s[1]<l[3]&&(c=(h=Yr(t,Sr(e))).properties.featureIndex),ot(e)){case"Polygon":r=a[0][c],n=a[0][0],null!==h&&h.geometry.coordinates[1]<s[1]&&(n=a[0][c]),o=Hi(a[0][0],a[0][a[0].length-1],s);var f=Vi(a[0],s,o,i,r,n);r=f[0],n=f[1];break;case"MultiPolygon":for(var p=0,y=0,v=0,g=0;g<a[0].length;g++){p=g;for(var m=!1,_=0;_<a[0][g].length;_++){if(y=_,v===c){m=!0;break}v++}if(m)break}r=a[0][p][y],n=a[0][p][y],o=Hi(a[0][0][0],a[0][0][a[0][0].length-1],s),a.forEach(function(t){var e=Vi(t[0],s,o,i,r,n);r=e[0],n=e[1]})}return d([u(r),u(n)])},e.polygonToLine=Ii,e.polygonToLineString=Ii,e.polygonize=function(t){var e=fs.fromGeoJson(t);e.deleteDangles(),e.deleteCutEdges();var r=[],n=[];return e.getEdgeRings().filter(function(t){return t.isValid()}).forEach(function(t){t.isHole()?r.push(t):n.push(t)}),r.forEach(function(t){hs.findEdgeRingContaining(t,n)&&n.push(t)}),d(n.map(function(t){return t.toPolygon()}))},e.polygons=h,e.projection=Ja,e.propEach=F,e.propReduce=D,e.propertiesContainsFilter=cu,e.radians2degrees=C,e.radiansToDegrees=C,e.radiansToDistance=b,e.radiansToLength=b,e.random=iu,e.randomLineString=eu,e.randomPoint=$a,e.randomPolygon=tu,e.randomPosition=Ka,e.rewind=function(t,e){if(!L(e=e||{}))throw new Error("options is invalid");var r=e.reverse||!1,n=e.mutate||!1;if(!t)throw new Error("<geojson> is required");if("boolean"!=typeof r)throw new Error("<reverse> must be a boolean");if("boolean"!=typeof n)throw new Error("<mutate> must be a boolean");!1===n&&(t=Ie(t));var i=[];switch(t.type){case"GeometryCollection":return B(t,function(t){Zi(t,r)}),t;case"FeatureCollection":return k(t,function(t){k(Zi(t,r),function(t){i.push(t)})}),d(i)}return Zi(t,r)},e.rhumbBearing=Ui,e.rhumbDestination=zi,e.rhumbDistance=Fn,e.round=_,e.sample=function(t,e){if(!t)throw new Error("featurecollection is required");if(null==e)throw new Error("num is required");if("number"!=typeof e)throw new Error("num must be a number");return d(function(t,e){var r,n,i=t.slice(0),o=t.length,s=o-e;for(;o-- >s;)r=i[n=Math.floor((o+1)*Math.random())],i[n]=i[o],i[o]=r;return i.slice(s)}(t.features,e))},e.sector=function(t,e,r,n,i){if(!L(i=i||{}))throw new Error("options is invalid");var o=i.properties;if(!t)throw new Error("center is required");if(null==r)throw new Error("bearing1 is required");if(null==n)throw new Error("bearing2 is required");if(!e)throw new Error("radius is required");if("object"!=typeof i)throw new Error("options must be an object");if(Bi(r)===Bi(n))return mr(t,e,i);var s=$(t),a=wi(t,e,r,n,i),u=[[s]];return A(a,function(t){u[0].push(t)}),u[0].push(s),c(u,o)},e.segmentEach=V,e.segmentReduce=W,e.shortestPath=function(t,e,r){if(!L(r=r||{}))throw new Error("options is invalid");var n=r.resolution,i=r.minDistance,o=r.obstacles||d([]);if(!t)throw new Error("start is required");if(!e)throw new Error("end is required");if(n&&!M(n)||n<=0)throw new Error("options.resolution must be a number, greater than 0");if(i)throw new Error("options.minDistance is not yet implemented");var a=K(t),l=K(e);switch(t=u(a),e=u(l),ot(o)){case"FeatureCollection":if(0===o.features.length)return f([a,l]);break;case"Polygon":o=d([s(it(o))]);break;default:throw new Error("invalid obstacles")}var c=o;c.features.push(t),c.features.push(e);var h=Q(es(dr(Q(c)),1.15));n||(n=be([h[0],h[1]],[h[2],h[1]],r)/100),c.features.pop(),c.features.pop();for(var p=h[0],y=h[1],v=h[2],g=h[3],m=n/be([p,y],[v,y],r)*(v-p),_=n/be([p,y],[p,g],r)*(g-y),b=v-p,x=g-y,S=Math.floor(b/m),w=Math.floor(x/_),C=(b-S*m)/2,I=[],E=[],P=[],N=[],T=1/0,O=1/0,A=g-(x-w*_)/2,R=0;A>=y;){for(var F=[],D=[],k=p+C,j=0;k<=v;){var G=u([k,A]),B=Js(G,o);F.push(B?0:1),D.push(k+"|"+A);var U=be(G,t);!B&&U<T&&(T=U,P={x:j,y:R});var q=be(G,e);!B&&q<O&&(O=q,N={x:j,y:R}),k+=m,j++}E.push(F),I.push(D),A-=_,R++}var z=new Xs(E,{diagonal:!0}),V=z.grid[P.y][P.x],W=z.grid[N.y][N.x],H=Hs.search(z,V,W),X=[a];return H.forEach(function(t){var e=I[t.x][t.y].split("|");X.push([+e[0],+e[1]])}),X.push(l),er(f(X))},e.simplify=function(t,e){if(!L(e=e||{}))throw new Error("options is invalid");var r=void 0!==e.tolerance?e.tolerance:1,n=e.highQuality||!1,i=e.mutate||!1;if(!t)throw new Error("geojson is required");if(r&&r<0)throw new Error("invalid tolerance");return!0!==i&&(t=Ie(t)),B(t,function(t){!function(t,e,r){var n=t.type;if("Point"===n||"MultiPoint"===n)return t;er(t,!0);var i=t.coordinates;switch(n){case"LineString":t.coordinates=lr(i,e,r);break;case"MultiLineString":t.coordinates=i.map(function(t){return lr(t,e,r)});break;case"Polygon":t.coordinates=cr(i,e,r);break;case"MultiPolygon":t.coordinates=i.map(function(t){return cr(t,e,r)})}}(t,r,n)}),t},e.square=vr,e.squareGrid=pv,e.standardDeviationalEllipse=function(t,e){if(!L(e=e||{}))throw new Error("options is invalid");var r=e.steps||64,n=e.weight,i=e.properties||{};if(!M(r))throw new Error("steps must be a number");if(!L(i))throw new Error("properties must be a number");var o=G(t).length,s=ka(t,{weight:n}),a=0,u=0,l=0;k(t,function(t){var e=t.properties[n]||1,r=Ga($(t),$(s));a+=Math.pow(r.x,2)*e,u+=Math.pow(r.y,2)*e,l+=r.x*r.y*e});var c=a-u,h=Math.sqrt(Math.pow(c,2)+4*Math.pow(l,2)),f=2*l,p=Math.atan((c+h)/f),y=180*p/Math.PI,v=0,g=0,m=0;k(t,function(t){var e=t.properties[n]||1,r=Ga($(t),$(s));v+=Math.pow(r.x*Math.cos(p)-r.y*Math.sin(p),2)*e,g+=Math.pow(r.x*Math.sin(p)+r.y*Math.cos(p),2)*e,m+=e});var _=Math.sqrt(2*v/m),b=Math.sqrt(2*g/m),x=Fa(s,_,b,{units:"degrees",angle:y,steps:r,properties:i}),S=_e(t,d([x])),w={meanCenterCoordinates:$(s),semiMajorAxis:_,semiMinorAxis:b,numberOfFeatures:o,angle:y,percentageWithinEllipse:100*G(S).length/o};return x.properties.standardDeviationalEllipse=w,x},e.tag=function(t,e,r,n){return t=Ie(t),e=Ie(e),k(t,function(t){t.properties||(t.properties={}),k(e,function(e){void 0===t.properties[n]&&ge(t,e)&&(t.properties[n]=e.properties[r])})}),t},e.tesselate=function(t){if(!t.geometry||"Polygon"!==t.geometry.type&&"MultiPolygon"!==t.geometry.type)throw new Error("input must be a Polygon or MultiPolygon");var e={type:"FeatureCollection",features:[]};return"Polygon"===t.geometry.type?e.features=Zr(t.geometry.coordinates):t.geometry.coordinates.forEach(function(t){e.features=e.features.concat(Zr(t))}),e},e.tin=xe,e.toMercator=Wa,e.toWgs84=Ha,e.transformRotate=ts,e.transformScale=es,e.transformTranslate=function(t,e,r,n){if(!L(n=n||{}))throw new Error("options is invalid");var i=n.units,o=n.zTranslation,s=n.mutate;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("distance is required");if(o&&"number"!=typeof o&&isNaN(o))throw new Error("zTranslation is not a number");if(o=void 0!==o?o:0,0===e&&0===o)return t;if(null==r||isNaN(r))throw new Error("direction is required");return e<0&&(e=-e,r+=180),!1!==s&&void 0!==s||(t=Ie(t)),A(t,function(t){var n=$(zi(t,e,r,{units:i}));t[0]=n[0],t[1]=n[1],o&&3===t.length&&(t[2]+=o)}),t},e.triangleGrid=dv,e.truncate=ri,e.union=function(t,e,r){void 0===r&&(r={});var n=it(t),i=it(e),o=tl.union(n.coordinates,i.coordinates);return 0===o.length?null:1===o.length?c(o[0],r.properties):g(o,r.properties)},e.unitsFactors=i,e.unkinkPolygon=function(t){var e=[];return q(t,function(t){"Polygon"===t.geometry.type&&k(si(t),function(r){e.push(c(r.geometry.coordinates,t.properties))})}),d(e)},e.validateBBox=N,e.validateId=T,e.voronoi=function(t,e){if(!L(e=e||{}))throw new Error("options is invalid");var r=e.bbox||[-180,-85,180,85];if(!t)throw new Error("points is required");if(!Array.isArray(r))throw new Error("bbox is invalid");return nt(t,"Point","points"),d(function(){var t=Ks,e=$s,r=null;function n(n){return new Aa(n.map(function(r,i){var o=[Math.round(t(r,i,n)/Na)*Na,Math.round(e(r,i,n)/Na)*Na];return o.index=i,o.data=r,o}),r)}return n.polygons=function(t){return n(t).polygons()},n.links=function(t){return n(t).links()},n.triangles=function(t){return n(t).triangles()},n.x=function(e){return arguments.length?(t="function"==typeof e?e:Qs(+e),n):t},n.y=function(t){return arguments.length?(e="function"==typeof t?t:Qs(+t),n):e},n.extent=function(t){return arguments.length?(r=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],n):r&&[[r[0][0],r[0][1]],[r[1][0],r[1][1]]]},n.size=function(t){return arguments.length?(r=null==t?null:[[0,0],[+t[0],+t[1]]],n):r&&[r[1][0]-r[0][0],r[1][1]-r[0][1]]},n}().x(function(t){return t.geometry.coordinates[0]}).y(function(t){return t.geometry.coordinates[1]}).extent([[r[0],r[1]],[r[2],r[3]]]).polygons(t.features).map(Ra))},e.within=_e,Object.defineProperty(e,"__esModule",{value:!0})})}).call(this,r(99))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.VPolyline=undefined;var n=r(2);var i=b(n);var o=r(1);var s=b(o);var a=r(3);var u=b(a);var l=r(9);var c=b(l);var h=r(4);var f=b(h);var p=r(150);var d=r(32);var y=r(151);var v=_(y);var g=r(152);var m=_(g);function _(t){if(t&&t.__esModule){return t}else{var e={};if(t!=null){for(var r in t){if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]}}e.default=t;return e}}function b(t){return t&&t.__esModule?t:{default:t}}var x=function(t){(0,f.default)(e,t);(0,c.default)(e,null,[{key:"getPolylinesCoordinates",value:function t(e){var r=[];for(var n=0;n<e.length;n++){for(var i=0;i<e[n].geometry.length;i++){var o=[],s=e[n].geometry[i].coordinates;for(var a=0;a<s.length;a++){o.push([s[a].x,s[a].y])}r.push(o)}}return r}},{key:"getPolylinesCenter",value:function t(e){var r=[];for(var n=0;n<e.length;n++){r.push(v.lineString(e[n]))}return m.center(m.featureCollection(r))}}]);function e(t){(0,s.default)(this,e);var r=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this));r.type="LineString";(0,d.extend)(r,t);return r}return e}(p.Geometry);e.VPolyline=x},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.VPolygon=undefined;var n=r(2);var i=b(n);var o=r(1);var s=b(o);var a=r(3);var u=b(a);var l=r(9);var c=b(l);var h=r(4);var f=b(h);var p=r(150);var d=r(32);var y=r(151);var v=_(y);var g=r(152);var m=_(g);function _(t){if(t&&t.__esModule){return t}else{var e={};if(t!=null){for(var r in t){if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]}}e.default=t;return e}}function b(t){return t&&t.__esModule?t:{default:t}}var x=function(t){(0,f.default)(e,t);(0,c.default)(e,null,[{key:"getPolygonsCoordinates",value:function t(e){var r=[];for(var n=0;n<e.length;n++){for(var i=0;i<e[n].geometry.length;i++){var o=[];var s=e[n].geometry[i].exterior,a=[];var u=e[n].geometry[i].interior,l=[];for(var c=0;c<s.length;c++){a.push([s[c].x,s[c].y])}for(var h=0;h<u.length;h++){var f=[];for(var p=0;p<u[h].length;p++){f.push([u[h][p].x,u[h][p].y])}l.push(f)}o.push(a);o=o.concat(l);r.push(o)}}return r}},{key:"getPolygonsCenter",value:function t(e){var r=[];for(var n=0;n<e.length;n++){r.push(v.polygon(e[n]))}return m.center(m.featureCollection(r))}}]);function e(t){(0,s.default)(this,e);var r=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this));r.type="Polygon";r.exterior=[];r.interior=[];(0,d.extend)(r,t);if(r.exterior.length>0){r.coordinates.push(r.exterior)}if(r.interior.length>0){for(var n=0;n<r.interior.length;n++){r.coordinates.push(r.interior[n])}}return r}return e}(p.Geometry);e.VPolygon=x;Zondy.Service.VPolygon=x},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ClassBufferBase=undefined;var n=r(2);var i=p(n);var o=r(1);var s=p(o);var a=r(3);var u=p(a);var l=r(4);var c=p(l);var h=r(0);var f=r(38);function p(t){return t&&t.__esModule?t:{default:t}}var d=function(t){(0,c.default)(e,t);function e(t){(0,s.default)(this,e);var r=t||{};var n=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));n.srcInfo=r.srcInfo!==undefined?r.srcInfo:null;n.desInfo=r.desInfo!==undefined?r.desInfo:null;n.idstr=r.idstr!==undefined?r.idstr:"";n.angleType=r.angleType!==undefined?r.angleType:0;n.isDissolve=r.isDissolve!==undefined?r.isDissolve:true;n.isDynPrj=r.isDynPrj!==undefined?r.isDynPrj:false;return n}return e}(f.AnalysisBase);e.ClassBufferBase=d;h.Zondy.Service.ClassBufferBase=d},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.FeatureBuffBase=undefined;var n=r(2);var i=p(n);var o=r(1);var s=p(o);var a=r(3);var u=p(a);var l=r(4);var c=p(l);var h=r(0);var f=r(38);function p(t){return t&&t.__esModule?t:{default:t}}var d=function(t){(0,c.default)(e,t);function e(t){(0,s.default)(this,e);var r=t||{};var n=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));n.sfGeometryXML=r.sfGeometryXML!==undefined?r.sfGeometryXML:null;n.attStrctXML=r.attStrctXML!==undefined?r.attStrctXML:null;n.attRowsXML=r.attRowsXML!==undefined?r.attRowsXML:null;n.traceRadius=r.traceRadius!==undefined?r.traceRadius:1e-4;n.resultName=r.resultName!==undefined?r.resultName:null;n.inFormat=r.inFormat!==undefined?r.inFormat:"json";return n}return e}(f.AnalysisBase);e.FeatureBuffBase=d;h.Zondy.Service.FeatureBuffBase=d},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.OverlayBase=undefined;var n=r(2);var i=p(n);var o=r(1);var s=p(o);var a=r(3);var u=p(a);var l=r(4);var c=p(l);var h=r(0);var f=r(38);function p(t){return t&&t.__esModule?t:{default:t}}var d=function(t){(0,c.default)(e,t);function e(t){(0,s.default)(this,e);var r=t||{};var n=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));n.srcInfo1=r.srcInfo1!==undefined?r.srcInfo1:null;n.desInfo=r.desInfo!==undefined?r.desInfo:null;n.attOptType=r.attOptType!==undefined?r.attOptType:1;n.infoOptType=r.infoOptType!==undefined?r.infoOptType:1;n.overType=r.overType!==undefined?r.overType:3;n.isCleanNode=r.isCleanNode!==undefined?r.isCleanNode:false;n.isLabelPnt=r.isLabelPnt!==undefined?r.isLabelPnt:false;n.isValidReg=r.isValidReg!==undefined?r.isValidReg:false;n.isReCalculate=r.isReCalculate!==undefined?r.isReCalculate:true;n.radius=r.radius!==undefined?r.radius:.001;return n}return e}(f.AnalysisBase);e.OverlayBase=d;h.Zondy.Service.OverlayBase=d},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ProjectBase=undefined;var n=r(2);var i=p(n);var o=r(1);var s=p(o);var a=r(3);var u=p(a);var l=r(4);var c=p(l);var h=r(0);var f=r(38);function p(t){return t&&t.__esModule?t:{default:t}}var d=function(t){(0,c.default)(e,t);function e(t){(0,s.default)(this,e);var r=t||{};var n=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));n.clsName=r.clsName!==undefined?r.clsName:null;n.desClsName=r.desClsName!==undefined?r.desClsName:null;n.resultName=r.resultName!==undefined?r.resultName:null;return n}return e}(f.AnalysisBase);e.ProjectBase=d;h.Zondy.Service.ProjectBase=d},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CalServiceBase=undefined;var n=r(16);var i=x(n);var o=r(2);var s=x(o);var a=r(1);var u=x(a);var l=r(9);var c=x(l);var h=r(3);var f=x(h);var p=r(4);var d=x(p);var y=r(0);var v=r(57);var g=r(33);var m=r(15);var _=r(160);var b=r(161);function x(t){return t&&t.__esModule?t:{default:t}}var S=function(t){(0,d.default)(e,t);function e(t){(0,u.default)(this,e);var r=t?t:{};var n=(0,f.default)(this,(e.__proto__||(0,s.default)(e)).call(this,r));n.dots=r.dots!==undefined?r.dots:null;n.projectInfo=r.projectInfo!==undefined?r.projectInfo:null;n.projectInfoBySRSID=r.projectInfoBySRSID!==undefined?r.projectInfoBySRSID:null;return n}(0,c.default)(e,[{key:"execute",value:function t(e,r,n){if(e instanceof _.CProjectParam){this.projectInfo=e}if(e instanceof b.CProjectBySRSID){this.projectInfoBySrsID=e}var o={};o.Dots=this.dots;o.ProjectInfo=this.projectInfo;o.ProjectInfoBySrsID=this.projectInfoBySrsID;var s=this;var a=s.getFullUrl();var u=new m.IgsServiceBase(a,{eventListeners:{scope:s,processCompleted:r,processFailed:n}});u.processAsync({method:"POST",data:(0,i.default)(o),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}]);return e}(v.GeometryAnalysisBase);e.CalServiceBase=S;y.Zondy.Service.CalServiceBase=S},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CProjectParam=undefined;var n=r(0);var i=r(8);var o=function t(e){var r=e?e:{};(0,i.extend)(this,r);this.ProjAngleUnit=r.ProjAngleUnit!==undefined?r.ProjAngleUnit:0;this.ProjLat=r.ProjLat!==undefined?r.ProjLat:0;this.ProjLat1=r.ProjLat1!==undefined?r.ProjLat1:0;this.ProjLat2=r.ProjLat2!==undefined?r.ProjLat2:0;this.ProjLon=r.ProjLon!==undefined?r.ProjLon:0;this.ProjRate=r.ProjRate!==undefined?r.ProjRate:0;this.ProjType=r.ProjType!==undefined?r.ProjType:0;this.ProjTypeID=r.ProjTypeID!==undefined?r.ProjTypeID:0;this.ProjUnit=r.ProjUnit!==undefined?r.ProjUnit:0;this.ProjZoneNO=r.ProjZoneNO!==undefined?r.ProjZoneNO:0;this.ProjZoneType=r.ProjZoneType!==undefined?r.ProjZoneType:0;this.SphereID=r.SphereID!==undefined?r.SphereID:0};e.CProjectParam=o;n.Zondy.Service.CProjectParam=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CProjectBySRSID=undefined;var n=r(0);var i=r(214);var o=function t(e,r){this.DesSrsID=e;this.GdbInfo=r};e.CProjectBySRSID=o;n.Zondy.Service.CProjectBySRSID=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.FolderInfoAttribute=undefined;var n=r(0);var i=function t(e,r){this.name=e!==undefined?e:null;this.Value=r!==undefined?r:null};e.FolderInfoAttribute=i;n.Zondy.Object.Theme.FolderInfoAttribute=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CloudDiskService=undefined;var n=r(16);var i=_(n);var o=r(2);var s=_(o);var a=r(1);var u=_(a);var l=r(9);var c=_(l);var h=r(3);var f=_(h);var p=r(4);var d=_(p);var y=r(164);var v=_(y);var g=r(27);var m=r(15);function _(t){return t&&t.__esModule?t:{default:t}}var b=e.CloudDiskService=function(t){(0,d.default)(e,t);function e(t){(0,u.default)(this,e);var r=(0,f.default)(this,(e.__proto__||(0,s.default)(e)).call(this,t));var n=t.headers;r.fixParams(t);r.headers=n?n:undefined;return r}(0,c.default)(e,[{key:"setHeaders",value:function t(e){this.headers=e}},{key:"fixParams",value:function t(e){this.params=e;delete this.params.url;delete this.params.ip;delete this.params.port;delete this.params.domain;delete this.params.baseUrl;delete this.params.networkProtocol;delete this.params.partUrl}},{key:"getBaseUrl",value:function t(){var e="";var r=this.baseUrl,n=this.ip,i=this.port,o=this.domain,s=this.networkProtocol;if(r){e=r}else if(o){e=o}else if(s&&n&&i){e=s+"://"+n+":"+i}return e}},{key:"getFullUrl",value:function t(e,r){var n=this.getBaseUrl();var i=n+e+"?"+v.default.stringify(r);return i}},{key:"get",value:function t(e,r,n){var i=this;var o=new m.IgsServiceBase(e,{eventListeners:{scope:i,processCompleted:r,processFailed:n}});o.processAsync({method:"GET",headers:this.headers||{"Content-Type":"text/plain;charset=UTF-8"}})}},{key:"post",value:function t(e,r,n,o){var s=this;var a=new m.IgsServiceBase(e,{eventListeners:{scope:s,processCompleted:n,processFailed:o}});a.processAsync({method:"POST",data:(0,i.default)(r),headers:this.headers||{"Content-Type":"text/plain;charset=UTF-8"}})}}]);return e}(g.ServiceBase);e.default=b},function(t,e,r){"use strict";var n=r(478);var i=r(488);var o=r(167);t.exports={formats:o,parse:i,stringify:n}},function(t,e,r){"use strict";var n;var i=SyntaxError;var o=Function;var s=TypeError;var a=function(t){try{return o('"use strict"; return ('+t+").constructor;")()}catch(t){}};var u=Object.getOwnPropertyDescriptor;if(u){try{u({},"")}catch(t){u=null}}var l=function(){throw new s};var c=u?function(){try{arguments.callee;return l}catch(t){try{return u(arguments,"callee").get}catch(t){return l}}}():l;var h=r(480)();var f=Object.getPrototypeOf||function(t){return t.__proto__};var p={};var d=typeof Uint8Array==="undefined"?n:f(Uint8Array);var y={"%AggregateError%":typeof AggregateError==="undefined"?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer==="undefined"?n:ArrayBuffer,"%ArrayIteratorPrototype%":h?f([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":p,"%AsyncGenerator%":p,"%AsyncGeneratorFunction%":p,"%AsyncIteratorPrototype%":p,"%Atomics%":typeof Atomics==="undefined"?n:Atomics,"%BigInt%":typeof BigInt==="undefined"?n:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView==="undefined"?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array==="undefined"?n:Float32Array,"%Float64Array%":typeof Float64Array==="undefined"?n:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry==="undefined"?n:FinalizationRegistry,"%Function%":o,"%GeneratorFunction%":p,"%Int8Array%":typeof Int8Array==="undefined"?n:Int8Array,"%Int16Array%":typeof Int16Array==="undefined"?n:Int16Array,"%Int32Array%":typeof Int32Array==="undefined"?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":h?f(f([][Symbol.iterator]())):n,"%JSON%":typeof JSON==="object"?JSON:n,"%Map%":typeof Map==="undefined"?n:Map,"%MapIteratorPrototype%":typeof Map==="undefined"||!h?n:f((new Map)[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise==="undefined"?n:Promise,"%Proxy%":typeof Proxy==="undefined"?n:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect==="undefined"?n:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set==="undefined"?n:Set,"%SetIteratorPrototype%":typeof Set==="undefined"||!h?n:f((new Set)[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer==="undefined"?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":h?f(""[Symbol.iterator]()):n,"%Symbol%":h?Symbol:n,"%SyntaxError%":i,"%ThrowTypeError%":c,"%TypedArray%":d,"%TypeError%":s,"%Uint8Array%":typeof Uint8Array==="undefined"?n:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray==="undefined"?n:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array==="undefined"?n:Uint16Array,"%Uint32Array%":typeof Uint32Array==="undefined"?n:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap==="undefined"?n:WeakMap,"%WeakRef%":typeof WeakRef==="undefined"?n:WeakRef,"%WeakSet%":typeof WeakSet==="undefined"?n:WeakSet};var v=function t(e){var r;if(e==="%AsyncFunction%"){r=a("async function () {}")}else if(e==="%GeneratorFunction%"){r=a("function* () {}")}else if(e==="%AsyncGeneratorFunction%"){r=a("async function* () {}")}else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");if(n){r=n.prototype}}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");if(i){r=f(i.prototype)}}y[e]=r;return r};var g={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]};var m=r(166);var _=r(483);var b=m.call(Function.call,Array.prototype.concat);var x=m.call(Function.apply,Array.prototype.splice);var S=m.call(Function.call,String.prototype.replace);var w=m.call(Function.call,String.prototype.slice);var C=m.call(Function.call,RegExp.prototype.exec);var I=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g;var E=/\\(\\)?/g;var P=function t(e){var r=w(e,0,1);var n=w(e,-1);if(r==="%"&&n!=="%"){throw new i("invalid intrinsic syntax, expected closing `%`")}else if(n==="%"&&r!=="%"){throw new i("invalid intrinsic syntax, expected opening `%`")}var o=[];S(e,I,function(t,e,r,n){o[o.length]=r?S(n,E,"$1"):e||t});return o};var M=function t(e,r){var n=e;var o;if(_(g,n)){o=g[n];n="%"+o[0]+"%"}if(_(y,n)){var a=y[n];if(a===p){a=v(n)}if(typeof a==="undefined"&&!r){throw new s("intrinsic "+e+" exists, but is not available. Please file an issue!")}return{alias:o,name:n,value:a}}throw new i("intrinsic "+e+" does not exist!")};t.exports=function t(e,r){if(typeof e!=="string"||e.length===0){throw new s("intrinsic name must be a non-empty string")}if(arguments.length>1&&typeof r!=="boolean"){throw new s('"allowMissing" argument must be a boolean')}if(C(/^%?[^%]*%?$/,e)===null){throw new i("`%` may not be present anywhere but at the beginning and end of the intrinsic name")}var o=P(e);var a=o.length>0?o[0]:"";var l=M("%"+a+"%",r);var c=l.name;var h=l.value;var f=false;var p=l.alias;if(p){a=p[0];x(o,b([0,1],p))}for(var d=1,v=true;d<o.length;d+=1){var g=o[d];var m=w(g,0,1);var S=w(g,-1);if((m==='"'||m==="'"||m==="`"||(S==='"'||S==="'"||S==="`"))&&m!==S){throw new i("property names with quotes must have matching quotes")}if(g==="constructor"||!v){f=true}a+="."+g;c="%"+a+"%";if(_(y,c)){h=y[c]}else if(h!=null){if(!(g in h)){if(!r){throw new s("base intrinsic for "+e+" exists, but the property is not available.")}return void n}if(u&&d+1>=o.length){var I=u(h,g);v=!!I;if(v&&"get"in I&&!("originalValue"in I.get)){h=I.get}else{h=h[g]}}else{v=_(h,g);h=h[g]}if(v&&!f){y[c]=h}}}return h}},function(t,e,r){"use strict";var n=r(482);t.exports=Function.prototype.bind||n},function(t,e,r){"use strict";var n=String.prototype.replace;var i=/%20/g;var o={RFC1738:"RFC1738",RFC3986:"RFC3986"};t.exports={default:o.RFC3986,formatters:{RFC1738:function(t){return n.call(t,i,"+")},RFC3986:function(t){return String(t)}},RFC1738:o.RFC1738,RFC3986:o.RFC3986}},function(t,e,r){var n=r(58);var i=r(21);var o=r(69);t.exports=function(t,e){var r=(i.Object||{})[t]||Object[t];var s={};s[t]=e(r);n(n.S+n.F*o(function(){r(1)}),"Object",s)}},function(t,e,r){e.f=r(43)},function(t,e,r){var n=r(42);var i=r(21);var o=r(85);var s=r(169);var a=r(49).f;t.exports=function(t){var e=i.Symbol||(i.Symbol=o?{}:n.Symbol||{});if(t.charAt(0)!="_"&&!(t in e))a(e,t,{value:s.f(t)})}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,r){var n=r(171);var i=r(84);var o=r(52);var s=r(113);var a=r(51);var u=r(188);var l=Object.getOwnPropertyDescriptor;e.f=r(50)?l:function t(e,r){e=o(e);r=s(r,true);if(u)try{return l(e,r)}catch(t){}if(a(e,r))return i(!n.f.call(e,r),e[r])}},function(t,e,r){"use strict";(function(e){var n=r(22);var i=r(530);var o=r(278);var s=r(279);var a={"Content-Type":"application/x-www-form-urlencoded"};function u(t,e){if(!n.isUndefined(t)&&n.isUndefined(t["Content-Type"])){t["Content-Type"]=e}}function l(){var t;if(typeof XMLHttpRequest!=="undefined"){t=r(280)}else if(typeof e!=="undefined"&&Object.prototype.toString.call(e)==="[object process]"){t=r(280)}return t}function c(t,e,r){if(n.isString(t)){try{(e||JSON.parse)(t);return n.trim(t)}catch(t){if(t.name!=="SyntaxError"){throw t}}}return(r||JSON.stringify)(t)}var h={transitional:s,adapter:l(),transformRequest:[function t(e,r){i(r,"Accept");i(r,"Content-Type");if(n.isFormData(e)||n.isArrayBuffer(e)||n.isBuffer(e)||n.isStream(e)||n.isFile(e)||n.isBlob(e)){return e}if(n.isArrayBufferView(e)){return e.buffer}if(n.isURLSearchParams(e)){u(r,"application/x-www-form-urlencoded;charset=utf-8");return e.toString()}if(n.isObject(e)||r&&r["Content-Type"]==="application/json"){u(r,"application/json");return c(e)}return e}],transformResponse:[function t(e){var r=this.transitional||h.transitional;var i=r&&r.silentJSONParsing;var s=r&&r.forcedJSONParsing;var a=!i&&this.responseType==="json";if(a||s&&n.isString(e)&&e.length){try{return JSON.parse(e)}catch(t){if(a){if(t.name==="SyntaxError"){throw o(t,this,"E_JSON_PARSE")}throw t}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function t(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};n.forEach(["delete","get","head"],function t(e){h.headers[e]={}});n.forEach(["post","put","patch"],function t(e){h.headers[e]=n.merge(a)});t.exports=h}).call(this,r(99))},function(t,e,r){"use strict";var n;var i=SyntaxError;var o=Function;var s=TypeError;var a=function(t){try{return o('"use strict"; return ('+t+").constructor;")()}catch(t){}};var u=Object.getOwnPropertyDescriptor;if(u){try{u({},"")}catch(t){u=null}}var l=function(){throw new s};var c=u?function(){try{arguments.callee;return l}catch(t){try{return u(arguments,"callee").get}catch(t){return l}}}():l;var h=r(544)();var f=Object.getPrototypeOf||function(t){return t.__proto__};var p={};var d=typeof Uint8Array==="undefined"?n:f(Uint8Array);var y={"%AggregateError%":typeof AggregateError==="undefined"?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer==="undefined"?n:ArrayBuffer,"%ArrayIteratorPrototype%":h?f([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":p,"%AsyncGenerator%":p,"%AsyncGeneratorFunction%":p,"%AsyncIteratorPrototype%":p,"%Atomics%":typeof Atomics==="undefined"?n:Atomics,"%BigInt%":typeof BigInt==="undefined"?n:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView==="undefined"?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array==="undefined"?n:Float32Array,"%Float64Array%":typeof Float64Array==="undefined"?n:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry==="undefined"?n:FinalizationRegistry,"%Function%":o,"%GeneratorFunction%":p,"%Int8Array%":typeof Int8Array==="undefined"?n:Int8Array,"%Int16Array%":typeof Int16Array==="undefined"?n:Int16Array,"%Int32Array%":typeof Int32Array==="undefined"?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":h?f(f([][Symbol.iterator]())):n,"%JSON%":typeof JSON==="object"?JSON:n,"%Map%":typeof Map==="undefined"?n:Map,"%MapIteratorPrototype%":typeof Map==="undefined"||!h?n:f((new Map)[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise==="undefined"?n:Promise,"%Proxy%":typeof Proxy==="undefined"?n:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect==="undefined"?n:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set==="undefined"?n:Set,"%SetIteratorPrototype%":typeof Set==="undefined"||!h?n:f((new Set)[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer==="undefined"?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":h?f(""[Symbol.iterator]()):n,"%Symbol%":h?Symbol:n,"%SyntaxError%":i,"%ThrowTypeError%":c,"%TypedArray%":d,"%TypeError%":s,"%Uint8Array%":typeof Uint8Array==="undefined"?n:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray==="undefined"?n:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array==="undefined"?n:Uint16Array,"%Uint32Array%":typeof Uint32Array==="undefined"?n:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap==="undefined"?n:WeakMap,"%WeakRef%":typeof WeakRef==="undefined"?n:WeakRef,"%WeakSet%":typeof WeakSet==="undefined"?n:WeakSet};var v=function t(e){var r;if(e==="%AsyncFunction%"){r=a("async function () {}")}else if(e==="%GeneratorFunction%"){r=a("function* () {}")}else if(e==="%AsyncGeneratorFunction%"){r=a("async function* () {}")}else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");if(n){r=n.prototype}}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");if(i){r=f(i.prototype)}}y[e]=r;return r};var g={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]};var m=r(175);var _=r(547);var b=m.call(Function.call,Array.prototype.concat);var x=m.call(Function.apply,Array.prototype.splice);var S=m.call(Function.call,String.prototype.replace);var w=m.call(Function.call,String.prototype.slice);var C=m.call(Function.call,RegExp.prototype.exec);var I=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g;var E=/\\(\\)?/g;var P=function t(e){var r=w(e,0,1);var n=w(e,-1);if(r==="%"&&n!=="%"){throw new i("invalid intrinsic syntax, expected closing `%`")}else if(n==="%"&&r!=="%"){throw new i("invalid intrinsic syntax, expected opening `%`")}var o=[];S(e,I,function(t,e,r,n){o[o.length]=r?S(n,E,"$1"):e||t});return o};var M=function t(e,r){var n=e;var o;if(_(g,n)){o=g[n];n="%"+o[0]+"%"}if(_(y,n)){var a=y[n];if(a===p){a=v(n)}if(typeof a==="undefined"&&!r){throw new s("intrinsic "+e+" exists, but is not available. Please file an issue!")}return{alias:o,name:n,value:a}}throw new i("intrinsic "+e+" does not exist!")};t.exports=function t(e,r){if(typeof e!=="string"||e.length===0){throw new s("intrinsic name must be a non-empty string")}if(arguments.length>1&&typeof r!=="boolean"){throw new s('"allowMissing" argument must be a boolean')}if(C(/^%?[^%]*%?$/,e)===null){throw new i("`%` may not be present anywhere but at the beginning and end of the intrinsic name")}var o=P(e);var a=o.length>0?o[0]:"";var l=M("%"+a+"%",r);var c=l.name;var h=l.value;var f=false;var p=l.alias;if(p){a=p[0];x(o,b([0,1],p))}for(var d=1,v=true;d<o.length;d+=1){var g=o[d];var m=w(g,0,1);var S=w(g,-1);if((m==='"'||m==="'"||m==="`"||(S==='"'||S==="'"||S==="`"))&&m!==S){throw new i("property names with quotes must have matching quotes")}if(g==="constructor"||!v){f=true}a+="."+g;c="%"+a+"%";if(_(y,c)){h=y[c]}else if(h!=null){if(!(g in h)){if(!r){throw new s("base intrinsic for "+e+" exists, but the property is not available.")}return void n}if(u&&d+1>=o.length){var I=u(h,g);v=!!I;if(v&&"get"in I&&!("originalValue"in I.get)){h=I.get}else{h=h[g]}}else{v=_(h,g);h=h[g]}if(v&&!f){y[c]=h}}}return h}},function(t,e,r){"use strict";var n=r(546);t.exports=Function.prototype.bind||n},function(t,e,r){"use strict";var n=String.prototype.replace;var i=/%20/g;var o={RFC1738:"RFC1738",RFC3986:"RFC3986"};t.exports={default:o.RFC3986,formatters:{RFC1738:function(t){return n.call(t,i,"+")},RFC3986:function(t){return String(t)}},RFC1738:o.RFC1738,RFC3986:o.RFC3986}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ThemeLayer=undefined;var n=r(5);var i=h(n);var o=r(6);var s=h(o);var a=r(19);var u=h(a);var l=r(7);var c=r(286);function h(t){return t&&t.__esModule?t:{default:t}}var f=l.Common.modifyDOMElement,p=l.Common.isArray,d=l.Common.indexOf,y=l.Common.newGuid,v=l.Common.Zondy;var g=function(){function t(e,r){(0,i.default)(this,t);var n=r?r:{};this.name=e;this.id=n.id?n.id:y();this.opacity=n.opacity?n.opacity:1;this.visibility=true;this.loadWhileAnimating=n.loadWhileAnimating===undefined?true:n.loadWhileAnimating;this.map=n.map?n.map:null;this.features=[];this.TFEvents=[];if(this.map){this.map.addLayer(this)}}(0,s.default)(t,[{key:"onAdd",value:function t(e){this.map=e;this._createCanvasContainer();this.addTFEvents();this.map.on("resize",this.resizeEvent.bind(this));this.map.on("zoomstart",this.zoomStartEvent.bind(this));this.map.on("zoomend",this.zoomEndEvent.bind(this));this.map.on("rotatestart",this.rotateStartEvent.bind(this));this.map.on("rotate",this.rotateEvent.bind(this));this.map.on("rotateend",this.rotateEndEvent.bind(this));this.map.on("dragend",this.dragEndEvent.bind(this));this.map.on("movestart",this.moveStartEvent.bind(this));this.map.on("move",this.moveEvent.bind(this));this.map.on("moveend",this.moveEndEvent.bind(this));this.map.on("remove",this.removeFromMap.bind(this));this.refresh()}},{key:"refresh",value:function t(){if(this.features.length===0){return}if(this.map){this.redrawThematicFeatures(this.map.getBounds())}}},{key:"_createCanvasContainer",value:function t(){this.movingOffset=[0,0];this.mapContainer=this.map.getCanvasContainer();this.div=document.createElement("div");this.div.id=this.id;this.div.style.position="absolute";var e=this.map.getCanvasContainer();var r=this.map.getCanvas();this.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px";this.div.style.width=r.style.width;this.div.style.height=r.style.height;this.div.className="themeLayer";this.div.width=parseInt(r.width);this.div.height=parseInt(r.height);e.appendChild(this.div);this.setOpacity(this.opacity);this.levelRenderer=new c.LevelRenderer;this.renderer=this.levelRenderer.init(this.div);this.renderer.clear()}},{key:"destroyFeatures",value:function t(e){var r=e===undefined;if(r){e=this.features}if(e){this.removeFeatures(e);for(var n=e.length-1;n>=0;n--){e[n].destroy()}}}},{key:"setVisibility",value:function t(e){if(e!==this.visibility){this.visibility=e;this.display(e);this.redrawThematicFeatures(this.map.getBounds())}}},{key:"display",value:function t(e){this.div.style.display=e?"block":"none"}},{key:"setOpacity",value:function t(e){if(e!==this.opacity){this.opacity=e;var r=this.div;f(r,null,null,null,null,null,null,e);if(this.map!==null){u.default.Evented.prototype.fire("changelayer",{layer:this,property:"opacity"})}}}},{key:"addFeatures",value:function t(e){}},{key:"removeFeatures",value:function t(e){if(!e||e.length===0){return}if(e===this.features){return this.removeAllFeatures()}if(!p(e)){e=[e]}var r=[];for(var n=e.length-1;n>=0;n--){var i=e[n];var o=d(this.features,i);if(o===-1){r.push(i);continue}this.features.splice(o,1)}var s=[];for(var a=0,l=this.features.length;a<l;a++){i=this.features[a];s.push(i)}this.features=[];this.addFeatures(s);if(this.renderer){this.redrawThematicFeatures(this.map.getBounds())}var c=r.length===0?true:false;u.default.Evented.prototype.fire("featuresremoved",{features:r,succeed:c})}},{key:"removeAllFeatures",value:function t(){if(this.renderer){this.renderer.clear()}this.features=[];u.default.Evented.prototype.fire("featuresremoved",{features:[],succeed:true})}},{key:"getFeatures",value:function t(){var e=this.features.length;var r=new Array(e);for(var n=0;n<e;++n){r[n]=this.features[n]}return r}},{key:"getFeatureBy",value:function t(e,r){var n=null;for(var i in this.features){if(this.features[i][e]===r){n=this.features[i];break}}return n}},{key:"getFeatureById",value:function t(e){return this.getFeatureBy("FID",e)}},{key:"getFeaturesByAttribute",value:function t(e,r){var n,i=[];for(var o in this.features){n=this.features[o];if(n&&n.attributes){if(n.attributes[e]===r){i.push(n)}}}return i}},{key:"redrawThematicFeatures",value:function t(e){}},{key:"on",value:function t(e,r,n){if(this.renderer){this.renderer.on(e,r)}else{this.map.on(e,r)}return this}},{key:"off",value:function t(e,r,n){var i=this;if(i.renderer){i.renderer.off(e,r)}else{this.map.off(e,r)}return this}},{key:"addTFEvents",value:function t(){var e=this.TFEvents;var r=e.length;for(var n=0;n<r;n++){this.renderer.on(e[n][0],e[n][1])}}},{key:"WebMercator2lonLat",value:function t(e,r){var n=e/20037508.34*180;var i=r/20037508.34*180;i=180/Math.PI*(2*Math.atan(Math.exp(i*Math.PI/180))-Math.PI/2);return[n,i]}},{key:"lonLat2WebMercator",value:function t(e,r){var n=e*20037508.34/180;var i=Math.log(Math.tan((90+r)*Math.PI/360))/(Math.PI/180);i=i*20037508.34/180;return{x:n,y:i}}},{key:"getLocalXY",value:function t(e){var r,n=this.map;var i=null;if(p(e)){e=new u.default.LngLat(e[0],e[1]);i=n.project(e);r=[i.x,i.y]}return r}},{key:"moveEndEvent",value:function t(){if(this.loadWhileAnimating||!this.visibility){return}this.div.style.transform="";this.redrawThematicFeatures(this.map.getBounds());this._show()}},{key:"moveStartEvent",value:function t(){if(this.loadWhileAnimating||!this.visibility){return}this.startPitch=this.map.getPitch();this.startBearing=this.map.getBearing();var e=this.map.project(new u.default.LngLat(0,0));this.startMoveX=e.x;this.startMoveY=e.y}},{key:"moveEvent",value:function t(){if(this.loadWhileAnimating||!this.visibility){this.redrawThematicFeatures(this.map.getBounds());return}if(this.rotating||this.zooming){return}if(this.map.getPitch()!==0){this._hide()}this.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px";var e=this.map.getPitch()-this.startPitch;var r=-this.map.getBearing()+this.startBearing;var n=this.map.project(new u.default.LngLat(0,0));var i=n.x-this.startMoveX;var o=n.y-this.startMoveY;this.div.style.transform="rotateX("+e+"deg)"+" rotateZ("+r+"deg)"+" translate3d("+i+"px, "+o+"px, 0px)"}},{key:"zoomStartEvent",value:function t(){if(this.loadWhileAnimating||!this.visibility){return}this.zooming=true;this._hide()}},{key:"zoomEndEvent",value:function t(){if(this.loadWhileAnimating||!this.visibility){return}this.zooming=false;this._show()}},{key:"rotateStartEvent",value:function t(){if(this.loadWhileAnimating||!this.visibility){return}this.rotating=true}},{key:"rotateEvent",value:function t(){if(this.loadWhileAnimating||!this.visibility){return}if(this.map.getPitch()!==0){this._hide()}this.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px";var e=this.map.getPitch()-this.startPitch;var r=-this.map.getBearing()+this.startBearing;this.div.style.transform="rotateX("+e+"deg)"+" rotateZ("+r+"deg)"}},{key:"rotateEndEvent",value:function t(){if(this.loadWhileAnimating||!this.visibility){return}this.rotating=false;this._show()}},{key:"dragEndEvent",value:function t(){if(this.loadWhileAnimating||!this.visibility){return}this._hide()}},{key:"resizeEvent",value:function t(){this.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px";var e=this.map.getCanvas();this.div.style.width=e.style.width;this.div.style.height=e.style.height;this.div.width=parseInt(e.width);this.div.height=parseInt(e.height);this.renderer.resize()}},{key:"removeFromMap",value:function t(){this.mapContainer.removeChild(this.div);this.removeAllFeatures()}},{key:"moveTo",value:function t(e,r){var n=document.getElementById(this.div.id);r=r!==undefined?r:true;if(r){var i=document.getElementById(e);if(n&&i){i.parentNode.insertBefore(n,i)}return}var o=document.getElementById(e);if(n){if(o.nextSibling){o.parentNode.insertBefore(n,o.nextSibling);return}o.parentNode.appendChild(n)}}},{key:"_hide",value:function t(){this.renderer.painter.root.style.display="none"}},{key:"_show",value:function t(){this.renderer.painter.root.style.display="block"}}]);return t}();e.ThemeLayer=g;v.Map.ThemeLayer=g},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Color=undefined;var n=r(5);var i=l(n);var o=r(6);var s=l(o);var a=r(7);var u=r(67);function l(t){return t&&t.__esModule?t:{default:t}}var c=a.Common.Zondy;var h=function(){function t(){(0,i.default)(this,t);this.util=new u.Util;this._ctx=null;this.palette=["#ff9277"," #dddd00"," #ffc877"," #bbe3ff"," #d5ffbb","#bbbbff"," #ddb000"," #b0dd00"," #e2bbff"," #ffbbe3","#ff7777"," #ff9900"," #83dd00"," #77e3ff"," #778fff","#c877ff"," #ff77ab"," #ff6600"," #aa8800"," #77c7ff","#ad77ff"," #ff77ff"," #dd0083"," #777700"," #00aa00","#0088aa"," #8400dd"," #aa0088"," #dd0000"," #772e00"];this._palette=this.palette;this.highlightColor="rgba(0,0,255,1)";this._highlightColor=this.highlightColor;this.colorRegExp=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i;this._nameColors={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#0ff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000",blanchedalmond:"#ffebcd",blue:"#00f",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#f0f",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#0f0",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#f0f",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#f00",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#fff",whitesmoke:"#f5f5f5",yellow:"#ff0",yellowgreen:"#9acd32"};this.CLASS_NAME="Zondy.LevelRenderer.Tool.Color"}(0,s.default)(t,[{key:"customPalette",value:function t(e){this.palette=e}},{key:"resetPalette",value:function t(){this.palette=this._palette}},{key:"getColor",value:function t(e,r){e=e|0;r=r||this.palette;return r[e%r.length]}},{key:"customHighlight",value:function t(e){this.highlightColor=e}},{key:"resetHighlight",value:function t(){this.highlightColor=this._highlightColor}},{key:"getHighlightColor",value:function t(){return this.highlightColor}},{key:"getRadialGradient",value:function t(e,r,n,i,o,s,a){var u=this.util;if(!this._ctx){this._ctx=u.getContext()}var l=this._ctx.createRadialGradient(e,r,n,i,o,s);for(var c=0,h=a.length;c<h;c++){l.addColorStop(a[c][0],a[c][1])}l.__nonRecursion=true;return l}},{key:"getLinearGradient",value:function t(e,r,n,i,o){var s=this.util;if(!this._ctx){this._ctx=s.getContext()}var a=this._ctx.createLinearGradient(e,r,n,i);for(var u=0,l=o.length;u<l;u++){a.addColorStop(o[u][0],o[u][1])}a.__nonRecursion=true;return a}},{key:"getStepColors",value:function t(e,r,n){e=this.toRGBA(e);r=this.toRGBA(r);e=this.getData(e);r=this.getData(r);var i=[];var o=(r[0]-e[0])/n;var s=(r[1]-e[1])/n;var a=(r[2]-e[2])/n;var u=(r[3]-e[3])/n;for(var l=0,c=e[0],h=e[1],f=e[2],p=e[3];l<n;l++){i[l]=this.toColor([this.adjust(Math.floor(c),[0,255]),this.adjust(Math.floor(h),[0,255]),this.adjust(Math.floor(f),[0,255]),p.toFixed(4)-0],"rgba");c+=o;h+=s;f+=a;p+=u}c=r[0];h=r[1];f=r[2];p=r[3];i[l]=this.toColor([c,h,f,p],"rgba");return i}},{key:"getGradientColors",value:function t(e,r){var n=[];var i=e.length;if(r===undefined){r=20}if(i===1){n=this.getStepColors(e[0],e[0],r)}else if(i>1){for(var o=0,s=i-1;o<s;o++){var a=this.getStepColors(e[o],e[o+1],r);if(o<s-1){a.pop()}n=n.concat(a)}}return n}},{key:"toColor",value:function t(e,r){r=r||"rgb";if(e&&(e.length===3||e.length===4)){e=this.map(e,function(t){return t>1?Math.ceil(t):t});if(r.indexOf("hex")>-1){return"#"+((1<<24)+(e[0]<<16)+(e[1]<<8)+ +e[2]).toString(16).slice(1)}else if(r.indexOf("hs")>-1){var n=this.map(e.slice(1,3),function(t){return t+"%"});e[1]=n[0];e[2]=n[1]}if(r.indexOf("a")>-1){if(e.length===3){e.push(1)}e[3]=this.adjust(e[3],[0,1]);return r+"("+e.slice(0,4).join(",")+")"}return r+"("+e.slice(0,3).join(",")+")"}}},{key:"toArray",value:function t(e){e=this.trim(e);if(e.indexOf("rgba")<0){e=this.toRGBA(e)}var r=[];var n=0;e.replace(/[\d.]+/g,function(t){if(n<3){t=t|0}else{t=+t}r[n++]=t});return r}},{key:"convert",value:function t(e,r){if(!this.isCalculableColor(e)){return e}var n=this.getData(e);var i=n[3];if(typeof i==="undefined"){i=1}if(e.indexOf("hsb")>-1){n=this._HSV_2_RGB(n)}else if(e.indexOf("hsl")>-1){n=this._HSL_2_RGB(n)}if(r.indexOf("hsb")>-1||r.indexOf("hsv")>-1){n=this._RGB_2_HSB(n)}else if(r.indexOf("hsl")>-1){n=this._RGB_2_HSL(n)}n[3]=i;return this.toColor(n,r)}},{key:"toRGBA",value:function t(e){return this.convert(e,"rgba")}},{key:"toRGB",value:function t(e){return this.convert(e,"rgb")}},{key:"toHex",value:function t(e){return this.convert(e,"hex")}},{key:"toHSVA",value:function t(e){return this.convert(e,"hsva")}},{key:"toHSV",value:function t(e){return this.convert(e,"hsv")}},{key:"toHSBA",value:function t(e){return this.convert(e,"hsba")}},{key:"toHSB",value:function t(e){return this.convert(e,"hsb")}},{key:"toHSLA",value:function t(e){return this.convert(e,"hsla")}},{key:"toHSL",value:function t(e){return this.convert(e,"hsl")}},{key:"toName",value:function t(e){for(var r in this._nameColors){if(this.toHex(this._nameColors[r])===this.toHex(e)){return r}}return null}},{key:"trim",value:function t(e){return String(e).replace(/\s+/g,"")}},{key:"normalize",value:function t(e){if(this._nameColors[e]){e=this._nameColors[e]}e=this.trim(e);e=e.replace(/hsv/i,"hsb");if(/^#[\da-f]{3}$/i.test(e)){e=parseInt(e.slice(1),16);var r=(e&3840)<<8;var n=(e&240)<<4;var i=e&15;e="#"+((1<<24)+(r<<4)+r+(n<<4)+n+(i<<4)+i).toString(16).slice(1)}return e}},{key:"lift",value:function t(e,r){if(!this.isCalculableColor(e)){return e}var n=r>0?1:-1;if(typeof r==="undefined"){r=0}r=Math.abs(r)>1?1:Math.abs(r);e=this.toRGB(e);var i=this.getData(e);for(var o=0;o<3;o++){if(n===1){i[o]=i[o]*(1-r)|0}else{i[o]=(255-i[o])*r+i[o]|0}}return"rgb("+i.join(",")+")"}},{key:"reverse",value:function t(e){if(!this.isCalculableColor(e)){return e}var r=this.getData(this.toRGBA(e));r=this.map(r,function(t){return 255-t});return this.toColor(r,"rgb")}},{key:"mix",value:function t(e,r,n){if(!this.isCalculableColor(e)||!this.isCalculableColor(r)){return e}if(typeof n==="undefined"){n=.5}n=1-this.adjust(n,[0,1]);var i=n*2-1;var o=this.getData(this.toRGBA(e));var s=this.getData(this.toRGBA(r));var a=o[3]-s[3];var u=((i*a===-1?i:(i+a)/(1+i*a))+1)/2;var l=1-u;var c=[];for(var h=0;h<3;h++){c[h]=o[h]*u+s[h]*l}var f=o[3]*n+s[3]*(1-n);f=Math.max(0,Math.min(1,f));if(o[3]===1&&s[3]===1){return this.toColor(c,"rgb")}c[3]=f;return this.toColor(c,"rgba")}},{key:"random",value:function t(){return"#"+Math.random().toString(16).slice(2,8)}},{key:"getData",value:function e(r){r=this.normalize(r);var n=r.match(this.colorRegExp);if(n===null){throw new Error("The color format error")}var i;var o;var s=[];var a;if(n[2]){i=n[2].replace("#","").split("");a=[i[0]+i[1],i[2]+i[3],i[4]+i[5]];s=this.map(a,function(e){return t.prototype.adjust.call(this,parseInt(e,16),[0,255])})}else if(n[4]){var u=n[4].split(",");o=u[3];a=u.slice(0,3);s=this.map(a,function(e){e=Math.floor(e.indexOf("%")>0?parseInt(e,0)*2.55:e);return t.prototype.adjust.call(this,e,[0,255])});if(typeof o!=="undefined"){s.push(this.adjust(parseFloat(o),[0,1]))}}else if(n[5]||n[6]){var l=(n[5]||n[6]).split(",");var c=parseInt(l[0],0)/360;var h=l[1];var f=l[2];o=l[3];s=this.map([h,f],function(e){return t.prototype.adjust.call(this,parseFloat(e)/100,[0,1])});s.unshift(c);if(typeof o!=="undefined"){s.push(this.adjust(parseFloat(o),[0,1]))}}return s}},{key:"alpha",value:function t(e,r){if(!this.isCalculableColor(e)){return e}if(r===null){r=1}var n=this.getData(this.toRGBA(e));n[3]=this.adjust(Number(r).toFixed(4),[0,1]);return this.toColor(n,"rgba")}},{key:"map",value:function t(e,r){if(typeof r!=="function"){throw new TypeError}var n=e?e.length:0;for(var i=0;i<n;i++){e[i]=r(e[i])}return e}},{key:"adjust",value:function t(e,r){if(e<=r[0]){e=r[0]}else if(e>=r[1]){e=r[1]}return e}},{key:"isCalculableColor",value:function t(e){return e instanceof Array||typeof e==="string"}},{key:"_HSV_2_RGB",value:function t(e){var r=e[0];var n=e[1];var i=e[2];var o;var s;var a;if(n===0){o=i*255;s=i*255;a=i*255}else{var u=r*6;if(u===6){u=0}var l=u|0;var c=i*(1-n);var h=i*(1-n*(u-l));var f=i*(1-n*(1-(u-l)));var p=0;var d=0;var y=0;if(l===0){p=i;d=f;y=c}else if(l===1){p=h;d=i;y=c}else if(l===2){p=c;d=i;y=f}else if(l===3){p=c;d=h;y=i}else if(l===4){p=f;d=c;y=i}else{p=i;d=c;y=h}o=p*255;s=d*255;a=y*255}return[o,s,a]}},{key:"_HSL_2_RGB",value:function t(e){var r=e[0];var n=e[1];var i=e[2];var o;var s;var a;if(n===0){o=i*255;s=i*255;a=i*255}else{var u;if(i<.5){u=i*(1+n)}else{u=i+n-n*i}var l=2*i-u;o=255*this._HUE_2_RGB(l,u,r+1/3);s=255*this._HUE_2_RGB(l,u,r);a=255*this._HUE_2_RGB(l,u,r-1/3)}return[o,s,a]}},{key:"_HUE_2_RGB",value:function t(e,r,n){if(n<0){n+=1}if(n>1){n-=1}if(6*n<1){return e+(r-e)*6*n}if(2*n<1){return r}if(3*n<2){return e+(r-e)*(2/3-n)*6}return e}},{key:"_RGB_2_HSB",value:function t(e){var r=e[0]/255;var n=e[1]/255;var i=e[2]/255;var o=Math.min(r,n,i);var s=Math.max(r,n,i);var a=s-o;var u=s;var l;var c;if(a===0){l=0;c=0}else{c=a/s;var h=((s-r)/6+a/2)/a;var f=((s-n)/6+a/2)/a;var p=((s-i)/6+a/2)/a;if(r===s){l=p-f}else if(n===s){l=1/3+h-p}else if(i===s){l=2/3+f-h}if(l<0){l+=1}if(l>1){l-=1}}l=l*360;c=c*100;u=u*100;return[l,c,u]}},{key:"_RGB_2_HSL",value:function t(e){var r=e[0]/255;var n=e[1]/255;var i=e[2]/255;var o=Math.min(r,n,i);var s=Math.max(r,n,i);var a=s-o;var u=(s+o)/2;var l;var c;if(a===0){l=0;c=0}else{if(u<.5){c=a/(s+o)}else{c=a/(2-s-o)}var h=((s-r)/6+a/2)/a;var f=((s-n)/6+a/2)/a;var p=((s-i)/6+a/2)/a;if(r===s){l=p-f}else if(n===s){l=1/3+h-p}else if(i===s){l=2/3+f-h}if(l<0){l+=1}if(l>1){l-=1}}l=l*360;c=c*100;u=u*100;return[l,c,u]}}]);return t}();e.Color=h;c.LevelRenderer.Tool.Color=h},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Config=undefined;var n=r(5);var i=s(n);var o=r(7);function s(t){return t&&t.__esModule?t:{default:t}}var a=o.Common.Zondy;var u=function t(){(0,i.default)(this,t)};u.EVENT={RESIZE:"resize",CLICK:"click",DBLCLICK:"dblclick",MOUSEWHEEL:"mousewheel",MOUSEMOVE:"mousemove",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",GLOBALOUT:"globalout",DRAGSTART:"dragstart",DRAGEND:"dragend",DRAGENTER:"dragenter",DRAGOVER:"dragover",DRAGLEAVE:"dragleave",DROP:"drop",touchClickDelay:300};u.catchBrushException=false;u.debugMode=0;e.Config=u;a.LevelRenderer.Config=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.SmicImage=undefined;var n=r(11);var i=g(n);var o=r(5);var s=g(o);var a=r(6);var u=g(a);var l=r(12);var c=g(l);var h=r(14);var f=g(h);var p=r(13);var d=g(p);var y=r(7);var v=r(26);function g(t){return t&&t.__esModule?t:{default:t}}var m=y.Common.Zondy;var _=function(t){(0,d.default)(e,t);function e(t){(0,s.default)(this,e);var r=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t));r.type="smicimage";r._imageCache={};if(!r.refOriginalPosition||r.refOriginalPosition.length!==2){r.refOriginalPosition=[0,0]}r.CLASS_NAME="Zondy.LevelRenderer.Shape.SmicImage";return r}(0,u.default)(e,[{key:"destroy",value:function t(){this.type=null;this._imageCache=null;(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}},{key:"brush",value:function t(r,n,i){if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var o=this.refOriginalPosition;var s=this.style||{};if(n){s=this.getHighlightStyle(s,this.highlightStyle||{})}var a=s.image;var u=this;if(typeof a==="string"){var l=a;if(this._imageCache[l]){a=this._imageCache[l]}else{a=new Image;a.onload=function(){a.onload=null;clearTimeout(e._refreshTimeout);e._needsRefresh.push(u);e._refreshTimeout=setTimeout(function(){i&&i(e._needsRefresh);e._needsRefresh=[]},10)};a.src=l;this._imageCache[l]=a}}if(a){if(a.nodeName.toUpperCase()==="IMG"){if(window.ActiveXObject){if(a.readyState!=="complete"){return}}else{if(!a.complete){return}}}var c=s.width||a.width;var h=s.height||a.height;var f=s.x+o[0];var p=s.y+o[1];if(!a.width||!a.height){return}r.save();this.doClip(r);this.setContext(r,s);this.setTransform(r);if(s.sWidth&&s.sHeight){var d=s.sx+o[0]||0;var y=s.sy+o[1]||0;r.drawImage(a,d,y,s.sWidth,s.sHeight,f,p,c,h)}else if(s.sx&&s.sy){var v=s.sx+o[0];var g=s.sy+o[1];var m=c-v;var _=h-g;r.drawImage(a,v,g,m,_,f,p,c,h)}else{r.drawImage(a,f,p,c,h)}if(!s.width){s.width=c}if(!s.height){s.height=h}if(!this.style.width){this.style.width=c}if(!this.style.height){this.style.height=h}this.drawText(r,s,this.style);r.restore()}}},{key:"getRect",value:function t(e){if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var r=this.refOriginalPosition;return{x:e.x+r[0],y:e.y+r[1],width:e.width,height:e.height}}},{key:"clearCache",value:function t(){this._imageCache={}}}]);return e}(v.Shape);_._needsRefresh=[];_._refreshTimeout=null;e.SmicImage=_;m.LevelRenderer.SmicImage=_},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Line=undefined;var n=r(11);var i=g(n);var o=r(5);var s=g(o);var a=r(6);var u=g(a);var l=r(12);var c=g(l);var h=r(14);var f=g(h);var p=r(13);var d=g(p);var y=r(7);var v=r(40);function g(t){return t&&t.__esModule?t:{default:t}}var m=y.Common.Zondy;var _=function(t){(0,d.default)(e,t);function e(t){(0,s.default)(this,e);var r=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t));r.pointList=t;r.CLASS_NAME="Zondy.Feature.ShapeParameters.Line";return r}(0,u.default)(e,[{key:"destroy",value:function t(){this.pointList=null;(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}}]);return e}(v.ShapeParameters);e.Line=_;m.Feature.ShapeParameters.Line=_},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Circle=undefined;var n=r(11);var i=g(n);var o=r(5);var s=g(o);var a=r(6);var u=g(a);var l=r(12);var c=g(l);var h=r(14);var f=g(h);var p=r(13);var d=g(p);var y=r(7);var v=r(40);function g(t){return t&&t.__esModule?t:{default:t}}var m=y.Common.Zondy;var _=function(t){(0,d.default)(e,t);function e(t,r,n){(0,s.default)(this,e);var o=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r,n));o.x=!isNaN(t)?t:0;o.y=!isNaN(r)?r:0;o.r=!isNaN(n)?n:0;o.CLASS_NAME="Zondy.Feature.ShapeParameters.Circle";return o}(0,u.default)(e,[{key:"destroy",value:function t(){this.x=null;this.y=null;this.r=null;(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}}]);return e}(v.ShapeParameters);e.Circle=_;m.Feature.ShapeParameters.Circle=_},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.SmicPoint=undefined;var n=r(11);var i=g(n);var o=r(5);var s=g(o);var a=r(6);var u=g(a);var l=r(12);var c=g(l);var h=r(14);var f=g(h);var p=r(13);var d=g(p);var y=r(7);var v=r(26);function g(t){return t&&t.__esModule?t:{default:t}}var m=y.Common.Zondy;var _=function(t){(0,d.default)(e,t);function e(t){(0,s.default)(this,e);var r=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t));r.type="smicpoint";if(!r.refOriginalPosition||r.refOriginalPosition.length!==2){r.refOriginalPosition=[0,0]}r.CLASS_NAME="Zondy.LevelRenderer.Shape.SmicPoint";return r}(0,u.default)(e,[{key:"destroy",value:function t(){this.type=null;(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function t(e,r){if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var n=this.refOriginalPosition;e.arc(r.x+n[0],r.y+n[1],r.r,0,Math.PI*2,true);return}},{key:"getRect",value:function t(e){if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var r=this.refOriginalPosition;if(e.__rect){return e.__rect}var n;if(e.brushType==="stroke"||e.brushType==="fill"){n=e.lineWidth||1}else{n=0}e.__rect={x:Math.round(e.x+r[0]-e.r-n/2),y:Math.round(e.y+r[1]-e.r-n/2),width:e.r*2+n,height:e.r*2+n};return e.__rect}}]);return e}(v.Shape);e.SmicPoint=_;m.LevelRenderer.SmicPoint=_},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.SmicBrokenLine=undefined;var n=r(11);var i=_(n);var o=r(5);var s=_(o);var a=r(6);var u=_(a);var l=r(12);var c=_(l);var h=r(14);var f=_(h);var p=r(13);var d=_(p);var y=r(7);var v=r(26);var g=r(112);var m=r(28);function _(t){return t&&t.__esModule?t:{default:t}}var b=y.Common.Zondy;var x=function(t){(0,d.default)(e,t);function e(t){(0,s.default)(this,e);var r=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t));r.brushTypeOnly="stroke";r.textPosition="end";r.type="smicbroken-line";if(!r.refOriginalPosition||r.refOriginalPosition.length!==2){r.refOriginalPosition=[0,0]}r.CLASS_NAME="Zondy.LevelRenderer.Shape.SmicBrokenLine";return r}(0,u.default)(e,[{key:"destroy",value:function t(){this.brushTypeOnly=null;this.textPosition=null;this.type=null;(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function t(e,r){if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var n=this.refOriginalPosition;var i=r.pointList;if(i.length<2){return}var o=Math.min(r.pointList.length,Math.round(r.pointListLength||r.pointList.length));if(r.smooth&&r.smooth!=="spline"){var s=m.SUtil.SUtil_smoothBezier(i,r.smooth,false,r.smoothConstraint,n);e.moveTo(i[0][0]+n[0],i[0][1]+n[1]);var a;var u;var l;for(var c=0;c<o-1;c++){a=s[c*2];u=s[c*2+1];l=[i[c+1][0]+n[0],i[c+1][1]+n[1]];e.bezierCurveTo(a[0],a[1],u[0],u[1],l[0],l[1])}}else{if(r.smooth==="spline"){i=m.SUtil.SUtil_smoothSpline(i,null,null,n);o=i.length}if(!r.lineType||r.lineType==="solid"){e.moveTo(i[0][0]+n[0],i[0][1]+n[1]);for(var h=1;h<o;h++){e.lineTo(i[h][0]+n[0],i[h][1]+n[1])}}else if(r.lineType==="dashed"||r.lineType==="dotted"||r.lineType==="dot"||r.lineType==="dash"||r.lineType==="longdash"){var f=r.lineWidth||1;var p=f;var d=f;if(r.lineType==="dashed"){p*=5;d*=5;if(r.lineCap&&r.lineCap!=="butt"){p-=f;d+=f}}if(r.lineType==="dotted"){if(r.lineCap&&r.lineCap!=="butt"){p=1;d+=f}}if(r.lineType==="dot"){d*=4;if(r.lineCap&&r.lineCap!=="butt"){p=1;d+=f}}if(r.lineType==="dash"){p*=4;d*=4;if(r.lineCap&&r.lineCap!=="butt"){p-=f;d+=f}}if(r.lineType==="longdash"){p*=8;d*=4;if(r.lineCap&&r.lineCap!=="butt"){p-=f;d+=f}}e.moveTo(i[0][0]+n[0],i[0][1]+n[1]);for(var y=1;y<o;y++){m.SUtil.SUtil_dashedLineTo(e,i[y-1][0]+n[0],i[y-1][1]+n[1],i[y][0]+n[0],i[y][1]+n[1],f,[p,d])}}else if(r.lineType==="dashot"||r.lineType==="longdashdot"){var v=r.lineWidth||1;var g=v;var _=v;var b=v;var x=v;if(r.lineType==="dashot"){g*=4;_*=4;x*=4;if(r.lineCap&&r.lineCap!=="butt"){g-=v;_+=v;b=1;x+=v}}if(r.lineType==="longdashdot"){g*=8;_*=4;x*=4;if(r.lineCap&&r.lineCap!=="butt"){g-=v;_+=v;b=1;x+=v}}v=(r.lineWidth||1)*(r.lineType==="dashed"?5:1);e.moveTo(i[0][0]+n[0],i[0][1]+n[1]);for(var S=1;S<o;S++){m.SUtil.SUtil_dashedLineTo(e,i[S-1][0]+n[0],i[S-1][1]+n[1],i[S][0]+n[0],i[S][1]+n[1],v,[g,_,b,x])}}}return}},{key:"getRect",value:function t(e){if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var r=this.refOriginalPosition;return g.SmicPolygon.prototype.getRect.apply(this,[e,r])}},{key:"brush",value:function t(e,r){var n=this.beforeBrush(e,r);e.beginPath();this.buildPath(e,n);switch(n.brushType){case"both":this.setCtxGlobalAlpha(e,"fill",n);if(n.lineWidth>0){this.setCtxGlobalAlpha(e,"stroke",n);e.stroke()}this.setCtxGlobalAlpha(e,"reset",n);break;case"stroke":this.setCtxGlobalAlpha(e,"stroke",n);n.lineWidth>0&&e.stroke();this.setCtxGlobalAlpha(e,"reset",n);break;default:this.setCtxGlobalAlpha(e,"fill",n);this.setCtxGlobalAlpha(e,"reset",n);break}this.drawText(e,n,this.style);this.afterBrush(e)}}]);return e}(v.Shape);e.SmicBrokenLine=x;b.LevelRenderer.SmicBrokenLine=x},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Theme3DLayer=undefined;var n=r(5);var i=l(n);var o=r(6);var s=l(o);var a=r(19);var u=r(7);function l(t){return t&&t.__esModule?t:{default:t}}var c=u.Common.extend,h=u.Common.Zondy;var f=function(){function t(e,r){(0,i.default)(this,t);this.id=e;this.map=null;this.opacity=1;this.parseNumber=false;this.enableHighlight=false;this.highlight={color:"#ADA91E"};this.baseHeightField=null;this.height=null;this.heightField="height";this.themeField=this.heightField;this.showLegend=true;this.legendTitle=null;this.legendTheme="light";this.legendOrientation="horizontal";this.legendPosition="bottom-right";this.mousemoveOn=true;c(this,r)}(0,s.default)(t,[{key:"setLayerOptions",value:function t(e){c(this,e);return this}},{key:"setHighlightStyleOptions",value:function t(e){c(this.highlight,e);return this}},{key:"setData",value:function t(e,r){var n=this;n.data=e;if(r!=null){n.parseNumber=r}n.parseNumber&&n.data&&n.data.features&&n.data.features.map(function(t){if(n.baseHeightField&&t.properties[n.baseHeightField]){t.properties[n.baseHeightField]=parseFloat(t.properties[n.baseHeightField])}if(n.heightField&&t.properties[n.heightField]){t.properties[n.heightField]=parseFloat(t.properties[n.heightField])}return t});return this}},{key:"WebMercator2lonLat",value:function t(e,r){var n=e/20037508.34*180;var i=r/20037508.34*180;i=180/Math.PI*(2*Math.atan(Math.exp(i*Math.PI/180))-Math.PI/2);return[n,i]}},{key:"convertData",value:function t(e){if(e!=null&&e.features!=null&&e.features.length>0){for(var r=0;r<e.features.length;r++){var n=e.features[r].geometry;if(n!=null&&n.coordinates!=null&&n.coordinates.length>0){if(n.type=="Polygon"){var i=n.coordinates;for(var o=0;o<i.length;o++){var s=i[o];if(s!=null&&s.length>0){for(var u=0;u<s.length;u++){var l=new a.mapboxgl.LngLat(s[u][0],s[u][1]);var c=map.project(l);e.features[r].geometry.coordinates[o][u]=[c.x,c.y]}}}}else if(n.type=="MultiPolygon"){var h=n.coordinates;for(var f=0;f<h.length;f++){var p=h[f];if(p!=null&&p.length>0){for(var o=0;o<p.length;o++){var s=p[o];if(s!=null&&s.length>0){for(var u=0;u<s.length;u++){var d=new a.mapboxgl.LngLat(s[u][0],s[u][1]);var y=map.project(d);e.features[r].geometry.coordinates[f][o][u]=[y.x,y.y]}}}}}}}}}return e}},{key:"getData",value:function t(){return this.data}},{key:"addTo",value:function t(e){this.map=e;if(!this.map){return this}this.show();return this}},{key:"show",value:function t(e){c(this,e);this._addLayer();if(this.enableHighlight){this._addHighLightLayer()}if(this.showLegend){if(!this.legend){this.legend=this._createLegendControl()}this.map.addControl(this.legend,this.legendPosition)}return this}},{key:"remove",value:function t(){if(!this.map){return this}var e=this;e.mousemoveOn=false;var r=this.id?this.id:"theme3DLayer";if(this.map.getLayer(r)){this.map.removeLayer(r)}var n="highlightLayer";if(this.map.getLayer(n)){this.map.removeLayer(n)}if(this.legend){this.map.removeControl(this.legend)}return this}},{key:"getLayerStyleOptions",value:function t(){}},{key:"getHighlightStyleOptions",value:function t(){}},{key:"_createLegendControl",value:function t(e){var r=this;function n(){}n.prototype.onAdd=function(t){this._map=t;this._container=document.createElement("div");var n="mapboxgl-ctrl legend ";var i="legend-light";if(r.legendTheme==="dark"){i="legend-dark"}var o=" legend-horizontal";if(r.legendOrientation==="vertical"){o=" legend-vertical"}this._container.className=n+i+o;if(e){this._container.innerHTML=e}else{var s=r.legendTitle||"";var a=" <div class='legend-title'>"+s+"</div>";var u=r._createLegendElement.call(r)||"";var l="<div class='legend-content'>"+u+"</div>";this._container.innerHTML=a+l}r._appendLegendCSSStyle();return this._container};n.prototype.onRemove=function(){this._container.parentNode.removeChild(this._container);this._map=undefined};return new n}},{key:"_createLegendElement",value:function t(){}},{key:"_addLayer",value:function t(){var e=this.getLayerStyleOptions();var r=this.id?this.id:"theme3DLayer";this.id=r;var n=this.sourceId=r+"Source";if(!!this.map.getSource(n)){this.map.removeSource(n)}this.map.addSource(n,{type:"geojson",data:this.data});if(!!this.map.getLayer(r)){this.map.removeLayer(r)}this.map.addLayer({id:r,type:"fill-extrusion",source:n,paint:e});this.map.moveLayer(r)}},{key:"_addHighLightLayer",value:function t(){if(!this.map){return}var e=this.map;if(e.getSource("highlight")){e.removeSource("highlight")}e.addSource("highlight",{type:"geojson",data:{type:"FeatureCollection",features:[]}});if(!!e.getLayer("highlightLayer")){e.removeLayer("highlightLayer")}e.addLayer({id:"highlightLayer",type:"fill-extrusion",source:"highlight",paint:this.getHighlightStyleOptions()});var r=this;var n;e.on("mousemove",function(t){if(!r.mousemoveOn){return}r.mousemoveOn=true;var e=document.querySelector(".mapboxgl-canvas-container.mapboxgl-interactive");e.style.cursor="auto";var i=r.map.queryRenderedFeatures(t.point,{layers:[r.id]});if(r.highlight&&r.highlight.callback){r.highlight.callback(i,t)}if(!i||i.length<1){r._clearHighlight.call(r);return}var o=i[0].properties.fid;if(n===o){return}n=o;r._clearHighlight.call(r);var s=r.map.querySourceFeatures(r.sourceId,{filter:["==","fid",o]});var a,u=s.length;var l={type:"FeatureCollection",features:[]};for(a=0;a<u;a++){l["features"].push(s[a].toJSON())}r.map.getSource("highlight").setData(l)})}},{key:"_clearHighlight",value:function t(){if(this.map){if(!!this.map.getSource("highlight")){this.map.getSource("highlight").setData({type:"FeatureCollection",features:[]})}}}},{key:"_appendLegendCSSStyle",value:function t(){var e=document.createElement("style");e.type="text/css";var r="\n        .legend {\n            display: inline-block;\n            border-radius: 2px;\n            -moz-border-radius: 2px;\n            -webkit-border-radius: 2px;\n            font-size: 12px;\n            color: rgba(0, 0, 0, 0.8);\n            background-color: rgb(255, 255, 255);\n        }\n        .legend-light {\n            color: rgba(0, 0, 0, 0.8);\n            background-color: rgb(255, 255, 255);\n            box-shadow: 0px 0px 6px #bbbbbb;\n            -moz-box-shadow: 0px 6px 10px #bbbbbb;\n            -webkit-box-shadow: 0px 0px 6px #bbbbbb;\n        }\n        .legend-dark {\n            color: rgba(255, 255, 255, 0.8);\n            background-color: rgb(64, 64, 64);\n        }\n        .legend .legend-title {\n            min-height: 14px;\n            max-width: 500px;\n            padding:6px 10px;\n        }\n        .legend-light .legend-title {\n            color: rgba(0, 0, 0, 0.8);\n        }\n        .legend-dark .legend-title {\n            color: rgba(255, 255, 255, 0.8);\n        }\n        .legend-content{\n            padding:6px 10px;\n        }\n        ";e.innerHTML=r+this._legendCSSStyle();document.getElementsByTagName("head")[0].appendChild(e)}},{key:"_legendCSSStyle",value:function t(){return"  \n        .legend ul {\n            padding: 0;\n            margin: 0 16px;\n            height: 100%;\n            display: block;\n            list-style: none;\n        }\n\n        .legend li {\n            vertical-align: middle;\n        }\n\n        .legend li span:first-child {\n            vertical-align: middle;\n        }\n\n        .legend li span:last-child {\n            line-height: 28px;\n            max-width: 200px;\n            vertical-align: middle;\n            white-space: nowrap;\n            overflow: hidden;\n            text-overflow: ellipsis;\n            -ms-text-overflow: ellipsis;\n        }\n\n        .legend-vertical li {\n            height: 28px;\n        }\n\n        .legend-vertical li span:first-child {\n            display: inline-block;\n            width: 60px;\n            height: 100%;\n        }\n\n        .legend-vertical li span:last-child {\n            display: inline-block;\n            margin-left: 16px;\n            height: 100%;\n        }\n\n        .legend-horizontal li {\n            height: 56px;\n            float: left;\n        }\n\n        .legend-horizontal li span:first-child {\n            display: block;\n            width: 100%;\n            height: 50%;\n        }\n\n        .legend-horizontal li span:last-child {\n            display: block;\n            vertical-align: middle;\n            width: 60px;\n            height: 50%;\n            text-align: center;\n        }\n        "}}]);return t}();e.Theme3DLayer=f;h.Map.Theme3DLayer=f},function(t,e,r){t.exports={default:r(319),__esModule:true}},function(t,e,r){var n=r(321);t.exports=function(t,e,r){n(t);if(e===undefined)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,i){return t.call(e,r,n,i)}}return function(){return t.apply(e,arguments)}}},function(t,e,r){t.exports=!r(50)&&!r(69)(function(){return Object.defineProperty(r(189)("div"),"a",{get:function(){return 7}}).a!=7})},function(t,e,r){var n=r(61);var i=r(42).document;var o=n(i)&&n(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e,r){var n=r(51);var i=r(52);var o=r(324)(false);var s=r(119)("IE_PROTO");t.exports=function(t,e){var r=i(t);var a=0;var u=[];var l;for(l in r)if(l!=s)n(r,l)&&u.push(l);while(e.length>a)if(n(r,l=e[a++])){~o(u,l)||u.push(l)}return u}},function(t,e,r){r(330);var n=r(42);var i=r(59);var o=r(87);var s=r(43)("toStringTag");var a=("CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,"+"DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,"+"MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,"+"SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,"+"TextTrackList,TouchList").split(",");for(var u=0;u<a.length;u++){var l=a[u];var c=n[l];var h=c&&c.prototype;if(h&&!h[s])i(h,s,l);o[l]=o.Array}},function(t,e,r){"use strict";var n=r(85);var i=r(58);var o=r(193);var s=r(59);var a=r(87);var u=r(333);var l=r(122);var c=r(194);var h=r(43)("iterator");var f=!([].keys&&"next"in[].keys());var p="@@iterator";var d="keys";var y="values";var v=function(){return this};t.exports=function(t,e,r,g,m,_,b){u(r,e,g);var x=function(t){if(!f&&t in I)return I[t];switch(t){case d:return function e(){return new r(this,t)};case y:return function e(){return new r(this,t)}}return function e(){return new r(this,t)}};var S=e+" Iterator";var w=m==y;var C=false;var I=t.prototype;var E=I[h]||I[p]||m&&I[m];var P=E||x(m);var M=m?!w?P:x("entries"):undefined;var L=e=="Array"?I.entries||E:E;var N,T,O;if(L){O=c(L.call(new t));if(O!==Object.prototype&&O.next){l(O,S,true);if(!n&&typeof O[h]!="function")s(O,h,v)}}if(w&&E&&E.name!==y){C=true;P=function t(){return E.call(this)}}if((!n||b)&&(f||C||!I[h])){s(I,h,P)}a[e]=P;a[S]=v;if(m){N={values:w?P:x(y),keys:_?P:x(d),entries:M};if(b)for(T in N){if(!(T in I))o(I,T,N[T])}else i(i.P+i.F*(f||C),e,N)}return N}},function(t,e,r){t.exports=r(59)},function(t,e,r){var n=r(51);var i=r(123);var o=r(119)("IE_PROTO");var s=Object.prototype;t.exports=Object.getPrototypeOf||function(t){t=i(t);if(n(t,o))return t[o];if(typeof t.constructor=="function"&&t instanceof t.constructor){return t.constructor.prototype}return t instanceof Object?s:null}},function(t,e,r){"use strict";var n=r(334)(true);r(192)(String,"String",function(t){this._t=String(t);this._i=0},function(){var t=this._t;var e=this._i;var r;if(e>=t.length)return{value:undefined,done:true};r=n(t,e);this._i+=r.length;return{value:r,done:false}})},function(t,e,r){t.exports=!r(37)&&!r(62)(function(){return Object.defineProperty(r(124)("div"),"a",{get:function(){return 7}}).a!=7})},function(t,e,r){var n=r(54);var i=r(55);var o=r(349)(false);var s=r(129)("IE_PROTO");t.exports=function(t,e){var r=i(t);var a=0;var u=[];var l;for(l in r)if(l!=s)n(r,l)&&u.push(l);while(e.length>a)if(n(r,l=e[a++])){~o(u,l)||u.push(l)}return u}},function(t,e,r){var n=r(74);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return n(t)=="String"?t.split(""):Object(t)}},function(t,e,r){var n=r(128);var i=Math.min;t.exports=function(t){return t>0?i(n(t),9007199254740991):0}},function(t,e,r){"use strict";var n=r(20);var i=r(54);var o=r(37);var s=r(30);var a=r(201);var u=r(355).KEY;var l=r(62);var c=r(130);var h=r(94);var f=r(91);var p=r(24);var d=r(134);var y=r(135);var v=r(356);var g=r(357);var m=r(31);var _=r(45);var b=r(72);var x=r(55);var S=r(125);var w=r(90);var C=r(136);var I=r(203);var E=r(133);var P=r(95);var M=r(44);var L=r(73);var N=E.f;var T=M.f;var O=I.f;var A=n.Symbol;var R=n.JSON;var F=R&&R.stringify;var D="prototype";var k=p("_hidden");var j=p("toPrimitive");var G={}.propertyIsEnumerable;var B=c("symbol-registry");var U=c("symbols");var q=c("op-symbols");var z=Object[D];var V=typeof A=="function"&&!!P.f;var W=n.QObject;var H=!W||!W[D]||!W[D].findChild;var X=o&&l(function(){return C(T({},"a",{get:function(){return T(this,"a",{value:7}).a}})).a!=7})?function(t,e,r){var n=N(z,e);if(n)delete z[e];T(t,e,r);if(n&&t!==z)T(z,e,n)}:T;var Z=function(t){var e=U[t]=C(A[D]);e._k=t;return e};var Y=V&&typeof A.iterator=="symbol"?function(t){return typeof t=="symbol"}:function(t){return t instanceof A};var J=function t(e,r,n){if(e===z)J(q,r,n);m(e);r=S(r,true);m(n);if(i(U,r)){if(!n.enumerable){if(!i(e,k))T(e,k,w(1,{}));e[k][r]=true}else{if(i(e,k)&&e[k][r])e[k][r]=false;n=C(n,{enumerable:w(0,false)})}return X(e,r,n)}return T(e,r,n)};var Q=function t(e,r){m(e);var n=v(r=x(r));var i=0;var o=n.length;var s;while(o>i)J(e,s=n[i++],r[s]);return e};var K=function t(e,r){return r===undefined?C(e):Q(C(e),r)};var $=function t(e){var r=G.call(this,e=S(e,true));if(this===z&&i(U,e)&&!i(q,e))return false;return r||!i(this,e)||!i(U,e)||i(this,k)&&this[k][e]?r:true};var tt=function t(e,r){e=x(e);r=S(r,true);if(e===z&&i(U,r)&&!i(q,r))return;var n=N(e,r);if(n&&i(U,r)&&!(i(e,k)&&e[k][r]))n.enumerable=true;return n};var et=function t(e){var r=O(x(e));var n=[];var o=0;var s;while(r.length>o){if(!i(U,s=r[o++])&&s!=k&&s!=u)n.push(s)}return n};var rt=function t(e){var r=e===z;var n=O(r?q:x(e));var o=[];var s=0;var a;while(n.length>s){if(i(U,a=n[s++])&&(r?i(z,a):true))o.push(U[a])}return o};if(!V){A=function t(){if(this instanceof A)throw TypeError("Symbol is not a constructor!");var e=f(arguments.length>0?arguments[0]:undefined);var r=function(t){if(this===z)r.call(q,t);if(i(this,k)&&i(this[k],e))this[k][e]=false;X(this,e,w(1,t))};if(o&&H)X(z,e,{configurable:true,set:r});return Z(e)};a(A[D],"toString",function t(){return this._k});E.f=tt;M.f=J;r(137).f=I.f=et;r(93).f=$;P.f=rt;if(o&&!r(75)){a(z,"propertyIsEnumerable",$,true)}d.f=function(t){return Z(p(t))}}s(s.G+s.W+s.F*!V,{Symbol:A});for(var nt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),it=0;nt.length>it;)p(nt[it++]);for(var ot=L(p.store),st=0;ot.length>st;)y(ot[st++]);s(s.S+s.F*!V,"Symbol",{for:function(t){return i(B,t+="")?B[t]:B[t]=A(t)},keyFor:function t(e){if(!Y(e))throw TypeError(e+" is not a symbol!");for(var r in B)if(B[r]===e)return r},useSetter:function(){H=true},useSimple:function(){H=false}});s(s.S+s.F*!V,"Object",{create:K,defineProperty:J,defineProperties:Q,getOwnPropertyDescriptor:tt,getOwnPropertyNames:et,getOwnPropertySymbols:rt});var at=l(function(){P.f(1)});s(s.S+s.F*at,"Object",{getOwnPropertySymbols:function t(e){return P.f(b(e))}});R&&s(s.S+s.F*(!V||l(function(){var t=A();return F([t])!="[null]"||F({a:t})!="{}"||F(Object(t))!="{}"})),"JSON",{stringify:function t(e){var r=[e];var n=1;var i,o;while(arguments.length>n)r.push(arguments[n++]);o=i=r[1];if(!_(i)&&e===undefined||Y(e))return;if(!g(i))i=function(t,e){if(typeof o=="function")e=o.call(this,t,e);if(!Y(e))return e};r[1]=i;return F.apply(R,r)}});A[D][j]||r(53)(A[D],j,A[D].valueOf);h(A,"Symbol");h(Math,"Math",true);h(n.JSON,"JSON",true)},function(t,e,r){t.exports=r(53)},function(t,e,r){var n=r(20).document;t.exports=n&&n.documentElement},function(t,e,r){var n=r(55);var i=r(137).f;var o={}.toString;var s=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];var a=function(t){try{return i(t)}catch(t){return s.slice()}};t.exports.f=function t(e){return s&&o.call(e)=="[object Window]"?a(e):i(n(e))}},function(t,e,r){"use strict";var n=r(75);var i=r(30);var o=r(201);var s=r(53);var a=r(76);var u=r(365);var l=r(94);var c=r(205);var h=r(24)("iterator");var f=!([].keys&&"next"in[].keys());var p="@@iterator";var d="keys";var y="values";var v=function(){return this};t.exports=function(t,e,r,g,m,_,b){u(r,e,g);var x=function(t){if(!f&&t in I)return I[t];switch(t){case d:return function e(){return new r(this,t)};case y:return function e(){return new r(this,t)}}return function e(){return new r(this,t)}};var S=e+" Iterator";var w=m==y;var C=false;var I=t.prototype;var E=I[h]||I[p]||m&&I[m];var P=E||x(m);var M=m?!w?P:x("entries"):undefined;var L=e=="Array"?I.entries||E:E;var N,T,O;if(L){O=c(L.call(new t));if(O!==Object.prototype&&O.next){l(O,S,true);if(!n&&typeof O[h]!="function")s(O,h,v)}}if(w&&E&&E.name!==y){C=true;P=function t(){return E.call(this)}}if((!n||b)&&(f||C||!I[h])){s(I,h,P)}a[e]=P;a[S]=v;if(m){N={values:w?P:x(y),keys:_?P:x(d),entries:M};if(b)for(T in N){if(!(T in I))o(I,T,N[T])}else i(i.P+i.F*(f||C),e,N)}return N}},function(t,e,r){var n=r(54);var i=r(72);var o=r(129)("IE_PROTO");var s=Object.prototype;t.exports=Object.getPrototypeOf||function(t){t=i(t);if(n(t,o))return t[o];if(typeof t.constructor=="function"&&t instanceof t.constructor){return t.constructor.prototype}return t instanceof Object?s:null}},function(t,e){},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.DynShowStyle=undefined;var n=r(0);var i=r(8);var o=r(208);var s=r(25);var a=r(97);var u=r(141);var l=r(142);var c=function t(e){var r=e!==undefined?e:{};(0,i.extend)(this,r);this.Alpha=r.Alpha!==undefined?r.Alpha:0;this.BugSpare=r.BugSpare!==undefined?r.BugSpare:false;this.CustomRender=r.CustomRender!==undefined?r.CustomRender:false;this.CustomRenderPath=r.CustomRenderPath!==undefined?r.CustomRenderPath:null;this.DirectionLineClr=r.DirectionLineClr!==undefined?r.DirectionLineClr:0;this.DynNoteFlag=r.DynNoteFlag!==undefined?r.DynNoteFlag:false;this.DynNoteInfo=r.DynNoteInfo!==undefined?r.DynNoteInfo:null;this.IsShowArc=r.IsShowArc!==undefined?r.IsShowArc:0;this.ISShowLineDirection=r.ISShowLineDirection!==undefined?r.ISShowLineDirection:false;this.LineInfo=r.LineInfo!==undefined?r.LineInfo:null;this.MaxScale=r.MaxScale!==undefined?r.MaxScale:0;this.MinScale=r.MinScale!==undefined?r.MinScale:0;this.ShowCoordPnt=r.ShowCoordPnt!==undefined?r.ShowCoordPnt:false;this.SpareLineInfo=r.SpareLineInfo!==undefined?r.SpareLineInfo:null;this.SparePointInfo=r.SparePointInfo!==undefined?r.SparePointInfo:null;this.SpareRegInfo=r.SpareRegInfo!==undefined?r.SpareRegInfo:null;this.SymbleScale=r.SymbleScale!==undefined?r.SymbleScale:0};e.DynShowStyle=c;n.Zondy.Object.DynShowStyle=c},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CDynNoteInfo=undefined;var n=r(0);var i=r(8);var o=r(25);var s=r(209);var a=function t(e){var r=e!==undefined?e:{};(0,i.extend)(this,r);this.Angle=r.Angle!==undefined?r.Angle:0;this.Backclr=r.Backclr!==undefined?r.Backclr:0;this.Backexp=r.Backexp!==undefined?r.Backexp:0;this.Bold=r.Bold!==undefined?r.Bold:0;this.FieldName=r.FieldName!==undefined?r.FieldName:null;this.FontAngle=r.FontAngle!==undefined?r.FontAngle:0;this.FontColor=r.FontColor!==undefined?r.FontColor:0;this.FontSize=r.FontSize!==undefined?r.FontSize:0;this.FontStyle=r.FontStyle!==undefined?r.FontStyle:0;this.Ifnt=r.Ifnt!==undefined?r.Ifnt:0;this.Ifnx=r.Ifnx!==undefined?r.Ifnx:o.FontShape.Positive;this.IsFilled=r.IsFilled!==undefined?r.IsFilled:false;this.IsHzpl=r.IsHzpl!==undefined?r.IsHzpl:false;this.IsOvprnt=r.IsOvprnt!==undefined?r.IsOvprnt:false;this.LabelLevel=r.LabelLevel!==undefined?r.LabelLevel:0;this.LableType=r.LableType!==undefined?r.LableType:null;this.Offsetx=r.Offsetx!==undefined?r.Offsetx:0;this.Offsety=r.Offsety!==undefined?r.Offsety:0;this.Space=r.Space!==undefined?r.Space:0;this.StrikeThrough=r.StrikeThrough!==undefined?r.StrikeThrough:0;this.UnderLine=r.UnderLine!==undefined?r.UnderLine:0};e.CDynNoteInfo=a;n.Zondy.Object.CDynNoteInfo=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.DynNoteLableType=undefined;var n=r(0);var i=r(8);var o=r(210);var s=r(211);var a=r(212);var u=function t(e){var r=e!==undefined?e:{};(0,i.extend)(this,r);this.PntInfo=r.PntInfo!==undefined&&r.PntInfo!==null?r.PntInfo:null;this.LinInfo=r.LinInfo!==undefined&&r.LinInfo!==null?r.LinInfo:null;this.RegInfo=r.RegInfo!==undefined&&r.RegInfo!==null?r.RegInfo:null};e.DynNoteLableType=u;n.Zondy.Object.DynNoteLableType=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.LablePntInfo=undefined;var n=r(0);var i=r(8);var o=r(25);var s=function t(e){var r=e!==undefined?e:{};(0,i.extend)(this,r);this.Ang=r.Ang!==undefined&&r.Ang!==null?r.Ang:null;this.ClientOutLabel=r.ClientOutLabel!==undefined&&r.ClientOutLabel!==null?r.ClientOutLabel:false;this.Distance=r.Distance!==undefined&&r.Distance!==null?r.Distance:0;this.EightDirLableType=r.EightDirLableType!==undefined&&r.EightDirLableType!==null?r.EightDirLableType:null;this.PntType=r.PntType!==undefined&&r.PntType!==null?r.PntType:0};e.LablePntInfo=s;n.Zondy.Object.LablePntInfo=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.LabelLinInfo=undefined;var n=r(0);var i=r(8);var o=r(25);var s=function t(e){var r=e!==undefined?e:{};(0,i.extend)(this,r);this.ClientOutLabel=r.ClientOutLabel!==undefined&&r.ClientOutLabel!==null?r.ClientOutLabel:false;this.DistFromLine=r.DistFromLine!==undefined&&r.DistFromLine!==null?r.DistFromLine:0;this.FromLineConstrain=r.FromLineConstrain!==undefined&&r.FromLineConstrain!==null?r.FromLineConstrain:0;this.Interval=r.Interval!==undefined&&r.Interval!==null?r.Interval:0;this.LinType=r.LinType!==undefined&&r.LinType!==null?r.LinType:0;this.Repeat=r.Repeat!==undefined&&r.Repeat!==null?r.Repeat:0;this.SpreadType=r.SpreadType!==undefined&&r.SpreadType!==null?r.SpreadType:null};e.LabelLinInfo=s;n.Zondy.Object.LabelLinInfo=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.LabelRegInfo=undefined;var n=r(0);var i=r(8);var o=r(25);var s=function t(e){var r=e!==undefined?e:{};(0,i.extend)(this,r);this.ClientOutLabel=r.ClientOutLabel!==undefined&&r.ClientOutLabel!==null?r.ClientOutLabel:false;this.LabelMiniRegion=r.LabelMiniRegion!==undefined&&r.LabelMiniRegion!==null?r.LabelMiniRegion:0;this.MayPlaceOutside=r.MayPlaceOutside!==undefined&&r.MayPlaceOutside!==null?r.MayPlaceOutside:0;this.MiniRegionArea=r.MiniRegionArea!==undefined&&r.MiniRegionArea!==null?r.MiniRegionArea:0;this.Offset=r.Offset!==undefined&&r.Offset!==null?r.Offset:0;this.RegType=r.RegType!==undefined&&r.RegType!==null?r.RegType:0};e.LabelRegInfo=s;n.Zondy.Object.LabelRegInfo=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CDisplayStyleExtend=undefined;var n=r(0);var i=r(8);var o=function t(e){var r=e!==undefined?e:{};(0,i.extend)(this,r);this.Index=r.Index!==undefined?r.Index:0;this.SymbleShow=r.SymbleShow!==undefined?r.SymbleShow:false;this.LinPenWidFixed=r.LinPenWidFixed!==undefined?r.LinPenWidFixed:false;this.LinSizeFixed=r.LinSizeFixed!==undefined?r.LinSizeFixed:false;this.PntPenWidFixed=r.PntPenWidFixed!==undefined?r.PntPenWidFixed:false;this.PntSizeFixed=r.PntSizeFixed!==undefined?r.PntSizeFixed:false;this.RegPenWidFixed=r.RegPenWidFixed!==undefined?r.RegPenWidFixed:false;this.RegSizeFixed=r.RegSizeFixed!==undefined?r.RegSizeFixed:false;this.AnnSizeFixed=r.AnnSizeFixed!==undefined?r.AnnSizeFixed:false;this.FollowScale=r.FollowScale!==undefined?r.FollowScale:false;this.ShowCoordPnt=r.ShowCoordPnt!==undefined?r.ShowCoordPnt:false;this.ShowElemRect=r.ShowElemRect!==undefined?r.ShowElemRect:false;this.DriverQuality=r.DriverQuality!==undefined?r.DriverQuality:0;this.DynProjFlag=r.DynProjFlag!==undefined?r.DynProjFlag:false};e.CDisplayStyleExtend=o;n.Zondy.Object.CDisplayStyleExtend=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CGDBInfo=undefined;var n=r(0);var i=function t(e){var r=e?e:{};this.GDBSvrName=r.ServerName!==undefined?r.ServerName:null;this.GDBName=r.GDBName!==undefined?r.GDBName:null;this.User=r.User!==undefined?r.User:null;this.Password=r.Password!==undefined?r.Password:null};e.CGDBInfo=i;n.Zondy.Object.CGDBInfo=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Feature=undefined;var n=r(0);var i=r(8);var o=r(216);var s=r(217);var a=r(25);var u=r(218);var l=function t(e){var r=e!==undefined?e:{};(0,i.extend)(this,r);this.AttValue=r.AttValue!==undefined&&r.AttValue!==null?r.AttValue:null;this.FID=r.FID!==undefined&&r.FID!==null?r.FID:0;this.bound=r.bound!==undefined&&r.bound!==null?r.bound:null;this.fGeom=r.fGeom!==undefined&&r.fGeom!==null?r.fGeom:null;this.ftype=r.ftype!==undefined&&r.ftype!==null?r.ftype:0;this.GraphicInfo=r.GraphicInfo!==undefined&&r.GraphicInfo!==null?r.GraphicInfo:null};l.prototype.getAttValue=function(t){if(this.AttValue===null){return null}var e=this.AttValue.length;if(typeof t==="number"){if(t>=e){return null}return this.AttValue[t]}};l.prototype.getGraphicInfo=function(){if(this.GraphicInfo===null){return null}else{return new u.WebGraphicsInfo(this.GraphicInfo)}};l.prototype.getAttValueArray=function(){return this.AttValue};l.prototype.getRectBound=function(){var t=this.bound;if(t!==null){return new o.Rectangle(t)}else{return t}};l.prototype.getGeometry=function(){return this.fGeom};l.prototype.getFID=function(){return this.FID};l.prototype.setAttValues=function(t){this.AttValue=t};l.prototype.setBound=function(t){var e=null;if(typeof t==="string"){e=new o.Rectangle(t)}if(t instanceof String){e=new o.Rectangle(t)}if(t instanceof o.Rectangle){e=t}if(t instanceof ol.extent){e=new o.Rectangle;e.setByOL(t)}this.bound=e};l.prototype.setFID=function(t){this.FID=t};l.prototype.setFType=function(t){this.ftype=t};l.prototype.destroy=function(){this.AttValue=null;this.FID=null;this.bound=null;this.fGeom=null;this.ftype=null;this.GraphicInfo=null};e.Feature=l;n.Zondy.Object.Feature=l},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Rectangle=undefined;var n=r(2);var i=d(n);var o=r(1);var s=d(o);var a=r(9);var u=d(a);var l=r(3);var c=d(l);var h=r(4);var f=d(h);var p=r(56);function d(t){return t&&t.__esModule?t:{default:t}}var y=function(t){(0,f.default)(e,t);function e(t,r,n,o,a){(0,s.default)(this,e);var u=a?a:{};var l=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,u));l.xmin=t;l.xmax=n;l.ymin=r;l.ymax=o;return l}(0,u.default)(e,[{key:"setByOL",value:function t(e){if(e===undefined||e===null){return}this.xmin=e[0];this.ymin=e[1];this.xmax=e[2];this.ymax=e[3]}},{key:"toString",value:function t(){return""+this.xmin+","+this.ymin+","+this.xmax+","+this.ymax}},{key:"getGeometryType",value:function t(){return"rect"}},{key:"convertToBound",value:function t(){var e=[this.xmin,this.ymin,this.xmax,this.ymax];return e}},{key:"intersectsBounds",value:function t(e,r){if(typeof r==="boolean"){r={inclusive:r}}r=r||{};if(r.inclusive===null){r.inclusive=true}var n=this;var i=false;var o=n.xmin===e.xmax||n.xmax===e.xmin||n.ymax===e.ymin||n.ymin===e.ymax;if(r.inclusive||!o){var s=e.ymin>=n.ymin&&e.ymin<=n.ymax||n.ymin>=e.ymin&&n.ymin<=e.ymax;var a=e.ymax>=n.ymin&&e.ymax<=n.ymax||n.ymax>e.ymin&&n.ymax<e.ymax;var u=e.xmin>=n.xmin&&e.xmin<=n.xmax||n.xmin>=e.xmin&&n.xmin<=e.xmax;var l=e.xmax>=n.xmin&&e.xmax<=n.xmax||n.xmax>=e.xmin&&n.xmax<=e.xmax;i=(s||a)&&(u||l)}return i}}]);return e}(p.Tangram);e.Rectangle=y;Zondy.Object.Rectangle=y},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.FeatureGeometry=undefined;var n=r(0);var i=r(8);var o=r(143);var s=r(144);var a=r(145);var u=function t(e){var r=e!==undefined?e:{};(0,i.extend)(this,r);this.PntGeom=r.PntGeom!==undefined&&r.PntGeom!==null?r.PntGeom:null;this.LinGeom=r.LinGeom!==undefined&&r.LinGeom!==null?r.LinGeom:null;this.RegGeom=r.RegGeom!==undefined&&r.RegGeom!==null?r.RegGeom:null};u.prototype.setPntGeom=function(t){this.PntGeom=t!==undefined&&t!==null&&Array.isArray(t)?t:null};u.prototype.setLine=function(t){this.LinGeom=t!==undefined&&t!==null&&Array.isArray(t)?t:null};u.prototype.setRegGeom=function(t){this.RegGeom=t!==undefined&&t!==null&&Array.isArray(t)?t:null};e.FeatureGeometry=u;n.Zondy.Object.FeatureGeometry=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.WebGraphicsInfo=undefined;var n=r(0);var i=r(8);var o=r(25);var s=r(141);var a=r(97);var u=r(142);var l=function t(e){var r=e!==undefined?e:{};(0,i.extend)(this,r);this.InfoType=r.InfoType!==undefined&&r.InfoType!==null?r.InfoType:0;this.PntInfo=r.PntInfo!==undefined&&r.PntInfo!==null?r.PntInfo:null;this.LinInfo=r.LinInfo!==undefined&&r.LinInfo!==null?r.LinInfo:null;this.RegInfo=r.RegInfo!==undefined&&r.RegInfo!==null?r.RegInfo:null};e.WebGraphicsInfo=l;n.Zondy.Object.WebGraphicsInfo=l},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.FeatureSet=undefined;var n=r(0);var i=r(8);var o=r(96);var s=r(215);var a=function t(e){var r=e!==undefined?e:{};(0,i.extend)(this,r);this.TotalCount=r.TotalCount!==undefined&&r.TotalCount!==null?r.TotalCount:0;this.AttStruct=r.AttStruct!==undefined&&r.AttStruct!==null?r.AttStruct:null;this.SFEleArray=r.SFEleArray!==undefined&&r.SFEleArray!==null?r.SFEleArray:new Array};a.prototype.clear=function(){this.AttStruct=null;this.SFEleArray=new Array};a.prototype.addFeature=function(t){if(t instanceof Array){this.SFEleArray.concat(t)}else{this.SFEleArray.push(t)}};a.prototype.getFeaturesLength=function(){if(this.SFEleArray instanceof Array){return this.SFEleArray.length}else{return 0}};a.prototype.getFeatureByIndex=function(t){if(t>=this.getFeaturesLength()){return null}else{var e=this.SFEleArray[t];if(e instanceof s.Feature){return e}else{return new s.Feature(this.SFEleArray[t])}}};a.prototype.getAttType=function(t){var e;if(this.AttStruct==null){return null}if(typeof t=="number"){e=t}else{e=this.getAttIndexByAttName(t)}if(e==null){return null}else{return this.AttStruct.FldType[e]}};a.prototype.getAttIndexByAttName=function(t){if(this.AttStruct==null){return null}if(this.AttStruct.FldName==null){return null}var e=this.AttStruct.FldName.length;for(var r=0;r<e;r++){if(this.AttStruct.FldName[r]==t){return r}}return null};a.prototype.getAttNameByIndex=function(t){if(this.AttStruct==null){return null}if(this.AttStruct.FldName==null){return null}if(this.AttStruct.FldName.length<=t){return null}return this.AttStruct.FldName[t]};e.FeatureSet=a;n.Zondy.Object.FeatureSet=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Polygon=undefined;var n=r(2);var i=y(n);var o=r(1);var s=y(o);var a=r(9);var u=y(a);var l=r(3);var c=y(l);var h=r(4);var f=y(h);var p=r(56);var d=r(33);function y(t){return t&&t.__esModule?t:{default:t}}var v=function(t){(0,f.default)(e,t);function e(t,r){(0,s.default)(this,e);var n=r?r:{};var o=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,n));o.pointArr=t!==undefined&&t!==null&&Array.isArray(t)?t:new Array;return o}(0,u.default)(e,[{key:"setByOL",value:function t(e){if(e!==undefined&&e!==null){var r=e.getLinearRing(0);var n=r.getCoordinates();var i=n.length;for(var o=0;o<i;o++){this.pointArr[o]=new d.Point2D(n[o][0],n[o][1])}}}},{key:"toString",value:function t(){if(this.pointArr===null||this.pointArr.length===0){return""}var e="";for(var r=0;r<this.pointArr.length;r++){e+=this.pointArr[r].x+","+this.pointArr[r].y+","}return e.substring(0,e.length-1)}},{key:"getGeometryType",value:function t(){return"polygon"}}]);return e}(p.Tangram);e.Polygon=v;Zondy.Object.Polygon=v},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ContourNoteParam=undefined;var n=r(0);var i=function t(e){var r=e!=undefined?e:{};this.IsClipLine=r.IsClipLine!=undefined?r.IsClipLine:true;this.isXYScaleOut=r.isXYScaleOut!=undefined?r.isXYScaleOut:false;this.NoteDirection=r.NoteDirection!=undefined?r.NoteDirection:1;this.LineWidth=r.LineWidth!=undefined?r.LineWidth:.05;this.MaxAngle=r.MaxAngle!=undefined?r.MaxAngle:90;this.MinDist=r.MinDist!=undefined?r.MinDist:10;this.IsAbs=r.IsAbs!=undefined?r.IsAbs:false;this.IsComma=r.IsComma!=undefined?r.IsComma:false;this.DigitNum=r.DigitNum!=undefined?r.DigitNum:0;this.FormatNo=r.FormatNo!=undefined?r.FormatNo:0;this.LogFlag=r.LogFlag!=undefined?r.LogFlag:0;this.Prefix=r.Prefix!=undefined?r.Prefix:"";this.Suffix=r.Suffix!=undefined?r.Suffix:"";this.ColorNo=r.ColorNo!=undefined?r.ColorNo:0;this.FixSize=r.FixSize!=undefined?r.FixSize:.01;this.FontNo=r.FontNo!=undefined?r.FontNo:0};e.ContourNoteParam=i;n.Zondy.Object.ContourAnalyse.ContourNoteParam=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ContourParam=undefined;var n=r(0);var i=r(221);var o=r(223);var s=r(224);var a=function t(e){var r=e!=undefined?e:{};this.IsSmoothLine=r.IsSmoothLine!==undefined?r.IsSmoothLine:false;this.SmoothGrade=r.SmoothGrade!==undefined?r.SmoothGrade:1;this.IsMakeReg=r.IsMakeReg!==undefined?r.IsMakeReg:false;this.IsMakeNote=r.IsMakeNote!==undefined?r.IsMakeNote:false;this.IsMakeSLin=r.IsMakeSLin!==undefined?r.IsMakeSLin:false;this.MapWay=r.MapWay!==undefined?r.MapWay:1;this.FrameWidth=r.FrameWidth!==undefined?r.FrameWidth:1;this.FrameHeight=r.FrameHeight!==undefined?r.FrameHeight:1;this.IsDrawColorScl=r.IsDrawColorScl!==undefined?r.IsDrawColorScl:false;this.IsSaveEdge=r.IsSaveEdge!==undefined?r.IsSaveEdge:false;this.NoteParam=r.NoteParam!==undefined?r.NoteParam:new n.Zondy.Object.ContourAnalyse.ContourNoteParam;this.SlopLineParam=r.SlopLineParam!==undefined?r.SlopLineParam:new n.Zondy.Object.ContourAnalyse.SlopLineParam;this.ZValues=r.ZValues!==undefined?r.ZValues:new n.Zondy.Object.ContourAnalyse.ContourZValue};e.ContourParam=a;n.Zondy.Object.ContourAnalyse.ContourParam=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.SlopLineParam=undefined;var n=r(0);var i=function t(e){var r=e!==undefined?e:{};this.XScale=r.XScale!==undefined?r.XScale:2;this.YScale=r.YScale!==undefined?r.YScale:10;this.LineType=r.LineType!==undefined?r.LineType:0;this.SubLineType=r.SubLineType!==undefined?r.SubLineType:0};e.SlopLineParam=i;n.Zondy.Object.ContourAnalyse.SlopLineParam=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ContourZValue=undefined;var n=r(0);var i=r(97);var o=r(225);var s=function t(e){var r=e!=undefined?e:{};this.ZValue=r.ZValue!=undefined?r.ZValue:1;this.LineInfo=r.LineInfo!=undefined?r.LineInfo:null;this.RegInfo=r.RegInfo!=undefined?r.RegInfo:null;this.IsOutputNote=r.IsOutputNote!=undefined?r.IsOutputNote:false};e.ContourZValue=s;n.Zondy.Object.ContourAnalyse.ContourZValue=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ContourRegionInfo=undefined;var n=r(0);var i=function t(e){var r=e!=undefined?e:{};this.PatID=r.PatID!=undefined?r.PatID:0;this.FillMode=r.FillMode!=undefined?r.FillMode:0;this.FillColor=r.FillColor!=undefined?r.FillColor:1;this.PatHeight=r.PatHeight!=undefined?r.PatHeight:1;this.PatWidth=r.PatWidth!=undefined?r.PatWidth:1;this.PatAngle=r.PatAngle!=undefined?r.PatAngle:1;this.PatColor=r.PatColor!=undefined?r.PatColor:1;this.OutPenWidth=r.OutPenWidth!=undefined?r.OutPenWidth:1;this.OverMethod=r.OverMethod!=undefined?r.OverMethod:0};e.ContourRegionInfo=i;n.Zondy.Object.ContourAnalyse.ContourRegionInfo=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.MeshingParam=undefined;var n=r(0);var i=function t(e){var r=e!==undefined?e:{};this.SfClsURL=r.SfClsURL!==undefined?r.SfClsURL:null;this.FieldName=r.FieldName!==undefined?r.FieldName:null;this.XCellNum=r.XCellNum!==undefined?r.XCellNum:200;this.Bound=r.Bound!==undefined?r.Bound:null;this.CalN=r.CalN!==undefined?r.CalN:null;this.CalM=r.CalM!==undefined?r.CalM:null;this.bIsCalInValidCtrlPnt=r.bIsCalInValidCtrlPnt!==undefined?r.bIsCalInValidCtrlPnt:false;this.nYCtrlNum=r.nYCtrlNum!==undefined?r.nYCtrlNum:null;this.nXCtrlNum=r.nXCtrlNum!==undefined?r.nXCtrlNum:null;this.nLayerNum=r.nLayerNum!==undefined?r.nLayerNum:null};e.MeshingParam=i;n.Zondy.Object.ContourAnalyse.MeshingParam=i},function(t,e,r){"use strict";e.__esModule=true;var n=r(2);var i=a(n);var o=r(132);var s=a(o);function a(t){return t&&t.__esModule?t:{default:t}}e.default=function t(e,r,n){if(e===null)e=Function.prototype;var o=(0,s.default)(e,r);if(o===undefined){var a=(0,i.default)(e);if(a===null){return undefined}else{return t(a,r,n)}}else if("value"in o){return o.value}else{var u=o.get;if(u===undefined){return undefined}return u.call(n)}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CommonServiceBase=undefined;var n=r(229);var i=d(n);var o=r(1);var s=d(o);var a=r(9);var u=d(a);var l=r(0);var c=r(8);var h=r(236);var f=r(237);var p=r(238);function d(t){return t&&t.__esModule?t:{default:t}}var y=function(){function t(e,r){(0,s.default)(this,t);var n=this;this.EVENT_TYPES=["processCompleted","processFailed"];this.events=null;this.eventListeners=null;this.url=null;this.urls=null;this.index=null;this.length=null;this.options=null;this.totalTimes=null;this.POLLING_TIMES=3;this._processSuccess=null;this._processFailed=null;this.isInTheSameDomain=null;if((0,c.isArray)(e)){n.urls=e;n.length=e.length;n.totalTimes=n.length;if(n.length===1){n.url=e[0]}else{n.index=parseInt(Math.random()*n.length);n.url=e[n.index]}}else{n.totalTimes=1;n.url=e}r=r||{};if(r){(0,c.extend)(this,r)}n.isInTheSameDomain=(0,c.isInTheSameDomain)(n.url);n.events=new h.Events(n,null,n.EVENT_TYPES,true);if(n.eventListeners instanceof Object){n.events.on(n.eventListeners)}}(0,u.default)(t,[{key:"destroy",value:function t(){var e=this;if((0,c.isArray)(e.urls)){e.urls=null;e.index=null;e.length=null;e.totalTimes=null}e.url=null;e.options=null;e._processSuccess=null;e._processFailed=null;e.isInTheSameDomain=null;e.EVENT_TYPES=null;if(e.events){e.events.destroy();e.events=null}if(e.eventListeners){e.eventListeners=null}}},{key:"request",value:function t(e){var r=this;e.url=e.url||r.url;e.isInTheSameDomain=r.isInTheSameDomain;r.calculatePollingTimes();r._processSuccess=e.success;r._processFailed=e.failure;e.scope=r;e.success=r.getUrlCompleted;e.failure=r.getUrlFailed;r.options=e;r._commit(r.options)}},{key:"getUrlCompleted",value:function t(e){var r=this;r._processSuccess(e)}},{key:"getUrlFailed",value:function t(e){var r=this;if(r.totalTimes>0){r.totalTimes--;r.ajaxPolling()}else{r._processFailed(e)}}},{key:"ajaxPolling",value:function t(){var e=this,r=e.options.url,n=/^http:\/\/([a-z]{9}|(\d+\.){3}\d+):\d{0,4}/;e.index=parseInt(Math.random()*e.length);e.url=e.urls[e.index];r=r.replace(n,n.exec(e.url)[0]);e.options.url=r;e.options.isInTheSameDomain=(0,c.isInTheSameDomain)(r);e._commit(e.options)}},{key:"calculatePollingTimes",value:function t(){var e=this;if(e.times){if(e.totalTimes>e.POLLING_TIMES){if(e.times>e.POLLING_TIMES){e.totalTimes=e.POLLING_TIMES}else{e.totalTimes=e.times}}else{if(e.times<e.totalTimes){e.totalTimes=e.times}}}else{if(e.totalTimes>e.POLLING_TIMES){e.totalTimes=e.POLLING_TIMES}}e.totalTimes--}},{key:"serviceProcessCompleted",value:function t(e){e=(0,c.transformResult)(e);this.events.triggerEvent("processCompleted",{result:e})}},{key:"serviceProcessFailed",value:function t(e){e=(0,c.transformResult)(e);var r=e;this.events.triggerEvent("processFailed",{result:r})}},{key:"_commit",value:function t(e){if(e.method==="POST"||e.method==="PUT"){if(e.params){e.url=(0,c.urlAppend)(e.url,(0,c.getParameterString)(e.params||{}))}e.params=e.data}p.FetchRequest.commit(e.method,e.url,e.params,{headers:e.headers,withCredentials:e.withCredentials,timeout:e.async?0:null,proxy:e.proxy}).then(function(t){var r=void 0;if(t.text){r=function e(){return t.text()}}else{r=function e(){return t.json()}}if(t.status==200){return new i.default(function(n){r().then(function(t){if(!t)return;var r=null;if(typeof t==="string"&&(t.toLowerCase()==="true"||t.toLowerCase()==="false")){r={};if(t.toLowerCase()==="true"){r.succeed=true}else{r.succeed=false;r.error=true}}else if(typeof t==="string"){r=(new f.JSONFormat).read(t)}if(!r&&isNaN(r)||r.error){if(r&&r.error){r={error:r.error}}else{r={error:true}}}if(r.error){var n=e.scope?(0,c.bind)(e.failure,e.scope):e.failure;n(r)}else{if(!isNaN(r)){r={value:r}}if(typeof r==="string"){r={value:r}}if(Object.prototype.toString.call(r)!=="[object Array]"){r.succeed=r.succeed===undefined?true:r.succeed}else{r={value:r,succeed:true}}var i=e.scope?(0,c.bind)(e.success,e.scope):e.success;i(r)}});n(t.status)},function(t){console.log("【服务】【基础服务】【抽象类Fetch返回异常】",t)})}else{return new i.default(function(n){r().then(function(t){if(!t)return;var r=null;if(typeof t==="string"&&(t.toLowerCase()==="true"||t.toLowerCase()==="false")){r={};r.succeed=false}else if(typeof t==="string"){r=(new f.JSONFormat).read(t)}if(!r&&isNaN(r)||!r.success){r={succeed:false}}var n=e.scope?(0,c.bind)(e.failure,e.scope):e.failure;n(r)});n(t.status)},function(t){console.log("【服务】【基础服务】【抽象类Fetch返回异常】",t)})}}).catch(function(t){var r={error:true,value:{}};var n=e.scope?(0,c.bind)(e.failure,e.scope):e.failure;n(r)}).then(function(t,e){})}}]);return t}();e.CommonServiceBase=y;l.Zondy.Service.CommonServiceBase=y},function(t,e,r){t.exports={default:r(393),__esModule:true}},function(t,e,r){var n=r(74);var i=r(24)("toStringTag");var o=n(function(){return arguments}())=="Arguments";var s=function(t,e){try{return t[e]}catch(t){}};t.exports=function(t){var e,r,a;return t===undefined?"Undefined":t===null?"Null":typeof(r=s(e=Object(t),i))=="string"?r:o?n(e):(a=n(e))=="Object"&&typeof e.callee=="function"?"Arguments":a}},function(t,e,r){var n=r(230);var i=r(24)("iterator");var o=r(76);t.exports=r(17).getIteratorMethod=function(t){if(t!=undefined)return t[i]||t["@@iterator"]||o[n(t)]}},function(t,e,r){var n=r(31);var i=r(89);var o=r(24)("species");t.exports=function(t,e){var r=n(t).constructor;var s;return r===undefined||(s=n(r)[o])==undefined?e:i(s)}},function(t,e,r){var n=r(71);var i=r(399);var o=r(202);var s=r(124);var a=r(20);var u=a.process;var l=a.setImmediate;var c=a.clearImmediate;var h=a.MessageChannel;var f=a.Dispatch;var p=0;var d={};var y="onreadystatechange";var v,g,m;var _=function(){var t=+this;if(d.hasOwnProperty(t)){var e=d[t];delete d[t];e()}};var b=function(t){_.call(t.data)};if(!l||!c){l=function t(e){var r=[];var n=1;while(arguments.length>n)r.push(arguments[n++]);d[++p]=function(){i(typeof e=="function"?e:Function(e),r)};v(p);return p};c=function t(e){delete d[e]};if(r(74)(u)=="process"){v=function(t){u.nextTick(n(_,t,1))}}else if(f&&f.now){v=function(t){f.now(n(_,t,1))}}else if(h){g=new h;m=g.port2;g.port1.onmessage=b;v=n(m.postMessage,m,1)}else if(a.addEventListener&&typeof postMessage=="function"&&!a.importScripts){v=function(t){a.postMessage(t+"","*")};a.addEventListener("message",b,false)}else if(y in s("script")){v=function(t){o.appendChild(s("script"))[y]=function(){o.removeChild(this);_.call(t)}}}else{v=function(t){setTimeout(n(_,t,1),0)}}}t.exports={set:l,clear:c}},function(t,e){t.exports=function(t){try{return{e:false,v:t()}}catch(t){return{e:true,v:t}}}},function(t,e,r){var n=r(31);var i=r(45);var o=r(146);t.exports=function(t,e){n(t);if(i(e)&&e.constructor===t)return e;var r=o.f(t);var s=r.resolve;s(e);return r.promise}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Events=undefined;var n=r(63);var i=s(n);var o=r(8);function s(t){return t&&t.__esModule?t:{default:t}}var a=function t(e,r,n,i){this.listeners={};this.object=e;this.eventTypes=[];this.extensions={};this.extensionCount={};(0,o.extend)(this,i);if(n!=null){for(var s=0,a=n.length;s<a;s++){this.addEventType(n[s])}}};a.prototype.destroy=function(){for(var t in this.extensions){if(typeof this.extensions[t]!=="boolean"){this.extensions[t].destroy()}}this.extensions=null;this.listeners=null;this.object=null;this.eventTypes=null};a.prototype.addEventType=function(t){if(!this.listeners[t]){this.eventTypes.push(t);this.listeners[t]=[]}};a.prototype.on=function(t){for(var e in t){if(e!=="scope"&&t.hasOwnProperty(e)){this.register(e,t.scope,t[e])}}};a.prototype.register=function(t,e,r,n){if(t in a&&!this.extensions[t]){this.extensions[t]=new a[t](this)}if(r!=null&&(0,o.indexOf)(this.eventTypes,t)!==-1){if(e==null){e=this.object}var s=this.listeners[t];if(!s){s=[];this.listeners[t]=s;this.extensionCount[t]=0}var u={obj:e,func:r};if(n){s.splice(this.extensionCount[t],0,u);if((typeof n==="undefined"?"undefined":(0,i.default)(n))==="object"&&n.extension){this.extensionCount[t]++}}else{s.push(u)}}};a.prototype.registerPriority=function(t,e,r){this.register(t,e,r,true)};a.prototype.un=function(t){for(var e in t){if(e!=="scope"&&t.hasOwnProperty(e)){this.unregister(e,t.scope,t[e])}}};a.prototype.unregister=function(t,e,r){if(e==null){e=this.object}var n=this.listeners[t];if(n!=null){for(var i=0,o=n.length;i<o;i++){if(n[i].obj===e&&n[i].func===r){n.splice(i,1);break}}}};a.prototype.remove=function(t){if(this.listeners[t]!=null){this.listeners[t]=[]}};a.prototype.triggerEvent=function(t,e){var r=this.listeners[t];if(!r||r.length==0){return undefined}if(e==null){e={}}e.object=this.object;if(!e.type){e.type=t}r=r.slice();var n;for(var i=0,o=r.length;i<o;i++){var s=r[i];n=s.func.apply(s.obj,[e.result]);if(n!=undefined&&n==false){break}}return n};e.Events=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.JSONFormat=undefined;var n=r(63);var i=u(n);var o=r(16);var s=u(o);var a=r(8);function u(t){return t&&t.__esModule?t:{default:t}}var l=function t(e){this.data=null;this.keepData=false;this.indent="    ";this.space=" ";this.newline="\n";this.level=0;this.pretty=false;this.nativeJSON=function(){return!!(window.JSON&&typeof JSON.parse==="function"&&typeof s.default==="function")}();(0,a.extend)(this,e);this.options=e;this.serialize={object:function t(e){if(e==null){return"null"}if(e.constructor===Date){return this.serialize.date.apply(this,[e])}if(e.constructor===Array){return this.serialize.array.apply(this,[e])}var r=["{"];this.level+=1;var n,i,o;var s=false;for(n in e){if(e.hasOwnProperty(n)){i=this.write.apply(this,[n,this.pretty]);o=this.write.apply(this,[e[n],this.pretty]);if(i!=null&&o!=null){if(s){r.push(",")}r.push(this.writeNewline(),this.writeIndent(),i,":",this.writeSpace(),o);s=true}}}this.level-=1;r.push(this.writeNewline(),this.writeIndent(),"}");return r.join("")},array:function t(e){var r;var n=["["];this.level+=1;for(var i=0,o=e.length;i<o;++i){r=this.write.apply(this,[e[i],this.pretty]);if(r!=null){if(i>0){n.push(",")}n.push(this.writeNewline(),this.writeIndent(),r)}}this.level-=1;n.push(this.writeNewline(),this.writeIndent(),"]");return n.join("")},string:function t(e){var r={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};if(/["\\\x00-\x1f]/.test(e)){return'"'+e.replace(/([\x00-\x1f\\"])/g,function(t,e){var n=r[e];if(n){return n}n=e.charCodeAt();return"\\u00"+Math.floor(n/16).toString(16)+(n%16).toString(16)})+'"'}return'"'+e+'"'},number:function t(e){return isFinite(e)?String(e):"null"},boolean:function t(e){return String(e)},date:function t(e){function r(t){return t<10?"0"+t:t}return'"'+e.getFullYear()+"-"+r(e.getMonth()+1)+"-"+r(e.getDate())+"T"+r(e.getHours())+":"+r(e.getMinutes())+":"+r(e.getSeconds())+'"'}}};l.prototype.read=function(t,e){var r;if(this.nativeJSON){try{r=JSON.parse(t,e)}catch(t){}}if(this.keepData){this.data=r}return r};l.prototype.write=function(t,e){this.pretty=!!e;var r=null;var n=typeof t==="undefined"?"undefined":(0,i.default)(t);if(this.serialize[n]){try{r=!this.pretty&&this.nativeJSON?(0,s.default)(t):this.serialize[n].apply(this,[t])}catch(t){Console.error("Trouble serializing: "+t)}}return r};l.prototype.writeIndent=function(){var t=[];if(this.pretty){for(var e=0;e<this.level;++e){t.push(this.indent)}}return t.join("")};l.prototype.writeNewline=function(){return this.pretty?this.newline:""};l.prototype.writeSpace=function(){return this.pretty?this.space:""};e.JSONFormat=l;Zondy.Service.JSONFormat=l},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.FetchRequest=e.RequestTimeout=e.CORS=undefined;var n=r(63);var i=l(n);var o=r(229);var s=l(o);var a=r(16);var u=l(a);r(407);r(409);function l(t){return t&&t.__esModule?t:{default:t}}var c=window.fetch;var h=Zondy.CORS=Zondy.CORS||window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest;var f=Zondy.RequestTimeout=Zondy.RequestTimeout||45e3;var p=Zondy.FetchRequest={commit:function t(e,r,n,i){e=e?e.toUpperCase():e;switch(e){case"GET":return this._get(r,n,i);case"POST":return this._post(r,n,i);case"PUT":return this._put(r,n,i);case"DELETE":return this._delete(r,n,i);default:return this._get(r,n,i)}},_get:function t(e,r,n){n=n||{};var i="GET";e=this._processUrl(e,n);e=Zondy.Util.urlAppend(e,this._getParameterString(r||{}));if(!this.urlIsLong(e)){return this._fetch(e,r,n,i)}return this._postSimulatie(i,e.substring(0,e.indexOf("?")-1),r,n)},_delete:function t(e,r,n){n=n||{};var i="DELETE";e=this._processUrl(e,n);e=Zondy.Util.urlAppend(e,this._getParameterString(r||{}));if(!this.urlIsLong(e)&&h){return this._fetch(e,r,n,i)}return this._postSimulatie(i,e.substring(0,e.indexOf("?")-1),r,n)},_post:function t(e,r,n){n=n||{};return this._fetch(this._processUrl(e,n),r,n,"POST")},_put:function t(e,r,n){n=n||{};return this._fetch(this._processUrl(e,n),r,n,"PUT")},urlIsLong:function t(e){var r=0,n=null;for(var i=0,o=e.length;i<o;i++){n=e.charCodeAt(i);if(n<127){r++}else if(128<=n&&n<=2047){r+=2}else if(2048<=n&&n<=65535){r+=3}}return r<2e3?false:true},_postSimulatie:function t(e,r,n,i){var o=r.indexOf("?")>-1?"&":"?";r+=o+"_method="+e;if(typeof n!=="string"){n=(0,u.default)(n)}return this._post(r,n,i)},_processUrl:function t(e,r){if(this._isMVTRequest(e)){return e}if(r&&r.proxy){if(typeof r.proxy==="function"){e=r.proxy(e)}else{e=decodeURIComponent(e);e=r.proxy+encodeURIComponent(e)}}return e},_fetch:function t(e,r,n,i){n=n||{};n.headers=n.headers||{};if(!n.headers["Content-Type"]){n.headers["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8"}if(n.timeout){return this._timeout(n.timeout,c(e,{method:i,headers:n.headers,body:i==="PUT"||i==="POST"?r:undefined,credentials:n.withCredentials?"include":"omit",mode:"cors",timeout:f}).then(function(t){return t}))}return c(e,{method:i,body:i==="PUT"||i==="POST"?r:undefined,headers:n.headers,credentials:n.withCredentials?"include":"omit",mode:"cors",timeout:f}).then(function(t){return t}).catch(function(t){return t})},_timeout:function t(e,r){return new s.default(function(t,n){setTimeout(function(){n(new Error("timeout"))},e);r.then(t,n)})},_getParameterString:function t(e){var r=[];for(var n in e){var o=e[n];if(o!=null&&typeof o!=="function"){var s;if((typeof o==="undefined"?"undefined":(0,i.default)(o))==="object"&&o.constructor===Array){var a=[];var u;for(var l=0,c=o.length;l<c;l++){u=o[l];a.push(encodeURIComponent(u===null||u===undefined?"":u))}s="["+a.join(",")+"]"}else{s=encodeURIComponent(o)}r.push(encodeURIComponent(n)+"="+s)}}return r.join("&")},_isMVTRequest:function t(e){return e.indexOf(".mvt")>-1||e.indexOf(".pbf")>-1}};e.CORS=h;e.RequestTimeout=f;e.FetchRequest=p;Zondy.Service.FetchRequest=p;Zondy.Service.CORS=h;Zondy.Service.RequestTimeout=f},function(t,e,r){(function(t){var n=typeof t!=="undefined"&&t||typeof self!=="undefined"&&self||window;var i=Function.prototype.apply;e.setTimeout=function(){return new o(i.call(setTimeout,n,arguments),clearTimeout)};e.setInterval=function(){return new o(i.call(setInterval,n,arguments),clearInterval)};e.clearTimeout=e.clearInterval=function(t){if(t){t.close()}};function o(t,e){this._id=t;this._clearFn=e}o.prototype.unref=o.prototype.ref=function(){};o.prototype.close=function(){this._clearFn.call(n,this._id)};e.enroll=function(t,e){clearTimeout(t._idleTimeoutId);t._idleTimeout=e};e.unenroll=function(t){clearTimeout(t._idleTimeoutId);t._idleTimeout=-1};e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;if(e>=0){t._idleTimeoutId=setTimeout(function e(){if(t._onTimeout)t._onTimeout()},e)}};r(408);e.setImmediate=typeof self!=="undefined"&&self.setImmediate||typeof t!=="undefined"&&t.setImmediate||this&&this.setImmediate;e.clearImmediate=typeof self!=="undefined"&&self.clearImmediate||typeof t!=="undefined"&&t.clearImmediate||this&&this.clearImmediate}).call(this,r(77))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.GDBInfo=undefined;var n=r(2);var i=v(n);var o=r(1);var s=v(o);var a=r(9);var u=v(a);var l=r(3);var c=v(l);var h=r(4);var f=v(h);var p=r(64);var d=r(15);var y=r(8);function v(t){return t&&t.__esModule?t:{default:t}}var g=function(t){(0,f.default)(e,t);function e(t){(0,s.default)(this,e);var r=t||{};var n=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));n.serverName=r.serverName!==undefined?r.serverName:null;n.gdbName=r.gdbName!==undefined?r.gdbName:null;n.dsName=r.dsName!==undefined?r.dsName:null;n.rcsName=r.rcsName!==undefined?r.rcsName:null;n.User=r.User!==undefined?r.User:null;n.Password=r.Password!==undefined?r.Password:null;n.containAll=r.containAll!==undefined?r.containAll:true;return n}(0,u.default)(e,[{key:"getServerList",value:function t(e,r){var n=this;n.partUrl="datasource?f=json";var i=n.getFullUrl();var o=new d.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}},{key:"getGDBList",value:function t(e,r){var n=this;if(n.serverName.toLowerCase()==="mapgislocal"){n.partUrl="datasource/"+n.serverName+"?f=json"}else{n.partUrl="datasource/"+n.serverName+"?user="+n.User+"&psw="+n.Password+"&f=json"}var i=n.getFullUrl();var o=new d.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}},{key:"getDsList",value:function t(e,r){var n=this;if(n.serverName.toLowerCase()==="mapgislocal"){n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/ds?containAll="+n.containAll+"&f=json"}else{n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/ds?user="+n.User+"&psw="+n.Password+"&containAll="+n.containAll+"&f=json"}var i=n.getFullUrl();var o=new d.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}},{key:"getRcsList",value:function t(e,r){var n=this;if(n.serverName.toLowerCase()==="mapgislocal"){n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/rcs?f=json"}else{n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/rcs?user="+n.User+"&psw="+n.Password+"&containAll="+n.containAll+"&f=json"}var i=n.getFullUrl();var o=new d.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}},{key:"getProjectList",value:function t(e,r){var n=this;n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"?f=json";var i=n.getFullUrl();var o=new d.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}},{key:"getProjectInfo",value:function t(e,r,n){var i=this;i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/"+e+"?f=json";var o=i.getFullUrl();var s=new d.IgsServiceBase(o,{eventListeners:{scope:i,processCompleted:r,processFailed:n}});s.processAsync()}},{key:"AttachGDB",value:function t(e,r,n){var i=this;if(i.serverName===null||i.gdbName===null||e===null){return}i.partUrl="gdb/attach/"+i.gdbName+"?gdbSvrName="+i.serverName+"&path="+e+"&f=json";if(i.User!==null&&i.Password!==null){i.partUrl+="&gdbUserName="+i.User+"&gdbPwd="+i.Password}var o=i.getFullUrl();var s=new d.IgsServiceBase(o,{eventListeners:{scope:i,processCompleted:r,processFailed:n}});s.processAsync()}},{key:"DetachGDB",value:function t(e,r){var n=this;if(n.serverName===null||n.gdbName===null){return}n.partUrl="gdb/detach/"+n.gdbName+"?gdbSvrName="+n.serverName;if(n.User!==null&&n.Password!==null){n.partUrl+="&gdbUserName="+n.User+"&gdbPwd="+n.Password}var i=n.getFullUrl();var o=new d.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}},{key:"CreateGDB",value:function t(e,r,n){var i=this;if(i.serverName===null||i.gdbName===null){return}if(i.serverName.toLowerCase()==="mapgislocal"&&e===null){return}i.partUrl="gdb/creat/"+i.gdbName+"?gdbSvrName="+i.serverName+"&path="+e+"&f=json";if(i.User!==null&&i.Password!==null){i.partUrl+="&gdbUserName="+i.User+"&gdbPwd="+i.Password}var o=i.getFullUrl();var s=new d.IgsServiceBase(o,{eventListeners:{scope:i,processCompleted:r,processFailed:n}});s.processAsync()}},{key:"DeleteGDB",value:function t(e,r){var n=this;if(n.serverName===null||n.gdbName===null){return}n.partUrl="gdb/delete/"+n.gdbName+"?gdbSvrName="+n.serverName;if(n.User!==null&&n.Password!==null){n.partUrl+="&gdbUserName="+n.User+"&gdbPwd="+n.Password}var i=n.getFullUrl();var o=new d.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}}]);return e}(p.CatalogService);e.GDBInfo=g;Zondy.Catalog.GDBInfo=g},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.G3DService=undefined;var n=r(2);var i=p(n);var o=r(1);var s=p(o);var a=r(3);var u=p(a);var l=r(4);var c=p(l);var h=r(0);var f=r(27);function p(t){return t&&t.__esModule?t:{default:t}}var d=function(t){(0,c.default)(e,t);function e(t){(0,s.default)(this,e);var r=t||{};r.baseUrl="igs/rest/g3d";return(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r))}return e}(f.ServiceBase);e.G3DService=d;h.Zondy.Catalog.G3DService=d},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.VFeature=e.VPolyline=e.VPolygon=e.VPoint=e.BaseParameter=e.ObjectIdsParameter=e.RectangleParameter=e.GeometryParameter=e.SQLParameter=e.FeatureService=e.QueryUnifyParameter=e.QueryServiceBase=e.QueryParameterBase=e.QueryParameter=e.QueryLayerFeature=e.QueryFeatureStruct=e.QueryFeatureRule=e.QueryDocFeature=e.QueryByLayerParameter=e.ObjClsQueryParameter=e.ObjClsQuery=e.MultiGeoQueryParameter=e.MultiGeoQuery=e.EditServiceBase=e.EditLayerFeature=e.EditDocFeature=undefined;var n=r(420);var i=r(421);var o=r(147);var s=r(422);var a=r(245);var u=r(423);var l=r(246);var c=r(247);var h=r(248);var f=r(244);var p=r(148);var d=r(424);var y=r(100);var v=r(243);var g=r(78);var m=r(425);var _=r(434);var b=r(438);var x=r(439);var S=r(440);var w=r(441);var C=r(65);var I=r(149);var E=r(154);var P=r(153);var M=r(442);e.EditDocFeature=n.EditDocFeature;e.EditLayerFeature=i.EditLayerFeature;e.EditServiceBase=o.EditServiceBase;e.MultiGeoQuery=s.MultiGeoQuery;e.MultiGeoQueryParameter=a.MultiGeoQueryParameter;e.ObjClsQuery=u.ObjClsQuery;e.ObjClsQueryParameter=l.ObjClsQueryParameter;e.QueryByLayerParameter=c.QueryByLayerParameter;e.QueryDocFeature=h.QueryDocFeature;e.QueryFeatureRule=f.QueryFeatureRule;e.QueryFeatureStruct=p.QueryFeatureStruct;e.QueryLayerFeature=d.QueryLayerFeature;e.QueryParameter=y.QueryParameter;e.QueryParameterBase=v.QueryParameterBase;e.QueryServiceBase=g.QueryServiceBase;e.QueryUnifyParameter=m.QueryUnifyParameter;e.FeatureService=_.FeatureService;e.SQLParameter=b.SQLParameter;e.GeometryParameter=x.GeometryParameter;e.RectangleParameter=S.RectangleParameter;e.ObjectIdsParameter=w.ObjectIdsParameter;e.BaseParameter=C.BaseParameter;e.VPoint=I.VPoint;e.VPolygon=E.VPolygon;e.VPolyline=P.VPolyline;e.VFeature=M.VFeature},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.QueryParameterBase=undefined;var n=r(1);var i=l(n);var o=r(0);var s=r(8);var a=r(148);var u=r(244);function l(t){return t&&t.__esModule?t:{default:t}}var c=function t(e){(0,i.default)(this,t);var r=e?e:{};(0,s.extend)(this,r);this.geometry=r.geometry!==undefined?r.geometry:null;this.where=r.where!==undefined?r.where:null;this.rule=r.rule!==undefined?r.rule:new u.QueryFeatureRule;this.objectIds=r.objectIds!==undefined?r.objectIds:null;this.pageIndex=r.pageIndex!==undefined?r.pageIndex:0;this.recordNumber=r.recordNumber!==undefined?r.recordNumber:20;this.resultFormat=r.resultFormat!==undefined?r.resultFormat:"json";this.struct=r.struct!==undefined?r.struct:new a.QueryFeatureStruct;this.orderField=r.orderField!==undefined?r.orderField:null;this.rtnLabel=r.rtnLabel!==undefined?r.rtnLabel:false;this.fields=r.fields||"";this.coordPrecision=r.coordPrecision||r.coordPrecision===0?r.coordPrecision:2;this.isAsc=r.isAsc!==undefined?r.isAsc:false;this.cursorType=r.cursorType!==undefined?r.cursorType:"forward";this.proj=r.proj||null;this.guid=r.guid||"__readonly_user__"};e.QueryParameterBase=c;o.Zondy.Service.QueryParameterBase=c},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.QueryFeatureRule=undefined;var n=r(0);var i=r(8);var o=function t(e){var r=e?e:{};(0,i.extend)(this,r);this.CompareRectOnly=r.CompareRectOnly!==undefined&&typeof r.CompareRectOnly==="boolean"?r.CompareRectOnly:false;this.EnableDisplayCondition=r.EnableDisplayCondition!==undefined&&typeof r.EnableDisplayCondition==="boolean"?r.EnableDisplayCondition:false;this.MustInside=r.MustInside!==undefined&&typeof r.MustInside==="boolean"?r.MustInside:false;this.Intersect=r.Intersect!==undefined&&typeof r.Intersect==="boolean"?r.Intersect:false};o.prototype.toJSON=function(){return(0,i.toJSON)(this)};e.QueryFeatureRule=o;n.Zondy.Service.QueryFeatureRule=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.MultiGeoQueryParameter=undefined;var n=r(0);var i=r(8);var o=function t(e){var r=e!==undefined?e:{};(0,i.extend)(this,r);this.geometry=r.geometry!==undefined?r.geometry:null;this.geometryType=r.geometryType!==undefined?r.geometryType:null;this.resultFormat=r.resultFormat!==undefined?r.resultFormat:"json";this.nearDis=r.nearDis!==undefined?r.nearDis:1e-4};o.prototype.getParameterURL=function(){var t="";t+="?f="+this.resultFormat;t+="&geometryType="+this.geometryType;t+="&nearDis="+this.nearDis;return t};e.MultiGeoQueryParameter=o;n.Zondy.Service.MultiGeoQueryParameter=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ObjClsQueryParameter=undefined;var n=r(0);var i=r(8);var o=function t(e){var r=e!==undefined?e:{};(0,i.extend)(this,r);this.objectIds=r.objectIds!==undefined?r.objectIds:null;this.where=r.where!==undefined?r.where:null;this.resultFormat=r.resultFormat!==undefined?r.resultFormat:"json"};o.prototype.getParameterURL=function(){var t="";t+="&f="+this.resultFormat;if(this.objectIds!==null){t+="&objectIds="+this.objectIds}else{if(this.where!==null){t+="&where="+this.where}}return t};e.ObjClsQueryParameter=o;n.Zondy.Service.ObjClsQueryParameter=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.QueryByLayerParameter=undefined;var n=r(2);var i=m(n);var o=r(1);var s=m(o);var a=r(9);var u=m(a);var l=r(3);var c=m(l);var h=r(227);var f=m(h);var p=r(4);var d=m(p);var y=r(0);var v=r(100);var g=r(148);function m(t){return t&&t.__esModule?t:{default:t}}var _=function(t){(0,d.default)(e,t);function e(t,r){(0,s.default)(this,e);var n=r?r:{};var o=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,n));o.gdbp=t!==undefined?t:null;return o}(0,u.default)(e,[{key:"getParameterURL",value:function t(){var r=(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"getParameterURL",this).call(this);return r+"&gdbp="+this.gdbp}},{key:"getParameterObject",value:function t(){var r=(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"getParameterObject",this).call(this,this);r.gdbp=this.gdbp;return r}}]);return e}(v.QueryParameter);e.QueryByLayerParameter=_;y.Zondy.Service.QueryByLayerParameter=_},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.QueryDocFeature=undefined;var n=r(2);var i=p(n);var o=r(1);var s=p(o);var a=r(3);var u=p(a);var l=r(4);var c=p(l);var h=r(0);var f=r(78);function p(t){return t&&t.__esModule?t:{default:t}}var d=function(t){(0,c.default)(e,t);function e(t,r,n,o){(0,s.default)(this,e);var a=o?o:{};var l=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,a));l.queryParam=t;l.docName=r;l.layerIndex=n==undefined?-1:n;l.mapIndex=0;l.partUrl="docs/"+l.docName+"/"+l.mapIndex.toString()+"/"+l.layerIndex.toString()+"/query";return l}return e}(f.QueryServiceBase);e.QueryDocFeature=d;h.Zondy.Service.QueryDocFeature=d},function(t,e,r){t.exports={default:r(435),__esModule:true}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CAllOtherDataItemInfoSource=undefined;var n=r(0);var i={DefaultThemeInfo:1,DataItemIntrinsicInfo:2};e.CAllOtherDataItemInfoSource=i;n.Zondy.Object.Theme.CAllOtherDataItemInfoSource=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CAnnInfo=undefined;var n=r(0);var i=r(8);var o=function t(e){var r=e!==undefined?e:{};(0,i.extend)(this,r);this.LibID=r.LibID!==undefined?r.LibID:0;this.Ovprnt=r.Ovprnt!==undefined?r.Ovprnt:false;this.Angle=r.Ovprnt!==undefined?r.Ovprnt:0;this.BackClr=r.BackClr!==undefined?r.BackClr:0;this.BackExp=r.BackExp!==undefined?r.BackExp:0;this.Chnt=r.Chnt!==undefined?r.Chnt:0;this.Color=r.Color!==undefined?r.Color:0;this.FontAngle=r.FontAngle!==undefined?r.FontAngle:0;this.Height=r.Height!==undefined?r.Height:0;this.Ifnt=r.Ifnt!==undefined?r.Ifnt:0;this.Ifnx=r.Ifnx!==undefined?r.Ifnx:0;this.IsFilled=r.IsFilled!==undefined?r.IsFilled:false;this.IsHzpl=r.IsHzpl!==undefined?r.IsHzpl:true;this.OffsetX=r.OffsetX!==undefined?r.OffsetX:0;this.OffsetY=r.OffsetY!==undefined?r.OffsetY:0;this.Space=r.Space!==undefined?r.Space:0;this.Width=r.Width!==undefined?r.Width:0};e.CAnnInfo=o;n.Zondy.Object.Theme.CAnnInfo=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CChartLabelFormat=undefined;var n=r(0);var i={Unknown:0,Value:1,Percent:2};e.CChartLabelFormat=i;n.Zondy.Object.Theme.CChartLabelFormat=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CChartTheme=undefined;var n=r(2);var i=v(n);var o=r(1);var s=v(o);var a=r(3);var u=v(a);var l=r(4);var c=v(l);var h=r(0);var f=r(34);var p=r(254);var d=r(255);var y=r(258);function v(t){return t&&t.__esModule?t:{default:t}}var g=function(t){(0,c.default)(e,t);function e(t){(0,s.default)(this,e);var r=t?t:{};var n=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));n.ChartType=r.ChartType!==undefined?r.ChartType:p.CChartType.Bar;n.ChartThemeInfoArr=r.ChartThemeInfoArr!==undefined?r.ChartThemeInfoArr:null;n.RepresentInfo=r.RepresentInfo!==undefined?r.RepresentInfo:null;n.Type="CChartTheme";return n}return e}(f.CTheme);e.CChartTheme=g;h.Zondy.Object.Theme.CChartTheme=g},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CChartType=undefined;var n=r(0);var i={Unknown:0,Bar:1,Bar3D:2,Pie:3,Pie3D:4,Line:5,Line3D:6,Point:7};e.CChartType=i;n.Zondy.Object.Theme.CChartType=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CChartThemeInfo=undefined;var n=r(2);var i=p(n);var o=r(1);var s=p(o);var a=r(3);var u=p(a);var l=r(4);var c=p(l);var h=r(0);var f=r(46);function p(t){return t&&t.__esModule?t:{default:t}}var d=function(t){(0,c.default)(e,t);function e(t,r){(0,s.default)(this,e);var n=r?r:{};var o=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,n));o.Expression=t!==undefined?t:"";return o}return e}(f.CThemeInfo);e.CChartThemeInfo=d;h.Zondy.Object.Theme.CChartThemeInfo=d},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CLinInfo=undefined;var n=r(0);var i=r(8);var o=r(25);var s=function t(e){var r=e!==undefined?e:{};(0,i.extend)(this,r);this.LibID=r.LibID!==undefined?r.LibID:0;this.Ovprnt=r.Ovprnt!==undefined?r.Ovprnt:false;this.AdjustFlg=r.AdjustFlg!==undefined?r.AdjustFlg:o.CLinAdjustType.Adjust;this.HeadType=r.HeadType!==undefined?r.HeadType:o.CLinHeadType.Round;this.JointType=r.JointType!==undefined?r.JointType:o.CLinJointType.Round;this.LinStyID=r.LinStyID!==undefined?r.LinStyID:0;this.MakeMethod=r.MakeMethod!==undefined?r.MakeMethod:o.CLinStyleMakeType.Byrule;this.OutClr=r.OutClr!==undefined?r.OutClr:[46,4,3];this.XScale=r.XScale!==undefined?r.XScale:10;this.YScale=r.YScale!==undefined?r.YScale:10;this.OutPenW=r.OutPenW!==undefined?r.OutPenW:[.05,.05,.05]};e.CLinInfo=s;n.Zondy.Object.Theme.CLinInfo=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CRegInfo=undefined;var n=r(0);var i=r(8);var o=function t(e){var r=e!==undefined?e:{};(0,i.extend)(this,r);this.LibID=r.LibID!==undefined?r.LibID:0;this.Ovprnt=r.Ovprnt!==undefined?r.Ovprnt:false;this.Angle=r.Angle!==undefined?r.Angle:0;this.EndClr=r.EndClr!==undefined?r.EndClr:0;this.FillClr=r.FillClr!==undefined?r.FillClr:46;this.FillMode=r.FillMode!==undefined?r.FillMode:0;this.FullPatFlg=r.FullPatFlg!==undefined?r.FullPatFlg:true;this.PatClr=r.PatClr!==undefined?r.PatClr:3;this.PatHeight=r.PatHeight!==undefined?r.PatHeight:5;this.PatID=r.PatID!==undefined?r.PatID:0;this.PatWidth=r.PatWidth!==undefined?r.PatWidth:5;this.OutPenW=r.OutPenW!==undefined?r.OutPenW:1};e.CRegInfo=o;n.Zondy.Object.Theme.CRegInfo=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CChartThemeRepresentInfo=undefined;var n=r(0);var i=r(8);var o=r(251);var s=r(252);var a=function t(e){var r=e!==undefined?e:{};(0,i.extend)(this,r);this.AnnInfoLabel=r.AnnInfoLabel!==undefined?r.AnnInfoLabel:new o.CAnnInfo;this.DigitLabel=r.DigitLabel!==undefined?r.DigitLabel:0;this.FormatLabel=r.FormatLabel!==undefined?r.FormatLabel:s.CChartLabelFormat.Unknown;this.IsDrawLabel=r.IsDrawLabel!==undefined?r.IsDrawLabel:true;this.LineColor=r.LineColor!==undefined?r.LineColor:-1;this.MaxLength=r.MaxLength!==undefined?r.MaxLength:30;this.MinRadius=r.MinRadius!==undefined?r.MinRadius:10;this.PieSizeFixFlag=r.PieSizeFixFlag!==undefined?r.PieSizeFixFlag:0;this.PieTiltedAngle=r.PieTiltedAngle!==undefined?r.PieTiltedAngle:30;this.PlotRadius=r.PlotRadius!==undefined?r.PlotRadius:1;this.ThickPersent=r.ThickPersent!==undefined?r.ThickPersent:10;this.Width=r.Width!==undefined?r.Width:3};e.CChartThemeRepresentInfo=a;n.Zondy.Object.Theme.CChartThemeRepresentInfo=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CDotDensityTheme=undefined;var n=r(2);var i=d(n);var o=r(1);var s=d(o);var a=r(3);var u=d(a);var l=r(4);var c=d(l);var h=r(0);var f=r(34);var p=r(102);function d(t){return t&&t.__esModule?t:{default:t}}var y=function(t){(0,c.default)(e,t);function e(t){(0,s.default)(this,e);var r=t?t:{};var n=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));n.Expression=r.Expression!==undefined?r.Expression:"";n.Info=r.Info!==undefined?r.Info:null;n.Value=r.Value!==undefined?r.Value:null;n.Type="CDotDensityTheme";return n}return e}(f.CTheme);e.CDotDensityTheme=y;h.Zondy.Object.Theme.CDotDensityTheme=y},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CFourColorTheme=undefined;var n=r(2);var i=p(n);var o=r(1);var s=p(o);var a=r(3);var u=p(a);var l=r(4);var c=p(l);var h=r(0);var f=r(34);function p(t){return t&&t.__esModule?t:{default:t}}var d=function(t){(0,c.default)(e,t);function e(t){(0,s.default)(this,e);var r=t?t:{};var n=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));n.ClrInfo=r.ClrInfo!==undefined?r.ClrInfo:[25,57,89,121];n.Type="CFourColorTheme";return n}return e}(f.CTheme);e.CFourColorTheme=d;h.Zondy.Object.Theme.CFourColorTheme=d},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CGraduatedSymbolTheme=undefined;var n=r(2);var i=d(n);var o=r(1);var s=d(o);var a=r(3);var u=d(a);var l=r(4);var c=d(l);var h=r(0);var f=r(34);var p=r(102);function d(t){return t&&t.__esModule?t:{default:t}}var y=function(t){(0,c.default)(e,t);function e(t){(0,s.default)(this,e);var r=t?t:{};var n=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));n.BaseValue=r.BaseValue!==undefined?r.BaseValue:141e-6;n.DispMinus=r.DispMinus!==undefined?r.DispMinus:false;n.DispZero=r.DispZero!==undefined?r.DispZero:false;n.Expression=r.Expression!==undefined?r.Expression:null;n.MinusPntInfo=r.MinusPntInfo!==undefined?r.MinusPntInfo:null;n.PlusPntInfo=r.PlusPntInfo!==undefined?r.PlusPntInfo:null;n.ZeroPntInfo=r.ZeroPntInfo!==undefined?r.ZeroPntInfo:null;n.Type="CGraduatedSymbolTheme";return n}return e}(f.CTheme);e.CGraduatedSymbolTheme=y;h.Zondy.Object.Theme.CGraduatedSymbolTheme=y},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CMultiClassTheme=undefined;var n=r(2);var i=y(n);var o=r(1);var s=y(o);var a=r(3);var u=y(a);var l=r(4);var c=y(l);var h=r(0);var f=r(34);var p=r(46);var d=r(263);function y(t){return t&&t.__esModule?t:{default:t}}var v=function(t){(0,c.default)(e,t);function e(t){(0,s.default)(this,e);var r=t?t:{};var n=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));n.DefaultInfo=r.DefaultInfo!==undefined?r.DefaultInfo:null;n.ExpInfoArr=r.ExpInfoArr!==undefined?r.ExpInfoArr:null;n.MultiClassThemeInfoArr=r.MultiClassThemeInfoArr!==undefined?r.MultiClassThemeInfoArr:null;n.GeoInfoType=r.GeoInfoType!==undefined?r.GeoInfoType:null;n.Type="CMultiClassTheme";return n}return e}(f.CTheme);e.CMultiClassTheme=v;h.Zondy.Object.Theme.CMultiClassTheme=v},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ExpInfo=undefined;var n=r(0);var i=r(8);var o=function t(e,r,n){var o=n!==undefined?n:{};(0,i.extend)(this,o);this.Expression=e!==undefined?e:"";this.ItemValueArr=r!==undefined?r:null};e.ExpInfo=o;n.Zondy.Object.Theme.ExpInfo=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CRandomTheme=undefined;var n=r(2);var i=p(n);var o=r(1);var s=p(o);var a=r(3);var u=p(a);var l=r(4);var c=p(l);var h=r(0);var f=r(34);function p(t){return t&&t.__esModule?t:{default:t}}var d=function(t){(0,c.default)(e,t);function e(t){(0,s.default)(this,e);var r=t?t:{};var n=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));n.Type="CRandomTheme";return n}return e}(f.CTheme);e.CRandomTheme=d;h.Zondy.Object.Theme.CRandomTheme=d},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CRangeTheme=undefined;var n=r(2);var i=v(n);var o=r(1);var s=v(o);var a=r(3);var u=v(a);var l=r(4);var c=v(l);var h=r(0);var f=r(34);var p=r(250);var d=r(46);var y=r(266);function v(t){return t&&t.__esModule?t:{default:t}}var g=function(t){(0,c.default)(e,t);function e(t){(0,s.default)(this,e);var r=t?t:{};var n=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));n.AllOtherDataItemInfoSource=r.AllOtherDataItemInfoSource!==undefined?r.AllOtherDataItemInfoSource:p.CAllOtherDataItemInfoSource.DefaultThemeInfo;n.Expression=r.Expression!==undefined?r.Expression:"";n.DefaultInfo=r.DefaultInfo!==undefined?r.DefaultInfo:null;n.RangeThemeInfoArr=r.RangeThemeInfoArr!==undefined?r.RangeThemeInfoArr:null;n.GeoInfoType=r.GeoInfoType!==undefined?r.GeoInfoType:null;n.Type="CRangeTheme";return n}return e}(f.CTheme);e.CRangeTheme=g;h.Zondy.Object.Theme.CRangeTheme=g},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CRangeThemeInfo=undefined;var n=r(2);var i=p(n);var o=r(1);var s=p(o);var a=r(3);var u=p(a);var l=r(4);var c=p(l);var h=r(0);var f=r(46);function p(t){return t&&t.__esModule?t:{default:t}}var d=function(t){(0,c.default)(e,t);function e(t,r,n){(0,s.default)(this,e);var o=n?n:{};var a=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,o));a.StartValue=t!==undefined?t:"";a.EndValue=r!==undefined?r:"";return a}return e}(f.CThemeInfo);e.CRangeThemeInfo=d;h.Zondy.Object.Theme.CRangeThemeInfo=d},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CSimpleTheme=undefined;var n=r(2);var i=d(n);var o=r(1);var s=d(o);var a=r(3);var u=d(a);var l=r(4);var c=d(l);var h=r(0);var f=r(34);var p=r(46);function d(t){return t&&t.__esModule?t:{default:t}}var y=function(t){(0,c.default)(e,t);function e(t){(0,s.default)(this,e);var r=t?t:{};var n=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));n.ThemeInfo=r.ThemeInfo!==undefined?r.ThemeInfo:new p.CThemeInfo;n.Type="CSimpleTheme";return n}return e}(f.CTheme);e.CSimpleTheme=y;h.Zondy.Object.Theme.CSimpleTheme=y},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CUniqueTheme=undefined;var n=r(2);var i=y(n);var o=r(1);var s=y(o);var a=r(3);var u=y(a);var l=r(4);var c=y(l);var h=r(0);var f=r(34);var p=r(46);var d=r(269);function y(t){return t&&t.__esModule?t:{default:t}}var v=function(t){(0,c.default)(e,t);function e(t){(0,s.default)(this,e);var r=t?t:{};var n=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));n.DefaultInfo=r.DefaultInfo!==undefined?r.DefaultInfo:null;n.Expression=r.Expression!==undefined?r.Expression:"";n.UniqueThemeInfoArr=r.UniqueThemeInfoArr!==undefined?r.UniqueThemeInfoArr:null;n.GeoInfoType=r.GeoInfoType!==undefined?r.GeoInfoType:null;n.Type="CUniqueTheme";return n}return e}(f.CTheme);e.CUniqueTheme=v;h.Zondy.Object.Theme.CUniqueTheme=v},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CUniqueThemeInfo=undefined;var n=r(2);var i=p(n);var o=r(1);var s=p(o);var a=r(3);var u=p(a);var l=r(4);var c=p(l);var h=r(0);var f=r(46);function p(t){return t&&t.__esModule?t:{default:t}}var d=function(t){(0,c.default)(e,t);function e(t,r){(0,s.default)(this,e);var n=r?r:{};var o=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,n));o.Value=t!==undefined?t:"";return o}return e}(f.CThemeInfo);e.CUniqueThemeInfo=d;h.Zondy.Object.Theme.CUniqueThemeInfo=d},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.FolderInfo=undefined;var n=r(0);var i=r(162);var o=function t(e,r){this.name=e!==undefined?e:null;this.attribute=r!==undefined?r:null};e.FolderInfo=o;n.Zondy.Object.Theme.FolderInfo=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ThemesInfo=undefined;var n=r(0);var i=r(34);var o=function t(e,r){this.LayerName=e!==undefined?e:null;this.ThemeArr=r!==undefined?r:null};e.ThemesInfo=o;n.Zondy.Object.Theme.ThemesInfo=o},function(t,e,r){"use strict";var n=r(167);var i=Object.prototype.hasOwnProperty;var o=Array.isArray;var s=function(){var t=[];for(var e=0;e<256;++e){t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase())}return t}();var a=function t(e){while(e.length>1){var r=e.pop();var n=r.obj[r.prop];if(o(n)){var i=[];for(var s=0;s<n.length;++s){if(typeof n[s]!=="undefined"){i.push(n[s])}}r.obj[r.prop]=i}}};var u=function t(e,r){var n=r&&r.plainObjects?Object.create(null):{};for(var i=0;i<e.length;++i){if(typeof e[i]!=="undefined"){n[i]=e[i]}}return n};var l=function t(e,r,n){if(!r){return e}if(typeof r!=="object"){if(o(e)){e.push(r)}else if(e&&typeof e==="object"){if(n&&(n.plainObjects||n.allowPrototypes)||!i.call(Object.prototype,r)){e[r]=true}}else{return[e,r]}return e}if(!e||typeof e!=="object"){return[e].concat(r)}var s=e;if(o(e)&&!o(r)){s=u(e,n)}if(o(e)&&o(r)){r.forEach(function(r,o){if(i.call(e,o)){var s=e[o];if(s&&typeof s==="object"&&r&&typeof r==="object"){e[o]=t(s,r,n)}else{e.push(r)}}else{e[o]=r}});return e}return Object.keys(r).reduce(function(e,o){var s=r[o];if(i.call(e,o)){e[o]=t(e[o],s,n)}else{e[o]=s}return e},s)};var c=function t(e,r){return Object.keys(r).reduce(function(t,e){t[e]=r[e];return t},e)};var h=function(t,e,r){var n=t.replace(/\+/g," ");if(r==="iso-8859-1"){return n.replace(/%[0-9a-f]{2}/gi,unescape)}try{return decodeURIComponent(n)}catch(t){return n}};var f=function t(e,r,i,o,a){if(e.length===0){return e}var u=e;if(typeof e==="symbol"){u=Symbol.prototype.toString.call(e)}else if(typeof e!=="string"){u=String(e)}if(i==="iso-8859-1"){return escape(u).replace(/%u[0-9a-f]{4}/gi,function(t){return"%26%23"+parseInt(t.slice(2),16)+"%3B"})}var l="";for(var c=0;c<u.length;++c){var h=u.charCodeAt(c);if(h===45||h===46||h===95||h===126||h>=48&&h<=57||h>=65&&h<=90||h>=97&&h<=122||a===n.RFC1738&&(h===40||h===41)){l+=u.charAt(c);continue}if(h<128){l=l+s[h];continue}if(h<2048){l=l+(s[192|h>>6]+s[128|h&63]);continue}if(h<55296||h>=57344){l=l+(s[224|h>>12]+s[128|h>>6&63]+s[128|h&63]);continue}c+=1;h=65536+((h&1023)<<10|u.charCodeAt(c)&1023);l+=s[240|h>>18]+s[128|h>>12&63]+s[128|h>>6&63]+s[128|h&63]}return l};var p=function t(e){var r=[{obj:{o:e},prop:"o"}];var n=[];for(var i=0;i<r.length;++i){var o=r[i];var s=o.obj[o.prop];var u=Object.keys(s);for(var l=0;l<u.length;++l){var c=u[l];var h=s[c];if(typeof h==="object"&&h!==null&&n.indexOf(h)===-1){r.push({obj:s,prop:c});n.push(h)}}}a(r);return e};var d=function t(e){return Object.prototype.toString.call(e)==="[object RegExp]"};var y=function t(e){if(!e||typeof e!=="object"){return false}return!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))};var v=function t(e,r){return[].concat(e,r)};var g=function t(e,r){if(o(e)){var n=[];for(var i=0;i<e.length;i+=1){n.push(r(e[i]))}return n}return r(e)};t.exports={arrayToObject:u,assign:c,combine:v,compact:p,decode:h,encode:f,isBuffer:y,isRegExp:d,maybeMap:g,merge:l}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,r){var n=r(52);var i=r(275).f;var o={}.toString;var s=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];var a=function(t){try{return i(t)}catch(t){return s.slice()}};t.exports.f=function t(e){return s&&o.call(e)=="[object Window]"?a(e):i(n(e))}},function(t,e,r){var n=r(190);var i=r(121).concat("length","prototype");e.f=Object.getOwnPropertyNames||function t(e){return n(e,i)}},function(t,e,r){"use strict";t.exports=function t(e,r){return function t(){var n=new Array(arguments.length);for(var i=0;i<n.length;i++){n[i]=arguments[i]}return e.apply(r,n)}}},function(t,e,r){"use strict";var n=r(22);function i(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function t(e,r,o){if(!r){return e}var s;if(o){s=o(r)}else if(n.isURLSearchParams(r)){s=r.toString()}else{var a=[];n.forEach(r,function t(e,r){if(e===null||typeof e==="undefined"){return}if(n.isArray(e)){r=r+"[]"}else{e=[e]}n.forEach(e,function t(e){if(n.isDate(e)){e=e.toISOString()}else if(n.isObject(e)){e=JSON.stringify(e)}a.push(i(r)+"="+i(e))})});s=a.join("&")}if(s){var u=e.indexOf("#");if(u!==-1){e=e.slice(0,u)}e+=(e.indexOf("?")===-1?"?":"&")+s}return e}},function(t,e,r){"use strict";t.exports=function t(e,r,n,i,o){e.config=r;if(n){e.code=n}e.request=i;e.response=o;e.isAxiosError=true;e.toJSON=function t(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}};return e}},function(t,e,r){"use strict";t.exports={silentJSONParsing:true,forcedJSONParsing:true,clarifyTimeoutError:false}},function(t,e,r){"use strict";var n=r(22);var i=r(531);var o=r(532);var s=r(277);var a=r(533);var u=r(536);var l=r(537);var c=r(281);var h=r(279);var f=r(105);t.exports=function t(e){return new Promise(function t(r,p){var d=e.data;var y=e.headers;var v=e.responseType;var g;function m(){if(e.cancelToken){e.cancelToken.unsubscribe(g)}if(e.signal){e.signal.removeEventListener("abort",g)}}if(n.isFormData(d)){delete y["Content-Type"]}var _=new XMLHttpRequest;if(e.auth){var b=e.auth.username||"";var x=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";y.Authorization="Basic "+btoa(b+":"+x)}var S=a(e.baseURL,e.url);_.open(e.method.toUpperCase(),s(S,e.params,e.paramsSerializer),true);_.timeout=e.timeout;function w(){if(!_){return}var t="getAllResponseHeaders"in _?u(_.getAllResponseHeaders()):null;var n=!v||v==="text"||v==="json"?_.responseText:_.response;var o={data:n,status:_.status,statusText:_.statusText,headers:t,config:e,request:_};i(function t(e){r(e);m()},function t(e){p(e);m()},o);_=null}if("onloadend"in _){_.onloadend=w}else{_.onreadystatechange=function t(){if(!_||_.readyState!==4){return}if(_.status===0&&!(_.responseURL&&_.responseURL.indexOf("file:")===0)){return}setTimeout(w)}}_.onabort=function t(){if(!_){return}p(c("Request aborted",e,"ECONNABORTED",_));_=null};_.onerror=function t(){p(c("Network Error",e,null,_));_=null};_.ontimeout=function t(){var r=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";var n=e.transitional||h;if(e.timeoutErrorMessage){r=e.timeoutErrorMessage}p(c(r,e,n.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",_));_=null};if(n.isStandardBrowserEnv()){var C=(e.withCredentials||l(S))&&e.xsrfCookieName?o.read(e.xsrfCookieName):undefined;if(C){y[e.xsrfHeaderName]=C}}if("setRequestHeader"in _){n.forEach(y,function t(e,r){if(typeof d==="undefined"&&r.toLowerCase()==="content-type"){delete y[r]}else{_.setRequestHeader(r,e)}})}if(!n.isUndefined(e.withCredentials)){_.withCredentials=!!e.withCredentials}if(v&&v!=="json"){_.responseType=e.responseType}if(typeof e.onDownloadProgress==="function"){_.addEventListener("progress",e.onDownloadProgress)}if(typeof e.onUploadProgress==="function"&&_.upload){_.upload.addEventListener("progress",e.onUploadProgress)}if(e.cancelToken||e.signal){g=function(t){if(!_){return}p(!t||t&&t.type?new f("canceled"):t);_.abort();_=null};e.cancelToken&&e.cancelToken.subscribe(g);if(e.signal){e.signal.aborted?g():e.signal.addEventListener("abort",g)}}if(!d){d=null}_.send(d)})}},function(t,e,r){"use strict";var n=r(278);t.exports=function t(e,r,i,o,s){var a=new Error(e);return n(a,r,i,o,s)}},function(t,e,r){"use strict";t.exports=function t(e){return!!(e&&e.__CANCEL__)}},function(t,e,r){"use strict";var n=r(22);t.exports=function t(e,r){r=r||{};var i={};function o(t,e){if(n.isPlainObject(t)&&n.isPlainObject(e)){return n.merge(t,e)}else if(n.isPlainObject(e)){return n.merge({},e)}else if(n.isArray(e)){return e.slice()}return e}function s(t){if(!n.isUndefined(r[t])){return o(e[t],r[t])}else if(!n.isUndefined(e[t])){return o(undefined,e[t])}}function a(t){if(!n.isUndefined(r[t])){return o(undefined,r[t])}}function u(t){if(!n.isUndefined(r[t])){return o(undefined,r[t])}else if(!n.isUndefined(e[t])){return o(undefined,e[t])}}function l(t){if(t in r){return o(e[t],r[t])}else if(t in e){return o(undefined,e[t])}}var c={url:a,method:a,data:a,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:l};n.forEach(Object.keys(e).concat(Object.keys(r)),function t(e){var r=c[e]||s;var o=r(e);n.isUndefined(o)&&r!==l||(i[e]=o)});return i}},function(t,e){t.exports={version:"0.26.1"}},function(t,e,r){"use strict";var n=r(176);var i=Object.prototype.hasOwnProperty;var o=Array.isArray;var s=function(){var t=[];for(var e=0;e<256;++e){t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase())}return t}();var a=function t(e){while(e.length>1){var r=e.pop();var n=r.obj[r.prop];if(o(n)){var i=[];for(var s=0;s<n.length;++s){if(typeof n[s]!=="undefined"){i.push(n[s])}}r.obj[r.prop]=i}}};var u=function t(e,r){var n=r&&r.plainObjects?Object.create(null):{};for(var i=0;i<e.length;++i){if(typeof e[i]!=="undefined"){n[i]=e[i]}}return n};var l=function t(e,r,n){if(!r){return e}if(typeof r!=="object"){if(o(e)){e.push(r)}else if(e&&typeof e==="object"){if(n&&(n.plainObjects||n.allowPrototypes)||!i.call(Object.prototype,r)){e[r]=true}}else{return[e,r]}return e}if(!e||typeof e!=="object"){return[e].concat(r)}var s=e;if(o(e)&&!o(r)){s=u(e,n)}if(o(e)&&o(r)){r.forEach(function(r,o){if(i.call(e,o)){var s=e[o];if(s&&typeof s==="object"&&r&&typeof r==="object"){e[o]=t(s,r,n)}else{e.push(r)}}else{e[o]=r}});return e}return Object.keys(r).reduce(function(e,o){var s=r[o];if(i.call(e,o)){e[o]=t(e[o],s,n)}else{e[o]=s}return e},s)};var c=function t(e,r){return Object.keys(r).reduce(function(t,e){t[e]=r[e];return t},e)};var h=function(t,e,r){var n=t.replace(/\+/g," ");if(r==="iso-8859-1"){return n.replace(/%[0-9a-f]{2}/gi,unescape)}try{return decodeURIComponent(n)}catch(t){return n}};var f=function t(e,r,i,o,a){if(e.length===0){return e}var u=e;if(typeof e==="symbol"){u=Symbol.prototype.toString.call(e)}else if(typeof e!=="string"){u=String(e)}if(i==="iso-8859-1"){return escape(u).replace(/%u[0-9a-f]{4}/gi,function(t){return"%26%23"+parseInt(t.slice(2),16)+"%3B"})}var l="";for(var c=0;c<u.length;++c){var h=u.charCodeAt(c);if(h===45||h===46||h===95||h===126||h>=48&&h<=57||h>=65&&h<=90||h>=97&&h<=122||a===n.RFC1738&&(h===40||h===41)){l+=u.charAt(c);continue}if(h<128){l=l+s[h];continue}if(h<2048){l=l+(s[192|h>>6]+s[128|h&63]);continue}if(h<55296||h>=57344){l=l+(s[224|h>>12]+s[128|h>>6&63]+s[128|h&63]);continue}c+=1;h=65536+((h&1023)<<10|u.charCodeAt(c)&1023);l+=s[240|h>>18]+s[128|h>>12&63]+s[128|h>>6&63]+s[128|h&63]}return l};var p=function t(e){var r=[{obj:{o:e},prop:"o"}];var n=[];for(var i=0;i<r.length;++i){var o=r[i];var s=o.obj[o.prop];var u=Object.keys(s);for(var l=0;l<u.length;++l){var c=u[l];var h=s[c];if(typeof h==="object"&&h!==null&&n.indexOf(h)===-1){r.push({obj:s,prop:c});n.push(h)}}}a(r);return e};var d=function t(e){return Object.prototype.toString.call(e)==="[object RegExp]"};var y=function t(e){if(!e||typeof e!=="object"){return false}return!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))};var v=function t(e,r){return[].concat(e,r)};var g=function t(e,r){if(o(e)){var n=[];for(var i=0;i<e.length;i+=1){n.push(r(e[i]))}return n}return r(e)};t.exports={arrayToObject:u,assign:c,combine:v,compact:p,decode:h,encode:f,isBuffer:y,isRegExp:d,maybeMap:g,merge:l}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.LevelRenderer=undefined;var n=r(5);var i=l(n);var o=r(6);var s=l(o);var a=r(7);var u=r(287);function l(t){return t&&t.__esModule?t:{default:t}}var c=a.Common.newGuid,h=a.Common.Zondy;var f=function(){function t(){(0,i.default)(this,t);t._instances={};t.Tool={};this.CLASS_NAME="Zondy.LevelRenderer"}(0,s.default)(t,[{key:"destroy",value:function t(){this.dispose()}},{key:"init",value:function e(r){var n=new u.Render(c(),r);t._instances[n.id]=n;return n}},{key:"dispose",value:function e(r){if(r){r.dispose();this.delInstance(r.id)}else{for(var n in t._instances){t._instances[n].dispose()}t._instances={}}return this}},{key:"getInstance",value:function e(r){return t._instances[r]}},{key:"delInstance",value:function e(r){delete t._instances[r];return this}}]);return t}();e.LevelRenderer=f;h.LevelRenderer=f},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Render=undefined;var n=r(5);var i=f(n);var o=r(6);var s=f(o);var a=r(7);var u=r(288);var l=r(297);var c=r(298);var h=r(299);function f(t){return t&&t.__esModule?t:{default:t}}var p=a.Common.Zondy,d=a.Common.indexOf,y=a.Common.newGuid;var v=function(){function t(e,r){(0,i.default)(this,t);this.id=e;this.storage=new u.Storage;this.painter=new l.Painter(r,this.storage);this.handler=new c.Handler(r,this.storage,this.painter);this.animatingElements=[];this.animation=new h.Animation({stage:{update:t.getFrameCallback(this)}});this._needsRefreshNextFrame=false;this.animation.start();this.CLASS_NAME="Zondy.LevelRenderer.Render"}(0,s.default)(t,[{key:"destroy",value:function t(){this.id=null;this.storage=null;this.painter=null;this.handler=null;this.animatingElements=null;this.animation=null;this._needsRefreshNextFrame=null}},{key:"getId",value:function t(){return this.id}},{key:"addShape",value:function t(e){this.storage.addRoot(e);return this}},{key:"addGroup",value:function t(e){this.storage.addRoot(e);return this}},{key:"delShape",value:function t(e){this.storage.delRoot(e);return this}},{key:"delGroup",value:function t(e){this.storage.delRoot(e);return this}},{key:"modShape",value:function t(e,r){this.storage.mod(e,r);return this}},{key:"modGroup",value:function t(e,r){this.storage.mod(e,r);return this}},{key:"modLayer",value:function t(e,r){this.painter.modLayer(e,r);return this}},{key:"addHoverShape",value:function t(e){this.storage.addHover(e);return this}},{key:"render",value:function t(e){this.painter.render(e);this._needsRefreshNextFrame=false;return this}},{key:"refresh",value:function t(e){this.painter.refresh(e);this._needsRefreshNextFrame=false;return this}},{key:"refreshNextFrame",value:function t(){this._needsRefreshNextFrame=true;return this}},{key:"refreshHover",value:function t(e){this.painter.refreshHover(e);return this}},{key:"refreshShapes",value:function t(e,r){this.painter.refreshShapes(e,r);return this}},{key:"resize",value:function t(){this.painter.resize();return this}},{key:"animate",value:function t(e,r,n){if(typeof e==="string"){e=this.storage.get(e)}if(e){var i;if(r){var o=r.split(".");var s=e;for(var a=0,u=o.length;a<u;a++){if(!s){continue}s=s[o[a]]}if(s){i=s}}else{i=e}if(!i){return}var l=this.animatingElements;if(typeof e.__aniCount==="undefined"){e.__aniCount=0}if(e.__aniCount===0){l.push(e)}e.__aniCount++;return this.animation.animate(i,{loop:n}).done(function(){e.__aniCount--;if(e.__aniCount===0){var t=d(l,e);l.splice(t,1)}})}}},{key:"clearAnimation",value:function t(){this.animation.clear()}},{key:"getWidth",value:function t(){return this.painter.getWidth()}},{key:"getHeight",value:function t(){return this.painter.getHeight()}},{key:"toDataURL",value:function t(e,r,n){return this.painter.toDataURL(e,r,n)}},{key:"shapeToImage",value:function t(e,r,n){var i=y();return this.painter.shapeToImage(i,e,r,n)}},{key:"on",value:function t(e,r){this.handler.on(e,r);return this}},{key:"un",value:function t(e,r){this.handler.un(e,r);return this}},{key:"trigger",value:function t(e,r){this.handler.trigger(e,r);this.handler.dispatch(e,r);return this}},{key:"clear",value:function t(){this.storage.delRoot();this.painter.clear();return this}},{key:"dispose",value:function t(){this.animation.stop();this.clear();this.storage.dispose();this.painter.dispose();this.handler.dispose();this.animation=null;this.animatingElements=null;this.storage=null;this.painter=null;this.handler=null}},{key:"updateHoverShapes",value:function t(e){this.painter.updateHoverLayer(e);return this}},{key:"getAllShapes",value:function t(){return this.storage._shapeList}},{key:"clearAll",value:function t(){this.clear();this.painter.clearHover();return this}},{key:"getHoverOne",value:function t(){return this.handler.getLastHoverOne()}}],[{key:"getFrameCallback",value:function t(e){return function(){var t=e.animatingElements;if(t instanceof Array){for(var r=0,n=t.length;r<n;r++){e.storage.mod(t[r].id)}if(t.length||e._needsRefreshNextFrame){e.refresh()}}}}}]);return t}();e.Render=v;p.LevelRenderer.Render=v},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Storage=undefined;var n=r(5);var i=l(n);var o=r(6);var s=l(o);var a=r(7);var u=r(289);function l(t){return t&&t.__esModule?t:{default:t}}var c=a.Common.Zondy,h=a.Common.indexOf,f=a.Common.merge;var p=function(){function t(){(0,i.default)(this,t);this._elements={};this._hoverElements=[];this._roots=[];this._shapeList=[];this._shapeListOffset=0;this.CLASS_NAME="Zondy.LevelRenderer.Storage"}(0,s.default)(t,[{key:"destroy",value:function t(){this.dispose();this._shapeList=null;this._shapeListOffset=null}},{key:"iterShape",value:function t(e,r){if(!r){var n={hover:false,normal:"down",update:false};r=n}if(r.hover){for(var i=0,o=this._hoverElements.length;i<o;i++){var s=this._hoverElements[i];s.updateTransform();if(e(s)){return this}}}if(r.update){this.updateShapeList()}switch(r.normal){case"down":{var a=this._shapeList.length;while(a--){if(e(this._shapeList[a])){return this}}break}default:{for(var u=0,l=this._shapeList.length;u<l;u++){if(e(this._shapeList[u])){return this}}break}}return this}},{key:"getHoverShapes",value:function e(r){var n=[],i=this._hoverElements.length;for(var o=0;o<i;o++){n.push(this._hoverElements[o]);var s=this._hoverElements[o].hoverConnect;if(s){var a;s=s instanceof Array?s:[s];for(var u=0,l=s.length;u<l;u++){a=s[u].id?s[u]:this.get(s[u]);if(a){n.push(a)}}}}n.sort(t.shapeCompareFunc);if(r){for(var c=0,h=n.length;c<h;c++){n[c].updateTransform()}}return n}},{key:"getShapeList",value:function t(e){if(e){this.updateShapeList()}return this._shapeList}},{key:"updateShapeList",value:function e(){this._shapeListOffset=0;var r=this._roots.length;for(var n=0;n<r;n++){var i=this._roots[n];this._updateAndAddShape(i)}this._shapeList.length=this._shapeListOffset;var o=this._shapeList.length;for(var s=0;s<o;s++){this._shapeList[s].__renderidx=s}this._shapeList.sort(t.shapeCompareFunc)}},{key:"_updateAndAddShape",value:function t(e,r){if(e.ignore){return}e.updateTransform();if(e.type==="group"){if(e.clipShape){e.clipShape.parent=e;e.clipShape.updateTransform();if(r){r=r.slice();r.push(e.clipShape)}else{r=[e.clipShape]}}for(var n=0;n<e._children.length;n++){var i=e._children[n];i.__dirty=e.__dirty||i.__dirty;this._updateAndAddShape(i,r)}e.__dirty=false}else{e.__clipShapes=r;this._shapeList[this._shapeListOffset++]=e}}},{key:"mod",value:function t(e,r){var n=this._elements[e];if(n){n.modSelf();if(r){if(r.parent||r._storage||r.__startClip){var i={};for(var o in r){if(o==="parent"||o==="_storage"||o==="__startClip"){continue}if(r.hasOwnProperty(o)){i[o]=r[o]}}f(n,i,true)}else{f(n,r,true)}}}return this}},{key:"drift",value:function t(e,r,n){var i=this._elements[e];if(i){i.needTransform=true;if(i.draggable==="horizontal"){n=0}else if(i.draggable==="vertical"){r=0}if(!i.ondrift||i.ondrift&&!i.ondrift(r,n)){i.drift(r,n)}}return this}},{key:"addHover",value:function t(e){e.updateNeedTransform();this._hoverElements.push(e);return this}},{key:"delHover",value:function t(){this._hoverElements=[];return this}},{key:"hasHoverShape",value:function t(){return this._hoverElements.length>0}},{key:"addRoot",value:function t(e){if(e instanceof u.Group){e.addChildrenToStorage(this)}this.addToMap(e);this._roots.push(e)}},{key:"delRoot",value:function t(e){if(typeof e=="undefined"){for(var r=0;r<this._roots.length;r++){var n=this._roots[r];if(n instanceof u.Group){n.delChildrenFromStorage(this)}}this._elements={};this._hoverElements=[];this._roots=[];return}if(e instanceof Array){var i=e.length;for(var o=0;o<i;o++){this.delRoot(e[o])}return}var s;if(typeof e=="string"){s=this._elements[e]}else{s=e}var a=h(this._roots,s);if(a>=0){this.delFromMap(s.id);this._roots.splice(a,1);if(s instanceof u.Group){s.delChildrenFromStorage(this)}}}},{key:"addToMap",value:function t(e){if(e instanceof u.Group){e._storage=this}e.modSelf();this._elements[e.id]=e;return this}},{key:"get",value:function t(e){return this._elements[e]}},{key:"delFromMap",value:function t(e){var r=this._elements[e];if(r){delete this._elements[e];if(r instanceof u.Group){r._storage=null}}return this}},{key:"dispose",value:function t(){this._elements=null;this._roots=null;this._hoverElements=null}}],[{key:"shapeCompareFunc",value:function t(e,r){if(e.zlevel===r.zlevel){if(e.z===r.z){return e.__renderidx-r.__renderidx}return e.z-r.z}return e.zlevel-r.zlevel}}]);return t}();e.Storage=p;c.LevelRenderer.Storage=p},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Group=undefined;var n=r(11);var i=m(n);var o=r(5);var s=m(o);var a=r(6);var u=m(a);var l=r(12);var c=m(l);var h=r(14);var f=m(h);var p=r(13);var d=m(p);var y=r(7);var v=r(80);var g=r(106);function m(t){return t&&t.__esModule?t:{default:t}}var _=y.Common.Zondy,b=y.Common.mixin,x=y.Common.indexOf,S=y.Common.extend,w=y.Common.newGuid;var C=function(t){(0,d.default)(e,t);function e(t){(0,s.default)(this,e);var r=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t));t=t||{};r.id=null;r.type="group";r.clipShape=null;r._children=[];r._storage=null;r.__dirty=true;r.ignore=false;S(r,t);r.id=r.id||w();r.CLASS_NAME="Zondy.LevelRenderer.Group";return r}(0,u.default)(e,[{key:"destroy",value:function t(){this.id=null;this.type=null;this.clipShape=null;this._children=null;this._storage=null;this.__dirty=null;this.ignore=null;(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}},{key:"children",value:function t(){return this._children.slice()}},{key:"childAt",value:function t(e){return this._children[e]}},{key:"addChild",value:function t(r){if(r===this){return}if(r.parent===this){return}if(r.parent){r.parent.removeChild(r)}this._children.push(r);r.parent=this;if(this._storage&&this._storage!==r._storage){this._storage.addToMap(r);if(r instanceof e){r.addChildrenToStorage(this._storage)}}}},{key:"removeChild",value:function t(r){var n=x(this._children,r);this._children.splice(n,1);r.parent=null;if(this._storage){this._storage.delFromMap(r.id);if(r instanceof e){r.delChildrenFromStorage(this._storage)}}}},{key:"eachChild",value:function t(e,r){var n=!!r;for(var i=0;i<this._children.length;i++){var o=this._children[i];if(n){e.call(r,o)}else{e(o)}}}},{key:"traverse",value:function t(e,r){var n=!!r;for(var i=0;i<this._children.length;i++){var o=this._children[i];if(n){e.call(r,o)}else{e(o)}if(o.type==="group"){o.traverse(e,r)}}}},{key:"addChildrenToStorage",value:function t(e){for(var r=0;r<this._children.length;r++){var n=this._children[r];e.addToMap(n);if(n.type==="group"){n.addChildrenToStorage(e)}}}},{key:"delChildrenFromStorage",value:function t(e){for(var r=0;r<this._children.length;r++){var n=this._children[r];e.delFromMap(n.id);if(n.type==="group"){n.delChildrenFromStorage(e)}}}},{key:"modSelf",value:function t(){this.__dirty=true}}]);return e}(b(v.Eventful,g.Transformable));e.Group=C;_.LevelRenderer.Group=C},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Area=undefined;var n=r(5);var i=c(n);var o=r(6);var s=c(o);var a=r(7);var u=r(67);var l=r(107);function c(t){return t&&t.__esModule?t:{default:t}}var h=a.Common.Zondy;var f=function(){function t(){(0,i.default)(this,t);this.util=new u.Util;this.curve=new l.Curve;this._ctx=null;this._textWidthCache={};this._textHeightCache={};this._textWidthCacheCounter=0;this._textHeightCacheCounter=0;this.TEXT_CACHE_MAX=5e3;this.PI2=Math.PI*2;this.roots=[-1,-1,-1];this.extrema=[-1,-1];this.CLASS_NAME="Zondy.LevelRenderer.Tool.Area"}(0,s.default)(t,[{key:"normalizeRadian",value:function t(e){e%=this.PI2;if(e<0){e+=this.PI2}return e}},{key:"isInside",value:function t(e,r,n,i){if(!r||!e){return false}var o=e.type;this._ctx=this._ctx||this.util.getContext();var s=this._mathMethod(e,r,n,i);if(typeof s!="undefined"){return s}if(e.buildPath&&this._ctx.isPointInPath){return this._buildPathMethod(e,this._ctx,r,n,i)}switch(o){case"ellipse":case"smicellipse":return true;case"trochoid":var a=r.location==="out"?r.r1+r.r2+r.d:r.r1-r.r2+r.d;return this.isInsideCircle(r,n,i,a);case"rose":return this.isInsideCircle(r,n,i,r.maxr);default:return false}}},{key:"_mathMethod",value:function t(e,r,n,i){var o=e.type;switch(o){case"bezier-curve":if(typeof r.cpX2==="undefined"){return this.isInsideQuadraticStroke(r.xStart,r.yStart,r.cpX1,r.cpY1,r.xEnd,r.yEnd,r.lineWidth,n,i)}return this.isInsideCubicStroke(r.xStart,r.yStart,r.cpX1,r.cpY1,r.cpX2,r.cpY2,r.xEnd,r.yEnd,r.lineWidth,n,i);case"line":return this.isInsideLine(r.xStart,r.yStart,r.xEnd,r.yEnd,r.lineWidth,n,i);case"broken-line":return this.isInsideBrokenLine(r.pointList,r.lineWidth,n,i);case"smicbroken-line":{var s=n;var a=i;if(e.refOriginalPosition){s=n-e.refOriginalPosition[0];a=i-e.refOriginalPosition[1]}return this.isInsideBrokenLine(r.pointList,r.lineWidth,s,a)}case"ring":return this.isInsideRing(r.x,r.y,r.r0,r.r,n,i);case"smicring":{var u=r.x;var l=r.y;if(e.refOriginalPosition){u=r.x+e.refOriginalPosition[0];l=r.y+e.refOriginalPosition[1]}return this.isInsideRing(u,l,r.r0,r.r,n,i)}case"circle":return this.isInsideCircle(r.x,r.y,r.r,n,i);case"smicpoint":{var c=n;var h=i;if(e.refOriginalPosition){c=n-e.refOriginalPosition[0];h=i-e.refOriginalPosition[1]}return this.isInsideCircle(r.x,r.y,r.r,c,h)}case"sector":{var f=r.startAngle*Math.PI/180;var p=r.endAngle*Math.PI/180;if(!r.clockWise){f=-f;p=-p}return this.isInsideSector(r.x,r.y,r.r0,r.r,f,p,!r.clockWise,n,i)}case"smicsector":{var d=r.startAngle*Math.PI/180;var y=r.endAngle*Math.PI/180;if(!r.clockWise){d=-d;y=-y}var v=r.x;var g=r.y;if(e.refOriginalPosition){v=r.x+e.refOriginalPosition[0];g=r.y+e.refOriginalPosition[1]}return this.isInsideSector(v,g,r.r0,r.r,d,y,!r.clockWise,n,i)}case"path":return this.isInsidePath(r.pathArray,Math.max(r.lineWidth,5),r.brushType,n,i);case"polygon":case"star":case"smicstar":case"isogon":case"smicisogon":return this.isInsidePolygon(r.pointList,n,i);case"smicpolygon":{var m=n;var _=i;if(e.refOriginalPosition){m=n-e.refOriginalPosition[0];_=i-e.refOriginalPosition[1]}if(e.holePolygonPointLists&&e.holePolygonPointLists.length>0){var b=this.isInsidePolygon(r.pointList,m,_);var x=e.holePolygonPointLists;var S=false;for(var w=0,C=x.length;w<C;w++){var I=x[w];var E=this.isInsidePolygon(I,m,_);if(E===true){S=true}}return b===true&&S===false}else{return this.isInsidePolygon(r.pointList,m,_)}}case"text":var P=r.__rect||e.getRect(r);return this.isInsideRect(P.x,P.y,P.width,P.height,n,i);case"smictext":var M=e.getTextBackground(r);return this.isInsidePolygon(M,n,i);case"rectangle":case"image":return this.isInsideRect(r.x,r.y,r.width,r.height,n,i);case"smicimage":{var L=r.x;var N=r.y;if(e.refOriginalPosition){L=r.x+e.refOriginalPosition[0];N=r.y+e.refOriginalPosition[1]}return this.isInsideRect(L,N,r.width,r.height,n,i)}}}},{key:"_buildPathMethod",value:function t(e,r,n,i,o){r.beginPath();e.buildPath(r,n);r.closePath();return r.isPointInPath(i,o)}},{key:"isOutside",value:function t(e,r,n,i){return!this.isInside(e,r,n,i)}},{key:"isInsideLine",value:function t(e,r,n,i,o,s,a){if(o===0){return false}var u=Math.max(o,5);var l=0;var c=0;if(a>r+u&&a>i+u||a<r-u&&a<i-u||s>e+u&&s>n+u||s<e-u&&s<n-u){return false}if(e!==n){l=(r-i)/(e-n);c=(e*i-n*r)/(e-n)}else{return Math.abs(s-e)<=u/2}var h=l*s-a+c;var f=h*h/(l*l+1);return f<=u/2*u/2}},{key:"isInsideCubicStroke",value:function t(e,r,n,i,o,s,a,u,l,c,h){if(l===0){return false}var f=Math.max(l,5);if(h>r+f&&h>i+f&&h>s+f&&h>u+f||h<r-f&&h<i-f&&h<s-f&&h<u-f||c>e+f&&c>n+f&&c>o+f&&c>a+f||c<e-f&&c<n-f&&c<o-f&&c<a-f){return false}var p=this.curve.cubicProjectPoint(e,r,n,i,o,s,a,u,c,h,null);return p<=f/2}},{key:"isInsideQuadraticStroke",value:function t(e,r,n,i,o,s,a,u,l){if(a===0){return false}var c=Math.max(a,5);if(l>r+c&&l>i+c&&l>s+c||l<r-c&&l<i-c&&l<s-c||u>e+c&&u>n+c&&u>o+c||u<e-c&&u<n-c&&u<o-c){return false}var h=this.curve.quadraticProjectPoint(e,r,n,i,o,s,u,l,null);return h<=c/2}},{key:"isInsideArcStroke",value:function t(e,r,n,i,o,s,a,u,l){var c=this.PI2;if(a===0){return false}var h=Math.max(a,5);u-=e;l-=r;var f=Math.sqrt(u*u+l*l);if(f-h>n||f+h<n){return false}if(Math.abs(i-o)>=c){return true}if(s){var p=i;i=this.normalizeRadian(o);o=this.normalizeRadian(p)}else{i=this.normalizeRadian(i);o=this.normalizeRadian(o)}if(i>o){o+=c}var d=Math.atan2(l,u);if(d<0){d+=c}return d>=i&&d<=o||d+c>=i&&d+c<=o}},{key:"isInsideBrokenLine",value:function t(e,r,n,i){var o=Math.max(r,10);for(var s=0,a=e.length-1;s<a;s++){var u=e[s][0];var l=e[s][1];var c=e[s+1][0];var h=e[s+1][1];if(this.isInsideLine(u,l,c,h,o,n,i)){return true}}return false}},{key:"isInsideRing",value:function t(e,r,n,i,o,s){var a=(o-e)*(o-e)+(s-r)*(s-r);return a<i*i&&a>n*n}},{key:"isInsideRect",value:function t(e,r,n,i,o,s){return o>=e&&o<=e+n&&s>=r&&s<=r+i}},{key:"isInsideCircle",value:function t(e,r,n,i,o){return(i-e)*(i-e)+(o-r)*(o-r)<n*n}},{key:"isInsideSector",value:function t(e,r,n,i,o,s,a,u,l){return this.isInsideArcStroke(e,r,(n+i)/2,o,s,a,i-n,u,l)}},{key:"isInsidePolygon",value:function t(e,r,n){var i=e.length;var o=0;for(var s=0,a=i-1;s<i;s++){var u=e[a][0];var l=e[a][1];var c=e[s][0];var h=e[s][1];o+=this.windingLine(u,l,c,h,r,n);a=s}return o!==0}},{key:"windingLine",value:function t(e,r,n,i,o,s){if(s>r&&s>i||s<r&&s<i){return 0}if(i==r){return 0}var a=i<r?1:-1;var u=(s-r)/(i-r);var l=u*(n-e)+e;return l>o?a:0}},{key:"swapExtrema",value:function t(){var e=this.extrema[0];this.extrema[0]=this.extrema[1];this.extrema[1]=e}},{key:"windingCubic",value:function t(e,r,n,i,o,s,a,u,l,c){var h=this.curve;var f=this.roots;var p=this.extrema;if(c>r&&c>i&&c>s&&c>u||c<r&&c<i&&c<s&&c<u){return 0}var d=h.cubicRootAt(r,i,s,u,c,f);if(d===0){return 0}else{var y=0;var v=-1;var g,m;for(var _=0;_<d;_++){var b=f[_];var x=h.cubicAt(e,n,o,a,b);if(x<l){continue}if(v<0){v=h.cubicExtrema(r,i,s,u,p);if(p[1]<p[0]&&v>1){this.swapExtrema()}g=h.cubicAt(r,i,s,u,p[0]);if(v>1){m=h.cubicAt(r,i,s,u,p[1])}}if(v===2){if(b<p[0]){y+=g<r?1:-1}else if(b<p[1]){y+=m<g?1:-1}else{y+=u<m?1:-1}}else{if(b<p[0]){y+=g<r?1:-1}else{y+=u<g?1:-1}}}return y}}},{key:"windingQuadratic",value:function t(e,r,n,i,o,s,a,u){var l=this.curve;var c=this.roots;if(u>r&&u>i&&u>s||u<r&&u<i&&u<s){return 0}var h=l.quadraticRootAt(r,i,s,u,c);if(h===0){return 0}else{var f=l.quadraticExtremum(r,i,s);if(f>=0&&f<=1){var p=0;var d=l.quadraticAt(r,i,s,f);for(var y=0;y<h;y++){var v=l.quadraticAt(e,n,o,c[y]);if(v>a){continue}if(c[y]<f){p+=d<r?1:-1}else{p+=s<d?1:-1}}return p}else{var g=l.quadraticAt(e,n,o,c[0]);if(g>a){return 0}return s<r?1:-1}}}},{key:"windingArc",value:function t(e,r,n,i,o,s,a,u){var l=this.roots;var c=this.PI2;u-=r;if(u>n||u<-n){return 0}var h=Math.sqrt(n*n-u*u);l[0]=-h;l[1]=h;if(Math.abs(i-o)>=c){i=0;o=c;var f=s?1:-1;if(a>=l[0]+e&&a<=l[1]+e){return f}else{return 0}}if(s){var p=i;i=this.normalizeRadian(o);o=this.normalizeRadian(p)}else{i=this.normalizeRadian(i);o=this.normalizeRadian(o)}if(i>o){o+=c}var d=0;for(var y=0;y<2;y++){var v=l[y];if(v+e>a){var g=Math.atan2(u,v);var m=s?1:-1;if(g<0){g=c+g}if(g>=i&&g<=o||g+c>=i&&g+c<=o){if(g>Math.PI/2&&g<Math.PI*1.5){m=-m}d+=m}}}return d}},{key:"isInsidePath",value:function t(e,r,n,i,o){var s=0;var a=0;var u=0;var l=0;var c=0;var h=true;var f=true;n=n||"fill";var p=n==="stroke"||n==="both";var d=n==="fill"||n==="both";for(var y=0;y<e.length;y++){var v=e[y];var g=v.points;if(h||v.command==="M"){if(y>0){if(d){s+=this.windingLine(a,u,l,c,i,o)}if(s!==0){return true}}l=g[g.length-2];c=g[g.length-1];h=false;if(f&&v.command!=="A"){f=false;a=l;u=c}}switch(v.command){case"M":a=g[0];u=g[1];break;case"L":if(p){if(this.isInsideLine(a,u,g[0],g[1],r,i,o)){return true}}if(d){s+=this.windingLine(a,u,g[0],g[1],i,o)}a=g[0];u=g[1];break;case"C":if(p){if(this.isInsideCubicStroke(a,u,g[0],g[1],g[2],g[3],g[4],g[5],r,i,o)){return true}}if(d){s+=this.windingCubic(a,u,g[0],g[1],g[2],g[3],g[4],g[5],i,o)}a=g[4];u=g[5];break;case"Q":if(p){if(this.isInsideQuadraticStroke(a,u,g[0],g[1],g[2],g[3],r,i,o)){return true}}if(d){s+=this.windingQuadratic(a,u,g[0],g[1],g[2],g[3],i,o)}a=g[2];u=g[3];break;case"A":var m=g[0];var _=g[1];var b=g[2];var x=g[3];var S=g[4];var w=g[5];var C=Math.cos(S)*b+m;var I=Math.sin(S)*x+_;if(!f){s+=this.windingLine(a,u,C,I)}else{f=false;l=C;c=I}var E=(i-m)*x/b+m;if(p){if(this.isInsideArcStroke(m,_,x,S,S+w,1-g[7],r,E,o)){return true}}if(d){s+=this.windingArc(m,_,x,S,S+w,1-g[7],E,o)}a=Math.cos(S+w)*b+m;u=Math.sin(S+w)*x+_;break;case"z":if(p){if(this.isInsideLine(a,u,l,c,r,i,o)){return true}}h=true;break}}if(d){s+=this.windingLine(a,u,l,c,i,o)}return s!==0}},{key:"getTextWidth",value:function t(e,r){var n=e+":"+r;if(this._textWidthCache[n]){return this._textWidthCache[n]}this._ctx=this._ctx||this.util.getContext();this._ctx.save();if(r){this._ctx.font=r}e=(e+"").split("\n");var i=0;for(var o=0,s=e.length;o<s;o++){i=Math.max(this._ctx.measureText(e[o]).width,i)}this._ctx.restore();this._textWidthCache[n]=i;if(++this._textWidthCacheCounter>this.TEXT_CACHE_MAX){this._textWidthCacheCounter=0;this._textWidthCache={}}return i}},{key:"getTextHeight",value:function t(e,r){var n=e+":"+r;if(this._textHeightCache[n]){return this._textHeightCache[n]}this._ctx=this._ctx||this.util.getContext();this._ctx.save();if(r){this._ctx.font=r}e=(e+"").split("\n");var i=(this._ctx.measureText("ZH").width+2)*e.length;this._ctx.restore();this._textHeightCache[n]=i;if(++this._textHeightCacheCounter>this.TEXT_CACHE_MAX){this._textHeightCacheCounter=0;this._textHeightCache={}}return i}}]);return t}();e.Area=f;h.LevelRenderer.Tool.Area=f},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ComputeBoundingBox=undefined;var n=r(5);var i=c(n);var o=r(6);var s=c(o);var a=r(7);var u=r(107);var l=r(108);function c(t){return t&&t.__esModule?t:{default:t}}var h=a.Common.Zondy;var f=function(){function t(){(0,i.default)(this,t);if(arguments.length===3){this.computeBoundingBox(arguments)}this.CLASS_NAME="Zondy.LevelRenderer.Tool.ComputeBoundingBox"}(0,s.default)(t,[{key:"computeBoundingBox",value:function t(e,r,n){if(e.length===0){return}var i=e[0][0];var o=e[0][0];var s=e[0][1];var a=e[0][1];for(var u=1;u<e.length;u++){var l=e[u];if(l[0]<i){i=l[0]}if(l[0]>o){o=l[0]}if(l[1]<s){s=l[1]}if(l[1]>a){a=l[1]}}r[0]=i;r[1]=s;n[0]=o;n[1]=a}},{key:"cubeBezier",value:function t(e,r,n,i,o,s){var a=new u.Curve;var l=[];a.cubicExtrema(e[0],r[0],n[0],i[0],l);for(var c=0;c<l.length;c++){l[c]=a.cubicAt(e[0],r[0],n[0],i[0],l[c])}var h=[];a.cubicExtrema(e[1],r[1],n[1],i[1],h);for(var f=0;f<h.length;f++){h[f]=a.cubicAt(e[1],r[1],n[1],i[1],h[f])}l.push(e[0],i[0]);h.push(e[1],i[1]);var p=Math.min.apply(null,l);var d=Math.max.apply(null,l);var y=Math.min.apply(null,h);var v=Math.max.apply(null,h);o[0]=p;o[1]=y;s[0]=d;s[1]=v}},{key:"quadraticBezier",value:function t(e,r,n,i,o){var s=new u.Curve;var a=s.quadraticExtremum(e[0],r[0],n[0]);var l=s.quadraticExtremum(e[1],r[1],n[1]);a=Math.max(Math.min(a,1),0);l=Math.max(Math.min(l,1),0);var c=1-a;var h=1-l;var f=c*c*e[0]+2*c*a*r[0]+a*a*n[0];var p=c*c*e[1]+2*c*a*r[1]+a*a*n[1];var d=h*h*e[0]+2*h*l*r[0]+l*l*n[0];var y=h*h*e[1]+2*h*l*r[1]+l*l*n[1];i[0]=Math.min(e[0],n[0],f,d);i[1]=Math.min(e[1],n[1],p,y);o[0]=Math.max(e[0],n[0],f,d);o[1]=Math.max(e[1],n[1],p,y)}},{key:"arc",value:function t(e,r,n,i,o,s,a,u){var c=new l.Vector;var h=c.create();var f=c.create();var p=c.create();h[0]=Math.cos(i)*n+e;h[1]=Math.sin(i)*n+r;f[0]=Math.cos(o)*n+e;f[1]=Math.sin(o)*n+r;c.min(a,h,f);c.max(u,h,f);i=i%(Math.PI*2);if(i<0){i=i+Math.PI*2}o=o%(Math.PI*2);if(o<0){o=o+Math.PI*2}if(i>o&&!s){o+=Math.PI*2}else if(i<o&&s){i+=Math.PI*2}if(s){var d=o;o=i;i=d}for(var y=0;y<o;y+=Math.PI/2){if(y>i){p[0]=Math.cos(y)*n+e;p[1]=Math.sin(y)*n+r;c.min(a,p,a);c.max(u,p,u)}}}}]);return t}();e.ComputeBoundingBox=f;h.LevelRenderer.Tool.ComputeBoundingBox=f},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Env=undefined;var n=r(5);var i=u(n);var o=r(6);var s=u(o);var a=r(7);function u(t){return t&&t.__esModule?t:{default:t}}var l=a.Common.Zondy;var c=function(){function t(){(0,i.default)(this,t);this.CLASS_NAME="Zondy.LevelRenderer.Tool.Env";var e=this;function r(t){var r=e.os={};var n=e.browser={};var i=t.match(/Web[kK]it[\/]{0,1}([\d.]+)/);var o=t.match(/(Android);?[\s\/]+([\d.]+)?/);var s=t.match(/(iPad).*OS\s([\d_]+)/);var a=t.match(/(iPod)(.*OS\s([\d_]+))?/);var u=!s&&t.match(/(iPhone\sOS)\s([\d_]+)/);var l=t.match(/(webOS|hpwOS)[\s\/]([\d.]+)/);var c=l&&t.match(/TouchPad/);var h=t.match(/Kindle\/([\d.]+)/);var f=t.match(/Silk\/([\d._]+)/);var p=t.match(/(BlackBerry).*Version\/([\d.]+)/);var d=t.match(/(BB10).*Version\/([\d.]+)/);var y=t.match(/(RIM\sTablet\sOS)\s([\d.]+)/);var v=t.match(/PlayBook/);var g=t.match(/Chrome\/([\d.]+)/)||t.match(/CriOS\/([\d.]+)/);var m=t.match(/Firefox\/([\d.]+)/);var _=t.match(/MSIE ([\d.]+)/);var b=i&&t.match(/Mobile\//)&&!g;var x=t.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/)&&!g;if(n.webkit=!!i){n.version=i[1]}if(o){r.android=true;r.version=o[2]}if(u&&!a){r.ios=r.iphone=true;r.version=u[2].replace(/_/g,".")}if(s){r.ios=r.ipad=true;r.version=s[2].replace(/_/g,".")}if(a){r.ios=r.ipod=true;r.version=a[3]?a[3].replace(/_/g,"."):null}if(l){r.webos=true;r.version=l[2]}if(c){r.touchpad=true}if(p){r.blackberry=true;r.version=p[2]}if(d){r.bb10=true;r.version=d[2]}if(y){r.rimtabletos=true;r.version=y[2]}if(v){n.playbook=true}if(h){r.kindle=true;r.version=h[1]}if(f){n.silk=true;n.version=f[1]}if(!f&&r.android&&t.match(/Kindle Fire/)){n.silk=true}if(g){n.chrome=true;n.version=g[1]}if(m){n.firefox=true;n.version=m[1]}if(_){n.ie=true;n.version=_[1]}if(b&&(t.match(/Safari/)||!!r.ios)){n.safari=true}if(x){n.webview=true}if(_){n.ie=true;n.version=_[1]}r.tablet=!!(s||v||o&&!t.match(/Mobile/)||m&&t.match(/Tablet/)||_&&!t.match(/Phone/)&&t.match(/Touch/));r.phone=!!(!r.tablet&&!r.ipod&&(o||u||l||p||d||g&&t.match(/Android/)||g&&t.match(/CriOS\/([\d.]+)/)||m&&t.match(/Mobile/)||_&&t.match(/Touch/)));return{browser:n,os:r,canvasSupported:document.createElement("canvas").getContext?true:false}}return r(navigator.userAgent)}(0,s.default)(t,[{key:"destory",value:function t(){return true}}]);return t}();e.Env=c;l.LevelRenderer.Tool.Env=c},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Event=undefined;var n=r(5);var i=u(n);var o=r(6);var s=u(o);var a=r(7);function u(t){return t&&t.__esModule?t:{default:t}}var l=a.Common.Zondy;var c=function(){function t(){(0,i.default)(this,t);this.stop=typeof window.addEventListener==="function"?function(t){t.preventDefault();t.stopPropagation();t.cancelBubble=true}:function(t){t.returnValue=false;t.cancelBubble=true};this.CLASS_NAME="Zondy.LevelRenderer.Tool.Event"}(0,s.default)(t,[{key:"getX",value:function t(e){return typeof e.zrenderX!="undefined"&&e.zrenderX||typeof e.offsetX!="undefined"&&e.offsetX||typeof e.layerX!="undefined"&&e.layerX||typeof e.clientX!="undefined"&&e.clientX}},{key:"getY",value:function t(e){return typeof e.zrenderY!="undefined"&&e.zrenderY||typeof e.offsetY!="undefined"&&e.offsetY||typeof e.layerY!="undefined"&&e.layerY||typeof e.clientY!="undefined"&&e.clientY}},{key:"getDelta",value:function t(e){return typeof e.zrenderDelta!="undefined"&&e.zrenderDelta||typeof e.wheelDelta!="undefined"&&e.wheelDelta||typeof e.detail!="undefined"&&-e.detail}}]);return t}();e.Event=c;l.LevelRenderer.Tool.Event=c},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Http=undefined;var n=r(79);var i=c(n);var o=r(5);var s=c(o);var a=r(6);var u=c(a);var l=r(7);function c(t){return t&&t.__esModule?t:{default:t}}var h=l.Common.Zondy;var f=function(){function t(){(0,s.default)(this,t);this.CLASS_NAME="Zondy.LevelRenderer.Tool.Http"}(0,u.default)(t,[{key:"get",value:function t(e,r,n){if((typeof e==="undefined"?"undefined":(0,i.default)(e))==="object"){var o=e;e=o.url;r=o.onsuccess;n=o.onerror}var s=window.XMLHttpRequest?new XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");s.open("GET",e,true);s.onreadystatechange=function(){if(s.readyState===4){if(s.status>=200&&s.status<300||s.status===304){r&&r(s.responseText)}else{n&&n()}s.onreadystatechange=new Function;s=null}};s.send(null)}}]);return t}();e.Http=f;h.LevelRenderer.Tool.Http=f},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Math=undefined;var n=r(5);var i=u(n);var o=r(6);var s=u(o);var a=r(7);function u(t){return t&&t.__esModule?t:{default:t}}var l=a.Common.Zondy;var c=function(){function t(){(0,i.default)(this,t);this._radians=window.Math.PI/180;this.CLASS_NAME="Zondy.LevelRenderer.Tool.Math"}(0,s.default)(t,[{key:"sin",value:function t(e,r){return window.Math.sin(r?e*this._radians:e)}},{key:"cos",value:function t(e,r){return window.Math.cos(r?e*this._radians:e)}},{key:"degreeToRadian",value:function t(e){return e*this._radians}},{key:"radianToDegree",value:function t(e){return e/this._radians}}]);return t}();e.Math=c;l.LevelRenderer.Tool.Math=c},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Matrix=undefined;var n=r(5);var i=u(n);var o=r(6);var s=u(o);var a=r(7);function u(t){return t&&t.__esModule?t:{default:t}}var l=a.Common.Zondy;var c=function(){function t(){(0,i.default)(this,t);this.ArrayCtor=typeof Float32Array==="undefined"?Array:Float32Array;this.CLASS_NAME="Zondy.LevelRenderer.Tool.Matrix"}(0,s.default)(t,[{key:"create",value:function t(){var e=this.ArrayCtor;var r=new e(6);this.identity(r);return r}},{key:"identity",value:function t(e){e[0]=1;e[1]=0;e[2]=0;e[3]=1;e[4]=0;e[5]=0;return e}},{key:"copy",value:function t(e,r){e[0]=r[0];e[1]=r[1];e[2]=r[2];e[3]=r[3];e[4]=r[4];e[5]=r[5];return e}},{key:"mul",value:function t(e,r,n){e[0]=r[0]*n[0]+r[2]*n[1];e[1]=r[1]*n[0]+r[3]*n[1];e[2]=r[0]*n[2]+r[2]*n[3];e[3]=r[1]*n[2]+r[3]*n[3];e[4]=r[0]*n[4]+r[2]*n[5]+r[4];e[5]=r[1]*n[4]+r[3]*n[5]+r[5];return e}},{key:"translate",value:function t(e,r,n){e[0]=r[0];e[1]=r[1];e[2]=r[2];e[3]=r[3];e[4]=r[4]+n[0];e[5]=r[5]+n[1];return e}},{key:"rotate",value:function t(e,r,n){var i=r[0];var o=r[2];var s=r[4];var a=r[1];var u=r[3];var l=r[5];var c=Math.sin(n);var h=Math.cos(n);e[0]=i*h+a*c;e[1]=-i*c+a*h;e[2]=o*h+u*c;e[3]=-o*c+h*u;e[4]=h*s+c*l;e[5]=h*l-c*s;return e}},{key:"scale",value:function t(e,r,n){var i=n[0];var o=n[1];e[0]=r[0]*i;e[1]=r[1]*o;e[2]=r[2]*i;e[3]=r[3]*o;e[4]=r[4]*i;e[5]=r[5]*o;return e}},{key:"invert",value:function t(e,r){var n=r[0];var i=r[2];var o=r[4];var s=r[1];var a=r[3];var u=r[5];var l=n*a-s*i;if(!l){return null}l=1/l;e[0]=a*l;e[1]=-s*l;e[2]=-i*l;e[3]=n*l;e[4]=(i*u-a*o)*l;e[5]=(s*o-n*u)*l;return e}},{key:"mulVector",value:function t(e,r,n){var i=r[0];var o=r[2];var s=r[4];var a=r[1];var u=r[3];var l=r[5];e[0]=n[0]*i+n[1]*o+s;e[1]=n[0]*a+n[1]*u+l;return e}}]);return t}();e.Matrix=c;l.LevelRenderer.Tool.Matrix=c},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.PaintLayer=e.Painter=undefined;var n=r(11);var i=_(n);var o=r(12);var s=_(o);var a=r(13);var u=_(a);var l=r(5);var c=_(l);var h=r(6);var f=_(h);var p=r(7);var d=r(67);var y=r(106);var v=r(179);var g=r(28);var m=r(180);function _(t){return t&&t.__esModule?t:{default:t}}var b=p.Common.Zondy,x=p.Common.newGuid;var S=function(){function t(e,r){(0,c.default)(this,t);this.root=e;this.storage=r;this._domRoot=null;this._layers={};this._zlevelList=[];this._layerConfig={};this._bgDom=null;this.shapeToImage=null;t.devicePixelRatio=Math.max(window.devicePixelRatio||1,1);this.CLASS_NAME="Zondy.LevelRenderer.Painter";this.root.innerHTML="";this._width=this._getWidth();this._height=this._getHeight();var n=document.createElement("div");this._domRoot=n;n.style.position="relative";n.style.overflow="hidden";n.style.width=this._width+"px";n.style.height=this._height+"px";this.root.appendChild(n);this.shapeToImage=this._createShapeToImageProcessor();this._bgDom=t.createDom(x(),"div",this);n.appendChild(this._bgDom);this._bgDom.onselectstart=s;this._bgDom.style["-webkit-user-select"]="none";this._bgDom.style["user-select"]="none";this._bgDom.style["-webkit-touch-callout"]="none";var i=new w(x(),this);this._layers["hover"]=i;n.appendChild(i.dom);i.initContext();i.dom.onselectstart=s;i.dom.style["-webkit-user-select"]="none";i.dom.style["user-select"]="none";i.dom.style["-webkit-touch-callout"]="none";var o=this;this.updatePainter=function(t,e){o.refreshShapes(t,e)};function s(){return false}function a(){}}(0,f.default)(t,[{key:"destroy",value:function t(){this.dispose();this._zlevelList=null;this._layerConfig=null;this._bgDom=null;this.shapeToImage=null}},{key:"render",value:function t(e){this.refresh(e,true);return this}},{key:"refresh",value:function t(e,r){var n=this.storage.getShapeList(true);this._paintList(n,r);if(typeof e=="function"){e()}return this}},{key:"_paintList",value:function t(e,r){if(typeof r=="undefined"){r=false}this._updateLayerStatus(e);var n;var i;var o;for(var s in this._layers){if(s!=="hover"){this._layers[s].unusedCount++;this._layers[s].updateTransform()}}var a=[];for(var u=0,l=e.length;u<l;u++){var c=e[u];if(i!==c.zlevel){if(n&&n.needTransform){o.restore()}n=this.getLayer(c.zlevel);o=n.ctx;i=c.zlevel;n.unusedCount=0;if(n.dirty||r){n.clear()}if(n.needTransform){o.save();n.setTransform(o)}}if(o&&c.__startClip){var h=c.__startClip;o.save();if(h.needTransform){var f=h.transform;g.SUtil.Util_matrix.invert(a,f);o.transform(f[0],f[1],f[2],f[3],f[4],f[5])}o.beginPath();h.buildPath(o,h.style);o.clip();if(h.needTransform){var p=a;o.transform(p[0],p[1],p[2],p[3],p[4],p[5])}}if((n&&n.dirty||r)&&!c.invisible){if(!c.onbrush||c.onbrush&&!c.onbrush(o,false)){if(v.Config.catchBrushException){try{c.brush(o,false,this.updatePainter)}catch(t){}}else{c.brush(o,false,this.updatePainter)}}}if(o&&c.__stopClip){o.restore()}c.__dirty=false}if(o&&n&&n.needTransform){o.restore()}for(var d in this._layers){if(d!=="hover"){var y=this._layers[d];y.dirty=false;if(y.unusedCount===1){y.clear()}}}}},{key:"getLayer",value:function t(e){var r=this._layers[e];if(!r){var n=this._zlevelList.length;var i=null;var o=-1;if(n>0&&e>this._zlevelList[0]){for(o=0;o<n-1;o++){if(this._zlevelList[o]<e&&this._zlevelList[o+1]>e){break}}i=this._layers[this._zlevelList[o]]}this._zlevelList.splice(o+1,0,e);r=new w(x(),this);var s=i?i.dom:this._bgDom;if(s.nextSibling){s.parentNode.insertBefore(r.dom,s.nextSibling)}else{s.parentNode.appendChild(r.dom)}r.initContext();this._layers[e]=r;if(this._layerConfig[e]){(new d.Util).merge(r,this._layerConfig[e],true)}r.updateTransform()}return r}},{key:"getLayers",value:function t(){return this._layers}},{key:"_updateLayerStatus",value:function t(e){var r=this._layers;var n={};for(var i in r){if(i!=="hover"){n[i]=r[i].elCount;r[i].elCount=0}}for(var o=0;o<e.length;o++){var s=e[o];var a=s.zlevel;var u=r[a];if(u){u.elCount++;if(u.dirty){continue}u.dirty=s.__dirty}}for(var l in r){if(l!=="hover"){if(n[l]!==r[l].elCount){r[l].dirty=true}}}}},{key:"refreshShapes",value:function t(e,r){for(var n=0,i=e.length;n<i;n++){var o=e[n];this.storage.mod(o.id)}this.refresh(r);return this}},{key:"clear",value:function t(){for(var e in this._layers){if(e==="hover"){continue}this._layers[e].clear()}return this}},{key:"modLayer",value:function t(e,r){if(r){if(!this._layerConfig[e]){this._layerConfig[e]=r}else{(new d.Util).merge(this._layerConfig[e],r,true)}var n=this._layers[e];if(n){(new d.Util).merge(n,this._layerConfig[e],true)}}}},{key:"delLayer",value:function t(e){var r=this._layers[e];if(!r){return}this.modLayer(e,{position:r.position,rotation:r.rotation,scale:r.scale});r.dom.parentNode.removeChild(r.dom);delete this._layers[e];this._zlevelList.splice((new d.Util).indexOf(this._zlevelList,e),1)}},{key:"refreshHover",value:function t(){this.clearHover();var e=this.storage.getHoverShapes(true);for(var r=0,n=e.length;r<n;r++){this._brushHover(e[r])}this.storage.delHover();return this}},{key:"clearHover",value:function t(){var e=this._layers.hover;e&&e.clear();return this}},{key:"resize",value:function t(){var e=this._domRoot;e.style.display="none";var r=this._getWidth();var n=this._getHeight();e.style.display="";if(this._width!==r||n!==this._height){this._width=r;this._height=n;e.style.width=r+"px";e.style.height=n+"px";for(var i in this._layers){this._layers[i].resize(r,n)}this.refresh(null,true)}return this}},{key:"clearLayer",value:function t(e){var r=this._layers[e];if(r){r.clear()}}},{key:"dispose",value:function t(){this.root.innerHTML="";this.root=null;this.storage=null;this._domRoot=null;this._layers=null}},{key:"getDomHover",value:function t(){return this._layers.hover.dom}},{key:"toDataURL",value:function e(r,n,i){var o=t.createDom(x(),"canvas",this);this._bgDom.appendChild(o);var s=o.getContext("2d");t.devicePixelRatio!==1&&s.scale(t.devicePixelRatio,t.devicePixelRatio);s.fillStyle=n||"#fff";s.rect(0,0,this._width*t.devicePixelRatio,this._height*t.devicePixelRatio);s.fill();var a=this;this.storage.iterShape(function(t){if(!t.invisible){if(!t.onbrush||t.onbrush&&!t.onbrush(s,false)){if(v.Config.catchBrushException){try{t.brush(s,false,a.updatePainter)}catch(t){}}else{t.brush(s,false,a.updatePainter)}}}},{normal:"up",update:true});var u=o.toDataURL(r,i);s=null;this._bgDom.removeChild(o);return u}},{key:"getWidth",value:function t(){return this._width}},{key:"getHeight",value:function t(){return this._height}},{key:"_getWidth",value:function t(){var e=this.root;var r=e.currentStyle||document.defaultView.getComputedStyle(e);return((e.clientWidth||parseInt(r.width,10))-parseInt(r.paddingLeft,10)-parseInt(r.paddingRight,10)).toFixed(0)-0}},{key:"_getHeight",value:function t(){var e=this.root;var r=e.currentStyle||document.defaultView.getComputedStyle(e);return((e.clientHeight||parseInt(r.height,10))-parseInt(r.paddingTop,10)-parseInt(r.paddingBottom,10)).toFixed(0)-0}},{key:"_brushHover",value:function t(e){var r=this._layers.hover.ctx;if(!e.onbrush||e.onbrush&&!e.onbrush(r,true)){var n=this.getLayer(e.zlevel);if(n.needTransform){r.save();n.setTransform(r)}if(v.Config.catchBrushException){try{e.brush(r,true,this.updatePainter)}catch(t){}}else{e.brush(r,true,this.updatePainter)}if(n.needTransform){r.restore()}}}},{key:"_shapeToImage",value:function t(e,r,n,i,o){var s=document.createElement("canvas");var a=s.getContext("2d");var u=o||window.devicePixelRatio||1;s.style.width=n+"px";s.style.height=i+"px";s.setAttribute("width",n*u);s.setAttribute("height",i*u);a.clearRect(0,0,n*u,i*u);var l={position:r.position,rotation:r.rotation,scale:r.scale};r.position=[0,0,0];r.rotation=0;r.scale=[1,1];if(r){r.brush(a,false)}var c=new m.SmicImage({id:e,style:{x:0,y:0,image:s}});if(l.position!=null){c.position=r.position=l.position}if(l.rotation!=null){c.rotation=r.rotation=l.rotation}if(l.scale!=null){c.scale=r.scale=l.scale}return c}},{key:"_createShapeToImageProcessor",value:function e(){var r=this;return function(e,n,i,o){return r._shapeToImage(e,n,i,o,t.devicePixelRatio)}}},{key:"updateHoverLayer",value:function t(e){if(!(e instanceof Array)){return this}this.clearHover();this.storage.delHover();for(var r=0;r<e.length;r++){this.storage.addHover(e[r]);this._brushHover(e[r])}}}],[{key:"createDom",value:function e(r,n,i){var o=document.createElement(n);var s=i._width;var a=i._height;o.style.position="absolute";o.style.left=0;o.style.top=0;o.style.width=s+"px";o.style.height=a+"px";o.setAttribute("width",s*t.devicePixelRatio);o.setAttribute("height",a*t.devicePixelRatio);o.setAttribute("id",r);return o}}]);return t}();var w=function(t){(0,u.default)(e,t);function e(t,r){(0,c.default)(this,e);var n=(0,s.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r));n.dom=null;n.domBack=null;n.ctxBack=null;n.painter=r;n.unusedCount=0;n.config=null;n.dirty=true;n.elCount=0;n.clearColor=0;n.motionBlur=false;n.lastFrameAlpha=.7;n.zoomable=false;n.panable=false;n.maxZoom=Infinity;n.minZoom=0;n.ctx=null;n.dom=S.createDom(x(),"canvas",r);n.dom.onselectstart=o;n.dom.style["-webkit-user-select"]="none";n.dom.style["user-select"]="none";n.dom.style["-webkit-touch-callout"]="none";function o(){return false}n.CLASS_NAME="Zondy.LevelRenderer.Painter.Layer";return n}(0,f.default)(e,[{key:"destroy",value:function t(){this.dom=null;this.domBack=null;this.ctxBack=null;this.painter=null;this.unusedCount=null;this.config=null;this.dirty=null;this.elCount=null;this.clearColor=null;this.motionBlur=null;this.lastFrameAlpha=null;this.zoomable=null;this.panable=null;this.maxZoom=null;this.minZoom=null;this.ctx=null;y.Transformable.destroy.apply(this,arguments)}},{key:"initContext",value:function t(){this.ctx=this.dom.getContext("2d");if(S.devicePixelRatio!==1){this.ctx.scale(S.devicePixelRatio,S.devicePixelRatio)}}},{key:"createBackBuffer",value:function t(){this.domBack=S.createDom(x(),"canvas",this.painter);this.ctxBack=this.domBack.getContext("2d");if(S.devicePixelRatio!==1){this.ctxBack.scale(S.devicePixelRatio,S.devicePixelRatio)}}},{key:"resize",value:function t(e,r){this.dom.style.width=e+"px";this.dom.style.height=r+"px";this.dom.setAttribute("width",e*S.devicePixelRatio);this.dom.setAttribute("height",r*S.devicePixelRatio);if(S.devicePixelRatio!==1){this.ctx.scale(S.devicePixelRatio,S.devicePixelRatio)}if(this.domBack){this.domBack.setAttribute("width",e*S.devicePixelRatio);this.domBack.setAttribute("height",r*S.devicePixelRatio);if(S.devicePixelRatio!==1){this.ctxBack.scale(S.devicePixelRatio,S.devicePixelRatio)}}}},{key:"clear",value:function t(){var e=this.dom;var r=this.ctx;var n=e.width;var i=e.height;var o=this.clearColor;var s=this.motionBlur;var a=this.lastFrameAlpha;if(s){if(!this.domBack){this.createBackBuffer()}this.ctxBack.globalCompositeOperation="copy";this.ctxBack.drawImage(e,0,0,n/S.devicePixelRatio,i/S.devicePixelRatio)}if(o){r.save();r.fillStyle=this.config.clearColor;r.fillRect(0,0,n/S.devicePixelRatio,i/S.devicePixelRatio);r.restore()}else{r.clearRect(0,0,n/S.devicePixelRatio,i/S.devicePixelRatio)}if(s){var u=this.domBack;r.save();r.globalAlpha=a;r.drawImage(u,0,0,n/S.devicePixelRatio,i/S.devicePixelRatio);r.restore()}}}]);return e}(y.Transformable);e.Painter=S;b.LevelRenderer.Painter=S;e.PaintLayer=w;b.LevelRenderer.PaintLayer=w},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Handler=undefined;var n=r(11);var i=g(n);var o=r(5);var s=g(o);var a=r(6);var u=g(a);var l=r(12);var c=g(l);var h=r(13);var f=g(h);var p=r(7);var d=r(80);var y=r(179);var v=r(28);function g(t){return t&&t.__esModule?t:{default:t}}var m=p.Common.Zondy;var _=function(t){(0,f.default)(e,t);function e(t,r,n){(0,s.default)(this,e);var o=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r,n));o.root=t;o.storage=r;o.painter=n;o._lastX=0;o._lastY=0;o._mouseX=0;o._mouseY=0;o._findHover=null;o._domHover=null;o._findHover=l(f,o);o._domHover=n.getDomHover();o.CLASS_NAME="Zondy.LevelRenderer.Handler";var a={resize:function t(e){e=e||window.event;this._lastHover=null;this._isMouseDown=0;this.dispatch(y.Config.EVENT.RESIZE,e)},click:function t(e){e=this._zrenderEventFixed(e);var r=this._lastHover;if(r&&r.clickable||!r){if(this._clickThreshold<10){this._dispatchAgency(r,y.Config.EVENT.CLICK,e)}}this._mousemoveHandler(e)},dblclick:function t(e){e=e||window.event;e=this._zrenderEventFixed(e);var r=this._lastHover;if(r&&r.clickable||!r){if(this._clickThreshold<5){this._dispatchAgency(r,y.Config.EVENT.DBLCLICK,e)}}this._mousemoveHandler(e)},mousewheel:function t(e){e=this._zrenderEventFixed(e);var r=e.wheelDelta||-e.detail;var n=r>0?1.1:1/1.1;var i=this.painter.getLayers();var o=false;for(var s in i){if(s!=="hover"){var a=i[s];var u=a.position;if(a.zoomable){a.__zoom=a.__zoom||1;var l=a.__zoom;l*=n;l=Math.max(Math.min(a.maxZoom,l),a.minZoom);n=l/a.__zoom;a.__zoom=l;u[0]-=(this._mouseX-u[0])*(n-1);u[1]-=(this._mouseY-u[1])*(n-1);a.scale[0]*=n;a.scale[1]*=n;a.dirty=true;o=true}}}if(o){this.painter.refresh()}this._dispatchAgency(this._lastHover,y.Config.EVENT.MOUSEWHEEL,e);this._mousemoveHandler(e)},mousemove:function t(e){this._clickThreshold++;e=this._zrenderEventFixed(e);this._lastX=this._mouseX;this._lastY=this._mouseY;this._mouseX=v.SUtil.Util_event.getX(e);this._mouseY=v.SUtil.Util_event.getY(e);var r=this._mouseX-this._lastX;var n=this._mouseY-this._lastY;this._processDragStart(e);this._hasfound=0;this._event=e;this._iterateAndFindHover();if(!this._hasfound){if(!this._draggingTarget||this._lastHover&&this._lastHover!==this._draggingTarget){this._processOutShape(e);this._processDragLeave(e)}this._lastHover=null;this.storage.delHover();this.painter.clearHover()}var i="";if(this._draggingTarget){this.storage.drift(this._draggingTarget.id,r,n);this._draggingTarget.modSelf();this.storage.addHover(this._draggingTarget)}else if(this._isMouseDown){var o=this.painter.getLayers();var s=false;for(var a in o){if(a!=="hover"){var u=o[a];if(u.panable){i="move";u.position[0]+=r;u.position[1]+=n;s=true;u.dirty=true}}}if(s){this.painter.refresh()}}if(this._draggingTarget||this._hasfound&&this._lastHover.draggable){i="move"}else if(this._hasfound&&this._lastHover.clickable){i="pointer"}this.root.style.cursor=i;this._dispatchAgency(this._lastHover,y.Config.EVENT.MOUSEMOVE,e);if(this._draggingTarget||this._hasfound||this.storage.hasHoverShape()){this.painter.refreshHover()}},mouseout:function t(e){e=this._zrenderEventFixed(e);var r=e.toElement||e.relatedTarget;if(r!==this.root){while(r&&r.nodeType!==9){if(r===this.root){this._mousemoveHandler(e);return}r=r.parentNode}}e.zrenderX=this._lastX;e.zrenderY=this._lastY;this.root.style.cursor="";this._isMouseDown=0;this._processOutShape(e);this._processDrop(e);this._processDragEnd(e);this.painter.refreshHover();this.dispatch(y.Config.EVENT.GLOBALOUT,e)},mousedown:function t(e){this._clickThreshold=0;if(this._lastDownButton===2){this._lastDownButton=e.button;this._mouseDownTarget=null;return}this._lastMouseDownMoment=new Date;e=this._zrenderEventFixed(e);this._isMouseDown=1;this._mouseDownTarget=this._lastHover;this._dispatchAgency(this._lastHover,y.Config.EVENT.MOUSEDOWN,e);this._lastDownButton=e.button},mouseup:function t(e){e=this._zrenderEventFixed(e);this.root.style.cursor="";this._isMouseDown=0;this._mouseDownTarget=null;this._dispatchAgency(this._lastHover,y.Config.EVENT.MOUSEUP,e);this._processDrop(e);this._processDragEnd(e)},touchstart:function t(e){e=this._zrenderEventFixed(e,true);this._lastTouchMoment=new Date;this._mobildFindFixed(e);this._mousedownHandler(e)},touchmove:function t(e){e=this._zrenderEventFixed(e,true);this._mousemoveHandler(e);if(this._isDragging){v.SUtil.Util_event.stop(e)}},touchend:function t(e){e=this._zrenderEventFixed(e,true);this._mouseupHandler(e);var r=new Date;if(r-this._lastTouchMoment<y.Config.EVENT.touchClickDelay){this._mobildFindFixed(e);this._clickHandler(e);if(r-this._lastClickMoment<y.Config.EVENT.touchClickDelay/2){this._dblclickHandler(e);if(this._lastHover&&this._lastHover.clickable){v.SUtil.Util_event.stop(e)}}this._lastClickMoment=r}this.painter.clearHover()}};h(o);if(window.addEventListener){window.addEventListener("resize",o._resizeHandler);if(v.SUtil.Util_env.os.tablet||v.SUtil.Util_env.os.phone){t.addEventListener("touchstart",o._touchstartHandler);t.addEventListener("touchmove",o._touchmoveHandler);t.addEventListener("touchend",o._touchendHandler)}else{t.addEventListener("click",o._clickHandler);t.addEventListener("dblclick",o._dblclickHandler);t.addEventListener("mousewheel",o._mousewheelHandler);t.addEventListener("mousemove",o._mousemoveHandler);t.addEventListener("mousedown",o._mousedownHandler);t.addEventListener("mouseup",o._mouseupHandler)}t.addEventListener("DOMMouseScroll",o._mousewheelHandler);t.addEventListener("mouseout",o._mouseoutHandler)}else{window.attachEvent("onresize",o._resizeHandler);t.attachEvent("onclick",o._clickHandler);t.ondblclick=o._dblclickHandler;t.attachEvent("onmousewheel",o._mousewheelHandler);t.attachEvent("onmousemove",o._mousemoveHandler);t.attachEvent("onmouseout",o._mouseoutHandler);t.attachEvent("onmousedown",o._mousedownHandler);t.attachEvent("onmouseup",o._mouseupHandler)}function u(t,e){return function(r){return t.call(e,r)}}function l(t,e){return function(r,n,i){return t.call(e,r,n,i)}}function h(t){var e=["resize","click","dblclick","mousewheel","mousemove","mouseout","mouseup","mousedown","touchstart","touchend","touchmove"];var r=e.length;while(r--){var n=e[r];t["_"+n+"Handler"]=u(a[n],t)}}function f(t,e,r){var n=this;if(n._draggingTarget&&n._draggingTarget.id===t.id||t.isSilent()){return false}var i=n._event;if(t.isCover(e,r)){if(t.hoverable){if(t.isHoverByRefDataID&&t.isHoverByRefDataID===true){if(t.refDataID){var o=t.refDataID;var s=null;if(t.refDataHoverGroup){s=t.refDataHoverGroup}var a=n.storage._shapeList;for(var u=0,l=a.length;u<l;u++){var c=a[u];if(c.refDataID&&o===c.refDataID){if(s){if(c.refDataHoverGroup&&s===c.refDataHoverGroup){n.storage.addHover(c)}}else{n.storage.addHover(c)}}}}}else{n.storage.addHover(t)}}var h=t.parent;while(h){if(h.clipShape&&!h.clipShape.isCover(n._mouseX,n._mouseY)){return false}h=h.parent}if(n._lastHover!==t){n._processOutShape(i);n._processDragLeave(i);n._lastHover=t;n._processDragEnter(i)}n._processOverShape(i);n._processDragOver(i);n._hasfound=1;return true}return false}return o}(0,u.default)(e,[{key:"destroy",value:function t(){this.dispose();this._lastX=null;this._lastY=null;this._mouseX=null;this._mouseY=null;this._findHover=null;d.Eventful.prototype.destroy.apply(this,arguments)}},{key:"on",value:function t(e,r){this.bind(e,r);return this}},{key:"un",value:function t(e,r){this.unbind(e,r);return this}},{key:"trigger",value:function t(e,r){var n=y.Config.EVENT;switch(e){case n.RESIZE:case n.CLICK:case n.DBLCLICK:case n.MOUSEWHEEL:case n.MOUSEMOVE:case n.MOUSEDOWN:case n.MOUSEUP:case n.MOUSEOUT:this["_"+e+"Handler"](r);break}}},{key:"dispose",value:function t(){var e=this.root;if(window.removeEventListener){window.removeEventListener("resize",this._resizeHandler);if(v.SUtil.Util_env.os.tablet||v.SUtil.Util_env.os.phone){e.removeEventListener("touchstart",this._touchstartHandler);e.removeEventListener("touchmove",this._touchmoveHandler);e.removeEventListener("touchend",this._touchendHandler)}else{e.removeEventListener("click",this._clickHandler);e.removeEventListener("dblclick",this._dblclickHandler);e.removeEventListener("mousewheel",this._mousewheelHandler);e.removeEventListener("mousemove",this._mousemoveHandler);e.removeEventListener("mousedown",this._mousedownHandler);e.removeEventListener("mouseup",this._mouseupHandler)}e.removeEventListener("DOMMouseScroll",this._mousewheelHandler);e.removeEventListener("mouseout",this._mouseoutHandler)}else{window.detachEvent("onresize",this._resizeHandler);e.detachEvent("onclick",this._clickHandler);e.detachEvent("dblclick",this._dblclickHandler);e.detachEvent("onmousewheel",this._mousewheelHandler);e.detachEvent("onmousemove",this._mousemoveHandler);e.detachEvent("onmouseout",this._mouseoutHandler);e.detachEvent("onmousedown",this._mousedownHandler);e.detachEvent("onmouseup",this._mouseupHandler)}this.root=null;this._domHover=null;this.storage=null;this.painter=null;this.un()}},{key:"_processDragStart",value:function t(e){var r=this._lastHover;if(this._isMouseDown&&r&&r.draggable&&!this._draggingTarget&&this._mouseDownTarget===r){if(r.dragEnableTime&&new Date-this._lastMouseDownMoment<r.dragEnableTime){return}var n=r;this._draggingTarget=n;this._isDragging=1;n.invisible=true;this.storage.mod(n.id);this._dispatchAgency(n,y.Config.EVENT.DRAGSTART,e);this.painter.refresh()}}},{key:"_processDragEnter",value:function t(e){if(this._draggingTarget){this._dispatchAgency(this._lastHover,y.Config.EVENT.DRAGENTER,e,this._draggingTarget)}}},{key:"_processDragOver",value:function t(e){if(this._draggingTarget){this._dispatchAgency(this._lastHover,y.Config.EVENT.DRAGOVER,e,this._draggingTarget)}}},{key:"_processDragLeave",value:function t(e){if(this._draggingTarget){this._dispatchAgency(this._lastHover,y.Config.EVENT.DRAGLEAVE,e,this._draggingTarget)}}},{key:"_processDrop",value:function t(e){if(this._draggingTarget){this._draggingTarget.invisible=false;this.storage.mod(this._draggingTarget.id);this.painter.refresh();this._dispatchAgency(this._lastHover,y.Config.EVENT.DROP,e,this._draggingTarget)}}},{key:"_processDragEnd",value:function t(e){if(this._draggingTarget){this._dispatchAgency(this._draggingTarget,y.Config.EVENT.DRAGEND,e);this._lastHover=null}this._isDragging=0;this._draggingTarget=null}},{key:"_processOverShape",value:function t(e){this._dispatchAgency(this._lastHover,y.Config.EVENT.MOUSEOVER,e)}},{key:"_processOutShape",value:function t(e){this._dispatchAgency(this._lastHover,y.Config.EVENT.MOUSEOUT,e)}},{key:"_dispatchAgency",value:function t(e,r,n,i){var o="on"+r;var s={type:r,event:n,target:e,cancelBubble:false};var a=e;if(i){s.dragged=i}while(a){a[o]&&(s.cancelBubble=a[o](s));a.dispatch(r,s);a=a.parent;if(s.cancelBubble){break}}if(e){if(!s.cancelBubble){this.dispatch(r,s)}}else if(!i){this.dispatch(r,{type:r,event:n})}}},{key:"_iterateAndFindHover",value:function t(){var e=v.SUtil.Util_matrix.create();var r=this.storage.getShapeList();var n;var i;var o=[0,0];for(var s=r.length-1;s>=0;s--){var a=r[s];if(n!==a.zlevel){i=this.painter.getLayer(a.zlevel,i);o[0]=this._mouseX;o[1]=this._mouseY;if(i.needTransform){v.SUtil.Util_matrix.invert(e,i.transform);v.SUtil.Util_vector.applyTransform(o,o,e)}}if(this._findHover(a,o[0],o[1])){break}}}},{key:"_mobildFindFixed",value:function t(e){var r=[{x:10},{x:-20},{x:10,y:10},{y:-20}];this._lastHover=null;this._mouseX=e.zrenderX;this._mouseY=e.zrenderY;this._event=e;this._iterateAndFindHover();for(var n=0;!this._lastHover&&n<r.length;n++){var i=r[n];i.x&&(this._mouseX+=i.x);i.y&&(this._mouseX+=i.y);this._iterateAndFindHover()}if(this._lastHover){e.zrenderX=this._mouseX;e.zrenderY=this._mouseY}}},{key:"_zrenderEventFixed",value:function t(e,r){if(e.zrenderFixed){return e}if(!r){e=e||window.event;var n=e.toElement||e.relatedTarget||e.srcElement||e.target;if(n&&n!==this._domHover){e.zrenderX=(typeof e.offsetX!="undefined"?e.offsetX:e.layerX)+n.offsetLeft;e.zrenderY=(typeof e.offsetY!="undefined"?e.offsetY:e.layerY)+n.offsetTop}}else{var i=e.type!=="touchend"?e.targetTouches[0]:e.changedTouches[0];if(i){var o=this.root.getBoundingClientRect();e.zrenderX=i.clientX-o.left;e.zrenderY=i.clientY-o.top}}e.zrenderFixed=1;return e}},{key:"getLastHoverOne",value:function t(){if(this._lastHover){return this._lastHover}return null}}]);return e}(d.Eventful);e.Handler=_;m.LevelRenderer.Handler=_},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Animator=e.Animation=undefined;var n=r(79);var i=b(n);var o=r(11);var s=b(o);var a=r(5);var u=b(a);var l=r(6);var c=b(l);var h=r(12);var f=b(h);var p=r(13);var d=b(p);var y=r(7);var v=r(67);var g=r(80);var m=r(300);var _=r(28);function b(t){return t&&t.__esModule?t:{default:t}}var x=y.Common.Zondy,S=y.Common.extend;var w=function(t){(0,d.default)(e,t);function e(t){(0,u.default)(this,e);var r=(0,f.default)(this,(e.__proto__||(0,s.default)(e)).call(this,t));t=t||{};r.stage={};r.onframe=function(){};r._clips=[];r._running=false;r._time=0;S(r,t);r.CLASS_NAME="Zondy.LevelRenderer.Animation";return r}(0,c.default)(e,[{key:"add",value:function t(e){this._clips.push(e)}},{key:"remove",value:function t(e){var r=(new v.Util).indexOf(this._clips,e);if(r>=0){this._clips.splice(r,1)}}},{key:"_update",value:function t(){var e=(new Date).getTime();var r=e-this._time;var n=this._clips;var i=n.length;var o=[];var s=[];for(var a=0;a<i;a++){var u=n[a];var l=u.step(e);if(l){o.push(l);s.push(u)}}if(this.stage.update){this.stage.update()}for(var c=0;c<i;){if(n[c]._needsRemove){n[c]=n[i-1];n.pop();i--}else{c++}}i=o.length;for(var h=0;h<i;h++){s[h].fire(o[h])}this._time=e;this.onframe(r);this.dispatch("frame",r)}},{key:"start",value:function t(){var e=window.requestAnimationFrame||window.msRequestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(t){setTimeout(t,16)};var r=this;this._running=true;function n(){if(r._running){r._update();e(n)}}this._time=(new Date).getTime();e(n)}},{key:"stop",value:function t(){this._running=false}},{key:"clear",value:function t(){this._clips=[]}},{key:"animate",value:function t(e,r){r=r||{};var n=new C(e,r.loop,r.getter,r.setter);n.animation=this;return n}}],[{key:"_interpolateNumber",value:function t(e,r,n){return(r-e)*n+e}},{key:"_interpolateArray",value:function t(r,n,i,o,s){var a=r.length;if(s===1){for(var u=0;u<a;u++){o[u]=e._interpolateNumber(r[u],n[u],i)}}else{var l=r[0].length;for(var c=0;c<a;c++){for(var h=0;h<l;h++){o[c][h]=e._interpolateNumber(r[c][h],n[c][h],i)}}}}},{key:"_isArrayLike",value:function t(e){switch(typeof e==="undefined"?"undefined":(0,i.default)(e)){case"undefined":case"string":return false}return typeof e.length!=="undefined"}},{key:"_catmullRomInterpolateArray",value:function t(r,n,i,o,s,a,u,l,c){var h=r.length;if(c===1){for(var f=0;f<h;f++){l[f]=e._catmullRomInterpolate(r[f],n[f],i[f],o[f],s,a,u)}}else{var p=r[0].length;for(var d=0;d<h;d++){for(var y=0;y<p;y++){l[d][y]=e._catmullRomInterpolate(r[d][y],n[d][y],i[d][y],o[d][y],s,a,u)}}}}},{key:"_catmullRomInterpolate",value:function t(e,r,n,i,o,s,a){var u=(n-e)*.5;var l=(i-r)*.5;return(2*(r-n)+u+l)*a+(-3*(r-n)-2*u-l)*s+u*o+r}},{key:"_cloneValue",value:function t(r){var n=Array.prototype.slice;if(e._isArrayLike(r)){var i=r.length;if(e._isArrayLike(r[0])){var o=[];for(var s=0;s<i;s++){o.push(n.call(r[s]))}return o}else{return n.call(r)}}else{return r}}},{key:"rgba2String",value:function t(e){e[0]=Math.floor(e[0]);e[1]=Math.floor(e[1]);e[2]=Math.floor(e[2]);return"rgba("+e.join(",")+")"}}]);return e}(g.Eventful);var C=function(){function t(e,r,n,i){(0,u.default)(this,t);this._tracks={};this._target=e;this._loop=r||false;this._getter=n||o;this._setter=i||s;this._clipCount=0;this._delay=0;this._doneList=[];this._onframeList=[];this._clipList=[];this.CLASS_NAME="Zondy.LevelRenderer.Animation.Animator";function o(t,e){return t[e]}function s(t,e,r){t[e]=r}}(0,c.default)(t,[{key:"when",value:function t(e,r){for(var n in r){if(!this._tracks[n]){this._tracks[n]=[];if(e!==0){this._tracks[n].push({time:0,value:w._cloneValue(this._getter(this._target,n))})}}this._tracks[n].push({time:parseInt(e,10),value:r[n]})}return this}},{key:"during",value:function t(e){this._onframeList.push(e);return this}},{key:"start",value:function t(e){var r=this;var n=this._setter;var i=this._getter;var o=r._onframeList.length;var s=e==="spline";var a=function t(){r._clipCount--;if(r._clipCount===0){r._tracks={};var e=r._doneList.length;for(var n=0;n<e;n++){r._doneList[n].call(r)}}};var u=function t(u,l){var c=u.length;if(!c){return}var h=u[0].value;var f=w._isArrayLike(h);var p=false;var d=f&&w._isArrayLike(h[0])?2:1;u.sort(function(t,e){return t.time-e.time});var y=u[c-1].time;var v=[];var g=[];for(var b=0;b<c;b++){v.push(u[b].time/y);var x=u[b].value;if(typeof x=="string"){x=_.SUtil.Util_color.toArray(x);if(x.length===0){x[0]=x[1]=x[2]=0;x[3]=1}p=true}g.push(x)}var S=0;var C=0;var I;var E;var P;var M;var L;var N;var T;if(p){var O=[0,0,0,0]}var A=function t(e,a){if(a<C){I=Math.min(S+1,c-1);for(E=I;E>=0;E--){if(v[E]<=a){break}}E=Math.min(E,c-2)}else{for(E=S;E<c;E++){if(v[E]>a){break}}E=Math.min(E-1,c-2)}S=E;C=a;var u=v[E+1]-v[E];if(u===0){return}else{P=(a-v[E])/u}if(s){L=g[E];M=g[E===0?E:E-1];N=g[E>c-2?c-1:E+1];T=g[E>c-3?c-1:E+2];if(f){w._catmullRomInterpolateArray(M,L,N,T,P,P*P,P*P*P,i(e,l),d)}else{var h=void 0;if(p){h=w.rgba2String(O)}else{h=w._catmullRomInterpolate(M,L,N,T,P,P*P,P*P*P)}n(e,l,h)}}else{if(f){w._interpolateArray(g[E],g[E+1],P,i(e,l),d)}else{var y=void 0;if(p){w._interpolateArray(g[E],g[E+1],P,O,1);y=w.rgba2String(O)}else{y=w._interpolateNumber(g[E],g[E+1],P)}n(e,l,y)}}for(E=0;E<o;E++){r._onframeList[E](e,a)}};var R=new m.Clip({target:r._target,life:y,loop:r._loop,delay:r._delay,onframe:A,ondestroy:a});if(e&&e!=="spline"){R.easing=e}r._clipList.push(R);r._clipCount++;r.animation.add(R)};for(var l in this._tracks){u(this._tracks[l],l)}return this}},{key:"stop",value:function t(){for(var e=0;e<this._clipList.length;e++){var r=this._clipList[e];this.animation.remove(r)}this._clipList=[]}},{key:"delay",value:function t(e){this._delay=e;return this}},{key:"done",value:function t(e){if(e){this._doneList.push(e)}return this}}]);return t}();e.Animation=w;x.LevelRenderer.Animation=w;e.Animator=C;x.LevelRenderer.Animation.Animator=C},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Clip=undefined;var n=r(5);var i=l(n);var o=r(6);var s=l(o);var a=r(7);var u=r(301);function l(t){return t&&t.__esModule?t:{default:t}}var c=a.Common.Zondy;var h=function(){function t(e){(0,i.default)(this,t);this._targetPool=e.target||{};if(!(this._targetPool instanceof Array)){this._targetPool=[this._targetPool]}this._life=e.life||1e3;this._delay=e.delay||0;this._startTime=(new Date).getTime()+this._delay;this._endTime=this._startTime+this._life*1e3;this.loop=typeof e.loop=="undefined"?false:e.loop;this.gap=e.gap||0;this.easing=e.easing||"Linear";this.onframe=e.onframe;this.ondestroy=e.ondestroy;this.onrestart=e.onrestart;this.CLASS_NAME="Zondy.LevelRenderer.Animation.Clip"}(0,s.default)(t,[{key:"destroy",value:function t(){}},{key:"step",value:function t(e){var r=new u.Easing;var n=(e-this._startTime)/this._life;if(n<0){return}n=Math.min(n,1);var i=typeof this.easing=="string"?r[this.easing]:this.easing;var o=typeof i==="function"?i(n):n;this.fire("frame",o);if(n===1){if(this.loop){this.restart();return"restart"}this._needsRemove=true;return"destroy"}return null}},{key:"restart",value:function t(){var e=(new Date).getTime();var r=(e-this._startTime)%this._life;this._startTime=(new Date).getTime()-r+this.gap}},{key:"fire",value:function t(e,r){for(var n=0,i=this._targetPool.length;n<i;n++){if(this["on"+e]){this["on"+e](this._targetPool[n],r)}}}}]);return t}();e.Clip=h;c.LevelRenderer.Animation.Clip=h},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Easing=undefined;var n=r(5);var i=u(n);var o=r(6);var s=u(o);var a=r(7);function u(t){return t&&t.__esModule?t:{default:t}}var l=a.Common.Zondy;var c=function(){function t(){(0,i.default)(this,t);this.CLASS_NAME="Zondy.LevelRenderer.Animation.Easing"}(0,s.default)(t,[{key:"destroy",value:function t(){}},{key:"Linear",value:function t(e){return e}},{key:"QuadraticIn",value:function t(e){return e*e}},{key:"QuadraticOut",value:function t(e){return e*(2-e)}},{key:"QuadraticInOut",value:function t(e){if((e*=2)<1){return.5*e*e}return-.5*(--e*(e-2)-1)}},{key:"CubicIn",value:function t(e){return e*e*e}},{key:"CubicOut",value:function t(e){return--e*e*e+1}},{key:"CubicInOut",value:function t(e){if((e*=2)<1){return.5*e*e*e}return.5*((e-=2)*e*e+2)}},{key:"QuarticIn",value:function t(e){return e*e*e*e}},{key:"QuarticOut",value:function t(e){return 1- --e*e*e*e}},{key:"QuarticInOut",value:function t(e){if((e*=2)<1){return.5*e*e*e*e}return-.5*((e-=2)*e*e*e-2)}},{key:"QuinticIn",value:function t(e){return e*e*e*e*e}},{key:"QuinticOut",value:function t(e){return--e*e*e*e*e+1}},{key:"QuinticInOut",value:function t(e){if((e*=2)<1){return.5*e*e*e*e*e}return.5*((e-=2)*e*e*e*e+2)}},{key:"SinusoidalIn",value:function t(e){return 1-Math.cos(e*Math.PI/2)}},{key:"SinusoidalOut",value:function t(e){return Math.sin(e*Math.PI/2)}},{key:"SinusoidalInOut",value:function t(e){return.5*(1-Math.cos(Math.PI*e))}},{key:"ExponentialIn",value:function t(e){return e===0?0:Math.pow(1024,e-1)}},{key:"ExponentialOut",value:function t(e){return e===1?1:1-Math.pow(2,-10*e)}},{key:"ExponentialInOut",value:function t(e){if(e===0){return 0}if(e===1){return 1}if((e*=2)<1){return.5*Math.pow(1024,e-1)}return.5*(-Math.pow(2,-10*(e-1))+2)}},{key:"CircularIn",value:function t(e){return 1-Math.sqrt(1-e*e)}},{key:"CircularOut",value:function t(e){return Math.sqrt(1- --e*e)}},{key:"CircularInOut",value:function t(e){if((e*=2)<1){return-.5*(Math.sqrt(1-e*e)-1)}return.5*(Math.sqrt(1-(e-=2)*e)+1)}},{key:"ElasticIn",value:function t(e){var r;var n=.1;var i=.4;if(e===0){return 0}if(e===1){return 1}if(!n||n<1){n=1;r=i/4}else{r=i*Math.asin(1/n)/(2*Math.PI)}return-(n*Math.pow(2,10*(e-=1))*Math.sin((e-r)*(2*Math.PI)/i))}},{key:"ElasticOut",value:function t(e){var r;var n=.1;var i=.4;if(e===0){return 0}if(e===1){return 1}if(!n||n<1){n=1;r=i/4}else{r=i*Math.asin(1/n)/(2*Math.PI)}return n*Math.pow(2,-10*e)*Math.sin((e-r)*(2*Math.PI)/i)+1}},{key:"ElasticInOut",value:function t(e){var r;var n=.1;var i=.4;if(e===0){return 0}if(e===1){return 1}if(!n||n<1){n=1;r=i/4}else{r=i*Math.asin(1/n)/(2*Math.PI)}if((e*=2)<1){return-.5*(n*Math.pow(2,10*(e-=1))*Math.sin((e-r)*(2*Math.PI)/i))}return n*Math.pow(2,-10*(e-=1))*Math.sin((e-r)*(2*Math.PI)/i)*.5+1}},{key:"BackIn",value:function t(e){var r=1.70158;return e*e*((r+1)*e-r)}},{key:"BackOut",value:function t(e){var r=1.70158;return--e*e*((r+1)*e+r)+1}},{key:"BackInOut",value:function t(e){var r=1.70158*1.525;if((e*=2)<1){return.5*(e*e*((r+1)*e-r))}return.5*((e-=2)*e*((r+1)*e+r)+2)}},{key:"BounceIn",value:function t(e){return 1-this.BounceOut(1-e)}},{key:"BounceOut",value:function t(e){if(e<1/2.75){return 7.5625*e*e}else if(e<2/2.75){return 7.5625*(e-=1.5/2.75)*e+.75}else if(e<2.5/2.75){return 7.5625*(e-=2.25/2.75)*e+.9375}else{return 7.5625*(e-=2.625/2.75)*e+.984375}}},{key:"BounceInOut",value:function t(e){if(e<.5){return this.BounceIn(e*2)*.5}return this.BounceOut(e*2-1)*.5+.5}}]);return t}();e.Easing=c;l.LevelRenderer.Animation.Easing=c},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Rectangle=undefined;var n=r(11);var i=g(n);var o=r(5);var s=g(o);var a=r(6);var u=g(a);var l=r(12);var c=g(l);var h=r(14);var f=g(h);var p=r(13);var d=g(p);var y=r(7);var v=r(40);function g(t){return t&&t.__esModule?t:{default:t}}var m=y.Common.Zondy;var _=function(t){(0,d.default)(e,t);function e(t,r,n,o){(0,s.default)(this,e);var a=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r,n,o));a.x=!isNaN(t)?t:0;a.y=!isNaN(t)?r:0;a.width=!isNaN(n)?n:0;a.height=!isNaN(o)?o:0;a.CLASS_NAME="Zondy.Feature.ShapeParameters.Rectangle";return a}(0,u.default)(e,[{key:"destroy",value:function t(){this.x=null;this.y=null;this.width=null;this.height=null;(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}}]);return e}(v.ShapeParameters);e.Rectangle=_;m.Feature.ShapeParameters.Rectangle=_},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Label=undefined;var n=r(11);var i=g(n);var o=r(5);var s=g(o);var a=r(6);var u=g(a);var l=r(12);var c=g(l);var h=r(14);var f=g(h);var p=r(13);var d=g(p);var y=r(7);var v=r(40);function g(t){return t&&t.__esModule?t:{default:t}}var m=y.Common.Zondy;var _=function(t){(0,d.default)(e,t);function e(t,r,n){(0,s.default)(this,e);var o=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r,n));o.x=t;o.y=r;o.text=n;o.CLASS_NAME="Zondy.Feature.ShapeParameters.Label";return o}(0,u.default)(e,[{key:"destroy",value:function t(){this.x=null;this.y=null;this.text=null;(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}}]);return e}(v.ShapeParameters);e.Label=_;m.Feature.ShapeParameters.Label=_},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Image=undefined;var n=r(11);var i=g(n);var o=r(5);var s=g(o);var a=r(6);var u=g(a);var l=r(12);var c=g(l);var h=r(14);var f=g(h);var p=r(13);var d=g(p);var y=r(7);var v=r(40);function g(t){return t&&t.__esModule?t:{default:t}}var m=y.Common.Zondy;var _=function(t){(0,d.default)(e,t);function e(t,r,n,o,a,u,l,h,f){(0,s.default)(this,e);var p=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r,n,o,a,u,l,h,f));p.x=t;p.y=r;p.image=n;p.width=o;p.height=a;p.sx=u;p.sy=l;p.sWidth=h;p.sHeight=f;p.CLASS_NAME="Zondy.Feature.ShapeParameters.Image";return p}(0,u.default)(e,[{key:"destroy",value:function t(){this.x=null;this.y=null;this.image=null;this.width=null;this.height=null;this.sx=null;this.sy=null;this.sWidth=null;this.sHeight=null;(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}}]);return e}(v.ShapeParameters);e.Image=_;m.Feature.ShapeParameters.Image=_},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.SmicText=undefined;var n=r(11);var i=m(n);var o=r(5);var s=m(o);var a=r(6);var u=m(a);var l=r(12);var c=m(l);var h=r(14);var f=m(h);var p=r(13);var d=m(p);var y=r(7);var v=r(26);var g=r(28);function m(t){return t&&t.__esModule?t:{default:t}}var _=y.Common.Zondy;var b=function(t){(0,d.default)(e,t);function e(t){(0,s.default)(this,e);var r=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t));r.type="smictext";if(!r.refOriginalPosition||r.refOriginalPosition.length!==2){r.refOriginalPosition=[0,0]}r.CLASS_NAME="Zondy.LevelRenderer.SmicText";return r}(0,u.default)(e,[{key:"destroy",value:function t(){this.type=null;(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}},{key:"brush",value:function t(e,r){if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var n=this.refOriginalPosition;var i=this.style;if(r){i=this.getHighlightStyle(i,this.highlightStyle||{})}if(typeof i.text=="undefined"||i.text===false){return}e.save();this.doClip(e);this.setContext(e,i);this.setTransform(e);if(i.textFont){e.font=i.textFont}e.textAlign=i.textAlign||"start";e.textBaseline=i.textBaseline||"middle";var o=(i.text+"").split("\n");var s=g.SUtil.Util_area.getTextHeight("ZH",i.textFont);var a=this.getRectNoRotation(i);var u=i.x+n[0];var l;if(i.textBaseline==="top"){l=a.y}else if(i.textBaseline==="bottom"){l=a.y+s}else{l=a.y+s/2}var c=i.x+n[0];var h=i.y+n[1];for(var f=0,p=o.length;f<p;f++){if(i.labelRect){e.fillRect(a.x-2,a.y,a.width+4,a.height);e.fillStyle=i.strokeColor;e.strokeRect(a.x-2,a.y,a.width+4,a.height);e.fillStyle=i.textColor}switch(i.brushType){case"stroke":this.setCtxGlobalAlpha(e,"stroke",i);if(i.textRotation&&i.textRotation!==0){e.save();e.translate(c,h);e.rotate(i.textRotation*Math.PI/180);if(i.textBaseline==="top"){if(i.maxWidth){e.strokeText(o[f],0,s*f,i.maxWidth)}else{e.strokeText(o[f],0,s*f)}}else if(i.textBaseline==="bottom"){if(i.maxWidth){e.strokeText(o[f],0,s*(f+1)-a.height,i.maxWidth)}else{e.strokeText(o[f],0,s*(f+1)-a.height)}}else{if(i.maxWidth){e.strokeText(o[f],0,s*(f+1)-a.height/2-s/2,i.maxWidth)}else{e.strokeText(o[f],0,s*(f+1)-a.height/2-s/2)}}e.restore()}else{if(i.maxWidth){e.strokeText(o[f],u,l,i.maxWidth)}else{e.strokeText(o[f],u,l)}}this.setCtxGlobalAlpha(e,"reset",i);break;case"both":if(i.textRotation&&i.textRotation!==0){e.save();e.translate(c,h);e.rotate(i.textRotation*Math.PI/180);if(i.textBaseline==="top"){if(i.maxWidth){this.setCtxGlobalAlpha(e,"fill",i);e.fillText(o[f],0,s*f,i.maxWidth);this.setCtxGlobalAlpha(e,"reset",i);this.setCtxGlobalAlpha(e,"stroke",i);e.strokeText(o[f],0,s*f,i.maxWidth);this.setCtxGlobalAlpha(e,"reset",i)}else{this.setCtxGlobalAlpha(e,"fill",i);e.fillText(o[f],0,s*f);this.setCtxGlobalAlpha(e,"reset",i);this.setCtxGlobalAlpha(e,"stroke",i);e.strokeText(o[f],0,s*f);this.setCtxGlobalAlpha(e,"reset",i)}}else if(i.textBaseline==="bottom"){if(i.maxWidth){this.setCtxGlobalAlpha(e,"fill",i);e.fillText(o[f],0,s*(f+1)-a.height,i.maxWidth);this.setCtxGlobalAlpha(e,"reset",i);this.setCtxGlobalAlpha(e,"stroke",i);e.strokeText(o[f],0,s*(f+1)-a.height,i.maxWidth);this.setCtxGlobalAlpha(e,"reset",i)}else{this.setCtxGlobalAlpha(e,"fill",i);e.fillText(o[f],0,s*(f+1)-a.height);this.setCtxGlobalAlpha(e,"reset",i);this.setCtxGlobalAlpha(e,"stroke",i);e.strokeText(o[f],0,s*(f+1)-a.height);this.setCtxGlobalAlpha(e,"reset",i)}}else{if(i.maxWidth){this.setCtxGlobalAlpha(e,"fill",i);e.fillText(o[f],0,s*(f+1)-a.height/2-s/2,i.maxWidth);this.setCtxGlobalAlpha(e,"reset",i);this.setCtxGlobalAlpha(e,"stroke",i);e.strokeText(o[f],0,s*(f+1)-a.height/2-s/2,i.maxWidth);this.setCtxGlobalAlpha(e,"reset",i)}else{this.setCtxGlobalAlpha(e,"fill",i);e.fillText(o[f],0,s*(f+1)-a.height/2-s/2);this.setCtxGlobalAlpha(e,"reset",i);this.setCtxGlobalAlpha(e,"stroke",i);e.strokeText(o[f],0,s*(f+1)-a.height/2-s/2);this.setCtxGlobalAlpha(e,"reset",i)}}e.restore()}else{if(i.maxWidth){this.setCtxGlobalAlpha(e,"fill",i);e.fillText(o[f],u,l,i.maxWidth);this.setCtxGlobalAlpha(e,"reset",i);this.setCtxGlobalAlpha(e,"stroke",i);e.strokeText(o[f],u,l,i.maxWidth);this.setCtxGlobalAlpha(e,"reset",i)}else{this.setCtxGlobalAlpha(e,"fill",i);e.fillText(o[f],u,l);this.setCtxGlobalAlpha(e,"reset",i);this.setCtxGlobalAlpha(e,"stroke",i);e.strokeText(o[f],u,l);this.setCtxGlobalAlpha(e,"reset",i)}}break;default:this.setCtxGlobalAlpha(e,"fill",i);if(i.textRotation&&i.textRotation!==0){e.save();e.translate(c,h);e.rotate(i.textRotation*Math.PI/180);if(i.textBaseline==="top"){if(i.maxWidth){e.fillText(o[f],0,s*f,i.maxWidth)}else{e.fillText(o[f],0,s*f)}}else if(i.textBaseline==="bottom"){if(i.maxWidth){e.fillText(o[f],0,s*(f+1)-a.height,i.maxWidth)}else{e.fillText(o[f],0,s*(f+1)-a.height)}}else{if(i.maxWidth){e.fillText(o[f],0,s*(f+1)-a.height/2-s/2,i.maxWidth)}else{e.fillText(o[f],0,s*(f+1)-a.height/2-s/2)}}e.restore()}else{if(i.maxWidth){e.fillText(o[f],u,l,i.maxWidth)}else{e.fillText(o[f],u,l)}}this.setCtxGlobalAlpha(e,"reset",i)}l+=s}e.restore();return}},{key:"getRect",value:function t(e){if(e.__rect){return e.__rect}var r,n,i,o;var s=this.getTextBackground(e,true);for(var a=0,u=s.length;a<u;a++){var l=s[a];if(a===0){r=l[0];i=l[0];n=l[1];o=l[1]}else{if(l[0]<r){r=l[0]}if(l[0]>i){i=l[0]}if(l[1]<n){n=l[1]}if(l[1]>o){o=l[1]}}}e.__rect={x:r,y:n,width:i-r,height:o-n};return e.__rect}},{key:"getRectNoRotation",value:function t(e){if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var r=this.refOriginalPosition;var n=g.SUtil.Util_area.getTextHeight("ZH",e.textFont);var i=g.SUtil.Util_area.getTextWidth(e.text,e.textFont);var o=g.SUtil.Util_area.getTextHeight(e.text,e.textFont);var s=e.x+r[0];if(e.textAlign==="end"||e.textAlign==="right"){s-=i}else if(e.textAlign==="center"){s-=i/2}var a;if(e.textBaseline==="top"){a=e.y+r[1]}else if(e.textBaseline==="bottom"){a=e.y+r[1]-o}else{a=e.y+r[1]-o/2}var u=false;var l;if(e.maxWidth){var c=parseInt(e.maxWidth);if(c<i){l=i;u=true;i=c}s=e.x+r[0];if(e.textAlign==="end"||e.textAlign==="right"){s-=i}else if(e.textAlign==="center"){s-=i/2}}if(e.textFont){var h=e.textFont;var f=h.toLowerCase();if(f.indexOf("italic")>-1){if(l&&u===true){i+=n/3*(i/l)}else{i+=n/3}}}var p={x:s,y:a,width:i,height:o};return p}},{key:"getTextBackground",value:function t(e,r){if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var n=this.refOriginalPosition;if((!r||r===false)&&e.__textBackground){return e.__textBackground}var i=this.getRectNoRotation(e);var o=e.x+n[0];var s=e.y+n[1];var a=[];if(e.textRotation&&e.textRotation!==0){var u=e.textRotation;var l=this.getRotatedLocation(i.x,i.y,o,s,u);var c=this.getRotatedLocation(i.x+i.width,i.y,o,s,u);var h=this.getRotatedLocation(i.x+i.width,i.y+i.height,o,s,u);var f=this.getRotatedLocation(i.x,i.y+i.height,o,s,u);a.push(l);a.push(c);a.push(h);a.push(f)}else{var p=[i.x,i.y];var d=[i.x+i.width,i.y];var y=[i.x+i.width,i.y+i.height];var v=[i.x,i.y+i.height];a.push(p);a.push(d);a.push(y);a.push(v)}e.__textBackground=a;return e.__textBackground}},{key:"getRotatedLocation",value:function t(e,r,n,i,o){var s=new Array,a,u;r=-r;i=-i;o=-o;a=(e-n)*Math.cos(o/180*Math.PI)-(r-i)*Math.sin(o/180*Math.PI)+n;u=(e-n)*Math.sin(o/180*Math.PI)+(r-i)*Math.cos(o/180*Math.PI)+i;s[0]=a;s[1]=-u;return s}}]);return e}(v.Shape);e.SmicText=b;_.LevelRenderer.SmicText=b},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.SmicCircle=undefined;var n=r(11);var i=g(n);var o=r(5);var s=g(o);var a=r(6);var u=g(a);var l=r(12);var c=g(l);var h=r(14);var f=g(h);var p=r(13);var d=g(p);var y=r(7);var v=r(26);function g(t){return t&&t.__esModule?t:{default:t}}var m=y.Common.Zondy;var _=function(t){(0,d.default)(e,t);function e(t){(0,s.default)(this,e);var r=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t));r.type="smiccircle";if(!r.refOriginalPosition||r.refOriginalPosition.length!==2){r.refOriginalPosition=[0,0]}r.CLASS_NAME="Zondy.LevelRenderer.SmicCircle";return r}(0,u.default)(e,[{key:"destroy",value:function t(){this.type=null;(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function t(e,r){if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var n=this.refOriginalPosition;var i=r.x+n[0];var o=r.y+n[1];e.moveTo(i+r.r,o);e.arc(i,o,r.r,0,Math.PI*2,true);return true}},{key:"getRect",value:function t(e){if(e.__rect){return e.__rect}if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var r=this.refOriginalPosition;var n=e.x+r[0];var i=e.y+r[1];var o=e.r;var s;if(e.brushType==="stroke"||e.brushType==="fill"){s=e.lineWidth||1}else{s=0}e.__rect={x:Math.round(n-o-s/2),y:Math.round(i-o-s/2),width:o*2+s,height:o*2+s};return e.__rect}}]);return e}(v.Shape);e.SmicCircle=_;m.LevelRenderer.SmicCircle=_},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.SmicRectangle=undefined;var n=r(11);var i=g(n);var o=r(5);var s=g(o);var a=r(6);var u=g(a);var l=r(12);var c=g(l);var h=r(14);var f=g(h);var p=r(13);var d=g(p);var y=r(7);var v=r(26);function g(t){return t&&t.__esModule?t:{default:t}}var m=y.Common.Zondy;var _=function(t){(0,d.default)(e,t);function e(t){(0,s.default)(this,e);var r=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t));r.type="smicrectangle";if(!r.refOriginalPosition||r.refOriginalPosition.length!==2){r.refOriginalPosition=[0,0]}r.CLASS_NAME="Zondy.LevelRenderer.Shape.SmicRectangle";return r}(0,u.default)(e,[{key:"destroy",value:function t(){this.type=null;(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}},{key:"_buildRadiusPath",value:function t(e,r){if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var n=this.refOriginalPosition;var i=r.x+n[0];var o=r.y+n[1];var s=r.width;var a=r.height;var u=r.radius;var l;var c;var h;var f;if(typeof u==="number"){l=c=h=f=u}else if(u instanceof Array){if(u.length===1){l=c=h=f=u[0]}else if(u.length===2){l=h=u[0];c=f=u[1]}else if(u.length===3){l=u[0];c=f=u[1];h=u[2]}else{l=u[0];c=u[1];h=u[2];f=u[3]}}else{l=c=h=f=0}var p;if(l+c>s){p=l+c;l*=s/p;c*=s/p}if(h+f>s){p=h+f;h*=s/p;f*=s/p}if(c+h>a){p=c+h;c*=a/p;h*=a/p}if(l+f>a){p=l+f;l*=a/p;f*=a/p}e.moveTo(i+l,o);e.lineTo(i+s-c,o);c!==0&&e.quadraticCurveTo(i+s,o,i+s,o+c);e.lineTo(i+s,o+a-h);h!==0&&e.quadraticCurveTo(i+s,o+a,i+s-h,o+a);e.lineTo(i+f,o+a);f!==0&&e.quadraticCurveTo(i,o+a,i,o+a-f);e.lineTo(i,o+l);l!==0&&e.quadraticCurveTo(i,o,i+l,o)}},{key:"buildPath",value:function t(e,r){if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var n=this.refOriginalPosition;if(!r.radius){e.moveTo(r.x+n[0],r.y+n[1]);e.lineTo(r.x+n[0]+r.width,r.y+n[1]);e.lineTo(r.x+n[0]+r.width,r.y+n[1]+r.height);e.lineTo(r.x+n[0],r.y+n[1]+r.height);e.lineTo(r.x+n[0],r.y+n[1])}else{this._buildRadiusPath(e,r)}e.closePath();return}},{key:"getRect",value:function t(e){if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var r=this.refOriginalPosition;if(e.__rect){return e.__rect}var n;if(e.brushType==="stroke"||e.brushType==="fill"){n=e.lineWidth||1}else{n=0}e.__rect={x:Math.round(e.x+r[0]-n/2),y:Math.round(e.y+r[1]-n/2),width:e.width+n,height:e.height+n};return e.__rect}}]);return e}(v.Shape);e.SmicRectangle=_;m.LevelRenderer.SmicRectangle=_},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.SmicSector=undefined;var n=r(11);var i=m(n);var o=r(5);var s=m(o);var a=r(6);var u=m(a);var l=r(12);var c=m(l);var h=r(14);var f=m(h);var p=r(13);var d=m(p);var y=r(7);var v=r(26);var g=r(28);function m(t){return t&&t.__esModule?t:{default:t}}var _=y.Common.Zondy;var b=function(t){(0,d.default)(e,t);function e(t){(0,s.default)(this,e);var r=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t));r.type="smicsector";if(!r.refOriginalPosition||r.refOriginalPosition.length!==2){r.refOriginalPosition=[0,0]}r.CLASS_NAME="Zondy.LevelRenderer.Shape.SmicSector";return r}(0,u.default)(e,[{key:"destroy",value:function t(){this.type=null;(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function t(e,r){if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var n=this.refOriginalPosition;var i=r.x+n[0];var o=r.y+n[1];var s=r.r0||0;var a=r.r;var u=r.startAngle;var l=r.endAngle;var c=r.clockWise||false;u=g.SUtil.Util_math.degreeToRadian(u);l=g.SUtil.Util_math.degreeToRadian(l);if(!c){u=-u;l=-l}var h=g.SUtil.Util_math.cos(u);var f=g.SUtil.Util_math.sin(u);e.moveTo(h*s+i,f*s+o);e.lineTo(h*a+i,f*a+o);e.arc(i,o,a,u,l,!c);e.lineTo(g.SUtil.Util_math.cos(l)*s+i,g.SUtil.Util_math.sin(l)*s+o);if(s!==0){e.arc(i,o,s,l,u,c)}e.closePath();return}},{key:"getRect",value:function t(e){if(e.__rect){return e.__rect}if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var r=this.refOriginalPosition;var n=g.SUtil.Util_vector.create();var i=g.SUtil.Util_vector.create();var o=g.SUtil.Util_vector.create();var s=g.SUtil.Util_vector.create();var a=e.x+r[0];var u=e.y+r[1];var l=e.r0||0;var c=e.r;var h=g.SUtil.Util_math.degreeToRadian(e.startAngle);var f=g.SUtil.Util_math.degreeToRadian(e.endAngle);var p=e.clockWise;if(!p){h=-h;f=-f}if(l>1){g.SUtil.Util_computeBoundingBox.arc(a,u,l,h,f,!p,n,o)}else{n[0]=o[0]=a;n[1]=o[1]=u}g.SUtil.Util_computeBoundingBox.arc(a,u,c,h,f,!p,i,s);g.SUtil.Util_vector.min(n,n,i);g.SUtil.Util_vector.max(o,o,s);e.__rect={x:n[0],y:n[1],width:o[0]-n[0],height:o[1]-n[1]};return e.__rect}}]);return e}(v.Shape);e.SmicSector=b;_.LevelRenderer.SmicSector=b},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.rangeThemeLayer=e.RangeThemeLayer=undefined;var n=r(11);var i=_(n);var o=r(5);var s=_(o);var a=r(6);var u=_(a);var l=r(12);var c=_(l);var h=r(13);var f=_(h);var p=r(19);var d=_(p);var y=r(7);var v=r(103);var g=r(81);var m=r(23);function _(t){return t&&t.__esModule?t:{default:t}}var b=y.Common.copyAttributesWithClip,x=y.Common.Zondy;var S=function(t){(0,f.default)(e,t);function e(t,r){(0,s.default)(this,e);var n=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r));n.style=r.style;n.isHoverAble=r.isHoverAble;n.highlightStyle=r.highlightStyle;n.themeField=r.themeField;n.styleGroups=r.styleGroups;return n}(0,u.default)(e,[{key:"createThematicFeature",value:function t(e){var r=this.getStyleByData(e);var n={};n.nodesClipPixel=this.nodesClipPixel;n.isHoverAble=this.isHoverAble;n.isMultiHover=this.isMultiHover;n.isClickAble=this.isClickAble;n.highlightStyle=m.ShapeFactory.transformStyle(this.highlightStyle);var i=new g.ThemeVector(e,this,m.ShapeFactory.transformStyle(r),n);for(var o=0;o<i.shapes.length;o++){this.renderer.addShape(i.shapes[o])}return i}},{key:"getStyleByData",value:function t(e){var r={};var n=e;r=b(r,this.style);if(this.themeField&&this.styleGroups&&this.styleGroups.length>0&&n.attributes){var i=this.themeField;var o=n.attributes;var s=this.styleGroups;var a=false;var u=null;for(var l in o){if(i===l){a=true;u=o[l];break}}if(a){for(var c=0,h=s.length;c<h;c++){if(u>=s[c].start&&u<s[c].end){var f=s[c].style;r=b(r,f)}}}}if(n.style&&this.isAllowFeatureStyle===true){r=b(n.style)}return r}}]);return e}(v.GeoFeatureThemeLayer);e.RangeThemeLayer=S;var w=e.rangeThemeLayer=function t(e,r){return new S(e,r)};x.Map.rangeThemeLayer=w},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.RankSymbol=undefined;var n=r(11);var i=g(n);var o=r(5);var s=g(o);var a=r(6);var u=g(a);var l=r(12);var c=g(l);var h=r(14);var f=g(h);var p=r(13);var d=g(p);var y=r(7);var v=r(47);function g(t){return t&&t.__esModule?t:{default:t}}var m=y.Common.Zondy;var _=function(t){(0,d.default)(e,t);function e(t,r,n,o,a,u){(0,s.default)(this,e);var l=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r,n,o,a,u));l.setting=null;if(o&&o.codomain){l.setting=o;l.DVBCodomain=l.setting.codomain}l.CLASS_NAME="Zondy.Theme.RankSymbol";return l}(0,u.default)(e,[{key:"destroy",value:function t(){this.setting=null;(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}},{key:"initBaseParameter",value:function t(){var e=true;if(!this.setting){return false}var r=this.setting;if(r.XOffset){this.XOffset=r.XOffset}if(r.YOffset){this.YOffset=r.YOffset}this.XOffset=r.XOffset?r.XOffset:0;this.YOffset=r.YOffset?r.YOffset:0;this.origonPoint=[];this.chartBox=[];this.dataViewBox=[];this.DVBParameter=r.dataViewBoxParameter?r.dataViewBoxParameter:[0,0,0,0];this.DVBOrigonPoint=[];this.DVBCenterPoint=[];this.origonPointOffset=[];this.resetLocation();var n=this.width;var i=this.height;var o=this.location;this.origonPoint=[o[0]-n/2,o[1]-i/2];var s=this.origonPoint;this.chartBox=[s[0],s[1]+i,s[0]+n,s[1]];var a=this.chartBox;var u=this.DVBParameter;this.dataViewBox=[a[0]+u[0],a[1]-u[1],a[2]-u[2],a[3]+u[3]];var l=this.dataViewBox;if(l[0]>=l[2]||l[1]<=l[3]){return false}this.DVBOrigonPoint=[l[0],l[3]];this.DVBWidth=Math.abs(l[2]-l[0]);this.DVBHeight=Math.abs(l[1]-l[3]);this.DVBCenterPoint=[this.DVBOrigonPoint[0]+this.DVBWidth/2,this.DVBOrigonPoint[1]+this.DVBHeight/2];this.origonPointOffset=[this.DVBOrigonPoint[0]-s[0],this.DVBOrigonPoint[1]-s[1]];return e}}]);return e}(v.Graph);e.RankSymbol=_;m.Theme.RankSymbol=_},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.GraphThemeLayer=e.graphThemeLayer=undefined;var n=r(11);var i=b(n);var o=r(5);var s=b(o);var a=r(6);var u=b(a);var l=r(12);var c=b(l);var h=r(14);var f=b(h);var p=r(13);var d=b(p);var y=r(19);var v=b(y);var g=r(7);var m=r(177);var _=r(68);function b(t){return t&&t.__esModule?t:{default:t}}var x=g.Common.FeatureSet,S=g.Common.Zondy,w=g.Common.Point2D;var C=function(t){(0,d.default)(e,t);function e(t,r,n){(0,s.default)(this,e);var o=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,n));o.chartsSetting=n.chartsSetting||{};o.themeFields=n.themeFields||null;o.overlayWeightField=n.overlayWeightField||null;o.isOverLay=n.isOverLay||true;o.charts=n.charts||[];o.cache=n.cache||{};o.chartsType=r;o.options={calGravity:n.calGravity||true};return o}(0,u.default)(e,[{key:"setChartsType",value:function t(e){this.chartsType=e;this.redraw()}},{key:"addFeatures",value:function t(e){var r=this;v.default.Evented.prototype.fire("beforefeaturesadded",{features:e});if(e&&(true||e instanceof x)){var n=null;var i=e.LabelDots;var o=e.AttStruct;var s=e.SFEleArray;if(s!=null&&s.length>0){for(var a=0;a<s.length;a++){var u=s[a];if(u.AttValue!=null&&u.AttValue.length>0){var n={};for(var l=0;l<u.AttValue.length;l++){n[o.FldName[l]]=u.AttValue[l]}n["FID"]=u.FID}u.attributes=n;i&&i[a]&&(u.LabelDot=i[a]);r.features.push(u)}}}if(this.renderer){this.redrawThematicFeatures(this.map.getBounds())}}},{key:"redrawThematicFeatures",value:function t(e){this.clearCache();this.renderer.clearAll();var r=this.features;for(var n=0,i=r.length;n<i;n++){var o=r[n];var s=this.cache;var a=o.FID;if(s[a]){continue}s[a]=a;var u=this.createThematicFeature(o);if(u&&this.overlayWeightField){if(o.attributes[this.overlayWeightField]&&!isNaN(o.attributes[this.overlayWeightField])){u["__overlayWeight"]=o.attributes[this.overlayWeightField]}}if(u){this.charts.push(u)}}this.drawCharts()}},{key:"createThematicFeature",value:function t(e){var r;if(_.Theme[this.chartsType]&&this.themeFields&&this.chartsSetting){r=new _.Theme[this.chartsType](e,this,this.themeFields,this.chartsSetting,null,this.options)}if(!r){return false}r.assembleShapes();return r}},{key:"drawCharts",value:function t(){if(!this.renderer){return}var e=this.charts;if(this.overlayWeightField){e.sort(function(t,e){if(typeof t["__overlayWeight"]=="undefined"&&typeof e["__overlayWeight"]=="undefined"){return 0}else if(typeof t["__overlayWeight"]!="undefined"&&typeof e["__overlayWeight"]=="undefined"){return-1}else if(typeof t["__overlayWeight"]=="undefined"&&typeof e["__overlayWeight"]!="undefined"){return 1}else if(typeof t["__overlayWeight"]!="undefined"&&typeof e["__overlayWeight"]!="undefined"){if(parseFloat(t["__overlayWeight"])<parseFloat(e["__overlayWeight"])){return 1}else{return-1}}return 0})}if(!this.isOverLay){for(var r=0,n=e.length;r<n;r++){var i=e[r];var o=i.resetLocation();var s=i.shapes;for(var a=0,u=s.length;a<u;a++){s[a].refOriginalPosition=o;this.renderer.addShape(s[a])}}}else{var l=[];for(var c=0,h=e.length;c<h;c++){var f=e[c];var p=f.resetLocation();var d=f.chartBounds;var y=[{x:d.xmin,y:d.ymin},{x:d.xmin,y:d.ymax},{x:d.xmax,y:d.ymax},{x:d.xmax,y:d.ymin},{x:d.xmin,y:d.ymax}];var v=false;if(c!==0){for(var g=0;g<l.length;g++){if(this.isQuadrilateralOverLap(y,l[g])){v=true;break}}}if(v){continue}else{l.push(y)}var m=f.shapes;for(var _=0,b=m.length;_<b;_++){m[_].refOriginalPosition=p;this.renderer.addShape(m[_])}}}this.renderer.render()}},{key:"getShapesByFeatureID",value:function t(e){var r=[];var n=this.renderer.getAllShapes();if(!e){return n}for(var i=0,o=n.length;i<o;i++){var s=n[i];if(s.refDataID&&e===s.refDataID){r.push(s)}}return r}},{key:"isQuadrilateralOverLap",value:function t(e,r){var n=e.length,i=r.length;if(n!==5||i!==5){return null}var o=false;for(var s=0;s<n;s++){if(this.isPointInPoly(e[s],r)){o=true;break}}for(var a=0;a<i;a++){if(this.isPointInPoly(r[a],e)){o=true;break}}for(var u=0;u<n-1;u++){if(o){break}for(var l=0;l<i-1;l++){var c=this.lineIntersection(e[u],e[u+1],r[l],r[l+1]);if(c.CLASS_NAME==="Zondy.Object.Point2D"){o=true;break}}}return o}},{key:"lineIntersection",value:function t(e,r,n,i){var o=null;var s;var a;var u=(i.x-n.x)*(e.y-n.y)-(i.y-n.y)*(e.x-n.x);var l=(r.x-e.x)*(e.y-n.y)-(r.y-e.y)*(e.x-n.x);var c=(i.y-n.y)*(r.x-e.x)-(i.x-n.x)*(r.y-e.y);if(c!==0){s=u/c;a=l/c;if(s>=0&&a<=1&&s<=1&&a>=0){o=new w(e.x+s*(r.x-e.x),e.y+s*(r.y-e.y))}else{o="No Intersection"}}else{if(u===0&&l===0){var h=Math.max(e.y,r.y);var f=Math.min(e.y,r.y);var p=Math.max(e.x,r.x);var d=Math.min(e.x,r.x);if((n.y>=f&&n.y<=h||i.y>=f&&i.y<=h)&&n.x>=d&&n.x<=p||i.x>=d&&i.x<=p){o="Coincident"}else{o="Parallel"}}else{o="Parallel"}}return o}},{key:"isPointInPoly",value:function t(e,r){for(var n=false,i=-1,o=r.length,s=o-1;++i<o;s=i){(r[i].y<=e.y&&e.y<r[s].y||r[s].y<=e.y&&e.y<r[i].y)&&e.x<(r[s].x-r[i].x)*(e.y-r[i].y)/(r[s].y-r[i].y)+r[i].x&&(n=!n)}return n}},{key:"isChartInMap",value:function t(e,r){var n=e;var i=false;for(var o=0,s=r.length;o<s;o++){var a=r[o];if(a.x>=n.xmin&&a.x<=n.xmax&&a.y>=n.ymin&&a.y<=n.ymax){i=true;break}}return i}},{key:"clearCache",value:function t(){this.cache={};this.charts=[]}},{key:"removeFeatures",value:function t(r){this.clearCache();(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"removeFeatures",this).call(this,r)}},{key:"removeAllFeatures",value:function t(){this.clearCache();(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"removeAllFeatures",this).call(this)}},{key:"redraw",value:function t(){this.clearCache();if(this.renderer){this.redrawThematicFeatures(this.map.getBounds());return true}return false}},{key:"clear",value:function t(){if(this.renderer){this.renderer.clearAll();this.renderer.refresh()}this.removeAllFeatures();this.clearCache()}}]);return e}(m.ThemeLayer);var I=e.graphThemeLayer=function t(e,r,n){return new C(e,r,n)};e.GraphThemeLayer=C;S.Map.graphThemeLayer=I},function(t,e){t.exports=function(){try{return echarts}catch(t){return{}}}()},function(t,e,r){"use strict";r(314)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.DeckglLayer=e.MapvLayer=e.EchartsLayer=e.PostgisVectorTileService=e.PostgisTableService=e.PostgisQueryService=e.PostgisCustomQueryService=e.PostgisCatlogService=e.ThemeStyle=e.RankSymbolThemeLayer=e.SimpleThemeLayer=e.RandomThemeLayer=e.graphThemeLayer=e.GraphThemeLayer=e.UniqueThemeLayer=e.RangeThemeLayer=e.ThemeLayer=e.GeoFeatureThemeLayer=e.ThemesInfo=e.ThemeOper=e.ItemValue=e.FolderInfoAttribute=e.FolderInfo=undefined;e.ExpInfo=e.CUniqueThemeInfo=e.CUniqueTheme=e.CThemeInfo=e.CTheme=e.CSimpleTheme=e.CRegInfo=e.CRangeThemeInfo=e.CRangeTheme=e.CRandomTheme=e.CPntInfo=e.CMultiClassTheme=e.CLinInfo=e.CGraduatedSymbolTheme=e.CFourColorTheme=e.CDotDensityTheme=e.CChartType=e.CChartThemeRepresentInfo=e.CChartThemeInfo=e.CChartTheme=e.CChartLabelFormat=e.CAnnInfo=e.CAllOtherDataItemInfoSource=e.MapServiceBase=e.GetTileImageService=e.GetMapInfoService=e.GetMapImageService=e.GetLayerImageService=e.GetDocImageService=e.TopAnalysis=e.Smooth=e.ProjectRang=e.ProjectDots=e.GeometryAnalysisBase=e.CProjectParam=e.CProjectBySRSID=e.CalServiceBase=e.CalPolyLineLength=e.CalArea=e.ProjectBySRID=e.ProjectByLayer=e.ProjectBase=e.OverlayByPolygon=e.OverlayByLayer=e.OverlayBase=e.NetAnalysis=e.FeatureBuffBySingleRing=e.FeatureBuffByMultiplyRing=e.FeatureBuffBase=e.ContourAnalyse=e.ClipByPolygon=e.ClipByLayer=e.ClipByCircle=e.ClipBase=e.ClassBufferBySingleRing=e.ClassBufferByMultiplyRing=e.ClassBufferBase=e.AnalysisBase=e.QueryServiceBase=e.QueryParameterBase=e.QueryParameter=e.QueryLayerFeature=e.QueryFeatureStruct=e.QueryFeatureRule=e.QueryDocFeature=e.QueryByLayerParameter=e.ObjClsQueryParameter=e.ObjClsQuery=e.MultiGeoQueryParameter=e.MultiGeoQuery=e.EditServiceBase=e.EditLayerFeature=e.EditDocFeature=e.G3DService=e.G3DMapDoc=e.M3DTileDataInfo=e.G3DLayerType=e.VectorLayer=e.TileLayer=e.CatalogService=e.MapDoc=e.GDBInfo=e.ColorInfo=e.JSONFormat=e.IgsServiceBase=e.FetchRequest=e.RequestTimeout=e.CORS=e.Events=e.CommonServiceBase=e.SlopLineParam=e.NetAnalysisExtent=e.NetAnalyse=e.MeshingParam=e.ContourRegionInfo=e.ContourZValue=e.ContourParam=e.ContourNoteParam=e.mixin=e.merge=undefined;e.DeepMerge=e.ChineseToUtf8=e.getTopAnalysisResult=e.bindAsEventListener=e.bind=e.newGuid=e.cloneObject=e.copyAttributesWithClip=e.copyAttributes=e.transformResult=e.toJSON=e.isInTheSameDomain=e.supportCanvas=e.isSupportCanvas=e.getBrowser=e.Browser=e.IS_GECKO=e.getParameters=e.urlAppend=e.getWFParameterString=e.getParameterString=e.applyDefaults=e.modifyDOMElement=e.indexOf=e.removeItem=e.isElement=e.getElement=e.reset=e.copyExcluce=e.copy=e.extendDeep=e.isArray=e.extend=e.WebGraphicsInfo=e.VectCls=e.Tangram=e.Rectangle=e.PolyLine=e.Polygon=e.Point2D=e.MultiPolygon=e.LablePntInfo=e.LabelRegInfo=e.LabelLinInfo=e.GRegion=e.GPoint=e.GLine=e.FeatureSet=e.FeatureGraphicBase=e.FeatureGeometry=e.Feature=e.LayerStatusType=e.MapType=e.CItemType=e.CLinStyleMakeType=e.CLinJointType=e.CLinHeadType=e.CLinAdjustType=e.NetElemType=e.NetAnalyType=e.ISShowArc=e.EightDirType=e.LineConstrain=e.LabelSpreadType=e.RepeatType=e.LabelPntType=e.LabelRegType=e.LabelLinType=e.FontShape=e.FeatureType=e.VectClsType=e.XClsType=e.DynShowStyle=e.DynNoteLableType=e.CRegionInfo=e.CPointInfo=e.CLineInfo=e.Circle=e.CGDBInfo=e.CDynNoteInfo=e.CDisplayStyleExtend=e.CDisplayStyle=e.CAttDataRow=e.CAttStruct=e.Zondy=e.Arc=e.AnyLine=e.ServiceBase=e.CalculateModelService=e.GeoDatasetService=e.UserService=e.TDTLayer=e.ArcGISLayer=e.MapVectorLayer=e.MapWMTSLayer=e.MapWmsLayer=e.MapTileLayer=e.MapDocLayer=e.mapboxgl=e.MapExtend=undefined;var n=r(315);var i=r(316);var o=r(27);var s=r(32);var a=r(390);var u=r(410);var l=r(411);var c=r(417);var h=r(242);var f=r(443);var p=r(458);var d=r(466);var y=r(472);var v=r(475);var g=r(494);var m=r(577);var _=r(583);e.MapExtend=n.MapExtend;e.mapboxgl=i.mapboxgl;e.MapDocLayer=i.MapDocLayer;e.MapTileLayer=i.MapTileLayer;e.MapWmsLayer=i.MapWmsLayer;e.MapWMTSLayer=i.MapWMTSLayer;e.MapVectorLayer=i.MapVectorLayer;e.ArcGISLayer=i.ArcGISLayer;e.TDTLayer=i.TDTLayer;e.UserService=v.UserService;e.GeoDatasetService=v.GeoDatasetService;e.CalculateModelService=v.CalculateModelService;e.ServiceBase=o.ServiceBase;e.AnyLine=s.AnyLine;e.Arc=s.Arc;e.Zondy=s.Zondy;e.CAttStruct=s.CAttStruct;e.CAttDataRow=s.CAttDataRow;e.CDisplayStyle=s.CDisplayStyle;e.CDisplayStyleExtend=s.CDisplayStyleExtend;e.CDynNoteInfo=s.CDynNoteInfo;e.CGDBInfo=s.CGDBInfo;e.Circle=s.Circle;e.CLineInfo=s.CLineInfo;e.CPointInfo=s.CPointInfo;e.CRegionInfo=s.CRegionInfo;e.DynNoteLableType=s.DynNoteLableType;e.DynShowStyle=s.DynShowStyle;e.XClsType=s.XClsType;e.VectClsType=s.VectClsType;e.FeatureType=s.FeatureType;e.FontShape=s.FontShape;e.LabelLinType=s.LabelLinType;e.LabelRegType=s.LabelRegType;e.LabelPntType=s.LabelPntType;e.RepeatType=s.RepeatType;e.LabelSpreadType=s.LabelSpreadType;e.LineConstrain=s.LineConstrain;e.EightDirType=s.EightDirType;e.ISShowArc=s.ISShowArc;e.NetAnalyType=s.NetAnalyType;e.NetElemType=s.NetElemType;e.CLinAdjustType=s.CLinAdjustType;e.CLinHeadType=s.CLinHeadType;e.CLinJointType=s.CLinJointType;e.CLinStyleMakeType=s.CLinStyleMakeType;e.CItemType=s.CItemType;e.MapType=s.MapType;e.LayerStatusType=s.LayerStatusType;e.Feature=s.Feature;e.FeatureGeometry=s.FeatureGeometry;e.FeatureGraphicBase=s.FeatureGraphicBase;e.FeatureSet=s.FeatureSet;e.GLine=s.GLine;e.GPoint=s.GPoint;e.GRegion=s.GRegion;e.LabelLinInfo=s.LabelLinInfo;e.LabelRegInfo=s.LabelRegInfo;e.LablePntInfo=s.LablePntInfo;e.MultiPolygon=s.MultiPolygon;e.Point2D=s.Point2D;e.Polygon=s.Polygon;e.PolyLine=s.PolyLine;e.Rectangle=s.Rectangle;e.Tangram=s.Tangram;e.VectCls=s.VectCls;e.WebGraphicsInfo=s.WebGraphicsInfo;e.extend=s.extend;e.isArray=s.isArray;e.extendDeep=s.extendDeep;e.copy=s.copy;e.copyExcluce=s.copyExcluce;e.reset=s.reset;e.getElement=s.getElement;e.isElement=s.isElement;e.removeItem=s.removeItem;e.indexOf=s.indexOf;e.modifyDOMElement=s.modifyDOMElement;e.applyDefaults=s.applyDefaults;e.getParameterString=s.getParameterString;e.getWFParameterString=s.getWFParameterString;e.urlAppend=s.urlAppend;e.getParameters=s.getParameters;e.IS_GECKO=s.IS_GECKO;e.Browser=s.Browser;e.getBrowser=s.getBrowser;e.isSupportCanvas=s.isSupportCanvas;e.supportCanvas=s.supportCanvas;e.isInTheSameDomain=s.isInTheSameDomain;e.toJSON=s.toJSON;e.transformResult=s.transformResult;e.copyAttributes=s.copyAttributes;e.copyAttributesWithClip=s.copyAttributesWithClip;e.cloneObject=s.cloneObject;e.newGuid=s.newGuid;e.bind=s.bind;e.bindAsEventListener=s.bindAsEventListener;e.getTopAnalysisResult=s.getTopAnalysisResult;e.ChineseToUtf8=s.ChineseToUtf8;e.DeepMerge=s.DeepMerge;e.merge=s.merge;e.mixin=s.mixin;e.ContourNoteParam=a.ContourNoteParam;e.ContourParam=a.ContourParam;e.ContourZValue=a.ContourZValue;e.ContourRegionInfo=a.ContourRegionInfo;e.MeshingParam=a.MeshingParam;e.NetAnalyse=a.NetAnalyse;e.NetAnalysisExtent=a.NetAnalysisExtent;e.SlopLineParam=a.SlopLineParam;e.CommonServiceBase=u.CommonServiceBase;e.Events=u.Events;e.CORS=u.CORS;e.RequestTimeout=u.RequestTimeout;e.FetchRequest=u.FetchRequest;e.IgsServiceBase=u.IgsServiceBase;e.JSONFormat=u.JSONFormat;e.ColorInfo=l.ColorInfo;e.GDBInfo=l.GDBInfo;e.MapDoc=l.MapDoc;e.CatalogService=l.CatalogService;e.TileLayer=l.TileLayer;e.VectorLayer=l.VectorLayer;e.G3DLayerType=c.G3DLayerType;e.M3DTileDataInfo=c.M3DTileDataInfo;e.G3DMapDoc=c.G3DMapDoc;e.G3DService=c.G3DService;e.EditDocFeature=h.EditDocFeature;e.EditLayerFeature=h.EditLayerFeature;e.EditServiceBase=h.EditServiceBase;e.MultiGeoQuery=h.MultiGeoQuery;e.MultiGeoQueryParameter=h.MultiGeoQueryParameter;e.ObjClsQuery=h.ObjClsQuery;e.ObjClsQueryParameter=h.ObjClsQueryParameter;e.QueryByLayerParameter=h.QueryByLayerParameter;e.QueryDocFeature=h.QueryDocFeature;e.QueryFeatureRule=h.QueryFeatureRule;e.QueryFeatureStruct=h.QueryFeatureStruct;e.QueryLayerFeature=h.QueryLayerFeature;e.QueryParameter=h.QueryParameter;e.QueryParameterBase=h.QueryParameterBase;e.QueryServiceBase=h.QueryServiceBase;e.AnalysisBase=f.AnalysisBase;e.ClassBufferBase=f.ClassBufferBase;e.ClassBufferByMultiplyRing=f.ClassBufferByMultiplyRing;e.ClassBufferBySingleRing=f.ClassBufferBySingleRing;e.ClipBase=f.ClipBase;e.ClipByCircle=f.ClipByCircle;e.ClipByLayer=f.ClipByLayer;e.ClipByPolygon=f.ClipByPolygon;e.ContourAnalyse=f.ContourAnalyse;e.FeatureBuffBase=f.FeatureBuffBase;e.FeatureBuffByMultiplyRing=f.FeatureBuffByMultiplyRing;e.FeatureBuffBySingleRing=f.FeatureBuffBySingleRing;e.NetAnalysis=f.NetAnalysis;e.OverlayBase=f.OverlayBase;e.OverlayByLayer=f.OverlayByLayer;e.OverlayByPolygon=f.OverlayByPolygon;e.ProjectBase=f.ProjectBase;e.ProjectByLayer=f.ProjectByLayer;e.ProjectBySRID=f.ProjectBySRID;e.CalArea=p.CalArea;e.CalPolyLineLength=p.CalPolyLineLength;e.CalServiceBase=p.CalServiceBase;e.CProjectBySRSID=p.CProjectBySRSID;e.CProjectParam=p.CProjectParam;e.GeometryAnalysisBase=p.GeometryAnalysisBase;e.ProjectDots=p.ProjectDots;e.ProjectRang=p.ProjectRang;e.Smooth=p.Smooth;e.TopAnalysis=p.TopAnalysis;e.GetDocImageService=d.GetDocImageService;e.GetLayerImageService=d.GetLayerImageService;e.GetMapImageService=d.GetMapImageService;e.GetMapInfoService=d.GetMapInfoService;e.GetTileImageService=d.GetTileImageService;e.MapServiceBase=d.MapServiceBase;e.CAllOtherDataItemInfoSource=y.CAllOtherDataItemInfoSource;e.CAnnInfo=y.CAnnInfo;e.CChartLabelFormat=y.CChartLabelFormat;e.CChartTheme=y.CChartTheme;e.CChartThemeInfo=y.CChartThemeInfo;e.CChartThemeRepresentInfo=y.CChartThemeRepresentInfo;e.CChartType=y.CChartType;e.CDotDensityTheme=y.CDotDensityTheme;e.CFourColorTheme=y.CFourColorTheme;e.CGraduatedSymbolTheme=y.CGraduatedSymbolTheme;e.CLinInfo=y.CLinInfo;e.CMultiClassTheme=y.CMultiClassTheme;e.CPntInfo=y.CPntInfo;e.CRandomTheme=y.CRandomTheme;e.CRangeTheme=y.CRangeTheme;e.CRangeThemeInfo=y.CRangeThemeInfo;e.CRegInfo=y.CRegInfo;e.CSimpleTheme=y.CSimpleTheme;e.CTheme=y.CTheme;e.CThemeInfo=y.CThemeInfo;e.CUniqueTheme=y.CUniqueTheme;e.CUniqueThemeInfo=y.CUniqueThemeInfo;e.ExpInfo=y.ExpInfo;e.FolderInfo=y.FolderInfo;e.FolderInfoAttribute=y.FolderInfoAttribute;e.ItemValue=y.ItemValue;e.ThemeOper=y.ThemeOper;e.ThemesInfo=y.ThemesInfo;e.GeoFeatureThemeLayer=g.GeoFeatureThemeLayer;e.ThemeLayer=g.ThemeLayer;e.RangeThemeLayer=g.RangeThemeLayer;e.UniqueThemeLayer=g.UniqueThemeLayer;e.GraphThemeLayer=g.GraphThemeLayer;e.graphThemeLayer=g.graphThemeLayer;e.RandomThemeLayer=g.RandomThemeLayer;e.SimpleThemeLayer=g.SimpleThemeLayer;e.RankSymbolThemeLayer=g.RankSymbolThemeLayer;e.ThemeStyle=g.ThemeStyle;e.PostgisCatlogService=m.PostgisCatlogService;e.PostgisCustomQueryService=m.PostgisCustomQueryService;e.PostgisQueryService=m.PostgisQueryService;e.PostgisTableService=m.PostgisTableService;e.PostgisVectorTileService=m.PostgisVectorTileService;e.EchartsLayer=_.EchartsLayer;e.MapvLayer=_.MapvLayer;e.DeckglLayer=_.DeckglLayer},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.MapExtend=undefined;var n=r(19);var i=o(n);function o(t){return t&&t.__esModule?t:{default:t}}var s=e.MapExtend=function(){i.default.Map.prototype.overlayLayersManager={};i.default.Map.prototype.addLayer=function(t,e){if(t.source||t.type==="custom"||t.type==="background"){this.addLayerBak(t,e);return this}if(this.overlayLayersManager[t.id]||this.style._layers[t.id]){this.fire("error",{error:new Error("A layer with this id already exists.")});return}this._addLayer(t,this);this.overlayLayersManager[t.id]=t;return this};i.default.Map.prototype.getLayer=function(t){if(this.overlayLayersManager[t]){return this.overlayLayersManager[t]}return this.style.getLayer(t)};i.default.Map.prototype.moveLayer=function(t,e){if(this.overlayLayersManager[t]){n(t,e);return this}if(this.style._layers[t]){this.style.moveLayer(t,e);this._update(true);return this}};i.default.Map.prototype.removeLayer=function(t){if(this.overlayLayersManager[t]){e(this.overlayLayersManager[t]);delete this.overlayLayersManager[t];return this}this.style.removeLayer(t);this._update(true);return this};i.default.Map.prototype.setLayoutProperty=function(t,e,n){if(this.overlayLayersManager[t]){if(e==="visibility"){if(n==="visible"){n=true}else{n=false}r(this.overlayLayersManager[t],n);this.style.fire("data",{dataType:"style"})}return this}this.style.setLayoutProperty(t,e,n);this._update(true);return this};i.default.Map.prototype.updateTransform=function(t,e,r,n,o,s,a){this.transform.units=t;this.transform.latRange=[this._tileExtent[1],this._tileExtent[3]];this.transform.lngRange=[this._tileExtent[0],this._tileExtent[2]];var u=this.mercatorZfromAltitude;i.default.MercatorCoordinate.fromLngLat=function(t,n){n=n||0;var o=i.default.LngLat.convert(t);return new i.default.MercatorCoordinate((o.lng-e)/s,(r-o.lat)/a,u(n,o.lat))};i.default.MercatorCoordinate.prototype.toLngLat=function(){return new i.default.LngLat(this.x*s+e,r-this.y*a)};this.customConvertPoint=window.URL.createObjectURL(new Blob(["customConvertPoint = {projectX:function(x){return (x - "+n+") / "+s+" + 0.5},projectY:function(y){y = 0.5 - ((y - "+o+") / "+a+");return y < 0 ? 0 : y > 1 ? 1 : y;},toY:function(y){return (0.5-y)*"+a+"+"+o+";}}"],{type:"text/javascript"}))};function t(t,e){t.onAdd&&t.onAdd(e)}function e(t){t.removeFromMap&&t.removeFromMap()}function r(t,e){t.setVisibility&&t.setVisibility(e)}function n(t,e){var r=document.getElementById(t);if(e){var n=document.getElementById(e);if(!n){i.default.Evented.prototype.fire("error",{error:new Error('Layer with id "'+e+'" does not exist on this document.')})}}if(r&&n){n.parentNode.insertBefore(r,n)}else{r.parentNode.appendChild(r)}}}()},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.TDTLayer=e.ArcGISLayer=e.MapVectorLayer=e.MapWMTSLayer=e.MapWmsLayer=e.MapTileLayer=e.MapDocLayer=e.mapboxgl=undefined;var n=r(41);var i=r(317);var o=r(338);var s=r(339);var a=r(340);var u=r(341);var l=r(342);var c=r(343);e.mapboxgl=n.mapboxgl;e.MapDocLayer=i.MapDocLayer;e.MapTileLayer=o.MapTileLayer;e.MapWmsLayer=s.MapWmsLayer;e.MapWMTSLayer=a.MapWMTSLayer;e.MapVectorLayer=u.MapVectorLayer;e.ArcGISLayer=l.ArcGISLayer;e.TDTLayer=c.TDTLayer},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.MapDocLayer=undefined;var n=r(83);var i=a(n);var o=r(41);var s=r(48);function a(t){return t&&t.__esModule?t:{default:t}}var u=function t(e,r){var r=r?r:{};var n=r&&r.domain?r.domain:"";if(n===""){this.networkProtocol=r.networkProtocol!==undefined?r.networkProtocol:location.protocol.split(":")[0]||"http";var i=r&&r.ip?r.ip:"localhost";var o=r&&r.port?r.port:"6163";this.url=this._url=encodeURI(this.networkProtocol+"://"+i+":"+o+"/igs/rest/mrms/docs/"+e)}else{this.url=this._url=encodeURI(n+"/igs/rest/mrms/docs/"+e)}this.options={layers:null,filters:null,style:null,f:null,proj:null,guid:null,keepCache:true,attribution:"Zondy Map doc Data"};this.layerID=r.layerID?r.layerID:null;this.sourceID=r.sourceID?r.sourceID:null;this.map=null;(0,s.extend)(this.options,r)};u.prototype.addToMap=function(t){this.map=t;this._initLayerUrl();var e=this.sourceID||"source_"+(0,s.newGuid)();var r=this.layerID||"layer_"+(0,s.newGuid)();this.map_source={type:"raster",tiles:[this._layerUrl],tileSize:this.options.tileSize||512};this.mLayer={id:r,type:"raster",source:e};if(this.map.style){if(this.map.getSource(e)===undefined){this.map.addSource(e,this.map_source);this.sourceID=e}if(this.map.getLayer(r)===undefined){this.map.addLayer(this.mLayer);this.layerID=r}return this}else{this.map.setStyle({version:8,sources:{},layers:[]});var n=this;n.map.on("load",function(){n.map.addSource(e,n.map_source);n.sourceID=e;n.map.addLayer(n.mLayer);n.layerID=r;return n})}};u.prototype._initLayerUrl=function(){var t=this;var e=t.url+"?";e+=encodeURI(t._initAllRequestParams().join("&"));e+="&bbox={bbox}";this._layerUrl=e};u.prototype._initAllRequestParams=function(){var t=this,e=t.options||{},r=[];var n=e.f||"png";r.push("f="+n);var o=this.options.tileSize||512;var a,u;if(typeof o==="number"){a=u=o}else{r.push("w="+o.x||512);r.push("h="+o.y||512)}r.push("w="+a);r.push("h="+u);if(e.layers){r.push("layers="+e.layers)}if(e.filters){r.push("filters="+e.filters)}if(e.style){r.push("style="+(0,i.default)(e.style))}var l=e.guid||(0,s.newGuid)();r.push("guid="+l);if(e.proj){r.push("proj="+e.proj)}if(e.cache!==undefined&&e.isAntialiasing!==null){r.push("cache="+e.cache)}if(e.update!==undefined&&e.isAntialiasing!==null){r.push("update="+e.update)}if(e.mode){r.push("mode="+e.mode)}if(e.isAntialiasing!==undefined&&e.isAntialiasing!==null){r.push("isAntialiasing="+e.isAntialiasing)}return r};u.prototype.refreshMap=function(t){if(t){this.options.guid=t}this._initLayerUrl();this.map.removeLayer(this.layerID);this.map.removeSource(this.sourceID);this.map_source["tiles"]=[this._layerUrl];this.map.addSource(this.sourceID,this.map_source);this.map.addLayer(this.mLayer)};e.MapDocLayer=u;o.Zondy.Map.MapDocLayer=u},function(t,e,r){var n=r(21);var i=n.JSON||(n.JSON={stringify:JSON.stringify});t.exports=function t(e){return i.stringify.apply(i,arguments)}},function(t,e,r){r(320);var n=r(21).Object;t.exports=function t(e,r){return n.create(e,r)}},function(t,e,r){var n=r(58);n(n.S,"Object",{create:r(114)})},function(t,e){t.exports=function(t){if(typeof t!="function")throw TypeError(t+" is not a function!");return t}},function(t,e,r){var n=r(49);var i=r(60);var o=r(115);t.exports=r(50)?Object.defineProperties:function t(e,r){i(e);var s=o(r);var a=s.length;var u=0;var l;while(a>u)n.f(e,l=s[u++],r[l]);return e}},function(t,e,r){var n=r(116);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return n(t)=="String"?t.split(""):Object(t)}},function(t,e,r){var n=r(52);var i=r(325);var o=r(326);t.exports=function(t){return function(e,r,s){var a=n(e);var u=i(a.length);var l=o(s,u);var c;if(t&&r!=r)while(u>l){c=a[l++];if(c!=c)return true}else for(;u>l;l++)if(t||l in a){if(a[l]===r)return t||l||0}return!t&&-1}}},function(t,e,r){var n=r(118);var i=Math.min;t.exports=function(t){return t>0?i(n(t),9007199254740991):0}},function(t,e,r){var n=r(118);var i=Math.max;var o=Math.min;t.exports=function(t,e){t=n(t);return t<0?i(t+e,0):o(t,e)}},function(t,e,r){var n=r(42).document;t.exports=n&&n.documentElement},function(t,e,r){t.exports={default:r(329),__esModule:true}},function(t,e,r){r(191);r(195);t.exports=r(335)},function(t,e,r){"use strict";var n=r(331);var i=r(332);var o=r(87);var s=r(52);t.exports=r(192)(Array,"Array",function(t,e){this._t=s(t);this._i=0;this._k=e},function(){var t=this._t;var e=this._k;var r=this._i++;if(!t||r>=t.length){this._t=undefined;return i(1)}if(e=="keys")return i(0,r);if(e=="values")return i(0,t[r]);return i(0,[r,t[r]])},"values");o.Arguments=o.Array;n("keys");n("values");n("entries")},function(t,e){t.exports=function(){}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,r){"use strict";var n=r(114);var i=r(84);var o=r(122);var s={};r(59)(s,r(43)("iterator"),function(){return this});t.exports=function(t,e,r){t.prototype=n(s,{next:i(1,r)});o(t,e+" Iterator")}},function(t,e,r){var n=r(118);var i=r(117);t.exports=function(t){return function(e,r){var o=String(i(e));var s=n(r);var a=o.length;var u,l;if(s<0||s>=a)return t?"":undefined;u=o.charCodeAt(s);return u<55296||u>56319||s+1===a||(l=o.charCodeAt(s+1))<56320||l>57343?t?o.charAt(s):u:t?o.slice(s,s+2):(u-55296<<10)+(l-56320)+65536}}},function(t,e,r){var n=r(60);var i=r(336);t.exports=r(21).getIterator=function(t){var e=i(t);if(typeof e!="function")throw TypeError(t+" is not iterable!");return n(e.call(t))}},function(t,e,r){var n=r(337);var i=r(43)("iterator");var o=r(87);t.exports=r(21).getIteratorMethod=function(t){if(t!=undefined)return t[i]||t["@@iterator"]||o[n(t)]}},function(t,e,r){var n=r(116);var i=r(43)("toStringTag");var o=n(function(){return arguments}())=="Arguments";var s=function(t,e){try{return t[e]}catch(t){}};t.exports=function(t){var e,r,a;return t===undefined?"Undefined":t===null?"Null":typeof(r=s(e=Object(t),i))=="string"?r:o?n(e):(a=n(e))=="Object"&&typeof e.callee=="function"?"Arguments":a}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.MapTileLayer=undefined;var n=r(41);var i=r(48);var o=function t(e,r){var r=r?r:{};var n=r&&r.domain?r.domain:"";if(n===""){this.networkProtocol=r.networkProtocol!==undefined?r.networkProtocol:location.protocol.split(":")[0]||"http";var o=r&&r.ip?r.ip:"localhost";var s=r&&r.port?r.port:"6163";this.url=this._url=encodeURI(this.networkProtocol+"://"+o+":"+s+"/igs/rest/mrms/tile/"+e)}else{this.url=this._url=encodeURI(n+"/igs/rest/mrms/tile/"+e)}this.options={tileExtent:[-180,-90,180,90],zoomOffset:0,yAxis:"down",origin:[-180,90],tileSize:512,attribution:"Zondy Map Tile Data"};this.layerID=r.layerID?r.layerID:null;this.sourceID=r.sourceID?r.sourceID:null;this.map=null;(0,i.extend)(this.options,r)};o.prototype.addToMap=function(t){this.map=t;this._initLayerUrl();var e=this.options.zoomOffset;var r=this.sourceID||"source_"+(0,i.newGuid)();var n=this.layerID||"layer_"+(0,i.newGuid)();var o={type:"raster",tiles:[this._layerUrl],tileSize:this.options.tileSize||512,mapgisOffset:e};var s={id:n,type:"raster",source:r};if(this.map.getStyle()){if(this.map.getSource(r)===undefined){this.map.addSource(r,o);this.sourceID=r}if(this.map.getLayer(n)===undefined){this.map.addLayer(s);this.layerID=n}return this}else{this.map.setStyle({version:8,sources:{},layers:[]});var a=this;a.map.on("load",function(){a.map.addSource(r,o);a.sourceID=r;a.map.addLayer(s);a.layerID=n;return a})}};o.prototype._initLayerUrl=function(){var t=this;var e=t.url+"/{z}/{y}/{x}";this._layerUrl=e};e.MapTileLayer=o;n.Zondy.Map.MapTileLayer=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.MapWmsLayer=undefined;var n=r(83);var i=a(n);var o=r(41);var s=r(48);function a(t){return t&&t.__esModule?t:{default:t}}var u=function t(e){var e=e?e:{};var r=e&&e.domain?e.domain:"";if(r===""){this.networkProtocol=e.networkProtocol!==undefined?e.networkProtocol:location.protocol.split(":")[0]||"http";var n=e&&e.ip?e.ip:"localhost";var i=e&&e.port?e.port:"6163";this.url=this._url=encodeURI(this.networkProtocol+"://"+n+":"+i+"/igs/rest/ogc/"+e.serverType+"/"+e.serverName+"/WMSServer")}else{this.url=this._url=encodeURI(r+"/igs/rest/ogc/"+e.serverType+"/"+e.serverName+"/WMSServer")}this.options={layers:null,styles:null,format:"image/png",service:"WMS",version:"1.1.1",request:"GetMap",width:"256",height:"256",srs:"EPSG:4326",crs:"EPSG:4326",guid:null,keepCache:true,attribution:"Zondy WMS Data"};this.layerID=e.layerID?e.layerID:null;this.sourceID=e.sourceID?e.sourceID:null;this.map=null;(0,s.extend)(this.options,e)};u.prototype.addToMap=function(t){this.map=t;this._initLayerUrl();var e=this.sourceID||"source_"+(0,s.newGuid)();var r=this.layerID||"layer_"+(0,s.newGuid)();this.wms_source={type:"raster",tiles:[this._layerUrl],tileSize:this.options.tileSize||512};this.mLayer={id:r,type:"raster",source:e};if(this.map.getStyle()){if(this.map.getSource(e)===undefined){this.map.addSource(e,this.wms_source);this.sourceID=e}if(this.map.getLayer(r)===undefined){this.map.addLayer(this.mLayer);this.layerID=r}return this}else{this.map.setStyle({version:8,sources:{},layers:[]});var n=this;n.map.on("load",function(){n.map.addSource(e,n.wms_source);n.sourceID=e;n.map.addLayer(n.mLayer);n.layerID=r;return n})}};u.prototype._initLayerUrl=function(){var t=this;var e=t.url+"?";e+=encodeURI(t._initAllRequestParams().join("&"));e+="&bbox={bbox}";this._layerUrl=e};u.prototype._initAllRequestParams=function(){var t=this,e=t.options||{},r=[];if(e.version){r.push("version="+e.version)}if(e.request){r.push("request="+e.request)}if(e.version==="1.1.1"){r.push("srs="+e.srs)}else if(e.version==="1.3.0"){r.push("crs="+e.crs)}if(e.service){r.push("service="+e.service)}if(e.layers){r.push("layers="+e.layers)}if(e.filters){r.push("filters="+e.filters)}if(e.styles){r.push("styles="+(0,i.default)(e.styles))}else{r.push("styles=")}if(e.format){r.push("format="+e.format)}else{r.push("format=image/png")}r.push("width="+e.width);r.push("height="+e.height);if(e.guid){r.push("guid="+e.guid)}if(!e.keepCache){r.push("temp="+Math.random())}return r};u.prototype.refreshMap=function(t){if(t){this.options.guid=t}this._initLayerUrl();this.map.removeLayer(this.layerID);this.map.removeSource(this.sourceID);this.wms_source["tiles"]=[this._layerUrl];this.map.addSource(this.sourceID,this.wms_source);this.map.addLayer(this.mLayer)};e.MapWmsLayer=u;o.Zondy.Map.MapWmsLayer=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.MapWMTSLayer=undefined;var n=r(83);var i=a(n);var o=r(41);var s=r(48);function a(t){return t&&t.__esModule?t:{default:t}}var u=function t(e){var e=e?e:{};var r=e&&e.domain?e.domain:"";if(r===""){this.networkProtocol=e.networkProtocol!==undefined?e.networkProtocol:location.protocol.split(":")[0]||"http";var n=e&&e.ip?e.ip:"localhost";var i=e&&e.port?e.port:"6163";this.url=this._url=encodeURI(this.networkProtocol+"://"+n+":"+i+"/igs/rest/ogc/WMTSServer")}else{this.url=this._url=encodeURI(r+"/igs/rest/ogc/WMTSServer")}this.options={layer:"",style:null,format:"image/png",service:"WMTS",version:"1.0.0",request:"GetTile",tileMatrixSet:null,tileMatrix:"{z}",tileRow:"{y}",tileCol:"{x}",guid:null,keepCache:true,attribution:"Zondy WMTS Data"};this.layerID=e.layerID?e.layerID:null;this.sourceID=e.sourceID?e.sourceID:null;this.map=null;(0,s.extend)(this.options,e)};u.prototype.addToMap=function(t){this.map=t;this._initLayerUrl();this.map.crs=this.options.crs;var e=this.sourceID||"source_"+(0,s.newGuid)();var r=this.layerID||"layer_"+(0,s.newGuid)();this.wmts_source={type:"raster",tiles:[this._layerUrl]};this.mLayer={id:r,type:"raster",source:e};if(this.map.getStyle()){if(this.map.getSource(e)===undefined){this.map.addSource(e,this.wmts_source);this.sourceID=e}if(this.map.getLayer(r)===undefined){this.map.addLayer(this.mLayer);this.layerID=r}return this}else{this.map.setStyle({version:8,sources:{},layers:[]});var n=this;n.map.on("load",function(){n.map.addSource(e,n.wmts_source);n.sourceID=e;n.map.addLayer(n.mLayer);n.layerID=r;return n})}};u.prototype._initLayerUrl=function(){var t=this;var e=t.url+"?";e+=t._initAllRequestParams().join("&");this._layerUrl=e};u.prototype._initAllRequestParams=function(){var t=this,e=t.options||{},r=[];if(e.version){r.push("version="+e.version)}if(e.request){r.push("request="+e.request)}if(e.service){r.push("service="+e.service)}if(e.layer){r.push("layer="+e.layer)}if(e.style){r.push("style="+(0,i.default)(e.style))}else{r.push("style=")}if(e.format){r.push("format="+e.format)}else{r.push("format=image/png")}if(e.tileMatrixSet){r.push("tileMatrixSet="+e.tileMatrixSet)}if(e.tileMatrix){r.push("tileMatrix="+e.tileMatrix)}if(e.tileRow){r.push("tileRow="+e.tileRow)}if(e.tileCol){r.push("tileCol="+e.tileCol)}if(e.guid){r.push("guid="+e.guid)}if(!e.keepCache){r.push("temp="+Math.random())}return r};u.prototype.refreshMap=function(t){if(t){this.options.guid=t}this._initLayerUrl();this.map.removeLayer(this.layerID);this.map.removeSource(this.sourceID);this.wmts_source["tiles"]=[this._layerUrl];this.map.addSource(this.sourceID,this.wmts_source);this.map.addLayer(this.mLayer)};e.MapWMTSLayer=u;o.Zondy.Map.MapWMTSLayer=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.MapVectorLayer=undefined;var n=r(83);var i=a(n);var o=r(41);var s=r(48);function a(t){return t&&t.__esModule?t:{default:t}}var u=function t(e,r){var r=r?r:{};var n=r&&r.domain?r.domain:"";if(n===""){this.networkProtocol=r.networkProtocol!==undefined?r.networkProtocol:location.protocol.split(":")[0]||"http";var i=r&&r.ip?r.ip:"localhost";var o=r&&r.port?r.port:"6163";this.url=this._url=encodeURI(this.networkProtocol+"://"+i+":"+o+"/igs/rest/mrms/layers")}else{this.url=this._url=encodeURI(n+"/igs/rest/mrms/layers")}this.options={gdbps:e,filters:null,style:null,f:null,guid:null,keepCache:true,attribution:"Zondy Map vector Data"};this.layerID=r.layerID?r.layerID:null;this.sourceID=r.sourceID?r.sourceID:null;this.map=null;(0,s.extend)(this.options,r)};u.prototype.addToMap=function(t){this.map=t;this._initLayerUrl();var e=this.sourceID||"source_"+(0,s.newGuid)();var r=this.layerID||"layer_"+(0,s.newGuid)();this.vector_source={type:"raster",tiles:[this._layerUrl],tileSize:this.options.tileSize||512};this.mLayer={id:r,type:"raster",source:e};if(this.map.getStyle()){if(this.map.getSource(e)===undefined){this.map.addSource(e,this.vector_source);this.sourceID=e}if(this.map.getLayer(r)===undefined){this.map.addLayer(this.mLayer);this.layerID=r}return this}else{this.map.setStyle({version:8,sources:{},layers:[]});var n=this;n.map.on("load",function(){n.map.addSource(e,n.vector_source);n.sourceID=e;n.map.addLayer(n.mLayer);n.layerID=r;return n})}};u.prototype._initLayerUrl=function(){var t=this;var e=t.url+"?";e+=encodeURI(t._initAllRequestParams().join("&"));e+="&bbox={bbox}";this._layerUrl=e};u.prototype._initAllRequestParams=function(){var t=this,e=t.options||{},r=[];var n=this.options.tileSize||512;r.push("width="+n);r.push("height="+n);if(e.gdbps){r.push("gdbps="+e.gdbps)}if(e.filters){r.push("filters="+e.filters)}if(e.style){r.push("style="+(0,i.default)(e.style))}if(e.f){r.push("f="+e.style)}else{r.push("f=png")}if(e.guid){r.push("guid="+e.guid)}if(!e.keepCache){r.push("temp="+Math.random())}return r};u.prototype.refreshMap=function(t){if(t){this.options.guid=t}this._initLayerUrl();this.map.removeLayer(this.layerID);this.map.removeSource(this.sourceID);this.vector_source["tiles"]=[this._layerUrl];this.map.addSource(this.sourceID,this.vector_source);this.map.addLayer(this.mLayer)};e.MapVectorLayer=u;o.Zondy.Map.MapVectorLayer=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ArcGISLayer=undefined;var n=r(41);var i=r(48);var o=function t(e){this.options={layerType:"NGS_Topo_US_2D",url:"http://services.arcgisonline.com/ArcGIS/rest/services/{layerType}/MapServer/tile/{z}/{y}/{x}.jpg",tileSize:256,f:"image",format:"png",dpi:96,transparent:true,attribution:"ArcGIS"};this.layerID=null;this.sourceID=null;this.map=null;(0,i.extend)(this.options,e)};o.prototype.addToMap=function(t){this.map=t;this._initLayerUrl();var e=this.sourceID||"source_"+(0,i.newGuid)();var r=this.layerID||"layer_"+(0,i.newGuid)();this.map_source={type:"raster",tiles:[this._layerUrl],tileSize:this.options.tileSize||512};this.mLayer={id:r,type:"raster",source:e};if(this.map.style){if(this.map.getSource(e)===undefined){this.map.addSource(e,this.map_source);this.sourceID=e}if(this.map.getLayer(r)===undefined){this.map.addLayer(this.mLayer);this.layerID=r}return this}else{this.map.setStyle({version:8,sources:{},layers:[]});var n=this;n.map.on("load",function(){n.map.addSource(e,n.map_source);n.sourceID=e;n.map.addLayer(n.mLayer);n.layerID=r;return n})}};o.prototype._initLayerUrl=function(){this._url=this.options.url;if(this.options.layerType&&this._url.indexOf("{layerType}/MapServer/tile/{z}/{y}/{x}")>0){this._url=this.options.url.replace("{layerType}",this.options.layerType)}else{this._crs=this.options.crs||this.map.options.crs}this._layerUrl=this._url};o.prototype.refreshMap=function(t){if(t){this.options.guid=t}this._initLayerUrl();this.map.removeLayer(this.layerID);this.map.removeSource(this.sourceID);this.map_source["tiles"]=[this._layerUrl];this.map.addSource(this.sourceID,this.map_source);this.map.addLayer(this.mLayer)};e.ArcGISLayer=o;n.Zondy.Map.ArcGISLayer=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.TDTLayer=undefined;var n=r(41);var i=r(48);var o=function t(e){this.layerLabelMap={vec:"cva",ter:"cta",img:"cia"};this.layerZoomMap={vec:18,ter:14,img:18};this.options={layerType:"vec",isLabel:false,url:"http://t"+Math.round(Math.random()*7)+".tianditu.gov.cn/{layer}_{proj}/wmts?",zoomOffset:1,dpi:96,style:"default",format:"tiles",subdomains:[0,1,2,3,4,5,6,7],version:"1.0.0",tilematrixSet:"",tileSize:256,matrixIds:null,layer:"",attribution:"天地图"};this.layerID=e.layerID?e.layerID:null;this.sourceID=e.sourceID?e.sourceID:null;this.map=null;this.initialize(e);(0,i.extend)(this.options,e)};o.prototype.initialize=function(){if(this.options.baseURL){var t=this.options.baseURL.split("gov.cn/")[1];if(this.options.baseURL.indexOf("?")>0){t=t.split("?")[0]}this.options.layerType=t.substring(0,t.length-7)}this.options.layer=this.options.isLabel&&this.layerLabelMap[this.options.layerType]?this.layerLabelMap[this.options.layerType]:this.options.layerType;if(this.options.layerType==="ter"){this.options.maxZoom=14}else{this.options.maxZoom=18}this._url=this.options.url;this.options.ip=this.options.ip?this.options.ip:"localhost";this.options.port=this.options.port?this.options.port:"6163"};o.prototype.addToMap=function(t){this.map=t;this._initLayerUrl();var e=this.sourceID||"source_"+(0,i.newGuid)();var r=this.layerID||"layer_"+(0,i.newGuid)();this.map_source={type:"raster",tiles:[this._layerUrl],tileSize:this.options.tileSize||512};this.mLayer={id:r,type:"raster",source:e};if(this.map.style){if(this.map.getSource(e)===undefined){this.map.addSource(e,this.map_source);this.sourceID=e}if(this.map.getLayer(r)===undefined){this.map.addLayer(this.mLayer);this.layerID=r}return this}else{this.map.setStyle({version:8,sources:{},layers:[]});var n=this;n.map.on("load",function(){n.map.addSource(e,n.map_source);n.sourceID=e;n.map.addLayer(n.mLayer);n.layerID=r;return n})}};o.prototype._initLayerUrl=function(){this._crs=this.options.crs||this.map.crs.epsgCode;this.options.tilematrixSet=this._crs==="EPSG:4326"?"c":"w";var t=[];if(this.options.layerType.indexOf("igs")>0){var e="http://{ip}:{port}/igs/rest/cts/tianditu/{layerType}/{x}/{y}/{z}?";var r=this.options&&this.options.domain?this.options.domain:"";if(r===""){this.networkProtocol=this.options.networkProtocol!==undefined?this.options.networkProtocol:location.protocol.split(":")[0]||"http";e=this.networkProtocol+"://"+this.options.ip+":"+this.options.port+"/igs/rest/cts/tianditu/{layerType}/{x}/{y}/{z}?"}else{e=r+"/igs/rest/cts/tianditu/{layerType}/{x}/{y}/{z}?"}var n;switch(this.options.layerType){case"vec_igs":n="vector";break;case"img_igs":n="raster";break;case"cva_igs":n="vectorAnno";break;case"cia_igs":n="rasterAnno";break;default:n="vector";break}this._url=e.replace("{layerType}",n)}else if(this.options.baseURL){this._url=this.options.baseURL;if(this.options.baseURL.indexOf("?")<0){this._url+="?"}}else{this._url=this._url.replace("{layer}",this.options.layer).replace("{proj}",this.options.tilematrixSet)}if(this.options.layerType.indexOf("igs")<0){t.push("request=GetTile");if(this.options.version){t.push("version="+this.options.version)}if(this.options.style){t.push("style="+this.options.style)}if(this.options.tilematrixSet){t.push("tilematrixSet="+this.options.tilematrixSet)}if(this.options.format){t.push("format="+this.options.format)}if(this.options.tileSize){t.push("width="+this.options.tileSize);t.push("height="+this.options.tileSize)}if(this.options.layer){t.push("layer="+this.options.layer)}t.push("tilematrix={z}");t.push("tilerow={y}");t.push("tilecol={x}")}if(this.options.token){t.push("tk="+this.options.token)}t.push("service=WMTS");this._url+=t.join("&");this._layerUrl=this._url};o.prototype.refreshMap=function(t){if(t){this.options.guid=t}this._initLayerUrl();this.map.removeLayer(this.layerID);this.map.removeSource(this.sourceID);this.map_source["tiles"]=[this._layerUrl];this.map.addSource(this.sourceID,this.map_source);this.map.addLayer(this.mLayer)};e.TDTLayer=o;n.Zondy.Map.TDTLayer=o},function(t,e,r){r(345);var n=r(17).Object;t.exports=function t(e,r,i){return n.defineProperty(e,r,i)}},function(t,e,r){var n=r(30);n(n.S+n.F*!r(37),"Object",{defineProperty:r(44).f})},function(t,e,r){var n=r(17);var i=n.JSON||(n.JSON={stringify:JSON.stringify});t.exports=function t(e){return i.stringify.apply(i,arguments)}},function(t,e,r){r(348);t.exports=r(17).Object.keys},function(t,e,r){var n=r(72);var i=r(73);r(92)("keys",function(){return function t(e){return i(n(e))}})},function(t,e,r){var n=r(55);var i=r(199);var o=r(350);t.exports=function(t){return function(e,r,s){var a=n(e);var u=i(a.length);var l=o(s,u);var c;if(t&&r!=r)while(u>l){c=a[l++];if(c!=c)return true}else for(;u>l;l++)if(t||l in a){if(a[l]===r)return t||l||0}return!t&&-1}}},function(t,e,r){var n=r(128);var i=Math.max;var o=Math.min;t.exports=function(t,e){t=n(t);return t<0?i(t+e,0):o(t,e)}},function(t,e,r){r(352);var n=r(17).Object;t.exports=function t(e,r){return n.getOwnPropertyDescriptor(e,r)}},function(t,e,r){var n=r(55);var i=r(133).f;r(92)("getOwnPropertyDescriptor",function(){return function t(e,r){return i(n(e),r)}})},function(t,e,r){t.exports={default:r(354),__esModule:true}},function(t,e,r){r(200);t.exports=r(17).Object.getOwnPropertySymbols},function(t,e,r){var n=r(91)("meta");var i=r(45);var o=r(54);var s=r(44).f;var a=0;var u=Object.isExtensible||function(){return true};var l=!r(62)(function(){return u(Object.preventExtensions({}))});var c=function(t){s(t,n,{value:{i:"O"+ ++a,w:{}}})};var h=function(t,e){if(!i(t))return typeof t=="symbol"?t:(typeof t=="string"?"S":"P")+t;if(!o(t,n)){if(!u(t))return"F";if(!e)return"E";c(t)}return t[n].i};var f=function(t,e){if(!o(t,n)){if(!u(t))return true;if(!e)return false;c(t)}return t[n].w};var p=function(t){if(l&&d.NEED&&u(t)&&!o(t,n))c(t);return t};var d=t.exports={KEY:n,NEED:false,fastKey:h,getWeak:f,onFreeze:p}},function(t,e,r){var n=r(73);var i=r(95);var o=r(93);t.exports=function(t){var e=n(t);var r=i.f;if(r){var s=r(t);var a=o.f;var u=0;var l;while(s.length>u)if(a.call(t,l=s[u++]))e.push(l)}return e}},function(t,e,r){var n=r(74);t.exports=Array.isArray||function t(e){return n(e)=="Array"}},function(t,e,r){var n=r(44);var i=r(31);var o=r(73);t.exports=r(37)?Object.defineProperties:function t(e,r){i(e);var s=o(r);var a=s.length;var u=0;var l;while(a>u)n.f(e,l=s[u++],r[l]);return e}},function(t,e,r){t.exports={default:r(360),__esModule:true}},function(t,e,r){r(361);var n=r(17).Object;t.exports=function t(e){return n.getOwnPropertyNames(e)}},function(t,e,r){r(92)("getOwnPropertyNames",function(){return r(203).f})},function(t,e,r){t.exports={default:r(363),__esModule:true}},function(t,e,r){r(138);r(139);t.exports=r(134).f("iterator")},function(t,e,r){var n=r(128);var i=r(127);t.exports=function(t){return function(e,r){var o=String(i(e));var s=n(r);var a=o.length;var u,l;if(s<0||s>=a)return t?"":undefined;u=o.charCodeAt(s);return u<55296||u>56319||s+1===a||(l=o.charCodeAt(s+1))<56320||l>57343?t?o.charAt(s):u:t?o.slice(s,s+2):(u-55296<<10)+(l-56320)+65536}}},function(t,e,r){"use strict";var n=r(136);var i=r(90);var o=r(94);var s={};r(53)(s,r(24)("iterator"),function(){return this});t.exports=function(t,e,r){t.prototype=n(s,{next:i(1,r)});o(t,e+" Iterator")}},function(t,e,r){"use strict";var n=r(367);var i=r(368);var o=r(76);var s=r(55);t.exports=r(204)(Array,"Array",function(t,e){this._t=s(t);this._i=0;this._k=e},function(){var t=this._t;var e=this._k;var r=this._i++;if(!t||r>=t.length){this._t=undefined;return i(1)}if(e=="keys")return i(0,r);if(e=="values")return i(0,t[r]);return i(0,[r,t[r]])},"values");o.Arguments=o.Array;n("keys");n("values");n("entries")},function(t,e){t.exports=function(){}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,r){t.exports={default:r(370),__esModule:true}},function(t,e,r){r(200);r(206);r(371);r(372);t.exports=r(17).Symbol},function(t,e,r){r(135)("asyncIterator")},function(t,e,r){r(135)("observable")},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Arc=undefined;var n=r(0);var i=r(8);var o=function t(e,r){this.ArcID=0;var n=r!==undefined?r:{};(0,i.extend)(this,n);this.Dots=e!==undefined&&e!==null?e:null};e.Arc=o;n.Zondy.Object.Arc=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CAttDataRow=undefined;var n=r(0);var i=r(8);var o=function t(e,r,n){var o=n!==undefined?n:{};(0,i.extend)(this,o);this.FID=r!==undefined?r:0;this.Values=e!==undefined?e:null};e.CAttDataRow=o;n.Zondy.Object.CAttDataRow=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CDisplayStyle=undefined;var n=r(0);var i=r(8);var o=r(207);var s=function t(e){var r=e!==undefined?e:{};(0,i.extend)(this,r);this.AnnSizeFixed=r.AnnSizeFixed!==undefined?r.AnnSizeFixed:false;this.DriverQuality=r.DriverQuality!==undefined?r.DriverQuality:0;this.DynProjFlag=r.DynProjFlag!==undefined?r.DynProjFlag:false;this.FollowScale=r.FollowScale!==undefined?r.FollowScale:false;this.LinPenWidFixed=r.LinPenWidFixed!==undefined?r.LinPenWidFixed:false;this.LinSizeFixed=r.LinSizeFixed!==undefined?r.LinSizeFixed:false;this.PntPenWidFixed=r.PntPenWidFixed!==undefined?r.PntPenWidFixed:false;this.PntSizeFixed=r.PntSizeFixed!==undefined?r.PntSizeFixed:false;this.RegPenWidFixed=r.RegPenWidFixed!==undefined?r.RegPenWidFixed:false;this.RegSizeFixed=r.RegSizeFixed!==undefined?r.RegSizeFixed:false;this.ShowCoordPnt=r.ShowCoordPnt!==undefined?r.ShowCoordPnt:false;this.ShowElemRect=r.ShowElemRect!==undefined?r.ShowElemRect:false;this.ShowStyle=r.ShowStyle!==undefined?r.ShowStyle:null;this.LayerStyles=r.LayerStyles!==undefined?r.LayerStyles:null;this.SymbleShow=r.SymbleShow!==undefined?r.SymbleShow:false};e.CDisplayStyle=s;n.Zondy.Object.CDisplayStyle=s},function(t,e,r){"use strict";e.__esModule=true;var n=r(88);var i=o(n);function o(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e,r){if(e in t){(0,i.default)(t,e,{value:r,enumerable:true,configurable:true,writable:true})}else{t[e]=r}return t}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Circle=undefined;var n=r(2);var i=v(n);var o=r(1);var s=v(o);var a=r(9);var u=v(a);var l=r(3);var c=v(l);var h=r(4);var f=v(h);var p=r(0);var d=r(56);var y=r(33);function v(t){return t&&t.__esModule?t:{default:t}}var g=function(t){(0,f.default)(e,t);function e(t,r,n){(0,s.default)(this,e);var o=n?n:{};var a=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,o));a.point=t!==undefined&&t!==null?t:null;a.radious=r!==undefined&&r!==null?r:null;return a}(0,u.default)(e,[{key:"setByOL",value:function t(e){if(e!==undefined&&e!==null){var r=e.getCenter();var n=e.getRadius();this.point=new p.Zondy.Object.Point2D(r[0],r[1]);this.radious=n}}},{key:"toString",value:function t(){if(this.point===null||this.point.length===0||this.radious===null){return""}return this.point.x+","+this.point.y+","+this.radious}},{key:"getGeometryType",value:function t(){return"Circle"}}]);return e}(d.Tangram);e.Circle=g;p.Zondy.Object.Circle=g},function(t,e,r){r(379);t.exports=r(17).Object.getPrototypeOf},function(t,e,r){var n=r(72);var i=r(205);r(92)("getPrototypeOf",function(){return function t(e){return i(n(e))}})},function(t,e,r){t.exports={default:r(381),__esModule:true}},function(t,e,r){r(382);t.exports=r(17).Object.setPrototypeOf},function(t,e,r){var n=r(30);n(n.S,"Object",{setPrototypeOf:r(383).set})},function(t,e,r){var n=r(45);var i=r(31);var o=function(t,e){i(t);if(!n(e)&&e!==null)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{n=r(71)(Function.call,r(133).f(Object.prototype,"__proto__").set,2);n(t,[]);e=!(t instanceof Array)}catch(t){e=true}return function t(r,i){o(r,i);if(e)r.__proto__=i;else n(r,i);return r}}({},false):undefined),check:o}},function(t,e,r){t.exports={default:r(385),__esModule:true}},function(t,e,r){r(386);var n=r(17).Object;t.exports=function t(e,r){return n.create(e,r)}},function(t,e,r){var n=r(30);n(n.S,"Object",{create:r(136)})},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.MultiPolygon=undefined;var n=r(2);var i=v(n);var o=r(1);var s=v(o);var a=r(9);var u=v(a);var l=r(3);var c=v(l);var h=r(4);var f=v(h);var p=r(56);var d=r(33);var y=r(220);function v(t){return t&&t.__esModule?t:{default:t}}var g=function(t){(0,f.default)(e,t);function e(t,r){(0,s.default)(this,e);var n=r?r:{};var o=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,n));o.polygonArr=t!==undefined&&t!==null&&Array.isArray(t)?t:new Array;return o}(0,u.default)(e,[{key:"setByOL",value:function t(e){if(e!==undefined&&e!==null){this.polygonArr=[];var r=e.getLinearRingCount();var n=e.getLinearRings();for(var i=0;i<r;i++){var o=n[i].getCoordinates();var s=o.length;var a=[];for(var u=0;u<s;u++){a[u]=new d.Point2D(o[u][0],o[u][1])}this.polygonArr[i]=new y.Polygon(a)}}}},{key:"toString",value:function t(){if(this.polygonArr===undefined||this.polygonArr===null||this.polygonArr.length===0)return"";var e="";for(var r=0;r<this.polygonArr.length;r++){e+=this.polygonArr[r].toString()+";"}return e.substring(0,e.length-1)}},{key:"getGeometryType",value:function t(){return"multiPolygon"}}]);return e}(p.Tangram);e.MultiPolygon=g;Zondy.Object.MultiPolygon=g},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.PolyLine=undefined;var n=r(2);var i=y(n);var o=r(1);var s=y(o);var a=r(9);var u=y(a);var l=r(3);var c=y(l);var h=r(4);var f=y(h);var p=r(56);var d=r(33);function y(t){return t&&t.__esModule?t:{default:t}}var v=function(t){(0,f.default)(e,t);function e(t,r){(0,s.default)(this,e);var n=r?r:{};var o=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,n));o.nearDis=n.nearDis!==undefined&&n.nearDis!==null?parseFloat(n.nearDis):null;o.pointArr=t!==undefined&&t!==null&&Array.isArray(t)?t:new Array;return o}(0,u.default)(e,[{key:"setByOL",value:function t(e){if(e!==undefined&&e!==null){var r=e.getCoordinates();var n=r.length;for(var i=0;i<n;i++){this.pointArr[i]=new d.Point2D(r[i][0],r[i][1])}}}},{key:"toString",value:function t(){if(this.pointArr===null||this.pointArr.length===0)return"";var e=this.pointArr[0].x+","+this.pointArr[0].y;for(var r=1;r<this.pointArr.length;r++){e+=","+this.pointArr[r].x+","+this.pointArr[r].y}if(this.nearDis!==undefined&&this.nearDis!==null){e+=";"+this.nearDis}return this.Trim(e,"g")}},{key:"getGeometryType",value:function t(){return"line"}}]);return e}(p.Tangram);e.PolyLine=v;Zondy.Object.PolyLine=v},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.VectCls=undefined;var n=r(0);var i=r(8);var o=r(25);var s=r(96);var a=function t(e){var r=e!==undefined?e:{};(0,i.extend)(this,r);this.clsType=r.clsType!==undefined?r.clsType:o.VectClsType.SFCls;this.clsName=r.clsName!==undefined?r.clsName:null;this.geoType=r.geoType!==undefined?r.geoType:1;this.srefName=r.srefName!==undefined?encodeURI(r.srefName):"";this.dsName=r.dsName!==undefined?encodeURI(r.dsName):"";this.attStruct=r.attStruct!==undefined?r.attStruct:null};e.VectCls=a;n.Zondy.Object.VectCls=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.SlopLineParam=e.NetAnalysisExtent=e.NetAnalyse=e.MeshingParam=e.ContourRegionInfo=e.ContourZValue=e.ContourParam=e.ContourNoteParam=undefined;var n=r(221);var i=r(222);var o=r(224);var s=r(225);var a=r(226);var u=r(391);var l=r(392);var c=r(223);e.ContourNoteParam=n.ContourNoteParam;e.ContourParam=i.ContourParam;e.ContourZValue=o.ContourZValue;e.ContourRegionInfo=s.ContourRegionInfo;e.MeshingParam=a.MeshingParam;e.NetAnalyse=u.NetAnalyse;e.NetAnalysisExtent=l.NetAnalysisExtent;e.SlopLineParam=c.SlopLineParam},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.NetAnalyse=undefined;var n=r(0);var i=r(8);var o=function t(e){var r=e!==undefined?e:{};(0,i.extend)(this,r);this.netCls=r.netCls!==undefined?r.netCls:null;this.flagPosStr=r.flagPosStr!==undefined?r.flagPosStr:null;this.barrierPosStr=r.barrierPosStr!==undefined?r.barrierPosStr:null;this.weight=r.weight!==undefined?r.weight:null;this.mode=r.mode!==undefined?r.mode:null;this.isTour=r.isTour!==undefined?r.isTour:false;this.isTravel=r.isTravel!==undefined?r.isTravel:false;this.usedTWgt=r.usedTWgt!==undefined?r.usedTWgt:false;this.turnWgt=r.turnWgt!==undefined?r.turnWgt:null;this.roadName=r.roadName!==undefined?r.roadName:"name"};e.NetAnalyse=o;n.Zondy.Object.NetAnalyse=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.NetAnalysisExtent=undefined;var n=r(16);var i=_(n);var o=r(2);var s=_(o);var a=r(1);var u=_(a);var l=r(9);var c=_(l);var h=r(3);var f=_(h);var p=r(4);var d=_(p);var y=r(0);var v=r(8);var g=r(27);var m=r(15);function _(t){return t&&t.__esModule?t:{default:t}}var b=function(t){(0,d.default)(e,t);function e(t){(0,u.default)(this,e);var r=t||{};var n=(0,f.default)(this,(e.__proto__||(0,s.default)(e)).call(this,r));n.netClsUrl=r.netClsUrl!==undefined?r.netClsUrl:null;n.flagPosStr=r.flagPosStr!==undefined?r.flagPosStr:null;n.analyTp=r.analyTp!==undefined?r.analyTp:"UserMode";n.weight=r.weight!==undefined?r.weight:",Weight1,Weight1";n.outFormat=r.outFormat!==undefined?r.outFormat:"JSON";n.elementType=r.elementType!==undefined?r.elementType:2;n.nearDis=r.nearDis!==undefined?r.nearDis:.001;n.barrierPosStr=r.barrierPosStr!==undefined?r.barrierPosStr:null;n.roadName=r.roadName!==undefined?r.roadName:"name";n.baseUrl="igs/rest/netAnaly";return n}(0,c.default)(e,[{key:"getNetInfo",value:function t(e,r,n,i){if(e==null||e==undefined){e="weight"}this.partUrl="netClsInfo?netCls="+this.netClsUrl+"&type="+e;var o=this;var s=o.getFullUrl();var a=new m.IgsServiceBase(s,{eventListeners:{scope:o,processCompleted:r,processFailed:n}});a.processAsync()}},{key:"addNetFlag",value:function t(e,r,n,o,s){var a=null;var u={};if(o!=null&&o.toUpperCase()=="POST"){u.dotVal=e;this.partUrl="netClsFlag?netCls="+this.netClsUrl+"&type="+this.elementType+"&nearDis="+this.nearDis}else{this.partUrl="netClsFlag?netCls="+this.netClsUrl+"&type="+this.elementType+"&value="+e+"&nearDis="+this.nearDis}var l=this;var c=l.getFullUrl();var h=new m.IgsServiceBase(c,{eventListeners:{scope:l,processCompleted:r,processFailed:n}});if(o!=null&&o.toUpperCase()=="POST"){h.processAsync({method:"POST",data:(0,i.default)(u),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}else{h.processAsync()}}},{key:"netAnalyse",value:function t(e,r,n,o){this.partUrl="netAnalyse";var s=this;var a=s.getFullUrl();var u=new m.IgsServiceBase(a,{eventListeners:{scope:s,processCompleted:r,processFailed:n}});u.processAsync({method:"POST",data:(0,i.default)(e),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}},{key:"comNetAnalyse",value:function t(e,r,n,o){this.partUrl="comNetAnalyse";var s=this;var a=s.getFullUrl();var u=new m.IgsServiceBase(a,{eventListeners:{scope:s,processCompleted:r,processFailed:n}});u.processAsync({method:"POST",data:(0,i.default)(e),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}},{key:"pluNetAnalyse",value:function t(e,r,n,o){this.partUrl="pluNetAnalyse";var s=this;var a=s.getFullUrl();var u=new m.IgsServiceBase(a,{eventListeners:{scope:s,processCompleted:r,processFailed:n}});u.processAsync({method:"POST",data:(0,i.default)(e),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}]);return e}(g.ServiceBase);e.NetAnalysisExtent=b;y.Zondy.Service.NetAnalysisExtent=b},function(t,e,r){r(206);r(138);r(139);r(394);r(405);r(406);t.exports=r(17).Promise},function(t,e,r){"use strict";var n=r(75);var i=r(20);var o=r(71);var s=r(230);var a=r(30);var u=r(45);var l=r(89);var c=r(395);var h=r(396);var f=r(232);var p=r(233).set;var d=r(400)();var y=r(146);var v=r(234);var g=r(401);var m=r(235);var _="Promise";var b=i.TypeError;var x=i.process;var S=x&&x.versions;var w=S&&S.v8||"";var C=i[_];var I=s(x)=="process";var E=function(){};var P,M,L,N;var T=M=y.f;var O=!!function(){try{var t=C.resolve(1);var e=(t.constructor={})[r(24)("species")]=function(t){t(E,E)};return(I||typeof PromiseRejectionEvent=="function")&&t.then(E)instanceof e&&w.indexOf("6.6")!==0&&g.indexOf("Chrome/66")===-1}catch(t){}}();var A=function(t){var e;return u(t)&&typeof(e=t.then)=="function"?e:false};var R=function(t,e){if(t._n)return;t._n=true;var r=t._c;d(function(){var n=t._v;var i=t._s==1;var o=0;var s=function(e){var r=i?e.ok:e.fail;var o=e.resolve;var s=e.reject;var a=e.domain;var u,l,c;try{if(r){if(!i){if(t._h==2)k(t);t._h=1}if(r===true)u=n;else{if(a)a.enter();u=r(n);if(a){a.exit();c=true}}if(u===e.promise){s(b("Promise-chain cycle"))}else if(l=A(u)){l.call(u,o,s)}else o(u)}else s(n)}catch(t){if(a&&!c)a.exit();s(t)}};while(r.length>o)s(r[o++]);t._c=[];t._n=false;if(e&&!t._h)F(t)})};var F=function(t){p.call(i,function(){var e=t._v;var r=D(t);var n,o,s;if(r){n=v(function(){if(I){x.emit("unhandledRejection",e,t)}else if(o=i.onunhandledrejection){o({promise:t,reason:e})}else if((s=i.console)&&s.error){s.error("Unhandled promise rejection",e)}});t._h=I||D(t)?2:1}t._a=undefined;if(r&&n.e)throw n.v})};var D=function(t){return t._h!==1&&(t._a||t._c).length===0};var k=function(t){p.call(i,function(){var e;if(I){x.emit("rejectionHandled",t)}else if(e=i.onrejectionhandled){e({promise:t,reason:t._v})}})};var j=function(t){var e=this;if(e._d)return;e._d=true;e=e._w||e;e._v=t;e._s=2;if(!e._a)e._a=e._c.slice();R(e,true)};var G=function(t){var e=this;var r;if(e._d)return;e._d=true;e=e._w||e;try{if(e===t)throw b("Promise can't be resolved itself");if(r=A(t)){d(function(){var n={_w:e,_d:false};try{r.call(t,o(G,n,1),o(j,n,1))}catch(t){j.call(n,t)}})}else{e._v=t;e._s=1;R(e,false)}}catch(t){j.call({_w:e,_d:false},t)}};if(!O){C=function t(e){c(this,C,_,"_h");l(e);P.call(this);try{e(o(G,this,1),o(j,this,1))}catch(t){j.call(this,t)}};P=function t(e){this._c=[];this._a=undefined;this._s=0;this._d=false;this._v=undefined;this._h=0;this._n=false};P.prototype=r(402)(C.prototype,{then:function t(e,r){var n=T(f(this,C));n.ok=typeof e=="function"?e:true;n.fail=typeof r=="function"&&r;n.domain=I?x.domain:undefined;this._c.push(n);if(this._a)this._a.push(n);if(this._s)R(this,false);return n.promise},catch:function(t){return this.then(undefined,t)}});L=function(){var t=new P;this.promise=t;this.resolve=o(G,t,1);this.reject=o(j,t,1)};y.f=T=function(t){return t===C||t===N?new L(t):M(t)}}a(a.G+a.W+a.F*!O,{Promise:C});r(94)(C,_);r(403)(_);N=r(17)[_];a(a.S+a.F*!O,_,{reject:function t(e){var r=T(this);var n=r.reject;n(e);return r.promise}});a(a.S+a.F*(n||!O),_,{resolve:function t(e){return m(n&&this===N?C:this,e)}});a(a.S+a.F*!(O&&r(404)(function(t){C.all(t)["catch"](E)})),_,{all:function t(e){var r=this;var n=T(r);var i=n.resolve;var o=n.reject;var s=v(function(){var t=[];var n=0;var s=1;h(e,false,function(e){var a=n++;var u=false;t.push(undefined);s++;r.resolve(e).then(function(e){if(u)return;u=true;t[a]=e;--s||i(t)},o)});--s||i(t)});if(s.e)o(s.v);return n.promise},race:function t(e){var r=this;var n=T(r);var i=n.reject;var o=v(function(){h(e,false,function(t){r.resolve(t).then(n.resolve,i)})});if(o.e)i(o.v);return n.promise}})},function(t,e){t.exports=function(t,e,r,n){if(!(t instanceof e)||n!==undefined&&n in t){throw TypeError(r+": incorrect invocation!")}return t}},function(t,e,r){var n=r(71);var i=r(397);var o=r(398);var s=r(31);var a=r(199);var u=r(231);var l={};var c={};var e=t.exports=function(t,e,r,h,f){var p=f?function(){return t}:u(t);var d=n(r,h,e?2:1);var y=0;var v,g,m,_;if(typeof p!="function")throw TypeError(t+" is not iterable!");if(o(p))for(v=a(t.length);v>y;y++){_=e?d(s(g=t[y])[0],g[1]):d(t[y]);if(_===l||_===c)return _}else for(m=p.call(t);!(g=m.next()).done;){_=i(m,d,g.value,e);if(_===l||_===c)return _}};e.BREAK=l;e.RETURN=c},function(t,e,r){var n=r(31);t.exports=function(t,e,r,i){try{return i?e(n(r)[0],r[1]):e(r)}catch(e){var o=t["return"];if(o!==undefined)n(o.call(t));throw e}}},function(t,e,r){var n=r(76);var i=r(24)("iterator");var o=Array.prototype;t.exports=function(t){return t!==undefined&&(n.Array===t||o[i]===t)}},function(t,e){t.exports=function(t,e,r){var n=r===undefined;switch(e.length){case 0:return n?t():t.call(r);case 1:return n?t(e[0]):t.call(r,e[0]);case 2:return n?t(e[0],e[1]):t.call(r,e[0],e[1]);case 3:return n?t(e[0],e[1],e[2]):t.call(r,e[0],e[1],e[2]);case 4:return n?t(e[0],e[1],e[2],e[3]):t.call(r,e[0],e[1],e[2],e[3])}return t.apply(r,e)}},function(t,e,r){var n=r(20);var i=r(233).set;var o=n.MutationObserver||n.WebKitMutationObserver;var s=n.process;var a=n.Promise;var u=r(74)(s)=="process";t.exports=function(){var t,e,r;var l=function(){var n,i;if(u&&(n=s.domain))n.exit();while(t){i=t.fn;t=t.next;try{i()}catch(n){if(t)r();else e=undefined;throw n}}e=undefined;if(n)n.enter()};if(u){r=function(){s.nextTick(l)}}else if(o&&!(n.navigator&&n.navigator.standalone)){var c=true;var h=document.createTextNode("");new o(l).observe(h,{characterData:true});r=function(){h.data=c=!c}}else if(a&&a.resolve){var f=a.resolve(undefined);r=function(){f.then(l)}}else{r=function(){i.call(n,l)}}return function(n){var i={fn:n,next:undefined};if(e)e.next=i;if(!t){t=i;r()}e=i}}},function(t,e,r){var n=r(20);var i=n.navigator;t.exports=i&&i.userAgent||""},function(t,e,r){var n=r(53);t.exports=function(t,e,r){for(var i in e){if(r&&t[i])t[i]=e[i];else n(t,i,e[i])}return t}},function(t,e,r){"use strict";var n=r(20);var i=r(17);var o=r(44);var s=r(37);var a=r(24)("species");t.exports=function(t){var e=typeof i[t]=="function"?i[t]:n[t];if(s&&e&&!e[a])o.f(e,a,{configurable:true,get:function(){return this}})}},function(t,e,r){var n=r(24)("iterator");var i=false;try{var o=[7][n]();o["return"]=function(){i=true};Array.from(o,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!i)return false;var r=false;try{var o=[7];var s=o[n]();s.next=function(){return{done:r=true}};o[n]=function(){return s};t(o)}catch(t){}return r}},function(t,e,r){"use strict";var n=r(30);var i=r(17);var o=r(20);var s=r(232);var a=r(235);n(n.P+n.R,"Promise",{finally:function(t){var e=s(this,i.Promise||o.Promise);var r=typeof t=="function";return this.then(r?function(r){return a(e,t()).then(function(){return r})}:t,r?function(r){return a(e,t()).then(function(){throw r})}:t)}})},function(t,e,r){"use strict";var n=r(30);var i=r(146);var o=r(234);n(n.S,"Promise",{try:function(t){var e=i.f(this);var r=o(t);(r.e?e.reject:e.resolve)(r.v);return e.promise}})},function(t,e,r){(function(t,e){(function(t,e){true?e():undefined})(this,function(){"use strict";function r(t){var e=this.constructor;return this.then(function(r){return e.resolve(t()).then(function(){return r})},function(r){return e.resolve(t()).then(function(){return e.reject(r)})})}function n(t){var e=this;return new e(function(e,r){if(!(t&&typeof t.length!=="undefined")){return r(new TypeError(typeof t+" "+t+" is not iterable(cannot read property Symbol(Symbol.iterator))"))}var n=Array.prototype.slice.call(t);if(n.length===0)return e([]);var i=n.length;function o(t,r){if(r&&(typeof r==="object"||typeof r==="function")){var s=r.then;if(typeof s==="function"){s.call(r,function(e){o(t,e)},function(r){n[t]={status:"rejected",reason:r};if(--i===0){e(n)}});return}}n[t]={status:"fulfilled",value:r};if(--i===0){e(n)}}for(var s=0;s<n.length;s++){o(s,n[s])}})}var i=setTimeout;function o(t){return Boolean(t&&typeof t.length!=="undefined")}function s(){}function a(t,e){return function(){t.apply(e,arguments)}}function u(t){if(!(this instanceof u))throw new TypeError("Promises must be constructed via new");if(typeof t!=="function")throw new TypeError("not a function");this._state=0;this._handled=false;this._value=undefined;this._deferreds=[];d(t,this)}function l(t,e){while(t._state===3){t=t._value}if(t._state===0){t._deferreds.push(e);return}t._handled=true;u._immediateFn(function(){var r=t._state===1?e.onFulfilled:e.onRejected;if(r===null){(t._state===1?c:h)(e.promise,t._value);return}var n;try{n=r(t._value)}catch(t){h(e.promise,t);return}c(e.promise,n)})}function c(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&(typeof e==="object"||typeof e==="function")){var r=e.then;if(e instanceof u){t._state=3;t._value=e;f(t);return}else if(typeof r==="function"){d(a(r,e),t);return}}t._state=1;t._value=e;f(t)}catch(e){h(t,e)}}function h(t,e){t._state=2;t._value=e;f(t)}function f(t){if(t._state===2&&t._deferreds.length===0){u._immediateFn(function(){if(!t._handled){u._unhandledRejectionFn(t._value)}})}for(var e=0,r=t._deferreds.length;e<r;e++){l(t,t._deferreds[e])}t._deferreds=null}function p(t,e,r){this.onFulfilled=typeof t==="function"?t:null;this.onRejected=typeof e==="function"?e:null;this.promise=r}function d(t,e){var r=false;try{t(function(t){if(r)return;r=true;c(e,t)},function(t){if(r)return;r=true;h(e,t)})}catch(t){if(r)return;r=true;h(e,t)}}u.prototype["catch"]=function(t){return this.then(null,t)};u.prototype.then=function(t,e){var r=new this.constructor(s);l(this,new p(t,e,r));return r};u.prototype["finally"]=r;u.all=function(t){return new u(function(e,r){if(!o(t)){return r(new TypeError("Promise.all accepts an array"))}var n=Array.prototype.slice.call(t);if(n.length===0)return e([]);var i=n.length;function s(t,o){try{if(o&&(typeof o==="object"||typeof o==="function")){var a=o.then;if(typeof a==="function"){a.call(o,function(e){s(t,e)},r);return}}n[t]=o;if(--i===0){e(n)}}catch(t){r(t)}}for(var a=0;a<n.length;a++){s(a,n[a])}})};u.allSettled=n;u.resolve=function(t){if(t&&typeof t==="object"&&t.constructor===u){return t}return new u(function(e){e(t)})};u.reject=function(t){return new u(function(e,r){r(t)})};u.race=function(t){return new u(function(e,r){if(!o(t)){return r(new TypeError("Promise.race accepts an array"))}for(var n=0,i=t.length;n<i;n++){u.resolve(t[n]).then(e,r)}})};u._immediateFn=typeof t==="function"&&function(e){t(e)}||function(t){i(t,0)};u._unhandledRejectionFn=function t(e){if(typeof console!=="undefined"&&console){console.warn("Possible Unhandled Promise Rejection:",e)}};var y=function(){if(typeof self!=="undefined"){return self}if(typeof window!=="undefined"){return window}if(typeof e!=="undefined"){return e}throw new Error("unable to locate global object")}();if(typeof y["Promise"]!=="function"){y["Promise"]=u}else{if(!y.Promise.prototype["finally"]){y.Promise.prototype["finally"]=r}if(!y.Promise.allSettled){y.Promise.allSettled=n}}})}).call(this,r(239).setImmediate,r(77))},function(t,e,r){(function(t,e){(function(t,r){"use strict";if(t.setImmediate){return}var n=1;var i={};var o=false;var s=t.document;var a;function u(t){if(typeof t!=="function"){t=new Function(""+t)}var e=new Array(arguments.length-1);for(var r=0;r<e.length;r++){e[r]=arguments[r+1]}var o={callback:t,args:e};i[n]=o;a(n);return n++}function l(t){delete i[t]}function c(t){var e=t.callback;var n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(r,n);break}}function h(t){if(o){setTimeout(h,0,t)}else{var e=i[t];if(e){o=true;try{c(e)}finally{l(t);o=false}}}}function f(){a=function(t){e.nextTick(function(){h(t)})}}function p(){if(t.postMessage&&!t.importScripts){var e=true;var r=t.onmessage;t.onmessage=function(){e=false};t.postMessage("","*");t.onmessage=r;return e}}function d(){var e="setImmediate$"+Math.random()+"$";var r=function(r){if(r.source===t&&typeof r.data==="string"&&r.data.indexOf(e)===0){h(+r.data.slice(e.length))}};if(t.addEventListener){t.addEventListener("message",r,false)}else{t.attachEvent("onmessage",r)}a=function(r){t.postMessage(e+r,"*")}}function y(){var t=new MessageChannel;t.port1.onmessage=function(t){var e=t.data;h(e)};a=function(e){t.port2.postMessage(e)}}function v(){var t=s.documentElement;a=function(e){var r=s.createElement("script");r.onreadystatechange=function(){h(e);r.onreadystatechange=null;t.removeChild(r);r=null};t.appendChild(r)}}function g(){a=function(t){setTimeout(h,0,t)}}var m=Object.getPrototypeOf&&Object.getPrototypeOf(t);m=m&&m.setTimeout?m:t;if({}.toString.call(t.process)==="[object process]"){f()}else if(p()){d()}else if(t.MessageChannel){y()}else if(s&&"onreadystatechange"in s.createElement("script")){v()}else{g()}m.setImmediate=u;m.clearImmediate=l})(typeof self==="undefined"?typeof t==="undefined"?this:t:self)}).call(this,r(77),r(99))},function(t,e){(function(e){"use strict";if(!e.__disableNativeFetch&&e.fetch){return}function r(t){if(typeof t!=="string"){t=String(t)}if(/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t)){throw new TypeError("Invalid character in header field name")}return t.toLowerCase()}function n(t){if(typeof t!=="string"){t=String(t)}return t}function i(t){this.map={};if(t instanceof i){t.forEach(function(t,e){this.append(e,t)},this)}else if(t){Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}}i.prototype.append=function(t,e){t=r(t);e=n(e);var i=this.map[t];if(!i){i=[];this.map[t]=i}i.push(e)};i.prototype["delete"]=function(t){delete this.map[r(t)]};i.prototype.get=function(t){var e=this.map[r(t)];return e?e[0]:null};i.prototype.getAll=function(t){return this.map[r(t)]||[]};i.prototype.has=function(t){return this.map.hasOwnProperty(r(t))};i.prototype.set=function(t,e){this.map[r(t)]=[n(e)]};i.prototype.forEach=function(t,e){Object.getOwnPropertyNames(this.map).forEach(function(r){this.map[r].forEach(function(n){t.call(e,n,r,this)},this)},this)};function o(t){if(t.bodyUsed){return Promise.reject(new TypeError("Already read"))}t.bodyUsed=true}function s(t){return new Promise(function(e,r){t.onload=function(){e(t.result)};t.onerror=function(){r(t.error)}})}function a(t){var e=new FileReader;e.readAsArrayBuffer(t);return s(e)}function u(t,e){var r=new FileReader;var n=e.headers.map["content-type"]?e.headers.map["content-type"].toString():"";var i=/charset\=[0-9a-zA-Z\-\_]*;?/;var o=t.type.match(i)||n.match(i);var a=[t];if(o){a.push(o[0].replace(/^charset\=/,"").replace(/;$/,""))}r.readAsText.apply(r,a);return s(r)}var l={blob:"FileReader"in e&&"Blob"in e&&function(){try{new Blob;return true}catch(t){return false}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};function c(){this.bodyUsed=false;this._initBody=function(t,e){this._bodyInit=t;if(typeof t==="string"){this._bodyText=t}else if(l.blob&&Blob.prototype.isPrototypeOf(t)){this._bodyBlob=t;this._options=e}else if(l.formData&&FormData.prototype.isPrototypeOf(t)){this._bodyFormData=t}else if(!t){this._bodyText=""}else if(l.arrayBuffer&&ArrayBuffer.prototype.isPrototypeOf(t)){}else{throw new Error("unsupported BodyInit type")}};if(l.blob){this.blob=function(){var t=o(this);if(t){return t}if(this._bodyBlob){return Promise.resolve(this._bodyBlob)}else if(this._bodyFormData){throw new Error("could not read FormData body as blob")}else{return Promise.resolve(new Blob([this._bodyText]))}};this.arrayBuffer=function(){return this.blob().then(a)};this.text=function(){var t=o(this);if(t){return t}if(this._bodyBlob){return u(this._bodyBlob,this._options)}else if(this._bodyFormData){throw new Error("could not read FormData body as text")}else{return Promise.resolve(this._bodyText)}}}else{this.text=function(){var t=o(this);return t?t:Promise.resolve(this._bodyText)}}if(l.formData){this.formData=function(){return this.text().then(d)}}this.json=function(){return this.text().then(JSON.parse)};return this}var h=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function f(t){var e=t.toUpperCase();return h.indexOf(e)>-1?e:t}function p(t,e){e=e||{};var r=e.body;if(p.prototype.isPrototypeOf(t)){if(t.bodyUsed){throw new TypeError("Already read")}this.url=t.url;this.credentials=t.credentials;if(!e.headers){this.headers=new i(t.headers)}this.method=t.method;this.mode=t.mode;if(!r){r=t._bodyInit;t.bodyUsed=true}}else{this.url=t}this.credentials=e.credentials||this.credentials||"omit";if(e.headers||!this.headers){this.headers=new i(e.headers)}this.method=f(e.method||this.method||"GET");this.mode=e.mode||this.mode||null;this.referrer=null;if((this.method==="GET"||this.method==="HEAD")&&r){throw new TypeError("Body not allowed for GET or HEAD requests")}this._initBody(r,e)}p.prototype.clone=function(){return new p(this)};function d(t){var e=new FormData;t.trim().split("&").forEach(function(t){if(t){var r=t.split("=");var n=r.shift().replace(/\+/g," ");var i=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(i))}});return e}function y(t){var e=new i;var r=t.getAllResponseHeaders().trim().split("\n");r.forEach(function(t){var r=t.trim().split(":");var n=r.shift().trim();var i=r.join(":").trim();e.append(n,i)});return e}c.call(p.prototype);function v(t,e){if(!e){e={}}this._initBody(t,e);this.type="default";this.status=e.status;this.ok=this.status>=200&&this.status<300;this.statusText=e.statusText;this.headers=e.headers instanceof i?e.headers:new i(e.headers);this.url=e.url||""}c.call(v.prototype);v.prototype.clone=function(){return new v(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new i(this.headers),url:this.url})};v.error=function(){var t=new v(null,{status:0,statusText:""});t.type="error";return t};var g=[301,302,303,307,308];v.redirect=function(t,e){if(g.indexOf(e)===-1){throw new RangeError("Invalid status code")}return new v(null,{status:e,headers:{location:t}})};e.Headers=i;e.Request=p;e.Response=v;e.fetch=function(t,e){return new Promise(function(r,n){var i;if(p.prototype.isPrototypeOf(t)&&!e){i=t}else{i=new p(t,e)}var o=new XMLHttpRequest;function s(){if("responseURL"in o){return o.responseURL}if(/^X-Request-URL:/m.test(o.getAllResponseHeaders())){return o.getResponseHeader("X-Request-URL")}return}var a=false;function u(){if(o.readyState!==4){return}var t=o.status===1223?204:o.status;if(t<100||t>599){if(a){return}else{a=true}n(new TypeError("Network request failed"));return}var e={status:t,statusText:o.statusText,headers:y(o),url:s()};var i="response"in o?o.response:o.responseText;if(a){return}else{a=true}r(new v(i,e))}o.onreadystatechange=u;o.onload=u;o.onerror=function(){if(a){return}else{a=true}n(new TypeError("Network request failed"))};o.open(i.method,i.url,true);try{if(i.credentials==="include"){if("withCredentials"in o){o.withCredentials=true}else{console&&console.warn&&console.warn("withCredentials is not supported, you can ignore this warning")}}}catch(t){console&&console.warn&&console.warn("set withCredentials error:"+t)}if("responseType"in o&&l.blob){o.responseType="blob"}i.headers.forEach(function(t,e){o.setRequestHeader(e,t)});o.send(typeof i._bodyInit==="undefined"?null:i._bodyInit)})};e.fetch.polyfill=true;if(typeof t!=="undefined"&&t.exports){t.exports=e.fetch}})(typeof self!=="undefined"?self:this)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.JSONFormat=e.IgsServiceBase=e.FetchRequest=e.RequestTimeout=e.CORS=e.Events=e.CommonServiceBase=undefined;var n=r(228);var i=r(236);var o=r(238);var s=r(15);var a=r(237);e.CommonServiceBase=n.CommonServiceBase;e.Events=i.Events;e.CORS=o.CORS;e.RequestTimeout=o.RequestTimeout;e.FetchRequest=o.FetchRequest;e.IgsServiceBase=s.IgsServiceBase;e.JSONFormat=a.JSONFormat;var u={Events:i.Events,CommonServiceBase:n.CommonServiceBase,CORS:o.CORS,RequestTimeout:o.RequestTimeout,FetchRequest:o.FetchRequest,IgsServiceBase:s.IgsServiceBase,JSONFormat:a.JSONFormat};e.default=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.SystomInfo=e.VectorLayer=e.TileLayer=e.CatalogService=e.MapDoc=e.GDBInfo=e.ColorInfo=undefined;var n=r(412);var i=r(240);var o=r(413);var s=r(64);var a=r(414);var u=r(415);var l=r(416);e.ColorInfo=n.ColorInfo;e.GDBInfo=i.GDBInfo;e.MapDoc=o.MapDoc;e.CatalogService=s.CatalogService;e.TileLayer=a.TileLayer;e.VectorLayer=u.VectorLayer;e.SystomInfo=l.SystomInfo},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ColorInfo=undefined;var n=r(2);var i=y(n);var o=r(1);var s=y(o);var a=r(9);var u=y(a);var l=r(3);var c=y(l);var h=r(4);var f=y(h);var p=r(64);var d=r(15);function y(t){return t&&t.__esModule?t:{default:t}}var v=function(t){(0,f.default)(e,t);function e(t){(0,s.default)(this,e);var r=t||{};var n=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));n.SystemLibID=r.SystemLibID!==undefined?r.SystemLibID:0;n.ColorNO=r.ColorNO!==undefined?r.ColorNO:6;n.Red=r.Red!==undefined?r.Red:0;n.Green=r.Green!==undefined?r.Green:0;n.Blue=r.Blue!==undefined?r.Blue:0;n.addNew=r.addNew!==undefined?r.addNew:false;return n}(0,u.default)(e,[{key:"getColorNO",value:function t(e,r,n){var i=this;if(e!==null&&e!==undefined){if(e.SystemLibID!==undefined){i.SystemLibID=e.SystemLibID}if(e.Red!==undefined){i.Red=e.Red}if(e.Green!==undefined){i.Green=e.Green}if(e.Blue!==undefined){i.Blue=e.Blue}if(e.addNew!==undefined){i.addNew=e.addNew}}i.partUrl="ColorLib/getColorNO?f=json&libID="+i.SystemLibID+"&r="+i.Red+"&g="+i.Green+"&b="+i.Blue+"&addNew="+i.addNew;var o=i.getFullUrl();var s=new d.IgsServiceBase(o,{eventListeners:{scope:i,processCompleted:r,processFailed:n}});s.processAsync()}},{key:"getColorRGB",value:function t(e,r,n){var i=this;if(e!==null&&e!==undefined){if(e.SystemLibID!==undefined){i.SystemLibID=e.SystemLibID}if(e.ColorNO!==undefined){i.ColorNO=e.ColorNO}}i.partUrl="ColorLib/getColorRGB?f=json&libID="+i.SystemLibID+"&colorNO="+i.ColorNO;var o=i.getFullUrl();var s=new d.IgsServiceBase(o,{eventListeners:{scope:i,processCompleted:r,processFailed:n}});s.processAsync()}}]);return e}(p.CatalogService);e.ColorInfo=v;Zondy.Catalog.ColorInfo=v},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.MapDoc=undefined;var n=r(16);var i=_(n);var o=r(2);var s=_(o);var a=r(1);var u=_(a);var l=r(9);var c=_(l);var h=r(3);var f=_(h);var p=r(4);var d=_(p);var y=r(0);var v=r(8);var g=r(64);var m=r(15);function _(t){return t&&t.__esModule?t:{default:t}}var b=function(t){(0,d.default)(e,t);function e(t){(0,u.default)(this,e);var r=t||{};var n=(0,f.default)(this,(e.__proto__||(0,s.default)(e)).call(this,r));n.docName=r.docName!==undefined?r.docName:null;n.mapIndex=r.mapIndex!==undefined?r.mapIndex:0;n.layerID=r.layerID!==undefined?r.layerID:0;n.version=r.version!==undefined?r.version:2;n.include=r.include!==undefined?r.include:"{includeDetails:true,includeSubs:false}";n.returnFullStyle=r.returnFullStyle!==undefined?r.returnFullStyle:false;n.guid=r.guid!==undefined?r.guid:(0,v.newGuid)();return n}(0,c.default)(e,[{key:"getMapDocList",value:function t(e,r){var n=this;n.partUrl="docs?v="+this.version+"&f=json";var i=n.getFullUrl();var o=new m.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}},{key:"getMapDocInfo",value:function t(e,r,n,i,o){var s=this;if(typeof o==="boolean"){s.returnFullStyle=o}if(typeof r==="boolean"||typeof n==="boolean"){var a={includeDetails:typeof r==="boolean"?r:true,includeSubs:typeof n==="boolean"?n:false};s.include=(0,v.toJSON)(a)}s.partUrl="docs/"+s.docName+"?include="+s.include+"&returnFullStyle="+s.returnFullStyle+"&guid="+s.guid+"&f=json";var u=s.getFullUrl();var l=new m.IgsServiceBase(u,{eventListeners:{scope:s,processCompleted:e,processFailed:i}});l.processAsync()}},{key:"getMapInfo",value:function t(e,r,n){var i=this;if(typeof r==="boolean"){i.returnFullStyle=r}i.partUrl="docs/"+i.docName+"/"+i.mapIndex+"?returnFullStyle="+i.returnFullStyle+"&guid="+i.guid+"&f=json";var o=i.getFullUrl();var s=new m.IgsServiceBase(o,{eventListeners:{scope:i,processCompleted:e,processFailed:n}});s.processAsync()}},{key:"getMapDocTree",value:function t(e,r){var n=this;n.partUrl="docs/"+n.docName+"?tree=true&guid="+n.guid+"&f=json";var i=n.getFullUrl();var o=new m.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}},{key:"getLayerInfo",value:function t(e,r){var n=this;n.partUrl="docs/"+n.docName+"/"+n.mapIndex+"/"+n.layerID+"?returnFullStyle="+n.returnFullStyle+"&guid="+n.guid+"&f=json";var i=n.getFullUrl();var o=new m.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}},{key:"getLayersInfo",value:function t(e,r){var n=this;n.partUrl="docs/"+n.docName+"/"+n.mapIndex+"/layers?f=json";var i=n.getFullUrl();var o=new m.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}},{key:"deleteLayer",value:function t(e,r){var n=this;n.partUrl="docs/"+n.docName+"/"+n.mapIndex+"/layers/delete?layerIDs="+n.layerID+"&guid="+n.guid+"&f=json";var i=n.getFullUrl();var o=new m.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}},{key:"addLayer",value:function t(e,r,n){var o=this;o.partUrl="docs/"+o.docName+"/"+o.mapIndex+"/layers/add?guid="+o.guid+"&f=json";var s=o.getFullUrl();var a=new m.IgsServiceBase(s,{eventListeners:{scope:o,processCompleted:r,processFailed:n}});a.processAsync({method:"POST",data:(0,i.default)(e),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}},{key:"changeIndex",value:function t(e,r,n){var o=this;o.partUrl="docs/"+o.docName+"/"+o.mapIndex+"/layers/index?guid="+o.guid+"&f=json";var s=o.getFullUrl();var a=new m.IgsServiceBase(s,{eventListeners:{scope:o,processCompleted:r,processFailed:n}});a.processAsync({method:"POST",data:(0,i.default)(e),header:{"Content-Type":"text/plain;charset=UTF-8"}})}},{key:"getLegendInfo",value:function t(e,r,n,i){var o=this;o.partUrl="legendInfo/"+o.docName+"?f=json&layerIndexes="+e+"&fields="+r;var s=o.getFullUrl();var a=new m.IgsServiceBase(s,{eventListeners:{scope:o,processCompleted:n,processFailed:i}});a.processAsync()}}]);return e}(g.CatalogService);e.MapDoc=b;y.Zondy.Catalog.MapDoc=b},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.TileLayer=undefined;var n=r(2);var i=y(n);var o=r(1);var s=y(o);var a=r(9);var u=y(a);var l=r(3);var c=y(l);var h=r(4);var f=y(h);var p=r(64);var d=r(15);function y(t){return t&&t.__esModule?t:{default:t}}var v=function(t){(0,f.default)(e,t);function e(t){(0,s.default)(this,e);var r=t||{};var n=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));n.tileName=r.tileName!==undefined?r.tileName:null;n.version=r.version!==undefined?r.version:"2.0";return n}(0,u.default)(e,[{key:"getTileList",value:function t(e,r){var n=this;n.partUrl="tiles?f=json";if(this.version){if(n.version==="2.0"){n.partUrl+="&v=2"}else{n.partUrl+="&v="+n.version}}var i=n.getFullUrl();var o=new d.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}},{key:"getTileInfo",value:function t(e,r){var n=this;n.partUrl="tiles/"+n.tileName+"?f=json";if(n.version){n.partUrl+="&v="+n.version}var i=n.getFullUrl();var o=new d.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}}]);return e}(p.CatalogService);e.TileLayer=v;Zondy.Catalog.TileLayer=v},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.VectorLayer=undefined;var n=r(16);var i=_(n);var o=r(2);var s=_(o);var a=r(1);var u=_(a);var l=r(9);var c=_(l);var h=r(3);var f=_(h);var p=r(4);var d=_(p);var y=r(8);var v=r(240);var g=r(15);var m=r(96);function _(t){return t&&t.__esModule?t:{default:t}}var b=function(t){(0,d.default)(e,t);function e(t){(0,u.default)(this,e);var r=t||{};return(0,f.default)(this,(e.__proto__||(0,s.default)(e)).call(this,r))}(0,c.default)(e,[{key:"getSfclsList",value:function t(e,r){var n=this;if(n.serverName.toLowerCase().indexOf("mapgislocal")>=0)n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/sfcls?containAll="+n.containAll+"&f=json";else n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/sfcls?user="+n.User+"&psw="+n.Password+"&containAll="+this.containAll+"&f=json";var i=n.getFullUrl();var o=new g.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}},{key:"getAclsList",value:function t(e,r){var n=this;if(n.serverName.toLowerCase().indexOf("mapgislocal")>=0)n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/acls?containAll="+n.containAll+"&f=json";else n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/acls?user="+n.User+"&psw="+n.Password+"&containAll="+n.containAll+"&f=json";var i=n.getFullUrl();var o=new g.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}},{key:"getOclsList",value:function t(e,r){var n=this;if(n.serverName.toLowerCase().indexOf("mapgislocal")>=0)n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/ocls?containAll="+n.containAll+"&f=json";else n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/ocls?user="+n.User+"&psw="+n.Password+"&containAll="+n.containAll+"&f=json";var i=n.getFullUrl();var o=new g.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}},{key:"getNclsList",value:function t(e,r){var n=this;if(n.serverName.toLowerCase().indexOf("mapgislocal")>=0)n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/ncls?containAll="+n.containAll+"&f=json";else n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/ncls?user="+n.User+"&psw="+n.Password+"&containAll="+n.containAll+"&f=json";var i=n.getFullUrl();var o=new g.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}},{key:"getRdsList",value:function t(e,r){var n=this;if(n.serverName.toLowerCase().indexOf("mapgislocal")>=0)n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/rds?containAll="+n.containAll+"&f=json";else n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/rds?user="+n.User+"&psw="+n.Password+"&containAll="+n.containAll+"&f=json";var i=n.getFullUrl();var o=new g.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}},{key:"getDsSfclsList",value:function t(e,r){var n=this;if(n.serverName.toLowerCase().indexOf("mapgislocal")>=0||n.serverName.toLowerCase()==="mapgislocalplus")n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/"+n.dsName+"/sfcls?f=json";else n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/"+n.dsName+"/sfcls?user="+n.User+"&psw="+n.Password+"&f=json";var i=n.getFullUrl();var o=new g.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}},{key:"getDsAclsList",value:function t(e,r){var n=this;if(n.serverName.toLowerCase().indexOf("mapgislocal")>=0)n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/"+n.dsName+"/acls?f=json";else n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/"+n.dsName+"/acls?user="+n.User+"&psw="+n.Password+"&f=json";var i=n.getFullUrl();var o=new g.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}},{key:"getDsOclsList",value:function t(e,r){var n=this;if(n.serverName.toLowerCase().indexOf("mapgislocal")>=0)n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/"+n.dsName+"/ocls?f=json";else n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/"+n.dsName+"/ocls?user="+n.User+"&psw="+n.Password+"&f=json";var i=n.getFullUrl();var o=new g.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}},{key:"getDsNclsList",value:function t(e,r){var n=this;if(n.serverName.toLowerCase().indexOf("mapgislocal")>=0)n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/"+n.dsName+"/ncls?f=json";else n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/"+n.dsName+"/ncls?user="+n.User+"&psw="+n.Password+"&f=json";var i=n.getFullUrl();var o=new g.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}},{key:"getRdsListInRcs",value:function t(e,r){var n=this;if(n.serverName.toLowerCase().indexOf("mapgislocal")>=0)n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/"+n.rcsName+"/rds?f=json";else n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/"+n.rcsName+"/rds?user="+n.User+"&psw="+n.Password+"&f=json";var i=n.getFullUrl();var o=new g.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}},{key:"getLayerList",value:function t(e,r,n){var i=this;if(i.serverName.toLowerCase().indexOf("mapgislocal")>=0)i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/"+e+"?containAll="+i.containAll+"&f=json";else i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/"+e+"?user="+i.User+"&psw="+i.Password+"&containAll="+i.containAll+"&f=json";var o=i.getFullUrl();var s=new g.IgsServiceBase(o,{eventListeners:{scope:i,processCompleted:r,processFailed:n}});s.processAsync()}},{key:"getLayerListInDS",value:function t(e,r,n){var i=this;if(i.serverName.toLowerCase().indexOf("mapgislocal")>=0)i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/"+i.dsName+"/"+e+"?f=json";else i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/"+i.dsName+"/"+e+"?user="+i.User+"&psw="+i.Password+"&f=json";var o=i.getFullUrl();var s=new g.IgsServiceBase(o,{eventListeners:{scope:i,processCompleted:r,processFailed:n}});s.processAsync()}},{key:"getLayerInfo",value:function t(e,r,n,i){var o=this;o.partUrl="layerinfo?gdbpUrl="+e+"&f=json";if(i){o.partUrl+="&encryptPassword="+i}if(this.proj){o.partUrl+="&proj="+this.proj}var s=o.getFullUrl();var a=new g.IgsServiceBase(s,{eventListeners:{scope:o,processCompleted:r,processFailed:n}});a.processAsync()}},{key:"CreateVectCls",value:function t(e,r,n){var o=this;e=e!==null?e:null;if(e===null||o.serverName===null||o.gdbName===null){return}if(o.User!==null&&o.Password!==null){o.partUrl="datasource/"+o.User+":"+o.Password+"@"}else{o.partUrl="datasource/"}if(e.clsName===null){e.clsName=(0,y.newGuid)()}o.partUrl+=o.serverName+"/"+o.gdbName+"/"+e.clsType+"/"+e.clsName+"/create?"+"geoType="+e.geoType+"&srefName="+e.srefName+"&dsName="+e.dsName+"&f=json";if(e.attStruct===null){e.attStruct=new m.CAttStruct}var s=o.getFullUrl();var a=new g.IgsServiceBase(s,{eventListeners:{scope:o,processCompleted:r,processFailed:n}});a.processAsync({method:"POST",data:(0,i.default)(e.attStruct),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}},{key:"deleteXCls",value:function t(e,r,n,i){var o=this;if(o.serverName===null||o.gdbName===null||e===null||r===null){return}o.partUrl="datasource/"+o.serverName+"/"+o.gdbName+"/"+e+"/"+r+"/delete?f=json";var s=o.getFullUrl();var a=new g.IgsServiceBase(s,{eventListeners:{scope:o,processCompleted:n,processFailed:i}});a.processAsync()}}]);return e}(v.GDBInfo);e.VectorLayer=b;Zondy.Catalog.VectorLayer=b},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.SystomInfo=undefined;var n=r(2);var i=y(n);var o=r(1);var s=y(o);var a=r(9);var u=y(a);var l=r(3);var c=y(l);var h=r(4);var f=y(h);var p=r(64);var d=r(15);function y(t){return t&&t.__esModule?t:{default:t}}var v=function(t){(0,f.default)(e,t);function e(t){(0,s.default)(this,e);var r=t||{};var n=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));n.f=r.f||"json";n.page=r.page||0;n.pageCount=r.pageCount||20;n.systemLib=r.systemLib||null;n.type=r.type||null;return n}(0,u.default)(e,[{key:"GetSystemLibrary",value:function t(e,r){var n=this;n.partUrl="systemlibraries?f="+n.f;var i=n.getFullUrl();var o=new d.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}},{key:"GetSymbol",value:function t(e,r){var n=this;var i="symbols?&systemLib="+n.systemLib+"&type="+n.type;if(n.f){i+="&f="+n.f}if(n.page){i+="&page="+n.page}if(n.size){i+="&size="+n.pageCount}n.partUrl=i;var o=n.getFullUrl();var s=new d.IgsServiceBase(o,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});s.processAsync()}}]);return e}(p.CatalogService);e.SystomInfo=v;Zondy.Catalog.SystomInfo=v},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.G3DService=e.G3DMapDoc=e.M3DTileDataInfo=e.G3DLayerType=undefined;var n=r(418);var i=r(419);var o=r(241);e.G3DLayerType=n.G3DLayerType;e.M3DTileDataInfo=n.M3DTileDataInfo;e.G3DMapDoc=i.G3DMapDoc;e.G3DService=o.G3DService},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});var n=e.G3DLayerType={g3dNone:0,g3dVectorLayer:1,g3dModelLayer:2,g3dTerrainLayer:3,g3dLabelLayer:4,g3dCloudLayer:5,g3dPanoramaLayer:6,type2DMapRefLayer:7,g3dServerLayer:8,g3dGroupLayer:9,g3dCacheLayer:10,g3dPointCloudLayer:11,g3dGridModelLayer:12};var i=e.M3DTileDataInfo={UnKnow:"UnKnow",Vector:"Vector",TiltPhotography:"TiltPhotography",Model:"Model",BIM:"BIM",PointCloud:"PointCloud",PipeLine:"PipeLine",GeoModel:"GeoModel",GeoGrid:"GeoGrid",GeoDrill:"GeoDrill",GeoSection:"GeoSection"}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.G3DMapDoc=undefined;var n=r(16);var i=_(n);var o=r(2);var s=_(o);var a=r(1);var u=_(a);var l=r(9);var c=_(l);var h=r(3);var f=_(h);var p=r(4);var d=_(p);var y=r(0);var v=r(8);var g=r(241);var m=r(15);function _(t){return t&&t.__esModule?t:{default:t}}var b=function(t){(0,d.default)(e,t);function e(t){(0,u.default)(this,e);var r=t||{};var n=(0,f.default)(this,(e.__proto__||(0,s.default)(e)).call(this,r));n.docName=r.docName||null;n.gdbp=r.gdbp||null;n.proj=r.proj||null;n.f=r.f||"json";n.guid=r.guid!==undefined?r.guid:(0,v.newGuid)();n.encryptPassword=r.encryptPassword||null;n.layerindex=r.layerindex||0;n.geometryType=r.geometryType||null;n.geometry=r.geometry||null;n.where=r.where||null;n.structs=r.structs||{IncludeAttribute:true,IncludeGeometry:false,IncludeWebGraphic:false};n.page=r.page||0;n.pageCount=r.pageCount||20;n.objectIds=r.objectIds||null;n.orderField=r.orderField||null;n.rtnLabel=r.rtnLabel===undefined?false:r.rtnLabel;n.isAsc=r.isAsc===undefined?false:r.isAsc;n.format=r.format||"json";n.systemLib=r.systemLib||null;n.layerRenderIndex=r.layerRenderIndex||0;n.extendedKeys=t.extendedPropKeys||null;return n}(0,c.default)(e,[{key:"GetDocList",value:function t(e,r){var n=this;n.partUrl="GetDocList";var i=n.getFullUrl();var o=new m.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}},{key:"GetDocInfo",value:function t(e,r){var n=this;n.partUrl=n.docName+"/GetDocInfo?&f=json";if(n.extendedKeys){n.partUrl+="&extendedKeys="+n.extendedKeys}var i=n.getFullUrl();var o=new m.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}},{key:"GetLayerInfo",value:function t(e,r){var n=this;var i="layerinfo?gdbp="+this.gdbp;if(n.proj){i+="&proj="+n.proj}if(n.f){i+="&f="+n.f}if(n.guid){i+="&guid="+n.guid}if(n.encryptPassword){i+="&encryptPassword="+n.encryptPassword}n.partUrl=i;var o=n.getFullUrl();var s=new m.IgsServiceBase(o,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});s.processAsync()}},{key:"GetFeature",value:function t(e,r){var n=this;var o="getFeature?";if(n.gdbp&&n.gdbp!==""){o+="gdbp="+n.gdbp}else if(n.docName){o+="docName="+n.docName+"&layerindex="+n.layerindex}if(n.geometryType){o+="&geometryType="+n.geometryType}if(n.geometry){o+="&geometry="+n.geometry}if(n.where){o+="&where="+n.where}if(n.structs){o+="&structs="+(0,i.default)(n.structs)}if(n.page){o+="&page="+n.page}if(n.pageCount){o+="&pageCount="+n.pageCount}if(n.objectIds){o+="&objectIds="+n.objectIds}if(n.orderField){o+="&orderField="+n.orderField}if(n.rtnLabel){o+="&rtnLabel="+n.rtnLabel}if(n.isAsc){o+="&isAsc="+n.isAsc}if(n.guid){o+="&guid="+n.guid}if(n.format){o+="&format="+n.format}if(n.f){o+="&f="+n.f}n.partUrl=o;var s=n.getFullUrl();var a=new m.IgsServiceBase(s,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});a.processAsync()}},{key:"SetSystemLibraryByDoc",value:function t(e,r){var n=this;var i=n.docName+"/setSystemLibrary?systemLib="+n.systemLib+"&layerRenderIndex="+n.layerRenderIndex;if(n.f){i+="&f="+n.f}if(n.guid){i+="&guid="+n.guid}n.partUrl=i;var o=n.getFullUrl();var s=new m.IgsServiceBase(o,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});s.processAsync()}}]);return e}(g.G3DService);e.G3DMapDoc=b;y.Zondy.Catalog.G3DMapDoc=b},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.EditDocFeature=undefined;var n=r(16);var i=m(n);var o=r(2);var s=m(o);var a=r(1);var u=m(a);var l=r(9);var c=m(l);var h=r(3);var f=m(h);var p=r(4);var d=m(p);var y=r(0);var v=r(147);var g=r(15);function m(t){return t&&t.__esModule?t:{default:t}}var _=function(t){(0,d.default)(e,t);function e(t,r,n){(0,u.default)(this,e);var i=n?n:{};var o=(0,f.default)(this,(e.__proto__||(0,s.default)(e)).call(this,i));o.docName=t!==undefined?t:null;o.mapIndex=0;o.layerIndex=r!==undefined?r:0;return o}(0,c.default)(e,[{key:"add",value:function t(e,r,n){var o=this;if(e===undefined){return}o.partUrl="docs/"+o.docName+"/"+o.mapIndex+"/"+o.layerIndex+"/addFeatures?f="+o.f+"&guid="+o.guid;var s=o.getFullUrl();var a=new g.IgsServiceBase(s,{eventListeners:{scope:o,processCompleted:r,processFailed:n}});a.processAsync({method:"POST",data:(0,i.default)(e),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}},{key:"update",value:function t(e,r,n){var o=this;if(e===undefined){return}o.partUrl="docs/"+o.docName+"/"+o.mapIndex+"/"+o.layerIndex+"/updateFeatures?f="+o.f+"&guid="+o.guid;var s=o.getFullUrl();var a=new g.IgsServiceBase(s,{eventListeners:{scope:o,processCompleted:r,processFailed:n}});a.processAsync({method:"POST",data:(0,i.default)(e),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}},{key:"deletes",value:function t(e,r,n){var i=this;if(e===undefined){return}i.partUrl="docs/"+i.docName+"/"+i.mapIndex+"/"+i.layerIndex+"/deleteFeatures?f="+i.f+"&objectIds="+e+"&guid="+i.guid;var o=i.getFullUrl();var s=new g.IgsServiceBase(o,{eventListeners:{scope:i,processCompleted:r,processFailed:n}});s.processAsync()}}]);return e}(v.EditServiceBase);e.EditDocFeature=_;y.Zondy.Service.EditDocFeature=_},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.EditLayerFeature=undefined;var n=r(16);var i=m(n);var o=r(2);var s=m(o);var a=r(1);var u=m(a);var l=r(9);var c=m(l);var h=r(3);var f=m(h);var p=r(4);var d=m(p);var y=r(0);var v=r(147);var g=r(15);function m(t){return t&&t.__esModule?t:{default:t}}var _=function(t){(0,d.default)(e,t);function e(t,r){(0,u.default)(this,e);var n=r?r:{};var i=(0,f.default)(this,(e.__proto__||(0,s.default)(e)).call(this,n));i.gdbp=t!==undefined?t:null;return i}(0,c.default)(e,[{key:"add",value:function t(e,r,n){var o=this;if(e===undefined){return}o.partUrl="layer/addFeatures?f="+o.f+"&gdbp="+o.gdbp+"&guid="+o.guid;var s=o.getFullUrl();var a=new g.IgsServiceBase(s,{eventListeners:{scope:o,processCompleted:r,processFailed:n}});a.processAsync({method:"POST",data:(0,i.default)(e),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}},{key:"update",value:function t(e,r,n){var o=this;if(e===undefined){return}o.partUrl="layer/updateFeatures?f="+o.f+"&gdbp="+o.gdbp+"&guid="+o.guid;var s=o.getFullUrl();var a=new g.IgsServiceBase(s,{eventListeners:{scope:o,processCompleted:r,processFailed:n}});a.processAsync({method:"POST",data:(0,i.default)(e),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}},{key:"deletes",value:function t(e,r,n){var i=this;if(e===undefined){return}i.partUrl="layer/deleteFeatures?f="+i.f+"&objectIds="+e+"&gdbp="+i.gdbp+"&guid="+i.guid;var o=i.getFullUrl();var s=new g.IgsServiceBase(o,{eventListeners:{scope:i,processCompleted:r,processFailed:n}});s.processAsync()}}]);return e}(v.EditServiceBase);e.EditLayerFeature=_;y.Zondy.Service.EditLayerFeature=_},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.MultiGeoQuery=undefined;var n=r(16);var i=_(n);var o=r(2);var s=_(o);var a=r(1);var u=_(a);var l=r(9);var c=_(l);var h=r(3);var f=_(h);var p=r(4);var d=_(p);var y=r(0);var v=r(78);var g=r(245);var m=r(15);function _(t){return t&&t.__esModule?t:{default:t}}var b=function(t){(0,d.default)(e,t);function e(t,r,n,i){(0,u.default)(this,e);var o=i?i:{};var a=(0,f.default)(this,(e.__proto__||(0,s.default)(e)).call(this,o));a.queryParam=t;a.mapName=r;a.mapIndex=0;a.layerIndex=n;a.baseUrl="igs/rest/extend/MultiGeo";a.partUrl="docs/"+a.mapName+"/"+a.mapIndex.toString()+"/"+a.layerIndex+"/Geoquery";a.partUrl+=t.getParameterURL();return a}(0,c.default)(e,[{key:"query",value:function t(e,r){if(this.queryParam===null||!(this.queryParam instanceof g.MultiGeoQueryParameter)){return}var n=null;if(this.queryParam.geometryType==="point"){n={pointArr:this.queryParam.geometry}}else if(this.queryParam.geometryType==="line"){n={lineArr:this.queryParam.geometry}}else if(this.queryParam.geometryType==="polygon"){n={PolygonObjs:this.queryParam.geometry}}var o=this;var s=o.getFullUrl();var a=new m.IgsServiceBase(s,{eventListeners:{scope:o,processCompleted:e,processFailed:r}});a.processAsync({method:"POST",data:(0,i.default)(n),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}]);return e}(v.QueryServiceBase);e.MultiGeoQuery=b;y.Zondy.Service.MultiGeoQuery=b},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ObjClsQuery=undefined;var n=r(2);var i=g(n);var o=r(1);var s=g(o);var a=r(9);var u=g(a);var l=r(3);var c=g(l);var h=r(4);var f=g(h);var p=r(0);var d=r(78);var y=r(246);var v=r(15);function g(t){return t&&t.__esModule?t:{default:t}}var m=function(t){(0,f.default)(e,t);function e(t,r,n){(0,s.default)(this,e);var o=n?n:{};var a=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,o));a.queryParam=t;a.gdbp=r;a.baseUrl="igs/rest/extend/dxlcz";a.partUrl="objlayer/query?gdbp="+r;a.partUrl+=t.getParameterURL();return a}(0,u.default)(e,[{key:"query",value:function t(e,r){if(this.queryParam===null||!(this.queryParam instanceof y.ObjClsQueryParameter)){return}var n=this;var i=n.getFullUrl();var o=new v.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}}]);return e}(d.QueryServiceBase);e.ObjClsQuery=m;p.Zondy.Service.ObjClsQuery=m},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.QueryLayerFeature=undefined;var n=r(2);var i=p(n);var o=r(1);var s=p(o);var a=r(3);var u=p(a);var l=r(4);var c=p(l);var h=r(0);var f=r(78);function p(t){return t&&t.__esModule?t:{default:t}}var d=function(t){(0,c.default)(e,t);function e(t,r){(0,s.default)(this,e);var n=r?r:{};var o=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,n));o.queryParam=t;o.partUrl="layer/query";return o}return e}(f.QueryServiceBase);e.QueryLayerFeature=d;h.Zondy.Service.QueryLayerFeature=d},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.QueryUnifyParameter=undefined;var n=r(2);var i=y(n);var o=r(1);var s=y(o);var a=r(3);var u=y(a);var l=r(4);var c=y(l);var h=r(247);var f=r(100);var p=r(248);var d=r(426);function y(t){return t&&t.__esModule?t:{default:t}}var v=e.QueryUnifyParameter=function(t){(0,c.default)(e,t);function e(){(0,s.default)(this,e);return(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this))}return e}((0,d.mix)(h.QueryByLayerParameter,f.QueryParameter,p.QueryDocFeature));e.default=v},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});var n=r(88);var i=p(n);var o=r(132);var s=p(o);var a=r(427);var u=p(a);var l=r(431);var c=p(l);var h=r(1);var f=p(h);e.mix=d;e.copyProperties=y;function p(t){return t&&t.__esModule?t:{default:t}}function d(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++){e[r]=arguments[r]}var n=function t(){(0,f.default)(this,t);var r=true;var n=false;var i=undefined;try{for(var o=(0,c.default)(e),s;!(r=(s=o.next()).done);r=true){var a=s.value;a&&y(this,new a)}}catch(t){n=true;i=t}finally{try{if(!r&&o.return){o.return()}}finally{if(n){throw i}}}};var i=true;var o=false;var s=undefined;try{for(var a=(0,c.default)(e),u;!(i=(u=a.next()).done);i=true){var l=u.value;l&&y(n,l);l&&y(n.prototype,l.prototype)}}catch(t){o=true;s=t}finally{try{if(!i&&a.return){a.return()}}finally{if(o){throw s}}}return n}function y(t,e){var r=true;var n=false;var o=undefined;try{for(var a=(0,c.default)((0,u.default)(e)),l;!(r=(l=a.next()).done);r=true){var h=l.value;if(h!=="constructor"&&h!=="prototype"&&h!=="name"){var f=(0,s.default)(e,h);(0,i.default)(t,h,f)}}}catch(t){n=true;o=t}finally{try{if(!r&&a.return){a.return()}}finally{if(n){throw o}}}}e.default=d},function(t,e,r){t.exports={default:r(428),__esModule:true}},function(t,e,r){r(429);t.exports=r(17).Reflect.ownKeys},function(t,e,r){var n=r(30);n(n.S,"Reflect",{ownKeys:r(430)})},function(t,e,r){var n=r(137);var i=r(95);var o=r(31);var s=r(20).Reflect;t.exports=s&&s.ownKeys||function t(e){var r=n.f(o(e));var s=i.f;return s?r.concat(s(e)):r}},function(t,e,r){t.exports={default:r(432),__esModule:true}},function(t,e,r){r(139);r(138);t.exports=r(433)},function(t,e,r){var n=r(31);var i=r(231);t.exports=r(17).getIterator=function(t){var e=i(t);if(typeof e!="function")throw TypeError(t+" is not iterable!");return n(e.call(t))}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.FeatureService=undefined;var n=r(126);var i=d(n);var o=r(249);var s=d(o);var a=r(1);var u=d(a);var l=r(9);var c=d(l);var h=r(65);var f=r(242);var p=r(32);function d(t){return t&&t.__esModule?t:{default:t}}var y=function(){(0,c.default)(t,null,[{key:"get",value:function t(e,r,n,i){var o=new XMLHttpRequest;o.open("GET",e,true);o.onreadystatechange=function(){if(o.readyState==4&&o.status==200||o.status==304){r.call(this,o.responseText,i)}else if(o.readyState===4&&o.status!==200&&o.status!==304){n.call(this,o.responseText,i)}};o.send()}}]);function t(e){(0,u.default)(this,t);this.url=e.url;var r=this.url.split("http://");this._ip=r[1].split(":")[0];var n=r[1].split(":")[1].split("/");this._port=n[0];if(this.url.indexOf("igs/rest/mrfs/docs")>-1){this._mapId=n[n.length-1]}}return t}();y.prototype.query=function(t,e,r){t=h.BaseParameter.formatParam(t);var n=(0,s.default)({},t);var o=void 0,a=void 0,u=void 0,l=void 0,c=void 0,d=void 0,y=void 0;c=n.layers;if(typeof c==="string"){c=c.split(",")}d=["layers","pagination","orderBy","spatialRelationType","EnableDisplayCondition","MustInside","CompareRectOnly","Intersect","IncludeGeometry","IncludeAttribute","IncludeWebGraphic"];(0,i.default)(n).forEach(function(t){switch(t){case"pagination":n["recordNumber"]=n.pagination;break;case"orderBy":n["orderField"]=n.orderBy;break;case"spatialRelationType":n["MustInside"]=n.spatialRelationType==="MustInside";n["Intersect"]=n.spatialRelationType==="Intersect";break;case"objectIds":n.objectIds=n.objectIds.join(",")}});if(n.hasOwnProperty("geometry")&&n.geometry||n.hasOwnProperty("rectangle")&&n.rectangle.length>0){o=new f.QueryFeatureRule({EnableDisplayCondition:n.enableDisplayCondition,MustInside:n.MustInside,CompareRectOnly:n.compareRectOnly,Intersect:n.Intersect});if(!n.hasOwnProperty("geometry")&&n.rectangle.length>0){l=new p.Rectangle(n.rectangle[0],n.rectangle[1],n.rectangle[2],n.rectangle[3]);delete n.rectangle}else if(n.geometry.type==="Point"){l=new p.Point2D(n.geometry.coordinates[0],n.geometry.coordinates[1],{nearDis:"0.001"});delete n.geometry}else if(n.geometry.type==="LineString"||n.geometry.type==="Polygon"){var v=[];for(var g=0;g<n.geometry.coordinates.length;g++){v.push(new p.Point2D(n.geometry.coordinates[g][0],n.geometry.coordinates[g][1]))}switch(n.geometry.type){case"LineString":l=new p.PolyLine(v);break;case"Polygon":l=new p.Polygon(v);break}delete n.geometry}else if(n.geometry.type==="MultiPolygon"){var m=[];for(var _=0;_<n.geometry.coordinates.length;_++){var b=[],x=n.geometry.coordinates[_];for(var S=0;S<x.length;S++){b.push(new p.Point2D(x[S][0],x[S][1]))}m.push(new p.Polygon(b))}l=new p.MultiPolygon(m);delete n.geometry}}u=new f.QueryFeatureStruct({IncludeGeometry:n.IncludeGeometry,IncludeAttribute:n.IncludeAttribute,IncludeWebGraphic:n.IncludeWebGraphic});var w=new RegExp("^[0-9]+$");if(c.length<=0){throw new Error("请填写您要查询的图层")}else if(w.test(c[0])){a=new f.QueryParameter;y=new f.QueryDocFeature(a,this._mapId,c.join(","),{ip:this._ip,port:this._port})}else if(typeof c[0]==="string"&&c[0].indexOf("gdbp")>-1){a=new f.QueryByLayerParameter(c);y=new f.QueryLayerFeature(a,{ip:this._ip,port:this._port})}else{throw new Error("请填写正确的图层Id或gdbp地址")}if(l){a.geometry=l;a.rule=o}a.struct=u;var C=(0,s.default)({},n);for(var I=0;I<d.length;I++){if(C.hasOwnProperty(d[I])){delete C[d[I]]}}(0,p.extend)(a,C);y.query(function(t){if(e){e(t)}},function(t){if(r){r(t)}})};y.prototype.add=function(t,e,r,n){var i=this,o=void 0;this.getFieldAtt(e,function(s){var a=i.getFeatureSet(s,t);o=i.getFeatureService(e);o.add(a,r,n)})};y.prototype.update=function(t,e,r,n){var i=this,o=void 0;this.getFieldAtt(e,function(s){var a=i.getFeatureSet(s,t);o=i.getFeatureService(e);o.update(a,r,n)})};y.prototype.delete=function(t,e,r,n){t=t.join(",");var i=this.getFeatureService(e);i.deletes(t,r,n)};y.prototype.getFeatureSet=function(t,e){var r=[];var n=t.FieldAtt.FldType;for(var i=0;i<n.length;i++){r.push(n[i].substr(3,n[i].length).toLowerCase())}t.FieldAtt.FldType=r;var o=new p.FeatureSet({AttStruct:new p.CAttStruct(t.FieldAtt)});for(var s=0;s<e.length;s++){var a=e[s].hasOwnProperty("geometry")&&e[s].geometry,u=void 0,l=void 0,c=void 0;var h=[];for(var f=0;f<t.FieldAtt.FldName.length;f++){if(e[s].attributes.hasOwnProperty(t.FieldAtt.FldName[f])){h.push(e[s].attributes[t.FieldAtt.FldName[f]])}else{h.push(null)}}var d=new p.Feature({AttValue:h}),y=void 0;if(a){var v=e[s].geometryType,g=void 0,m=void 0,_=void 0,b=void 0,x=void 0,S=void 0,w=void 0,C=void 0;u=e[s].geometry;switch(v){case"Point":l=[];for(var I=0;I<u.length;I++){x=new p.GPoint(u[I].coordinates[0],u[I].coordinates[1]);l.push(x)}g=new p.FeatureGeometry({PntGeom:l});y=1;if(e[s].style){_=new p.CPointInfo(e[s].style);m=new p.WebGraphicsInfo({InfoType:1,PntInfo:_})}break;case"LineString":l=[];for(var E=0;E<u.length;E++){S=[];for(var P=0;P<u[E].coordinates.length;P++){S.push(new p.Point2D(u[E].coordinates[P].x,u[E].coordinates[P].y))}w=new Arc(S);b=new p.AnyLine([w]);c=new p.GLine(b);l.push(c)}g=new p.FeatureGeometry({LinGeom:l});y=2;if(e[s].style){_=new p.CLineInfo(e[s].style);m=new p.WebGraphicsInfo({InfoType:2,LinInfo:_})}break;case"Polygon":l=[];for(var M=0;M<u.length;M++){b=[];var L=[];for(var N=0;N<u[M].exterior.length;N++){L.push(new p.Point2D(u[M].exterior[N].x,u[M].exterior[N].y))}b.push(new p.AnyLine([new Arc(L)]));for(var T=0;T<u[M].interior.length;T++){var O=[];for(var A=0;A<u[M].interior[T].length;A++){O.push(new p.Point2D(u[M].interior[T][A].x,u[M].interior[T][A].y))}b.push(new p.AnyLine([new Arc(O)]))}C=new p.GRegion(b);l.push(C)}g=new p.FeatureGeometry({RegGeom:l});y=3;if(e[s].style){_=new p.CRegionInfo(e[s].style);m=new p.WebGraphicsInfo({InfoType:3,RegInfo:_})}break}d.fGeom=g;d.GraphicInfo=m;d.ftype=y}if(e[s].FID){d.setFID(e[s].FID)}o.addFeature(d)}return o};y.prototype.getFeatureService=function(t){var e=void 0;if(t.indexOf("gdbp")>=0){e=new f.EditLayerFeature(t)}else{e=new f.EditDocFeature(this._mapId,t,{ip:this._ip,port:this._port})}return e};y.prototype.getFieldAtt=function(t,e){var r=this;if(t.indexOf("gdbp")>=0){this.getGDBPInfo(t,e)}else{this.getLayerInfo(t,function(t){r.getGDBPInfo(t,e)})}};y.prototype.getGDBPInfo=function(t,e){y.get("http://"+this._ip+":"+this._port+"/igs/rest/mrcs/layerinfo?gdbpUrl="+t,function(t){t=JSON.parse(t);e(t)})};y.prototype.getLayerInfo=function(t,e){y.get("http://"+this._ip+":"+this._port+"/igs/rest/mrcs/docs/"+this._mapId+"/0/"+t+"?f=json",function(t){t=JSON.parse(t);var r=t.URL;e(r)})};e.FeatureService=y;p.Zondy.Service.FeatureService=y},function(t,e,r){r(436);t.exports=r(17).Object.assign},function(t,e,r){var n=r(30);n(n.S+n.F,"Object",{assign:r(437)})},function(t,e,r){"use strict";var n=r(37);var i=r(73);var o=r(95);var s=r(93);var a=r(72);var u=r(198);var l=Object.assign;t.exports=!l||r(62)(function(){var t={};var e={};var r=Symbol();var n="abcdefghijklmnopqrst";t[r]=7;n.split("").forEach(function(t){e[t]=t});return l({},t)[r]!=7||Object.keys(l({},e)).join("")!=n})?function t(e,r){var l=a(e);var c=arguments.length;var h=1;var f=o.f;var p=s.f;while(c>h){var d=u(arguments[h++]);var y=f?i(d).concat(f(d)):i(d);var v=y.length;var g=0;var m;while(v>g){m=y[g++];if(!n||p.call(d,m))l[m]=d[m]}}return l}:l},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.SQLParameter=undefined;var n=r(2);var i=p(n);var o=r(1);var s=p(o);var a=r(3);var u=p(a);var l=r(4);var c=p(l);var h=r(65);var f=r(32);function p(t){return t&&t.__esModule?t:{default:t}}var d=function(t){(0,c.default)(e,t);function e(t){(0,s.default)(this,e);var r=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this));r.where=undefined;(0,f.extend)(r,t);return r}return e}(h.BaseParameter);e.SQLParameter=d;f.Zondy.Service.SQLParameter=d},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.GeometryParameter=undefined;var n=r(2);var i=v(n);var o=r(1);var s=v(o);var a=r(3);var u=v(a);var l=r(4);var c=v(l);var h=r(65);var f=r(32);var p=r(149);var d=r(153);var y=r(154);function v(t){return t&&t.__esModule?t:{default:t}}var g=function(t){(0,c.default)(e,t);function e(t){(0,s.default)(this,e);var r=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this));r.geometry=undefined;r.where=undefined;r.compareRectOnly=false;r.enableDisplayCondition=false;r.spatialRelationType="Intersect";(0,f.extend)(r,t);return r}return e}(h.BaseParameter);g.prototype.fromGeoJSON=function(t){if(t){var e=this;switch(t.geometry.type){case"Point":e.geometry=new p.VPoint({coordinates:t.geometry.coordinates});break;case"LineString":e.geometry=new d.VPolyline({coordinates:t.geometry.coordinates});break;case"Polygon":e.geometry=new y.VPolygon({coordinates:t.geometry.coordinates[0]});break}}};e.GeometryParameter=g;f.Zondy.Service.GeometryParameter=g},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.RectangleParameter=undefined;var n=r(2);var i=p(n);var o=r(1);var s=p(o);var a=r(3);var u=p(a);var l=r(4);var c=p(l);var h=r(65);var f=r(32);function p(t){return t&&t.__esModule?t:{default:t}}var d=function(t){(0,c.default)(e,t);function e(t){(0,s.default)(this,e);var r=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this));r.where=undefined;r.rectangle=[];r.compareRectOnly=false;r.enableDisplayCondition=false;r.spatialRelationType="Intersects";(0,f.extend)(r,t);return r}return e}(h.BaseParameter);e.RectangleParameter=d;f.Zondy.Service.RectangleParameter=d},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ObjectIdsParameter=undefined;var n=r(2);var i=p(n);var o=r(1);var s=p(o);var a=r(3);var u=p(a);var l=r(4);var c=p(l);var h=r(65);var f=r(32);function p(t){return t&&t.__esModule?t:{default:t}}var d=function(t){(0,c.default)(e,t);function e(t){(0,s.default)(this,e);var r=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this));r.objectIds=[];(0,f.extend)(r,t);return r}return e}(h.BaseParameter);e.ObjectIdsParameter=d;f.Zondy.Service.ObjectIdsParameter=d},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.VFeature=undefined;var n=r(16);var i=y(n);var o=r(249);var s=y(o);var a=r(1);var u=y(a);var l=r(9);var c=y(l);var h=r(32);var f=r(149);var p=r(153);var d=r(154);function y(t){return t&&t.__esModule?t:{default:t}}var v=function(){(0,c.default)(t,null,[{key:"fromQueryResult",value:function e(r){if(!r.hasOwnProperty("SFEleArray")||!r.hasOwnProperty("AttStruct")||r.hasOwnProperty("SFEleArray")&&!r.SFEleArray||r.hasOwnProperty("AttStruct")&&!r.AttStruct){return[]}var n=r.SFEleArray;var i=r.AttStruct;var o=[],s=void 0;for(var a=0;a<n.length;a++){var u={},l=[],c=void 0;for(var h=0;h<n[a].AttValue.length;h++){if(n[a].AttValue[h]!==""){u[i.FldName[h]]=n[a].AttValue[h]}}if(n[a].fGeom){switch(n[a].ftype){case 1:var y=n[a].fGeom.PntGeom;for(var v=0;v<y.length;v++){var g=new f.VPoint({coordinates:[y[v].Dot.x,y[v].Dot.y]});l.push(g);c="Point"}break;case 2:var m=n[a].fGeom.LinGeom;for(var _=0;_<m.length;_++){var b=new p.VPolyline({coordinates:m[_].Line.Arcs[0].Dots});l.push(b);c="LineString"}break;case 3:var x=n[a].fGeom.RegGeom;for(var S=0;S<x.length;S++){var w=new d.VPolygon;w.exterior=x[S].Rings[0].Arcs[0].Dots;for(var C=1;C<x[S].Rings.length;C++){w.interior.push(x[S].Rings[C].Arcs[0].Dots)}l.push(w);c="Polygon"}break}}var I=void 0;if(n[a].GraphicInfo){var E=n[a].GraphicInfo;switch(E.InfoType){case 1:I=E.PntInfo;break;case 2:I=E.LinInfo;break;case 3:I=E.RegInfo;break}}s=new t({attributes:u,FID:n[a].FID,geometry:l,geometryType:c,style:I});o.push(s)}return o}},{key:"fromGeoJSON",value:function e(r){var n=void 0,i=[];if(!r.hasOwnProperty("type")){throw new Error("请输入正确的geoJSON")}if(r.type==="Feature"){n=new t({geometry:t.geometry,attributes:r.properties});return n}else if(r.type==="FeatureCollection"){var o=r.features,s=void 0,a=void 0,u=void 0;for(var l=0;l<o.length;l++){s=[];u=o[l].geometry.coordinates;switch(o[l].geometry.type){case"Point":s.push(o[l].geometry);break;case"LineString":a=[];for(var c=0;c<u.length;c++){a.push({x:Number(u[c][0]),y:Number(u[c][1])})}o[l].geometry.coordinates=a;s.push(o[l].geometry);break;case"Polygon":var h=new d.VPolygon;for(var f=0;f<u[0].length;f++){h.exterior.push({x:Number(u[0][f][0]),y:Number(u[0][f][1])})}for(var p=1;p<u.length;p++){var y=[];for(var v=0;v<u[p].length;v++){y.push({x:Number(u[p][v][0]),y:Number(u[p][v][1])})}h.exterior.push(y)}s.push(h);break}n=new t({geometry:s,attributes:o[l].properties,geometryType:o[l].geometry.type});i.push(n)}return i}else{throw new Error("不支持的geoJSON类型")}}},{key:"toAntTableData",value:function e(r){var n=[];var i=t.fromQueryResult(r);for(var o=0;o<i.length;o++){n.push((0,s.default)(i[o].attributes,{key:i[o].FID?i[o].FID:o}))}return n}},{key:"resultToGeojson",value:function e(r){var n=t.fromQueryResult(r);var o=[];n=JSON.parse((0,i.default)(n).replace(/attributes/g,"properties").replace(/geometryType/g,"type"));var s=void 0;for(var a=0;a<n.length;a++){s=t.polygonToGeojson(n[a]);o=o.concat(s)}var u={type:"FeatureCollection",features:o};return u}},{key:"polygonToGeojson",value:function t(e){var r=void 0,n=[];var i=e.geometry;var o=e.properties;for(var s=0;s<i.length;s++){r={};if(i[s].type==="Polygon"){i[s].coordinates=[i[s].coordinates.concat(i[s].exterior,i[s].interior)]}r.geometry=i[s];r.properties=o;r.type="Feature";n.push(r)}return n}},{key:"featureToGeojson",value:function t(e){var r={type:"FeatureCollection",features:[]};var n=[];var i=e.geometryType;if(i=="Polygon"){n=this.polyToGeojson(e)}else if(i=="LineString"){n=this.lineToGeojson(e)}else if(i=="Point"){n=this.pointToGeojson(e)}r.features=n;return r}},{key:"polyToGeojson",value:function t(e){var r=void 0,n=[];var i=e.geometry;var o=e.properties;for(var s=0;s<i.length;s++){r={};if(i[s].type==="Polygon"){var a=i[s].exterior.map(function(t){return[t.x,t.y]});var u=i[s].interior.map(function(t){return[t.x,t.y]});i[s].coordinates=[i[s].coordinates.concat(a,u)]}r.geometry=i[s];r.properties=o;r.type="Feature";delete r.geometry.exterior;delete r.geometry.interior;n.push(r)}return n}},{key:"lineToGeojson",value:function t(e){var r=void 0,n=[];var i=e.geometry;var o=e.properties;for(var s=0;s<i.length;s++){r={};if(i[s].type==="LineString"){var a=i[s].coordinates.map(function(t){return[t.x,t.y]});i[s].coordinates=a}r.geometry=i[s];r.properties=o;r.type="Feature";n.push(r)}return n}},{key:"pointToGeojson",value:function t(e){var r=void 0,n=[];var i=e.geometry;var o=e.properties;for(var s=0;s<i.length;s++){r={};if(i[s].type==="Point"){i[s].coordinates=i[s].coordinates}r.geometry=i[s];r.properties=o;r.type="Feature";n.push(r)}return n}}]);function t(e){(0,u.default)(this,t);this.geometry=undefined;this.geometryType=undefined;this.attributes=undefined;this.style=undefined;this.FID=undefined;(0,h.extend)(this,e)}return t}();e.VFeature=v;h.Zondy.Service.VFeature=v},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.FunctionWareService=e.ProjectBySRID=e.ProjectByLayer=e.ProjectBase=e.OverlayByPolygon=e.OverlayByLayer=e.OverlayBase=e.NetAnalysis=e.FeatureBuffBySingleRing=e.FeatureBuffByMultiplyRing=e.FeatureBuffBase=e.ContourAnalyse=e.ClipByPolygon=e.ClipByLayer=e.ClipByCircle=e.ClipBase=e.ClassBufferBySingleRing=e.ClassBufferByMultiplyRing=e.ClassBufferBase=e.AnalysisBase=undefined;var n=r(38);var i=r(155);var o=r(444);var s=r(445);var a=r(101);var u=r(446);var l=r(447);var c=r(448);var h=r(449);var f=r(156);var p=r(450);var d=r(451);var y=r(452);var v=r(157);var g=r(453);var m=r(454);var _=r(158);var b=r(455);var x=r(456);var S=r(457);e.AnalysisBase=n.AnalysisBase;e.ClassBufferBase=i.ClassBufferBase;e.ClassBufferByMultiplyRing=o.ClassBufferByMultiplyRing;e.ClassBufferBySingleRing=s.ClassBufferBySingleRing;e.ClipBase=a.ClipBase;e.ClipByCircle=u.ClipByCircle;e.ClipByLayer=l.ClipByLayer;e.ClipByPolygon=c.ClipByPolygon;e.ContourAnalyse=h.ContourAnalyse;e.FeatureBuffBase=f.FeatureBuffBase;e.FeatureBuffByMultiplyRing=p.FeatureBuffByMultiplyRing;e.FeatureBuffBySingleRing=d.FeatureBuffBySingleRing;e.NetAnalysis=y.NetAnalysis;e.OverlayBase=v.OverlayBase;e.OverlayByLayer=g.OverlayByLayer;e.OverlayByPolygon=m.OverlayByPolygon;e.ProjectBase=_.ProjectBase;e.ProjectByLayer=b.ProjectByLayer;e.ProjectBySRID=x.ProjectBySRID;e.FunctionWareService=S.FunctionWareService},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ClassBufferByMultiplyRing=undefined;var n=r(2);var i=p(n);var o=r(1);var s=p(o);var a=r(3);var u=p(a);var l=r(4);var c=p(l);var h=r(0);var f=r(155);function p(t){return t&&t.__esModule?t:{default:t}}var d=function(t){(0,c.default)(e,t);function e(t){(0,s.default)(this,e);var r=t||{};var n=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));n.flowID="600232";n.radiusStr=r.radiusStr!==undefined?r.radiusStr:"2,4,8,10";return n}return e}(f.ClassBufferBase);e.ClassBufferByMultiplyRing=d;h.Zondy.Service.ClassBufferByMultiplyRing=d},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ClassBufferBySingleRing=undefined;var n=r(2);var i=p(n);var o=r(1);var s=p(o);var a=r(3);var u=p(a);var l=r(4);var c=p(l);var h=r(0);var f=r(155);function p(t){return t&&t.__esModule?t:{default:t}}var d=function(t){(0,c.default)(e,t);function e(t){(0,s.default)(this,e);var r=t||{};var n=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));n.leftRad=r.leftRad!==undefined?r.leftRad:.001;n.rightRad=r.rightRad!==undefined?r.rightRad:.001;n.isByAtt=r.isByAtt!==undefined?r.isByAtt:true;n.fldName=r.fldName!==undefined?r.fldName:null;n.dynPrjRad=r.dynPrjRad!==undefined?r.dynPrjRad:0;n.flowID="600231";return n}return e}(f.ClassBufferBase);e.ClassBufferBySingleRing=d;h.Zondy.Service.ClassBufferBySingleRing=d},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ClipByCircle=undefined;var n=r(2);var i=p(n);var o=r(1);var s=p(o);var a=r(3);var u=p(a);var l=r(4);var c=p(l);var h=r(0);var f=r(101);function p(t){return t&&t.__esModule?t:{default:t}}var d=function(t){(0,c.default)(e,t);function e(t){(0,s.default)(this,e);var r=t||{};var n=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));n.srcInfo=r.srcInfo!==undefined?r.srcInfo:null;n.center=r.center!==undefined?r.center:null;n.radius=r.radius!==undefined?r.radius:null;n.step=r.step!==undefined?r.step:.001;n.flowID="600229";return n}return e}(f.ClipBase);e.ClipByCircle=d;h.Zondy.Service.ClipByCircle=d},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ClipByLayer=undefined;var n=r(2);var i=p(n);var o=r(1);var s=p(o);var a=r(3);var u=p(a);var l=r(4);var c=p(l);var h=r(0);var f=r(101);function p(t){return t&&t.__esModule?t:{default:t}}var d=function(t){(0,c.default)(e,t);function e(t){(0,s.default)(this,e);var r=t||{};var n=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));n.srcInfo1=r.srcInfo1!==undefined?r.srcInfo1:null;n.srcInfo2=r.srcInfo2!==undefined?r.srcInfo2:null;n.flowID="600230";return n}return e}(f.ClipBase);e.ClipByLayer=d;h.Zondy.Service.ClipByLayer=d},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ClipByPolygon=undefined;var n=r(2);var i=p(n);var o=r(1);var s=p(o);var a=r(3);var u=p(a);var l=r(4);var c=p(l);var h=r(0);var f=r(101);function p(t){return t&&t.__esModule?t:{default:t}}var d=function(t){(0,c.default)(e,t);function e(t){(0,s.default)(this,e);var r=t||{};var n=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));n.srcInfo=r.srcInfo!==undefined?r.srcInfo:null;n.strPos=r.strPos!==undefined?r.strPos:null;n.flowID="600228";return n}return e}(f.ClipBase);e.ClipByPolygon=d;h.Zondy.Service.ClipByPolygon=d},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ContourAnalyse=undefined;var n=r(2);var i=g(n);var o=r(1);var s=g(o);var a=r(3);var u=g(a);var l=r(4);var c=g(l);var h=r(0);var f=r(8);var p=r(38);var d=r(15);var y=r(226);var v=r(222);function g(t){return t&&t.__esModule?t:{default:t}}var m=function(t){(0,c.default)(e,t);function e(t){(0,s.default)(this,e);var r=t||{};var n=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));n.flowID="600320";n.linSfclsURL=r.linSfclsURL!==undefined?r.linSfclsURL:null;n.regSfclsURL=r.regSfclsURL!==undefined?r.regSfclsURL:null;n.annoClsURL=r.annoClsURL!==undefined?r.annoClsURL:null;n.meshingParam=r.meshingParam!==undefined?r.meshingParam:null;n.contourParam=r.contourParam!==undefined?r.contourParam:null;return n}return e}(p.AnalysisBase);e.ContourAnalyse=m;h.Zondy.Service.ContourAnalyse=m},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.FeatureBuffByMultiplyRing=undefined;var n=r(2);var i=p(n);var o=r(1);var s=p(o);var a=r(3);var u=p(a);var l=r(4);var c=p(l);var h=r(0);var f=r(156);function p(t){return t&&t.__esModule?t:{default:t}}var d=function(t){(0,c.default)(e,t);function e(t){(0,s.default)(this,e);var r=t||{};var n=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));n.radiusStr=r.radiusStr!==undefined?r.radiusStr:"0.003,0.002,0.001";n.flowID="600239";return n}return e}(f.FeatureBuffBase);e.FeatureBuffByMultiplyRing=d;h.Zondy.Service.FeatureBuffByMultiplyRing=d},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.FeatureBuffBySingleRing=undefined;var n=r(2);var i=p(n);var o=r(1);var s=p(o);var a=r(3);var u=p(a);var l=r(4);var c=p(l);var h=r(0);var f=r(156);function p(t){return t&&t.__esModule?t:{default:t}}var d=function(t){(0,c.default)(e,t);function e(t){(0,s.default)(this,e);var r=t||{};var n=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));n.leftRad=r.leftRad!==undefined?r.leftRad:.001;n.rightRad=r.rightRad!==undefined?r.rightRad:.001;n.flowID="600238";return n}return e}(f.FeatureBuffBase);e.FeatureBuffBySingleRing=d;h.Zondy.Service.FeatureBuffBySingleRing=d},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.NetAnalysis=undefined;var n=r(2);var i=d(n);var o=r(1);var s=d(o);var a=r(3);var u=d(a);var l=r(4);var c=d(l);var h=r(0);var f=r(38);var p=r(25);function d(t){return t&&t.__esModule?t:{default:t}}var y=function(t){(0,c.default)(e,t);function e(t){(0,s.default)(this,e);var r=t||{};var n=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));n.netClsUrl=r.netClsUrl!==undefined?r.netClsUrl:null;n.flagPosStr=r.flagPosStr!==undefined?r.flagPosStr:null;n.barrierPosStr=r.barrierPosStr!==undefined?r.barrierPosStr:null;n.analyType=r.analyType!==undefined?r.analyType:p.NetAnalyType.UserMode;n.weight=r.weight!==undefined?r.weight:",Weight1,Weight1";n.elementType=r.elementType!==undefined?r.elementType:p.NetElemType.Edge;n.nearDis=r.nearDis!==undefined?r.nearDis:.001;n.outFormat=r.outFormat!==undefined?r.outFormat:"json";n.flowID="600233";return n}return e}(f.AnalysisBase);e.NetAnalysis=y;h.Zondy.Service.NetAnalysis=y},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.OverlayByLayer=undefined;var n=r(2);var i=p(n);var o=r(1);var s=p(o);var a=r(3);var u=p(a);var l=r(4);var c=p(l);var h=r(0);var f=r(157);function p(t){return t&&t.__esModule?t:{default:t}}var d=function(t){(0,c.default)(e,t);function e(t){(0,s.default)(this,e);var r=t||{};var n=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));n.srcInfo2=r.srcInfo2!==undefined?r.srcInfo2:null;n.flowID="600227";return n}return e}(f.OverlayBase);e.OverlayByLayer=d;h.Zondy.Service.OverlayByLayer=d},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.OverlayByPolygon=undefined;var n=r(2);var i=p(n);var o=r(1);var s=p(o);var a=r(3);var u=p(a);var l=r(4);var c=p(l);var h=r(0);var f=r(157);function p(t){return t&&t.__esModule?t:{default:t}}var d=function(t){(0,c.default)(e,t);function e(t){(0,s.default)(this,e);var r=t||{};var n=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));n.strGRegionXML=r.strGRegionXML!==undefined?r.strGRegionXML:null;n.inFormat=r.inFormat!==undefined?r.inFormat:"json";n.flowID="600237";return n}return e}(f.OverlayBase);e.OverlayByPolygon=d;h.Zondy.Service.OverlayByPolygon=d},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ProjectByLayer=undefined;var n=r(2);var i=d(n);var o=r(1);var s=d(o);var a=r(3);var u=d(a);var l=r(4);var c=d(l);var h=r(0);var f=r(158);var p=r(8);function d(t){return t&&t.__esModule?t:{default:t}}var y=function(t){(0,c.default)(e,t);function e(t,r){(0,s.default)(this,e);var n=r||{};(0,p.extend)(n,t);var o=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,n));o.flowID="600235";return o}return e}(f.ProjectBase);e.ProjectByLayer=y;h.Zondy.Service.ProjectByLayer=y},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ProjectBySRID=undefined;var n=r(2);var i=d(n);var o=r(1);var s=d(o);var a=r(3);var u=d(a);var l=r(4);var c=d(l);var h=r(0);var f=r(158);var p=r(8);function d(t){return t&&t.__esModule?t:{default:t}}var y=function(t){(0,c.default)(e,t);function e(t,r){(0,s.default)(this,e);var n=r||{};(0,p.extend)(n,t);var o=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,n));o.flowID="600234";o.srID=n.srID!==undefined?n.srID:32;return o}return e}(f.ProjectBase);e.ProjectBySRID=y;h.Zondy.Service.ProjectBySRID=y},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.FunctionWareService=undefined;var n=r(16);var i=_(n);var o=r(2);var s=_(o);var a=r(1);var u=_(a);var l=r(9);var c=_(l);var h=r(3);var f=_(h);var p=r(4);var d=_(p);var y=r(0);var v=r(38);var g=r(15);var m=r(8);function _(t){return t&&t.__esModule?t:{default:t}}var b=function(t){(0,d.default)(e,t);function e(t){(0,u.default)(this,e);var r=t||{};var n=(0,f.default)(this,(e.__proto__||(0,s.default)(e)).call(this,r));n.guid=r.guid?r.guid:(0,m.newGuid)();n.f=r.f!==undefined?r.f:"json";return n}(0,c.default)(e,[{key:"executeWorkFlow",value:function t(e,r,n,o,s,a){if(!n){n=false}var u={};if(a!==null&&a.toUpperCase()==="POST"){u.paraValues=r;this.partUrl="execute/"+e+"?f="+this.f+"&isAsy="+n+"&guid="+this.guid}else{this.partUrl="execute/"+e+"?paraValues="+r+"&f="+this.f+"&isAsy="+n+"&guid="+this.guid}var l=this;var c=l.getFullUrl();var h=new g.IgsServiceBase(c,{eventListeners:{scope:l,processCompleted:o,processFailed:s}});if(a!==null&&a.toUpperCase()==="POST"){h.processAsync({method:"POST",data:(0,i.default)(u)})}else{h.processAsync()}}},{key:"getInstanceMessage",value:function t(e,r,n){this.partUrl="instanceLogs/"+e+"?f="+this.f+"&guid="+this.guid;var i=this;var o=i.getFullUrl();var s=new g.IgsServiceBase(o,{eventListeners:{scope:i,processCompleted:r,processFailed:n}});s.processAsync()}},{key:"getInstanceOutPutValue",value:function t(e,r,n,i){this.partUrl="outputvalues/"+e+"?name="+r+"&f="+this.f+"&guid="+this.guid;var o=this;var s=o.getFullUrl();var a=new g.IgsServiceBase(s,{eventListeners:{scope:o,processCompleted:n,processFailed:i}});a.processAsync()}},{key:"getInstanceResult",value:function t(e,r,n){this.partUrl="results/"+e+"?f="+this.f+"&guid="+this.guid;var i=this;var o=i.getFullUrl();var s=new g.IgsServiceBase(o,{eventListeners:{scope:i,processCompleted:r,processFailed:n}});s.processAsync()}},{key:"getInstanceStatus",value:function t(e,r,n){this.partUrl="status/"+e+"?f="+this.f+"&guid="+this.guid;var i=this;var o=i.getFullUrl();var s=new g.IgsServiceBase(o,{eventListeners:{scope:i,processCompleted:r,processFailed:n}});s.processAsync()}},{key:"getWorkFlowGroups",value:function t(e,r){this.partUrl="groups/?f="+this.f+"&guid="+this.guid;var n=this;var i=n.getFullUrl();var o=new g.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}},{key:"getWorkFlowInfoByID",value:function t(e,r,n){this.partUrl="workflows/"+e+"?f="+this.f+"&guid="+this.guid;var i=this;var o=i.getFullUrl();var s=new g.IgsServiceBase(o,{eventListeners:{scope:i,processCompleted:r,processFailed:n}});s.processAsync()}},{key:"getWorkFlowInfos",value:function t(e,r){this.partUrl="workflows?f="+this.f+"&guid="+this.guid;var n=this;var i=n.getFullUrl();var o=new g.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}},{key:"getWorkFlowInfosByGroup",value:function t(e,r,n){this.partUrl="workflowsbygroup/"+e+"?f="+this.f+"&guid="+this.guid;var i=this;var o=i.getFullUrl();var s=new g.IgsServiceBase(o,{eventListeners:{scope:i,processCompleted:r,processFailed:n}});s.processAsync()}},{key:"getFolder1",value:function t(e,r){this.partUrl="folderInfos?f="+this.f+"&guid="+this.guid;var n=this;var i=n.getFullUrl();var o=new g.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}},{key:"getFolder2",value:function t(e,r){this.partUrl="folderInfos/workflow?f="+this.f+"&guid="+this.guid;var n=this;var i=n.getFullUrl();var o=new g.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}},{key:"getFolder3",value:function t(e,r,n){this.partUrl="folderInfos/workflow/"+e+"?f="+this.f+"&guid="+this.guid;var i=this;var o=i.getFullUrl();var s=new g.IgsServiceBase(o,{eventListeners:{scope:i,processCompleted:r,processFailed:n}});s.processAsync()}}]);return e}(v.AnalysisBase);e.FunctionWareService=b;y.Zondy.Service.FunctionWareService=b},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CoordinateElpTrans=e.TopAnalysis=e.Smooth=e.ProjectRang=e.ProjectDots=e.GeometryAnalysisBase=e.CProjectParam=e.CProjectBySRSID=e.CalServiceBase=e.CalPolyLineLength=e.CalArea=undefined;var n=r(459);var i=r(460);var o=r(159);var s=r(161);var a=r(160);var u=r(57);var l=r(461);var c=r(462);var h=r(463);var f=r(464);var p=r(465);e.CalArea=n.CalArea;e.CalPolyLineLength=i.CalPolyLineLength;e.CalServiceBase=o.CalServiceBase;e.CProjectBySRSID=s.CProjectBySRSID;e.CProjectParam=a.CProjectParam;e.GeometryAnalysisBase=u.GeometryAnalysisBase;e.ProjectDots=l.ProjectDots;e.ProjectRang=c.ProjectRang;e.Smooth=h.Smooth;e.TopAnalysis=f.TopAnalysis;e.CoordinateElpTrans=p.CoordinateElpTrans},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CalArea=undefined;var n=r(2);var i=y(n);var o=r(1);var s=y(o);var a=r(3);var u=y(a);var l=r(4);var c=y(l);var h=r(0);var f=r(159);var p=r(8);var d=r(33);function y(t){return t&&t.__esModule?t:{default:t}}var v=function(t){(0,c.default)(e,t);function e(t,r){(0,s.default)(this,e);var n=r?r:{};(0,p.extend)(n,{dots:t});var o=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,n));o.partUrl="geomservice/calArea?f=json";return o}return e}(f.CalServiceBase);e.CalArea=v;h.Zondy.Service.CalArea=v},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CalPolyLineLength=undefined;var n=r(2);var i=y(n);var o=r(1);var s=y(o);var a=r(3);var u=y(a);var l=r(4);var c=y(l);var h=r(0);var f=r(159);var p=r(8);var d=r(33);function y(t){return t&&t.__esModule?t:{default:t}}var v=function(t){(0,c.default)(e,t);function e(t,r){(0,s.default)(this,e);var n=r?r:{};(0,p.extend)(n,{dots:t});var o=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,n));o.partUrl="geomservice/calLength?f=json";return o}return e}(f.CalServiceBase);e.CalPolyLineLength=v;h.Zondy.Service.CalPolyLineLength=v},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ProjectDots=undefined;var n=r(16);var i=b(n);var o=r(2);var s=b(o);var a=r(1);var u=b(a);var l=r(9);var c=b(l);var h=r(3);var f=b(h);var p=r(4);var d=b(p);var y=r(0);var v=r(57);var g=r(33);var m=r(160);var _=r(15);function b(t){return t&&t.__esModule?t:{default:t}}var x=function(t){(0,d.default)(e,t);function e(t,r,n,i){(0,u.default)(this,e);var o=i?i:{};var a=(0,f.default)(this,(e.__proto__||(0,s.default)(e)).call(this,o));a.InputDots=t;a.SrcProjParam=r;a.DesProjParm=n;return a}(0,c.default)(e,[{key:"execute",value:function t(e,r){this.partUrl="geomservice/projectdots?f=json";var n={};n["InputDots"]=this.InputDots;n["SrcProjParam"]=this.SrcProjParam;n["DesProjParm"]=this.DesProjParm;var o=this.getFullUrl();var s=this;var a=new _.IgsServiceBase(o,{eventListeners:{scope:s,processCompleted:e,processFailed:r}});a.processAsync({method:"POST",data:(0,i.default)(n),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}]);return e}(v.GeometryAnalysisBase);e.ProjectDots=x;y.Zondy.Service.ProjectDots=x},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ProjectRang=undefined;var n=r(2);var i=v(n);var o=r(1);var s=v(o);var a=r(9);var u=v(a);var l=r(3);var c=v(l);var h=r(4);var f=v(h);var p=r(0);var d=r(57);var y=r(15);function v(t){return t&&t.__esModule?t:{default:t}}var g=function(t){(0,f.default)(e,t);function e(t){(0,s.default)(this,e);var r=t?t:{};var n=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));n.gdbsvrName=r.gdbsvrName!==undefined?r.gdbsvrName:"MapGISLocal";n.gdbName=r.gdbName!==undefined?r.gdbName:null;n.srefID=r.srefID!==undefined?r.srefID:0;n.srefName=r.srefName!==undefined?r.srefName:null;n.desfID=r.desfID!==undefined?r.desfID:0;n.desfName=r.desfName!==undefined?r.desfName:null;n.userName=r.userName!==undefined?r.userName:null;n.password=r.password!==undefined?r.password:null;return n}(0,u.default)(e,[{key:"execute",value:function t(e,r,n){var i="";if(e){i=e.xmin+"$"+e.ymin+"$"+e.xmax+"$"+e.ymax}this.partUrl="geomservice/"+this.gdbsvrName+"/"+this.gdbName;if(this.desfName&&this.srefName){this.partUrl+="?f=json&rang="+i;this.partUrl+="&srefName="+this.srefName+"&desfName="+this.desfName}else if(this.desfID&&this.srefID){this.partUrl+="/"+this.srefID+"/"+this.desfID;this.partUrl+="?f=json&rang="+i}if(this.userName&&this.password){this.partUrl+="&userName="+this.userName+"&password="+this.password}var o=this.getFullUrl();var s=this;var a=new y.IgsServiceBase(o,{eventListeners:{scope:s,processCompleted:r,processFailed:n}});a.processAsync()}}]);return e}(d.GeometryAnalysisBase);e.ProjectRang=g;p.Zondy.Service.ProjectRang=g},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Smooth=undefined;var n=r(16);var i=_(n);var o=r(2);var s=_(o);var a=r(1);var u=_(a);var l=r(9);var c=_(l);var h=r(3);var f=_(h);var p=r(4);var d=_(p);var y=r(0);var v=r(57);var g=r(33);var m=r(15);function _(t){return t&&t.__esModule?t:{default:t}}var b=function(t){(0,d.default)(e,t);function e(t){(0,u.default)(this,e);var r=t?t:{};var n=(0,f.default)(this,(e.__proto__||(0,s.default)(e)).call(this,r));n.type=r.type!==undefined?r.type:0;n.step=r.step!==undefined?r.step:1;return n}(0,c.default)(e,[{key:"setType",value:function t(e){this.type=e}},{key:"setStep",value:function t(e){this.step=e}},{key:"execute",value:function t(e,r,n){if(this.type==2){if(e.length<4){alert("当前选中的为三次Beizer样条，最少需四个点");return}}else{if(e.length<3){alert("当前选中的类型最少需三个点");return}}this.partUrl="geomservice/smooth?f=json&type="+this.type+"&step="+this.step;var o=this.getFullUrl();var s=this;var a=new m.IgsServiceBase(o,{eventListeners:{scope:s,processCompleted:r,processFailed:n}});a.processAsync({method:"POST",data:(0,i.default)(e),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}]);return e}(v.GeometryAnalysisBase);e.Smooth=b;y.Zondy.Service.Smooth=b},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.TopAnalysis=undefined;var n=r(16);var i=S(n);var o=r(2);var s=S(o);var a=r(1);var u=S(a);var l=r(9);var c=S(l);var h=r(3);var f=S(h);var p=r(4);var d=S(p);var y=r(0);var v=r(57);var g=r(15);var m=r(143);var _=r(144);var b=r(145);var x=r(8);function S(t){return t&&t.__esModule?t:{default:t}}var w=function(t){(0,d.default)(e,t);function e(t){(0,u.default)(this,e);var r=t?t:{};var n=(0,f.default)(this,(e.__proto__||(0,s.default)(e)).call(this,r));n.pnt=r.pnt!==undefined?r.pnt:null;n.line=r.line!==undefined?r.line:null;n.reg=r.reg!==undefined?r.reg:null;n.nearDis=r.nearDis!==undefined?r.nearDis:.01;n.relativeObj=r.relativeObj!==undefined?r.relativeObj:null;n.p_onSuccess=r.p_onSuccess!==undefined?r.p_onSuccess:null;return n}(0,c.default)(e,[{key:"setPnt",value:function t(e){this.pnt=e}},{key:"setLine",value:function t(e){this.line=e}},{key:"setReg",value:function t(e){this.reg=e}},{key:"setRelativeObj",value:function t(e){this.relativeObj=e}},{key:"onGetRltSuccess",value:function t(e){var r=(0,x.getTopAnalysisResult)(e);this.p_onSuccess(r)}},{key:"execute",value:function t(e,r){var n=this;n.p_onSuccess=e;var o={};o.NearDis=this.nearDis;o.Pnt=this.pnt;o.Line=this.line;o.Reg=this.reg;o.RelativeObj=this.relativeObj;n.partUrl="geomservice/topanalysis?f=json";var s=n.getFullUrl();var n=this;var a=new g.IgsServiceBase(s,{eventListeners:{scope:n,processCompleted:n.onGetRltSuccess,processFailed:r}});a.processAsync({method:"POST",data:(0,i.default)(o),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}]);return e}(v.GeometryAnalysisBase);e.TopAnalysis=w;y.Zondy.Service.TopAnalysis=w},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CoordinateElpTrans=undefined;var n=r(16);var i=m(n);var o=r(2);var s=m(o);var a=r(1);var u=m(a);var l=r(9);var c=m(l);var h=r(3);var f=m(h);var p=r(4);var d=m(p);var y=r(0);var v=r(57);var g=r(15);function m(t){return t&&t.__esModule?t:{default:t}}var _=function(t){(0,d.default)(e,t);function e(t){(0,u.default)(this,e);var r=t?t:{};var n=(0,f.default)(this,(e.__proto__||(0,s.default)(e)).call(this,r));n.points=r.points!==undefined?r.points:"";n.dx=r.dx!==undefined?r.dx:"";n.dy=r.dy!==undefined?r.dy:"";n.dz=r.dz!==undefined?r.dz:"";n.m=r.m!==undefined?r.m:"";n.wx=r.wx!==undefined?r.wx:"";n.wy=r.wy!==undefined?r.wy:"";n.wz=r.wz!==undefined?r.wz:"";n.srcsrsname=r.srcsrsname!==undefined?r.srcsrsname:"";n.dessrsname=r.dessrsname!==undefined?r.dessrsname:"";return n}(0,c.default)(e,[{key:"coordinateTrans",value:function t(e,r,n){var o={};if(n!==null&&n.toUpperCase()==="POST"){o.paraValues="";this.partUrl="geomservice/transcoordinate?points="+this.points+"&dx="+this.dx+"&dy="+this.dy+"&dz="+this.dz+"&m="+this.m+"&wx="+this.wx+"&wy="+this.wy+"&wz="+this.wz+"&srcsrsname="+this.srcsrsname+"&dessrsname="+this.dessrsname}else{o=this;this.partUrl="geomservice/transcoordinate"}var s=this.getFullUrl();var a=this;var u=new g.IgsServiceBase(s,{eventListeners:{scope:a,processCompleted:e,processFailed:r}});if(n!==null&&n.toUpperCase()==="POST"){u.processAsync({method:"POST",data:(0,i.default)(o)})}else{u.processAsync()}}}]);return e}(v.GeometryAnalysisBase);e.CoordinateElpTrans=_;y.Zondy.Service.CoordinateTransform=_},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.MapServiceBase=e.GetTileImageService=e.GetMapInfoService=e.GetMapImageService=e.GetLayerImageService=e.GetDocImageService=undefined;var n=r(467);var i=r(468);var o=r(469);var s=r(470);var a=r(471);var u=r(66);e.GetDocImageService=n.GetDocImageService;e.GetLayerImageService=i.GetLayerImageService;e.GetMapImageService=o.GetMapImageService;e.GetMapInfoService=s.GetMapInfoService;e.GetTileImageService=a.GetTileImageService;e.MapServiceBase=u.MapServiceBase},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.GetDocImageService=undefined;var n=r(16);var i=_(n);var o=r(2);var s=_(o);var a=r(1);var u=_(a);var l=r(9);var c=_(l);var h=r(3);var f=_(h);var p=r(4);var d=_(p);var y=r(0);var v=r(66);var g=r(161);var m=r(8);function _(t){return t&&t.__esModule?t:{default:t}}var b=function(t){(0,d.default)(e,t);function e(t){(0,u.default)(this,e);var r=t||{};var n=(0,f.default)(this,(e.__proto__||(0,s.default)(e)).call(this,r));n.docName=r.docName!==undefined?r.docName:null;n.cache=r.cache!==undefined?r.cache:false;if(n.cache){n.level=r.level!==undefined?r.level:0;n.row=r.row!==undefined?r.row:0;n.col=r.col!==undefined?r.col:0;n.update=r.update!==undefined?r.update:false}else{n.layers=r.layers!==undefined?r.layers:null;n.style=r.style!==undefined?r.style:null;n.picType=r.picType!==undefined?r.picType:"gif";n.bbox=r.bbox!==undefined?r.bbox:null;n.filters=r.filters!==undefined?r.filters:null;n.picWidth=r.picWidth!==undefined?r.picWidth:512;n.picHeight=r.picHeight!==undefined?r.picHeight:512;n.proj=r.proj!==undefined?r.proj:null;n.guid=r.guid!==undefined?r.guid:(0,m.newGuid)()}return n}(0,c.default)(e,[{key:"GetMapImage",value:function t(){if(this.docName){if(this.cache===true){this.partUrl="docs/"+this.docName+"?"+"cache="+this.cache.toString()+"&level="+this.level+"&row="+this.row+"&col="+this.col+"&update="+this.update.toString()}else{this.partUrl="docs/"+this.docName+"?";if(this.bbox!==null){this.partUrl+="bbox="+this.bbox}if(this.picWidth!==null){this.partUrl+="&w="+this.picWidth}if(this.picHeight!==null){this.partUrl+="&h="+this.picHeight}if(this.layers!==null){this.partUrl+="&layers="+this.layers}if(this.filters!==null){this.partUrl+="&filters="+encodeURI(this.filters)}if(this.style!==null){this.partUrl+="&style="+(0,i.default)(this.style)}if(this.proj!==null){this.partUrl+="&proj="+(0,i.default)(this.proj)}if(this.picType!==null){this.partUrl+="&f="+this.picType}if(this.guid!==null){this.partUrl+="&guid="+this.guid}}var e=this.getFullUrl();return e}return null}}]);return e}(v.MapServiceBase);e.GetDocImageService=b;y.Zondy.Service.GetDocImageService=b},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.GetLayerImageService=undefined;var n=r(16);var i=m(n);var o=r(2);var s=m(o);var a=r(1);var u=m(a);var l=r(9);var c=m(l);var h=r(3);var f=m(h);var p=r(4);var d=m(p);var y=r(0);var v=r(66);var g=r(213);function m(t){return t&&t.__esModule?t:{default:t}}var _=function(t){(0,d.default)(e,t);function e(t){(0,u.default)(this,e);var r=t||{};var n=(0,f.default)(this,(e.__proto__||(0,s.default)(e)).call(this,r));n.gdbps=r.gdbps!==undefined?r.gdbps:null;n.picType=r.picType!==undefined?r.picType:"gif";n.style=r.style!==undefined?r.style:null;n.bbox=r.bbox!==undefined?r.bbox:null;n.filters=r.filters!==undefined?r.filters:null;n.picWidth=r.picWidth!==undefined?r.picWidth:512;n.picHeight=r.picHeight!==undefined?r.picHeight:512;return n}(0,c.default)(e,[{key:"GetLayerImage",value:function t(){if(this.gdbps!==null&&this.picWidth!==null&&this.picHeight!==null){this.partUrl="layers?"+"f="+this.picType;this.partUrl+="&gdbps=";this.gdbps.split(",");var e=this.gdbps.split(",");for(var r=0;r<e.length;r++){this.partUrl+=e[r];if(r<e.length-1){this.partUrl+=","}}if(this.style!==null){this.partUrl+="&style="+(0,i.default)(this.style)}if(this.filters!==null){this.partUrl+="&filters="+this.filters}if(this.bbox!==null){this.partUrl+="&bbox="+this.bbox}this.partUrl+="&w="+this.picWidth;this.partUrl+="&h="+this.picHeight;var n=this.getFullUrl();return n}return null}}]);return e}(v.MapServiceBase);e.GetLayerImageService=_;y.Zondy.Service.GetLayerImageService=_},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.GetMapImageService=undefined;var n=r(2);var i=v(n);var o=r(1);var s=v(o);var a=r(9);var u=v(a);var l=r(3);var c=v(l);var h=r(4);var f=v(h);var p=r(0);var d=r(66);var y=r(25);function v(t){return t&&t.__esModule?t:{default:t}}var g=function(t){(0,f.default)(e,t);function e(t){(0,s.default)(this,e);var r=t||{};var n=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));n.mapName=r.mapName!==undefined?r.mapName:null;n.mapType=r.mapType!==undefined?r.mapType:y.MapType.Doc;if(n.mapType===y.MapType.Tile){n.level=r.level!==undefined?r.level:0;n.row=r.row!==undefined?r.row:0;n.col=r.col!==undefined?r.col:0}else{n.picType=r.picType!==undefined?r.picType:"gif";n.picWidth=r.picWidth!==undefined?r.picWidth:512;n.picHeight=r.picHeight!==undefined?r.picHeight:512;n.xmin=r.xmin!==undefined?r.xmin:null;n.xmax=r.xmax!==undefined?r.xmax:null;n.ymin=r.ymin!==undefined?r.ymin:null;n.ymax=r.ymax!==undefined?r.ymax:null}return n}(0,u.default)(e,[{key:"GetImage",value:function t(){if(this.mapName){if(this.mapType===y.MapType.Tile){this.partUrl="tile/"+this.mapName+"?"+"lvl="+this.level+"&row="+this.row+"&col="+this.col}else{this.partUrl="map/"+this.mapName+"?"+"width="+this.picWidth+"&height="+this.picHeight+"&f="+this.picType;if(this.xmin!==null&&this.xmax!==null&&this.ymin!==null&&this.ymax!==null){this.partUrl+="&xmin="+this.xmin+"&ymin="+this.ymin+"&xmax="+this.xmax+"&ymax="+this.ymax}}var e=this.getFullUrl();return e}return null}}]);return e}(d.MapServiceBase);e.GetMapImageService=g;p.Zondy.Service.GetMapImageService=g},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.GetMapInfoService=undefined;var n=r(2);var i=g(n);var o=r(1);var s=g(o);var a=r(9);var u=g(a);var l=r(3);var c=g(l);var h=r(4);var f=g(h);var p=r(0);var d=r(66);var y=r(15);var v=r(8);function g(t){return t&&t.__esModule?t:{default:t}}var m=function(t){(0,f.default)(e,t);function e(t){(0,s.default)(this,e);var r=t||{};var n=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));n.mapName=r.mapName!==undefined?r.mapName:null;n.guid=r.guid!==undefined?r.guid:(0,v.newGuid)();n.token=r.token;n.type=r.type;return n}(0,u.default)(e,[{key:"GetMapInfo",value:function t(e,r){var n=this;if(n.mapName){n.partUrl="info/"+this.mapName;var i=[];if(n.guid){i.push("guid="+n.guid)}if(this.token){i.push("token="+n.token)}if(this.type){i.push("type="+n.type)}if(i.length>0){n.partUrl+="?"+i.join("&")}var o=n.getFullUrl();var s=new y.IgsServiceBase(o,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});s.processAsync()}}}]);return e}(d.MapServiceBase);e.GetMapInfoService=m;p.Zondy.Service.GetMapInfoService=m},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.GetTileImageService=undefined;var n=r(2);var i=y(n);var o=r(1);var s=y(o);var a=r(9);var u=y(a);var l=r(3);var c=y(l);var h=r(4);var f=y(h);var p=r(0);var d=r(66);function y(t){return t&&t.__esModule?t:{default:t}}var v=function(t){(0,f.default)(e,t);function e(t){(0,s.default)(this,e);var r=t||{};var n=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));n.hdfName=r.hdfName!==undefined?r.hdfName:null;n.level=r.level!==undefined?r.level:0;n.row=r.row!==undefined?r.row:0;n.col=r.col!==undefined?r.col:0;return n}(0,u.default)(e,[{key:"GetTileImage",value:function t(){if(this.hdfName!==undefined){this.partUrl="tile/"+this.hdfName+"/"+this.level+"/"+this.row+"/"+this.col;var e=this.getFullUrl();return e}return null}}]);return e}(d.MapServiceBase);e.GetTileImageService=v;p.Zondy.Service.GetTileImageService=v},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ThemesInfo=e.ThemeOper=e.ItemValue=e.FolderInfoAttribute=e.FolderInfo=e.ExpInfo=e.CUniqueThemeInfo=e.CUniqueTheme=e.CThemeInfo=e.CTheme=e.CSimpleTheme=e.CRegInfo=e.CRangeThemeInfo=e.CRangeTheme=e.CRandomTheme=e.CPntInfo=e.CMultiClassTheme=e.CLinInfo=e.CGraduatedSymbolTheme=e.CFourColorTheme=e.CDotDensityTheme=e.CChartType=e.CChartThemeRepresentInfo=e.CChartThemeInfo=e.CChartTheme=e.CChartLabelFormat=e.CAnnInfo=e.CAllOtherDataItemInfoSource=undefined;var n=r(250);var i=r(251);var o=r(252);var s=r(253);var a=r(255);var u=r(258);var l=r(254);var c=r(259);var h=r(260);var f=r(261);var p=r(256);var d=r(262);var y=r(102);var v=r(264);var g=r(265);var m=r(266);var _=r(257);var b=r(267);var x=r(34);var S=r(46);var w=r(268);var C=r(269);var I=r(263);var E=r(270);var P=r(162);var M=r(473);var L=r(474);var N=r(271);e.CAllOtherDataItemInfoSource=n.CAllOtherDataItemInfoSource;e.CAnnInfo=i.CAnnInfo;e.CChartLabelFormat=o.CChartLabelFormat;e.CChartTheme=s.CChartTheme;e.CChartThemeInfo=a.CChartThemeInfo;e.CChartThemeRepresentInfo=u.CChartThemeRepresentInfo;e.CChartType=l.CChartType;e.CDotDensityTheme=c.CDotDensityTheme;e.CFourColorTheme=h.CFourColorTheme;e.CGraduatedSymbolTheme=f.CGraduatedSymbolTheme;e.CLinInfo=p.CLinInfo;e.CMultiClassTheme=d.CMultiClassTheme;e.CPntInfo=y.CPntInfo;e.CRandomTheme=v.CRandomTheme;e.CRangeTheme=g.CRangeTheme;e.CRangeThemeInfo=m.CRangeThemeInfo;e.CRegInfo=_.CRegInfo;e.CSimpleTheme=b.CSimpleTheme;e.CTheme=x.CTheme;e.CThemeInfo=S.CThemeInfo;e.CUniqueTheme=w.CUniqueTheme;e.CUniqueThemeInfo=C.CUniqueThemeInfo;e.ExpInfo=I.ExpInfo;e.FolderInfo=E.FolderInfo;e.FolderInfoAttribute=P.FolderInfoAttribute;e.ItemValue=M.ItemValue;e.ThemeOper=L.ThemeOper;e.ThemesInfo=N.ThemesInfo},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ItemValue=undefined;var n=r(0);var i=r(8);var o=r(25);var s=function t(e,r,n,s){var a=s!==undefined?s:{};(0,i.extend)(this,a);this.StartValue=e!==undefined?e:"";this.EndValue=r!==undefined?r:"";this.ClassItemType=n!==undefined?n:o.CItemType.RangeTheme};e.ItemValue=s;n.Zondy.Object.Theme.ItemValue=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ThemeOper=undefined;var n=r(16);var i=T(n);var o=r(2);var s=T(o);var a=r(1);var u=T(a);var l=r(9);var c=T(l);var h=r(3);var f=T(h);var p=r(4);var d=T(p);var y=r(0);var v=r(27);var g=r(8);var m=r(15);var _=r(262);var b=r(267);var x=r(253);var S=r(261);var w=r(259);var C=r(264);var I=r(260);var E=r(268);var P=r(265);var M=r(162);var L=r(270);var N=r(271);function T(t){return t&&t.__esModule?t:{default:t}}var O=function(t){(0,d.default)(e,t);function e(t,r){(0,u.default)(this,e);var r=r||{};r.baseUrl="igs/rest/theme";var n=(0,f.default)(this,(e.__proto__||(0,s.default)(e)).call(this,r));if(t!==null){n.guid=t}else{n.guid=(0,g.newGuid)()}n.p_onSuccess=r.p_onSuccess!==undefined?r.p_onSuccess:null;return n}(0,c.default)(e,[{key:"onGetThemesInfoSuccess",value:function t(e){var r=new L.FolderInfo;(0,g.extendDeep)(r,e.result||e);if(r!==null&&r.attribute!==null&&r.attribute.length>0){var n=[];var i=null;for(var o=0;o<r.attribute.length;o++){n[o]=new N.ThemesInfo;if(r.attribute[o]!==null){n[o].LayerName=r.attribute[o].name;i=JSON.parse(r.attribute[o].value);if(i!==null&&i.length>0){n[o].ThemeArr=[];for(var s=0;s<i.length;s++){switch(i[s].name){case"CMultiClassTheme":n[o].ThemeArr[s]=new _.CMultiClassTheme;break;case"CSimpleTheme":n[o].ThemeArr[s]=new b.CSimpleTheme;break;case"CChartTheme":n[o].ThemeArr[s]=new x.CChartTheme;break;case"CGraduatedSymbolTheme":n[o].ThemeArr[s]=new S.CGraduatedSymbolTheme;break;case"CDotDensityTheme":n[o].ThemeArr[s]=new w.CDotDensityTheme;break;case"CRandomTheme":n[o].ThemeArr[s]=new C.CRandomTheme;break;case"CFourColorTheme":n[o].ThemeArr[s]=new I.CFourColorTheme;break;case"CUniqueTheme":n[o].ThemeArr[s]=new E.CUniqueTheme;break;case"CRangeTheme":n[o].ThemeArr[s]=new P.CRangeTheme;break}(0,g.extendDeep)(n[o].ThemeArr[s],JSON.parse(i[s].value))}}}}if(this.p_onSuccess!==null&&typeof this.p_onSuccess==="function"){this.p_onSuccess(n)}}}},{key:"getThemesInfo",value:function t(e,r,n,i){var o=this;o.p_onSuccess=n;var s=Math.random();o.partUrl=e+"/get?idxArr="+r+"&r="+s+"&guid="+o.guid;var a=o.getFullUrl();var u=new m.IgsServiceBase(a,{eventListeners:{scope:o,processCompleted:o.onGetThemesInfoSuccess,processFailed:i}});u.processAsync()}},{key:"removeThemesInfo",value:function t(e,r,n,i){var o=this;var s=Math.random();o.partUrl=e+"/remove?idxArr="+r+"&r="+s+"&guid="+o.guid;var a=o.getFullUrl();var u=new m.IgsServiceBase(a,{eventListeners:{scope:o,processCompleted:n,processFailed:i}});u.processAsync()}},{key:"updateThemesInfo",value:function t(e,r,n,o,s){var a=this;var u=Math.random();a.partUrl=e+"/update?idxArr="+r+"&guid="+this.guid;var l=a.getFullUrl();var c=new L.FolderInfo;if(n!==null&&n.length>0){c.name="ThemeInfo";c.attribute=[];for(var h=0;h<n.length;h++){c.attribute[h]=new M.FolderInfoAttribute;c.attribute[h].name=n[h].LayerName;if(n[h].ThemeArr!==null&&n[h].ThemeArr.length>0){var f=[];for(var p=0;p<n[h].ThemeArr.length;p++){if(n[h].ThemeArr[p]!==null)f[p]=new M.FolderInfoAttribute(n[h].ThemeArr[p].Type,(0,i.default)(n[h].ThemeArr[p]))}c.attribute[h].value=(0,i.default)(f)}}}var d=new m.IgsServiceBase(l,{eventListeners:{scope:a,processCompleted:o,processFailed:s}});d.processAsync({method:"POST",data:(0,i.default)(c),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}},{key:"addThemesInfo",value:function t(e,r,n,o,s){var a=this;var u=Math.random();a.partUrl=e+"/add?idxArr="+r+"&guid="+this.guid;var l=a.getFullUrl();var c=new L.FolderInfo;if(n!==null&&n.length>0){c.name="ThemeInfo";c.attribute=[];for(var h=0;h<n.length;h++){c.attribute[h]=new M.FolderInfoAttribute;c.attribute[h].name=n[h].LayerName;if(n[h].ThemeArr!==null&&n[h].ThemeArr.length>0){var f=[];for(var p=0;p<n[h].ThemeArr.length;p++){if(n[h].ThemeArr[p]!==null)f[p]=new M.FolderInfoAttribute(n[h].ThemeArr[p].Type,(0,i.default)(n[h].ThemeArr[p]))}c.attribute[h].value=(0,i.default)(f)}}}var d=new m.IgsServiceBase(l,{eventListeners:{scope:a,processCompleted:o,processFailed:s}});d.processAsync({method:"POST",data:(0,i.default)(c),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}]);return e}(v.ServiceBase);e.ThemeOper=O;y.Zondy.Service.ThemeOper=O},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CalculateModelService=e.GeoDatasetService=e.UserService=undefined;var n=r(476);var i=r(489);var o=r(492);e.UserService=n.UserService;e.GeoDatasetService=i.GeoDatasetService;e.CalculateModelService=o.CalculateModelService;var s={UserService:n.UserService,GeoDatasetService:i.GeoDatasetService,CalculateModelService:o.CalculateModelService};e.default=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.UserService=undefined;var n=r(477);e.UserService=n.UserService},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.UserService=undefined;var n=r(2);var i=y(n);var o=r(1);var s=y(o);var a=r(9);var u=y(a);var l=r(3);var c=y(l);var h=r(4);var f=y(h);var p=r(0);var d=r(163);function y(t){return t&&t.__esModule?t:{default:t}}var v="login";var g=e.UserService=function(t){(0,f.default)(e,t);function e(t){(0,s.default)(this,e);var r=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t));r.serviceUrl="/clouddisk/rest/users/";return r}(0,u.default)(e,[{key:"login",value:function t(e,r,n){var i=this.serviceUrl;var o=this.getBaseUrl();var s=""+o+i+v;this.post(s,e,r,n)}}]);return e}(d.CloudDiskService);e.default=g;p.Zondy.CloudDisk.UserService=g},function(t,e,r){"use strict";var n=r(479);var i=r(272);var o=r(167);var s=Object.prototype.hasOwnProperty;var a={brackets:function t(e){return e+"[]"},comma:"comma",indices:function t(e,r){return e+"["+r+"]"},repeat:function t(e){return e}};var u=Array.isArray;var l=String.prototype.split;var c=Array.prototype.push;var h=function(t,e){c.apply(t,u(e)?e:[e])};var f=Date.prototype.toISOString;var p=o["default"];var d={addQueryPrefix:false,allowDots:false,charset:"utf-8",charsetSentinel:false,delimiter:"&",encode:true,encoder:i.encode,encodeValuesOnly:false,format:p,formatter:o.formatters[p],indices:false,serializeDate:function t(e){return f.call(e)},skipNulls:false,strictNullHandling:false};var y=function t(e){return typeof e==="string"||typeof e==="number"||typeof e==="boolean"||typeof e==="symbol"||typeof e==="bigint"};var v={};var g=function t(e,r,o,s,a,c,f,p,g,m,_,b,x,S,w,C){var I=e;var E=C;var P=0;var M=false;while((E=E.get(v))!==void undefined&&!M){var L=E.get(e);P+=1;if(typeof L!=="undefined"){if(L===P){throw new RangeError("Cyclic object value")}else{M=true}}if(typeof E.get(v)==="undefined"){P=0}}if(typeof p==="function"){I=p(r,I)}else if(I instanceof Date){I=_(I)}else if(o==="comma"&&u(I)){I=i.maybeMap(I,function(t){if(t instanceof Date){return _(t)}return t})}if(I===null){if(a){return f&&!S?f(r,d.encoder,w,"key",b):r}I=""}if(y(I)||i.isBuffer(I)){if(f){var N=S?r:f(r,d.encoder,w,"key",b);if(o==="comma"&&S){var T=l.call(String(I),",");var O="";for(var A=0;A<T.length;++A){O+=(A===0?"":",")+x(f(T[A],d.encoder,w,"value",b))}return[x(N)+(s&&u(I)&&T.length===1?"[]":"")+"="+O]}return[x(N)+"="+x(f(I,d.encoder,w,"value",b))]}return[x(r)+"="+x(String(I))]}var R=[];if(typeof I==="undefined"){return R}var F;if(o==="comma"&&u(I)){F=[{value:I.length>0?I.join(",")||null:void undefined}]}else if(u(p)){F=p}else{var D=Object.keys(I);F=g?D.sort(g):D}var k=s&&u(I)&&I.length===1?r+"[]":r;for(var j=0;j<F.length;++j){var G=F[j];var B=typeof G==="object"&&typeof G.value!=="undefined"?G.value:I[G];if(c&&B===null){continue}var U=u(I)?typeof o==="function"?o(k,G):k:k+(m?"."+G:"["+G+"]");C.set(e,P);var q=n();q.set(v,C);h(R,t(B,U,o,s,a,c,f,p,g,m,_,b,x,S,w,q))}return R};var m=function t(e){if(!e){return d}if(e.encoder!==null&&typeof e.encoder!=="undefined"&&typeof e.encoder!=="function"){throw new TypeError("Encoder has to be a function.")}var r=e.charset||d.charset;if(typeof e.charset!=="undefined"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1"){throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined")}var n=o["default"];if(typeof e.format!=="undefined"){if(!s.call(o.formatters,e.format)){throw new TypeError("Unknown format option provided.")}n=e.format}var i=o.formatters[n];var a=d.filter;if(typeof e.filter==="function"||u(e.filter)){a=e.filter}return{addQueryPrefix:typeof e.addQueryPrefix==="boolean"?e.addQueryPrefix:d.addQueryPrefix,allowDots:typeof e.allowDots==="undefined"?d.allowDots:!!e.allowDots,charset:r,charsetSentinel:typeof e.charsetSentinel==="boolean"?e.charsetSentinel:d.charsetSentinel,delimiter:typeof e.delimiter==="undefined"?d.delimiter:e.delimiter,encode:typeof e.encode==="boolean"?e.encode:d.encode,encoder:typeof e.encoder==="function"?e.encoder:d.encoder,encodeValuesOnly:typeof e.encodeValuesOnly==="boolean"?e.encodeValuesOnly:d.encodeValuesOnly,filter:a,format:n,formatter:i,serializeDate:typeof e.serializeDate==="function"?e.serializeDate:d.serializeDate,skipNulls:typeof e.skipNulls==="boolean"?e.skipNulls:d.skipNulls,sort:typeof e.sort==="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling==="boolean"?e.strictNullHandling:d.strictNullHandling}};t.exports=function(t,e){var r=t;var i=m(e);var o;var s;if(typeof i.filter==="function"){s=i.filter;r=s("",r)}else if(u(i.filter)){s=i.filter;o=s}var l=[];if(typeof r!=="object"||r===null){return""}var c;if(e&&e.arrayFormat in a){c=e.arrayFormat}else if(e&&"indices"in e){c=e.indices?"indices":"repeat"}else{c="indices"}var f=a[c];if(e&&"commaRoundTrip"in e&&typeof e.commaRoundTrip!=="boolean"){throw new TypeError("`commaRoundTrip` must be a boolean, or absent")}var p=f==="comma"&&e&&e.commaRoundTrip;if(!o){o=Object.keys(r)}if(i.sort){o.sort(i.sort)}var d=n();for(var y=0;y<o.length;++y){var v=o[y];if(i.skipNulls&&r[v]===null){continue}h(l,g(r[v],v,f,p,i.strictNullHandling,i.skipNulls,i.encode?i.encoder:null,i.filter,i.sort,i.allowDots,i.serializeDate,i.format,i.formatter,i.encodeValuesOnly,i.charset,d))}var _=l.join(i.delimiter);var b=i.addQueryPrefix===true?"?":"";if(i.charsetSentinel){if(i.charset==="iso-8859-1"){b+="utf8=%26%2310003%3B&"}else{b+="utf8=%E2%9C%93&"}}return _.length>0?b+_:""}},function(t,e,r){"use strict";var n=r(165);var i=r(484);var o=r(486);var s=n("%TypeError%");var a=n("%WeakMap%",true);var u=n("%Map%",true);var l=i("WeakMap.prototype.get",true);var c=i("WeakMap.prototype.set",true);var h=i("WeakMap.prototype.has",true);var f=i("Map.prototype.get",true);var p=i("Map.prototype.set",true);var d=i("Map.prototype.has",true);var y=function(t,e){for(var r=t,n;(n=r.next)!==null;r=n){if(n.key===e){r.next=n.next;n.next=t.next;t.next=n;return n}}};var v=function(t,e){var r=y(t,e);return r&&r.value};var g=function(t,e,r){var n=y(t,e);if(n){n.value=r}else{t.next={key:e,next:t.next,value:r}}};var m=function(t,e){return!!y(t,e)};t.exports=function t(){var e;var r;var n;var i={assert:function(t){if(!i.has(t)){throw new s("Side channel does not contain "+o(t))}},get:function(t){if(a&&t&&(typeof t==="object"||typeof t==="function")){if(e){return l(e,t)}}else if(u){if(r){return f(r,t)}}else{if(n){return v(n,t)}}},has:function(t){if(a&&t&&(typeof t==="object"||typeof t==="function")){if(e){return h(e,t)}}else if(u){if(r){return d(r,t)}}else{if(n){return m(n,t)}}return false},set:function(t,i){if(a&&t&&(typeof t==="object"||typeof t==="function")){if(!e){e=new a}c(e,t,i)}else if(u){if(!r){r=new u}p(r,t,i)}else{if(!n){n={key:{},next:null}}g(n,t,i)}}};return i}},function(t,e,r){"use strict";var n=typeof Symbol!=="undefined"&&Symbol;var i=r(481);t.exports=function t(){if(typeof n!=="function"){return false}if(typeof Symbol!=="function"){return false}if(typeof n("foo")!=="symbol"){return false}if(typeof Symbol("bar")!=="symbol"){return false}return i()}},function(t,e,r){"use strict";t.exports=function t(){if(typeof Symbol!=="function"||typeof Object.getOwnPropertySymbols!=="function"){return false}if(typeof Symbol.iterator==="symbol"){return true}var e={};var r=Symbol("test");var n=Object(r);if(typeof r==="string"){return false}if(Object.prototype.toString.call(r)!=="[object Symbol]"){return false}if(Object.prototype.toString.call(n)!=="[object Symbol]"){return false}var i=42;e[r]=i;for(r in e){return false}if(typeof Object.keys==="function"&&Object.keys(e).length!==0){return false}if(typeof Object.getOwnPropertyNames==="function"&&Object.getOwnPropertyNames(e).length!==0){return false}var o=Object.getOwnPropertySymbols(e);if(o.length!==1||o[0]!==r){return false}if(!Object.prototype.propertyIsEnumerable.call(e,r)){return false}if(typeof Object.getOwnPropertyDescriptor==="function"){var s=Object.getOwnPropertyDescriptor(e,r);if(s.value!==i||s.enumerable!==true){return false}}return true}},function(t,e,r){"use strict";var n="Function.prototype.bind called on incompatible ";var i=Array.prototype.slice;var o=Object.prototype.toString;var s="[object Function]";t.exports=function t(e){var r=this;if(typeof r!=="function"||o.call(r)!==s){throw new TypeError(n+r)}var a=i.call(arguments,1);var u;var l=function(){if(this instanceof u){var t=r.apply(this,a.concat(i.call(arguments)));if(Object(t)===t){return t}return this}else{return r.apply(e,a.concat(i.call(arguments)))}};var c=Math.max(0,r.length-a.length);var h=[];for(var f=0;f<c;f++){h.push("$"+f)}u=Function("binder","return function ("+h.join(",")+"){ return binder.apply(this,arguments); }")(l);if(r.prototype){var p=function t(){};p.prototype=r.prototype;u.prototype=new p;p.prototype=null}return u}},function(t,e,r){"use strict";var n=r(166);t.exports=n.call(Function.call,Object.prototype.hasOwnProperty)},function(t,e,r){"use strict";var n=r(165);var i=r(485);var o=i(n("String.prototype.indexOf"));t.exports=function t(e,r){var s=n(e,!!r);if(typeof s==="function"&&o(e,".prototype.")>-1){return i(s)}return s}},function(t,e,r){"use strict";var n=r(166);var i=r(165);var o=i("%Function.prototype.apply%");var s=i("%Function.prototype.call%");var a=i("%Reflect.apply%",true)||n.call(s,o);var u=i("%Object.getOwnPropertyDescriptor%",true);var l=i("%Object.defineProperty%",true);var c=i("%Math.max%");if(l){try{l({},"a",{value:1})}catch(t){l=null}}t.exports=function t(e){var r=a(n,s,arguments);if(u&&l){var i=u(r,"length");if(i.configurable){l(r,"length",{value:1+c(0,e.length-(arguments.length-1))})}}return r};var h=function t(){return a(n,o,arguments)};if(l){l(t.exports,"apply",{value:h})}else{t.exports.apply=h}},function(t,e,r){var n=typeof Map==="function"&&Map.prototype;var i=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null;var o=n&&i&&typeof i.get==="function"?i.get:null;var s=n&&Map.prototype.forEach;var a=typeof Set==="function"&&Set.prototype;var u=Object.getOwnPropertyDescriptor&&a?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null;var l=a&&u&&typeof u.get==="function"?u.get:null;var c=a&&Set.prototype.forEach;var h=typeof WeakMap==="function"&&WeakMap.prototype;var f=h?WeakMap.prototype.has:null;var p=typeof WeakSet==="function"&&WeakSet.prototype;var d=p?WeakSet.prototype.has:null;var y=typeof WeakRef==="function"&&WeakRef.prototype;var v=y?WeakRef.prototype.deref:null;var g=Boolean.prototype.valueOf;var m=Object.prototype.toString;var _=Function.prototype.toString;var b=String.prototype.match;var x=String.prototype.slice;var S=String.prototype.replace;var w=String.prototype.toUpperCase;var C=String.prototype.toLowerCase;var I=RegExp.prototype.test;var E=Array.prototype.concat;var P=Array.prototype.join;var M=Array.prototype.slice;var L=Math.floor;var N=typeof BigInt==="function"?BigInt.prototype.valueOf:null;var T=Object.getOwnPropertySymbols;var O=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?Symbol.prototype.toString:null;var A=typeof Symbol==="function"&&typeof Symbol.iterator==="object";var R=typeof Symbol==="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===A?"object":"symbol")?Symbol.toStringTag:null;var F=Object.prototype.propertyIsEnumerable;var D=(typeof Reflect==="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function k(t,e){if(t===Infinity||t===-Infinity||t!==t||t&&t>-1e3&&t<1e3||I.call(/e/,e)){return e}var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t==="number"){var n=t<0?-L(-t):L(t);if(n!==t){var i=String(n);var o=x.call(e,i.length+1);return S.call(i,r,"$&_")+"."+S.call(S.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return S.call(e,r,"$&_")}var j=r(487);var G=j.custom;var B=J(G)?G:null;t.exports=function t(e,r,n,i){var a=r||{};if($(a,"quoteStyle")&&(a.quoteStyle!=="single"&&a.quoteStyle!=="double")){throw new TypeError('option "quoteStyle" must be "single" or "double"')}if($(a,"maxStringLength")&&(typeof a.maxStringLength==="number"?a.maxStringLength<0&&a.maxStringLength!==Infinity:a.maxStringLength!==null)){throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`')}var u=$(a,"customInspect")?a.customInspect:true;if(typeof u!=="boolean"&&u!=="symbol"){throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`")}if($(a,"indent")&&a.indent!==null&&a.indent!=="\t"&&!(parseInt(a.indent,10)===a.indent&&a.indent>0)){throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`')}if($(a,"numericSeparator")&&typeof a.numericSeparator!=="boolean"){throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`')}var h=a.numericSeparator;if(typeof e==="undefined"){return"undefined"}if(e===null){return"null"}if(typeof e==="boolean"){return e?"true":"false"}if(typeof e==="string"){return lt(e,a)}if(typeof e==="number"){if(e===0){return Infinity/e>0?"0":"-0"}var f=String(e);return h?k(e,f):f}if(typeof e==="bigint"){var p=String(e)+"n";return h?k(e,p):p}var d=typeof a.depth==="undefined"?5:a.depth;if(typeof n==="undefined"){n=0}if(n>=d&&d>0&&typeof e==="object"){return z(e)?"[Array]":"[Object]"}var y=yt(a,n);if(typeof i==="undefined"){i=[]}else if(rt(i,e)>=0){return"[Circular]"}function v(e,r,o){if(r){i=M.call(i);i.push(r)}if(o){var s={depth:a.depth};if($(a,"quoteStyle")){s.quoteStyle=a.quoteStyle}return t(e,s,n+1,i)}return t(e,a,n+1,i)}if(typeof e==="function"&&!W(e)){var m=et(e);var _=gt(e,v);return"[Function"+(m?": "+m:" (anonymous)")+"]"+(_.length>0?" { "+P.call(_,", ")+" }":"")}if(J(e)){var b=A?S.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):O.call(e);return typeof e==="object"&&!A?ht(b):b}if(ut(e)){var w="<"+C.call(String(e.nodeName));var I=e.attributes||[];for(var L=0;L<I.length;L++){w+=" "+I[L].name+"="+U(q(I[L].value),"double",a)}w+=">";if(e.childNodes&&e.childNodes.length){w+="..."}w+="</"+C.call(String(e.nodeName))+">";return w}if(z(e)){if(e.length===0){return"[]"}var T=gt(e,v);if(y&&!dt(T)){return"["+vt(T,y)+"]"}return"[ "+P.call(T,", ")+" ]"}if(H(e)){var G=gt(e,v);if(!("cause"in Error.prototype)&&"cause"in e&&!F.call(e,"cause")){return"{ ["+String(e)+"] "+P.call(E.call("[cause]: "+v(e.cause),G),", ")+" }"}if(G.length===0){return"["+String(e)+"]"}return"{ ["+String(e)+"] "+P.call(G,", ")+" }"}if(typeof e==="object"&&u){if(B&&typeof e[B]==="function"&&j){return j(e,{depth:d-n})}else if(u!=="symbol"&&typeof e.inspect==="function"){return e.inspect()}}if(nt(e)){var K=[];s.call(e,function(t,r){K.push(v(r,e,true)+" => "+v(t,e))});return pt("Map",o.call(e),K,y)}if(st(e)){var ct=[];c.call(e,function(t){ct.push(v(t,e))});return pt("Set",l.call(e),ct,y)}if(it(e)){return ft("WeakMap")}if(at(e)){return ft("WeakSet")}if(ot(e)){return ft("WeakRef")}if(Z(e)){return ht(v(Number(e)))}if(Q(e)){return ht(v(N.call(e)))}if(Y(e)){return ht(g.call(e))}if(X(e)){return ht(v(String(e)))}if(!V(e)&&!W(e)){var mt=gt(e,v);var _t=D?D(e)===Object.prototype:e instanceof Object||e.constructor===Object;var bt=e instanceof Object?"":"null prototype";var xt=!_t&&R&&Object(e)===e&&R in e?x.call(tt(e),8,-1):bt?"Object":"";var St=_t||typeof e.constructor!=="function"?"":e.constructor.name?e.constructor.name+" ":"";var wt=St+(xt||bt?"["+P.call(E.call([],xt||[],bt||[]),": ")+"] ":"");if(mt.length===0){return wt+"{}"}if(y){return wt+"{"+vt(mt,y)+"}"}return wt+"{ "+P.call(mt,", ")+" }"}return String(e)};function U(t,e,r){var n=(r.quoteStyle||e)==="double"?'"':"'";return n+t+n}function q(t){return S.call(String(t),/"/g,"&quot;")}function z(t){return tt(t)==="[object Array]"&&(!R||!(typeof t==="object"&&R in t))}function V(t){return tt(t)==="[object Date]"&&(!R||!(typeof t==="object"&&R in t))}function W(t){return tt(t)==="[object RegExp]"&&(!R||!(typeof t==="object"&&R in t))}function H(t){return tt(t)==="[object Error]"&&(!R||!(typeof t==="object"&&R in t))}function X(t){return tt(t)==="[object String]"&&(!R||!(typeof t==="object"&&R in t))}function Z(t){return tt(t)==="[object Number]"&&(!R||!(typeof t==="object"&&R in t))}function Y(t){return tt(t)==="[object Boolean]"&&(!R||!(typeof t==="object"&&R in t))}function J(t){if(A){return t&&typeof t==="object"&&t instanceof Symbol}if(typeof t==="symbol"){return true}if(!t||typeof t!=="object"||!O){return false}try{O.call(t);return true}catch(t){}return false}function Q(t){if(!t||typeof t!=="object"||!N){return false}try{N.call(t);return true}catch(t){}return false}var K=Object.prototype.hasOwnProperty||function(t){return t in this};function $(t,e){return K.call(t,e)}function tt(t){return m.call(t)}function et(t){if(t.name){return t.name}var e=b.call(_.call(t),/^function\s*([\w$]+)/);if(e){return e[1]}return null}function rt(t,e){if(t.indexOf){return t.indexOf(e)}for(var r=0,n=t.length;r<n;r++){if(t[r]===e){return r}}return-1}function nt(t){if(!o||!t||typeof t!=="object"){return false}try{o.call(t);try{l.call(t)}catch(t){return true}return t instanceof Map}catch(t){}return false}function it(t){if(!f||!t||typeof t!=="object"){return false}try{f.call(t,f);try{d.call(t,d)}catch(t){return true}return t instanceof WeakMap}catch(t){}return false}function ot(t){if(!v||!t||typeof t!=="object"){return false}try{v.call(t);return true}catch(t){}return false}function st(t){if(!l||!t||typeof t!=="object"){return false}try{l.call(t);try{o.call(t)}catch(t){return true}return t instanceof Set}catch(t){}return false}function at(t){if(!d||!t||typeof t!=="object"){return false}try{d.call(t,d);try{f.call(t,f)}catch(t){return true}return t instanceof WeakSet}catch(t){}return false}function ut(t){if(!t||typeof t!=="object"){return false}if(typeof HTMLElement!=="undefined"&&t instanceof HTMLElement){return true}return typeof t.nodeName==="string"&&typeof t.getAttribute==="function"}function lt(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength;var n="... "+r+" more character"+(r>1?"s":"");return lt(x.call(t,0,e.maxStringLength),e)+n}var i=S.call(S.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,ct);return U(i,"single",e)}function ct(t){var e=t.charCodeAt(0);var r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];if(r){return"\\"+r}return"\\x"+(e<16?"0":"")+w.call(e.toString(16))}function ht(t){return"Object("+t+")"}function ft(t){return t+" { ? }"}function pt(t,e,r,n){var i=n?vt(r,n):P.call(r,", ");return t+" ("+e+") {"+i+"}"}function dt(t){for(var e=0;e<t.length;e++){if(rt(t[e],"\n")>=0){return false}}return true}function yt(t,e){var r;if(t.indent==="\t"){r="\t"}else if(typeof t.indent==="number"&&t.indent>0){r=P.call(Array(t.indent+1)," ")}else{return null}return{base:r,prev:P.call(Array(e+1),r)}}function vt(t,e){if(t.length===0){return""}var r="\n"+e.prev+e.base;return r+P.call(t,","+r)+"\n"+e.prev}function gt(t,e){var r=z(t);var n=[];if(r){n.length=t.length;for(var i=0;i<t.length;i++){n[i]=$(t,i)?e(t[i],t):""}}var o=typeof T==="function"?T(t):[];var s;if(A){s={};for(var a=0;a<o.length;a++){s["$"+o[a]]=o[a]}}for(var u in t){if(!$(t,u)){continue}if(r&&String(Number(u))===u&&u<t.length){continue}if(A&&s["$"+u]instanceof Symbol){continue}else if(I.call(/[^\w$]/,u)){n.push(e(u,t)+": "+e(t[u],t))}else{n.push(u+": "+e(t[u],t))}}if(typeof T==="function"){for(var l=0;l<o.length;l++){if(F.call(t,o[l])){n.push("["+e(o[l])+"]: "+e(t[o[l]],t))}}}return n}},function(t,e){},function(t,e,r){"use strict";var n=r(272);var i=Object.prototype.hasOwnProperty;var o=Array.isArray;var s={allowDots:false,allowPrototypes:false,allowSparse:false,arrayLimit:20,charset:"utf-8",charsetSentinel:false,comma:false,decoder:n.decode,delimiter:"&",depth:5,ignoreQueryPrefix:false,interpretNumericEntities:false,parameterLimit:1e3,parseArrays:true,plainObjects:false,strictNullHandling:false};var a=function(t){return t.replace(/&#(\d+);/g,function(t,e){return String.fromCharCode(parseInt(e,10))})};var u=function(t,e){if(t&&typeof t==="string"&&e.comma&&t.indexOf(",")>-1){return t.split(",")}return t};var l="utf8=%26%2310003%3B";var c="utf8=%E2%9C%93";var h=function t(e,r){var h={};var f=r.ignoreQueryPrefix?e.replace(/^\?/,""):e;var p=r.parameterLimit===Infinity?undefined:r.parameterLimit;var d=f.split(r.delimiter,p);var y=-1;var v;var g=r.charset;if(r.charsetSentinel){for(v=0;v<d.length;++v){if(d[v].indexOf("utf8=")===0){if(d[v]===c){g="utf-8"}else if(d[v]===l){g="iso-8859-1"}y=v;v=d.length}}}for(v=0;v<d.length;++v){if(v===y){continue}var m=d[v];var _=m.indexOf("]=");var b=_===-1?m.indexOf("="):_+1;var x,S;if(b===-1){x=r.decoder(m,s.decoder,g,"key");S=r.strictNullHandling?null:""}else{x=r.decoder(m.slice(0,b),s.decoder,g,"key");S=n.maybeMap(u(m.slice(b+1),r),function(t){return r.decoder(t,s.decoder,g,"value")})}if(S&&r.interpretNumericEntities&&g==="iso-8859-1"){S=a(S)}if(m.indexOf("[]=")>-1){S=o(S)?[S]:S}if(i.call(h,x)){h[x]=n.combine(h[x],S)}else{h[x]=S}}return h};var f=function(t,e,r,n){var i=n?e:u(e,r);for(var o=t.length-1;o>=0;--o){var s;var a=t[o];if(a==="[]"&&r.parseArrays){s=[].concat(i)}else{s=r.plainObjects?Object.create(null):{};var l=a.charAt(0)==="["&&a.charAt(a.length-1)==="]"?a.slice(1,-1):a;var c=parseInt(l,10);if(!r.parseArrays&&l===""){s={0:i}}else if(!isNaN(c)&&a!==l&&String(c)===l&&c>=0&&(r.parseArrays&&c<=r.arrayLimit)){s=[];s[c]=i}else if(l!=="__proto__"){s[l]=i}}i=s}return i};var p=function t(e,r,n,o){if(!e){return}var s=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e;var a=/(\[[^[\]]*])/;var u=/(\[[^[\]]*])/g;var l=n.depth>0&&a.exec(s);var c=l?s.slice(0,l.index):s;var h=[];if(c){if(!n.plainObjects&&i.call(Object.prototype,c)){if(!n.allowPrototypes){return}}h.push(c)}var p=0;while(n.depth>0&&(l=u.exec(s))!==null&&p<n.depth){p+=1;if(!n.plainObjects&&i.call(Object.prototype,l[1].slice(1,-1))){if(!n.allowPrototypes){return}}h.push(l[1])}if(l){h.push("["+s.slice(l.index)+"]")}return f(h,r,n,o)};var d=function t(e){if(!e){return s}if(e.decoder!==null&&e.decoder!==undefined&&typeof e.decoder!=="function"){throw new TypeError("Decoder has to be a function.")}if(typeof e.charset!=="undefined"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1"){throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined")}var r=typeof e.charset==="undefined"?s.charset:e.charset;return{allowDots:typeof e.allowDots==="undefined"?s.allowDots:!!e.allowDots,allowPrototypes:typeof e.allowPrototypes==="boolean"?e.allowPrototypes:s.allowPrototypes,allowSparse:typeof e.allowSparse==="boolean"?e.allowSparse:s.allowSparse,arrayLimit:typeof e.arrayLimit==="number"?e.arrayLimit:s.arrayLimit,charset:r,charsetSentinel:typeof e.charsetSentinel==="boolean"?e.charsetSentinel:s.charsetSentinel,comma:typeof e.comma==="boolean"?e.comma:s.comma,decoder:typeof e.decoder==="function"?e.decoder:s.decoder,delimiter:typeof e.delimiter==="string"||n.isRegExp(e.delimiter)?e.delimiter:s.delimiter,depth:typeof e.depth==="number"||e.depth===false?+e.depth:s.depth,ignoreQueryPrefix:e.ignoreQueryPrefix===true,interpretNumericEntities:typeof e.interpretNumericEntities==="boolean"?e.interpretNumericEntities:s.interpretNumericEntities,parameterLimit:typeof e.parameterLimit==="number"?e.parameterLimit:s.parameterLimit,parseArrays:e.parseArrays!==false,plainObjects:typeof e.plainObjects==="boolean"?e.plainObjects:s.plainObjects,strictNullHandling:typeof e.strictNullHandling==="boolean"?e.strictNullHandling:s.strictNullHandling}};t.exports=function(t,e){var r=d(e);if(t===""||t===null||typeof t==="undefined"){return r.plainObjects?Object.create(null):{}}var i=typeof t==="string"?h(t,r):t;var o=r.plainObjects?Object.create(null):{};var s=Object.keys(i);for(var a=0;a<s.length;++a){var u=s[a];var l=p(u,i[u],r,typeof t==="string");o=n.merge(o,l,r)}if(r.allowSparse===true){return o}return n.compact(o)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.GeoDatasetService=undefined;var n=r(490);e.GeoDatasetService=n.GeoDatasetService},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.GeoDatasetService=undefined;var n=r(491);e.GeoDatasetService=n.GeoDatasetService},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.GeoDatasetService=undefined;var n=r(2);var i=y(n);var o=r(1);var s=y(o);var a=r(9);var u=y(a);var l=r(3);var c=y(l);var h=r(4);var f=y(h);var p=r(0);var d=r(163);function y(t){return t&&t.__esModule?t:{default:t}}var v="schema";var g="featureclass/metadata";var m="raster/metadata";var _="featureclass/statistics";var b=e.GeoDatasetService=function(t){(0,f.default)(e,t);function e(t){(0,s.default)(this,e);var r=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t));r.serviceUrl="/giscore/dataconvert/rest/geodataset/";return r}(0,u.default)(e,[{key:"schema",value:function t(e,r,n){var i=this.serviceUrl;i+=v;var o=this.getFullUrl(i,e);this.get(o,r,n)}},{key:"featuremetadata",value:function t(e,r,n){var i=this.serviceUrl;i+=g;var o=this.getFullUrl(i,e);this.get(o,r,n)}},{key:"rastermetadata",value:function t(e,r,n){var i=this.serviceUrl;i+=m;var o=this.getFullUrl(i,e);this.get(o,r,n)}},{key:"statistics",value:function t(e,r,n){var i=this.serviceUrl;i+=_;var o=this.getFullUrl(i,e);this.get(o,r,n)}},{key:"query",value:function t(e,r,n){var i=this.serviceUrl;i+=_;var o=this.getFullUrl(i,e);this.get(o,r,n)}}]);return e}(d.CloudDiskService);e.default=b;p.Zondy.CloudDisk.GisCore.GeoDatasetService=b},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CalculateModelService=undefined;var n=r(493);e.CalculateModelService=n.CalculateModelService},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CalculateModelService=undefined;var n=r(2);var i=g(n);var o=r(1);var s=g(o);var a=r(9);var u=g(a);var l=r(3);var c=g(l);var h=r(4);var f=g(h);var p=r(164);var d=g(p);var y=r(0);var v=r(163);function g(t){return t&&t.__esModule?t:{default:t}}var m="";var _="/catalog";var b="/catalog/{type}?";var x="/execute/{type}/{modelID}?";var S="/node";var w="/node/{id}?";var C="/node/root";var I="/nodes";var E="/nodes/{nodeId}?";var P=e.CalculateModelService=function(t){(0,f.default)(e,t);function e(t){(0,s.default)(this,e);var r=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t));r.serviceUrl="/clouddisk/rest/CalculateModel";return r}(0,u.default)(e,[{key:"add",value:function t(e,r,n){var i=this.serviceUrl;var o=this.getBaseUrl();var s=""+o+i+m+"?nodeId="+e.nodeId;delete e.nodeId;this.post(s,e,r,n)}},{key:"catalog",value:function t(e,r,n){var i=this.serviceUrl;i+=_;var o=this.getFullUrl(i,e);this.get(o,r,n)}},{key:"catalogtype",value:function t(e,r,n){var i=e.type;var o=this.serviceUrl;var s=this.getBaseUrl();var a=""+s+o+b;a=a.replace("{type}",i);delete e.type;a=a+d.default.stringify(e);this.get(a,r,n)}},{key:"execute",value:function t(e,r,n){var i=this.serviceUrl;var o=e.type,s=e.modelID;var a=this.getBaseUrl();var u=""+a+i+x;u=u.replace("{type}",o);u=u.replace("{modelID}",s);this.post(u,undefined,r,n)}},{key:"node",value:function t(e,r,n){var i=this.serviceUrl;var o=this.getBaseUrl();var s=""+o+i+S;this.post(s,e,r,n)}},{key:"nodeid",value:function t(e,r,n){var i=e.id;var o=this.serviceUrl;var s=""+baseurl+o+w;s=s.replace("{id}",i);this.get(s,r,n)}},{key:"noderoot",value:function t(e,r,n){e={};var i=this.serviceUrl;i+=C;var o=this.getFullUrl(i,e);this.get(o,r,n)}},{key:"nodes",value:function t(e,r,n){e={};var i=this.serviceUrl;i+=I;var o=this.getFullUrl(i,e);this.get(o,r,n)}},{key:"nodesid",value:function t(e,r,n){var i=e.nodeId;var o=this.serviceUrl;var s=""+baseurl+o+E;s=s.replace("{nodeId}",i);delete e.nodeId;s=s+d.default.stringify(e);this.get(s,r,n)}}]);return e}(v.CloudDiskService);e.default=P;y.Zondy.CloudDisk.Model.CalculateModelService=P},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.uniqueTheme3DLayer=e.UniqueTheme3DLayer=e.rangeTheme3DLayer=e.RangeTheme3DLayer=e.Theme3DLayer=e.ThemeStyle=e.RankSymbolThemeLayer=e.SimpleThemeLayer=e.RandomThemeLayer=e.graphThemeLayer=e.GraphThemeLayer=e.UniqueThemeLayer=e.rangeThemeLayer=e.RangeThemeLayer=e.ThemeLayer=e.GeoFeatureThemeLayer=undefined;var n=r(103);var i=r(177);var o=r(309);var s=r(556);var a=r(311);var u=r(571);var l=r(572);var c=r(573);var h=r(574);var f=r(185);var p=r(575);var d=r(576);e.GeoFeatureThemeLayer=n.GeoFeatureThemeLayer;e.ThemeLayer=i.ThemeLayer;e.RangeThemeLayer=o.RangeThemeLayer;e.rangeThemeLayer=o.rangeThemeLayer;e.UniqueThemeLayer=s.UniqueThemeLayer;e.GraphThemeLayer=a.GraphThemeLayer;e.graphThemeLayer=a.graphThemeLayer;e.RandomThemeLayer=u.RandomThemeLayer;e.SimpleThemeLayer=l.SimpleThemeLayer;e.RankSymbolThemeLayer=c.RankSymbolThemeLayer;e.ThemeStyle=h.ThemeStyle;e.Theme3DLayer=f.Theme3DLayer;e.RangeTheme3DLayer=p.RangeTheme3DLayer;e.rangeTheme3DLayer=p.rangeTheme3DLayer;e.UniqueTheme3DLayer=d.UniqueTheme3DLayer;e.uniqueTheme3DLayer=d.uniqueTheme3DLayer},function(t,e,r){r(496);t.exports=r(21).Object.getPrototypeOf},function(t,e,r){var n=r(123);var i=r(194);r(168)("getPrototypeOf",function(){return function t(e){return i(n(e))}})},function(t,e,r){t.exports={default:r(498),__esModule:true}},function(t,e,r){r(499);var n=r(21).Object;t.exports=function t(e,r,i){return n.defineProperty(e,r,i)}},function(t,e,r){var n=r(58);n(n.S+n.F*!r(50),"Object",{defineProperty:r(49).f})},function(t,e,r){t.exports={default:r(501),__esModule:true}},function(t,e,r){r(195);r(191);t.exports=r(169).f("iterator")},function(t,e,r){t.exports={default:r(503),__esModule:true}},function(t,e,r){r(504);r(508);r(509);r(510);t.exports=r(21).Symbol},function(t,e,r){"use strict";var n=r(42);var i=r(51);var o=r(50);var s=r(58);var a=r(193);var u=r(505).KEY;var l=r(69);var c=r(120);var h=r(122);var f=r(86);var p=r(43);var d=r(169);var y=r(170);var v=r(506);var g=r(507);var m=r(60);var _=r(61);var b=r(123);var x=r(52);var S=r(113);var w=r(84);var C=r(114);var I=r(274);var E=r(172);var P=r(273);var M=r(49);var L=r(115);var N=E.f;var T=M.f;var O=I.f;var A=n.Symbol;var R=n.JSON;var F=R&&R.stringify;var D="prototype";var k=p("_hidden");var j=p("toPrimitive");var G={}.propertyIsEnumerable;var B=c("symbol-registry");var U=c("symbols");var q=c("op-symbols");var z=Object[D];var V=typeof A=="function"&&!!P.f;var W=n.QObject;var H=!W||!W[D]||!W[D].findChild;var X=o&&l(function(){return C(T({},"a",{get:function(){return T(this,"a",{value:7}).a}})).a!=7})?function(t,e,r){var n=N(z,e);if(n)delete z[e];T(t,e,r);if(n&&t!==z)T(z,e,n)}:T;var Z=function(t){var e=U[t]=C(A[D]);e._k=t;return e};var Y=V&&typeof A.iterator=="symbol"?function(t){return typeof t=="symbol"}:function(t){return t instanceof A};var J=function t(e,r,n){if(e===z)J(q,r,n);m(e);r=S(r,true);m(n);if(i(U,r)){if(!n.enumerable){if(!i(e,k))T(e,k,w(1,{}));e[k][r]=true}else{if(i(e,k)&&e[k][r])e[k][r]=false;n=C(n,{enumerable:w(0,false)})}return X(e,r,n)}return T(e,r,n)};var Q=function t(e,r){m(e);var n=v(r=x(r));var i=0;var o=n.length;var s;while(o>i)J(e,s=n[i++],r[s]);return e};var K=function t(e,r){return r===undefined?C(e):Q(C(e),r)};var $=function t(e){var r=G.call(this,e=S(e,true));if(this===z&&i(U,e)&&!i(q,e))return false;return r||!i(this,e)||!i(U,e)||i(this,k)&&this[k][e]?r:true};var tt=function t(e,r){e=x(e);r=S(r,true);if(e===z&&i(U,r)&&!i(q,r))return;var n=N(e,r);if(n&&i(U,r)&&!(i(e,k)&&e[k][r]))n.enumerable=true;return n};var et=function t(e){var r=O(x(e));var n=[];var o=0;var s;while(r.length>o){if(!i(U,s=r[o++])&&s!=k&&s!=u)n.push(s)}return n};var rt=function t(e){var r=e===z;var n=O(r?q:x(e));var o=[];var s=0;var a;while(n.length>s){if(i(U,a=n[s++])&&(r?i(z,a):true))o.push(U[a])}return o};if(!V){A=function t(){if(this instanceof A)throw TypeError("Symbol is not a constructor!");var e=f(arguments.length>0?arguments[0]:undefined);var r=function(t){if(this===z)r.call(q,t);if(i(this,k)&&i(this[k],e))this[k][e]=false;X(this,e,w(1,t))};if(o&&H)X(z,e,{configurable:true,set:r});return Z(e)};a(A[D],"toString",function t(){return this._k});E.f=tt;M.f=J;r(275).f=I.f=et;r(171).f=$;P.f=rt;if(o&&!r(85)){a(z,"propertyIsEnumerable",$,true)}d.f=function(t){return Z(p(t))}}s(s.G+s.W+s.F*!V,{Symbol:A});for(var nt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),it=0;nt.length>it;)p(nt[it++]);for(var ot=L(p.store),st=0;ot.length>st;)y(ot[st++]);s(s.S+s.F*!V,"Symbol",{for:function(t){return i(B,t+="")?B[t]:B[t]=A(t)},keyFor:function t(e){if(!Y(e))throw TypeError(e+" is not a symbol!");for(var r in B)if(B[r]===e)return r},useSetter:function(){H=true},useSimple:function(){H=false}});s(s.S+s.F*!V,"Object",{create:K,defineProperty:J,defineProperties:Q,getOwnPropertyDescriptor:tt,getOwnPropertyNames:et,getOwnPropertySymbols:rt});var at=l(function(){P.f(1)});s(s.S+s.F*at,"Object",{getOwnPropertySymbols:function t(e){return P.f(b(e))}});R&&s(s.S+s.F*(!V||l(function(){var t=A();return F([t])!="[null]"||F({a:t})!="{}"||F(Object(t))!="{}"})),"JSON",{stringify:function t(e){var r=[e];var n=1;var i,o;while(arguments.length>n)r.push(arguments[n++]);o=i=r[1];if(!_(i)&&e===undefined||Y(e))return;if(!g(i))i=function(t,e){if(typeof o=="function")e=o.call(this,t,e);if(!Y(e))return e};r[1]=i;return F.apply(R,r)}});A[D][j]||r(59)(A[D],j,A[D].valueOf);h(A,"Symbol");h(Math,"Math",true);h(n.JSON,"JSON",true)},function(t,e,r){var n=r(86)("meta");var i=r(61);var o=r(51);var s=r(49).f;var a=0;var u=Object.isExtensible||function(){return true};var l=!r(69)(function(){return u(Object.preventExtensions({}))});var c=function(t){s(t,n,{value:{i:"O"+ ++a,w:{}}})};var h=function(t,e){if(!i(t))return typeof t=="symbol"?t:(typeof t=="string"?"S":"P")+t;if(!o(t,n)){if(!u(t))return"F";if(!e)return"E";c(t)}return t[n].i};var f=function(t,e){if(!o(t,n)){if(!u(t))return true;if(!e)return false;c(t)}return t[n].w};var p=function(t){if(l&&d.NEED&&u(t)&&!o(t,n))c(t);return t};var d=t.exports={KEY:n,NEED:false,fastKey:h,getWeak:f,onFreeze:p}},function(t,e,r){var n=r(115);var i=r(273);var o=r(171);t.exports=function(t){var e=n(t);var r=i.f;if(r){var s=r(t);var a=o.f;var u=0;var l;while(s.length>u)if(a.call(t,l=s[u++]))e.push(l)}return e}},function(t,e,r){var n=r(116);t.exports=Array.isArray||function t(e){return n(e)=="Array"}},function(t,e){},function(t,e,r){r(170)("asyncIterator")},function(t,e,r){r(170)("observable")},function(t,e,r){t.exports={default:r(512),__esModule:true}},function(t,e,r){r(513);t.exports=r(21).Object.setPrototypeOf},function(t,e,r){var n=r(58);n(n.S,"Object",{setPrototypeOf:r(514).set})},function(t,e,r){var n=r(61);var i=r(60);var o=function(t,e){i(t);if(!n(e)&&e!==null)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{n=r(187)(Function.call,r(172).f(Object.prototype,"__proto__").set,2);n(t,[]);e=!(t instanceof Array)}catch(t){e=true}return function t(r,i){o(r,i);if(e)r.__proto__=i;else n(r,i);return r}}({},false):undefined),check:o}},function(t,e,r){"use strict";const n=r(39);const i=function(t,e,r){const o={};if(!e.alwaysCreateTextNode&&(!t.child||n.isEmptyObject(t.child))&&(!t.attrsMap||n.isEmptyObject(t.attrsMap))){return n.isExist(t.val)?t.val:""}if(n.isExist(t.val)&&!(typeof t.val==="string"&&(t.val===""||t.val===e.cdataPositionChar))){const i=n.isTagNameInArrayMode(t.tagname,e.arrayMode,r);o[e.textNodeName]=i?[t.val]:t.val}n.merge(o,t.attrsMap,e.arrayMode);const s=Object.keys(t.child);for(let a=0;a<s.length;a++){const u=s[a];if(t.child[u]&&t.child[u].length>1){o[u]=[];for(let r in t.child[u]){if(t.child[u].hasOwnProperty(r)){o[u].push(i(t.child[u][r],e,u))}}}else{const s=i(t.child[u][0],e,u);const a=e.arrayMode===true&&typeof s==="object"||n.isTagNameInArrayMode(u,e.arrayMode,r);o[u]=a?[s]:s}}return o};e.convertToJson=i},function(t,e,r){"use strict";t.exports=function(t,e,r){this.tagname=t;this.parent=e;this.child={};this.attrsMap={};this.val=r;this.addChild=function(t){if(Array.isArray(this.child[t.tagname])){this.child[t.tagname].push(t)}else{this.child[t.tagname]=[t]}}}},function(t,e){const r=/^[-+]?0x[a-fA-F0-9]+$/;const n=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;if(!Number.parseInt&&window.parseInt){Number.parseInt=window.parseInt}if(!Number.parseFloat&&window.parseFloat){Number.parseFloat=window.parseFloat}const i={hex:true,leadingZeros:true,decimalPoint:".",eNotation:true};function o(t,e={}){e=Object.assign({},i,e);if(!t||typeof t!=="string")return t;let o=t.trim();if(e.skipLike!==undefined&&e.skipLike.test(o))return t;else if(e.hex&&r.test(o)){return Number.parseInt(o,16)}else{const r=n.exec(o);if(r){const n=r[1];const i=r[2];let a=s(r[3]);const u=r[4]||r[6];if(!e.leadingZeros&&i.length>0&&n&&o[2]!==".")return t;else if(!e.leadingZeros&&i.length>0&&!n&&o[1]!==".")return t;else{const r=Number(o);const s=""+r;if(s.search(/[eE]/)!==-1){if(e.eNotation)return r;else return t}else if(u){if(e.eNotation)return r;else return t}else if(o.indexOf(".")!==-1){if(s==="0"&&a==="")return r;else if(s===a)return r;else if(n&&s==="-"+a)return r;else return t}if(i){if(a===s)return r;else if(n+a===s)return r;else return t}if(o===s)return r;else if(o===n+s)return r;return t}}else{return t}}}function s(t){if(t&&t.indexOf(".")!==-1){t=t.replace(/0+$/,"");if(t===".")t="0";else if(t[0]===".")t="0"+t;else if(t[t.length-1]===".")t=t.substr(0,t.length-1);return t}return t}t.exports=o},function(t,e,r){"use strict";const n=r(39);const i={allowBooleanAttributes:false};const o=["allowBooleanAttributes"];e.validate=function(t,e){e=n.buildOptions(e,i,o);const r=[];let u=false;let l=false;if(t[0]==="\ufeff"){t=t.substr(1)}for(let n=0;n<t.length;n++){if(t[n]==="<"&&t[n+1]==="?"){n+=2;n=s(t,n);if(n.err)return n}else if(t[n]==="<"){let i=n;n++;if(t[n]==="!"){n=a(t,n);continue}else{let o=false;if(t[n]==="/"){o=true;n++}let h="";for(;n<t.length&&t[n]!==">"&&t[n]!==" "&&t[n]!=="\t"&&t[n]!=="\n"&&t[n]!=="\r";n++){h+=t[n]}h=h.trim();if(h[h.length-1]==="/"){h=h.substring(0,h.length-1);n--}if(!g(h)){let e;if(h.trim().length===0){e="Invalid space after '<'."}else{e="Tag '"+h+"' is an invalid name."}return y("InvalidTag",e,m(t,n))}const p=c(t,n);if(p===false){return y("InvalidAttr","Attributes for '"+h+"' have open quote.",m(t,n))}let v=p.value;n=p.index;if(v[v.length-1]==="/"){const r=n-v.length;v=v.substring(0,v.length-1);const i=f(v,e);if(i===true){u=true}else{return y(i.err.code,i.err.msg,m(t,r+i.err.line))}}else if(o){if(!p.tagClosed){return y("InvalidTag","Closing tag '"+h+"' doesn't have proper closing.",m(t,n))}else if(v.trim().length>0){return y("InvalidTag","Closing tag '"+h+"' can't have attributes or invalid starting.",m(t,i))}else{const e=r.pop();if(h!==e.tagName){let r=m(t,e.tagStartPos);return y("InvalidTag","Expected closing tag '"+e.tagName+"' (opened in line "+r.line+", col "+r.col+") instead of closing tag '"+h+"'.",m(t,i))}if(r.length==0){l=true}}}else{const o=f(v,e);if(o!==true){return y(o.err.code,o.err.msg,m(t,n-v.length+o.err.line))}if(l===true){return y("InvalidXml","Multiple possible root nodes found.",m(t,n))}else{r.push({tagName:h,tagStartPos:i})}u=true}for(n++;n<t.length;n++){if(t[n]==="<"){if(t[n+1]==="!"){n++;n=a(t,n);continue}else if(t[n+1]==="?"){n=s(t,++n);if(n.err)return n}else{break}}else if(t[n]==="&"){const e=d(t,n);if(e==-1)return y("InvalidChar","char '&' is not expected.",m(t,n));n=e}}if(t[n]==="<"){n--}}}else{if(t[n]===" "||t[n]==="\t"||t[n]==="\n"||t[n]==="\r"){continue}return y("InvalidChar","char '"+t[n]+"' is not expected.",m(t,n))}}if(!u){return y("InvalidXml","Start tag expected.",1)}else if(r.length==1){return y("InvalidTag","Unclosed tag '"+r[0].tagName+"'.",m(t,r[0].tagStartPos))}else if(r.length>0){return y("InvalidXml","Invalid '"+JSON.stringify(r.map(t=>t.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}return true};function s(t,e){const r=e;for(;e<t.length;e++){if(t[e]=="?"||t[e]==" "){const n=t.substr(r,e-r);if(e>5&&n==="xml"){return y("InvalidXml","XML declaration allowed only at the start of the document.",m(t,e))}else if(t[e]=="?"&&t[e+1]==">"){e++;break}else{continue}}}return e}function a(t,e){if(t.length>e+5&&t[e+1]==="-"&&t[e+2]==="-"){for(e+=3;e<t.length;e++){if(t[e]==="-"&&t[e+1]==="-"&&t[e+2]===">"){e+=2;break}}}else if(t.length>e+8&&t[e+1]==="D"&&t[e+2]==="O"&&t[e+3]==="C"&&t[e+4]==="T"&&t[e+5]==="Y"&&t[e+6]==="P"&&t[e+7]==="E"){let r=1;for(e+=8;e<t.length;e++){if(t[e]==="<"){r++}else if(t[e]===">"){r--;if(r===0){break}}}}else if(t.length>e+9&&t[e+1]==="["&&t[e+2]==="C"&&t[e+3]==="D"&&t[e+4]==="A"&&t[e+5]==="T"&&t[e+6]==="A"&&t[e+7]==="["){for(e+=8;e<t.length;e++){if(t[e]==="]"&&t[e+1]==="]"&&t[e+2]===">"){e+=2;break}}}return e}const u='"';const l="'";function c(t,e){let r="";let n="";let i=false;for(;e<t.length;e++){if(t[e]===u||t[e]===l){if(n===""){n=t[e]}else if(n!==t[e]){}else{n=""}}else if(t[e]===">"){if(n===""){i=true;break}}r+=t[e]}if(n!==""){return false}return{value:r,index:e,tagClosed:i}}const h=new RegExp("(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['\"])(([\\s\\S])*?)\\5)?","g");function f(t,e){const r=n.getAllMatches(t,h);const i={};for(let t=0;t<r.length;t++){if(r[t][1].length===0){return y("InvalidAttr","Attribute '"+r[t][2]+"' has no space in starting.",_(r[t]))}else if(r[t][3]===undefined&&!e.allowBooleanAttributes){return y("InvalidAttr","boolean attribute '"+r[t][2]+"' is not allowed.",_(r[t]))}const n=r[t][2];if(!v(n)){return y("InvalidAttr","Attribute '"+n+"' is an invalid name.",_(r[t]))}if(!i.hasOwnProperty(n)){i[n]=1}else{return y("InvalidAttr","Attribute '"+n+"' is repeated.",_(r[t]))}}return true}function p(t,e){let r=/\d/;if(t[e]==="x"){e++;r=/[\da-fA-F]/}for(;e<t.length;e++){if(t[e]===";")return e;if(!t[e].match(r))break}return-1}function d(t,e){e++;if(t[e]===";")return-1;if(t[e]==="#"){e++;return p(t,e)}let r=0;for(;e<t.length;e++,r++){if(t[e].match(/\w/)&&r<20)continue;if(t[e]===";")break;return-1}return e}function y(t,e,r){return{err:{code:t,msg:e,line:r.line||r,col:r.col}}}function v(t){return n.isName(t)}function g(t){return n.isName(t)}function m(t,e){const r=t.substring(0,e).split(/\r?\n/);return{line:r.length,col:r[r.length-1].length+1}}function _(t){return t.startIndex+t[1].length}},function(t,e,r){"use strict";const n=function(t){return String.fromCharCode(t)};const i={nilChar:n(176),missingChar:n(201),nilPremitive:n(175),missingPremitive:n(200),emptyChar:n(178),emptyValue:n(177),boundryChar:n(179),objStart:n(198),arrStart:n(204),arrayEnd:n(185)};const o=[i.nilChar,i.nilPremitive,i.missingChar,i.missingPremitive,i.boundryChar,i.emptyChar,i.emptyValue,i.arrayEnd,i.objStart,i.arrStart];const s=function(t,e,r){if(typeof e==="string"){if(t&&t[0]&&t[0].val!==undefined){return a(t[0].val,e)}else{return a(t,e)}}else{const n=c(t);if(n===true){let n="";if(Array.isArray(e)){n+=i.arrStart;const o=e[0];const l=t.length;if(typeof o==="string"){for(let e=0;e<l;e++){const r=a(t[e].val,o);n=u(n,r)}}else{for(let e=0;e<l;e++){const i=s(t[e],o,r);n=u(n,i)}}n+=i.arrayEnd}else{n+=i.objStart;const o=Object.keys(e);if(Array.isArray(t)){t=t[0]}for(let i in o){const a=o[i];let l;if(!r.ignoreAttributes&&t.attrsMap&&t.attrsMap[a]){l=s(t.attrsMap[a],e[a],r)}else if(a===r.textNodeName){l=s(t.val,e[a],r)}else{l=s(t.child[a],e[a],r)}n=u(n,l)}}return n}else{return n}}};const a=function(t){switch(t){case undefined:return i.missingPremitive;case null:return i.nilPremitive;case"":return i.emptyValue;default:return t}};const u=function(t,e){if(!l(e[0])&&!l(t[t.length-1])){t+=i.boundryChar}return t+e};const l=function(t){return o.indexOf(t)!==-1};function c(t){if(t===undefined){return i.missingChar}else if(t===null){return i.nilChar}else if(t.child&&Object.keys(t.child).length===0&&(!t.attrsMap||Object.keys(t.attrsMap).length===0)){return i.emptyChar}else{return true}}const h=r(104);const f=r(39).buildOptions;const p=function(t,e,r){r=f(r,h.defaultOptions,h.props);return s(t,e,r)};e.convert2nimn=p},function(t,e,r){"use strict";const n=r(39);const i=r(39).buildOptions;const o=r(104);const s=function(t,e){e=i(e,o.defaultOptions,o.props);e.indentBy=e.indentBy||"";return a(t,e,0)};const a=function(t,e,r){let i="{";const o=Object.keys(t.child);for(let r=0;r<o.length;r++){const n=o[r];if(t.child[n]&&t.child[n].length>1){i+='"'+n+'" : [ ';for(let r in t.child[n]){i+=a(t.child[n][r],e)+" , "}i=i.substr(0,i.length-1)+" ] "}else{i+='"'+n+'" : '+a(t.child[n][0],e)+" ,"}}n.merge(i,t.attrsMap);if(n.isEmptyObject(i)){return n.isExist(t.val)?t.val:""}else{if(n.isExist(t.val)){if(!(typeof t.val==="string"&&(t.val===""||t.val===e.cdataPositionChar))){i+='"'+e.textNodeName+'" : '+u(t.val)}}}if(i[i.length-1]===","){i=i.substr(0,i.length-2)}return i+"}"};function u(t){if(t===true||t===false||!isNaN(t)){return t}else{return'"'+t+'"'}}function l(t,e){return t.indentBy.repeat(e)}e.convertToJsonString=s},function(t,e,r){"use strict";const n=r(39).buildOptions;const i={attributeNamePrefix:"@_",attrNodeName:false,textNodeName:"#text",ignoreAttributes:true,cdataTagName:false,cdataPositionChar:"\\c",format:false,indentBy:"  ",supressEmptyNode:false,tagValueProcessor:function(t){return t},attrValueProcessor:function(t){return t}};const o=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","cdataTagName","cdataPositionChar","format","indentBy","supressEmptyNode","tagValueProcessor","attrValueProcessor","rootNodeName"];function s(t){this.options=n(t,i,o);if(this.options.ignoreAttributes||this.options.attrNodeName){this.isAttribute=function(){return false}}else{this.attrPrefixLen=this.options.attributeNamePrefix.length;this.isAttribute=y}if(this.options.cdataTagName){this.isCDATA=v}else{this.isCDATA=function(){return false}}this.replaceCDATAstr=u;this.replaceCDATAarr=l;this.processTextOrObjNode=a;if(this.options.format){this.indentate=d;this.tagEndChar=">\n";this.newLine="\n"}else{this.indentate=function(){return""};this.tagEndChar=">";this.newLine=""}if(this.options.supressEmptyNode){this.buildTextNode=p;this.buildObjNode=h}else{this.buildTextNode=f;this.buildObjNode=c}this.buildTextValNode=f;this.buildObjectNode=c}s.prototype.parse=function(t){if(Array.isArray(t)&&this.options.rootNodeName&&this.options.rootNodeName.length>1){t={[this.options.rootNodeName]:t}}return this.j2x(t,0).val};s.prototype.j2x=function(t,e){let r="";let n="";for(let i in t){if(typeof t[i]==="undefined"){}else if(t[i]===null){n+=this.indentate(e)+"<"+i+"/"+this.tagEndChar}else if(t[i]instanceof Date){n+=this.buildTextNode(t[i],i,"",e)}else if(typeof t[i]!=="object"){const o=this.isAttribute(i);if(o){r+=" "+o+'="'+this.options.attrValueProcessor(""+t[i])+'"'}else if(this.isCDATA(i)){if(t[this.options.textNodeName]){n+=this.replaceCDATAstr(t[this.options.textNodeName],t[i])}else{n+=this.replaceCDATAstr("",t[i])}}else{if(i===this.options.textNodeName){if(t[this.options.cdataTagName]){}else{n+=this.options.tagValueProcessor(""+t[i])}}else{n+=this.buildTextNode(t[i],i,"",e)}}}else if(Array.isArray(t[i])){if(this.isCDATA(i)){n+=this.indentate(e);if(t[this.options.textNodeName]){n+=this.replaceCDATAarr(t[this.options.textNodeName],t[i])}else{n+=this.replaceCDATAarr("",t[i])}}else{const r=t[i].length;for(let o=0;o<r;o++){const r=t[i][o];if(typeof r==="undefined"){}else if(r===null){n+=this.indentate(e)+"<"+i+"/"+this.tagEndChar}else if(typeof r==="object"){n+=this.processTextOrObjNode(r,i,e)}else{n+=this.buildTextNode(r,i,"",e)}}}}else{if(this.options.attrNodeName&&i===this.options.attrNodeName){const e=Object.keys(t[i]);const n=e.length;for(let o=0;o<n;o++){r+=" "+e[o]+'="'+this.options.attrValueProcessor(""+t[i][e[o]])+'"'}}else{n+=this.processTextOrObjNode(t[i],i,e)}}}return{attrStr:r,val:n}};function a(t,e,r){const n=this.j2x(t,r+1);if(t[this.options.textNodeName]!==undefined&&Object.keys(t).length===1){return this.buildTextNode(n.val,e,n.attrStr,r)}else{return this.buildObjNode(n.val,e,n.attrStr,r)}}function u(t,e){t=this.options.tagValueProcessor(""+t);if(this.options.cdataPositionChar===""||t===""){return t+"<![CDATA["+e+"]]"+this.tagEndChar}else{return t.replace(this.options.cdataPositionChar,"<![CDATA["+e+"]]"+this.tagEndChar)}}function l(t,e){t=this.options.tagValueProcessor(""+t);if(this.options.cdataPositionChar===""||t===""){return t+"<![CDATA["+e.join("]]><![CDATA[")+"]]"+this.tagEndChar}else{for(let r in e){t=t.replace(this.options.cdataPositionChar,"<![CDATA["+e[r]+"]]>")}return t+this.newLine}}function c(t,e,r,n){if(r&&t.indexOf("<")===-1){return this.indentate(n)+"<"+e+r+">"+t+"</"+e+this.tagEndChar}else{return this.indentate(n)+"<"+e+r+this.tagEndChar+t+this.indentate(n)+"</"+e+this.tagEndChar}}function h(t,e,r,n){if(t!==""){return this.buildObjectNode(t,e,r,n)}else{return this.indentate(n)+"<"+e+r+"/"+this.tagEndChar}}function f(t,e,r,n){return this.indentate(n)+"<"+e+r+">"+this.options.tagValueProcessor(t)+"</"+e+this.tagEndChar}function p(t,e,r,n){if(t!==""){return this.buildTextValNode(t,e,r,n)}else{return this.indentate(n)+"<"+e+r+"/"+this.tagEndChar}}function d(t){return this.options.indentBy.repeat(t)}function y(t){if(t.startsWith(this.options.attributeNamePrefix)){return t.substr(this.attrPrefixLen)}else{return false}}function v(t){return t===this.options.cdataTagName}t.exports=s},function(t,e){t.exports=function(t){if(!t.webpackPolyfill){t.deprecate=function(){};t.paths=[];if(!t.children)t.children=[];Object.defineProperty(t,"loaded",{enumerable:true,get:function(){return t.l}});Object.defineProperty(t,"id",{enumerable:true,get:function(){return t.i}});t.webpackPolyfill=1}return t}},function(t,e,r){(function(t,e){(function(t,e){true?e():undefined})(this,function(){"use strict";function r(t){var e=this.constructor;return this.then(function(r){return e.resolve(t()).then(function(){return r})},function(r){return e.resolve(t()).then(function(){return e.reject(r)})})}function n(t){var e=this;return new e(function(e,r){if(!(t&&typeof t.length!=="undefined")){return r(new TypeError(typeof t+" "+t+" is not iterable(cannot read property Symbol(Symbol.iterator))"))}var n=Array.prototype.slice.call(t);if(n.length===0)return e([]);var i=n.length;function o(t,r){if(r&&(typeof r==="object"||typeof r==="function")){var s=r.then;if(typeof s==="function"){s.call(r,function(e){o(t,e)},function(r){n[t]={status:"rejected",reason:r};if(--i===0){e(n)}});return}}n[t]={status:"fulfilled",value:r};if(--i===0){e(n)}}for(var s=0;s<n.length;s++){o(s,n[s])}})}var i=setTimeout;function o(t){return Boolean(t&&typeof t.length!=="undefined")}function s(){}function a(t,e){return function(){t.apply(e,arguments)}}function u(t){if(!(this instanceof u))throw new TypeError("Promises must be constructed via new");if(typeof t!=="function")throw new TypeError("not a function");this._state=0;this._handled=false;this._value=undefined;this._deferreds=[];d(t,this)}function l(t,e){while(t._state===3){t=t._value}if(t._state===0){t._deferreds.push(e);return}t._handled=true;u._immediateFn(function(){var r=t._state===1?e.onFulfilled:e.onRejected;if(r===null){(t._state===1?c:h)(e.promise,t._value);return}var n;try{n=r(t._value)}catch(t){h(e.promise,t);return}c(e.promise,n)})}function c(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&(typeof e==="object"||typeof e==="function")){var r=e.then;if(e instanceof u){t._state=3;t._value=e;f(t);return}else if(typeof r==="function"){d(a(r,e),t);return}}t._state=1;t._value=e;f(t)}catch(e){h(t,e)}}function h(t,e){t._state=2;t._value=e;f(t)}function f(t){if(t._state===2&&t._deferreds.length===0){u._immediateFn(function(){if(!t._handled){u._unhandledRejectionFn(t._value)}})}for(var e=0,r=t._deferreds.length;e<r;e++){l(t,t._deferreds[e])}t._deferreds=null}function p(t,e,r){this.onFulfilled=typeof t==="function"?t:null;this.onRejected=typeof e==="function"?e:null;this.promise=r}function d(t,e){var r=false;try{t(function(t){if(r)return;r=true;c(e,t)},function(t){if(r)return;r=true;h(e,t)})}catch(t){if(r)return;r=true;h(e,t)}}u.prototype["catch"]=function(t){return this.then(null,t)};u.prototype.then=function(t,e){var r=new this.constructor(s);l(this,new p(t,e,r));return r};u.prototype["finally"]=r;u.all=function(t){return new u(function(e,r){if(!o(t)){return r(new TypeError("Promise.all accepts an array"))}var n=Array.prototype.slice.call(t);if(n.length===0)return e([]);var i=n.length;function s(t,o){try{if(o&&(typeof o==="object"||typeof o==="function")){var a=o.then;if(typeof a==="function"){a.call(o,function(e){s(t,e)},r);return}}n[t]=o;if(--i===0){e(n)}}catch(t){r(t)}}for(var a=0;a<n.length;a++){s(a,n[a])}})};u.allSettled=n;u.resolve=function(t){if(t&&typeof t==="object"&&t.constructor===u){return t}return new u(function(e){e(t)})};u.reject=function(t){return new u(function(e,r){r(t)})};u.race=function(t){return new u(function(e,r){if(!o(t)){return r(new TypeError("Promise.race accepts an array"))}for(var n=0,i=t.length;n<i;n++){u.resolve(t[n]).then(e,r)}})};u._immediateFn=typeof t==="function"&&function(e){t(e)}||function(t){i(t,0)};u._unhandledRejectionFn=function t(e){if(typeof console!=="undefined"&&console){console.warn("Possible Unhandled Promise Rejection:",e)}};var y=function(){if(typeof self!=="undefined"){return self}if(typeof window!=="undefined"){return window}if(typeof e!=="undefined"){return e}throw new Error("unable to locate global object")}();if(typeof y["Promise"]!=="function"){y["Promise"]=u}else{if(!y.Promise.prototype["finally"]){y.Promise.prototype["finally"]=r}if(!y.Promise.allSettled){y.Promise.allSettled=n}}})}).call(this,r(239).setImmediate,r(77))},function(t,e){(function(e){"use strict";if(!e.__disableNativeFetch&&e.fetch){return}function r(t){if(typeof t!=="string"){t=String(t)}if(/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t)){throw new TypeError("Invalid character in header field name")}return t.toLowerCase()}function n(t){if(typeof t!=="string"){t=String(t)}return t}function i(t){this.map={};if(t instanceof i){t.forEach(function(t,e){this.append(e,t)},this)}else if(t){Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}}i.prototype.append=function(t,e){t=r(t);e=n(e);var i=this.map[t];if(!i){i=[];this.map[t]=i}i.push(e)};i.prototype["delete"]=function(t){delete this.map[r(t)]};i.prototype.get=function(t){var e=this.map[r(t)];return e?e[0]:null};i.prototype.getAll=function(t){return this.map[r(t)]||[]};i.prototype.has=function(t){return this.map.hasOwnProperty(r(t))};i.prototype.set=function(t,e){this.map[r(t)]=[n(e)]};i.prototype.forEach=function(t,e){Object.getOwnPropertyNames(this.map).forEach(function(r){this.map[r].forEach(function(n){t.call(e,n,r,this)},this)},this)};function o(t){if(t.bodyUsed){return Promise.reject(new TypeError("Already read"))}t.bodyUsed=true}function s(t){return new Promise(function(e,r){t.onload=function(){e(t.result)};t.onerror=function(){r(t.error)}})}function a(t){var e=new FileReader;e.readAsArrayBuffer(t);return s(e)}function u(t,e){var r=new FileReader;var n=e.headers.map["content-type"]?e.headers.map["content-type"].toString():"";var i=/charset\=[0-9a-zA-Z\-\_]*;?/;var o=t.type.match(i)||n.match(i);var a=[t];if(o){a.push(o[0].replace(/^charset\=/,"").replace(/;$/,""))}r.readAsText.apply(r,a);return s(r)}var l={blob:"FileReader"in e&&"Blob"in e&&function(){try{new Blob;return true}catch(t){return false}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};function c(){this.bodyUsed=false;this._initBody=function(t,e){this._bodyInit=t;if(typeof t==="string"){this._bodyText=t}else if(l.blob&&Blob.prototype.isPrototypeOf(t)){this._bodyBlob=t;this._options=e}else if(l.formData&&FormData.prototype.isPrototypeOf(t)){this._bodyFormData=t}else if(!t){this._bodyText=""}else if(l.arrayBuffer&&ArrayBuffer.prototype.isPrototypeOf(t)){}else{throw new Error("unsupported BodyInit type")}};if(l.blob){this.blob=function(){var t=o(this);if(t){return t}if(this._bodyBlob){return Promise.resolve(this._bodyBlob)}else if(this._bodyFormData){throw new Error("could not read FormData body as blob")}else{return Promise.resolve(new Blob([this._bodyText]))}};this.arrayBuffer=function(){return this.blob().then(a)};this.text=function(){var t=o(this);if(t){return t}if(this._bodyBlob){return u(this._bodyBlob,this._options)}else if(this._bodyFormData){throw new Error("could not read FormData body as text")}else{return Promise.resolve(this._bodyText)}}}else{this.text=function(){var t=o(this);return t?t:Promise.resolve(this._bodyText)}}if(l.formData){this.formData=function(){return this.text().then(d)}}this.json=function(){return this.text().then(JSON.parse)};return this}var h=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function f(t){var e=t.toUpperCase();return h.indexOf(e)>-1?e:t}function p(t,e){e=e||{};var r=e.body;if(p.prototype.isPrototypeOf(t)){if(t.bodyUsed){throw new TypeError("Already read")}this.url=t.url;this.credentials=t.credentials;if(!e.headers){this.headers=new i(t.headers)}this.method=t.method;this.mode=t.mode;if(!r){r=t._bodyInit;t.bodyUsed=true}}else{this.url=t}this.credentials=e.credentials||this.credentials||"omit";if(e.headers||!this.headers){this.headers=new i(e.headers)}this.method=f(e.method||this.method||"GET");this.mode=e.mode||this.mode||null;this.referrer=null;if((this.method==="GET"||this.method==="HEAD")&&r){throw new TypeError("Body not allowed for GET or HEAD requests")}this._initBody(r,e)}p.prototype.clone=function(){return new p(this)};function d(t){var e=new FormData;t.trim().split("&").forEach(function(t){if(t){var r=t.split("=");var n=r.shift().replace(/\+/g," ");var i=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(i))}});return e}function y(t){var e=new i;var r=t.getAllResponseHeaders().trim().split("\n");r.forEach(function(t){var r=t.trim().split(":");var n=r.shift().trim();var i=r.join(":").trim();e.append(n,i)});return e}c.call(p.prototype);function v(t,e){if(!e){e={}}this._initBody(t,e);this.type="default";this.status=e.status;this.ok=this.status>=200&&this.status<300;this.statusText=e.statusText;this.headers=e.headers instanceof i?e.headers:new i(e.headers);this.url=e.url||""}c.call(v.prototype);v.prototype.clone=function(){return new v(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new i(this.headers),url:this.url})};v.error=function(){var t=new v(null,{status:0,statusText:""});t.type="error";return t};var g=[301,302,303,307,308];v.redirect=function(t,e){if(g.indexOf(e)===-1){throw new RangeError("Invalid status code")}return new v(null,{status:e,headers:{location:t}})};e.Headers=i;e.Request=p;e.Response=v;e.fetch=function(t,e){return new Promise(function(r,n){var i;if(p.prototype.isPrototypeOf(t)&&!e){i=t}else{i=new p(t,e)}var o=new XMLHttpRequest;function s(){if("responseURL"in o){return o.responseURL}if(/^X-Request-URL:/m.test(o.getAllResponseHeaders())){return o.getResponseHeader("X-Request-URL")}return}var a=false;function u(){if(o.readyState!==4){return}var t=o.status===1223?204:o.status;if(t<100||t>599){if(a){return}else{a=true}n(new TypeError("Network request failed"));return}var e={status:t,statusText:o.statusText,headers:y(o),url:s()};var i="response"in o?o.response:o.responseText;if(a){return}else{a=true}r(new v(i,e))}o.onreadystatechange=u;o.onload=u;o.onerror=function(){if(a){return}else{a=true}n(new TypeError("Network request failed"))};o.open(i.method,i.url,true);try{if(i.credentials==="include"){if("withCredentials"in o){o.withCredentials=true}else{console&&console.warn&&console.warn("withCredentials is not supported, you can ignore this warning")}}}catch(t){console&&console.warn&&console.warn("set withCredentials error:"+t)}if("responseType"in o&&l.blob){o.responseType="blob"}i.headers.forEach(function(t,e){o.setRequestHeader(e,t)});o.send(typeof i._bodyInit==="undefined"?null:i._bodyInit)})};e.fetch.polyfill=true;if(typeof t!=="undefined"&&t.exports){t.exports=e.fetch}})(typeof self!=="undefined"?self:this)},function(t,e,r){"use strict";var n=r(22);var i=r(276);var o=r(526);var s=r(283);var a=r(173);function u(t){var e=new o(t);var r=i(o.prototype.request,e);n.extend(r,o.prototype,e);n.extend(r,e);r.create=function e(r){return u(s(t,r))};return r}var l=u(a);l.Axios=o;l.Cancel=r(105);l.CancelToken=r(539);l.isCancel=r(282);l.VERSION=r(284).version;l.all=function t(e){return Promise.all(e)};l.spread=r(540);l.isAxiosError=r(541);t.exports=l;t.exports.default=l},function(t,e,r){"use strict";var n=r(22);var i=r(277);var o=r(527);var s=r(528);var a=r(283);var u=r(538);var l=u.validators;function c(t){this.defaults=t;this.interceptors={request:new o,response:new o}}c.prototype.request=function t(e,r){if(typeof e==="string"){r=r||{};r.url=e}else{r=e||{}}r=a(this.defaults,r);if(r.method){r.method=r.method.toLowerCase()}else if(this.defaults.method){r.method=this.defaults.method.toLowerCase()}else{r.method="get"}var n=r.transitional;if(n!==undefined){u.assertOptions(n,{silentJSONParsing:l.transitional(l.boolean),forcedJSONParsing:l.transitional(l.boolean),clarifyTimeoutError:l.transitional(l.boolean)},false)}var i=[];var o=true;this.interceptors.request.forEach(function t(e){if(typeof e.runWhen==="function"&&e.runWhen(r)===false){return}o=o&&e.synchronous;i.unshift(e.fulfilled,e.rejected)});var c=[];this.interceptors.response.forEach(function t(e){c.push(e.fulfilled,e.rejected)});var h;if(!o){var f=[s,undefined];Array.prototype.unshift.apply(f,i);f=f.concat(c);h=Promise.resolve(r);while(f.length){h=h.then(f.shift(),f.shift())}return h}var p=r;while(i.length){var d=i.shift();var y=i.shift();try{p=d(p)}catch(t){y(t);break}}try{h=s(p)}catch(t){return Promise.reject(t)}while(c.length){h=h.then(c.shift(),c.shift())}return h};c.prototype.getUri=function t(e){e=a(this.defaults,e);return i(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};n.forEach(["delete","get","head","options"],function t(e){c.prototype[e]=function(t,r){return this.request(a(r||{},{method:e,url:t,data:(r||{}).data}))}});n.forEach(["post","put","patch"],function t(e){c.prototype[e]=function(t,r,n){return this.request(a(n||{},{method:e,url:t,data:r}))}});t.exports=c},function(t,e,r){"use strict";var n=r(22);function i(){this.handlers=[]}i.prototype.use=function t(e,r,n){this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:false,runWhen:n?n.runWhen:null});return this.handlers.length-1};i.prototype.eject=function t(e){if(this.handlers[e]){this.handlers[e]=null}};i.prototype.forEach=function t(e){n.forEach(this.handlers,function t(r){if(r!==null){e(r)}})};t.exports=i},function(t,e,r){"use strict";var n=r(22);var i=r(529);var o=r(282);var s=r(173);var a=r(105);function u(t){if(t.cancelToken){t.cancelToken.throwIfRequested()}if(t.signal&&t.signal.aborted){throw new a("canceled")}}t.exports=function t(e){u(e);e.headers=e.headers||{};e.data=i.call(e,e.data,e.headers,e.transformRequest);e.headers=n.merge(e.headers.common||{},e.headers[e.method]||{},e.headers);n.forEach(["delete","get","head","post","put","patch","common"],function t(r){delete e.headers[r]});var r=e.adapter||s.adapter;return r(e).then(function t(r){u(e);r.data=i.call(e,r.data,r.headers,e.transformResponse);return r},function t(r){if(!o(r)){u(e);if(r&&r.response){r.response.data=i.call(e,r.response.data,r.response.headers,e.transformResponse)}}return Promise.reject(r)})}},function(t,e,r){"use strict";var n=r(22);var i=r(173);t.exports=function t(e,r,o){var s=this||i;n.forEach(o,function t(n){e=n.call(s,e,r)});return e}},function(t,e,r){"use strict";var n=r(22);t.exports=function t(e,r){n.forEach(e,function t(n,i){if(i!==r&&i.toUpperCase()===r.toUpperCase()){e[r]=n;delete e[i]}})}},function(t,e,r){"use strict";var n=r(281);t.exports=function t(e,r,i){var o=i.config.validateStatus;if(!i.status||!o||o(i.status)){e(i)}else{r(n("Request failed with status code "+i.status,i.config,null,i.request,i))}}},function(t,e,r){"use strict";var n=r(22);t.exports=n.isStandardBrowserEnv()?function t(){return{write:function t(e,r,i,o,s,a){var u=[];u.push(e+"="+encodeURIComponent(r));if(n.isNumber(i)){u.push("expires="+new Date(i).toGMTString())}if(n.isString(o)){u.push("path="+o)}if(n.isString(s)){u.push("domain="+s)}if(a===true){u.push("secure")}document.cookie=u.join("; ")},read:function t(e){var r=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function t(e){this.write(e,"",Date.now()-864e5)}}}():function t(){return{write:function t(){},read:function t(){return null},remove:function t(){}}}()},function(t,e,r){"use strict";var n=r(534);var i=r(535);t.exports=function t(e,r){if(e&&!n(r)){return i(e,r)}return r}},function(t,e,r){"use strict";t.exports=function t(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}},function(t,e,r){"use strict";t.exports=function t(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e}},function(t,e,r){"use strict";var n=r(22);var i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function t(e){var r={};var o;var s;var a;if(!e){return r}n.forEach(e.split("\n"),function t(e){a=e.indexOf(":");o=n.trim(e.substr(0,a)).toLowerCase();s=n.trim(e.substr(a+1));if(o){if(r[o]&&i.indexOf(o)>=0){return}if(o==="set-cookie"){r[o]=(r[o]?r[o]:[]).concat([s])}else{r[o]=r[o]?r[o]+", "+s:s}}});return r}},function(t,e,r){"use strict";var n=r(22);t.exports=n.isStandardBrowserEnv()?function t(){var e=/(msie|trident)/i.test(navigator.userAgent);var r=document.createElement("a");var i;function o(t){var n=t;if(e){r.setAttribute("href",n);n=r.href}r.setAttribute("href",n);return{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}i=o(window.location.href);return function t(e){var r=n.isString(e)?o(e):e;return r.protocol===i.protocol&&r.host===i.host}}():function t(){return function t(){return true}}()},function(t,e,r){"use strict";var n=r(284).version;var i={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){i[t]=function r(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var o={};i.transitional=function t(e,r,i){function s(t,e){return"[Axios v"+n+"] Transitional option '"+t+"'"+e+(i?". "+i:"")}return function(t,n,i){if(e===false){throw new Error(s(n," has been removed"+(r?" in "+r:"")))}if(r&&!o[n]){o[n]=true;console.warn(s(n," has been deprecated since v"+r+" and will be removed in the near future"))}return e?e(t,n,i):true}};function s(t,e,r){if(typeof t!=="object"){throw new TypeError("options must be an object")}var n=Object.keys(t);var i=n.length;while(i-- >0){var o=n[i];var s=e[o];if(s){var a=t[o];var u=a===undefined||s(a,o,t);if(u!==true){throw new TypeError("option "+o+" must be "+u)}continue}if(r!==true){throw Error("Unknown option "+o)}}}t.exports={assertOptions:s,validators:i}},function(t,e,r){"use strict";var n=r(105);function i(t){if(typeof t!=="function"){throw new TypeError("executor must be a function.")}var e;this.promise=new Promise(function t(r){e=r});var r=this;this.promise.then(function(t){if(!r._listeners)return;var e;var n=r._listeners.length;for(e=0;e<n;e++){r._listeners[e](t)}r._listeners=null});this.promise.then=function(t){var e;var n=new Promise(function(t){r.subscribe(t);e=t}).then(t);n.cancel=function t(){r.unsubscribe(e)};return n};t(function t(i){if(r.reason){return}r.reason=new n(i);e(r.reason)})}i.prototype.throwIfRequested=function t(){if(this.reason){throw this.reason}};i.prototype.subscribe=function t(e){if(this.reason){e(this.reason);return}if(this._listeners){this._listeners.push(e)}else{this._listeners=[e]}};i.prototype.unsubscribe=function t(e){if(!this._listeners){return}var r=this._listeners.indexOf(e);if(r!==-1){this._listeners.splice(r,1)}};i.source=function t(){var e;var r=new i(function t(r){e=r});return{token:r,cancel:e}};t.exports=i},function(t,e,r){"use strict";t.exports=function t(e){return function t(r){return e.apply(null,r)}}},function(t,e,r){"use strict";var n=r(22);t.exports=function t(e){return n.isObject(e)&&e.isAxiosError===true}},function(t,e,r){"use strict";var n=r(543);var i=r(285);var o=r(176);var s=Object.prototype.hasOwnProperty;var a={brackets:function t(e){return e+"[]"},comma:"comma",indices:function t(e,r){return e+"["+r+"]"},repeat:function t(e){return e}};var u=Array.isArray;var l=String.prototype.split;var c=Array.prototype.push;var h=function(t,e){c.apply(t,u(e)?e:[e])};var f=Date.prototype.toISOString;var p=o["default"];var d={addQueryPrefix:false,allowDots:false,charset:"utf-8",charsetSentinel:false,delimiter:"&",encode:true,encoder:i.encode,encodeValuesOnly:false,format:p,formatter:o.formatters[p],indices:false,serializeDate:function t(e){return f.call(e)},skipNulls:false,strictNullHandling:false};var y=function t(e){return typeof e==="string"||typeof e==="number"||typeof e==="boolean"||typeof e==="symbol"||typeof e==="bigint"};var v={};var g=function t(e,r,o,s,a,c,f,p,g,m,_,b,x,S,w,C){var I=e;var E=C;var P=0;var M=false;while((E=E.get(v))!==void undefined&&!M){var L=E.get(e);P+=1;if(typeof L!=="undefined"){if(L===P){throw new RangeError("Cyclic object value")}else{M=true}}if(typeof E.get(v)==="undefined"){P=0}}if(typeof p==="function"){I=p(r,I)}else if(I instanceof Date){I=_(I)}else if(o==="comma"&&u(I)){I=i.maybeMap(I,function(t){if(t instanceof Date){return _(t)}return t})}if(I===null){if(a){return f&&!S?f(r,d.encoder,w,"key",b):r}I=""}if(y(I)||i.isBuffer(I)){if(f){var N=S?r:f(r,d.encoder,w,"key",b);if(o==="comma"&&S){var T=l.call(String(I),",");var O="";for(var A=0;A<T.length;++A){O+=(A===0?"":",")+x(f(T[A],d.encoder,w,"value",b))}return[x(N)+(s&&u(I)&&T.length===1?"[]":"")+"="+O]}return[x(N)+"="+x(f(I,d.encoder,w,"value",b))]}return[x(r)+"="+x(String(I))]}var R=[];if(typeof I==="undefined"){return R}var F;if(o==="comma"&&u(I)){F=[{value:I.length>0?I.join(",")||null:void undefined}]}else if(u(p)){F=p}else{var D=Object.keys(I);F=g?D.sort(g):D}var k=s&&u(I)&&I.length===1?r+"[]":r;for(var j=0;j<F.length;++j){var G=F[j];var B=typeof G==="object"&&typeof G.value!=="undefined"?G.value:I[G];if(c&&B===null){continue}var U=u(I)?typeof o==="function"?o(k,G):k:k+(m?"."+G:"["+G+"]");C.set(e,P);var q=n();q.set(v,C);h(R,t(B,U,o,s,a,c,f,p,g,m,_,b,x,S,w,q))}return R};var m=function t(e){if(!e){return d}if(e.encoder!==null&&typeof e.encoder!=="undefined"&&typeof e.encoder!=="function"){throw new TypeError("Encoder has to be a function.")}var r=e.charset||d.charset;if(typeof e.charset!=="undefined"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1"){throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined")}var n=o["default"];if(typeof e.format!=="undefined"){if(!s.call(o.formatters,e.format)){throw new TypeError("Unknown format option provided.")}n=e.format}var i=o.formatters[n];var a=d.filter;if(typeof e.filter==="function"||u(e.filter)){a=e.filter}return{addQueryPrefix:typeof e.addQueryPrefix==="boolean"?e.addQueryPrefix:d.addQueryPrefix,allowDots:typeof e.allowDots==="undefined"?d.allowDots:!!e.allowDots,charset:r,charsetSentinel:typeof e.charsetSentinel==="boolean"?e.charsetSentinel:d.charsetSentinel,delimiter:typeof e.delimiter==="undefined"?d.delimiter:e.delimiter,encode:typeof e.encode==="boolean"?e.encode:d.encode,encoder:typeof e.encoder==="function"?e.encoder:d.encoder,encodeValuesOnly:typeof e.encodeValuesOnly==="boolean"?e.encodeValuesOnly:d.encodeValuesOnly,filter:a,format:n,formatter:i,serializeDate:typeof e.serializeDate==="function"?e.serializeDate:d.serializeDate,skipNulls:typeof e.skipNulls==="boolean"?e.skipNulls:d.skipNulls,sort:typeof e.sort==="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling==="boolean"?e.strictNullHandling:d.strictNullHandling}};t.exports=function(t,e){var r=t;var i=m(e);var o;var s;if(typeof i.filter==="function"){s=i.filter;r=s("",r)}else if(u(i.filter)){s=i.filter;o=s}var l=[];if(typeof r!=="object"||r===null){return""}var c;if(e&&e.arrayFormat in a){c=e.arrayFormat}else if(e&&"indices"in e){c=e.indices?"indices":"repeat"}else{c="indices"}var f=a[c];if(e&&"commaRoundTrip"in e&&typeof e.commaRoundTrip!=="boolean"){throw new TypeError("`commaRoundTrip` must be a boolean, or absent")}var p=f==="comma"&&e&&e.commaRoundTrip;if(!o){o=Object.keys(r)}if(i.sort){o.sort(i.sort)}var d=n();for(var y=0;y<o.length;++y){var v=o[y];if(i.skipNulls&&r[v]===null){continue}h(l,g(r[v],v,f,p,i.strictNullHandling,i.skipNulls,i.encode?i.encoder:null,i.filter,i.sort,i.allowDots,i.serializeDate,i.format,i.formatter,i.encodeValuesOnly,i.charset,d))}var _=l.join(i.delimiter);var b=i.addQueryPrefix===true?"?":"";if(i.charsetSentinel){if(i.charset==="iso-8859-1"){b+="utf8=%26%2310003%3B&"}else{b+="utf8=%E2%9C%93&"}}return _.length>0?b+_:""}},function(t,e,r){"use strict";var n=r(174);var i=r(548);var o=r(550);var s=n("%TypeError%");var a=n("%WeakMap%",true);var u=n("%Map%",true);var l=i("WeakMap.prototype.get",true);var c=i("WeakMap.prototype.set",true);var h=i("WeakMap.prototype.has",true);var f=i("Map.prototype.get",true);var p=i("Map.prototype.set",true);var d=i("Map.prototype.has",true);var y=function(t,e){for(var r=t,n;(n=r.next)!==null;r=n){if(n.key===e){r.next=n.next;n.next=t.next;t.next=n;return n}}};var v=function(t,e){var r=y(t,e);return r&&r.value};var g=function(t,e,r){var n=y(t,e);if(n){n.value=r}else{t.next={key:e,next:t.next,value:r}}};var m=function(t,e){return!!y(t,e)};t.exports=function t(){var e;var r;var n;var i={assert:function(t){if(!i.has(t)){throw new s("Side channel does not contain "+o(t))}},get:function(t){if(a&&t&&(typeof t==="object"||typeof t==="function")){if(e){return l(e,t)}}else if(u){if(r){return f(r,t)}}else{if(n){return v(n,t)}}},has:function(t){if(a&&t&&(typeof t==="object"||typeof t==="function")){if(e){return h(e,t)}}else if(u){if(r){return d(r,t)}}else{if(n){return m(n,t)}}return false},set:function(t,i){if(a&&t&&(typeof t==="object"||typeof t==="function")){if(!e){e=new a}c(e,t,i)}else if(u){if(!r){r=new u}p(r,t,i)}else{if(!n){n={key:{},next:null}}g(n,t,i)}}};return i}},function(t,e,r){"use strict";var n=typeof Symbol!=="undefined"&&Symbol;var i=r(545);t.exports=function t(){if(typeof n!=="function"){return false}if(typeof Symbol!=="function"){return false}if(typeof n("foo")!=="symbol"){return false}if(typeof Symbol("bar")!=="symbol"){return false}return i()}},function(t,e,r){"use strict";t.exports=function t(){if(typeof Symbol!=="function"||typeof Object.getOwnPropertySymbols!=="function"){return false}if(typeof Symbol.iterator==="symbol"){return true}var e={};var r=Symbol("test");var n=Object(r);if(typeof r==="string"){return false}if(Object.prototype.toString.call(r)!=="[object Symbol]"){return false}if(Object.prototype.toString.call(n)!=="[object Symbol]"){return false}var i=42;e[r]=i;for(r in e){return false}if(typeof Object.keys==="function"&&Object.keys(e).length!==0){return false}if(typeof Object.getOwnPropertyNames==="function"&&Object.getOwnPropertyNames(e).length!==0){return false}var o=Object.getOwnPropertySymbols(e);if(o.length!==1||o[0]!==r){return false}if(!Object.prototype.propertyIsEnumerable.call(e,r)){return false}if(typeof Object.getOwnPropertyDescriptor==="function"){var s=Object.getOwnPropertyDescriptor(e,r);if(s.value!==i||s.enumerable!==true){return false}}return true}},function(t,e,r){"use strict";var n="Function.prototype.bind called on incompatible ";var i=Array.prototype.slice;var o=Object.prototype.toString;var s="[object Function]";t.exports=function t(e){var r=this;if(typeof r!=="function"||o.call(r)!==s){throw new TypeError(n+r)}var a=i.call(arguments,1);var u;var l=function(){if(this instanceof u){var t=r.apply(this,a.concat(i.call(arguments)));if(Object(t)===t){return t}return this}else{return r.apply(e,a.concat(i.call(arguments)))}};var c=Math.max(0,r.length-a.length);var h=[];for(var f=0;f<c;f++){h.push("$"+f)}u=Function("binder","return function ("+h.join(",")+"){ return binder.apply(this,arguments); }")(l);if(r.prototype){var p=function t(){};p.prototype=r.prototype;u.prototype=new p;p.prototype=null}return u}},function(t,e,r){"use strict";var n=r(175);t.exports=n.call(Function.call,Object.prototype.hasOwnProperty)},function(t,e,r){"use strict";var n=r(174);var i=r(549);var o=i(n("String.prototype.indexOf"));t.exports=function t(e,r){var s=n(e,!!r);if(typeof s==="function"&&o(e,".prototype.")>-1){return i(s)}return s}},function(t,e,r){"use strict";var n=r(175);var i=r(174);var o=i("%Function.prototype.apply%");var s=i("%Function.prototype.call%");var a=i("%Reflect.apply%",true)||n.call(s,o);var u=i("%Object.getOwnPropertyDescriptor%",true);var l=i("%Object.defineProperty%",true);var c=i("%Math.max%");if(l){try{l({},"a",{value:1})}catch(t){l=null}}t.exports=function t(e){var r=a(n,s,arguments);if(u&&l){var i=u(r,"length");if(i.configurable){l(r,"length",{value:1+c(0,e.length-(arguments.length-1))})}}return r};var h=function t(){return a(n,o,arguments)};if(l){l(t.exports,"apply",{value:h})}else{t.exports.apply=h}},function(t,e,r){var n=typeof Map==="function"&&Map.prototype;var i=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null;var o=n&&i&&typeof i.get==="function"?i.get:null;var s=n&&Map.prototype.forEach;var a=typeof Set==="function"&&Set.prototype;var u=Object.getOwnPropertyDescriptor&&a?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null;var l=a&&u&&typeof u.get==="function"?u.get:null;var c=a&&Set.prototype.forEach;var h=typeof WeakMap==="function"&&WeakMap.prototype;var f=h?WeakMap.prototype.has:null;var p=typeof WeakSet==="function"&&WeakSet.prototype;var d=p?WeakSet.prototype.has:null;var y=typeof WeakRef==="function"&&WeakRef.prototype;var v=y?WeakRef.prototype.deref:null;var g=Boolean.prototype.valueOf;var m=Object.prototype.toString;var _=Function.prototype.toString;var b=String.prototype.match;var x=String.prototype.slice;var S=String.prototype.replace;var w=String.prototype.toUpperCase;var C=String.prototype.toLowerCase;var I=RegExp.prototype.test;var E=Array.prototype.concat;var P=Array.prototype.join;var M=Array.prototype.slice;var L=Math.floor;var N=typeof BigInt==="function"?BigInt.prototype.valueOf:null;var T=Object.getOwnPropertySymbols;var O=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?Symbol.prototype.toString:null;var A=typeof Symbol==="function"&&typeof Symbol.iterator==="object";var R=typeof Symbol==="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===A?"object":"symbol")?Symbol.toStringTag:null;var F=Object.prototype.propertyIsEnumerable;var D=(typeof Reflect==="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function k(t,e){if(t===Infinity||t===-Infinity||t!==t||t&&t>-1e3&&t<1e3||I.call(/e/,e)){return e}var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t==="number"){var n=t<0?-L(-t):L(t);if(n!==t){var i=String(n);var o=x.call(e,i.length+1);return S.call(i,r,"$&_")+"."+S.call(S.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return S.call(e,r,"$&_")}var j=r(551);var G=j.custom;var B=J(G)?G:null;t.exports=function t(e,r,n,i){var a=r||{};if($(a,"quoteStyle")&&(a.quoteStyle!=="single"&&a.quoteStyle!=="double")){throw new TypeError('option "quoteStyle" must be "single" or "double"')}if($(a,"maxStringLength")&&(typeof a.maxStringLength==="number"?a.maxStringLength<0&&a.maxStringLength!==Infinity:a.maxStringLength!==null)){throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`')}var u=$(a,"customInspect")?a.customInspect:true;if(typeof u!=="boolean"&&u!=="symbol"){throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`")}if($(a,"indent")&&a.indent!==null&&a.indent!=="\t"&&!(parseInt(a.indent,10)===a.indent&&a.indent>0)){throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`')}if($(a,"numericSeparator")&&typeof a.numericSeparator!=="boolean"){throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`')}var h=a.numericSeparator;if(typeof e==="undefined"){return"undefined"}if(e===null){return"null"}if(typeof e==="boolean"){return e?"true":"false"}if(typeof e==="string"){return lt(e,a)}if(typeof e==="number"){if(e===0){return Infinity/e>0?"0":"-0"}var f=String(e);return h?k(e,f):f}if(typeof e==="bigint"){var p=String(e)+"n";return h?k(e,p):p}var d=typeof a.depth==="undefined"?5:a.depth;if(typeof n==="undefined"){n=0}if(n>=d&&d>0&&typeof e==="object"){return z(e)?"[Array]":"[Object]"}var y=yt(a,n);if(typeof i==="undefined"){i=[]}else if(rt(i,e)>=0){return"[Circular]"}function v(e,r,o){if(r){i=M.call(i);i.push(r)}if(o){var s={depth:a.depth};if($(a,"quoteStyle")){s.quoteStyle=a.quoteStyle}return t(e,s,n+1,i)}return t(e,a,n+1,i)}if(typeof e==="function"&&!W(e)){var m=et(e);var _=gt(e,v);return"[Function"+(m?": "+m:" (anonymous)")+"]"+(_.length>0?" { "+P.call(_,", ")+" }":"")}if(J(e)){var b=A?S.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):O.call(e);return typeof e==="object"&&!A?ht(b):b}if(ut(e)){var w="<"+C.call(String(e.nodeName));var I=e.attributes||[];for(var L=0;L<I.length;L++){w+=" "+I[L].name+"="+U(q(I[L].value),"double",a)}w+=">";if(e.childNodes&&e.childNodes.length){w+="..."}w+="</"+C.call(String(e.nodeName))+">";return w}if(z(e)){if(e.length===0){return"[]"}var T=gt(e,v);if(y&&!dt(T)){return"["+vt(T,y)+"]"}return"[ "+P.call(T,", ")+" ]"}if(H(e)){var G=gt(e,v);if(!("cause"in Error.prototype)&&"cause"in e&&!F.call(e,"cause")){return"{ ["+String(e)+"] "+P.call(E.call("[cause]: "+v(e.cause),G),", ")+" }"}if(G.length===0){return"["+String(e)+"]"}return"{ ["+String(e)+"] "+P.call(G,", ")+" }"}if(typeof e==="object"&&u){if(B&&typeof e[B]==="function"&&j){return j(e,{depth:d-n})}else if(u!=="symbol"&&typeof e.inspect==="function"){return e.inspect()}}if(nt(e)){var K=[];s.call(e,function(t,r){K.push(v(r,e,true)+" => "+v(t,e))});return pt("Map",o.call(e),K,y)}if(st(e)){var ct=[];c.call(e,function(t){ct.push(v(t,e))});return pt("Set",l.call(e),ct,y)}if(it(e)){return ft("WeakMap")}if(at(e)){return ft("WeakSet")}if(ot(e)){return ft("WeakRef")}if(Z(e)){return ht(v(Number(e)))}if(Q(e)){return ht(v(N.call(e)))}if(Y(e)){return ht(g.call(e))}if(X(e)){return ht(v(String(e)))}if(!V(e)&&!W(e)){var mt=gt(e,v);var _t=D?D(e)===Object.prototype:e instanceof Object||e.constructor===Object;var bt=e instanceof Object?"":"null prototype";var xt=!_t&&R&&Object(e)===e&&R in e?x.call(tt(e),8,-1):bt?"Object":"";var St=_t||typeof e.constructor!=="function"?"":e.constructor.name?e.constructor.name+" ":"";var wt=St+(xt||bt?"["+P.call(E.call([],xt||[],bt||[]),": ")+"] ":"");if(mt.length===0){return wt+"{}"}if(y){return wt+"{"+vt(mt,y)+"}"}return wt+"{ "+P.call(mt,", ")+" }"}return String(e)};function U(t,e,r){var n=(r.quoteStyle||e)==="double"?'"':"'";return n+t+n}function q(t){return S.call(String(t),/"/g,"&quot;")}function z(t){return tt(t)==="[object Array]"&&(!R||!(typeof t==="object"&&R in t))}function V(t){return tt(t)==="[object Date]"&&(!R||!(typeof t==="object"&&R in t))}function W(t){return tt(t)==="[object RegExp]"&&(!R||!(typeof t==="object"&&R in t))}function H(t){return tt(t)==="[object Error]"&&(!R||!(typeof t==="object"&&R in t))}function X(t){return tt(t)==="[object String]"&&(!R||!(typeof t==="object"&&R in t))}function Z(t){return tt(t)==="[object Number]"&&(!R||!(typeof t==="object"&&R in t))}function Y(t){return tt(t)==="[object Boolean]"&&(!R||!(typeof t==="object"&&R in t))}function J(t){if(A){return t&&typeof t==="object"&&t instanceof Symbol}if(typeof t==="symbol"){return true}if(!t||typeof t!=="object"||!O){return false}try{O.call(t);return true}catch(t){}return false}function Q(t){if(!t||typeof t!=="object"||!N){return false}try{N.call(t);return true}catch(t){}return false}var K=Object.prototype.hasOwnProperty||function(t){return t in this};function $(t,e){return K.call(t,e)}function tt(t){return m.call(t)}function et(t){if(t.name){return t.name}var e=b.call(_.call(t),/^function\s*([\w$]+)/);if(e){return e[1]}return null}function rt(t,e){if(t.indexOf){return t.indexOf(e)}for(var r=0,n=t.length;r<n;r++){if(t[r]===e){return r}}return-1}function nt(t){if(!o||!t||typeof t!=="object"){return false}try{o.call(t);try{l.call(t)}catch(t){return true}return t instanceof Map}catch(t){}return false}function it(t){if(!f||!t||typeof t!=="object"){return false}try{f.call(t,f);try{d.call(t,d)}catch(t){return true}return t instanceof WeakMap}catch(t){}return false}function ot(t){if(!v||!t||typeof t!=="object"){return false}try{v.call(t);return true}catch(t){}return false}function st(t){if(!l||!t||typeof t!=="object"){return false}try{l.call(t);try{o.call(t)}catch(t){return true}return t instanceof Set}catch(t){}return false}function at(t){if(!d||!t||typeof t!=="object"){return false}try{d.call(t,d);try{f.call(t,f)}catch(t){return true}return t instanceof WeakSet}catch(t){}return false}function ut(t){if(!t||typeof t!=="object"){return false}if(typeof HTMLElement!=="undefined"&&t instanceof HTMLElement){return true}return typeof t.nodeName==="string"&&typeof t.getAttribute==="function"}function lt(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength;var n="... "+r+" more character"+(r>1?"s":"");return lt(x.call(t,0,e.maxStringLength),e)+n}var i=S.call(S.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,ct);return U(i,"single",e)}function ct(t){var e=t.charCodeAt(0);var r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];if(r){return"\\"+r}return"\\x"+(e<16?"0":"")+w.call(e.toString(16))}function ht(t){return"Object("+t+")"}function ft(t){return t+" { ? }"}function pt(t,e,r,n){var i=n?vt(r,n):P.call(r,", ");return t+" ("+e+") {"+i+"}"}function dt(t){for(var e=0;e<t.length;e++){if(rt(t[e],"\n")>=0){return false}}return true}function yt(t,e){var r;if(t.indent==="\t"){r="\t"}else if(typeof t.indent==="number"&&t.indent>0){r=P.call(Array(t.indent+1)," ")}else{return null}return{base:r,prev:P.call(Array(e+1),r)}}function vt(t,e){if(t.length===0){return""}var r="\n"+e.prev+e.base;return r+P.call(t,","+r)+"\n"+e.prev}function gt(t,e){var r=z(t);var n=[];if(r){n.length=t.length;for(var i=0;i<t.length;i++){n[i]=$(t,i)?e(t[i],t):""}}var o=typeof T==="function"?T(t):[];var s;if(A){s={};for(var a=0;a<o.length;a++){s["$"+o[a]]=o[a]}}for(var u in t){if(!$(t,u)){continue}if(r&&String(Number(u))===u&&u<t.length){continue}if(A&&s["$"+u]instanceof Symbol){continue}else if(I.call(/[^\w$]/,u)){n.push(e(u,t)+": "+e(t[u],t))}else{n.push(u+": "+e(t[u],t))}}if(typeof T==="function"){for(var l=0;l<o.length;l++){if(F.call(t,o[l])){n.push("["+e(o[l])+"]: "+e(t[o[l]],t))}}}return n}},function(t,e){},function(t,e,r){"use strict";var n=r(285);var i=Object.prototype.hasOwnProperty;var o=Array.isArray;var s={allowDots:false,allowPrototypes:false,allowSparse:false,arrayLimit:20,charset:"utf-8",charsetSentinel:false,comma:false,decoder:n.decode,delimiter:"&",depth:5,ignoreQueryPrefix:false,interpretNumericEntities:false,parameterLimit:1e3,parseArrays:true,plainObjects:false,strictNullHandling:false};var a=function(t){return t.replace(/&#(\d+);/g,function(t,e){return String.fromCharCode(parseInt(e,10))})};var u=function(t,e){if(t&&typeof t==="string"&&e.comma&&t.indexOf(",")>-1){return t.split(",")}return t};var l="utf8=%26%2310003%3B";var c="utf8=%E2%9C%93";var h=function t(e,r){var h={};var f=r.ignoreQueryPrefix?e.replace(/^\?/,""):e;var p=r.parameterLimit===Infinity?undefined:r.parameterLimit;var d=f.split(r.delimiter,p);var y=-1;var v;var g=r.charset;if(r.charsetSentinel){for(v=0;v<d.length;++v){if(d[v].indexOf("utf8=")===0){if(d[v]===c){g="utf-8"}else if(d[v]===l){g="iso-8859-1"}y=v;v=d.length}}}for(v=0;v<d.length;++v){if(v===y){continue}var m=d[v];var _=m.indexOf("]=");var b=_===-1?m.indexOf("="):_+1;var x,S;if(b===-1){x=r.decoder(m,s.decoder,g,"key");S=r.strictNullHandling?null:""}else{x=r.decoder(m.slice(0,b),s.decoder,g,"key");S=n.maybeMap(u(m.slice(b+1),r),function(t){return r.decoder(t,s.decoder,g,"value")})}if(S&&r.interpretNumericEntities&&g==="iso-8859-1"){S=a(S)}if(m.indexOf("[]=")>-1){S=o(S)?[S]:S}if(i.call(h,x)){h[x]=n.combine(h[x],S)}else{h[x]=S}}return h};var f=function(t,e,r,n){var i=n?e:u(e,r);for(var o=t.length-1;o>=0;--o){var s;var a=t[o];if(a==="[]"&&r.parseArrays){s=[].concat(i)}else{s=r.plainObjects?Object.create(null):{};var l=a.charAt(0)==="["&&a.charAt(a.length-1)==="]"?a.slice(1,-1):a;var c=parseInt(l,10);if(!r.parseArrays&&l===""){s={0:i}}else if(!isNaN(c)&&a!==l&&String(c)===l&&c>=0&&(r.parseArrays&&c<=r.arrayLimit)){s=[];s[c]=i}else if(l!=="__proto__"){s[l]=i}}i=s}return i};var p=function t(e,r,n,o){if(!e){return}var s=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e;var a=/(\[[^[\]]*])/;var u=/(\[[^[\]]*])/g;var l=n.depth>0&&a.exec(s);var c=l?s.slice(0,l.index):s;var h=[];if(c){if(!n.plainObjects&&i.call(Object.prototype,c)){if(!n.allowPrototypes){return}}h.push(c)}var p=0;while(n.depth>0&&(l=u.exec(s))!==null&&p<n.depth){p+=1;if(!n.plainObjects&&i.call(Object.prototype,l[1].slice(1,-1))){if(!n.allowPrototypes){return}}h.push(l[1])}if(l){h.push("["+s.slice(l.index)+"]")}return f(h,r,n,o)};var d=function t(e){if(!e){return s}if(e.decoder!==null&&e.decoder!==undefined&&typeof e.decoder!=="function"){throw new TypeError("Decoder has to be a function.")}if(typeof e.charset!=="undefined"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1"){throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined")}var r=typeof e.charset==="undefined"?s.charset:e.charset;return{allowDots:typeof e.allowDots==="undefined"?s.allowDots:!!e.allowDots,allowPrototypes:typeof e.allowPrototypes==="boolean"?e.allowPrototypes:s.allowPrototypes,allowSparse:typeof e.allowSparse==="boolean"?e.allowSparse:s.allowSparse,arrayLimit:typeof e.arrayLimit==="number"?e.arrayLimit:s.arrayLimit,charset:r,charsetSentinel:typeof e.charsetSentinel==="boolean"?e.charsetSentinel:s.charsetSentinel,comma:typeof e.comma==="boolean"?e.comma:s.comma,decoder:typeof e.decoder==="function"?e.decoder:s.decoder,delimiter:typeof e.delimiter==="string"||n.isRegExp(e.delimiter)?e.delimiter:s.delimiter,depth:typeof e.depth==="number"||e.depth===false?+e.depth:s.depth,ignoreQueryPrefix:e.ignoreQueryPrefix===true,interpretNumericEntities:typeof e.interpretNumericEntities==="boolean"?e.interpretNumericEntities:s.interpretNumericEntities,parameterLimit:typeof e.parameterLimit==="number"?e.parameterLimit:s.parameterLimit,parseArrays:e.parseArrays!==false,plainObjects:typeof e.plainObjects==="boolean"?e.plainObjects:s.plainObjects,strictNullHandling:typeof e.strictNullHandling==="boolean"?e.strictNullHandling:s.strictNullHandling}};t.exports=function(t,e){var r=d(e);if(t===""||t===null||typeof t==="undefined"){return r.plainObjects?Object.create(null):{}}var i=typeof t==="string"?h(t,r):t;var o=r.plainObjects?Object.create(null):{};var s=Object.keys(i);for(var a=0;a<s.length;++a){var u=s[a];var l=p(u,i[u],r,typeof t==="string");o=n.merge(o,l,r)}if(r.allowSparse===true){return o}return n.compact(o)}},function(t,e,r){t.exports={default:r(554),__esModule:true}},function(t,e,r){r(555);var n=r(21).Object;t.exports=function t(e,r){return n.getOwnPropertyDescriptor(e,r)}},function(t,e,r){var n=r(52);var i=r(172).f;r(168)("getOwnPropertyDescriptor",function(){return function t(e,r){return i(n(e),r)}})},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.uniqueThemeLayer=e.UniqueThemeLayer=undefined;var n=r(11);var i=_(n);var o=r(5);var s=_(o);var a=r(6);var u=_(a);var l=r(12);var c=_(l);var h=r(13);var f=_(h);var p=r(19);var d=_(p);var y=r(7);var v=r(309);var g=r(23);var m=r(557);function _(t){return t&&t.__esModule?t:{default:t}}var b=y.Common.copyAttributesWithClip,x=y.Common.Zondy;var S=function(t){(0,f.default)(e,t);function e(t,r){(0,s.default)(this,e);var n=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r));n.themeField=r.themeField;n.style=r.style;n.styleGroups=r.styleGroups;n.isHoverAble=r.isHoverAble;n.highlightStyle=r.highlightStyle;return n}(0,u.default)(e,[{key:"createThematicFeature",value:function t(e){var r=this.getStyleByData(e);var n={};n.nodesClipPixel=this.nodesClipPixel;n.isHoverAble=this.isHoverAble;n.isMultiHover=this.isMultiHover;n.isClickAble=this.isClickAble;n.highlightStyle=g.ShapeFactory.transformStyle(this.highlightStyle);var i=new m.ThemeVector(e,this,g.ShapeFactory.transformStyle(r),n);for(var o=0;o<i.shapes.length;o++){this.renderer.addShape(i.shapes[o])}return i}},{key:"getStyleByData",value:function t(e){var r={};var n=e;r=b(r,this.style);if(this.themeField&&this.styleGroups&&this.styleGroups.length>0&&n.attributes){var i=this.themeField;var o=n.attributes;var s=this.styleGroups;var a=false;var u=null;for(var l in o){if(i===l){a=true;u=o[l];break}}if(a){for(var c=0,h=s.length;c<h;c++){if(u.toString()===s[c].value.toString()){var f=s[c].style;r=b(r,f)}}}}if(n.style&&this.isAllowFeatureStyle===true){r=b(n.style)}return r}}]);return e}(v.RangeThemeLayer);e.UniqueThemeLayer=S;var w=e.uniqueThemeLayer=function t(e,r){return new S(e,r)};x.Map.uniqueThemeLayer=w},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.SUtil=e.LevelRendererVector=e.Util=e.Transformable=e.Storage=e.SmicText=e.SmicStar=e.SmicSector=e.SmicRing=e.SmicRectangle=e.SmicPolygon=e.SmicPoint=e.SmicIsogon=e.SmicImage=e.SmicEllipse=e.SmicCircle=e.SmicBrokenLine=e.Shape=e.PaintLayer=e.Painter=e.Matrix=e.Math=e.Http=e.Handler=e.Group=e.Eventful=e.LevelRendererEvent=e.Env=e.Easing=e.LevelRendererCurve=e.Config=e.ComputeBoundingBox=e.Color=e.Clip=e.Area=e.Animator=e.Animation=e.Render=e.LevelRenderer=e.FeatureTheme=e.Sector=e.FeatureRectangle=e.FeaturePolygon=e.Point=e.FeatureLine=e.Label=e.Image=e.FeatureCircle=e.ShapeParameters=e.ShapeFactory=e.ThemeVector=e.Ring=e.RankSymbol=e.OverlayPoint=e.Pie=e.Line=e.Graph=e.OverlayCircle=e.Bar3D=e.Bar=undefined;var n=r(558);var i=r(559);var o=r(560);var s=r(47);var a=r(561);var u=r(562);var l=r(563);var c=r(310);var h=r(564);var f=r(81);var p=r(565);var d=r(566);e.Bar=n.Bar;e.Bar3D=i.Bar3D;e.OverlayCircle=o.Circle;e.Graph=s.Graph;e.Line=a.Line;e.Pie=u.Pie;e.OverlayPoint=l.Point;e.RankSymbol=c.RankSymbol;e.Ring=h.Ring;e.ThemeVector=f.ThemeVector;e.ShapeFactory=p.ShapeFactory;e.ShapeParameters=p.ShapeParameters;e.FeatureCircle=p.FeatureCircle;e.Image=p.Image;e.Label=p.Label;e.FeatureLine=p.FeatureLine;e.Point=p.Point;e.FeaturePolygon=p.FeaturePolygon;e.FeatureRectangle=p.FeatureRectangle;e.Sector=p.Sector;e.FeatureTheme=p.FeatureTheme;e.LevelRenderer=d.LevelRenderer;e.Render=d.Render;e.Animation=d.Animation;e.Animator=d.Animator;e.Area=d.Area;e.Clip=d.Clip;e.Color=d.Color;e.ComputeBoundingBox=d.ComputeBoundingBox;e.Config=d.Config;e.LevelRendererCurve=d.LevelRendererCurve;e.Easing=d.Easing;e.Env=d.Env;e.LevelRendererEvent=d.LevelRendererEvent;e.Eventful=d.Eventful;e.Group=d.Group;e.Handler=d.Handler;e.Http=d.Http;e.Math=d.Math;e.Matrix=d.Matrix;e.Painter=d.Painter;e.PaintLayer=d.PaintLayer;e.Shape=d.Shape;e.SmicBrokenLine=d.SmicBrokenLine;e.SmicCircle=d.SmicCircle;e.SmicEllipse=d.SmicEllipse;e.SmicImage=d.SmicImage;e.SmicIsogon=d.SmicIsogon;e.SmicPoint=d.SmicPoint;e.SmicPolygon=d.SmicPolygon;e.SmicRectangle=d.SmicRectangle;e.SmicRing=d.SmicRing;e.SmicSector=d.SmicSector;e.SmicStar=d.SmicStar;e.SmicText=d.SmicText;e.Storage=d.Storage;e.Transformable=d.Transformable;e.Util=d.Util;e.LevelRendererVector=d.LevelRendererVector;e.SUtil=d.SUtil},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Bar=undefined;var n=r(11);var i=b(n);var o=r(5);var s=b(o);var a=r(6);var u=b(a);var l=r(12);var c=b(l);var h=r(14);var f=b(h);var p=r(13);var d=b(p);var y=r(7);var v=r(23);var g=r(110);var m=r(178);var _=r(47);function b(t){return t&&t.__esModule?t:{default:t}}var x=y.Common.Zondy,S=y.Common.copyAttributesWithClip;var w=function(t){(0,d.default)(e,t);function e(t,r,n,o,a,u){(0,s.default)(this,e);var l=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r,n,o,a,u));l.CLASS_NAME="Zondy.Theme.Bar";return l}(0,u.default)(e,[{key:"destroy",value:function t(){(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function t(){var e=[["#00FF00","#00CD00"],["#00CCFF","#5E87A2"],["#00FF66","#669985"],["#CCFF00","#94A25E"],["#FF9900","#A2945E"]];var r={showShadow:true,shadowBlur:8,shadowColor:"rgba(100,100,100,0.8)",shadowOffsetX:2,shadowOffsetY:2};var n=this.setting;if(!n.barLinearGradient){n.barLinearGradient=e}if(!n.dataViewBoxParameter){if(typeof n.useAxis==="undefined"||n.useAxis){n.dataViewBoxParameter=[45,15,15,15]}else{n.dataViewBoxParameter=[5,5,5,5]}}if(!this.initBaseParameter()){return}var i=this.DVBCodomain;this.DVBUnitValue=(i[1]-i[0])/this.DVBHeight;var o=this.dataViewBox;var s=this.dataValues;if(s.length<1){return}for(var a=0,u=s.length;a<u;a++){if(s[a]<i[0]||s[a]>i[1]){return}}var l=this.calculateXShapeInfo();if(!l){return}var c=l.xPositions;var h=l.width;if(typeof n.useBackground==="undefined"||n.useBackground){this.shapes.push(v.ShapeFactory.Background(this.shapeFactory,this.chartBox,n))}if(typeof n.useAxis==="undefined"||n.useAxis){this.shapes=this.shapes.concat(v.ShapeFactory.GraphAxis(this.shapeFactory,o,n,l))}for(var f=0;f<s.length;f++){var p=o[1]-(s[f]-i[0])/this.DVBUnitValue;var d=[[c[f]-h/2,o[1]-1],[c[f]+h/2,o[1]-1],[c[f]+h/2,p],[c[f]-h/2,p]];var y=new g.Polygon(d);if(typeof n.showShadow==="undefined"||n.showShadow){if(n.barShadowStyle){var m=n.barShadowStyle;if(m.shadowBlur){r.shadowBlur=m.shadowBlur}if(m.shadowColor){r.shadowColor=m.shadowColor}if(m.shadowOffsetX){r.shadowOffsetX=m.shadowOffsetX}if(m.shadowOffsetY){r.shadowOffsetY=m.shadowOffsetY}}y.style={};S(y.style,r)}y.refDataID=this.data.FID;y.dataInfo={field:this.fields[f],value:s[f]};if(typeof n.barHoverAble!=="undefined"){y.hoverable=n.barHoverAble}if(typeof n.barClickAble!=="undefined"){y.clickable=n.barClickAble}this.shapes.push(this.shapeFactory.createShape(y))}this.shapesConvertToRelativeCoordinate()}},{key:"calculateXShapeInfo",value:function t(){var e=this.dataViewBox;var r=this.setting;var n=this.dataValues.length;if(n<1){return null}var i;var o=[];var s=0;var a=this.DVBWidth;if(r.xShapeBlank&&r.xShapeBlank.length&&r.xShapeBlank.length===3){i=r.xShapeBlank;var u=a-(i[0]+i[2]+(n-1)*i[1]);if(u<=n){return null}s=u/n}else{s=a/(2*n+1);i=[s,s,s]}var l=0;for(var c=0;c<n;c++){if(c===0){l=i[0]+s/2}else{l+=s+i[1]}o.push(e[0]+l)}return{xPositions:o,width:s}}},{key:"resetLinearGradient",value:function t(){if(this.RelativeCoordinate){var e=this.shapes.length;var r=this.setting.barLinearGradient;var n=-1;for(var i=0;i<e;i++){var o=this.shapes[i];if(o.CLASS_NAME==="Zondy.LevelRenderer.Shape.SmicPolygon"){var s=o.style;var a=this.location[0]+s.pointList[0][0];var u=this.location[0]+s.pointList[1][0];n++;if(n>=r.length){n=n%r.length}var l=r[n][0];var c=r[n][1];var h=new m.Color;var f=h.getLinearGradient(a,0,u,0,[[0,l],[1,c]]);o.style.color=f}}}}}]);return e}(_.Graph);e.Bar=w;x.Theme.Bar=w},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Bar3D=undefined;var n=r(11);var i=_(n);var o=r(5);var s=_(o);var a=r(6);var u=_(a);var l=r(12);var c=_(l);var h=r(14);var f=_(h);var p=r(13);var d=_(p);var y=r(7);var v=r(23);var g=r(110);var m=r(47);function _(t){return t&&t.__esModule?t:{default:t}}var b=y.Common.Zondy,x=y.Common.newGuid;var S=function(t){(0,d.default)(e,t);function e(t,r,n,o,a,u){(0,s.default)(this,e);var l=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r,n,o,a,u));l.CLASS_NAME="Zondy.Theme.Bar3D";return l}(0,u.default)(e,[{key:"destroy",value:function t(){(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function t(){var e=this.setting;if(!e.dataViewBoxParameter){if(typeof e.useAxis==="undefined"||e.useAxis){e.dataViewBoxParameter=[45,25,20,20]}else{e.dataViewBoxParameter=[5,5,5,5]}}e.axisUseArrow=typeof e.axisUseArrow!=="undefined"?e.axisUseArrow:true;e.axisXLabelsOffset=typeof e.axisXLabelsOffset!=="undefined"?e.axisXLabelsOffset:[-10,10];if(!this.initBaseParameter()){return}var r=this.DVBCodomain;this.DVBUnitValue=(r[1]-r[0])/this.DVBHeight;var n=this.dataViewBox;var i=this.dataValues;if(i.length<1){return}for(var o=0,s=i.length;o<s;o++){if(i[o]<r[0]||i[o]>r[1]){return}}var a=this.calculateXShapeInfo();if(!a){return}var u=a.xPositions;var l=a.width;if(typeof e.useBackground==="undefined"||e.useBackground){this.shapes.push(v.ShapeFactory.Background(this.shapeFactory,this.chartBox,e))}if(!e.axis3DParameter||isNaN(e.axis3DParameter)||e.axis3DParameter<15){e.axis3DParameter=20}if(typeof e.useAxis==="undefined"||e.useAxis){this.shapes=this.shapes.concat(v.ShapeFactory.GraphAxis(this.shapeFactory,n,e,a))}var c=e.bar3DParameter&&!isNaN(e.bar3DParameter)?e.bar3DParameter:10;for(var h=0;h<i.length;h++){var f=n[1]-(i[h]-r[0])/this.DVBUnitValue;var p=u[h]-l/2;var d=u[h]+l/2;var y=[[p,f],[d,f],[d-c,f+c],[p-c,f+c]];var m=[[d,f],[d-c,f+c],[d-c,n[1]+c],[d,n[1]]];var _=[[p-c,n[1]+c],[d-c,n[1]+c],[d-c,f+c],[p-c,f+c]];if(c<=0){_=[[p,n[1]],[d,n[1]],[d,f],[p,f]]}var b=new g.Polygon(y);var S=new g.Polygon(m);var w=new g.Polygon(_);e.barSideStyle=e.barSideStyle?e.barSideStyle:e.barFaceStyle;e.barSideStyleByFields=e.barSideStyleByFields?e.barSideStyleByFields:e.barFaceStyleByFields;e.barSideStyleByCodomain=e.barSideStyleByCodomain?e.barSideStyleByCodomain:e.barFaceStyleByCodomain;e.barTopStyle=e.barTopStyle?e.barTopStyle:e.barFaceStyle;e.barTopStyleByFields=e.barTopStyleByFields?e.barTopStyleByFields:e.barFaceStyleByFields;e.barTopStyleByCodomain=e.barTopStyleByCodomain?e.barTopStyleByCodomain:e.barFaceStyleByCodomain;w.style=v.ShapeFactory.ShapeStyleTool({stroke:true,strokeColor:"#ffffff",fillColor:"#ee9900"},e.barFaceStyle,e.barFaceStyleByFields,e.barFaceStyleByCodomain,h,i[h]);S.style=v.ShapeFactory.ShapeStyleTool({stroke:true,strokeColor:"#ffffff",fillColor:"#ee9900"},e.barSideStyle,e.barSideStyleByFields,e.barSideStyleByCodomain,h,i[h]);b.style=v.ShapeFactory.ShapeStyleTool({stroke:true,strokeColor:"#ffffff",fillColor:"#ee9900"},e.barTopStyle,e.barTopStyleByFields,e.barTopStyleByCodomain,h,i[h]);e.barSideHoverStyle=e.barSideHoverStyle?e.barSideHoverStyle:e.barFaceHoverStyle;e.barTopHoverStyle=e.barTopHoverStyle?e.barTopHoverStyle:e.barFaceHoverStyle;w.highlightStyle=v.ShapeFactory.ShapeStyleTool({stroke:true},e.barFaceHoverStyle);S.highlightStyle=v.ShapeFactory.ShapeStyleTool({stroke:true},e.barSideHoverStyle);b.highlightStyle=v.ShapeFactory.ShapeStyleTool({stroke:true},e.barTopHoverStyle);b.refDataID=S.refDataID=w.refDataID=this.data.FID;b.isHoverByRefDataID=S.isHoverByRefDataID=w.isHoverByRefDataID=true;b.refDataHoverGroup=S.refDataHoverGroup=w.refDataHoverGroup=x();b.dataInfo=S.dataInfo=w.dataInfo={field:this.fields[h],value:i[h]};if(typeof e.barHoverAble!=="undefined"){b.hoverable=S.hoverable=w.hoverable=e.barHoverAble}if(typeof e.barClickAble!=="undefined"){b.clickable=S.clickable=w.clickable=e.barClickAble}this.shapes.push(this.shapeFactory.createShape(S));this.shapes.push(this.shapeFactory.createShape(b));this.shapes.push(this.shapeFactory.createShape(w))}this.shapesConvertToRelativeCoordinate()}},{key:"calculateXShapeInfo",value:function t(){var e=this.dataViewBox;var r=this.setting;var n=this.dataValues.length;if(n<1){return null}var i;var o=[];var s=0;var a=this.DVBWidth;if(r.xShapeBlank&&r.xShapeBlank.length&&r.xShapeBlank.length===3){i=r.xShapeBlank;var u=a-(i[0]+i[2]+(n-1)*i[1]);if(u<=n){return null}s=u/n}else{s=a/(2*n+1);i=[s,s,s]}var l=0;for(var c=0;c<n;c++){if(c===0){l=i[0]+s/2}else{l+=s+i[1]}o.push(e[0]+l)}return{xPositions:o,width:s}}}]);return e}(m.Graph);e.Bar3D=S;b.Theme.Bar3D=S},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Circle=undefined;var n=r(11);var i=b(n);var o=r(5);var s=b(o);var a=r(6);var u=b(a);var l=r(12);var c=b(l);var h=r(14);var f=b(h);var p=r(13);var d=b(p);var y=r(7);var v=r(68);var g=r(182);var m=r(23);var _=r(310);function b(t){return t&&t.__esModule?t:{default:t}}var x=y.Common.Zondy;var S=function(t){(0,d.default)(e,t);function e(t,r,n,o,a,u){(0,s.default)(this,e);var l=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r,n,o,a,u));l.CLASS_NAME="Zondy.Theme.Circle";return l}(0,u.default)(e,[{key:"destroy",value:function t(){(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function t(){var e="#ff9277";if(!this.setting){return false}var r=this.setting;if(!r.codomain){return false}var n=typeof r.decimalNumber!=="undefined"&&!isNaN(r.decimalNumber)?r.decimalNumber:-1;var i=v.Theme.getDataValues(this.data,this.fields,n);this.dataValues=i?i:[];var o=this.dataValues;if(!r.maxR){r.maxR=100}if(!r.minR){r.minR=0}var s=this.DVBCodomain;if(s&&s[1]-s[0]>0){this.DVBUnitValue=r.maxR/(s[1]-s[0])}else{this.DVBUnitValue=r.maxR}var a=this.DVBUnitValue;var u=o[0]*a+r.minR;this.width=2*u;this.height=2*u;if(!this.initBaseParameter()){return}if(s){if(o[0]<s[0]||o[0]>s[1]){return}}var l=this.DVBCenterPoint;var c=new g.Circle(l[0],l[1],u);c.style=m.ShapeFactory.ShapeStyleTool(null,r.circleStyle,null,null,0);if(typeof r.fillColor!=="undefined"){c.style.fillColor=r.fillColor}else{c.style.fillColor=e}c.highlightStyle=m.ShapeFactory.ShapeStyleTool(null,r.circleHoverStyle);if(typeof r.circleHoverAble!=="undefined"){c.hoverable=r.circleHoverAble}if(typeof r.circleClickAble!=="undefined"){c.clickable=r.circleClickAble}c.refDataID=this.data.FID;c.dataInfo={field:this.fields[0],r:u,value:o[0]};this.shapes.push(this.shapeFactory.createShape(c));this.shapesConvertToRelativeCoordinate()}}]);return e}(_.RankSymbol);e.Circle=S;x.Theme.Circle=S},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Line=undefined;var n=r(11);var i=b(n);var o=r(5);var s=b(o);var a=r(6);var u=b(a);var l=r(12);var c=b(l);var h=r(14);var f=b(h);var p=r(13);var d=b(p);var y=r(7);var v=r(23);var g=r(109);var m=r(181);var _=r(47);function b(t){return t&&t.__esModule?t:{default:t}}var x=y.Common.Zondy;var S=function(t){(0,d.default)(e,t);function e(t,r,n,o,a,u){(0,s.default)(this,e);var l=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r,n,o,a,u));l.CLASS_NAME="Zondy.Theme.Line";return l}(0,u.default)(e,[{key:"destroy",value:function t(){(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function t(){var e=this.setting;if(!e.dataViewBoxParameter){if(typeof e.useAxis==="undefined"||e.useAxis){e.dataViewBoxParameter=[45,15,15,15]}else{e.dataViewBoxParameter=[5,5,5,5]}}if(!this.initBaseParameter()){return}var r=this.dataViewBox;var n=this.DVBCodomain;this.DVBUnitValue=(n[1]-n[0])/this.DVBHeight;var i=this.DVBUnitValue;var o=this.dataValues;if(o.length<1){return}var s=this.calculateXShapeInfo();if(!s){return}var a=s.xPositions;if(typeof e.useBackground==="undefined"||e.useBackground){this.shapes.push(v.ShapeFactory.Background(this.shapeFactory,this.chartBox,e))}this.shapes=this.shapes.concat(v.ShapeFactory.GraphAxis(this.shapeFactory,r,e,s));var u;var l;var c=[];var h=[];for(var f=0,p=o.length;f<p;f++){if(o[f]<n[0]||o[f]>n[1]){return null}u=a[f];l=r[1]-(o[f]-n[0])/i;var d=new g.Point(u,l);d.style=v.ShapeFactory.ShapeStyleTool({fillColor:"#ee9900"},e.pointStyle,e.pointStyleByFields,e.pointStyleByCodomain,f,o[f]);d.highlightStyle=v.ShapeFactory.ShapeStyleTool(null,e.pointHoverStyle);if(typeof e.pointHoverAble!=="undefined"){d.hoverable=e.pointHoverAble}if(typeof e.pointClickAble!=="undefined"){d.clickable=e.pointClickAble}d.refDataID=this.data.FID;d.dataInfo={field:this.fields[f],value:o[f]};h.push(this.shapeFactory.createShape(d));var y=[u,l];c.push(y)}var _=new m.Line(c);_.style=v.ShapeFactory.ShapeStyleTool({strokeColor:"#ee9900"},e.lineStyle);_.clickable=false;_.hoverable=false;var b=this.shapeFactory.createShape(_);this.shapes.push(b);this.shapes=this.shapes.concat(h);this.shapesConvertToRelativeCoordinate()}},{key:"calculateXShapeInfo",value:function t(){var e=this.dataViewBox;var r=this.setting;var n=this.dataValues.length;if(n<1){return null}var i;var o=[];var s=0;var a=this.DVBWidth;var u=0;if(r.xShapeBlank&&r.xShapeBlank.length&&r.xShapeBlank.length===2){i=r.xShapeBlank;var l=a-(i[0]+i[1]);if(l<=n){return null}u=l/(n-1)}else{u=a/(n+1);i=[u,u,u]}var c=0;for(var h=0;h<n;h++){if(h===0){c=i[0]}else{c+=u}o.push(e[0]+c)}return{xPositions:o,width:s}}}]);return e}(_.Graph);e.Line=S;x.Theme.Line=S},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Pie=undefined;var n=r(11);var i=_(n);var o=r(5);var s=_(o);var a=r(6);var u=_(a);var l=r(12);var c=_(l);var h=r(14);var f=_(h);var p=r(13);var d=_(p);var y=r(7);var v=r(23);var g=r(111);var m=r(47);function _(t){return t&&t.__esModule?t:{default:t}}var b=y.Common.Zondy;var x=function(t){(0,d.default)(e,t);function e(t,r,n,o,a,u){(0,s.default)(this,e);var l=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r,n,o,a,u));l.CLASS_NAME="Zondy.Theme.Pie";return l}(0,u.default)(e,[{key:"destroy",value:function t(){(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function t(){var e=this.setting;var r=[{fillColor:"#ff9277"},{fillColor:"#dddd00"},{fillColor:"#ffc877"},{fillColor:"#bbe3ff"},{fillColor:"#d5ffbb"},{fillColor:"#bbbbff"},{fillColor:"#ddb000"},{fillColor:"#b0dd00"},{fillColor:"#e2bbff"},{fillColor:"#ffbbe3"},{fillColor:"#ff7777"},{fillColor:"#ff9900"},{fillColor:"#83dd00"},{fillColor:"#77e3ff"},{fillColor:"#778fff"},{fillColor:"#c877ff"},{fillColor:"#ff77ab"},{fillColor:"#ff6600"},{fillColor:"#aa8800"},{fillColor:"#77c7ff"},{fillColor:"#ad77ff"},{fillColor:"#ff77ff"},{fillColor:"#dd0083"},{fillColor:"#777700"},{fillColor:"#00aa00"},{fillColor:"#0088aa"},{fillColor:"#8400dd"},{fillColor:"#aa0088"},{fillColor:"#dd0000"},{fillColor:"#772e00"}];if(!this.initBaseParameter()){return}if(e.useBackground){this.shapes.push(v.ShapeFactory.Background(this.shapeFactory,this.chartBox,e))}var n=this.dataValues;if(n.length<1){return}var i=this.DVBCodomain;for(var o=0;o<n.length;o++){if(n[o]<i[0]||n[o]>i[1]){return}}var s=0;for(var a=0;a<n.length;a++){s+=Math.abs(n[a])}this.DVBUnitValue=360/s;var u=this.DVBUnitValue;var l=this.DVBCenterPoint;var c=0;var h=0;var f=c;var p=this.DVBHeight<this.DVBWidth?this.DVBHeight/2:this.DVBWidth/2;for(var d=0;d<n.length;d++){var y=Math.abs(n[d]);if(d===0){h=c+y*u}else if(d===y.length-1){h=f}else{h=c+y*u}if(h-c>=360){h=359.9999999}var m=new g.Sector(l[0],l[1],p,c,h);if(typeof e.sectorStyleByFields==="undefined"){var _=d%r.length;m.style=v.ShapeFactory.ShapeStyleTool(null,e.sectorStyle,r,null,_)}else{m.style=v.ShapeFactory.ShapeStyleTool(null,e.sectorStyle,e.sectorStyleByFields,e.sectorStyleByCodomain,d,n[d])}m.highlightStyle=v.ShapeFactory.ShapeStyleTool(null,e.sectorHoverStyle);if(typeof e.sectorHoverAble!=="undefined"){m.hoverable=e.sectorHoverAble}if(typeof e.sectorClickAble!=="undefined"){m.clickable=e.sectorClickAble}m.refDataID=this.data.FID;m.dataInfo={field:this.fields[d],value:n[d]};this.shapes.push(this.shapeFactory.createShape(m));c=h}this.shapesConvertToRelativeCoordinate()}}]);return e}(m.Graph);e.Pie=x;b.Theme.Pie=x},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Point=undefined;var n=r(11);var i=_(n);var o=r(5);var s=_(o);var a=r(6);var u=_(a);var l=r(12);var c=_(l);var h=r(14);var f=_(h);var p=r(13);var d=_(p);var y=r(7);var v=r(23);var g=r(109);var m=r(47);function _(t){return t&&t.__esModule?t:{default:t}}var b=y.Common.Zondy;var x=function(t){(0,d.default)(e,t);function e(t,r,n,o,a,u){(0,s.default)(this,e);var l=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r,n,o,a,u));l.CLASS_NAME="Zondy.Theme.Point";return l}(0,u.default)(e,[{key:"destroy",value:function t(){(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function t(){var e=this.setting;if(!e.dataViewBoxParameter){if(typeof e.useAxis==="undefined"||e.useAxis){e.dataViewBoxParameter=[45,15,15,15]}else{e.dataViewBoxParameter=[5,5,5,5]}}if(!this.initBaseParameter()){return}var r=this.dataViewBox;var n=this.DVBCodomain;this.DVBUnitValue=(n[1]-n[0])/this.DVBHeight;var i=this.DVBUnitValue;var o=this.dataValues;var s=this.calculateXShapeInfo();if(!s){return}var a=s.xPositions;if(typeof e.useBackground==="undefined"||e.useBackground){this.shapes.push(v.ShapeFactory.Background(this.shapeFactory,this.chartBox,e))}this.shapes=this.shapes.concat(v.ShapeFactory.GraphAxis(this.shapeFactory,r,e,s));var u;var l;for(var c=0,h=o.length;c<h;c++){if(o[c]<n[0]||o[c]>n[1]){return null}u=a[c];l=r[1]-(o[c]-n[0])/i;var f=new g.Point(u,l);f.style=v.ShapeFactory.ShapeStyleTool({fillColor:"#ee9900"},e.pointStyle,e.pointStyleByFields,e.pointStyleByCodomain,c,o[c]);f.highlightStyle=v.ShapeFactory.ShapeStyleTool(null,e.pointHoverStyle);if(typeof e.pointHoverAble!=="undefined"){f.hoverable=e.pointHoverAble}if(typeof e.pointClickAble!=="undefined"){f.clickable=e.pointClickAble}f.refDataID=this.data.FID;f.dataInfo={field:this.fields[c],value:o[c]};this.shapes.push(this.shapeFactory.createShape(f))}this.shapesConvertToRelativeCoordinate()}},{key:"calculateXShapeInfo",value:function t(){var e=this.dataViewBox;var r=this.setting;var n=this.dataValues.length;if(n<1){return null}var i;var o=[];var s=0;var a=this.DVBWidth;var u=0;if(r.xShapeBlank&&r.xShapeBlank.length&&r.xShapeBlank.length===2){i=r.xShapeBlank;var l=a-(i[0]+i[1]);if(l<=n){return null}u=l/(n-1)}else{u=a/(n+1);i=[u,u,u]}var c=0;for(var h=0;h<n;h++){if(h===0){c=i[0]}else{c+=u}o.push(e[0]+c)}return{xPositions:o,width:s}}}]);return e}(m.Graph);e.Point=x;b.Theme.Point=x},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Ring=undefined;var n=r(11);var i=_(n);var o=r(5);var s=_(o);var a=r(6);var u=_(a);var l=r(12);var c=_(l);var h=r(14);var f=_(h);var p=r(13);var d=_(p);var y=r(7);var v=r(23);var g=r(111);var m=r(47);function _(t){return t&&t.__esModule?t:{default:t}}var b=y.Common.Zondy;var x=function(t){(0,d.default)(e,t);function e(t,r,n,o,a,u){(0,s.default)(this,e);var l=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r,n,o,a,u));l.CLASS_NAME="Zondy.Theme.Ring";return l}(0,u.default)(e,[{key:"destroy",value:function t(){(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function t(){if(!this.initBaseParameter()){return}var e=[{fillColor:"#ff9277"},{fillColor:"#dddd00"},{fillColor:"#ffc877"},{fillColor:"#bbe3ff"},{fillColor:"#d5ffbb"},{fillColor:"#bbbbff"},{fillColor:"#ddb000"},{fillColor:"#b0dd00"},{fillColor:"#e2bbff"},{fillColor:"#ffbbe3"},{fillColor:"#ff7777"},{fillColor:"#ff9900"},{fillColor:"#83dd00"},{fillColor:"#77e3ff"},{fillColor:"#778fff"},{fillColor:"#c877ff"},{fillColor:"#ff77ab"},{fillColor:"#ff6600"},{fillColor:"#aa8800"},{fillColor:"#77c7ff"},{fillColor:"#ad77ff"},{fillColor:"#ff77ff"},{fillColor:"#dd0083"},{fillColor:"#777700"},{fillColor:"#00aa00"},{fillColor:"#0088aa"},{fillColor:"#8400dd"},{fillColor:"#aa0088"},{fillColor:"#dd0000"},{fillColor:"#772e00"}];var r=this.setting;if(r.useBackground){this.shapes.push(v.ShapeFactory.Background(this.shapeFactory,this.chartBox,r))}var n=this.dataValues;if(n.length<1){return}var i=this.DVBCodomain;for(var o=0;o<n.length;o++){if(n[o]<i[0]||n[o]>i[1]){return}}var s=0;for(var a=0;a<n.length;a++){s+=Math.abs(n[a])}this.DVBUnitValue=360/s;var u=this.DVBUnitValue;var l=this.DVBCenterPoint;var c=0;var h=0;var f=c;var p=this.DVBHeight<this.DVBWidth?this.DVBHeight/2:this.DVBWidth/2;var d=r.innerRingRadius>=0&&r.innerRingRadius<p;var y=typeof r.innerRingRadius!=="undefined"&&!isNaN(r.innerRingRadius)&&d?r.innerRingRadius:0;for(var m=0;m<n.length;m++){var _=Math.abs(n[m]);if(m===0){h=c+_*u}else if(m===_.length-1){h=f}else{h=c+_*u}var b=new g.Sector(l[0],l[1],p,c,h,y);if(typeof r.sectorStyleByFields==="undefined"){var x=m%e.length;b.style=v.ShapeFactory.ShapeStyleTool(null,r.sectorStyle,e,null,x)}else{b.style=v.ShapeFactory.ShapeStyleTool(null,r.sectorStyle,r.sectorStyleByFields,r.sectorStyleByCodomain,m,n[m])}b.highlightStyle=v.ShapeFactory.ShapeStyleTool(null,r.sectorHoverStyle);if(typeof r.sectorHoverAble!=="undefined"){b.hoverable=r.sectorHoverAble}if(typeof r.sectorClickAble!=="undefined"){b.clickable=r.sectorClickAble}b.refDataID=this.data.FID;b.dataInfo={field:this.fields[m],value:n[m]};this.shapes.push(this.shapeFactory.createShape(b));c=h}this.shapesConvertToRelativeCoordinate()}}]);return e}(m.Graph);e.Ring=x;b.Theme.Ring=x},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.FeatureTheme=e.Sector=e.FeatureRectangle=e.FeaturePolygon=e.Point=e.FeatureLine=e.Label=e.Image=e.FeatureCircle=e.ShapeParameters=e.ShapeFactory=undefined;var n=r(23);var i=r(40);var o=r(182);var s=r(304);var a=r(303);var u=r(181);var l=r(109);var c=r(110);var h=r(302);var f=r(111);var p=r(68);e.ShapeFactory=n.ShapeFactory;e.ShapeParameters=i.ShapeParameters;e.FeatureCircle=o.Circle;e.Image=s.Image;e.Label=a.Label;e.FeatureLine=u.Line;e.Point=l.Point;e.FeaturePolygon=c.Polygon;e.FeatureRectangle=h.Rectangle;e.Sector=f.Sector;e.FeatureTheme=p.Theme},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.SUtil=e.LevelRendererVector=e.Util=e.Transformable=e.Storage=e.SmicText=e.SmicStar=e.SmicSector=e.SmicRing=e.SmicRectangle=e.SmicPolygon=e.SmicPoint=e.SmicIsogon=e.SmicImage=e.SmicEllipse=e.SmicCircle=e.SmicBrokenLine=e.Shape=e.PaintLayer=e.Painter=e.Matrix=e.Math=e.Http=e.Handler=e.Group=e.Eventful=e.LevelRendererEvent=e.Env=e.Easing=e.LevelRendererCurve=e.Config=e.ComputeBoundingBox=e.Color=e.Clip=e.Area=e.Animator=e.Animation=e.Render=e.LevelRenderer=undefined;var n=r(286);var i=r(287);var o=r(299);var s=r(290);var a=r(300);var u=r(178);var l=r(291);var c=r(179);var h=r(107);var f=r(301);var p=r(292);var d=r(293);var y=r(80);var v=r(289);var g=r(298);var m=r(294);var _=r(295);var b=r(296);var x=r(297);var S=r(26);var w=r(184);var C=r(306);var I=r(567);var E=r(180);var P=r(568);var M=r(183);var L=r(112);var N=r(307);var T=r(569);var O=r(308);var A=r(570);var R=r(305);var F=r(288);var D=r(106);var k=r(67);var j=r(108);var G=r(28);e.LevelRenderer=n.LevelRenderer;e.Render=i.Render;e.Animation=o.Animation;e.Animator=o.Animator;e.Area=s.Area;e.Clip=a.Clip;e.Color=u.Color;e.ComputeBoundingBox=l.ComputeBoundingBox;e.Config=c.Config;e.LevelRendererCurve=h.Curve;e.Easing=f.Easing;e.Env=p.Env;e.LevelRendererEvent=d.Event;e.Eventful=y.Eventful;e.Group=v.Group;e.Handler=g.Handler;e.Http=m.Http;e.Math=_.Math;e.Matrix=b.Matrix;e.Painter=x.Painter;e.PaintLayer=x.PaintLayer;e.Shape=S.Shape;e.SmicBrokenLine=w.SmicBrokenLine;e.SmicCircle=C.SmicCircle;e.SmicEllipse=I.SmicEllipse;e.SmicImage=E.SmicImage;e.SmicIsogon=P.SmicIsogon;e.SmicPoint=M.SmicPoint;e.SmicPolygon=L.SmicPolygon;e.SmicRectangle=N.SmicRectangle;e.SmicRing=T.SmicRing;e.SmicSector=O.SmicSector;e.SmicStar=A.SmicStar;e.SmicText=R.SmicText;e.Storage=F.Storage;e.Transformable=D.Transformable;e.Util=k.Util;e.LevelRendererVector=j.Vector;e.SUtil=G.SUtil},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.SmicEllipse=undefined;var n=r(11);var i=g(n);var o=r(5);var s=g(o);var a=r(6);var u=g(a);var l=r(12);var c=g(l);var h=r(14);var f=g(h);var p=r(13);var d=g(p);var y=r(7);var v=r(26);function g(t){return t&&t.__esModule?t:{default:t}}var m=y.Common.Zondy;var _=function(t){(0,d.default)(e,t);function e(t){(0,s.default)(this,e);var r=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t));r.type="smicellipse";if(!r.refOriginalPosition||r.refOriginalPosition.length!==2){r.refOriginalPosition=[0,0]}r.CLASS_NAME="Zondy.LevelRenderer.Shape.SmicEllipse";return r}(0,u.default)(e,[{key:"destroy",value:function t(){this.type=null;(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function t(e,r){if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var n=this.refOriginalPosition;var i=.5522848;var o=r.x+n[0];var s=r.y+n[1];var a=r.a;var u=r.b;var l=a*i;var c=u*i;e.moveTo(o-a,s);e.bezierCurveTo(o-a,s-c,o-l,s-u,o,s-u);e.bezierCurveTo(o+l,s-u,o+a,s-c,o+a,s);e.bezierCurveTo(o+a,s+c,o+l,s+u,o,s+u);e.bezierCurveTo(o-l,s+u,o-a,s+c,o-a,s);e.closePath()}},{key:"getRect",value:function t(e){if(e.__rect){return e.__rect}if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var r=this.refOriginalPosition;var n;if(e.brushType==="stroke"||e.brushType==="fill"){n=e.lineWidth||1}else{n=0}e.__rect={x:Math.round(e.x+r[0]-e.a-n/2),y:Math.round(e.x+r[1]-e.b-n/2),width:e.a*2+n,height:e.b*2+n};return e.__rect}}]);return e}(v.Shape);e.SmicEllipse=_;m.LevelRenderer.SmicEllipse=_},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.SmicIsogon=undefined;var n=r(11);var i=m(n);var o=r(5);var s=m(o);var a=r(6);var u=m(a);var l=r(12);var c=m(l);var h=r(14);var f=m(h);var p=r(13);var d=m(p);var y=r(7);var v=r(26);var g=r(28);function m(t){return t&&t.__esModule?t:{default:t}}var _=y.Common.Zondy;var b=function(t){(0,d.default)(e,t);function e(t){(0,s.default)(this,e);var r=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t));r.type="smicisogon";if(!r.refOriginalPosition||r.refOriginalPosition.length!==2){r.refOriginalPosition=[0,0]}r.CLASS_NAME="Zondy.LevelRenderer.SmicIsogon";return r}(0,u.default)(e,[{key:"destroy",value:function t(){this.type=null;(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function t(e,r){if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var n=this.refOriginalPosition;var i=g.SUtil.Util_math.sin;var o=g.SUtil.Util_math.cos;var s=Math.PI;var a=r.n;if(!a||a<2){return}var u=r.x+n[0];var l=r.y+n[1];var c=r.r;var h=2*s/a;var f=-s/2;var p=u+c*o(f);var d=l+c*i(f);f+=h;var y=r.pointList=[];y.push([p,d]);for(var v=0,m=a-1;v<m;v++){y.push([u+c*o(f),l+c*i(f)]);f+=h}y.push([p,d]);e.moveTo(y[0][0],y[0][1]);for(var _=0;_<y.length;_++){e.lineTo(y[_][0],y[_][1])}e.closePath();return}},{key:"getRect",value:function t(e){if(e.__rect){return e.__rect}if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var r=this.refOriginalPosition;var n;if(e.brushType==="stroke"||e.brushType==="fill"){n=e.lineWidth||1}else{n=0}e.__rect={x:Math.round(e.x+r[0]-e.r-n/2),y:Math.round(e.y+r[1]-e.r-n/2),width:e.r*2+n,height:e.r*2+n};return e.__rect}}]);return e}(v.Shape);e.SmicIsogon=b;_.LevelRenderer.SmicIsogon=b},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.SmicRing=undefined;var n=r(11);var i=g(n);var o=r(5);var s=g(o);var a=r(6);var u=g(a);var l=r(12);var c=g(l);var h=r(14);var f=g(h);var p=r(13);var d=g(p);var y=r(7);var v=r(26);function g(t){return t&&t.__esModule?t:{default:t}}var m=y.Common.Zondy;var _=function(t){(0,d.default)(e,t);function e(t){(0,s.default)(this,e);var r=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t));r.type="smicring";if(!r.refOriginalPosition||r.refOriginalPosition.length!==2){r.refOriginalPosition=[0,0]}r.CLASS_NAME="Zondy.LevelRenderer.Shape.SmicRing";return r}(0,u.default)(e,[{key:"destroy",value:function t(){this.type=null;(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function t(e,r){if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var n=this.refOriginalPosition;e.arc(r.x+n[0],r.y+n[1],r.r,0,Math.PI*2,false);e.moveTo(r.x+n[0]+r.r0,r.y+n[1]);e.arc(r.x+n[0],r.y+n[1],r.r0,0,Math.PI*2,true);return}},{key:"getRect",value:function t(e){if(e.__rect){return e.__rect}if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var r=this.refOriginalPosition;var n;if(e.brushType==="stroke"||e.brushType==="fill"){n=e.lineWidth||1}else{n=0}e.__rect={x:Math.round(e.x+r[0]-e.r-n/2),y:Math.round(e.y+r[1]-e.r-n/2),width:e.r*2+n,height:e.r*2+n};return e.__rect}}]);return e}(v.Shape);e.SmicRing=_;m.LevelRenderer.SmicRing=_},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.SmicStar=undefined;var n=r(11);var i=m(n);var o=r(5);var s=m(o);var a=r(6);var u=m(a);var l=r(12);var c=m(l);var h=r(14);var f=m(h);var p=r(13);var d=m(p);var y=r(7);var v=r(26);var g=r(28);function m(t){return t&&t.__esModule?t:{default:t}}var _=y.Common.Zondy;var b=function(t){(0,d.default)(e,t);function e(t){(0,s.default)(this,e);var r=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t));r.type="smicstar";if(!r.refOriginalPosition||r.refOriginalPosition.length!==2){r.refOriginalPosition=[0,0]}r.CLASS_NAME="Zondy.LevelRenderer.Shape.SmicStar";return r}(0,u.default)(e,[{key:"destroy",value:function t(){this.type=null;(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function t(e,r){if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var n=this.refOriginalPosition;var i=r.n;if(!i||i<2){return}var o=g.SUtil.Util_math.sin;var s=g.SUtil.Util_math.cos;var a=Math.PI;var u=r.x+n[0];var l=r.y+n[1];var c=r.r;var h=r.r0;if(h==null){h=i>4?c*s(2*a/i)/s(a/i):c/3}var f=a/i;var p=-a/2;var d=u+c*s(p);var y=l+c*o(p);p+=f;var v=r.pointList=[];v.push([d,y]);for(var m=0,_=i*2-1,b;m<_;m++){b=m%2===0?h:c;v.push([u+b*s(p),l+b*o(p)]);p+=f}v.push([d,y]);e.moveTo(v[0][0],v[0][1]);for(var x=0;x<v.length;x++){e.lineTo(v[x][0],v[x][1])}e.closePath();return}},{key:"getRect",value:function t(e){if(e.__rect){return e.__rect}if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var r=this.refOriginalPosition;var n;if(e.brushType==="stroke"||e.brushType==="fill"){n=e.lineWidth||1}else{n=0}e.__rect={x:Math.round(e.x+r[0]-e.r-n/2),y:Math.round(e.y+r[1]-e.r-n/2),width:e.r*2+n,height:e.r*2+n};return e.__rect}}]);return e}(v.Shape);e.SmicStar=b;_.LevelRenderer.SmicStar=b},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.randomThemeLayer=e.RandomThemeLayer=undefined;var n=r(11);var i=_(n);var o=r(5);var s=_(o);var a=r(6);var u=_(a);var l=r(12);var c=_(l);var h=r(13);var f=_(h);var p=r(19);var d=_(p);var y=r(7);var v=r(103);var g=r(81);var m=r(23);function _(t){return t&&t.__esModule?t:{default:t}}var b=y.Common.copyAttributesWithClip,x=y.Common.Zondy;var S=function(t){(0,f.default)(e,t);function e(t,r){(0,s.default)(this,e);var n=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r));n.style=r.style;n.isHoverAble=r.isHoverAble;n.highlightStyle=r.highlightStyle;n.themeField=r.themeField;n.styleGroups=r.styleGroups;return n}(0,u.default)(e,[{key:"getColor",value:function t(){var e="0,1,2,3,4,5,6,7,8,9,a,b,c,d,e,f";var r=e.split(",");var n="#";for(var i=0;i<6;i++){n+=r[Math.floor(Math.random()*16)]}return n}},{key:"createThematicFeature",value:function t(e){var r=this.getStyleByData(e);var n={};n.nodesClipPixel=this.nodesClipPixel;n.isHoverAble=this.isHoverAble;n.isMultiHover=this.isMultiHover;n.isClickAble=this.isClickAble;n.highlightStyle=m.ShapeFactory.transformStyle(this.highlightStyle);var i=new g.ThemeVector(e,this,m.ShapeFactory.transformStyle(r),n);for(var o=0;o<i.shapes.length;o++){this.renderer.addShape(i.shapes[o])}return i}},{key:"getStyleByData",value:function t(){var e=this;var r=b({},e.style);r.fillColor=e.getColor();return r}}]);return e}(v.GeoFeatureThemeLayer);e.RandomThemeLayer=S;var w=e.randomThemeLayer=function t(e,r){return new S(e,r)};x.Map.randomThemeLayer=w},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.simpleThemeLayer=e.SimpleThemeLayer=undefined;var n=r(11);var i=_(n);var o=r(5);var s=_(o);var a=r(6);var u=_(a);var l=r(12);var c=_(l);var h=r(13);var f=_(h);var p=r(19);var d=_(p);var y=r(7);var v=r(103);var g=r(81);var m=r(23);function _(t){return t&&t.__esModule?t:{default:t}}var b=y.Common.copyAttributesWithClip,x=y.Common.Zondy;var S=function(t){(0,f.default)(e,t);function e(t,r){(0,s.default)(this,e);var n=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r));n.style=r.style;n.isHoverAble=r.isHoverAble;n.highlightStyle=r.highlightStyle;n.themeField=r.themeField;n.styleGroups=r.styleGroups;return n}(0,u.default)(e,[{key:"getColor",value:function t(){var e="0,1,2,3,4,5,6,7,8,9,a,b,c,d,e,f";var r=e.split(",");var n="#";for(var i=0;i<6;i++){n+=r[Math.floor(Math.random()*16)]}return n}},{key:"createThematicFeature",value:function t(e){var r=this.getStyleByData(e);var n={};n.nodesClipPixel=this.nodesClipPixel;n.isHoverAble=this.isHoverAble;n.isMultiHover=this.isMultiHover;n.isClickAble=this.isClickAble;n.highlightStyle=m.ShapeFactory.transformStyle(this.highlightStyle);var i=new g.ThemeVector(e,this,m.ShapeFactory.transformStyle(r),n);for(var o=0;o<i.shapes.length;o++){this.renderer.addShape(i.shapes[o])}return i}},{key:"getStyleByData",value:function t(){var e=this;var r=b({},e.style);if(r.fillColor==null){r.fillColor=e.getColor()}e.style=r;return r}}]);return e}(v.GeoFeatureThemeLayer);e.SimpleThemeLayer=S;var w=e.simpleThemeLayer=function t(e,r){return new S(e,r)};x.Map.simpleThemeLayer=w},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.rankSymbolThemeLayer=e.RankSymbolThemeLayer=undefined;var n=r(11);var i=m(n);var o=r(5);var s=m(o);var a=r(6);var u=m(a);var l=r(12);var c=m(l);var h=r(13);var f=m(h);var p=r(19);var d=m(p);var y=r(7);var v=r(68);var g=r(311);function m(t){return t&&t.__esModule?t:{default:t}}var _=y.Common.Zondy;var b=function(t){(0,f.default)(e,t);function e(t,r,n){(0,s.default)(this,e);var o=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r,n));o.symbolType=r;o.symbolSetting=n.symbolSetting;o.themeField=n.themeField;o.options={calGravity:n.calGravity||true};return o}(0,u.default)(e,[{key:"setSymbolType",value:function t(e){this.symbolType=e;this.redraw()}},{key:"createThematicFeature",value:function t(e){var r;if(v.Theme[this.symbolType]&&this.themeField&&this.symbolSetting){r=new v.Theme[this.symbolType](e,this,[this.themeField],this.symbolSetting,null,this.options)}if(!r){return false}r.assembleShapes();return r}}]);return e}(g.GraphThemeLayer);e.RankSymbolThemeLayer=b;var x=e.rankSymbolThemeLayer=function t(e,r,n){return new b(e,r,n)};_.Map.rankSymbolThemeLayer=x},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ThemeStyle=undefined;var n=r(5);var i=s(n);var o=r(7);function s(t){return t&&t.__esModule?t:{default:t}}var a=o.Common.extend,u=o.Common.Zondy;var l=function t(e){(0,i.default)(this,t);e=e||{};this.fill=true;this.fillColor="#000000";this.fillOpacity=1;this.stroke=false;this.strokeColor="#000000";this.strokeOpacity=1;this.strokeWidth=1;this.strokeLinecap="butt";this.strokeLineJoin="miter";this.strokeDashstyle="solid";this.pointRadius=6;this.shadowBlur=0;this.shadowColor="#000000";this.shadowOffsetX=0;this.shadowOffsetY=0;this.label="";this.labelRect=false;this.fontColor="";this.fontSize=12;this.fontStyle="normal";this.fontVariant="normal";this.fontWeight="normal";this.fontFamily="arial,sans-serif";this.labelPosition="top";this.labelAlign="center";this.labelBaseline="middle";this.labelXOffset=0;this.labelYOffset=0;a(this,e)};e.ThemeStyle=l;u.Map.ThemeStyle=l},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.rangeTheme3DLayer=e.RangeTheme3DLayer=undefined;var n=r(11);var i=y(n);var o=r(5);var s=y(o);var a=r(6);var u=y(a);var l=r(12);var c=y(l);var h=r(13);var f=y(h);var p=r(7);var d=r(185);function y(t){return t&&t.__esModule?t:{default:t}}var v=p.Common.extend,g=p.Common.Zondy;var m=function(t){(0,f.default)(e,t);function e(t,r){(0,s.default)(this,e);var n=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r));n.heightStops=null;n.colorStops=null;n.base=null;n.legendRatio=1;v(n,r);return n}(0,u.default)(e,[{key:"getLayerStyleOptions",value:function t(){var e=this.opacity==null?1:this.opacity;e=isNaN(parseFloat(e))?1:parseFloat(e);var r=/^[0-9]+.?[0-9]*$/;var n={"fill-extrusion-color":{stops:this.colorStops,property:this.themeField||this.heightField,type:"interval",base:r.test(this.base)?this.base:1},"fill-extrusion-opacity":e};if(this.heightStops){n["fill-extrusion-height"]={stops:this.heightStops,property:this.heightField||"height",base:r.test(this.base)?this.base:1}}else if(this.height){n["fill-extrusion-height"]=this.height}else{n["fill-extrusion-height"]={property:this.heightField||"height",type:"identity"}}if(this.baseHeightField){n["fill-extrusion-base"]={property:this.baseHeightField,type:"identity"}}return n}},{key:"getHighlightStyleOptions",value:function t(){var e=this.highlight&&this.highlight.color!=null?this.highlight.color:"#ADA91E";return{"fill-extrusion-color":e,"fill-extrusion-height":{stops:this.heightStops,property:this.heightField},"fill-extrusion-opacity":this.highlight&&this.highlight.opacity||.6}}},{key:"_createLegendElement",value:function t(){var e=this.colorStops&&this.colorStops.length||0;var r="<ul>";var n;for(n=0;n<e;n++){var i=this.colorStops[n][0];var o=this._getWrapperText(i);if(n===e-1){o="> "+o}else{var s=this._getWrapperText(this.colorStops[n+1][0]);o=o+"-"+s}var a=this.colorStops[n][1];r+="<li><span style='background-color:"+a+";'></span><span>"+o+"</span></li>"}r+="</ul>";return r}},{key:"_getWrapperText",value:function t(e){var r=e*(this.legendRatio==null?1:parseFloat(this.legendRatio));var n=parseFloat(r);if(n%1e6<=1e6){return n.toString()}return parseInt(n/1e3)+"k"}}]);return e}(d.Theme3DLayer);e.RangeTheme3DLayer=m;var _=e.rangeTheme3DLayer=function t(e,r){return new m(e,r)};g.Map.rangeTheme3DLayer=_},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.uniqueTheme3DLayer=e.UniqueTheme3DLayer=undefined;var n=r(11);var i=y(n);var o=r(5);var s=y(o);var a=r(6);var u=y(a);var l=r(12);var c=y(l);var h=r(13);var f=y(h);var p=r(7);var d=r(185);function y(t){return t&&t.__esModule?t:{default:t}}var v=p.Common.extend,g=p.Common.Zondy;var m=function(t){(0,f.default)(e,t);function e(t,r){(0,s.default)(this,e);var n=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r));n.colorStops=null;n.heightStops=null;v(n,r);return n}(0,u.default)(e,[{key:"getLayerStyleOptions",value:function t(){var e=this.opacity==null?1:this.opacity;e=isNaN(parseFloat(e))?1:parseFloat(e);var r={"fill-extrusion-color":{stops:this.colorStops,property:this.themeField,type:"categorical"},"fill-extrusion-opacity":e};if(this.height!=null){r["fill-extrusion-height"]=this.height}else{r["fill-extrusion-height"]={property:this.heightField||"height",type:"categorical",stops:this.heightStops}}if(this.baseHeightField){r["fill-extrusion-base"]={property:this.baseHeightField,type:"identity"}}return r}},{key:"getHighlightStyleOptions",value:function t(){var e=this.highlight&&this.highlight.color!=null?this.highlight.color:"#ADA91E";var r={"fill-extrusion-color":e,"fill-extrusion-height":{stops:this.heightStops,property:this.heightField,type:"categorical"},"fill-extrusion-opacity":this.highlight&&this.highlight.opacity||.6};if(this.height!=null){r["fill-extrusion-height"]=this.height||0}return r}},{key:"_createLegendElement",value:function t(){var e="<ul>";var r=this.colorStops&&this.colorStops.length||0;for(var n=0;n<r;n++){var i=this.colorStops[n][0];var o=this.colorStops[n][1];e+="<li><span style='background-color:"+o+";'></span><span>"+i+"</span></li>"}e+="</ul>";return e}}]);return e}(d.Theme3DLayer);e.UniqueTheme3DLayer=m;var _=e.uniqueTheme3DLayer=function t(e,r){return new m(e,r)};g.Map.uniqueTheme3DLayer=_},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.PostgisVectorTileService=e.PostgisTableService=e.PostgisQueryService=e.PostgisCustomQueryService=e.PostgisCatlogService=undefined;var n=r(578);var i=r(579);var o=r(580);var s=r(581);var a=r(582);e.PostgisCatlogService=n.PostgisCatlogService;e.PostgisCustomQueryService=i.PostgisCustomQueryService;e.PostgisQueryService=o.PostgisQueryService;e.PostgisTableService=s.PostgisTableService;e.PostgisVectorTileService=a.PostgisVectorTileService;var u={PostgisCatlogService:n.PostgisCatlogService,PostgisCustomQueryService:i.PostgisCustomQueryService,PostgisQueryService:o.PostgisQueryService,PostgisTableService:s.PostgisTableService,PostgisVectorTileService:a.PostgisVectorTileService};e.default=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.PostgisCatlogService=undefined;var n=r(2);var i=y(n);var o=r(1);var s=y(o);var a=r(9);var u=y(a);var l=r(3);var c=y(l);var h=r(4);var f=y(h);var p=r(0);var d=r(82);function y(t){return t&&t.__esModule?t:{default:t}}var v=e.PostgisCatlogService=function(t){(0,f.default)(e,t);function e(t){(0,s.default)(this,e);var r=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t));r.serviceUrl="/datastore/rest/catalog/pg/services/";r.path=t.path;r.classify=t.classify;r.keyWords=t.keyWords;r.fixOption(t);return r}(0,u.default)(e,[{key:"fixOption",value:function t(e){this.option={classify:e.classify,keyWords:e.keyWords,pageSize:e.pageSize,pageNo:e.pageNo}}},{key:"query",value:function t(e,r){var n=this.serviceUrl,i=this.path,o=this.option;n+=i;var s=this.getFullUrl(n,o);this.get(s,e,r)}}]);return e}(d.DataStoreService);e.default=v;p.Zondy.DataStore.PostGIS.PostgisCatlogService=v},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.PostgisCustomQueryService=undefined;var n=r(2);var i=y(n);var o=r(1);var s=y(o);var a=r(9);var u=y(a);var l=r(3);var c=y(l);var h=r(4);var f=y(h);var p=r(0);var d=r(82);function y(t){return t&&t.__esModule?t:{default:t}}var v=e.PostgisCustomQueryService=function(t){(0,f.default)(e,t);function e(t){(0,s.default)(this,e);var r=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t));r.serviceUrl="/datastore/rest/dataset/pg/executequery/";r.path=t.path;r.queryBody=t.queryBody;r.fixOption(t);return r}(0,u.default)(e,[{key:"fixOption",value:function t(e){this.option={queryBody:e.queryBody}}},{key:"query",value:function t(e,r){var n=this.serviceUrl,i=this.path,o=this.option;n+=i;var s=this.getFullUrl(n,o);this.get(s,e,r)}}]);return e}(d.DataStoreService);e.default=v;p.Zondy.DataStore.PostGIS.PostgisCustomQueryService=v},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.PostgisQueryService=undefined;var n=r(2);var i=y(n);var o=r(1);var s=y(o);var a=r(9);var u=y(a);var l=r(3);var c=y(l);var h=r(4);var f=y(h);var p=r(0);var d=r(82);function y(t){return t&&t.__esModule?t:{default:t}}var v=e.PostgisQueryService=function(t){(0,f.default)(e,t);function e(t){(0,s.default)(this,e);var r=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t));r.serviceUrl="/datastore/rest/dataset/pg/query/";r.path=t.path;r.geometry=t.geometry;r.geoFormat=t.geoFormat;r.sref=t.sref;r.filter=t.filter;r.fields=t.fields;r.segments=t.segments;r.statisticFields=t.statisticFields;r.includeProperites=t.includeProperites;r.includeGeometry=t.includeGeometry;r.fixOption(t);return r}(0,u.default)(e,[{key:"fixOption",value:function t(e){this.option={geometry:e.geometry,geoFormat:e.geoFormat,sref:e.sref,filter:e.filter,fields:e.fields,segments:e.segments,statisticFields:e.statisticFields,includeProperites:e.includeProperites,propertyNames:e.propertyNames,includeGeometry:e.includeGeometry,pageSize:e.pageSize,pageNo:e.pageNo}}},{key:"query",value:function t(e,r){var n=this.serviceUrl,i=this.path,o=this.option,s=this.geometry,a=this.geoFormat;n+=i;var u=this.getFullUrl(n,o);this.get(u,e,r)}},{key:"queryByWkt",value:function t(e){}},{key:"queryByGeojson",value:function t(e){}},{key:"queryByCircle",value:function t(e){}},{key:"queryByRect",value:function t(e){}}]);return e}(d.DataStoreService);e.default=v;p.Zondy.DataStore.PostGIS.PostgisQueryService=v},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.PostgisTableService=undefined;var n=r(2);var i=y(n);var o=r(1);var s=y(o);var a=r(9);var u=y(a);var l=r(3);var c=y(l);var h=r(4);var f=y(h);var p=r(0);var d=r(82);function y(t){return t&&t.__esModule?t:{default:t}}var v=e.PostgisTableService=function(t){(0,f.default)(e,t);function e(t){(0,s.default)(this,e);var r=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t));r.serviceUrl="/datastore/rest/dataset/pg/schema/";r.path=t.path;r.tableNames=t.tableNames;r.fixOption(t);return r}(0,u.default)(e,[{key:"fixOption",value:function t(e){this.option={tableNames:e.tableNames}}},{key:"query",value:function t(e,r){var n=this.serviceUrl,i=this.path,o=this.option;n+=i;var s=this.getFullUrl(n,o);this.get(s,e,r)}}]);return e}(d.DataStoreService);e.default=v;p.Zondy.DataStore.PostGIS.PostgisTableService=v},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.PostgisVectorTileService=undefined;var n=r(2);var i=y(n);var o=r(1);var s=y(o);var a=r(9);var u=y(a);var l=r(3);var c=y(l);var h=r(4);var f=y(h);var p=r(0);var d=r(82);function y(t){return t&&t.__esModule?t:{default:t}}var v=e.PostgisVectorTileService=function(t){(0,f.default)(e,t);function e(t){(0,s.default)(this,e);var r=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t));r.serviceUrl="/datastore/rest/dataset/pg/vectortile/";r.path=t.path;r.version=t.version;r.tileMatrix=t.tileMatrix;r.tileRow=t.tileRow;r.tileCol=t.tileCol;r.fixOption(t);return r}(0,u.default)(e,[{key:"fixOption",value:function t(e){this.option={version:e.version,tileMatrix:e.tileMatrix,tileRow:e.tileRow,tileCol:e.tileCol}}},{key:"getWmtsUrl",value:function t(){var e=this.serviceUrl,r=this.path,n=this.option;e+=r;var i=this.getFullUrl(e,n);i=decodeURI(i);return i}},{key:"query",value:function t(e,r){var n=this.serviceUrl,i=this.path,o=this.option;n+=i;var s=this.getFullUrl(n,o);this.get(s,e,r)}}]);return e}(d.DataStoreService);e.default=v;p.Zondy.DataStore.PostGIS.PostgisVectorTileService=v},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.DeckglLayer=e.MapvLayer=e.EchartsLayer=undefined;var n=r(584);var i=r(586);var o=r(589);e.EchartsLayer=n.EchartsLayer;e.MapvLayer=i.MapvLayer;e.DeckglLayer=o.DeckglLayer},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.EchartsLayer=undefined;var n=r(5);var i=f(n);var o=r(6);var s=f(o);var a=r(19);var u=f(a);var l=r(312);var c=f(l);r(70);var h=r(585);function f(t){return t&&t.__esModule?t:{default:t}}var p=e.EchartsLayer=function(){function t(e,r){(0,i.default)(this,t);this.map=e;this.options=r;this.layerId=r.layerId||"echartlayerdefaultid";this.layerClass=r.classId||"echartlayerdefaultclass";this.initDevicePixelRatio();this.mapContainer=e.getCanvasContainer();this.canvas=this._createCanvas();this.mapContainer.appendChild(this.canvas);this.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px";this.chart=c.default.init(this.canvas);this.visible=true;this.initEcharts();this._resizeCanvas();return this}(0,s.default)(t,[{key:"initDevicePixelRatio",value:function t(){this.devicePixelRatio=1}},{key:"initEcharts",value:function t(){c.default.mapboxglMap=this.map;c.default.registerCoordinateSystem("mapboxgl",h.MapCoordSys);c.default.extendComponentModel({type:"mapboxgl",getBMap:function t(){return this.__mapboxgl},defaultOption:{roam:false}});c.default.registerAction({type:"MapboxGLRoma",event:"MapboxGLRoma",update:"updateLayout"},function(t,e){});return this}},{key:"_createCanvas",value:function t(){var e=document.createElement("div");e.id=this.layerId;e.style.position="absolute";e.style.top="0px";e.style.left="0px";e.width=parseInt(this.map.getCanvas().style.width);e.height=parseInt(this.map.getCanvas().style.height);e.style.width=this.map.getCanvas().style.width;e.style.height=this.map.getCanvas().style.height;e.setAttribute("id",this.layerId);e.setAttribute("class",this.layerClass);debugger;var r=this.devicePixelRatio;if(this.mapVOptions.context=="2d"){e.getContext(this.mapVOptions.context).scale(r,r)}return e}},{key:"_resizeCanvas",value:function t(){var e=this;window.onresize=function(){var t=e.canvas;var r=e.map;t.style.position="absolute";t.style.top="0px";t.style.left="0px";t.style.width=r.getCanvas().style.width;t.style.height=r.getCanvas().style.height;t.width=parseInt(r.getCanvas().style.width);t.height=parseInt(r.getCanvas().style.height);e.chart.resize()}}},{key:"addTo",value:function t(e){var r=this;c.default.extendComponentView({type:"mapboxgl",render:function t(e,n,i){var o=true;var s=c.default.mapboxglMap;var a=i.getZr().painter.getViewportRoot();var u=e.coordinateSystem;var l=function t(n,s){if(o||!r.visible){return}console.log("--------------");var l=document.getElementsByClassName("mapboxgl-map")[0];var c=[-parseInt(l.style.left,10)||0,-parseInt(l.style.top,10)||0];a.style.left=c[0]+"px";a.style.top=c[1]+"px";u.setMapOffset(c);e.__mapOffset=c;i.dispatchAction({type:"MapboxGLRoma"})};function h(){if(o||!r.visible){return}i.dispatchAction({type:"MapboxGLRoma"})}s.off("move",this._oldMoveHandler);s.off("zoomend",this._oldZoomEndHandler);s.on("move",l);s.on("zoomend",h);this._oldMoveHandler=l;this._oldZoomEndHandler=h;var f=e.get("roam");if(f&&f!=="scale"){}else{}if(f&&f!=="move"){}else{}o=false}});this.chart.setOption(this.options);return this}},{key:"_visible",value:function t(){this.visible=true;this.canvas.style.visibility="visible"}},{key:"_unvisible",value:function t(){this.visible=false;this.canvas.style.visibility="hidden"}},{key:"show",value:function t(){this._visible()}},{key:"hide",value:function t(){this._unvisible()}},{key:"remove",value:function t(){var e=this;this.map._listeners.move.forEach(function(t){if(t.name==="moveHandler"){e.map.off("move",t)}});this.map._listeners.move.forEach(function(t){if(t.name==="zoomEndHandler"){e.map.off("zoomend",t)}});this.chart.clear();if(this.canvas.parentNode)this.canvas.parentNode.removeChild(this.canvas);this.map=undefined;return this}},{key:"update",value:function t(e){this.chart.setOption(e)}}]);return t}();u.default.zondy.EchartsLayer=p},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.MapCoordSys=u;var n=r(19);var i=a(n);var o=r(312);var s=a(o);function a(t){return t&&t.__esModule?t:{default:t}}function u(t,e){this._MapboxGLMap=t;this.dimensions=["lng","lat"];this._mapOffset=[0,0];this._api=e}u.prototype.dimensions=["lng","lat"];u.prototype.setMapOffset=function(t){this._mapOffset=t};u.prototype.getBMap=function(){return this._MapboxGLMap};u.prototype.dataToPoint=function(t){var e=this._MapboxGLMap.project(t);var r=this._mapOffset;return[e.x-r[0],e.y-r[1]]};u.prototype.pointToData=function(t){var e=this._mapOffset;var t=this._MapboxGLMap.project([t[0]+e[0],t[1]+e[1]]);return[t.lng,t.lat]};u.prototype.getViewRect=function(){var t=this._api;return new s.default.graphic.BoundingRect(0,0,t.getWidth(),t.getHeight())};u.prototype.getRoamTransform=function(){return s.default.matrix.create()};u.prototype.prepareCustoms=function(t){var e=s.default.util;var r=this.getViewRect();return{coordSys:{type:"mapboxgl",x:r.x,y:r.y,width:r.width,height:r.height},api:{coord:e.bind(this.dataToPoint,this),size:e.bind(n,this)}};function n(t,r){r=r||[0,0];return e.map([0,1],function(e){var n=r[e];var i=t[e]/2;var o=[];var s=[];o[e]=n-i;s[e]=n+i;o[1-e]=s[1-e]=r[1-e];return Math.abs(this.dataToPoint(o)[e]-this.dataToPoint(s)[e])},this)}};u.dimensions=u.prototype.dimensions;u.create=function(t,e){var r;t.eachComponent("mapboxgl",function(t){var n=e.getZr().painter.getViewportRoot();var i=s.default.mapboxglMap;r=new u(i,e);r.setMapOffset(t.__mapOffset||[0,0]);t.coordinateSystem=r});t.eachSeries(function(t){if(t.get("coordinateSystem")==="mapboxgl"){t.coordinateSystem=r}})};e.default=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.MapvLayer=undefined;var n=r(5);var i=c(n);var o=r(6);var s=c(o);var a=r(19);var u=c(a);r(70);var l=r(587);function c(t){return t&&t.__esModule?t:{default:t}}var h=e.MapvLayer=function(){function t(e,r,n){(0,i.default)(this,t);this.map=e;this.layerID=n.layerID;delete n["layerID"];this.mapvBaseLayer=new l.MapvBaseLayer(e,r,n,this);this.mapVOptions=n;this.initDevicePixelRatio();this.canvas=this._createCanvas();this.render=this.render.bind(this);this.bindEvent();this.mapContainer=e.getCanvasContainer();this.mapContainer.appendChild(this.canvas);this._reset()}(0,s.default)(t,[{key:"initDevicePixelRatio",value:function t(){this.devicePixelRatio=1}},{key:"bindEvent",value:function t(){var e=this.map;this.innerMoveStart=this.moveStartEvent.bind(this);this.innerMoveEnd=this.moveEndEvent.bind(this);this.innnerZoomStart=this.zoomStartEvent.bind(this);this.innnerZoomEnd=this.zoomEndEvent.bind(this);this.innnerRotateStart=this.rotateStartEvent.bind(this);this.innnerRotateEnd=this.rotateEndEvent.bind(this);this.innerResize=this.resizeEvent.bind(this);this.innerRemove=this.removeEvent.bind(this);e.on("resize",this.innerResize);e.on("zoomstart",this.innnerZoomStart);e.on("zoomend",this.innnerZoomEnd);e.on("rotatestart",this.innnerRotateStart);e.on("rotateend",this.innnerRotateEnd);e.on("movestart",this.innerMoveStart);e.on("moveend",this.innerMoveEnd);this.map.on("remove",this.innerRemove)}},{key:"unbindEvent",value:function t(){var e=this.map;e.off("resize",this.innerResize);e.off("zoomstart",this.innnerZoomStart);e.off("zoomend",this.innnerZoomEnd);e.off("rotatestart",this.innnerRotateStart);e.off("rotateend",this.innnerRotateEnd);e.off("movestart",this.innerMoveStart);e.off("moveend",this.innerMoveEnd)}},{key:"moveStartEvent",value:function t(){this.mapvBaseLayer.animatorMovestartEvent();this._unvisiable()}},{key:"moveEndEvent",value:function t(){this.mapvBaseLayer.animatorMoveendEvent();this._reset();this._visiable()}},{key:"zoomStartEvent",value:function t(){this._unvisiable()}},{key:"zoomEndEvent",value:function t(){this._unvisiable()}},{key:"rotateStartEvent",value:function t(){this.mapvBaseLayer.animatorMovestartEvent();this._unvisiable()}},{key:"rotateEndEvent",value:function t(){this.mapvBaseLayer.animatorMoveendEvent();this._reset();this._visiable()}},{key:"resizeEvent",value:function t(){this._reset();this._visiable()}},{key:"removeEvent",value:function t(){this.mapContainer.removeChild(this.canvas)}},{key:"addData",value:function t(e,r){this.mapvBaseLayer.addData(e,r)}},{key:"updateData",value:function t(e,r){this.mapvBaseLayer.updateData(e,r)}},{key:"getData",value:function t(){if(this.mapvBaseLayer){this.dataSet=this.mapvBaseLayer.getData()}return this.dataSet}},{key:"removeData",value:function t(e){this.mapvBaseLayer&&this.mapvBaseLayer.removeData(e)}},{key:"removeAllData",value:function t(){this.mapvBaseLayer.clearData()}},{key:"_visiable",value:function t(){this.canvas.style.display="block";return this}},{key:"_unvisiable",value:function t(){this.canvas.style.display="none";return this}},{key:"_createCanvas",value:function t(){var e=document.createElement("canvas");var r=this.devicePixelRatio;e.id=this.layerID;e.style.position="absolute";e.style.top="0px";e.style.left="0px";e.width=parseInt(this.map.getCanvas().style.width)*r;e.height=parseInt(this.map.getCanvas().style.height)*r;if(!this.mapVOptions.context||this.mapVOptions.context=="2d"){e.getContext("2d").scale(r,r)}e.style.width=this.map.getCanvas().style.width;e.style.height=this.map.getCanvas().style.height;return e}},{key:"_reset",value:function t(){if(this.canvas==null){return}this.resizeCanvas();this.fixPosition();this.onResize();this.render()}},{key:"draw",value:function t(){return this._reset()}},{key:"show",value:function t(){this._visiable()}},{key:"hide",value:function t(){this._unvisiable()}},{key:"update",value:function t(e){if(e==undefined){return}this.updateData(e.data,e.options)}},{key:"resizeCanvas",value:function t(){this.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px";if(this.canvas==undefined||this.canvas==null)return;var e=this.canvas;var r=this.devicePixelRatio;e.style.position="absolute";e.style.top="0px";e.style.left="0px";e.width=parseInt(this.map.getCanvas().style.width)*r;e.height=parseInt(this.map.getCanvas().style.height)*r;if(!this.mapVOptions.context||this.mapVOptions.context=="2d"){e.getContext("2d").scale(r,r)}}},{key:"fixPosition",value:function t(){}},{key:"onResize",value:function t(){}},{key:"originPosition",value:function t(){this.originPitch=this.map.getPitch();this.originBearing=this.map.getBearing();var e=this.map.project(new u.default.LngLat(0,0));this.originX=e.x;this.originY=e.y}},{key:"render",value:function t(){if(this.mapvBaseLayer==undefined)return;this.mapvBaseLayer._canvasUpdate()}},{key:"moveTo",value:function t(e,r){var n=document.getElementById(this.layerID);r=r!==undefined?r:true;if(r){var i=document.getElementById(e);if(n&&i){i.parentNode.insertBefore(n,i)}return}var o=document.getElementById(e);if(n){if(o.nextSibling){o.parentNode.insertBefore(n,o.nextSibling);return}o.parentNode.appendChild(n)}}},{key:"remove",value:function t(){this.removeAllData();this.unbindEvent();this.mapContainer.removeChild(this.canvas);this.disposeFlag=true}},{key:"destroy",value:function t(){this.removeAllData();this.unbindEvent();this.mapContainer.removeChild(this.canvas);this.disposeFlag=true}}]);return t}();u.default.zondy.MapvLayer=h},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.MapvBaseLayer=undefined;var n=r(11);var i=m(n);var o=r(5);var s=m(o);var a=r(6);var u=m(a);var l=r(12);var c=m(l);var h=r(14);var f=m(h);var p=r(13);var d=m(p);var y=r(588);var v=r(19);var g=m(v);function m(t){return t&&t.__esModule?t:{default:t}}var _=y.baiduMapLayer?y.baiduMapLayer.__proto__:Function;var b=e.MapvBaseLayer=function(t){(0,d.default)(e,t);function e(t,r,n,o){(0,s.default)(this,e);var a=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r,n));if(!_)return(0,c.default)(a);a.map=t;a.dataSet=r;var u=a;var l=null;n=n||{};u.init(n);u.argCheck(n);a.initDevicePixelRatio();a.canvasLayer=o;a.stopAniamation=false;a.animation=n.animation;a.mousemoveEvent=a.mousemoveEvent.bind(a);a.bindEvent();return a}(0,u.default)(e,[{key:"initDevicePixelRatio",value:function t(){this.devicePixelRatio=1}},{key:"clickEvent",value:function t(r){var n=r.point;(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"clickEvent",this).call(this,n,r)}},{key:"mousemoveEvent",value:function t(r){var n=r.point;(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"mousemoveEvent",this).call(this,n,r)}},{key:"addAnimatorEvent",value:function t(){}},{key:"animatorMovestartEvent",value:function t(){var e=this.options.animation;if(this.isEnabledTime()&&this.animator){this.steps.step=e.stepsRange.start}}},{key:"animatorMoveendEvent",value:function t(){if(this.isEnabledTime()&&this.animator){}}},{key:"bindEvent",value:function t(){var e=this.map;if(this.options.methods){if(this.options.methods.click){e.on("click",this.clickEvent)}if(this.options.methods.mousemove){e.on("mousemove",this.mousemoveEvent)}}}},{key:"unbindEvent",value:function t(){var e=this.map;if(this.options.methods){if(this.options.methods.click){e.off("click",this.clickEvent)}if(this.options.methods.mousemove){e.off("mousemove",this.mousemoveEvent)}}}},{key:"getContext",value:function t(){return this.canvasLayer.canvas.getContext(this.context)}},{key:"init",value:function t(e){var r=this;r.options=e;this.initDataRange(e);this.context=r.options.context||"2d";if(r.options.zIndex){this.canvasLayer&&this.canvasLayer.setZIndex(r.options.zIndex)}this.initAnimator()}},{key:"_canvasUpdate",value:function t(e){var r=this.map;if(!this.canvasLayer||this.stopAniamation||this.canvasLayer.disposeFlag){return}var n=this;var i=n.options.animation;var o=this.getContext();if(n.isEnabledTime()){if(e===undefined){this.clear(o);return}if(this.context==="2d"){o.save();o.globalCompositeOperation="destination-out";o.fillStyle="rgba(0, 0, 0, .1)";o.fillRect(0,0,o.canvas.width,o.canvas.height);o.restore()}}else{this.clear(o)}if(this.context==="2d"){for(var s in n.options){o[s]=n.options[s]}}else{o.clear(o.COLOR_BUFFER_BIT)}if(n.options.minZoom&&r.getZoom()<n.options.minZoom||n.options.maxZoom&&r.getZoom()>n.options.maxZoom){return}var a={transferCoordinate:function t(e){var n=r.project(new g.default.LngLat(e[0],e[1]));return[n.x,n.y]}};if(e!==undefined){a.filter=function(t){var r=i.trails||10;if(e&&t.time>e-r&&t.time<e){return true}else{return false}}}var u=n.dataSet.get(a);this.processData(u);if(n.options.unit=="m"&&n.options.size){n.options._size=n.options.size}else{n.options._size=n.options.size}var l=r.project(new g.default.LngLat(0,0));this.drawContext(o,new y.DataSet(u),n.options,l);n.options.updateCallback&&n.options.updateCallback(e)}},{key:"updateData",value:function t(r,n){var o=r;if(o&&o.get){o=o.get()}if(o!=undefined){this.dataSet.set(o)}(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"update",this).call(this,{options:n})}},{key:"addData",value:function t(e,r){var n=e;if(e&&e.get){n=e.get()}this.dataSet.add(n);this.update({options:r})}},{key:"getData",value:function t(){return this.dataSet}},{key:"removeData",value:function t(e){if(!this.dataSet){return}var r=this.dataSet.get({filter:function t(r){return e!=null&&typeof e==="function"?!e(r):true}});this.dataSet.set(r);this.update({options:null})}},{key:"clearData",value:function t(){this.dataSet&&this.dataSet.clear();this.update({options:null})}},{key:"draw",value:function t(){this.canvasLayer.draw()}},{key:"clear",value:function t(e){e&&e.clearRect&&e.clearRect(0,0,e.canvas.width,e.canvas.height)}}]);return e}(_)},function(t,e){t.exports=function(){try{return mapv}catch(t){return{}}}()},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.DeckglLayer=undefined;var n=r(5);var i=c(n);var o=r(6);var s=c(o);var a=r(19);var u=c(a);r(70);var l=r(590);function c(t){return t&&t.__esModule?t:{default:t}}var h=e.DeckglLayer=function(){function t(e,r){(0,i.default)(this,t);this.layerTypeID=e;this.data=[].concat(r.data);this.props=r.props?r.props:{};this.callback=r.callback?r.callback:{};this.id=r.layerId?r.layerId:"graphicLayer_"+this.layerTypeID+"_";this.visibility=true}(0,s.default)(t,[{key:"onAdd",value:function t(e){this.map=e;if(this.canvas){this.mapContainer=this.map.getCanvasContainer();this.mapContainer.appendChild(this.canvas);return this}if(e.getCRS&&e.getCRS()!==u.default.CRS.EPSG3857){this.coordinateSystem=3;this.isGeographicCoordinateSystem=true}this._initContainer();this._createLayerByLayerTypeID();var r=this._getState();var n={};for(var i in r){n[i]=r[i]}n.layers=[this.layer];n.canvas=this.canvas;this.deckGL=new window.DeckGL.experimental.DeckGLJS(n);this.map.on("render",this._moveEvent.bind(this));this.map.on("resize",this._resizeEvent.bind(this));this._draw();return this}},{key:"addTo",value:function t(e){this.map=e;if(this.canvas){this.mapContainer=this.map.getCanvasContainer();this.mapContainer.appendChild(this.canvas);return this}if(e.getCRS&&e.getCRS()!==u.default.CRS.EPSG3857){this.coordinateSystem=3;this.isGeographicCoordinateSystem=true}this._initContainer();this._createLayerByLayerTypeID();var r=this._getState();var n={};for(var i in r){n[i]=r[i]}n.layers=[this.layer];n.canvas=this.canvas;this.deckGL=new window.DeckGL.experimental.DeckGLJS(n);this.map.on("render",this._moveEvent.bind(this));this.map.on("resize",this._resizeEvent.bind(this));this._draw();return this}},{key:"remove",value:function t(){this.map.off("render",this._moveEvent.bind(this));this.map.off("resize",this._resizeEvent.bind(this));this.map.getCanvasContainer().removeChild(this.canvas)}},{key:"removeFromMap",value:function t(){this.remove();this.clear()}},{key:"moveTo",value:function t(e,r){var n=document.getElementById(this.id);r=r!==undefined?r:true;if(r){var i=document.getElementById(e);if(n&&i){i.parentNode.insertBefore(n,i)}return}var o=document.getElementById(e);if(n){if(o.nextSibling){o.parentNode.insertBefore(n,o.nextSibling);return}o.parentNode.appendChild(n)}}},{key:"setVisibility",value:function t(e){if(this.canvas&&e!==this.visibility){this.visibility=e;this.canvas.style.display=e?"block":"none"}}},{key:"setStyle",value:function t(e){l.Util.extend(this.props,e);this._createLayerByLayerTypeID();this.update()}},{key:"setData",value:function t(e){this.data=this.data||[];this.data.length=0;var r=!l.Util.isArray(e)?[e]:[].concat(e);if(!this.layer.props.data){this.layer.props.data=[]}this.layer.props.data.length=0;for(var n=0;n<r.length;n++){this.layer.props.data.push(r[n])}this.data=this.layer.props.data;this.update()}},{key:"addData",value:function t(e){this.data=this.data||[];var r=!l.Util.isArray(e)?[e]:[].concat(e);if(!this.layer.props.data){this.layer.props.data=[]}for(var n=0;n<r.length;n++){this.layer.props.data.push(r[n])}this.update()}},{key:"update",value:function t(){if(this.layer.lifecycle!=="Awaiting state"){var e={dataChanged:true,propsChanged:true,viewportChanged:true,updateTriggersChanged:true};this.layer.setChangeFlags(e)}this._draw()}},{key:"clear",value:function t(){this.removeData();this.deckGL.finalize()}},{key:"removeData",value:function t(){this.data.length=0;if(this.layer.props.data){this.layer.props.data.length=0}this.update()}},{key:"_draw",value:function t(){var e=this._getState();e.layers=[this.layer];e.canvas=this.canvas;this.deckGL.setProps(e)}},{key:"_getState",value:function t(){var e=this.map;var r=parseInt(this.canvas.style.width);var n=parseInt(this.canvas.style.height);var i=e.getCenter();var o=i.lng;var s=i.lat;var a=e.getZoom();var l=e.getMaxZoom();var c=e.getPitch();var h=e.getBearing();var f={width:r,height:n,longitude:o,latitude:s,zoom:a,maxZoom:l,pitch:c,bearing:h};var p={};for(var d in f){p[d]=f[d]}for(var y in this.props){p[y]=this.props[y]}if(e.getCRS&&e.getCRS()!==u.default.CRS.EPSG3857){p.coordinateSystem=this.coordinateSystem;p.isGeographicCoordinateSystem=this.isGeographicCoordinateSystem}p.data=this.data;return p}},{key:"_createLayerByLayerTypeID",value:function t(){this.props.data=this.data;this.props.isGeographicCoordinateSystem=this.isGeographicCoordinateSystem;this.props.coordinateSystem=this.coordinateSystem;this.props.pickable=Boolean(this.props.onClick)||Boolean(this.props.onHover);if(this.layerTypeID==="scatter-plot"){this.props.id="scatter-plot";this._createScatterPlotLayer()}else if(this.layerTypeID==="path-layer"){this.props.id="path-layer";this._createPathLayer()}else if(this.layerTypeID==="polygon-layer"){this.props.id="polygon-layer";this._createPolygonLayer()}else if(this.layerTypeID==="arc-layer"){this.props.id="arc-layer";this._createArcLineLayer()}else if(this.layerTypeID==="hexagon-layer"){this.props.id="hexagon-layer";this._createHexagonLayer()}else{throw new Error(this.layerTypeID+" does not support")}}},{key:"_createScatterPlotLayer",value:function t(){var e=this;this.props.getPosition=this.callback.getPosition?this.callback.getPosition:function(t){if(!t){return[0,0,0]}var e=t.getLngLat();return e&&[e.lng,e.lat,0]};if(this.callback.getColor){this.props.getColor=this.callback.getColor?this.callback.getColor:function(t){var r=t&&t.getStyle();return r&&r.color||e.props.color}}if(this.callback.getRadius){this.props.getRadius=this.callback.getRadius?this.callback.getRadius:function(t){var r=t&&t.getStyle();return r&&r.radius||e.props.radius}}if(this.props.color||this.props.radius){this.props.updateTriggers={};if(this.props.radius){this.props.updateTriggers.getRadius=[this.props.radius]}if(this.props.color){this.props.updateTriggers.getColor=[this.props.color]}}this.layer=new window.DeckGL.ScatterplotLayer(this.props)}},{key:"_createPathLayer",value:function t(){this.props.getPath=this.callback.getPath?this.callback.getPath:function(t){return t.geometry.coordinates};if(this.callback.getColor){this.props.getColor=this.callback.getColor}if(this.callback.getWidth){this.props.getWidth=this.callback.getWidth}if(this.callback.getDashArray){this.props.getDashArray=this.callback.getDashArray}this.layer=new window.DeckGL.PathLayer(this.props)}},{key:"_createPolygonLayer",value:function t(){this.props.getPolygon=this.callback.getPolygon?this.callback.getPolygon:function(t){return t.geometry.coordinates};if(this.callback.getElevation){this.props.getElevation=this.callback.getElevation}if(this.callback.getFillColor){this.props.getFillColor=this.callback.getFillColor}if(this.callback.getLineColor){this.props.getLineColor=this.callback.getLineColor}if(this.callback.getLineWidth){this.props.getLineWidth=this.callback.getLineWidth}this.props.updateTriggers={};this.props.updateTriggers.getColor=this.props.color?this.props.color:[0,0,128,128];this.layer=new window.DeckGL.PolygonLayer(this.props)}},{key:"_createArcLineLayer",value:function t(){this.props.getSourcePosition=this.callback.getSourcePosition?this.callback.getSourcePosition:function(t){if(!t){return[0,0,0]}return t.geometry.coordinates[0]};this.props.getTargetPosition=this.callback.getTargetPosition?this.callback.getTargetPosition:function(t){if(!t){return[0,0,0]}return t.geometry.coordinates[1]};if(this.callback.getStrokeWidth){this.props.getStrokeWidth=this.callback.getStrokeWidth}if(this.callback.getSourceColor){this.props.getSourceColor=this.callback.getSourceColor}if(this.callback.getTargetColor){this.props.getTargetColor=this.callback.getTargetColor}this.layer=new window.DeckGL.ArcLayer(this.props)}},{key:"_createHexagonLayer",value:function t(){this.props.getPosition=this.callback.getPosition?this.callback.getPosition:function(t){if(!t){return[0,0,0]}return t.geometry.coordinates};if(this.callback.getColorValue){this.props.getColorValue=this.callback.getColorValue}if(this.callback.getElevationValue){this.props.getElevationValue=this.callback.getElevationValue}this.layer=new window.DeckGL.HexagonLayer(this.props)}},{key:"_initContainer",value:function t(){this.canvas=this._createCanvas();this.mapContainer=this.map.getCanvasContainer();this.mapContainer.appendChild(this.canvas)}},{key:"_createCanvas",value:function t(){var e=document.createElement("canvas");e.id=this.id;e.style.position="absolute";e.style.top=0+"px";e.style.left=0+"px";e.style.cursor="";var r=this.map;e.width=parseInt(r.getCanvas().style.width);e.height=parseInt(r.getCanvas().style.height);e.style.width=r.getCanvas().style.width;e.style.height=r.getCanvas().style.height;return e}},{key:"_moveEvent",value:function t(){this._draw()}},{key:"_resizeEvent",value:function t(){var e=this.canvas;var r=this.map;e.width=parseInt(r.getCanvas().style.width);e.height=parseInt(r.getCanvas().style.height);e.style.width=r.getCanvas().style.width;e.style.height=r.getCanvas().style.height;this._draw()}}]);return t}();u.default.zondy.DeckglLayer=h},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Util=undefined;var n=r(591);var i=h(n);var o=r(5);var s=h(o);var a=r(6);var u=h(a);var l=r(19);var c=h(l);r(70);function h(t){return t&&t.__esModule?t:{default:t}}var f=e.Util=function(){function t(){(0,s.default)(this,t)}(0,u.default)(t,null,[{key:"isArray",value:function t(e){return Object.prototype.toString.call(e)=="[object Array]"}},{key:"toProcessingParam",value:function t(e){var r={};if(e.length<1){r=""}else{var n=[];for(var i=0;i<e.length;i++){var o={};o.x=e[i][0];o.y=e[i][1];n.push(o)}r.type="REGION";r.points=n}return r}},{key:"extend",value:function t(e){for(var r=0;r<(0,i.default)(arguments).length;r++){var n=(0,i.default)(arguments)[r];if(n=="caller"||n=="callee"||n=="length"||n=="arguments"){continue}var o=arguments[n];if(o){for(var s=0;s<(0,i.default)(o).length;s++){var a=(0,i.default)(o)[s];if(n=="caller"||n=="callee"||n=="length"||n=="arguments"){continue}e[a]=o[a]}}}return e}},{key:"isNumber",value:function t(e){if(e===""){return false}var r=Number(e);if(r===0){return true}return!isNaN(r)}},{key:"isString",value:function t(e){return typeof e==="string"&&e.constructor===String}},{key:"newGuid",value:function t(e){var r=e||32;var n="";for(var i=1;i<r;i++){var o=Math.floor(Math.random()*16).toString(16);n+=o}return n}},{key:"hexToRgba",value:function t(e,r){var n=[],i=[];e=e.replace(/#/,"");if(e.length==3){var o=[];for(var s=0;s<3;s++){o.push(e.charAt(s)+e.charAt(s))}e=o.join("")}for(var a=0;a<6;a+=2){n[a]="0x"+e.substr(a,2);i.push(parseInt(Number(n[a])))}i.push(r);return"rgba("+i.join(",")+")"}},{key:"isMatchAdministrativeName",value:function t(e,r){if(this.isString(r)){var n=e.substr(0,2);if(n==="张家"){n=e.substr(0,3)}return!!r.match(new RegExp(n))}return false}}]);return t}();c.default.zondy.Util=f},function(t,e,r){t.exports={default:r(592),__esModule:true}},function(t,e,r){r(593);var n=r(21).Object;t.exports=function t(e){return n.getOwnPropertyNames(e)}},function(t,e,r){r(168)("getOwnPropertyNames",function(){return r(274).f})}]);